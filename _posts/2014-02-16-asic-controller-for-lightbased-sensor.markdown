---

title: ASIC controller for light-based sensor
abstract: A controller for a light-based touch screen including a chip package coupled with a light-based touch screen, emitter driver circuitry inside the chip package for selectively activating a plurality of photoemitters that are outside of the chip package, detector driver circuitry inside the chip package for selectively activating a plurality of photo detectors that are outside of the chip package, detector signal processing circuitry for generating detection signals representing measured amounts of light detected on the plurality of photo detectors, a first plurality of signal conducting pins for connecting the plurality of photoemitters outside the chip package to the emitter driver circuitry inside the chip package, a second plurality of signal conducting pins for connecting the plurality of photo detectors outside the chip package to the detector driver circuitry and to the detector signal processing circuitry inside the chip package, controller circuitry inside the chip package for controlling the emitter driver circuitry and the detector driver circuitry, and at least one input/output pin for communicating with a host processor and for outputting the detection signals generated by the detector signal processing circuitry to the host processor, for the host processor to identify one or more locations on the touch screen that are being touched.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09035917&OS=09035917&RS=09035917
owner: Neonode Inc.
number: 09035917
owner_city: Santa Clara
owner_country: US
publication_date: 20140216
---
This application claims priority benefit from U.S. Provisional Application No. 61 564 081 entitled ASIC CONTROLER FOR LIGHT BASED TOUCH SCREEN filed on Nov. 28 2011 by inventors Anders Jansson Thomas Eriksson Joseph Shain Niklas Kvist Robert Pettersson Lars Sparf and John Karlsson.

This application claims priority benefit of PCT Application No. PCT US11 29191 entitled LENS ARRANGEMENT FOR LIGHT BASED TOUCH SCREEN filed on Mar. 21 2011 which claims priority from the following five U.S. provisional patent applications the disclosures of which are hereby incorporated by reference.

This application is a continuation in part of the following five U.S. patent applications the disclosures of which are also hereby incorporated by reference.

Many consumer electronic devices are now being built with touch sensitive screens for use with finger or stylus touch user inputs. These devices range from small screen devices such as mobile phones and car entertainment systems to mid size screen devices such as notebook computers to large screen devices such as check in stations at airports.

Most conventional touch screen systems are based on resistive or capacitive layers. Such systems are not versatile enough to offer an all encompassing solution as they are not easily scalable.

Reference is made to which is a prior art illustration of a conventional touch screen system. Such systems include an LCD display surface a resistive or capacitive overlay that is placed over the LCD surface and a controller integrated circuit IC that connects to the overlay and converts inputs from the overlay to meaningful signals. A host device not shown such as a computer receives the signals from controller IC and a device driver or such other program interprets the signals to detect a touch based input such as a key press or scroll movement.

Reference is made to which is a prior art illustration of a conventional resistive touch screen. Shown in are conductive and resistive layers separated by thin spaces. A PET film overlays a top circuit layer which overlays a conductive coating . Similarly a conductive coating with spacer dots overlays a bottom circuit layer which overlays a glass layer . When a pointer such as a finger or a stylus touches the screen a contact is created between resistive layers closing a switch. A controller determines the current between layers to derive the position of the touch point.

A disadvantage of resistive touch screens is that as a result of the overlay the screens are not fully transparent. Another disadvantage is that pressure is required for touch detection i.e. a pointer that touches the screen without sufficient pressure goes undetected. As a consequence resistive touch screens do not detect finger touches well. Another disadvantage is that resistive touch screens are generally unreadable in direct sunlight. Another disadvantage is that resistive touch screens are sensitive to scratches. Yet another disadvantage is that resistive touch screens are unable to discern that two or more pointers are touching the screen simultaneously referred to as multi touch .

Reference is made to which is a prior art illustration of a conventional surface capacitive touch screen. Shown in is a touch surface overlaying a coated glass substrate . Two sides of a glass are coated with a uniform conductive indium tin oxide ITO coating . In addition a silicon dioxide hard coating is coated on the front side of one of the ITO coating layers . Electrodes are attached at the four corners of the glass for generating an electric current. A pointer such as a finger or a stylus touches the screen and draws a small amount of current to the point of contact. A controller then determines the location of the touch point based on the proportions of current passing through the four electrodes.

A disadvantage of surface capacitive touch screens is that as a result of the overlay the screens are not fully transparent. Another disadvantage is a limited temperature range for operation. Another disadvantage is a limited capture speed of pointer movements due to the capacitive nature of the touch screens. Another disadvantage is that surface capacitive touch screens are susceptible to radio frequency RF interference and electromagnetic EM interference. Another disadvantage is that the accuracy of touch location determination depends on the capacitance. Another disadvantage is that surface capacitive touch screens cannot be used with gloves. Another disadvantage is that surface capacitive touch screens require a large screen border. As a consequence surface capacitive touch screens cannot be used with small screen devices. Yet another disadvantage is that surface capacitive touch screens are unable to discern a multi touch.

Reference is made to which is a prior art illustration of a conventional projected capacitive touch screen. Shown in are etched ITO layers that form multiple horizontal x axis and vertical y axis electrodes. Etched layers include outer hard coat layers and an x axis electrode pattern a y axis electrode pattern and an ITO glass in the middle. AC signals drive the electrodes on one axis and the response through the screen loops back via the electrodes on the other axis. Location of a pointer touching the screen is determined based on the signal level changes between the horizontal and vertical electrodes.

Advantages of projective capacitive touch screens are finger multi touch detection and a durable surface.

A disadvantage of projected capacitive touch screens is that as a result of the overlay the screens are not fully transparent. Another disadvantage is their high cost. Another disadvantage is a limited temperature range for operation. Another disadvantage is a limited capture speed due to the capacitive nature of the touch screens. Another disadvantage is a limited screen size typically less than 5 . Another disadvantage is that surface capacitive touch screens are susceptible to RF interference and EM interference. Yet another disadvantage is that the accuracy of touch location determination depends on the capacitance.

It will thus be appreciated that conventional touch screens are not ideal for general use with small mobile devices and devices with large screens. It would thus be beneficial to provide touch screens that overcome the disadvantages of conventional resistive and capacitive touch screens described above.

Aspects of the present invention provide novel controllers for light based touch screens. In one embodiment the present invention provides a controller that is a programmable state machine and that executes a scanning program on a series of light emitters and light detectors. The controller supports three modes of operation namely a low power shutdown mode a standby mode and a scanning mode.

The controller does not require a processor core such as an ARM core. As such the cost of light based touch screens using the controller is much less than capacitive touch screens.

There is thus provided in accordance with an embodiment of the present invention a controller for a light based touch screen including a chip package coupled with a light based touch screen emitter driver circuitry inside the chip package for selectively activating a plurality of photoemitters that are outside of the chip package detector driver circuitry inside the chip package for selectively activating a plurality of photo detectors that are outside of the chip package detector signal processing circuitry for generating detection signals representing measured amounts of light detected on the plurality of photo detectors a first plurality of signal conducting pins for connecting the plurality of photoemitters outside the chip package to the emitter driver circuitry inside the chip package a second plurality of signal conducting pins for connecting the plurality of photo detectors outside the chip package to the detector driver circuitry and to the detector signal processing circuitry inside the chip package controller circuitry inside the chip package for controlling the emitter driver circuitry and the detector driver circuitry and at least one input output pin for communicating with a host processor and for outputting the detection signals generated by the detector signal processing circuitry to the host processor for the host processor to identify one or more locations on the touch screen that are being touched.

There is additionally provided in accordance with an embodiment of the present invention a touch screen system including a housing a display mounted on the housing a host processor mounted in the housing for determining touch locations on the display a plurality of light emitters for emitting light that is transmitted over the display a plurality of light receivers for producing output values based on detected light emitted by the emitters and first and second controllers connected to the host processor to the emitters and to the receivers for receiving scan configuration settings from the host processor for activating the emitters in a substantially uninterrupted scan sequence in accordance with the scan configuration settings and for storing output values from the receivers wherein the numbers of the light emitters and the light receivers are greater than the respective numbers of light emitters and light receivers supported by the signal conducting pins of each of the first and second controllers.

For reference to the figures the following index of elements and their numerals is provided. Elements numbered in the 100 s generally relate to light beams elements numbered in the 200 s generally relate to light sources elements numbered in the 300 s generally relate to light receivers elements numbered in the 400 s and 500 s generally relate to light guides elements numbered in the 600 s generally relate to displays elements numbered in the 700 s generally relate to circuit elements elements numbered in the 800 s generally relate to electronic devices and elements numbered in the 900 s generally relate to user interfaces. Elements numbered in the 1000 s are operations of flow charts.

Similarly numbered elements represent elements of the same type but they need not be identical elements.

For clarity of exposition throughout the present specification the term touch screen is used as a generic term to refer to touch sensitive surfaces that may or may not include an electronic display. As such the term touch screen as used herein includes inter alia a mouse touchpad as included in many laptop computers and the cover of a handheld electronic device. The term optical touch screen is used as a generic term to refer to light based touch screens including inter alia screens that detect a touch based on the difference between an expected light intensity and a detected light intensity where the detected light intensity may be greater than or less than the expected light intensity. The term screen glass is used as a generic term to refer to a transparent screen surface. The screen may be constructed inter alia from glass or from a non glass material including inter alia crystal acrylic and plastic. In some embodiments of the present invention the screen allows near infrared light to pass through but is otherwise non transparent.

For clarity of exposition throughout the present specification the term emitter is used as a generic term to refer to a light emitting element including inter alia a light emitting diode LED and the output end of a fiber optic or tubular light guide that outputs light into a lens or reflector that directs the light over a display surface. The term receiver is used as a generic term to refer to a light detecting element including inter alia a photo diode PD and the input end of a fiber optic or tubular light guide that receives light beams that traversed a display surface and directs them to a light detecting element or to an image sensor the image sensor being inter alia a charge coupled device CCD or a complementary metal oxide semiconductor CMOS image sensor.

Reference is made to which is an illustration of a portion of a touch screen including a plurality of emitters that are positioned close together wherein light is guided by fiber optic light guides to locations along a first screen edge in accordance with an embodiment of the present invention. The portion of the touch screen also includes a plurality of receivers that are positioned close together wherein light is guided thereto by fiber optic light guides from locations along a second screen edge.

According to embodiments of the present invention a light based touch screen includes one or more emitters including inter alia infra red or near infra red light emitting diodes LEDs and a plurality of receivers including inter alia photo diodes PDs arranged along the perimeter surrounding the touch screen or touch surface. The emitters project light substantially parallel to the screen surface and this light is detected by the receivers. A pointer such as a finger or a stylus placed over a portion of the screen blocks some of the light beams and correspondingly some of the receivers detect less light intensity. The geometry of the locations of the receivers and the light intensities they detect suffice to determine screen coordinates of the pointer. The emitters and receivers are controlled for selective activation and de activation by a controller. Generally each emitter and receiver has I O connectors and signals are transmitted to specify which emitters and which receivers are activated.

In an embodiment of the present invention plural emitters are arranged along two adjacent sides of a rectangular screen and plural receivers are arranged along the other two adjacent sides. In this regard reference is now made to which is a diagram of a touch screen having 16 emitters and 16 receivers in accordance with an embodiment of the present invention. Emitters emit infra red or near infra red light beams across the top of the touch screen which are detected by corresponding receivers that are directly opposite respective emitters . When a pointer touches touch screen it blocks light from reaching some of receivers . By identifying from the receiver outputs which light beams have been blocked by the pointer the pointer s location can be determined.

Light based touch screens do not place a physical layer over a display and this provides a user experience that is advantageous over that of conventional capacitive and resistive touch screens. When writing with a stylus on a conventional capacitive and resistive touch screen overlay the stylus is removed from the display surface which produces a parallax effect. In distinction when writing with a stylus on a light based touch screen which has no overlay and no protective glass the stylus is in contact with the writing surface which produces a natural writing effect.

Reference is now made to which are diagrams of touch screen of showing detection of two pointers and that touch the screen simultaneously in accordance with an embodiment of the present invention. When two or more pointers touch the screen simultaneously this is referred to as a multi touch. Pointers and which are touching the screen block light from reaching some of receivers . In accordance with an embodiment of the present invention the locations of pointers and are determined from the crossed lines of the infra red beams that the pointers block. In distinction prior art resistance based and capacitance based touch screens are generally unable to detect a multi touch.

When two or more pointers touch screen simultaneously along a common horizontal or vertical axis the positions of the pointers are determined by the receivers that are blocked. Pointers and in are aligned along a common vertical axis and block substantially the same receivers along the bottom edge of touch screen namely the receivers marked a b c and d. Along the left edge of touch screen two different sets of receivers are blocked. Pointer blocks the receivers marked e and f and pointer blocks the receivers marked g and h. The two pointers are thus determined to be situated at two locations. Pointer has screen coordinates located at the intersection of the light beams blocked from receivers a d and receivers e and f and pointer has screen coordinates located at the intersection of the light beams blocked from receivers a d and receivers g and h.

Pointers and shown in are not aligned along a common horizontal or vertical axis and they have different horizontal locations and different vertical locations. From the blocked receivers a h it is determined that pointers and are diagonally opposite one another. They are either respectively touching the top right and bottom left of touch screen as illustrated in or else respectively touching the bottom right and top left of touch screen as illustrated in .

Discriminating between and is resolved by either i associating the same meaning to both touch patterns or ii by associating meaning to only one of the two touch patterns. In case i the UI arranges its icons or is otherwise configured such that the effects of both touch patterns and are the same. For example touching any two diagonally opposite corners of touch screen operates to unlock the screen.

In case ii the UI arranges its icons or is otherwise configured such that only one of the touch patterns and has a meaning associated therewith. For example touching the upper right and lower left corners of touch screen operates to unlock the screen and touch the lower right and upper left of touch screen has no meaning associated therewith. In this case the UI discriminates that is the correct touch pattern.

Determining locations of a diagonally oriented multi touch is described further hereinbelow with reference to shift aligned arrangements of emitters and receivers and with reference to light beams directed along four axes. An additional method of resolving ambiguous multi touches is described with reference to fast scan frequencies enabled by the ASIC controller discussed hereinbelow.

Reference is now made to which are diagrams of a touch screen that detects a two finger glide movement in accordance with an embodiment of the present invention. The glide movement illustrated in is a diagonal glide that brings pointers and closer together. The direction of the glide is determined from changes in which receivers are blocked. As shown in blocked receivers are changing from a and b to receivers more to the right and from c and d to receivers more to the left. Similarly blocked receivers are changing from e and f to receivers more to the bottom and from g and h to receivers more to the top. For a glide in the opposite direction that moves pointers and farther apart the blocked receivers change in the opposite directions.

When pointers and are aligned in a common vertical or horizontal axis there is no ambiguity in identifying glide patterns. When pointers and are not aligned in a common vertical or horizontal axis there may be ambiguity in identifying glide patterns as illustrated in . In case of such ambiguity and as described hereinabove with reference to discriminating between and is resolved by either i by associating the same meaning to both glide patterns or ii by associating meaning to only one of the two glide patterns.

Associating the same meaning to both glide patterns may be performed in a pinch zoom gesture whereby a user places two fingers on the screen and spreads the fingers apart along a diagonal of the screen. Such a gesture activates a zoom in operation for increasing the magnification of graphics displayed on the screen. Such a gesture has the same meaning irrespective of whether the pinch zoom is performed along a top left to bottom right diagonal or along a top right to bottom left diagonal.

Similar considerations apply to a zoom out gesture whereby a user places two fingers on the screen and brings the fingers closer together along a diagonal of the screen for decreasing the magnification of graphics displayed on the screen. This gesture too has the same meaning irrespective of along which diagonal of the screen the gesture is performed.

Reference is made to which is a circuit diagram of touch screen from in accordance with an embodiment of the present invention. The emitters and receivers are controlled by a controller not shown . The emitters receive respective signals LED00 LED15 from switches A and receive current from VROW and VCOL through current limiters B. The receivers receive respective signals PD00 PD15 from shift register . Receiver output is sent to the controller via signals PDROW and PDCOL. Operation of the controller of switches A and of current limiters B is described in applicant s co pending application U.S. application Ser. No. 12 371 609 filed on Feb. 15 2009 and entitled LIGHT BASED TOUCH SCREEN the contents of which are hereby incorporated by reference.

According to an embodiment of the present invention the emitters are controlled via a first serial interface which transmits a binary string to a shift register . Each bit of the binary string corresponds to one of the emitters and indicates whether to activate or deactivate the corresponding emitter where a bit value 1 indicates activation and a bit value 0 indicates deactivation. Successive emitters are activated and deactivated by shifting the bit string within shift register .

Similarly the receivers are controlled by a second serial interface which transmits a binary string to a shift register . Successive receivers are activated and deactivated by shifting the bit string in shift register . Operation of shift registers and is described in applicant s co pending application U.S. application Ser. No. 12 371 609 filed on Feb. 15 2009 and entitled LIGHT BASED TOUCH SCREEN the contents of which are hereby incorporated by reference.

Reference is made to which is a simplified diagram of a light based touch screen system in accordance with an embodiment of the present invention. The touch screen of does not require an overlay. Instead a small infrared transparent frame surrounds the display to reflect beams between emitters and receivers positioned on opposite sides of the screen. When a pointer such as a finger or a stylus touches the screen in a specific area one or more light beams generated by emitters are obstructed. The obstructed light beams are detected by corresponding decreases in light received by one or more of the receivers which is used to determine the location of the pointer.

Reference is made to which is a simplified cross sectional diagram of the touch screen system of in accordance with an embodiment of the present invention. Shown in is a cross sectional view of a section A A of an LCD display and its surrounding infrared transparent frame . The cross sectional view shows an emitter emitting light that is reflected by a cut out in frame and directed substantially parallel over the display surface. As a finger approaches near the display surface some of the light emitted by the emitters and directed over the location of the near touch is blocked by the finger and some of the light passes between the fingertip and the screen glass. When finger touches the display surface all of the light emitted by the emitters and directed over the touch location is blocked by finger .

Reference is made to which is a simplified illustration of an arrangement of emitters receivers and optical elements that enable a touch screen system to read pointers that are smaller than the sensor elements in accordance with an embodiment of the present invention. Shown in are a mirror or optical lens an emitter a wide reflected light beam a pointer and a receiver . Mirror or optical lens generates a wide light beam that is focused onto receiver by a second mirror or optical lens. The wide beam makes it possible to sense an analog change in the amount of light detected at receiver when a pointer blocks a portion of the wide beam. Thus pointer in blocks only a portion of wide beam . The wide beam also enables mounting the emitters far apart from one another and mounting the receivers far apart from one another. Consequently this reduces the bill of materials by requiring fewer emitters and fewer receivers.

Reference is made to which is a simplified illustration of an arrangement of emitters receivers and optical elements that enable a touch screen system to detect a pointer that is smaller than the sensor elements including inter alia a stylus in accordance with an embodiment of the present invention. Shown in are a mirror or optical lens an emitter a wide reflected light beam a pointer and a receiver . Mirror or optical lens generates a wide light beam that is focused onto receiver by a second mirror or optical lens. The wide beam enables sensing of an analog change in the amount of light detected at receiver when a pointer blocks a portion of the wide beam in particular when pointer is placed in front of mirror or lens . Pointer as shown in blocks only a portion of wide beam indicated by beam being blocked by the tip of pointer . The wide beam also enables mounting emitters far apart from one another and mounting receivers far apart from one another. In turn this reduces the bill of materials by requiring fewer emitters and fewer receivers.

Without the wide beam there are generally spaces between beams that go undetected making it impossible to distinguish between a user dragging a fine point stylus across the beams and the user tapping on different beams with a fine point stylus. Moreover with widely spaced narrow beams the pointer touch must be very precise in order to cross a narrow beam.

Reference is made to which is a simplified diagram of a touch screen with wide light beams covering the screen in accordance with an embodiment of the present invention. Touch screen systems using wide beams are described in applicant s provisional patent application U.S. Application Ser. No. 61 317 255 filed on Mar. 24 2010 and entitled OPTICAL TOUCH SCREEN WITH WIDE BEAM TRANSMITTERS AND RECEIVERS the contents of which are hereby incorporated by reference.

The emitters and receivers shown in are spaced relatively widely apart. Generally the emitters are not activated simultaneously. Instead they are activated one after another and the coverage areas of their light beams are substantially connected.

Also shown in are emitters reflectors and and receivers coupled with a calculating unit . Emitters and receivers are positioned beneath screen . Emitters project arcs of light under screen onto reflectors . The distance between emitters and reflectors is sufficient for an arc to spread into a wide beam at a reflector . In various embodiments of the present invention the distance between emitters and reflectors may be approximately 4 mm 10 mm 20 mm or greater depending on factors including inter alia the widths of the wide beams the required touch resolution the emitter characteristics and the optical reflector characteristics.

Reflectors collimate the light as wide beams across a swath of screen surface. A wide beam reaches a reflector which i redirects the light beam below screen and ii narrows the wide beam into an arc . As such wide beam converges onto the surface of one of receivers below the surface of screen . The light intensity detected by each of receivers is communicated to calculating unit .

The configuration of is of advantage in that the wide light beams cover the entire screen surface thereby enabling touch sensitive functionality anywhere on the screen. Additionally the cost of materials for the touch screen is reduced since relatively few emitter and receiver components are required.

Configurations 2 5 use multiple emitter receiver pairs to precisely identify a touch position. In some of the configurations described hereinabove there are opposing rows of emitters and receivers each emitter being opposite a respective receiver. In configurations 2 and 3 the emitters are shift aligned with the receivers. For example each emitter may be positioned opposite a midpoint between two opposing receivers. Alternatively each emitter may be off axis aligned with an opposite receiver but not opposite the midpoint between two receivers.

Embodiments of the present invention employ two types of collimating lenses namely i conventional collimating lenses and ii collimating lenses coupled with a surface of micro lenses that refract light to form multiple wide divergent beams. When a light source is positioned at the focus of a conventional collimating lens the lens outputs light in substantially parallel beams as illustrated inter alia in . When a light source is positioned between a conventional collimating lens and its focus the lens outputs a wide beam the outer edges of which are not parallel to each other as illustrated inter alia in .

Reference is made to which is a simplified illustration of a collimating lens in cooperation with a light emitter in accordance with an embodiment of the present invention. Shown in is A a light emitter transmitting light beams through a flat clear glass . Beams are unaltered by the glass.

Also shown in is B an emitter positioned at the focus of a collimating lens . Beams are collimated by lens .

Also shown in is C an emitter positioned between collimating lens and the lens focus. Beams are partially collimated by lens i.e. the output wide beams are not completely parallel.

Reference is made to which is a simplified illustration of a collimating lens in cooperation with a light receiver in accordance with an embodiment of the present invention. Shown in is A substantially parallel light beams transmitted through a flat clear glass . Beams are unaltered by the glass.

Also shown in is B a receiver positioned at the focus of collimating lens . Beams are refracted onto receiver by collimating lens .

Also shown in is C a receiver positioned between collimating lens and the lens focus. Beams are collimated by lens but because receiver is not at the lens focus the beams do not converge thereon.

Collimating lenses coupled with an outer surface of micro lenses which face away from emitters or receivers transmit light in two stages. As light passes through the bodies of the lenses light beams are collimated as with conventional collimating lenses. However as the light passes through the surface of micro lenses the light is refracted into multiple wide divergent beams as illustrated inter alia in and . In collimating lenses and are shown having micro lens surfaces . In light emitters and are positioned within the focal distance of collimating lenses and and wide light beams from the emitters are shown entering lenses and . Light is collimated as it passes through the lens as with conventional collimating lenses. When the collimated light passes through micro lens surface it is refracted into multiple wide divergent beams three of which are illustrated in . In light receivers and are positioned within the focal distance of the collimating lenses and light beams are shown entering lenses and through micro lens surface . The incoming beams are refracted into wide divergent beams inside the lens bodies. The refracted beams are directed by the collimating portions of lenses and which concentrate the beams onto light receivers and .

Reference is made to which is a simplified illustration of a collimating lens having a surface of micro lenses facing an emitter in accordance with an embodiment of the present invention. shows A a flat glass having micro lenses etched on a surface facing an emitter . Light beams enter glass at various angles. At each entry point a micro lens refracts an incoming beam into a wide arc . Lines show how the middle of each arc is oriented in a different direction depending on the angle of approach of the beam into glass .

Reference is made to which is a simplified illustration of a collimating lens having a surface of micro lenses facing a receiver in accordance with an embodiment of the present invention. shows A a flat glass having micro lenses etched on a surface facing a receiver . Light beams are shown entering glass as parallel beams. At each exit point a micro lens refracts a beam into a wide arc . Lines show how the middle of each arc is oriented in the same direction. The arcs do not converge on receiver .

As used through the present specification the term collimating lens includes a multi directional collimating lens.

Reference is made to which is a simplified diagram of an electronic device with a wide beam touch screen in accordance with an embodiment of the present invention. Shown in is an electronic device with two emitters and and three receivers and the emitters and receivers being placed along opposite edges of a display . Light intensities detected at each of receivers and are communicated to a calculating unit . Each emitter and receiver uses a respective primary lens labeled respectively and . Emitters and receivers use the same lens arrangement to ensure that light emitted by an emitter and re directed by an emitter lens is reverse directed by an opposing lens onto a receiver.

It is desirable that the light beam from each emitter covers its two opposite receiver lenses. Such a condition is achieved by positioning each emitter between its lens and its lens focal point. As such the emitter is not in focus and as a result its light is spread instead of being collimated by its lens. Each receiver is similarly positioned between its lens and its lens focal point.

Reference is made to which is a diagram of electronic device of depicting overlapping light beams from one emitter detected by two receivers in accordance with an embodiment of the present invention. Shown in are two wide light beams from emitter one of which is detected at receiver and another of which is detected at receiver respectively. The left and right sides of the one beam are marked and respectively and the left and right sides of the other beam are marked and respectively. The shaded area in indicates the area on display at which a touch blocks a portion of both wide beams. As such a touch in this area is detected by two emitter receiver pairs namely and .

Reference is made to which is a diagram of electronic device of depicting overlapping light beams from two emitters detected by one receiver in accordance with an embodiment of the present invention. Shown in are wide beams one from emitter and another from emitter that are both detected at receiver . The left and right sides of the one beam are marked and respectively and the left and right sides of the other beam are marked and respectively. The shaded area in indicates the area on display at which a touch blocks a portion of both wide beams. As such a touch in this area is detected by two emitter receiver pairs namely and .

Reference is now made to which is a diagram of the electronic device of showing that points on the screen are detected by at least two emitter receiver pairs in accordance with an embodiment of the present invention. shows the wide beams of and illustrates that touches in the shaded wedges on display are detected by at least two emitter receiver pairs. The two emitter receiver pairs are either one emitter with two receivers as in or two emitters with one receiver as in . More specifically touches that occur near the row of emitters are generally detected by the former and touches that occur near the row of detectors are generally detected by the latter. By surrounding the screen with similarly arranged emitters lenses and receivers any point may be similarly detected by two emitter receiver pairs.

Reference is made to which is a simplified diagram of a wide beam touch screen showing an intensity distribution of a light signal in accordance with an embodiment of the present invention. Shown in is a wide angle light beam emitted by emitter into lens . The light beam crosses over display and substantially spans lenses and . The light is detected at receivers and .

Shown in is a graph of detected light intensity. Total detected light corresponds to a shaded area under the graph. An object touching the screen blocks a portion of this light. If the object touching the screen moves across the wide beam from left to right the amount of blocked light increases and correspondingly the total detected light decreases as the object progresses from the left edge of the beam to the center of the beam. Similarly the amount of blocked light decreases and correspondingly the total detected light increases as the object progresses from the center of the beam to the right edge of the beam.

It is noted that the detected light intensities at the edges of the light beam are strictly positive thus ensuring that a touch at these edges is detected.

Reference is made to which is a simplified diagram of a wide beam touch screen showing intensity distributions of overlapping light signals from two emitters in accordance with an embodiment of the present invention. shows light detected from emitters and . A touch point on display blocks light from these emitters differently. Area indicates attenuation of light from emitter by touch point and the union of areas and corresponds to the attenuation of light from emitter by point . By comparing the light attenuation the two emitter receiver pairs and a precise touch coordinate is determined.

Reference is made to which is a simplified diagram of a wide beam touch screen showing intensity distributions of two sets of overlapping light signals from one emitter in accordance with an embodiment of the present invention. As shown in touch point is inside the area detected by emitter receiver pair and emitter receiver pair . The attenuation of the light signal at receiver depicted as area is greater than the attenuation at receiver depicted as area . By comparing the light attenuation in the two emitter receiver pairs and a precise touch coordinate is determined.

Determining the position of touch point requires determining a position along an axis parallel to the edge along which the emitters are positioned say the x axis and along an axis perpendicular to the edge say the y axis. In accordance with an embodiment of the present invention an approximate y coordinate is first determined and then based on the expected attenuation values for a point having the thus determined y coordinate and based on the actual attenuation values a precise x coordinate is determined. In turn the x coordinate thus determined is used to determine a precise y coordinate. In cases where the touch point is already touching the screen either stationary or in motion previous x and y coordinates of the touch point are used as approximations to subsequent x and y coordinates. Alternatively only one previous coordinate is used to calculate a first subsequent coordinate with the second subsequent coordinate being calculated based on the first subsequent coordinate. Alternatively previous coordinates are not used.

Reference is made to which is a simplified diagram of a wide beam touch screen with emitter and receiver lenses that do not have micro lens patterns in accordance with an embodiment of the present invention. Shown in is an electronic device with a display emitters and corresponding emitter lenses and receivers and and corresponding receiver lenses and . Two light beams and from respective emitters and arrive at a point that is located at an outer edge of lens . Since beams and approach point at different angles of incidence they do not converge on receiver . Specifically light beam arrives at receiver and light beam does not arrive at receiver .

In order to remedy the non convergence a fine pattern of micro lenses is integrated with the receiver lenses at many points long the surfaces of the lenses. The micro lenses distribute incoming light so that a portion of the light arriving at each micro lens reaches the receivers. In this regard reference is made to which are simplified diagrams of a wide beam touch screen with emitter and detector lenses that have micro lens patterns in accordance with an embodiment of the present invention. shows incoming beam being spread across an angle by a micro lens at location thus ensuring that a portion of the beam reaches receiver . shows incoming beam being spread across an angle by the same micro lens at location thus ensuring that a portion of this beam too reaches receiver . By arranging the micro lenses at many locations along each receiver lens light beams that enter the locations from different angles are all detected by the receiver. The detected light intensities are communicated to a calculating unit coupled with the receivers.

Reference is made to which is a simplified diagram of a wide beam touch screen with emitter and receiver lenses that do not have micro lens patterns in accordance with an embodiment of the present invention. Shown in is an electronic device with a display emitters and corresponding emitter lenses and receivers and and corresponding receiver lenses and . Two light beams emitted by emitter and detected by respective receivers and are desired in order to determine a precise location of touch point . However lens without micro lens patterns cannot refract a beam crossing point to receiver . I.e. referring to lens cannot refract beam as shown. Only the beam shown as crossing point is detected.

In order to remedy this detection problem micro lenses are integrated with the emitter lenses at many points along the surface of the lenses. The micro lenses distribute outgoing light so that a portion of the light reaches the desired receivers. In this regard reference is made to which is a simplified diagram of a wide beam touch screen with emitter and receiver lenses that have micro lens patterns in accordance with an embodiment of the present invention. shows that a portion of light exiting from micro lens location reaches multiple receivers. As such a touch at point is detected by receivers and . It will be noted from that the beams passing through point are generated by micro lenses at different locations and . Light intensity values detected by the receivers of are communicated to a calculating unit .

Micro lens patterns integrated with emitter and receiver lenses thus generate numerous overlapping light beams that are detected. Each point on the touch screen is traversed by multiple light beams from multiple micro lenses which may be on the same emitter lens. The micro lenses ensure that the multiple light beams reach the desired receivers. Reference is made to which is a simplified diagram of two emitters and with respective lenses and that have micro lens patterns integrated therein in accordance with an embodiment of the present invention. Reference is also made to which is a simplified diagram of two receivers and with respective lenses and that have micro lens patterns integrated therein in accordance with an embodiment of the present invention.

In some cases it is of advantage to avoid having micro lenses on the outermost surfaces of the emitter and receiver lenses. Since the outermost surfaces are visible to a user it may be less aesthetic to have the micro lenses on these surfaces in order that the visible surfaces appear smooth. Moreover outermost surfaces are susceptible to scratching and to accumulation of dust and dirt which can degrade performance of the micro lenses. As such in embodiments of the present invention the micro lenses are integrated on surfaces that are not exposed to the user as shown below in and .

Reference is made to which is a simplified diagram of a side view of a single unit light guide in the context of an electronic device having a display and an outer casing in accordance with an embodiment of the present invention. Shown in is a cut away of a portion of an electronic device with a display screen an outer casing above screen and an emitter below screen . A light guide receives light beams and reflects them above screen so that they travel across the surface of screen for detection. Light guide includes internal reflective surfaces and for projecting light beams above the surface of screen . A section of light guide serves as a primary lens to collimate light beams when they are received. The surface of section that faces emitter indicated in bold has patterns of micro lenses etched thereon. As such the micro lenses are not visible to a user and are protected from damage and dirt.

The surface of section has a feather pattern for scattering incoming light beams from an emitter . Reflective surfaces and reflect light beams . Reflective surface is concave and reflective surface is a flat reflector oriented at a 45 angle with respect to incoming light beams .

Light beams exit light guide through flat surface . Surface serves to connect light guide to outer casing . Surface is located above the plane of active light beams used by the touch system and is angled for aesthetic purposes.

The reflective characteristics of surface require that dust and dirt not accumulate on surface and require that outer casing which may be made inter alia of metal or plastic not make contact with surface otherwise reflectivity of surface may be impaired. As such outer casing is placed above surface thereby protecting surface from dust and dirt and outer casing is not flush with surface so that casing material does not touch surface . Being a flat reflector at a 45 angle relative to incoming light beams surface is positioned above the upper surface of display . As such the device height H above display due to light guide comprises the height H of surface plus the thickness H of outer casing .

At the receiving side a light guide similar to is used to receive light beams that are transmitted over screen and to direct them onto corresponding one or more receivers. Thus light beams enter light guide at surface are re directed by surface and then by surface and exit through the micro lens patterned surface of section to one or more receivers. At the receiving side the surface of section has a pattern that scatters the light beams as described hereinabove.

Reference is made to which is a simplified diagram of side views from two different angles of a lens with applied feather patterns on a surface in accordance with an embodiment of the present invention. Shown in is a light guide having an internal reflective section an internal collimating lens and etched micro lenses . Light beams entering light guide at lens exit the light guide through a surface as light beams .

Similar light guides are used for receiving beams that have traversed the screen to focus them onto receivers. In this case light beams enter at surface are reflected below the screen surface by internal reflective section are re focused onto a receiver by collimating lens and re distributed by micro lenses . In general the same lens and micro lenses are used with an emitter and a detector in order that the light beam be directed at the receiving side in reverse to the way it is directed at the emitting side.

Collimating lens has a rounded bottom edge as shown at the bottom of . In order to properly refract incoming light on the emitter side the micro lenses are formed in a feather pattern spreading as a fan as shown at the bottom of and in .

Reference is made to which is a simplified diagram of a portion of a wide beam touch screen in accordance with an embodiment of the present invention. A feather pattern is shown applied to the surface of a lens . A similar neighboring lens is associated with an emitter emitting a wide beam .

Reference is made to which is a top view of light beams entering and exiting micro lenses etched on a lens in accordance with an embodiment of the present invention. Substantially collimated light beams are shown in entering micro lenses and being refracted to light beams such that each micro lens acts as a light source spreading a wide beam across a wide angle.

Several challenges arise in the manufacture of the micro lenses in configuration no. 2. One challenge is the difficulty of accurately forming the fan shaped feather pattern of micro lenses. It is desirable instead to use micro lenses arranged parallel to one another instead of the fan feather pattern.

A second challenge relates to the mold used to manufacture the light guide in configuration no. 2. Referring to it is desirable that the outer surface of section facing emitter be vertical so that the front surface of section is parallel with the straight back surface portion of light guide . However it is difficult to manufacture exactly parallel surfaces. Moreover if the light guide were to be wider at its bottom then it would not be easily removable from its mold. As such the two surfaces generally form a wedge and the surface of section facing emitter is not perfectly vertical. To compensate for this the micro lenses are arranged so as to be perpendicular to a plane of incoming light beams.

A third challenge is the constraint that for optimal performance the micro lenses be positioned accurately relative to their corresponding emitter or receiver. The tolerance for such positioning is low. As such it is desirable to separate section of the light guide so that it may be positioned accurately and to allow more tolerance for the remaining portions of the light guide as may be required during assembly or required for robustness to movement due to trauma of the electronic device.

Reference is made to which is a simplified diagram of a side view of a dual unit guide in the context of an electronic device having a display and an outer casing in accordance with an embodiment of the present invention. Shown in is an arrangement similar to that of but with light guide split into an upper portion and a lower portion . The micro lenses are located at an upper surface of lower portion . As such the micro lenses are not embedded in the collimating lens portion of light guide .

In configuration no. 2 the curved shape of the collimating lens necessitated a fan feather pattern for the micro lenses etched thereon. In distinction in configuration no. 3 the micro lenses are etched on rectangular surface and are arranged as parallel rows. Such a parallel arrangement referred to herein as a tubular arrangement is shown in . Specifically a parallel series of micro lenses are shown along an upper surface of light guide in .

An advantage of configuration no. 3 is that the flat upper surface of the light guide may be molded as nearly parallel with the screen surface as possible since the mold is one flat surface that lifts off the top of light guide . Furthermore in configuration no. 3 only portion of the light guide has a low tolerance requirement for positioning. Portion has a higher tolerance since its surfaces are not placed at a focal point of an element.

As shown in light beams emitted by emitter enter light guide unit at surface are reflected by reflective surface through surface and into light guide unit . Inside light guide unit light beams are reflected by surface and exit through surface over display .

Reference is made to which is a picture of light guide units and within the content of a device having a PCB and an outer casing in accordance with an embodiment of the present invention. The tubular pattern on the upper surface of light guide unit is a fine pattern. In order for this pattern to distribute the light beams correctly light guide is placed precisely relative to its respective LED or PD. By contrast light guide unit has a flat reflective surface and as such does not require such precision placement. indicates the relative positioning of light guide units and . Their alignment is represented by a distance and has a tolerance of up to 1 mm. A distance represents the height between the light guide units.

Reference is made to which is a top view of light guide units and of in accordance with an embodiment of the present invention. Tubular pattern appears on the upper surface of light guide unit .

Configuration no. 4 uses a reflective light guide and lens that reduce the height of a light guide above a display. The reflective light guide and lens of configuration 4 are suitable for use with the feather pattern lenses of configuration no. 2 with the tubular pattern lenses of configuration no. 3 and also with the alternating reflective facets of configuration no. 5. Many electronic devices are designed with a display surface that is flush with the edges of the devices. This is often an aesthetic feature and as such when integrating light based touch screens with electronic devices it is desirable to minimize or eliminate the raised rims. Less visibly prominent rims result in sleeker more flush outer surfaces of the devices.

Moreover in light based touch screens the raised rim occupies a width around the display beyond the edges of the display. Many electronic devices are designed with display surfaces that seamlessly extend to the edges of the devices. This is often an aesthetic feature and as such when integrating light based touch screens with electronic devices it is desirable to design the reflective raised rims in such a way that they appear as seamless extensions of the display.

Configuration no. 4 achieves these objectives by reducing bezel height and providing a seamless transition between a display edge and an outer border of a device resulting in a more appealing aesthetic design. The light guide of configuration no. 4 integrates with an outer casing having an elongated rounded edge thereby softening sharp angles and straight surfaces.

Configuration no. 4 employs two active mirror surfaces namely a parabolic reflective surface that folds and focuses incoming light to a focal location and an elliptical refractive surface that collects light from the focal location and collimates the light into beams across the screen.

Reference is made to which is a simplified diagram of a side view of a light guide within an electronic device in accordance with an embodiment of the present invention. Shown in is a light guide between an outer casing and a display . Light beams from an emitter enter light guide through a surface . A feather pattern of micro lenses is present on a lower portion of surface in order to scatter the light beams . Light beams are reflected by an internal concave reflective surface and by a parabolic reflective surface and exit light guide through an elliptical refractive surface . Elliptical refractive surface redirects at least a portion of light beams in a plane parallel with the surface of display . Light beams are received at the other end of display by a similar light guide that directs the beams onto a light receiver . The light intensity detected by light receiver is communicated to a calculating unit .

Reference is made to which is a simplified diagram of a side view cutaway of a portion of an electronic device and an upper portion of a light guide with at least two active surfaces for folding light beams in accordance with an embodiment of the present invention. Shown in is an upper portion of a light guide . Surface is part of a parabola or quasi parabola or alternatively is a free form having a focal line . Focal line and surfaces and extend along the rim of display . Surface is part of an ellipse or quasi ellipse or alternatively a free form having focal line .

On the emitter side light beams enter the light guide and parabolic mirror reflects the beams to a focal point inside the light guide. Refracting elliptical lens has the same focal point as parabolic mirror . Elliptical lens refracts the light from the focal point into collimated light beams over display . On the receiver side collimated light beams enter the light guide and are refracted by elliptical lens into a focal point. Parabolic mirror reflects the beams from the focal point inside the light guide to collimated output beams.

Surface in folds light beams upwards by 90 . Surface is formed as part of a parabola. In one embodiment of the present invention surface is corrected for aberrations due to input surface being slightly inclined rather than perfectly vertical and also due to the light source being wider than a single point.

Surfaces and use internal reflections to fold light beams. Thus these surfaces need to be protected from dirt and scratches. In surface is protected by outer casing . The lower portion now shown of light guide is deep within the electronic device and is thus protected.

Using configuration no. 4 substantially all of reflective surface is located below the upper surface of display . Thus this configuration adds less height to an electronic device than does configuration no. 2. Referring back to the height H added by the light guide in the present configuration is approximately the thickness H of the outer casing which is less than the corresponding height H in configuration no. 2. Moreover the convex shape of surface of and surface of is easier for a user to clean than is the perpendicular surface of . Thus a user can easily wipe away dust and dirt that may accumulate on display and on surface . It is noted that configuration no. 4 eliminates the need for surface of since outer casing is flush with the height of surface instead of being above it.

The convex shape of surface of makes the bezel less visibly prominent than does the perpendicular surface of .

Some electronic devices are covered with a flat sheet of glass that extends to the four edges of the device. The underside of the glass is painted black near the devices edges and the display is viewed through a clear rectangular window in the middle of the glass. Examples of such devices include the IPHONE IPOD TOUCH and IPAD manufactured by Apple Inc. of Cupertino Calif. and also various models of flat panel computer monitors and televisions. In some cases the light guides surrounding the various touch screens described herein may appear non aesthetic due to a the light guide being a separate unit from the screen glass and thus the border between them is noticeable and b the light guide extending below the screen and thus even if the underside of the light guide is also painted black the difference in heights between the bottom of the light guide and the screen glass is noticeable. Embodiments of the present invention employ a two unit light guide to overcome this problem.

In one such embodiment the upper unit of the light guide is merged with the screen glass. In this regard reference is made to which is a simplified drawing of a section of a transparent optical touch light guide formed as an integral part of a protective glass covering a display in accordance with an embodiment of the present invention. A daylight filter sheet on the underside of protective glass serves instead of black paint to hide the edge of display without blocking light beams . Light guide has an outer elliptical surface and an inner parabolic surface and merges smoothly with an outer casing . Light beams pass through light guide as in .

In some cases the cost of manufacturing a protective glass cover with an integrated reflective lens may be expensive. As such in an alternative embodiment of the present invention a black object is placed between the upper and lower units of the light guide. The height of the black object is aligned within the electronic device with the height of the black paint on the underside of the protective glass. In this regard reference is made to which is a simplified illustration of the electronic device and light guide of adapted to conceal the edge of the screen in accordance with an embodiment of the present invention. Shown in is black paint or alternatively a daylight filter sheet on the underside of protective glass covering display . A black plastic element is aligned with black paint daylight filter sheet so that the edge of protective glass is not discernable by a user. Black plastic element transmits infra red light to allow light beams to pass through.

Reference is made to which is a simplified diagram of a light guide that is a single unit extending from opposite an emitter to above a display in accordance with an embodiment of the present invention. A portion of an outer casing is shown flush with the top of light guide . The lower portion of light guide has a feather pattern of micro lenses to scatter the light beams arriving from emitter . At the receiving side the light beams exit through the bottom of a light guide similar to light guide towards a receiver. The same feather pattern breaks up the light beams en route to the receiver.

Reference is made to which is a simplified diagram of a dual unit light guide in accordance with an embodiment of the present invention. Shown in is a light guide with an upper unit and a lower unit . A portion of an outer casing is flush with the top of light guide unit . A display is shown to the right of light guide unit . The top surface of light guide unit has a tubular pattern of micro lenses to break up light beams arriving from an emitter . At the receiving side the light beams exit through the bottom of a light guide similar to the light guide shown in towards a receiver. The same tubular pattern breaks up the light beams en route to the receiver.

As explained hereinabove with reference to the positioning of light guide unit with tubular pattern requires high precision whereas the positioning of light guide unit does not require such precision. The effect of tubular pattern on the light beams depends on its precise placement relative to its respective emitter or receiver. The active surfaces in light guide unit are more tolerant since they are largely self contained namely they are both focused on an internal focal line such as focal line of .

It is noted that placement of emitters and receivers underneath a device screen and placement of a collimating reflective element opposite each emitter or receiver imposes restrictions on the thickness of the device. A first restriction is that the thickness of the device be at least the sum of the screen thickness and the emitter or receiver thickness. A second restriction is that in order to properly collimate light that is reflected upward above the screen the reflective element opposite the emitter or receiver be curved into a convex smile shape as shown inter alia in . The convex shape adds to the total thickness of the device.

Designers of tablets and e book readers strive to achieve as slim a form factor as possible. As such according to an embodiment of the present invention the receivers and collimating lenses are placed inside a border surrounding the screen instead of being placed underneath the screen. This is particularly feasible for tablets and e book readers that provide a non screen border area for holding the device.

Reference is made to which is a simplified diagram of a touch screen device held by a user in accordance with an embodiment of the present invention. Shown in is a device with a touch screen surrounded by a frame held by hands .

Reference is made to which is a simplified diagram of a touch screen with wide light beams covering the screen in accordance with an embodiment of the present invention. shows a top view and a side view of a touch system with a touch screen in the context of an electronic device such as a tablet or an e book reader. also shows emitters and receivers each coupled with a pair of lenses and separated by an air gap for collimating light. The side view shows a device casing and a frame surrounding touch screen . Frame provides a grip for a user to hold the device and is wide enough to encase elements and .

Light is more efficiently collimated over a short distance using multiple air to plastic interfaces than with a solid lens. The emitter receiver and lenses are substantially coplanar with the surface of touch screen . The flat non curved profile of lenses and along the height of the device is lower than the profile of the lenses of due to the fact that in the case of lenses and light is projected only along the plane of the screen surface. The only height added to the device form factor is the height of the bezel or lens above touch screen for directing light across the screen. If micro lens patterns are used e.g. to create overlapping beams then a third lens is added that includes the micro lens patterns. Alternatively the micro lens patterns may be formed on one of the two lenses and .

Reference is made to which are respective simplified side top and bottom views of a light guide in the context of a device in accordance with an embodiment of the present invention. is a side view showing a display and a side facing emitter that is substantially coplanar with display . A multi lens assembly reflects light above display and outputs a wide beam. shows the multi lens assembly with three sections separated by air gaps and . Sections and are connected beneath air gap and form part of a rigid frame that surrounds display . The frame includes a cavity for accommodating side facing emitter or a similar shaped receiver. Lens sections and together produce a wide collimated beam as described hereinabove. Lens section includes a tubular pattern of micro lenses as described hereinabove with reference to . shows rays of a beam crossing above display . A PCB forms a substrate for supporting emitters display and the light guide frame.

In accordance with an embodiment of the present invention high resolution touch sensitivity is achieved by combining two or more emitter receiver pair signals that span a common area as described hereinabove with reference to configurations nos. 2 and 3. Configuration no. 5 provides alternative optical elements and alternative arrangements of emitters and receivers for providing overlapping detection.

Various approaches may be used to provide overlapping detection beams. One approach is to provide two separate wide beams that are projected at slightly different heights across the screen. Both beams cover a common screen area and thus provide multiple detection signals for touches in that area. Another approach is to provide optical elements that interleave rays of two wide beams when both beams are activated at once which can be achieved using diffractive structures to interleave minute rays from two beams or using slightly larger alternating facets to interleave beams on the order of 0.1 0.6 mm from two sources. Generally the two beams are activated separately. As such they cover a common screen area but are not actually interleaved. This latter alternative is described in what follows.

Reference is made to which is a simplified illustration of a touch screen surrounded by emitters and receivers in accordance with an embodiment of the present invention. Reference is also made to which is a simplified illustration of an optical element with an undulating angular pattern of reflective facets shown from three angles in accordance with an embodiment of the present invention. Shown in are three views a b and c of optical element . Light from the emitters enters optical element as wide angled overlapping beams. shows emitters facing a surface of element . Wide beams from respective emitters enter element through surface . also shows the distance or pitch between neighboring emitter elements.

Each of wide beams spans two pitches and as such the wide beams overlap in the area between neighboring emitters. A surface of element is formed as a wave like pattern of facets alternatingly directed at neighboring emitters. shows alternating shaded and non shaded facets on surface . In element between emitters and shaded facets aimed at emitter are interleaved with non shaded facets aimed at emitter . In element between emitters and shaded facets aimed at emitter are interleaved with non shaded facets aimed at emitter .

Reference is made to which is a simplified illustration of an optical element reflecting collimating and interleaving light from two neighboring emitters in accordance with an embodiment of the present invention. As shown in each reflective facet of element collimates rays from its corresponding emitter thereby interleaving collimated rays from two emitters. shows optical element reflecting and collimating light from two neighboring emitters and . Alternating facets of element focus on these two elements. By interleaving collimated rays element collimates light from two emitters across the screen in overlapping wide beams. Elements at an opposite screen edge direct the wide beams onto respective receivers.

Each facet on surface is precisely angled to focus on its element. The surface areas of each facet are also configured so that sufficient amounts of light are provided for detection.

Alternative embodiments of optical element collimate and interleave incoming wide beams through refraction instead of reflection. In such case the wave like multi faceted surface is situated at an input or output surface of optical element . In the case of reflecting facets the facets re direct light inside the optical element.

At times it is desirable to run a touch screen in a low frequency mode e.g. in order to save power. Configuration no. 5 enables an accurate low frequency scan mode. In accordance with an embodiment of the present invention two detection signals along a screen axis are provided for each touch location. In low frequency mode during a first scan every other emitter receiver pair is activated thus activating only half of the pairs along only one screen axis but nevertheless covering the entire screen. During a second scan the remaining emitter receiver pairs along this axis are activated. As such odd emitter receive pairs are first activated then even emitter receiver pairs thus providing two full screen scans and spreading usage evenly across all emitter and receiver elements. In order to keep power consumption at a minimum only emitter receiver pairs along the shorter edge of a rectangular screen are activated.

In an alternative embodiment of the present invention both axes of a screen are scanned and each scanned axis provides initial touch information about the screen. As such instead of sequentially activating multiple scans of a single axis in the alternative embodiment sequential activation of scans of separate axes are activated. A sequence of four scans are activated at four sampling intervals namely i a first half of the emitter receiver pairs along a first screen axis are scanned ii a first half of the emitter receiver pairs along a second screen axis are activated iii the second half of the emitter receiver pairs along the first screen axis are activated and iv the second half of the emitter receiver pairs along the second screen axis are activated.

A goal in designing alternating reflective or refractive facets of an optical element is to generate a light distribution that provides good gradients as a basis for interpolation by way of a linear signal gradient S x from an emitter to a receiver. A number of parameters affect the light distribution.

Reference is made to which is a simplified diagram of a multi faceted optical element in accordance with an embodiment of the present invention. Shown in are parameters that control light from each facet of the optical element as described in what follows.

The light intensity distribution depends on a polar angle in accordance with the third power cos . The angle is a function of distance between beams of a single emitter or receiver element that go to different facets and of distance between the emitter or receiver element and element .

The Fresnel loss F is the amount of light lost due to reflection caused by the refractive index of element when a beam enters optical element . Variation of Fresnel loss F between different angles under Brewster s angle is less than 1 and is therefore negligible.

Facet beam width Y is the total width covered by a single facet beam. The alternating facets generate gaps in the light from emitter as neighboring facets are focused on neighboring emitter . Light from each facet covers the gaps. Facet beam width Y depends on facet width B and on the widths of neighboring facets. shows facets and aimed at emitter and respective facet beam widths Y Yand Ythat together cover the neighboring facets and aimed at emitter .

Reference is made to which is a simplified graph showing the effect of reflective facet parameters Y and B on light distribution for nine facets in accordance with an embodiment of the present invention. The graph of also shows actual light distribution and a reference linear function. As seen in the actual light distribution signal is approximately linear. The data in the graph is normalized based on the central facet located at location 0 on the x axis being assigned a value of 1 in all aspects. As such the facet width B is labeled Bnorm in the graph and facet widths are normalized relative to the width of the central facet. Generally the angular parameter provides a sloped curve which is flat for small values of as seen in in the flat portion of the curve labeled cos 3 between positions 0 and 2 along the x axis. The gradient for small is increased by adjusting parameter B which in turn affects parameter Y labeled Yfactor. The complete signal is labeled signal in the graph and it is approximately linear.

TABLE I lists parameters for each facet in a series of nine facets that are focused on one emitter or receiver element. In TABLE I x pos denotes the distance in millimeters from the central facet B denotes the facet width in millimeters B norm denotes the normalized facet width based on the central facet having a width of 1 Yfactor denotes the facet beam width normalized to the width of the central facet beam Signal denotes the normalized signal value for each facet and Line denotes signal values for a reference straight line.

TABLE II lists parameters for a series of alternating facets focused on two neighboring elements such as an emitter and a neighboring receiver. In TABLE II facets nos. 1 5 are focused on an emitter and facets nos. 6 9 are focused on a neighboring receiver. Three values are listed for each facet namely its width B its location x pos along the x axis relative to the center of the central facet for the emitter and the location border pos of the facet s outer edge. All facet values are specified in millimeters.

Reference is made to which is a simplified illustration of a touch screen with a wide light beam crossing the screen in accordance with an embodiment of the present invention. Reference is also made to which is a simplified illustration of a touch screen with two wide light beams crossing the screen in accordance with an embodiment of the present invention. Reference is also made to which is a simplified illustration of a touch screen with three wide light beams crossing the screen in accordance with an embodiment of the present invention. As shown in a screen is surrounded with emitters and receivers. A wide beam is shown representing a wide detection area on screen that is detected by an emitter receiver pair . Wide beam is generated by optical elements such as element described hereinabove but not shown in . A first element collimates light from emitter and a second element focuses wide beam onto receiver . A graph shows the gradient of signal intensities detected across the width of wide beam .

Reference is made to which is a simplified graph of light distribution of a wide beam in a touch screen in accordance with an embodiment of the present invention. The lower portion of shows a path across wide beam and the upper portion of is a graph depicting signal intensity distribution along this path. The graph s x axis represents the horizontal screen dimension in units of millimeters. The graph s y axis represents the baseline signal intensity detected by emitter receiver pair situated at 10 mm along the screen axis. The signal corresponds to a screen with emitter and receiver elements arranged at a pitch of 10 mm. As such the detected wide beam spans 20 mm. The spikes in the graph are caused by the alternating facets of optical element describe above which alternately focus rays at neighboring elements. As such spikes correspond to facets belonging to the measured emitter receiver pair and the neighboring troughs correspond to facets belonging to a neighboring emitter receiver pair. Despite these spikes detection signals of a finger or another object along the measured screen axis have a relatively smooth gradient along the entire 20 mm span of the beam since the finger is wider than the narrow spike and trough channels. As such a finger blocks a series of spikes which remain substantially uniform as the finger slides long the screen axis. E.g. a fingertip is approximately 6 mm wide whereas there are 8 9 spikes in 10 mm in the graph of .

Reference is made to which is a simplified illustration of detection signals from three wide beams as a fingertip moves across a screen in accordance with an embodiment of the present invention. Shown in are three detection signals of a fingertip as it moves across three neighboring wide beams along a screen axis. From each of the signals it is apparent that as the finger enters a wide beam the finger blocks a small portion of the beam. As the finger moves along the axis toward the center of the beam it blocks progressively more of the beam until it blocks roughly 40 of the beam intensity indicated in the graph by a minimum detection of 60 of the expected baseline signal. As the finger moves further along it blocks progressively less of the beam. The shape of the detection curve is relatively smooth despite the peaks and troughs in the light beam shown in . There are slight fluctuations along the detection curves of that are at least partially due to the peaks but these fluctuations are minimal and do not significantly distort the trend of the signal.

Reference is made to which are simplified graphs of light distribution in overlapping wide beams in a touch screen in accordance with an embodiment of the present invention. Taken together FIGS. and show a light distribution across three neighboring wide light beams on a screen with emitter receiver pairs spaced 10 mm apart. As seen in these figures the facets of optical element provide overlapping touch detection by two emitter receiver pairs. shows the light signal from an emitter receiver pair situated at location 0 along the measured screen axis. shows the light signal from an emitter receiver pair situated at a location 20 mm along the measured screen axis. shows the light signals from the three emitter receiver pairs of and and shows how these light beams cover overlapping areas of the screen surface. shows three detection signals for the three emitter receiver pairs of as a fingertip moves along the screen axis.

Touch detection signals are less smooth when using a fine point stylus than when using a finger. E.g. a 2 mm stylus tip moving across a screen generates more fluctuations in a detection signal than does a 6 mm finger since the stylus tip covers fewer peaks in the light signal and therefore moving in and out of a signal peak changes a larger part of the blocked signal. Nevertheless embodiments of the present invention overcome this drawback and determine stylus touch locations with a high level of accuracy by interpolating multiple detection signals.

Reference is made to which is a simplified graph of detection signals from a wide beam as a fingertip moves across a screen at three different locations in accordance with an embodiment of the present invention. Shown at the bottom of are three paths traced by a finger across a wide beam . Path is near LED path is mid screen and path is near a PD . The graph in the upper portion of shows three detection signals of a fingertip as it traverses the three paths labeled in the graph legend as LED edge Midscreen and PD edge respectively. The three detection signals in the graph are substantially overlapping. As such the signal is uniformly detected along its depth and the signal varies as a function of the touch along only one axis of the screen. Thus determining a touch location along a first axis is independent of the detection signal along a second axis. Moreover the intensity of the signal is uniform along the second axis making the signal robust.

Some embodiments of Configuration no. 5 includes optical elements with alternating facets that are focused on two neighboring light emitting or receiving elements. When such an optical element is separate from the light emitters or receivers the emitters or receivers are generally spaced at a particular pitch. When such an optical element is formed as a rigid module together with an emitter or a receiver the embedded emitter or receiver is precisely positioned with respect to the reflective facets. The facets aimed at a neighboring module are aimed in accordance with the embedded emitter or receiver in the neighboring module that is similarly situated in its module. Such positioning potentially restricts the size of a screen to integral multiples of the pitch. E.g. with a pitch of 10 mm between emitters the screen dimensions must be integral multiples of 10 mm. Embodiments of the present invention are able to overcome this restriction as described in what follows.

Reference is made to which is a simplified diagram of four optical elements and four neighboring emitters in accordance with an embodiment of the present invention. Shown in are four optical elements arranged in a row. Each element is positioned opposite a respective one of emitters . The same configuration is assembled for receivers or for alternating emitters and receivers. In the case of receivers emitters are replaced by receivers and in the case of alternating emitters and receivers emitters and are replaced by receivers.

Optical elements and are all of the same width e.g. 10 mm i.e. w w w. The pitch P between emitters and is a standard distance e.g. 10 mm. The facets of optical element are constructed for emitters that are at a standard pitch of 10 mm. Pitches P and P may be nonstandard. By enabling a device manufacturer to insert a single emitter at a non standard pitch the manufacturer can accommodate any screen size. The width w of optical element is customized for a non standard screen size e.g. for a screen length of 96 mm w is 6 mm instead of 10 mm and pitches P and P are each 8 mm. Optical element is a hybrid element the left half of element has facets aimed at emitters and which are positioned according to a standard 10 mm pitch and the right half of element is special having facets aimed at emitters and where emitter has a non standard placement. Optical element is also a hybrid element as its left half has facets aimed at emitters and whereas its right half is aimed at two standard pitch emitters. Optical element is non standard throughout it is not as wide as the standard elements and has every other of its facets aimed at emitter . In this example the width of the beam from emitter is roughly 16 mm as compared to the standard 20 mm width. As such emitter is placed slightly closer to optical element .

As described hereinabove diffractive surfaces are used in embodiments of the present invention to direct beams from two emitters along a common path. Reference is made to which is a simplified diagram of a diffractive surface that directs beams from two emitters along a common path in accordance with an embodiment of the present invention. Shown in are emitters and emitting arcs of light and into two collimating lenses . Wide beams and exit lenses and enter refractive surface which directs both beams and into a wide beam that crosses the screen. A similar optical arrangement splits wide beam onto two receivers at the opposite screen edge. Each emitter is activated separately with a respective opposite receiver. Beams from the two emitters have different signal gradients along the width of beam as explained hereinabove. The two detection signals are used to calculate a touch location from EQS. 2 and 3 provided hereinbelow.

As described hereinabove parallel wide beams projected at slightly different heights over a screen are used in alternative embodiments of the present invention to provide multiple detection signals for a touch event on the screen.

In an alternative embodiment of the present invention emitters and receivers are positioned alternately along each screen edge. Reference is made to which is a simplified diagram of a touch screen surrounded with alternating emitters and receivers in accordance with an embodiment of the present invention. Reference is also made to which is a simplified illustration of a touch screen surrounded with alternating emitters and receivers and a wide beam crossing the screen in accordance with an embodiment of the present invention. Reference is also made to which is a simplified illustration of a touch screen surrounded with alternating emitters and receivers and two wide beams crossing the screen in accordance with an embodiment of the present invention. Reference is also made to which is a simplified illustration of a touch screen surrounded with alternating emitters and receivers and three wide beams crossing the screen in accordance with an embodiment of the present invention. show overlapping wide beams similar to those of described hereinabove.

Reference is made to which is a simplified illustration of a collimating optical element reflecting and interleaving light for an emitter and a neighboring receiver in accordance with an embodiment of the present invention. shows optical element interleaving neighboring light beams wherein a first beam is outgoing from emitter and a second beam is incoming to neighboring receiver . also shows signal gradient for the first beam and signal gradient for the second beam. When a touch is detected on both beams the sloping gradients enable determination of a precise touch location by interpolation as described hereinbelow.

As indicated hereinabove with reference to the detection signal does not vary with depth of touch location within a wide beam. Therefore the opposing directions of the adjacent overlapping wide beams do not affect the touch detection signal. In turn this enables interpolating signals from overlapping beams without regard for direction of each beam.

Multi touch locations are often difficult to identify unambiguously via light emitters that emit light in directions parallel to two axes. Reference is made to which are illustrations of multi touch locations that are ambiguous vis vis a first orientation of light emitters in accordance with an embodiment of the present invention. As shown in there is ambiguity in determining the locations of a diagonally oriented multi touch. There is further ambiguity if a multi touch includes more than two pointers. For example the two touch cases shown in are also ambiguous vis vis the three touch case shown in and vis vis the four touch case shown in . In each of these cases row and column indicators a h show an absence of light in the same locations. Such ambiguity is caused by ghosting which refers to an effect where the shadow of one pointer obscures a portion of another pointer.

In accordance with an embodiment of the present invention ghosting is resolved by use of two sets of grid orientations for touch detection.

Reference is made to which are illustrations of the multi touch locations of that are unambiguous vis vis a second orientation of light emitters in accordance with an embodiment of the present invention. Use of an arrangement of alternating emitters and receivers as described hereinabove with reference to and use of additional optical elements to generate two sets of detection axes provide important advantages. One advantage is generating a robust set of overlapping wide beams whereby multiple detection signals may be interpolated in order to determine touch coordinates with high precision. Another advantage is generating overlapping wide beams on the second axis set such that touch detection on the second axis set is also precise.

A dual unit light guide is described hereinabove with reference to . As described there the lower portion of the light guide contains reflective facets or lenses that are focused on the emitters and receivers and the upper portion includes reflective surface and lenses that do not require precision placement vis vis the emitters and receivers. In Configuration No. 5 the alternating reflective or refractive facets form part of the lower portion. A three sided refractive cavity for distributing light beams in three directions is formed as part of the upper portion. In Configuration No. 5 use of micro lenses is not required. Alternatively the alternating facets are formed in transparent plastic modules that include an emitter or receiver as described hereinbelow with reference to . An arrangement of these modules replaces lower portion and upper portion remains.

Reference is made to which is a simplified illustration of a touch screen with light beams directed along four axes in accordance with an embodiment of the present invention. Shown in is a row of light emitters along the top edge of a screen and a row of light receivers along the bottom edge of screen . The left and right edges of screen include opposing rows of combined emitter receiver elements . Elements act as emitters and as receivers. In an embodiment of the present invention an emitter and a receiver are combined in a single unit such as the reflective and transmissive sensor manufactured by Vishay Corporation of Malvern Pa. In another embodiment of the present invention an LED is used for both light emission and detection. An integrated circuit that both emits and detects light using an LED and a current limiting resistor is described in Dietz P. H. Yerazunis W. S. and Leigh D. L. Very low cost sensing and communication using bidirectional LEDs International conference on Ubiquitous Computing UbiComp October 2003.

Reference is made to which is a simplified illustration of an alternate configuration of light emitters and light receivers with two grid orientations in accordance with an embodiment of the present invention. Shown in are light emitters in an alternating pattern with light receivers around a screen perimeter. Light emitted by each emitter is detected by two receivers at an opposite screen edge the two receivers being separate by an emitter therebetween.

In order that the light from an emitter arrive at the outer edges of two opposite receivers the wide beams emitted from each emitter must span a distance of three optical lenses. This is in contrast to the configuration described above with shift aligned emitters and receivers where the two receivers that detect light from a common emitter are positioned adjacent one another and thus the wide beams emitted from each emitter need only span a distance of two optical lenses.

Reference is made to which is a simplified illustration of a configuration of alternating light emitters and light receivers in accordance with an embodiment of the present invention. As shown in emitter is situated between receivers and along the bottom screen edge and emitter is situated between receivers and along the top screen edge. Light from emitter is detected by receivers and and light from emitter is detected by receivers and .

Reference is made to which is a simplified illustration of two wide light beams from an emitter being detected by two receivers in accordance with an embodiment of the present invention. Shown in are two wide beams from emitter that exit lens and arrive at lenses and for detection by receivers and respectively. One wide beam is bordered by edges and and the other wide beam is bordered by edges and . A cross hatched triangular area indicates an overlap where a touch is detected at receivers and .

Reference is made to which is a simplified illustration of two wide beams and an area of overlap between them in accordance with an embodiment of the present invention. One wide beam from emitter exits lens and arrives at lens for detection by receiver . The wide beam is bordered by edges and . Another wide beam from emitter to receiver is bordered by edges and . A cross hatched diamond shaped area indicates an overlap where a touch is detected at receivers and .

It will thus be appreciated by those skilled in the art that any location on the screen is detected by two emitter detector pairs when the emitter detector pairs are situated at opposite screen edges and as such an accurate touch location may be calculated as described hereinabove.

Reference is made to which is a simplified illustration of a touch point situated at the edges of detecting light beams in accordance with an embodiment of the present invention. shows that it is desirable that the light beams extend to the edges of the emitter and receiver lenses in order to accurately determine the location of touch point .

Reference is made to which is a simplified illustration of an emitter along one edge of a display screen that directs light to receivers along two edges of the display screen in accordance with an embodiment of the present invention. Shown in are a first pair of light beams emitted from an emitter at one edge of a display screen to receivers and along the opposite edge of the display screen and a second pair of light beams emitted from emitter to receivers and along the adjacent left edge of the display screen. A third pair of light beams not shown is emitted from emitter to receivers at the adjacent right edge of the display screen. The second and third pairs of light beams are each oriented at an angle of approximately 45 relative to the first pair of light beams.

Also shown in is a lens used to refract light from emitter to lenses and which are oriented at approximately 45 to the left of lens . In an embodiment of the present invention lens is made of a plastic material which has an index of refraction on the order of 1.4 1.6. As such an angle of incidence of approximately 84 is required in order for the light to be refracted at an angle of 45 . However for such a large angle of incidence the amount of light lost due to internal reflection is large. In order to improve throughput two air plastic interfaces are used to achieve an angle of refraction of approximately 45 as described hereinabove.

Reference is made to which are simplified illustrations of a lens for refracting light in three directions having a lens surface with a repetitive pattern of substantially planar two sided and three sided recessed cavities respectively in accordance with embodiments of the present invention. The flat surface opposite the emitter or receiver is distal to the emitter or receiver in forming a three sided cavity and is proximal thereto in separating two two sided cavities.

Such three sided lenses are used in several embodiments. In a first embodiment the lens is used without an additional optical component with alternating facets for interleaving neighboring beams. In this embodiment wide beams cover the screen but do not necessarily overlap to provide two or more detection signals for interpolation. A typical use case for this embodiment is finger input but not stylus input. The tri directional lens enables detection on four different axes to eliminate ambiguity and ghosting in multi touch cases. The tri directional lens also provides additional touch location information namely four axes instead of two and the additional information increases the precision of the touch location even for a single touch.

In a second embodiment the lens is used with an additional optical component with alternating facets for interleaving neighboring beams or with an alternative arrangement providing overlapping detection signals. In this embodiment overlapping wide beams provide two or more detection signals for interpolation. Typical use cases for this embodiment are finger and stylus input. The tri directional lenses and the interleaving facets may be formed in two distinct components. The interleaving facets component is positioned closer to its emitter or receiver than the tri directional component since the tolerance for imprecise placement of the interleaving facets component is low whereas the tolerance for imprecise placement of the tri directional lens component is high. Alternatively the tri directional lenses and the interweaving facets may be formed in a single rigid component. For example a diffractive grating interleaves signals from two sources and also splits the beams in three directions.

Shown in is a lens with a pattern of micro lenses on its bottom surface. The micro lens pattern shown in has three substantially planar sides each side refracting light in a different direction. The pattern of micro lenses form a saw tooth repetitive pattern along the bottom edge of the upper section of the lens. The three walls of each micro lens are slightly curved in order to spread the light in a wider arc as it exits the lens toward an intended receiver.

A collimating lens section not shown is situated beneath lens to direct the light in parallel beams into micro lenses .

In some embodiments of the present invention lens is part of a two lens arrangement with lens forming the upper of the two lenses farther from the emitter or receiver and nearer to the screen surface. In distinction the two section lens shown in has a micro lens pattern on the top of the lower section.

In order to properly interleave collimated beams from the alternating facets component the pitch of the three sided cavities needs to be much smaller than the pitch of the alternating facets. Ideally the pitch of the cavities should be made as small as possible. With alternating facets of about 0.6 mm the cavities should be 0.2 mm or smaller. The dihedral angle between each pair of adjacent planes is approximately 122 to achieve a 45 refraction using plastic having a refractive index of 1.6. However different angles may be desired for a different set of diagonal axes or plastic having a different refractive index may be desired in which case the dihedral angle will be different.

As shown in incoming collimated light is refracted through two air plastic interfaces to emerge at an angle of refraction that is approximately 45 . The first interface along an inner plane of the micro lens refracts the incoming light to an angle of refraction that is approximately 58 and the second interface refracts the light to emerge at an angle of refraction that is approximately 45 .

Reference is made to which are simplified illustrations of a touch screen surrounded with alternating emitters and receivers and diagonal wide beams crossing the screen in accordance with an embodiment of the present invention. show diagonal wide beams from emitter and to receiver and a corresponding signal gradient . shows diagonal wide beams from emitters and to receivers and and corresponding signal gradients and . These wide beams overlap wide beam of thereby providing multiple touch detections for interpolation.

Reference is made to which is a simplified graph of light distribution across a diagonal wide beam in a touch screen in accordance with an embodiment of the present invention. The lower portion of shows a wide beam and a path crossing this beam according to a second axis system. If the pitch between elements is 1 unit then the width of this beam is 1 2 units. Thus if the pitch between elements is 10 mm then the beams along the diagonal axes are approximately 7 mm across. The upper portion of shows the distribution of light across wide beam . The signal spans across approximately 14 mm of the diagonal beam as compared with 20 mm of the vertical beam in . As described above with reference to the signal gradient across the width of the beam enables interpolating multiple detection signals to determine a precise touch position.

Reference is made to which is a simplified graph of light distribution across three overlapping diagonal wide beams in a touch screen in accordance with an embodiment of the present invention. shows a signal distribution across three overlapping beams in a second axis system similar to . Different widths are covered by these two sets of beams.

Reference is made to which is a simplified graph of touch detection as a finger glides across three overlapping diagonal wide beams in a touch screen in accordance with an embodiment of the present invention. shows how reception of a finger passing across three adjacent overlapping beams is detected by each beam. The maximum detection signal is approximately 40 of the baseline signal intensity and this occurs when the finger is in the middle of the beam. In this case the finger blocks approximately 60 of the total light of the beam. This is greater than the amount of light blocked by the same finger in namely 40 . The difference is due to the diagonal beam being narrower than the vertical beam. Therefore a 6 mm fingertip blocks a greater portion of light in the beam. The detection signals are substantially smooth and robust for determining touch locations.

Reference is made to which is a simplified graph of detection signals from a diagonal wide beam as a fingertip moves across the screen at three different locations in accordance with an embodiment of the present invention. shows that touch detection remains stable along depth of a wide beam and varies only according to its location across the width of the beam as described hereinabove with reference to .

Reference is made to which is a simplified illustration of a first embodiment for a touch screen surrounded with alternating emitters and receivers whereby diagonal and orthogonal wide beams crossing the screen are detected by one receiver in accordance with an embodiment of the present invention. shows an embodiment with an equal number of elements positioned along each screen edge. Three beams are shown for one receiver namely one directed to an opposite emitter and the other two directed to emitters and on adjacent screen edges. The diagonal beams generate two axes that are not perpendicular to one another.

Reference is made to which is a simplified illustration of a second embodiment for a touch screen surrounded with alternating emitters and reciters whereby diagonal and orthogonal wide beams crossing the screen are detected by one receiver in accordance with an embodiment of the present invention. shows an embodiment with different numbers of elements positioned along adjacent screen edges. Three beams are shown for one receiver namely one directed to an opposite emitter and the other two directed at substantially 45 angles to emitters and one of which is on an opposite edge and another of which is positioned on an adjacent edge. These diagonal beams generate two axes that are perpendicular to one another.

When a user rests his hypothenar muscles located on the side of his palm beneath his little finger on a touch screen when writing with a stylus ghosting generally occurs. This part of the palm blocks a large area of the touch screen and often blocks a series of light beams along the screen s vertical axis thereby hiding the stylus touch position along the vertical axis.

Reference is made to which is a simplified illustration of a user writing on a prior art touch screen with a stylus. Shown in is a hand holding a stylus and drawing a line on a touch screen . The user s palm is resting on screen blocking two series of light beams depicted as dotted lines namely a series along the screen s horizontal axis and a series along the screen s vertical axis. The location of the stylus tip on the vertical axis is within series . Beam does detect the tip of the stylus but it only provides a horizontal axis location.

Embodiments of the present invention overcome the drawback illustrated in . Reference is made to which is a simplified illustration of light beams detecting location of a stylus when a user s palm rests on a touch screen in accordance with an embodiment of the present invention. By providing two sets of detection axes namely an orthogonal set and a diagonal set a two dimensional location of a stylus is determined. shows that beams and uniquely detect a stylus. Since each detection comprises overlapping wide beams whose signals are interpolated as described hereinabove the stylus position is determined with high precision despite beams and not being perpendicular to one another. When the bottom of the user s palm does not block diagonal beam then beam also detects the stylus location separately from the palm. In such case beams and are used to detect the stylus location. Alternatively all three detecting beams may be used.

Another challenge that arises with touch screens that support both stylus and finger input arises when a user places his palm on the screen in order to write with a stylus is misinterpretation of the initial contact between palm and screen as being a tap on an icon in response to which the device launches an unintended application whose icon was tapped. Once the palm is resting on the screen an area of contact is used to reject the palm touch as a screen tap. Nevertheless the initial contact may cover a small surface area of the screen and thus be misinterpreted as a screen tap.

According to embodiments of the present invention light beams above the screen are used to detect a palm as it approaches the screen. In one embodiment this is accomplished by projecting light from each emitter at several heights above the screen as illustrated in showing an approaching finger blocking beam but not beam . In another embodiment multiple layers of emitters and receivers are arranged around the screen and used to detect objects at different heights above the screen as described hereinabove with reference to a user input gesture cavity and in particular with the cavity frame folded on top of the screen.

Reference is made to which is a simplified illustration of a frame surrounding a touch screen in accordance with an embodiment of the present invention. shows a frame surrounding a touch screen similar to frame of . Two stacked rows of emitters and receivers are provided in the frame. When assembled together with a display in an electronic device the stacked rows of emitters and receivers are raised above the display surface and provide object detection at two heights namely on the screen by the lower row of emitters and receivers and above the screen by the upper row of emitters and receivers. When a user s palm begins to touch the screen a large palm area is detected hovering above the screen. This enables the device to determine that a palm is approaching the screen and that any screen tap is inadvertent.

In another embodiment of the present invention only one row of emitters and receivers is provided for detecting a palm hovering above the screen and touches on the screen are detected by conventional detection systems imposed on the display including inter alia capacitive or resistive touch sensors.

According to an embodiment of the present invention a user interface disables screen taps for activating functions when a palm is detected. When the palm is detected the user interface is configured to launch applications in response to a user touching an icon and gliding his finger away from the touched location along the touch screen. I.e. two sets of user interface gestures are provided. When no palm is detected the first set of gestures is used. With the first set of gestures a tap on an icon activates an application or function associated with the icon. When a palm is detected hovering above the screen the second set of gestures is used. With the second set of gestures the user is required to touch an icon and then glide his finger away from the touch location along the touch screen in order to activate the application or function associated with the icon. In this way the device does not launch an unintended application when a user places his palm on the screen. The second set of gestures does not disable activation of icons it enables the user to activate the application or function associated with the icon if he desires to do so by a touch and glide gesture.

Screen corners present several challenges for arranging emitters and receivers. One challenge is that two emitters need to be placed in the same location one for each screen edge. The challenge is complicated by the layout illustrated in whereby the emitter and receiver elements are positioned under the screen surface and therefore the rectangle formed by these elements is smaller than the frame of lenses surrounding the screen. One approach to overcoming this challenge is placement of two emitters at approximately the same location on the PCB with one of the emitters placed on the top surface of the PCB and the other emitter placed on the bottom surface of the PCB. However this approach introduces complications with connectors and positioning of optical elements.

Another challenge is extending overlapping beams to the edges of the screen. Although the emitters and receivers are underneath the screen touch detection covers the entire area bordered by the inner edges of the optical elements that surround the screen.

Embodiments of the present invention provide arrangements that are suitable for use with orthogonal and diagonal detection axes as described hereinabove. Reference is made to which is a simplified illustration of a first embodiment of emitters receivers and optical elements for a corner of a touch screen in accordance with an embodiment of the present invention. shows a first corner arrangement of emitter or receiver elements and their respective optical elements. Receivers and emitters are arranged alternatingly along two adjacent screen edges. Solid lines indicate light beams from the emitters and dashed lines indicate light beams arriving at the receivers. Emitters and receivers and are positioned according to a standard pitch and optical elements are configured accordingly. Receiver and emitter are oriented at an angle and their wide beams are divided such that half of a beam traverses the screen in a first direction e.g. along the screen s vertical axis and the other half of the beam traverse the screen in a second direction e.g. along the screen s horizontal axis. Moreover in embodiments that include a second lens having three sided cavities for splitting beams as described hereinabove half of the wide beam is split into a first pair of diagonal beams that originate along one screen edge and the other half of the beam is split into a second pair of diagonal beams that originate along an adjacent screen edge. A hybrid optical element is provided in order to overlap beams for emitter and receiver . Optical element is referred to as a hybrid optical element because the right half of the element is the same as the right half of element but a portion of the reflective or refractive facets on the left half are directed at the non standard location and orientation of emitter . Similarly a hybrid optical element is provided in order to overlap beams for emitter and receiver . The lower half of hybrid optical element is similar to the left half of element . Both halves of corner element are uniquely configured namely the left half overlaps beams for emitter and receiver and the right half overlaps beams for emitter and receiver . Both halves of corner optical element are also uniquely configured for emitters and and for receiver .

Reference is made to which is a simplified illustration of a second embodiment of emitters receivers and optical elements for a corner of a touch screen in accordance with an embodiment of the present invention. shows an alternative corner arrangement of emitter or receiver elements and their respective optical elements. In the arrangement shown in only one emitter is placed at a non standard pitch and orientation. Standard optical elements are used together with hybrid optical elements and and unique corner optical elements . Optical elements are configured for the emitter receiver arrangement shown and are therefore different than elements of .

In general there is low tolerance for assembly errors for touch systems using alternating reflective or refractive facets aimed at two foci. An offset in placement of an emitter or a receiver causes it to be out of the reflective facet s focus which can degrade accuracy and performance of such systems. In accordance with an embodiment of the present invention rigid modular blocks containing reflective or refractive facets and an emitter or a receiver are prepared in order to ensure the required assembly precision. Such modular blocks are useful for simplifying the process of integrating touch screen components and for minimizing the tolerance chain for a manufacturer. These modular blocks are formed so as to be easily positioned together in a row along an edge of a display for fast assembly of a touch screen. The high tolerance requirements of placing an emitter or receiver in exactly the correct position vis vis the reflective or refractive facets are handled during manufacture of the modular blocks thus removing the burden of high precision assembly from a device manufacturer.

Simplified manufacturing is achieved by integrating optical elements and electronic components into a single unit. As such complex surfaces may be gathered into one component thereby reducing the need for high assembly tolerances.

Reference is made to which is an illustration of optical components made of plastic material that is transparent to infrared light in accordance with an embodiment of the present invention. Shown in is an optical component that includes a forward facing LED and electronics to handle the LED signal. Optical component is connected to electrical pads and . Optical component is used to transmit collimated light beams from two emitters namely emitter and emitter . Emitter is included in a neighboring optical component . In the alternating emitter receiver embodiment described hereinabove optical component is used to transmit collimate light beams for one emitter and one receiver. E.g. neighboring module includes a receiver instead of emitter .

Light beams from emitter exit optical component through a tight fitting surface and enter optical component through a tight fitting surface . shows non parallel light beams from emitters and hitting alternating facets on a wave like multi faceted reflective surface . Components and are substantially identical and fit together. A device manufacturer can thus use these components as building blocks to create a touch screen by arranging a series of these building blocks in a row along each edge of the display. Typical arrangements are a two adjacent display edges are lined with emitter components and the other two edges are lined with receiver components and b all four display edges are lined with alternating emitter receiver components i.e. each emitter has a neighboring receiver. Indeed the emitter and receiver components being of substantially identical shape can be positioned together in the same row.

An optical component is similar to optical component except that an LED is side facing instead of forward facing. shows collimated light beams exiting optical component . Pins and guide optical component on a printed circuit board.

Optical component is optical component as viewed from the front. shows collimated light beams exiting optical component .

Similar optical components not shown are also provided for receiving light beams that traverse the screen surface. For these components the emitters are replaced by receivers and the electrical components handle the receiver signals. Such optical components receive collimated light beams and direct the beams onto two different receivers.

Reference is made to which is a simplified diagram of a side view of a touch screen with light guides in accordance with an embodiment of the present invention. Shown in are a display an optical element a photo diode within optical element an optical element and an emitter within optical element . Optical elements and are connected to a printed circuit board . Emitter emits non parallel light beams and as described hereinabove with reference to the non parallel beams are converted into collimated beams or substantially collimated beams before exiting optical element . Another portion of the non parallel beams are collimated by a neighboring module not shown in . The beams that exit optical element are directed upwards and are reflected over display by a light guide . In an embodiment of the present invention three way refracting cavities are etched or otherwise formed on the lower surface of optical element to refract the light beams in three directions in order to provide two coordinate systems for determining a touch location. The light beams enter a light guide on the opposite side of screen and are reflected below display into optical element . In embodiments supporting the two coordinate systems the three way refracting cavities are present on the underside of optical element as well. As described hereinabove optical element and its neighboring optical element not shown focus the incoming light beams on photo diode . In one embodiment of the present invention the light guides and are constructed as a frame that surrounds display .

In the touch screen of two types of light beam redirection occur. A first redirection requires multiple facets directed at a single focus point. A second redirection uniformly redirects incoming beams at a 90 angle or folds incoming light beams into a narrow waist or focus as described hereinabove with reference to configuration no. 4. In some embodiments the collimated beams are refracted in three directions in between the first and second redirections by refracting cavities.

The first type of redirection requires that the emitter or receiver be positioned at a specific location relative to the focal point of many facets. As such the positioning of the emitter or receiver and its reflective surfaces is sensitive to variations in placement. Thus the assembly of the emitter or receiver together with its corresponding surface of reflective facets has a low tolerance of error. The second type of redirection involving reflection and in some cases uniform refraction in three directions is robust to variations in position of the reflector and to the pattern of refracting cavities located in the light guide. Thus assembly of this portion of the light guide has a high tolerance for error.

The light guides that reflect light above the screen surface may be manufactured separately and assembled with other touch screen components. Thus in light guides and are shown separate from optical elements and .

Reference is made to which is an illustration of a touch screen with a block of three optical components on each side in accordance with an embodiment of the present invention. Blocks and are emitters and blocks and are receivers. The blocks create an active area where an x y touch position of a stylus or finger may be calculated based on detected blocked light. Adding more optical components of the same type to each block serves to enlarge the active area that is created.

Reference is made to which is a magnified illustration of one of the emitter blocks of in accordance with an embodiment of the present invention. Shown in are three emitters and that emit respective wide beams and from one edge of a screen which are read as respective signals and . The signal gradients are indicated by their diagonal orientations. At the opposite edge of the screen signals and are each redirected onto respective receivers by respective optical components. An accurate position of an object such as a finger or stylus touching the screen is then determined based on values of blocked light at the receivers as described hereinbelow.

Configuration no. 6 uses a reduced number of components by coupling an emitter or a receiver to one end of a long thin light guide situated along an edge of the screen. Such a light guide is described in U.S. Pat. No. 7 333 095 entitled ILLUMINATION FOR OPTICAL TOUCH PANEL.

Reference is made to which is an illustration of a touch screen having a long thin light guide along a first edge of the screen for directing light over the screen and having an array of light receivers arranged along an opposite edge of the screen for detecting the directed light and for communicating detected light values to a calculating unit in accordance with an embodiment of the present invention. Light emitters are coupled to both ends of light guide . Light guide is positioned along one edge of a touch screen . Light is emitted into light guide along a screen edge and is re directed across the screen surface by a reflector . A plurality of receivers is situated along the opposite edge of touch screen to enable multiple receivers to detect a touch as described hereinabove with reference to configuration nos. 2 and 3.

Reference is made to which is an illustration of a touch screen having an array of light emitters along a first edge of the screen for directing light beams over the screen and having a long thin light guide for receiving the directed light beams and for further directing them to light receivers situated at both ends of light guide in accordance with an embodiment of the present invention. Detected light values at receiver are communicated to a calculating unit not shown . According to another embodiment of the present invention only one light receiver is coupled to one end of light guide . Light guide is positioned along one edge of a touch screen . A plurality of emitters is situated along the opposite edge of the touch screen to enable receiver s to detect a touch based on serial activation of multiple emitters as described hereinabove with reference to configuration nos. 2 and 3. Light emitted across the screen surface is re directed by a reflector . Light is received into light guide along the screen edge and is directed through the length of light guide onto a receiver .

Reference is made to which is an illustration of two light emitters and each emitter coupled to an end of a long thin light guide in accordance with an embodiment of the present invention. Light guide is positioned along one edge of a touch screen. Light is emitted into light guide along a screen edge and is re directed across the screen surface by a reflector . A plurality of receivers is situated along the opposite edge of the touch screen to enable multiple receivers to detect a touch as described hereinabove with reference to configuration nos. 2 and 3. Each emitter and is activated separately and the receivers thus detect a touch based on blocked light from each of the two emitters. The amount of light emitted at any given location along the length of the light guide decreases as a function of the distance between the location and the emitter. As such different amounts of detected light from each emitter and are used to calculate the precise location of a touch as described hereinabove with reference to configuration nos. 2 and 3.

Embodiments of the present invention improve upon the light guide of U.S. Pat. No. 7 333 095 by etching or otherwise forming micro patterns on the outer surface of the light guide in order to widely refract outgoing light beams of or incoming light beams of as described hereinabove with reference to configuration nos. 2 and 3. Micro patterns are a uniform substantially parallel pattern of grooves along light guide and are simpler to form than the fan pattern described hereinabove with reference to configuration no. 2. Light guide also includes a light scatterer strip inside of light guide . Micro patterns and light scatterer strip appear in .

Configuration no. 7 enables detecting pressure on a touch screen as applied during a touch operation. Detecting pressure enables discrimination between a light touch and a hard press and is useful for user interfaces that associate separate actions to a touch and a press. E.g. a user may select a button or icon by touching it and activate the function associated with the button or icon by pressing on it. Such a user interface is described in applicants co pending U.S. application Ser. No. 12 486 033 entitled USER INTERFACE FOR MOBILE COMPUTER UNIT.

In some embodiments of the present invention a touch enabled device includes a base plane such as a PCB a light guide frame rigidly mounted on the base plane and a resilient member attached to the base plane to suspend or float a non rigidly mounted touch screen inside the light guide frame. A press on the touch screen deflects the floating touch screen along a z axis exposing more of the light guide frame. A light guide frame reflector which directs light over the screen as described hereinabove is formed so that the exposure allows more light to traverse the screen. In this way when a hard press on the screen occurs many of the receivers detect a sudden increase in detected light. Moreover detection of a hard press may be conditioned upon a touch being detected at the same time thus preventing false detection of a hard press due to a sudden increase in ambient light. When the downward pressure is released the resilient member returns the screen to its original position within the light guide frame.

Reference is made to which are illustrations of a touch screen that detects occurrence of a hard press in accordance with an embodiment of the present invention. shows touch screen in rest position screen being supported by resilient supporting members and that create a flex air gap which are mounted on a printed circuit board . shows two light guides and one on either side of screen for directing light from an emitter over screen to a receiver . Only a small upper portion of each light guide and extends above screen . Receiver communicates detected light intensities to a calculating unit not shown .

In some embodiments the light guide frame includes protruding lips and shown in that extend over the edges of screen to counter balance the upward force of resilient members and when no downward pressure is applied to screen . Resilient members and may comprise inter alia a flexible mounting material a torsion spring an elastic polymer body or a hydraulic suspension system. shows emitters receivers coupled with calculating unit and resilient members and arranged on a single PCB .

In other embodiments the touch screen is not displaceable relative to the frame. However the screen flexes or bends somewhat in response to a hard press. The bending of the screen causes a sudden increase in detected light in many of the receivers indicating a hard press on the screen. As indicated hereinabove detection of a hard press may be conditioned upon a touch also being detected at the same time thus preventing false detection of a hard press in response to trauma to the device.

Reference is made to which are bar charts showing increase in light detected when pressure is applied to a rigidly mounted 7 inch LCD screen in accordance with an embodiment of the present invention. The bar charts show the amount of light detected from each emitter along one edge of the screen when a soft touch occurs and when a hard touch occurs . The light emitters and light receivers are shift aligned so that light from each emitter is detected by two receivers. As such two bars are shown for each emitter indicating the light detected by each of the two receivers. Both bars indicate that a touch is detected at receivers opposite LED where no light is detected. The bar charts show that more light is detected from neighboring emitters in the case of a hard touch than in the case of a soft touch.

Configuration no. 8 provides a touch screen with at least one camera positioned under the screen surface to capture an image of the screen surface and of a pointer or a plurality of pointers touching the screen surface. In some embodiments of the present invention the screen pixels include light sensors each of which generates a pixel of an image of the underside of the screen glass the image being referred to herein as the screen glass image .

As described hereinbelow methods according to embodiments of the present invention determine precise touch coordinates using spatial and temporal filters. Application of these methods to configuration no. 8 yields sub pixel precision for touch coordinates.

Pixels in the screen glass image at the center of a touch location are generally completely blocked i.e. the level of light detected at each such pixel is below a designated threshold indicating that the pixel is occluded by a touch object. Pixels in the screen glass image along the edges of a touch location are generally only partially blocked i.e. the level of light detected at each such pixel is above the designated threshold indicating that the pixel is only partially occluded by the touch object.

A calculating unit that receives the screen glass image data assigns a relative weight to each pixel coordinate based on a touch detection intensity associated with that pixel as indicated by the pixel s value. The calculating unit further interpolates the pixel coordinates based on their associated weights to determine a touch coordinate. In some embodiments the calculating unit calculates a touch area having a perimeter wherein the edges of the touch area are calculated on a sub pixel level based on the above interpolations. The temporal filters described hereinbelow are applied inter alia when a series of connected touches are concatenated into a glide movement over a time duration.

Reference is made to which is a simplified diagram of an image sensor positioned beneath a screen glass display to capture an image of the underside of the screen glass and of touches made thereon in accordance with an embodiment of the present invention. The captured image data is transmitted to a calculating unit for analysis.

Reference is made to which is a simplified diagram of a display divided into pixels and three touch detections in accordance with an embodiment of the present invention. It is noted that edges of each of the touch detections cover respective portions of pixels. The weighted pixel coordinate interpolations described hereinabove are used to identify touch coordinates such as coordinates for touches and and the contours of touch areas such as the contours of areas and . In some embodiments of the present invention the interpolations include fully occluded pixels. In other embodiments of the present invention the interpolations include only partially occluded pixels.

Configuration no. 9 provides a touch screen with means to determine a three dimensional position of a pointer relative to the touch screen. In this configuration a low cost touch screen uses cameras to determine depth information. One or more cameras are mounted on a side of the touch screen so as to capture a mirrored image of an active touch area and the mirrored image is processed to determine a height of the pointer above the touch screen. The present invention may be embodied on an arbitrary size touch screen having a glossy surface.

Reference is made to which is a simplified diagram of a camera sensor positioned on a hinge of a laptop computer and pointing at a screen in accordance with an embodiment of the present invention.

Reference is made to which is a simplified side view diagram showing a camera viewing a touch area in accordance with an embodiment of the present invention.

Reference is made to which is a simplified top view diagram showing a camera viewing a touch area in accordance with an embodiment of the present invention. The broken lines in indicate the volume of space captured by camera .

Reference is made to which is a simplified diagram of a camera viewing a touch area and two image axes an image x axis and an image y axis for locating a touch pointer based on an image captured by camera in accordance with an embodiment of the present invention. Reference is also made to which is a simplified diagram of a camera viewing a touch area and two screen axes a screen x axis and a screen y axis for locating a touch pointer based on an image captured by camera in accordance with an embodiment of the present invention. The screen surface along the line of vision captured by camera is oriented along the image y axis. The image x axis is perpendicular to the image y axis along the plane of the touch screen surface. In order to distinguish these axes from the screen axes that run parallel to the screen edges the former axes are referred to herein as image axes and the latter axes are referred to herein as screen axes . Touch coordinates relative to the image axes may be transformed to screen axis coordinates.

The image captured by camera generally includes both a pointer and a reflection of the pointer on the surface of the touch screen. Based on the locations of the pointer and its reflection within the captured image the pointer position may be determined when the pointer is positioned on the screen or even above the screen. When the pointer touches the screen the pointer and its reflection in the captured image are tangent to one another as illustrated in . When the pointer is above the screen the pointer and its reflection in the captured image are separated apart from one another as illustrated in .

It will be appreciated by those skilled in the art that the captured image may be analyzed relative to an x axis along the bottom edge of the image and a y axis in the screen surface along the camera s line of vision. When the pointer is touching the screen the pointer s x and y coordinates may be determined by projecting the position of a pointer in the captured image along the x and y axes.

When the pointer is positioned above the screen not touching the screen the pointer s x coordinate may be determined as above namely by projecting the position of the pointer in the captured image along the x axis. To determine the pointer s y coordinate an appropriate location is selected along the line joining the positions of the pointer and the reflected pointer in the captured image and the position of the location is projected along the y axis. In some instances the appropriate location is the mid point of the line joining the positions of the pointer and the reflected pointer. In other instances the appropriate location is based upon the azimuthal angle at which the camera is orientated relative to the screen surface.

It will be appreciated by those skilled in the art that the height of the pointer above the screen surface may be determined based upon the distance between the pointer and the pointer s reflection in the captured image.

Use of multiple cameras provides additional information such as multi touch information and stylus information that may be obscured by a hand. Reference is made to which are simplified diagrams of two cameras and each capturing a touch area from different angles in accordance with an embodiment of the present invention. Each camera has a respective set of image axes as shown in . Reference is made to which is a simplified diagram of four cameras each capturing a touch area from different angles in accordance with an embodiment of the present invention.

Reference is made to which is a simplified diagram from a camera viewpoint of a camera viewing a complete touch area in accordance with an embodiment of the present invention. Shown in are the image x and y axes for images captured by camera .

Reference is made to which is a simplified diagram of a portion of a touch area showing a stylus and a mirror image of the stylus which are tangent to one another in accordance with an embodiment of the present invention. The image x and y coordinates of stylus are determined by projecting the position of stylus onto the image x and y axes. To assist with the projection a centerline between stylus and its mirror image is used.

Reference is made to which is a simplified diagram showing a stylus and a mirror image of the stylus moved closer to the center of a touch area vis vis in accordance with an embodiment of the present invention. Again the image x and y coordinates of stylus are determined by projecting the position of stylus onto the image x and y axes. To assist with the projection a centerline between stylus and its mirror image is used.

Reference is made to which is a simplified diagram showing a stylus and a mirror image of the stylus moved closer to the bottom of a touch area vis vis in accordance with an embodiment of the present invention. Again the image x and y coordinates of stylus are determined by projecting the position of stylus onto the image x and y axes. To assist with the projection a centerline between stylus and its mirror image is used.

Reference is made to which is a simplified diagram showing a stylus and a mirror image of the stylus separated apart from one another in accordance with an embodiment of the present invention. The distance between stylus and mirror image may be used to determine the height of stylus above touch area . A centerline between stylus and mirror image is used as an assist to determine the image y coordinate of stylus .

In accordance with an embodiment of the present invention stylus in is a blunt edged stylus. A blunt edged stylus is of advantage as its relatively large head is easy to detect by image processing. A blunt edged stylus is also of advantage in configurations nos. 2 6 as its relatively large head blocks more light than does a sharp pointed stylus.

Reference is made to which is a simplified flowchart of a method for determining a three dimensional pointer location in accordance with an embodiment of the present invention. At operation an image of a screen surface is captured. The image includes a pointer and a reflection of the pointer on the screen surface as described hereinabove with reference to . At operation the pointer location along a first screen axis is determined corresponding to the location of the pointer in the image along that axis as illustrated by the x coordinates shown in that correspond to the locations of the stylus in the respective images. At operation the pointer location along a second screen axis is determined corresponding to a line running through the mid point between the locations of the pointer and its reflection as illustrated by centerlines in . At operation the height of the pointer above the screen is determined based on the distance between the pointer and its reflection in the captured image.

When the camera position is known or fixed relative to the screen as is the case inter alia when the screen is manufactured with the camera rigidly mounted the image to screen transformation from image coordinates to screen coordinates may be determined. When the position of the camera relative to the screen is unknown such as is the case inter alia if the camera is mounted manually by a user then in order to determine the image to screen transformation a procedure to determine camera orientation is required. One such procedure is to display a series of touch icons on the screen at known screen coordinates. Reference is made to which is a simplified diagram of a touch area that displays six touch icons used for determining a camera orientation in accordance with an embodiment of the present invention. Camera is aimed at the touch area to capture touch events. A user is instructed to touch the various icons. In some embodiments each icon is displayed individually one at a time. When the user touches an icon the image coordinates of the touch are determined and matched with the known screen coordinates of the icon. Successive matched pairs of image coordinates and screen coordinates are used to determine the image to screen transformation. In an embodiment of the present invention the event that a user touches an icon is recognized from a captured image when the pointer is tangent to its reflection as described hereinabove.

The following discussion relates to methods of operation for arrangements of the optical elements shown in configurations nos. 2 and 3 around a touch screen to achieve accurate touch detection. These methods are of advantage for pen and stylus support which have fine touch points and provide highly accurate touch location determination for single finger and multi finger touches as well.

Reference is made to which are illustrations of opposing rows of emitter lenses and receiver lenses in a touch screen system in accordance with an embodiment of the present invention. Positioned behind each emitter and receiver lens is a corresponding respective light emitter or light receiver . As shown in each emitter is positioned opposite two receivers that detect light beams emitted by the emitter. Similarly each receiver is positioned opposite two emitters and receives light beams emitted from both emitters.

To conserve power when the touch screen is idle only one set of beams namely beams or beams are scanned in a scanning sweep and only for the axis with the smallest number of emitters . The scanning toggles between beams and beams and thus two scanning sweeps along the axis activate every emitter receiver pair along the axis. The other axis with the larger number of emitters is only scanned when either a touch is present or when a signal differs from its reference value by more than an expected noise level or when an update of reference values for either axis is being performed. Reference values are described in detail hereinbelow.

Reference is made to which is a simplified illustration of a technique for detecting a touch location by a plurality of emitter receiver pairs in a touch screen system in accordance with an embodiment of the present invention. Shown in is an optical emitter lens of width k positioned opposite two optical receiver lenses and each of width k on a touch screen. A pointer touching the screen blocks a portion of the light beam emitted from optical emitter lens . Optical emitter lens emits overlapping beams that cover both optical receiver lenses and . The spread angle of the wide beam depends on the screen dimensions and on the lens width k along the x axis. Another optical emitter lens is also shown shifted by half an element width m below an optical receiver lens .

In accordance with an embodiment of the present invention at least one surface of optical emitter lens is textured with a plurality of ridges. Each ridge spreads a beam of light that spans the two opposing receiver lenses and . As such light from each of many points along the surface of optical emitter lens reaches both opposing receiver lenses and and the light beams detected by adjacent receivers overlap. In configuration no. 2 these ridges form a feather pattern and in configuration no. 3 these ridges form a tubular pattern.

In accordance with an embodiment of the present invention the ridges form micro lenses each having a pitch of roughly 0.2 0.5 mm depending on the touch screen configuration. In the case of a feather pattern the ridges form a fan and their pitch narrows as the ridges progress inward and become closer together. In the case of a tubular pattern the pitch of each micro lens remains constant along the length of the micro lens.

At least one surface of each receiver lens and is similarly textured in order that at least a portion of light arriving at each of many points along the receiver lens surface arrive at the receiver photo diode.

In accordance with an embodiment of the present invention the output x and y coordinates are filtered temporally and spatially. The following discussion relates to determination of the x coordinate and it will be appreciated by those skilled in the art that the same method applies to determination of the y coordinate.

Configurations nos. 2 and 3 show that a touch location is detected by at least two emitter receiver pairs. shows two such emitter receiver pairs and detecting a touch location of object along the x axis. In beams are denoted by beam and beams are denoted by beam . shows three detection areas namely i the screen area detected by emitter receiver pair drawn as a wedge filled with right sloping lines ii the screen area detected by emitter receiver drawn as a wedge with left sloping lines and iii the screen area detected by both emitter receiver pairs and drawn as a wedge with a crosshatch pattern. The left and right borders of this third screen area are shown as lines Xand X respectively.

In order to determine the x coordinate Xof object s touch location X Y an initial y coordinate Y is determined corresponding to the location along the y axis of the emitter receiver pair having the maximum touch detection signal among all emitter receiver pairs along the y axis. In this emitter receive pair is . The lines designated Xand Xin are then traversed until they intersect the line y Yat locations X Y and X Y . Coordinates Xand Xare shown in . The x coordinate of object is then determined using the weighted average 2 where the weights Wand Ware normalized signal differences for beam and beam respectively. The signal difference used is the difference between a baseline or expected light value and the actual detected light value. Such difference indicates that an object is touching the screen blocking a portion of the expected light. The weights W and Ware normalized because the detection signal of a touch occurring near the row of emitters is different from a touch occurring near the row of receivers as described hereinbelow with reference to . A touch screen design is tested to determine different signal strength and attenuation patterns as an object crosses a beam at various portions along the length of the beam. Different scenarios are tested e.g. a scenario for objects near the beam s emitter a scenario for objects near the beam s receiver and a scenario for objects in the middle of the screen. When a touch is detected the detection pattern of detecting receivers is analyzed to select an appropriate scenario and the signals are normalized according to the selected scenario. Calibration and further normalization of the weights is described hereinbelow. A similar weighted average is used to determine the y coordinate Y.

If the pointer is detected by more than two emitter receiver pairs then the above weighted average is generalized to 3 where the weights Ware normalized signal differences and the Xare weight positions.

In one embodiment of the present invention where the pointer is a small object the largest signal difference is used in conjunction with the two closest signals to calculate the position. This compensates for the fact that the signal differences for small objects are small and noise thus becomes a dominant error factor. Use of the two closest signals reduces error due to noise. In another embodiment of the present invention only the two largest signal differences are used.

Reference is made to which is an illustration of a light guide frame for the configuration of in accordance with an embodiment of the present invention. Shown in are four edges of a light guide frame with optical emitter lenses and optical receiver lenses . It is noted that the inner edges of the frame are not completely covered by beams . As such in some embodiments of the present invention only an inner touch area indicated by the dashed rectangle is used.

To reduce error due to signal noise the final coordinate is determined as the output of a temporal filter using the spatially filtered current coordinate value determined as above and a previous coordinate value. The higher the filter weight given to the current x coordinate the closer the output will be to that value and the less will be the impact of the filter. Generally use of substantially equal weights for both coordinate values results in a strong filter. In one embodiment of the present invention the temporal filter is a low pass filter but other filters are also contemplated by the present invention. In accordance with an embodiment of the present invention different pre designated filter weight coefficients may be used in different cases. In an alternative embodiment the filter weight coefficients are calculated as needed.

Choice of appropriate filter coefficients is based on scanning frequency the speed at which a touch object is moving across the screen whether the object motion is along a straight line or not and the size of the touch object.

Generally the higher the scanning frequency the nearer the current coordinate value is to the previous coordinate value and a stronger filter is used. Scanning frequency is used to estimate the speed and direction of movement of an object. Based on the scanning frequency a threshold distance is assigned to two input values the threshold indicating fast movement. If the difference between the current and previous coordinate values is greater than the threshold distance a weaker filter is used so that the output coordinate not lag considerably behind the actual touch location. It has been found by experiment that the filter output val 1 10 previous val 9 10 current val 4 provides good results in this case. In addition the lag value described hereinbelow is reset to equal the output value in this case.

If the difference between the current and previous coordinate values is less than the threshold distance then a lag value is determined. The lag value indicates speed and direction along an axis. In has been found by experiment that the value lag lag current val 5 provides good results in this case. The filter weight coefficients are selected based on the difference between the lag value and the current coordinate value. Generally the greater this difference which indicates either fast motion or sudden change in direction the weaker the filter.

For example if the touch object is stationary the lag value eventually is approximately equal to the current coordinate value. In such case signal noise may cause small differences in the spatially calculated touch position which in turn may cause a disturbing jitter effect i.e. the touch screen would show the object jittering. Use of a strong temporal filter substantially dampens such jittering.

If the touch object is moving fast or makes a sudden change in direction a strong temporal filter may create a perceptible lag between the actual touch location and the displayed touch location. In the case of a person writing with a stylus the written line may lag behind the stylus. In such cases use of a weak temporal filter reduces such lagging.

When the touch object covers a relatively large screen area such as a finger or other blunt object touching the screen the lag between the actual finger motion and the displayed trace of the motion is less perceptible because the finger covers the area of the lag. In such case a different temporal filter is used.

The type of object finger vs. stylus being used may be inferred by knowing expected user behavior e.g. a user interface intended for finger touch assumes a finger being used. The type of object may also be inferred by the shadowed area created by the object. The size of the touch area as determined based on shadowed emitter signals is therefore also a factor used in selecting temporal filter weight coefficients.

Reference is made to which is a simplified flowchart of a method for touch detection for a light based touch screen in accordance with an embodiment of the present invention. At operation a current coordinate value is received based on a spatial filter that processes signals from multiple emitter receiver pairs. A threshold distance is provided based on a scan frequency. At operation the difference between the current coordinate value and a previous coordinate value is compared to the threshold distance. If the difference is less than or equal to the threshold distance then at operation a new lag value is calculated as in EQ. 5 . At operation temporal filter weight coefficients are determined based on the difference between the current coordinate value and the lag value. At operation the temporal filter is applied to calculate an output coordinate value as in EQ. 4 .

If at operation the difference between the current coordinate value and previous coordinate value is greater than the threshold distance then weak filter weight coefficients are selected at operation . At operation the temporal filter is applied to calculate an output coordinate value as in EQ. 4 . At operation the lag value is set to the output coordinate value.

Embodiments of the present invention provide a method and apparatus for detecting a multi touch operation whereby two touches occur simultaneously at two corners of a touch screen. An example of such a multi touch is a rotation gesture shown in whereby a user places two fingers on a screen and turns them around an axis. As pointed out hereinabove with reference to it is difficult for a light based system to discriminate between a top left bottom right touch vs. a bottom left top right touch. Use of shift aligned emitters and receivers enables such discrimination as described hereinbelow.

In accordance with an embodiment of the present invention data from receivers along a first axis is used to determine a touch location along two axes. Reference is made to which are illustrations of a finger touch event at various locations on a touch screen and corresponding which are respective bar charts of light saturation during the touch events in accordance with an embodiment of the present invention. shows a touch located near a row of emitters between two emitters. shows a touch located near a row of receivers blocking a receiver. shows a touch located near a row of emitters blocking an emitter. shows a touch located near a row of receivers between two receivers.

According to an embodiment of the present invention determination of location of a multi touch is based on the patterns indicated in TABLE III. Thus referring back to four detection points are shown along two rows of receivers. Detections D D detect touch points in upper right lower left corners of the screen. Based on whether the detection pattern of each point is of type 1 or 3 or of type 2 or 4 the detection patterns determine whether the corresponding touch is closer to the emitters or closer to the receivers. Each touch has two independent indicators namely the X axis detectors and the Y axis detectors. Thus for detection points in detections D and D are of types 2 or 4 and detections D and D are of types 1 or 3. In distinction for detection points in detections D and D are of types 2 or 4 and detections D and D are of types 1 or 3.

In addition to evaluation of detection points independently the various detection patterns may be ranked to determine which touch point is closer to the emitters or to the receivers.

Moreover when a rotate gesture is performed from touch points to touch points movement of detections discriminates whether the gesture glides away from the emitters and toward the receivers or vice versa. In particular subsequent detections are compared and discrimination is based on whether each detection pattern is becoming more like type 1 or 3 or more like type 2 or 4.

Reference is made to which is a simplified flowchart of a method for determining the locations of simultaneous diagonally opposed touches in accordance with an embodiment of the present invention. At operation two x coordinates and two y coordinates are detected such as x coordinates D and D and y coordinates D and D shown in . At operation the detected x coordinates are analyzed to identify a pattern of detection from among those listed in TABLE I. At operation the detected x coordinates are ranked according to touches that occurred closer to or farther from a designated screen edge based on the pattern detected at operation and based on the Touch Location column of TABLE III. The y coordinates represent distances from the designated edge. At operation each ranked x coordinate is paired with a corresponding y coordinate. Operations are performed for the y coordinates similar to operations performed for the x coordinates. At operation the two sets of results are compared.

Reference is made to which is a simplified flowchart of a method for discriminating between clockwise and counter clockwise gestures in accordance with an embodiment of the present invention. At operation two glide gestures are detected along an x axis. Each glide gesture is detected as a series of connected touch locations. Thus with reference to a first glide gesture is detected as a connected series of touch locations beginning at x coordinate D and a second concurrent glide gesture is detected as a connected series of touch locations beginning at x coordinate D. At operation the x glide detections are analyzed to determine the types of detections that occurred in each series from among the patterns listed in TABLE III.

At operation the x glide detections are ranked according to touches that occurred closer to or farther from a designated screen edge based on the patterns of detections determined at operation and based on the Touch Location column of TABLE III. Operation relates to series of connected touch detections over a time interval. Each series generally includes touch detections of patterns 1 and 3 or of patterns 2 and 4 listed in TABLE III depending on whether the glide was closer to or further away from the designated edge. In addition to analyzing the individual detections that comprise a glide the series of touch detections is also analyzed to determine if the glide is moving closer to or farther from the designated edge based on comparison of intensities of detections over time. E.g. in one series of detections having multiple pattern 1 detections if the amount of blocked light increases over time then it is inferred that the glide is moving toward the receivers otherwise the glide is moving toward the emitters.

The y coordinates represent distances from a designated edge such as the edge of emitters. At operation each ranked x axis glide is paired with a corresponding y axis glide. Operations are performed for the y axis glide similar to operations performed for the x axis glide. At operation the two sets of results are compared. At step a discrimination is made as to whether the rotation gesture is clockwise or counter clockwise.

The gradient of light attenuation is substantially linear across the width of the beam. As such a weighted average of the different detection signals is used to calculate a position along one axis using EQS. 2 and 3 above. EQ. 2 extends to a number n of samples. E.g. if a finger at the center of beam a blocks 40 of the expected signal of beam a and blocks none of the expected signal of beam b then Wand Ware 0.4 and 0 respectively and the location Xis calculated as 0.4 0 0.4 0 . The same value of Xis obtained for a stylus at the screen position which due to its being narrower than the finger blocks only 20 of the expected signal of beam a.

Similarly if a finger between the centers of beams a and b blocks similar amounts of expected light from both beams say 30 then Xis calculated as 0.3 0.3 0.3 0.3 which is the midpoint between Xand X.

Location calculation in a system of aligned emitters and receivers differs in several aspects from location calculation in a system of shift aligned emitters and receivers. In a system of aligned emitters and receivers beams are aligned with the coordinate system used for specifying the touch location. In this case the touch location is calculated along a first axis without regard for the touch location along the second axis. By contrast in a shift aligned system the primary beam coordinate e.g. Xfor beam a is determined based on an assumed touch coordinate on the second axis Y.

Further in a system of aligned emitters and receivers the attenuation and signal strength pattern generated by an object crossing the beam is substantially the same at all locations along the length of the beam. As described hereinabove with reference to as an object moves across the width of a beam it generates substantially similar signal patterns whether it crosses the beam near the beam s emitter detector or in mid screen. Therefore an initial normalizing of weights W W . . . W based on the detection pattern is required in shift aligned systems and is not required in aligned systems.

When a light blocking object is placed at the center of a beam such as beam in a portion of the neighboring beam is blocked. E.g. 40 of beam is blocked and 5 of beam is blocked. However the signals include both random noise and also noise caused by the alternating facets that may account for signal fluctuations. A technique is required to determine whether the touch is in fact at the center of beam or slightly offset from the center.

In accordance with an embodiment of the present invention multiple samples of each signal are taken and combined to filter out signal noise. Additionally the neighboring beams and are configured by their respective optical elements to overlap around the center of beam as seen in where all three signals detect touches around the center of the middle signal. In cases where the main detection signal is concentrated in one beam detection signals from both left and right neighboring beams are used to fine tune the touch location calculation. Specifically filtered signals of neighboring beams and are used to determine an offset from the center of beam .

In embodiments with optical elements with three way lenses that create light beams along two sets of axes similar calculations are performed on the diagonal detection beams to determine locations on the second axis system. As described hereinabove touch objects typically block a larger portion of the diagonal signals that of the orthogonal signals.

The spatial and temporal filters described hereinabove with reference to shift aligned emitter receiver arrangements are applied in aligned emitter receiver arrangements as well.

Reference is made to which is a simplified flowchart of a method of calibration and touch detection for a light based touch screen in accordance with an embodiment of the present invention. In general each emitter receiver pair signal differs significantly from signals of other pairs due to mechanical and component tolerances. Calibration of individual emitters and receivers is performed to ensure that all signal levels are within a pre designated range that has an acceptable signal to noise ratio.

In accordance with an embodiment of the present invention calibration is performed by individually setting i pulse durations and ii pulse strengths namely emitter currents. For reasons of power consumption a large current and a short pulse duration is preferred. When a signal is below the pre designated range pulse duration and or pulse strength is increased. When a signal is above the pre designated range pulse duration and or pulse strength is decreased.

As shown in calibration operation is performed at boot up operation and is performed when a signal is detected outside the pre designated range operation . Calibration is only performed when no touch is detected operation and when all signals on the same axis are stable operation i.e. signal differences are within a noise level over a time duration.

Reference signal values for each emitter receiver pair are used as a basis of comparison to recognize a touch and to compute a weighted average of touch coordinates over a neighborhood. The reference signal value for an emitter receiver pair is a normal signal level. Reference signal values are collected at boot up and updated when a change such as a change in ambient light or a mechanical change is detected. In general as shown in reference signal values are updated operation when signals are stable operation i.e. when signal variations are within an expected range for some number N of samples over time.

A touch inside the touch area of a screen may slightly bend the screen surface causing reflections that influence detected signal values at photo diodes outside of the touch area. Such bending is more pronounced when the touch object is fine or pointed such as a stylus. In order to account for such bending when a touch is detected operation all stable signals operation outside the touch area undergo a reference update operation . When no touch is present and all signals are stable operation but a signal along an axis differs from the reference value by more than the expected noise level operation the emitters are calibrated operation . Recalibration and updating of reference values require stable signals in order to avoid influence of temporary signal values such as signal values due to mechanical stress by bending or twisting of the screen frame.

To further avoid error due to noise if the result of an emitter receiver pair differs from a previous result by more than an expected noise level a new measurement is performed and both results are compared to the previous result to get a best match. If the final value is within the expected noise level a counter is incremented. Otherwise the counter is cleared. The counter is subsequently used to determine if a signal is stable or unstable when updating reference values and when recalibrating.

After each complete scan signals are normalized with their respective reference values. If the normalized signals are not below a touch threshold then a check is made if a recalibration or an update of reference values is necessary. If a normalized signal is below the touch threshold then a touch is detected operation .

To reduce risk of a false alarm touch detection due to a sudden disturbance the threshold for detecting an initial point of contact with the screen such as when a finger first touches the screen is stricter than the threshold for detecting movement of a point of contact such as gliding of a finger along the screen while touching the screen. I.e. a higher signal difference is required to detect an initial touch vis vis the difference required to detect movement of an object along the screen surface. Furthermore an initial contact is processed as pending until a rescan verifies that the touch is valid and that the location of the touch remains at approximately the same position.

To determine the size of a touch object operation the range of blocked signals and their amplitudes are measured. For large objects there is a wait for detecting an initial point of contact with the screen until the touch has settled since the touch of a large object is generally detected when the object is near the screen before it has actually touched the screen. Additionally when a large object approaches the screen in a direction not perpendicular to the touch area the subsequent location moves slightly from a first contact location.

However objects with small contact areas such as a pen or a stylus are typically placed directly at the intended screen location. As such in some embodiments of the present invention the wait for detecting an initial contact of a fine object is shortened or skipped entirely.

It has been found advantageous to limit the size of objects that generate a touch in order to prevent detection of a constant touch when a device with a touch screen is stored in a pouch or in a pocket.

At operation it is also necessary to distinguish between signals representing a valid touch and signals arising from mechanical effects. In this regard reference is made to which is a picture showing the difference between signals generated by a touch and signals generated by a mechanical effect in accordance with an embodiment of the present invention. Each of the four graphs in shows detection beams 1 10 during a scan along one screen axis. As seen in signal gradients discriminate between a valid touch and a mechanical effect.

Reference is made to which is a simplified diagram of a control circuit for setting pulse strength when calibrating a light based touch screen in accordance with an embodiment of the present invention. Reference is also made to which is a plot of calibration pulses for pulse strengths ranging from a minimum current to a maximum current for calibrating a light based touch screen in accordance with an embodiment of the present invention. shows plots for six different pulse durations PULSETIME1 PULSETIME 6 and sixteen pulse strength levels 1 16 for each plot.

The control circuit of includes 4 transistors with respective variable resistors R R R and R. The values of the resistors control the signal levels and the ratio between their values controls gradients of the pulse curves shown in .

Reference is made to which is a simplified pulse diagram and a corresponding output signal graph for calibrating a light based touch screen in accordance with an embodiment of the present invention. The simplified pulse diagram is at the left in and shows different pulse durations t . . . t that are managed by a control circuit when calibrating the touch screen. As shown in multiple gradations are used to control duration of a pulse and multiple gradations are used to control the pulse current. The corresponding output signal graph is at the right in .

As shown in different pulse durations result in different rise times and different amplitudes. Signal peaks occur close to the time when the analog to digital A D sampler closes its sample and hold circuit. In order to obtain a maximum output signal the emitter pulse duration is controlled so as to end at or near the end of the A D sampling window. Since the A D sampling time is fixed the timing t between the start of A D sampling and the pulse activation time is an important factor.

As described hereinabove a minimum of tolerances are required when aligning optical guides that focus on respective light emitters and light receivers in order to achieve accurate precision on a light based touch screen. A small misalignment can severely degrade accuracy of touch detection by altering the light beam. It is difficult to accurately place a surface mounted receiver and transmitter such that they are properly aligned with respective light guides.

Because of this difficulty in an embodiment of the present invention a light guide and transmitter or receiver are combined into a single module or optical element as described above with reference to .

In some instances it may be of advantage not to combine an emitter or a receiver into an optical element e.g. in order to use standard emitter and receiver components. In such instances precision placement of components is critical.

In some embodiments of the present invention the optical lens that includes the feather pattern is part of a frame that fits over the screen. shows a cross section of such a frame which is separate from LED .

Reference is made to which is an illustration showing how a capillary effect is used to increase accuracy of positioning a component such as an emitter or a receiver on a substrate inter alia a printed circuit board or an optical component in accordance with an embodiment of the present invention. Shown in is an emitter or a receiver that is to be aligned with an optical component or temporary guide . Optical component or temporary guide is fixed to a printed circuit board by guide pins . Solder pads are placed at an offset from component solder pads . Printed circuit board is then inserted into a heat oven for soldering.

Reference is made to which is an illustration showing the printed circuit board of after having passed through a heat oven in accordance with an embodiment of the present invention. As shown in component has been sucked into place by the capillary effect of the solder guided by a notch and a cavity in optical component or temporary guide . When a temporary guide is used it may be reused for subsequent soldering.

The process described with reference to is suitable for use in mass production of electronic devices.

Aspects of the present invention relate to design and use of a programmable state machine for novel light based touch screen ASIC controllers that execute a scanning program on a series of emitters and detectors. The scanning program determines scan sequence current levels and pulse widths. The controller includes integrated LED drivers for LED current control integrated receiver drivers for photo detector current measurement and an integrated A D convertor to enable communication between the controller and a host processor using a standard bus interface such as a Serial Peripheral Interface SPI .

In accordance with the present invention a host processor loads a plurality of controller configuration registers e.g. over SPI. Thereafter scanning execution runs independently from the host processor optimizing overall system power consumption. When the scan data are ready the controller issues an interrupt to the host processor via an INT pin.

Reference is made to which is a simplified illustration of a light based touch screen and an ASIC controller therefor in accordance with an embodiment of the present invention.

Reference is made to which is a circuit diagram of a chip package for a controller of a light based touch screen in accordance with an embodiment of the present invention.

As shown in chip package includes emitter driver circuitry for selectively activating a plurality of photoemitters that are outside of the chip package and signal conducting pins for connecting photoemitters to emitter driver circuitry . Emitter driver circuitry is described in applicants co pending patent application U.S. Ser. No. 12 371 609 entitled LIGHT BASED TOUCH SCREEN filed on Feb. 15 2009 the contents of which are hereby incorporated by reference. Inter alia reference is made to paragraphs 0073 paragraphs 0087 0091 and of this application as published in U.S. Publication No. 2009 0189878 A1 on Jul. 30 2009.

Emitter driver circuitry includes circuitry for configuring individual photoemitter pulse durations and pulse currents for each emitter detector pair via a programmable current source. Circuitry is described in applicants co pending patent application U.S. Ser. No. 13 052 511 entitled LIGHT BASED TOUCH SCREEN WITH SHIFT ALIGNED EMITTER AND RECEIVER LENSES filed on Mar. 21 2011 the contents of which are hereby incorporated by reference. Inter alia reference is made to paragraphs 0343 0358 and of this application as published in U.S. Publication No. 2011 0163998 on Jul. 7 2011.

Chip package includes detector driver circuitry for selectively activating a plurality of photo detectors that are outside of the chip package and signal conducting pins for connecting photo detectors to detector driver circuitry . Detector driver circuitry includes circuitry for filtering current received from photo detectors by performing a continuous feedback bandpass filter and circuitry for digitizing the bandpass filtered current. Circuitry is described inter alia at paragraphs paragraphs 107 0163 and FIGS. 14 23B of the above referenced U.S. Publication No. 2009 0189878 A1. Chip package also includes detector signal processing circuitry for generating detection signals representing measured amounts of light detected on photo detectors .

Chip package further includes I O pins for communicating with a host processor . Chip package further includes controller circuitry for controlling emitter driver circuitry and detector driver circuitry . Controller circuitry communicates with host processor using a bus standard for a Serial Peripheral Interface SPI . Chip package further includes a chip select CS pin for coordinating operation of controller circuitry with at least one additional controller for the light based touch screen.

The controller shown in packages all of the above mentioned elements within chip package i thereby enabling automatic execution of an entire scan sequence such as 52 emitter receiver pairs and ii thereby storing the detection signals in a register array located in controller circuitry for subsequent analysis by host processor . This register array provides storage for at least 52 12 bit receiver results. Additional registers in controller circuitry are provided for configuring individual pulse durations and pulse currents for individual emitter receiver pairs. In order to support 52 unique emitter receiver pairs at least 104 registers are provided namely 52 registers for configuring individual pulse durations and 52 registers for configuring individual pulse currents.

Reference is made to which is a circuit diagram for six rows of photo emitters with 4 or 5 photo emitters in each row for connection to pins of chip package in accordance with an embodiment of the present invention. The 11 lines LED ROW . . . LED ROW and LED COL . . . LED COL provide two dimensional addressing for 26 photo emitters although the photo emitters are physically arranged around two edges of the touch screen as shown in . TABLE IV shows LED multiplex mapping from photo emitter LEDs to LED ROW and LED COL pins. More generally an LED matrix may include an m n array of LEDs supported by m n I O pins on the controller.

As such an LED is accessed by selection of a row and a column I O pin. The controller includes push pull drivers for selecting rows and columns. It will be appreciated by those skilled in the art that the row and column coordinates of the LEDs are unrelated to the physical placement of the LEDs and the push pull drivers. In particular the LEDs do no need to be physically positioned in a rectangular matrix.

In an alternative embodiment of the controller of the present invention current source drivers are used instead of push pull drivers. In another embodiment of the controller of the present invention some of the push pull drivers are combined with current source drivers and others of the push pull drivers are combined with current sink drivers.

Advantages of having a dedicated controller for emitters and receivers in a light based touch screen are power savings and performance. In conventional systems a conventional chip such as the MSP430 chip manufactured by Texas Instruments of Dallas Tex. controls emitters and receivers. Regarding power savings conventional chips do not provide access to all of the power consuming chip elements. Moreover with conventional chips it is not possible to power on and off external elements in sync with the emitters. For example with a conventional chip the amplifier unit connected to the receivers and the analog to digital convertor ADC for digitizing receiver light detection current cannot be turned on and off in sync with activation of the emitters. In conventional systems these elements are left powered on throughout an entire scan sequence. In distinction the dedicated controller of the present invention is able to power these elements on and off at a resolution of microseconds in sync with emitter activation. This and other such selective activation of controller blocks reduce the total power consumption of the touch system considerably. In fact power consumption for the amplifier the ADC and other controller blocks is reduced to the extent that their collective power consumption is negligible as compared to photoemitter activation power. As such system power consumption is nearly the same as the power consumption for activating the photoemitters.

When the dedicated controller of the present invention scans a series of emitter receiver pairs an LED driver supplies an amount of current to an LED in accordance with settings in LED current control registers and LED pulse length control registers. TABLE V shows the power consumption of the dedicated controller for 50 emitter receiver pairs at 100 Hz with a power source of 2.7V. Pulse durations and pulse currents are set via circuitry using configuration registers. Current consumption is calculated as 100 Hz 50 activation pairs pulse duration s pulse current A current consumption A from the battery. Power consumption is calculated as current consumption A voltage V power mW .

Regarding performance the time required to complete a scan of all emitter receiver pairs around the screen is critical especially for fast stylus tracing. Reference is made to which is a simplified illustration of a touch screen surrounded by emitters and receivers in accordance with an embodiment of the present invention. Emitters are scanned in a scan sequence e.g. emitters may be scanned in the numbered order 1 16 shown in . Touch points correspond to touches made by a person writing his signature in a fast scrawl using a fine point stylus. Three locations are indicated for touch points . At a time t1 when emitter 1 is activated the stylus is located at a location a. At a time t2 when emitter 16 is activated the stylus is located at a location b due to the quick movement as the user signs his name. However the detected location on the screen at time t2 is a location c different than location b because at time t2 when emitter 16 is activated the stylus has moved from its location at time t1. Such time lag between x coordinate detection and y coordinate detection produces errors in detecting touch positions of the stylus on the screen. These errors are most pronounced with fast stylus writing. As such it is desirable to complete an entire scan sequence as fast as possible.

The dedicated controller of the present invention completes a scan sequence faster than conventional chips. The dedicated controller of the present invention includes register arrays that store necessary parameters to execute an entire scan sequence automatically. The dedicated controller further includes a register array for storing filtered digital results for a scan sequence. In distinction with conventional chips not all registers are available and configuration data in registers is not automatically parsed. Thus during a scan sequence using conventional chips some cycles are required for configuring further emitter activations and for reading results.

In accordance with an embodiment of the present invention for configurations where the number of emitters and receivers is larger than what may be supported by a single dedicated controller multiple controllers are used. The multiple controllers are each configured prior to executing a scan and then a scan is executed by each controller in rapid succession. For this embodiment after configuring registers in all controllers a host selects a first controller chip using the chip select CS pin shown in and activates that chip. When the scan sequence on that chip is completed the chip sends an interrupt to the host. The host then selects a second controller chip using its CS pin and runs the second chip s scan sequence. After all of the controller chips have completed their respective scans the host reads the results from each chip and calculates touch locations.

In this regard reference is made to which is a simplified application diagram illustrating a touch screen configured with two controllers indicated as Device and Device in accordance with an embodiment of the present invention. Shown in is touch screen surrounded with LEDs and shift aligned PDs. Twenty six LEDs LED LED are connected along a first screen edge to LED pins from Device and additional LEDS LED LED along this edge are connected to LED pins from Device . Along the opposite edge PDs are shift aligned with the LEDs. PDs that detect light from the Device LEDS are connected to Device PD pins and PDs that detect light from Device LEDs are connected to Device PD pins. The dashed lines connecting each LED to two PDs show how light from each LED is detected by two PDs. Each PD detects light from two LEDs.

As shown in PDof Device detects light from LEDof Device and also from LEDof Device . As such PDis connected to the PDpin of Device and also to the PDpin of Device . When detecting light from LEDof Device PDis sampled over the PDpin of Device and its result is stored on Device and when detecting light from LEDof Device PDis sampled over the PDpin of Device and its result is stored on Device . As such each controller coordinates LED activation with respective PD activation. The host processor calculates touch locations along the Device Device border by interpolating the PD results from the two devices.

Reference is made to which is a graph showing performance of a scan sequence using a conventional chip vs. performance of a scan using a dedicated controller of the present invention. The duration of each complete screen scan is longer with the conventional chip than with the dedicated controller. The dedicated controller can be powered down between scan sequences providing further power savings especially since the stretches of time between scan sequences may be larger with use of the dedicated controller than with use of a conventional chip. To connect touch points of multiple scans the host processor may use spline interpolation or such other predictive coding algorithms to generate smooth lines that match the user s pen strokes. Of significance is that each touch point is very accurate when using a dedicated controller of the present invention.

Moreover it is apparent from that a host using a dedicated controller of the present invention may increase the scan frequency beyond the limits possible when using a conventional chip. E.g. a host can scan 50 emitter receiver pairs at 1000 Hz using a controller of the present invention. In distinction touch screens using convention chips typically operate at frequencies of 100 Hz or less. The high sampling rate corresponding to 1000 Hz enables accurate touch location calculation over time. In turn this enables temporal filtering of touch coordinates that substantially eliminates the jitter effect described above when a stylus remains stationary while substantially reducing the lag time described above between a stylus location and a line representing the stylus path along the screen.

Such high sampling rates on the order of 50 emitter receiver pairs at 1000 Hz cannot be achieved if individual LEDs require configuration prior to activation. The dedicated controller of the present invention achieves such high sampling rates by providing the registers and the circuitry to automatically activate an entire scan sequence.

A further advantage of completing multiple scan sequences in a short time is disambiguation of touch signals. The problem of ambiguous signals is described above with reference to . As explained above the same detection pattern of photo detectors is received for two concurrent touches along a screen diagonal as illustrated in and . When placing two fingers on the screen there is an inherent delay between the first and second touches. Completing multiple scan sequences in a very short time allows the system to determine the first touch which is unambiguous. Then assuming that the first touch is maintained when the second touch is detected the second touch location is easily resolved. E.g. if it is determined that one touch is in the upper left corner and the touch detection pattern is as shown in then the second touch location must be at the lower right corner of the screen.

Thus it will be appreciated by those skilled in the art that a dedicated controller in accordance with the present invention is power efficient highly accurate and enables highs sampling rates. The host configures the controller for low power corresponding to 100 Hz or less or for high frequency scanning such as 500 Hz 1000 Hz.

Determination of which configuration is appropriate is based inter alia on the area of the touch screen covered by a touch pointer since jitter and lag are less prominent for a touch covering a relative large area such as a finger touch than for a touch covering a relatively small area such as a stylus touch. Based on the area covered by the pointer as determined by the size of the shadowed area of light based touch screen signals the host determines whether a finger or a stylus is being used and configures an appropriate scan rate based on the trade off between power and accuracy.

In accordance with an embodiment of the present invention the dedicated controller includes scan range registers for selectively activating LEDs and current control and pulse duration registers for specifying an amount of current and a duration for each activation. The scan range registers designate a first LED and a first PD to be activated along each screen edge the number of LEDs to be activated along each edge and the step factor between activated LEDs. A step factor of 0 indicates that at each step the next LED is activated and a step factor of 1 indicates that every other LED is activated. Thus to activate only odd or only even LEDs a step factor of 1 is used. Step factors of 2 or more may be used for steps of 2 or more LEDs respectively. An additional register configures the number of PDs that are activated with each LED. A value of 0 indicates that each LED is activated with a single corresponding PD and a value of 1 indicates that each LED is activated with two PDs. The number of PDs activated with each LED may be as many PD that are available around the touch screen.

To save power it is advantageous to have a low resolution scan mode for detecting an initial touch location. The host may run in this mode for example when no touch is detected. When a touch is detected the host switches to a high resolution scan mode in order to calculate a precise touch location as described above with reference to . In terms of controller scan sequence registers every emitter is activated i.e. step 0 with one receiver. The scan sequence of differs from that of in the initial PD used in the sequence on each screen edge. Specifically the first PD namely PD0 is used in and the second PD namely PD1 is used in . The initial PD to be used along each screen edge is configured by a register.

When each LED is activated with more than one PD the LED is activated separately for each of the PDs. Each such separate activation has respective current control and pulse duration registers.

The controller of the present invention automatically controls a mux to direct current to desired LEDs. The LED mux control is set by the scan control registers. The controller automatically synchronizes the correct PD receivers when the drivers pulse the LEDS. Twelve bit ADC receiver information is stored in PD data registers. Upon completion of scanning the controller issues an interrupt to the host processor and automatically enters standby mode. The host then reads receiver data for the entire scan sequence over the SPI interface.

In some touch screen configurations emitters are shift aligned with receivers with emitters being detected by more than one receiver and being activated one or more times for each detecting receiver. For example an emitter may be activated three times in rapid succession and with each activation a different receiver is activated. Moreover a receiver is further activated during the interval between emitter activations to determine an ambient light intensity.

In other touch screen configurations emitters and receivers are aligned but each emitter is detected by more than one receiver and each emitter is activated separately for each detecting receiver. Emitter receiver activation patterns are described in applicants co pending patent application U.S. Ser. No. 12 667 692 entitled SCANNING OF A TOUCH SCREEN filed on Jan. 5 2010 the contents of which are hereby incorporated by reference. Inter alia reference is made to paragraphs 0029 0030 0033 and 0034 of this application as published in U.S. Publication No. 2011 0043485 on Feb. 24 2011.

Reference is made to which is a simplified illustration of a touch screen having a shift aligned arrangement of emitters and receivers in accordance with an embodiment of the present invention. Shown in are emitters along the south edge of screen shift aligned receivers along the north edge of screen emitters along the east edge of screen and shift aligned receivers along the west edge of screen . It is noted that each edge of receivers has one or more receivers than the number of emitters along the opposite edge in order to detect touches in the corners of screen . A beam depicts activation of emitter and detection by receiver . TABLE VI lists an activation sequence in terms of emitter receiver pairs.

Activation no. 10 is the last activation along the horizontal dimension of screen . Activation no. 11 is the first activation along the vertical dimension of screen . Such turning of a corner alters the activation pattern along screen edges. Specifically the activation pattern along a screen edge is of the form AA AB BB BC CC CD . . . where the first letter of each pair designates an emitter and the second letter designates a receiver. Thus in AA AB a same emitter is activated with two receivers and in AB BB two emitters are activated with a same receiver. When turning a corner as at activation no. 11 the pattern is reset. The active emitter is not detected by the previously activated receiver since emitter and receiver are not situated along opposite screen edges. Instead emitter is detected by receiver thus starting a new AA AB BB BC . . . activation pattern along the vertical screen dimension. The controller handles a pattern reset based on the scan sequence registers which indicate when a scan along a screen edge is complete.

Reference is made to which is a simplified diagram of a touch screen having alternating emitters and receivers along each screen edge in accordance with an embodiment of the present invention. As shown in each emitter is situated between two receivers resulting in n emitters and n 1 receivers along a given edge for some number n. shows touch screen surrounded by ten emitters and fourteen receivers . As described above with reference to each emitter is paired with two receivers. The dotted arrows and in indicate two activations of emitter namely an activation detected by receiver and another activation detected by receiver .

In accordance with an embodiment of the present invention when an activation sequence arrives at the end of a sequence of emitters along a screen edge the activation pattern is restarted when activating emitters along an adjacent edge. In accordance with another embodiment of the present invention the angle of orientation of each emitter with a detecting receiver is substantially 45 from the normal to the edge along which the emitter is arranged. In such case a receiver along an adjacent edge is operative to detect light from an emitter near a screen corner. As such the activation pattern is not restarted but instead continues as a series of activated emitters turn a corner. Alternatively the controller may restart the activation pattern when turning a corner by use of registers to store the index of the last LED to be activated by the controller along each screen dimension.

In accordance with an embodiment of the present invention the controller is a simple state machine and does not include a processor core such as an ARM core. As such costs of controllers of the present invention are low. A light based touch screen using a controller of the present invention costs less than a comparable capacitive touch screen since a capacitive touch screen requires a processor core in order to integrate a large number of signals and calculate a touch location. In order to achieve a quick response time a capacitive touch screen uses a dedicated processor core to calculate a touch location instead of offloading this calculation to a host processor. In turn this increases the bill of materials for capacitive touch screens. In distinction light based touch screens of the present invention use two neighboring receiver values to calculate a touch location along an axis which enables the host to calculate a touch location and consequently enables use of a low cost controller.

In accordance with an embodiment of the present invention multiple controllers may be operative to control touch screen . As mentioned above chip package includes a chip select CS pin for coordinating operation of scanning controller circuitry with at least one additional controller for the light based touch screen.

In accordance with embodiments of the present invention the controller supports activation sequences for the touch screen of Configuration No. 5 described hereinabove. In a first embodiment emitters are positioned along two screen edges directly opposite respective receivers along the remaining two screen edges as shown in . Each emitter sends a two pitch wide light beam to its respective receiver. An optical element such as element described hereinabove with reference to interleaves this wide beam with neighboring wide beams to generate two sets of overlapping wide beams that cover the screen e.g. the set including every second beam covers the screen. shows a contiguous area covered by beams and generated by respective emitters and with emitter between them.

Two activation sequences are provided namely an activation sequence for low resolution detection when no touch is detected and an activation sequence for high resolution detection for tracing one or more detected touches. In low resolution detection every second emitter receiver pair is activated along one screen edge. For a rectangular screen the shorter edge is used. In order to distribute use of components uniformly odd and even sets of emitter receiver pairs are activated alternately. Thus in low resolution detection each emitter is configured to be activated with one receiver and the step factor is 1 i.e. every second emitter is activated. In high resolution detection mode each emitter is configured to be activated with one receiver and the step factor is 0 i.e. every emitter is activated. The scan in this mode activates emitters along both emitter lined screen edges.

In an alternative embodiment emitters and receivers are alternated along screen edges as shown in . Each emitter sends a two pitch wide beam to its respective receiver. An optical element such as element described hereinabove with reference to interleaves this wide beam with neighboring wide beams to generate two sets of overlapping wide light beams that cover the screen e.g. the set including every second beam covers the screen. shows a contiguous area covered by beams and generated by respective emitters and with receiver between them.

In this embodiment three activation sequences are provided namely an activation sequence for low resolution detection using detection on one axis an activation sequence for high resolution detection using detection on two axes and an activation sequence for high resolution detection using detection in four axes. In low resolution detection every second emitter receiver pair is activated along one screen edge. For a rectangular screen the shorter edge is used. In order to distribute use of components uniformly odd and even sets of beams are activated alternately. However because neighboring beams are aimed in opposite directions the emitters are connected to the ASIC LED connectors in such a way that the index of emitters is configured to increment along a single screen edge. Thus the step factor is 0 i.e. every second beam is activated and the activation series ends at the last emitter along the active edge. In an alternative embodiment the emitters are connected to the ASIC LED connectors such that the index of emitters is configured to increment together with the series of beams. In this case the step factor is 1 i.e. every second beam is activated.

In high resolution detection mode using beams along two axes each emitter is configured to be activated with one respective receiver the step factor is 0 and the activation series covers all emitters.

In high resolution detection mode using beams along four axes multiple activations are executed. A first activation activates beams along the horizontal and vertical axes. The initial emitter index matches the initial receiver index and the emitter index increments together with the receiver index. A second activation series activates a first set of diagonal beams. In this case the initial emitter and receiver indices define endpoints of one of the diagonal beams from the initial emitter. The emitter index then increments together with the receiver index around the screen. A third activation series activates a second set of diagonal beams. In this case the initial emitter and receiver indices define endpoints of the second diagonal beam from the initial emitter.

The present invention has broad application to electronic devices with touch sensitive screens including small size mid size and large size screens. Such devices include inter alia computers home entertainment systems car entertainment systems security systems PDAs cell phones electronic games and toys digital photo frames digital musical instruments e book readers TVs and GPS navigators.

The present invention is not limited to devices with touch sensitive displays. The present invention also applies to devices having a touch sensitive surface such as a touch sensitive opaque pad and having a cavity through which emitters transmit light and within which locations of objects are detected.

In the foregoing specification the invention has been described with reference to specific exemplary embodiments thereof. It will however be evident that various modifications and changes may be made to the specific exemplary embodiments without departing from the broader spirit and scope of the invention as set forth in the appended claims. Accordingly the specification and drawings are to be regarded in an illustrative rather than a restrictive sense.

