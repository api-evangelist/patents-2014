---

title: Management of mobile hotspot connections
abstract: A system and method implemented at a communication device or mobile hotspot device for providing access to data services over a wireless communication network to one or more user devices. The communication or hotspot device is adapted to provide router, mobile hotspot-type or ad hoc networking functions to user devices such as laptops, tablets, and other entertainment and productivity devices adapted to communicate over a wireless LAN and to provide access to broadband data services. The data services provided over the network may be subject to one or more data allowances or data transfer limits. The communication or hotspot device is adapted to manage the user device connections and data transfer to and from the communication device within the data allowances or according to predetermined prioritization.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09386398&OS=09386398&RS=09386398
owner: BLACKBERRY LIMITED
number: 09386398
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20140616
---
This application is a continuation of U.S. application Ser. No. 12 905 303 filed Oct. 15 2010 which claims priority from U.S. Application No. 61 349 982 filed May 31 2010 the entireties of which are incorporated herein by reference.

A communication device such as a smartphone or a separate Wi Fi access device adapted to communicate over a wireless 3G 4G or similar network may be configured to operate as a router or mobile hotspot to provide nearby user devices with Internet access using the 3G or 4G network for the broadband backhaul. When another user device equipped with Wi Fi or similar wireless LAN functionality such as a laptop tablet or other entertainment or productivity device is brought within the vicinity of the communication device or hotspot device these other user devices may access the Internet or other networks via the wireless data services provided to the communication device.

The embodiments described herein provide a system method and a mobile device for managing one or more connections to a mobile hotspot and to a mobile device providing hotspot functions.

These embodiments will be described primarily in relation to a mobile wireless communication device such as a smartphone hereafter referred to as a mobile device. It will be appreciated by those skilled in the art however that this description is not intended to limit the scope of the described embodiments to smartphones. The methods and systems described herein may be applied to any appropriate communication or data processing device whether portable or not including without limitation cellular phones smartphones organizers personal digital assistants desktop computers terminals laptops tablets notebook computers and the like.

Accordingly there is provided a method for managing one or more connections to a data service the method comprising providing by a first device in communication with a wireless network providing the data service access to the data service to a plurality of user devices monitoring at the first device data transfer by the plurality of user devices using the data service within at least a first region and when a limit of data transfer has been reached at the first device implementing a management protocol to manage connectivity of the plurality of user devices with the first device. In one aspect of the method the management protocol comprises disconnecting at least one of the plurality of user devices from the first device or disabling the data service at the first device. In a further aspect the connections of each of the plurality of user devices with the first device may be prioritized and the management protocol comprises disconnecting a user device with a lowest priority. The limit of data transfer may associated with the first region. It may also be an aggregate amount associated with all regions in which the first device accesses data services and may be reached through the aggregated data transfer by more than one of the plurality of user devices. Monitoring of data transfer by the plurality of user devices may involve the first device monitoring the data transfer between the first device and the data service in real time. The data transfer limit may be associated with a predefined reporting period such that monitoring comprises receiving data transfer information associated with a first reporting period over the wireless network reconciling the received data transfer information with real time data transfer information recorded at the first device and allocating any real time data transfer information not reconciled with the received data transfer information to a further reporting period. There is also provided a computer program product comprising a computer readable medium bearing code executable to carry out the foregoing methods.

There is also provided a device which may include either a smartphone or a mobile hotspot device to carry out the foregoing methods. The device may comprise a first communications subsystem for communicating wirelessly with a plurality of mobile devices which may be configured to implement an 802.11 protocol a second communications subsystem for providing access to data services supplied over a wireless network and a processor adapted to monitor data transfer by the plurality of user devices using the data service within at least a first region and when a limit of data transfer has been reached implement a management protocol to manage access by the plurality of user devices to the data service. The second communications subsystem if a mobile hotspot device may be configured to communicate with a smartphone that is configured to communicate over the wireless network. Otherwise the second communications subsystem may be configured to communicate over the wireless network itself. As above the management protocol may comprise disconnecting at least one of the plurality of user devices from said device disabling the data service at the device or disconnecting a user device with a lowest priority if the connections of each of the plurality of user devices with the device are prioritized.

The embodiments described herein may be implemented on a communication device such as that illustrated in . The communication device may communicate with other devices over a wireless communication system or enterprise system as illustrated in . The communication device may be a mobile device with two way communication and advanced data communication capabilities including the capability to communicate with other mobile devices or computer systems through a network of transceiver stations. The communication device can also have voice communication capabilities.

The communication subsystem receives messages from and sends messages to a wireless network . In this exemplary embodiment of the communication device the communication subsystem is configured in accordance with one or more of Global System for Mobile Communication GSM General Packet Radio Services GPRS standards Enhanced Data GSM Environment EDGE and Universal Mobile Telecommunications Service UMTS . New standards are still being defined but it is believed that they will have similarities to the network behavior described herein and it will also be understood by persons skilled in the art that the embodiments described herein are intended to use any other suitable standards that are developed in the future. The wireless link connecting the communication subsystem with the wireless network represents one or more different Radio Frequency RF channels operating according to defined protocols specified for GSM GPRS EDGE or UMTS and optionally other network communications. With newer network protocols these channels are capable of supporting both circuit switched voice communications and packet switched data communications.

Other wireless networks can also be associated with the communication device in variant implementations. The different types of wireless networks that can be employed include for example data centric wireless networks voice centric wireless networks and dual mode networks that can support both voice and data communications over the same physical base stations. Combined dual mode networks include but are not limited to Code Division Multiple Access CDMA or CDMA2000 networks GSM GPRS networks third generation 3G networks like EDGE HSPA HSPA EVDO and UMTS or fourth generation 4G networks such as LTE and LTE Advanced. Some other examples of data centric networks include WiFi 802.11 Mobitex and DataTAC network communication systems. Examples of other voice centric data networks include Personal Communication Systems PCS networks like GSM and Time Division Multiple Access TDMA systems. The mobile device may be provided with additional communication subsystems such as the wireless LAN WLAN communication subsystem also shown in . The WLAN communication subsystem may operate in accordance with a known network protocol such as one or more of the 802.11 family of standards developed by IEEE. The communication subsystem may be separate from or integrated with the communication subsystem or with the short range communications module . The main processor also interacts with additional subsystems such as a Random Access Memory RAM a flash memory a display an auxiliary input output I O subsystem a data port a keyboard a speaker a microphone the short range communications and other device subsystems .

Some of the subsystems of the communication device perform communication related functions whereas other subsystems can provide resident or on device functions. By way of example the display and the keyboard can be used for both communication related functions such as entering a text message for transmission over the network and device resident functions such as a calculator or task list.

A rendering circuit is included in the device . When a user specifies that a data file is to be viewed on the display the rendering circuit analyzes and processes the data file for visualization on the display . Rendering data files originally optimized or prepared for visualization on large screen displays on a portable electronic device display often requires additional processing prior to visualization on the small screen portable electronic device displays. This additional processing may be accomplished by the rendering engine . As will be appreciated by those of skill in the art the rendering engine can be implemented in hardware software or a combination thereof and can comprise a dedicated image processor and associated circuitry or can be implemented within main processor .

The communication device can send and receive communication signals over the wireless network after required network registration or activation procedures have been completed. Network access is associated with a subscriber or user of the communication device . To identify a subscriber the communication device requires a SIM RUIM card i.e. Subscriber Identity Module or a Removable User Identity Module to be inserted into a SIM RUIM interface in order to communicate with a network. The SIM RUIM card is one type of a conventional smart card that can be used to identify a subscriber of the communication device and to personalize the communication device among other things. Without the SIM RUIM card the communication device is not fully operational for communication with the wireless network . By inserting the SIM RUIM card into the SIM RUIM interface a subscriber can access all subscribed services. Services can include web browsing and messaging such as e mail voice mail Short Message Service SMS and Multimedia Messaging Services MMS . More advanced services can include point of sale field service and sales force automation. The SIM RUIM card includes a processor and memory for storing information. Once the SIM RUIM card is inserted into the SIM RUIM interface it is coupled to the main processor . In order to identify the subscriber the SIM RUIM card can include some user parameters such as an International Mobile Subscriber Identity IMSI . An advantage of using the SIM RUIM card is that a subscriber is not necessarily bound by any single physical mobile device. The SIM RUIM card can store additional subscriber information for a mobile device as well including datebook or calendar information and recent call information. Alternatively user identification information can also be programmed into the flash memory .

The communication device may be a battery powered device including a battery interface for receiving one or more rechargeable batteries . In at least some embodiments the battery can be a smart battery with an embedded microprocessor. The battery interface is coupled to a regulator not shown which assists the battery in providing power V to the communication device . Although current technology makes use of a battery future technologies such as micro fuel cells can provide the power to the communication device .

The communication device also includes an operating system and software components to which are described in more detail below. The operating system and the software components to that are executed by the main processor are typically stored in a persistent store such as the flash memory which can alternatively be a read only memory ROM or similar storage element not shown . Those skilled in the art will appreciate that portions of the operating system and the software components to such as specific device applications or parts thereof can be temporarily loaded into a volatile store such as the RAM . Other software components can also be included as is well known to those skilled in the art.

The subset of software applications that control basic device operations including data and voice communication applications will normally be installed on the communication device during its manufacture. Other software applications include a message application that can be any suitable software program that allows a user of the communication device to send and receive electronic messages. Various alternatives exist for the message application as is well known to those skilled in the art. Messages that have been sent or received by the user are typically stored in the flash memory of the communication device or some other suitable storage element in the communication device . In at least some embodiments some of the sent and received messages can be stored remotely from the device such as in a data store of an associated host system that the communication device communicates with.

The software applications can further include a device state module a Personal Information Manager PIM and other suitable modules not shown . The device state module provides persistence i.e. the device state module ensures that important device data is stored in persistent memory such as the flash memory so that the data is not lost when the communication device is turned off or loses power.

The PIM includes functionality for organizing and managing data items of interest to the user such as but not limited to e mail contacts calendar events voice mails appointments and task items. A PIM application has the ability to send and receive data items via the wireless network . PIM data items can be seamlessly integrated synchronized and updated via the wireless network with the mobile device subscriber s corresponding data items stored and or associated with a host computer system. This functionality creates a mirrored host computer on the communication device with respect to such items. This can be particularly advantageous when the host computer system is the mobile device subscriber s office computer system.

The communication device also includes a connect module and an information technology IT policy module . The connect module implements the communication protocols that are required for the communication device to communicate with the wireless infrastructure and any host system such as an enterprise system that the communication device is authorized to interface with. Examples of a wireless infrastructure and an enterprise system are given in which are described in more detail below.

The connect module includes a set of Application Programming Interfaces APIs that can be integrated with the communication device to allow the communication device to use any number of services associated with the enterprise system. The connect module allows the communication device to establish an end to end secure authenticated communication pipe with the host system. A subset of applications for which access is provided by the connect module can be used to pass IT policy commands from the host system to the communication device . This can be done in a wireless or wired manner. These instructions can then be passed to the IT policy module to modify the configuration of the device . Alternatively in some cases the IT policy update can also be done over a wired connection.

Other types of software applications can also be installed on the communication device . These software applications can be third party applications which are added after the manufacture of the communication device . Examples of third party applications include games calculators utilities etc.

The additional applications can be loaded onto the communication device through at least one of the wireless network the auxiliary I O subsystem the data port the short range communications subsystem or any other suitable device subsystem . This flexibility in application installation increases the functionality of the communication device and can provide enhanced on device functions communication related functions or both. For example secure communication applications can enable electronic commerce functions and other such financial transactions to be performed using the communication device .

The data port enables a subscriber to set preferences through an external device or software application and extends the capabilities of the communication device by providing for information or software downloads to the communication device other than through a wireless communication network. The alternate download path can for example be used to load an encryption key onto the communication device through a direct and thus reliable and trusted connection to provide secure device communication. The data port can be any suitable port that enables data communication between the communication device and another computing device. The data port can be a serial or a parallel port. In some instances the data port can be a USB port that includes data lines for data transfer and a supply line that can provide a charging current to charge the battery of the communication device .

The short range communications subsystem provides for communication between the communication device and different systems or devices without the use of the wireless network . For example the subsystem can include an infrared device and associated circuits and components for short range communication. Examples of short range communication standards include standards developed by the Infrared Data Association IrDA Bluetooth and the 802.11 family of standards developed by IEEE including Wi Fi and Wi Fi Direct.

In use a received signal such as a text message an e mail message or web page download will be processed by the communication subsystem and input to the main processor . The main processor will then process the received signal for output to the display or alternatively to the auxiliary I O subsystem . A subscriber can also compose data items such as e mail messages for example using the keyboard in conjunction with the display and possibly the auxiliary I O subsystem . The auxiliary subsystem can include devices such as a touchscreen mouse track ball infrared fingerprint detector or a roller wheel with dynamic button pressing capability. The keyboard may be an alphanumeric keyboard and or telephone type keypad. However other types of keyboards can also be used. A composed item can be transmitted over the wireless network through the communication subsystem . It will be appreciated that if the display comprises a touchscreen then the auxiliary subsystem may still comprise one or more of the devices identified above.

For voice communications the overall operation of the communication device is substantially similar except that the received signals are output to the speaker and signals for transmission are generated by the microphone . Alternative voice or audio I O subsystems such as a voice message recording subsystem can also be implemented on the communication device . Although voice or audio signal output is accomplished primarily through the speaker the display can also be used to provide additional information such as the identity of a calling party duration of a voice call or other voice call related information.

Signals received by the antenna through the wireless network are input to the receiver which can perform such common receiver functions as signal amplification frequency down conversion filtering channel selection and analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission over the wireless network via the antenna . The DSP not only processes communication signals but also provides for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter can be adaptively controlled through automatic gain control algorithms implemented in the DSP .

The wireless link between the communication device and the wireless network can contain one or more different channels typically different RF channels and associated protocols used between the communication device and the wireless network . An RF channel is a limited resource that should be conserved typically due to limits in overall bandwidth and limited battery power of the communication device . When the communication device is fully operational the transmitter is typically keyed or turned on only when it is transmitting to the wireless network and is otherwise turned off to conserve resources. Similarly the receiver is periodically turned off to conserve power until it is needed to receive signals or information if at all during designated time periods.

In a GSM network the MSC is coupled to the BSC and to a landline network such as a Public Switched Telephone Network PSTN to satisfy circuit switched requirements. The connection through the PCU the SGSN and the GGSN to a public or private network Internet also referred to herein generally as a shared network infrastructure represents the data path for GPRS capable mobile devices. In a GSM network extended with GPRS capabilities the BSC also contains the Packet Control Unit PCU that connects to the SGSN to control segmentation radio channel allocation and to satisfy packet switched requirements. To track the location of the communication device and availability for both circuit switched and packet switched management the HLR is shared between the MSC and the SGSN . Access to the VLR is controlled by the MSC .

The station is a fixed transceiver station and together with the BSC form fixed transceiver equipment. The fixed transceiver equipment provides wireless network coverage for a particular coverage area commonly referred to as a cell . The fixed transceiver equipment transmits communication signals to and receives communication signals from mobile devices within its cell via the station . The fixed transceiver equipment normally performs such functions as modulation and possibly encoding and or encryption of signals to be transmitted to the communication device in accordance with particular usually predetermined communication protocols and parameters under control of its controller. The fixed transceiver equipment similarly demodulates and possibly decodes and decrypts if necessary any communication signals received from the communication device within its cell. Communication protocols and parameters can vary between different nodes. For example one node can employ a different modulation scheme and operate at different frequencies than other nodes.

For all communication devices registered with a specific network permanent configuration data such as a user profile is stored in the HLR . The HLR also contains location information for each registered mobile device and can be queried to determine the current location of a mobile device. The MSC is responsible for a group of location areas and stores the data of the mobile devices currently in its area of responsibility in the VLR . Further the VLR also contains information on mobile devices that are visiting other networks. The information in the VLR includes part of the permanent mobile device data transmitted from the HLR to the VLR for faster access. By moving additional information from a remote HLR node to the VLR the amount of traffic between these nodes can be reduced so that voice and data services can be provided with faster response times and at the same time requiring less use of computing resources.

The SGSN and the GGSN are elements added for GPRS support namely packet switched data support within GSM. The SGSN and the MSC have similar responsibilities within the wireless network by keeping track of the location of each communication device . The SGSN also performs security functions and access control for data traffic on the wireless network . The GGSN provides internetworking connections with external packet switched networks and connects to one or more SGSNs via an Internet Protocol IP backbone network operated within the network . During normal operations a given communication device must perform a GPRS Attach to acquire an IP address and to access data services. This requirement is not present in circuit switched voice channels as Integrated Services Digital Network ISDN addresses are used for routing incoming and outgoing calls. Currently all GPRS capable networks use private dynamically assigned IP addresses thus requiring the DHCP server connected to the GGSN . There are many mechanisms for dynamic IP assignment including using a combination of a Remote Authentication Dial In User Service RADIUS server and a DHCP server. Once the GPRS Attach is complete a logical connection is established from a communication device through the PCU and the SGSN to an Access Point Node APN within the GGSN . The APN represents a logical end of an IP tunnel that can either access direct Internet compatible services or private network connections. The APN also represents a security mechanism for the network insofar as each communication device must be assigned to one or more APNs and communication devices cannot exchange data without first performing a GPRS Attach to an APN that it has been authorized to use. The APN can be considered to be similar to an Internet domain name such as myconnection.wireless.com .

Once the GPRS Attach operation is complete a tunnel is created and all traffic is exchanged within standard IP packets using any protocol that can be supported in IP packets. This includes tunneling methods such as IP over IP as in the case with some IPSecurity Ipsec connections used with Virtual Private Networks VPN . These tunnels are also referred to as Packet Data Protocol PDP Contexts and there are a limited number of these available in the network . To maximize use of the PDP Contexts the network will run an idle timer for each PDP Context to determine if there is a lack of activity. When a communication device is not using its PDP Context the PDP Context can be de allocated and the IP address returned to the IP address pool managed by the DHCP server .

The host system comprises a number of network components connected to each other by a network . For instance a user s desktop computer with an accompanying cradle for the user s communication device is situated on a LAN connection. The cradle for the communication device can be coupled to the computer by a serial or a Universal Serial Bus USB connection for example. Other user computers are also situated on the network and each can be equipped with an accompanying cradle . The cradle facilitates the loading of information e.g. PIM data private symmetric encryption keys to facilitate secure communications from the user computer to the communication device and can be particularly useful for bulk information updates often performed in initializing the communication device for use. The information downloaded to the communication device can include certificates used in the exchange of messages.

It will be understood by persons skilled in the art that the user computers are typically also connected to other peripheral devices such as printers etc. which are not explicitly shown in . Furthermore only a subset of network components of the host system are shown in for ease of exposition and it will be understood by persons skilled in the art that the host system will comprise additional components that are not explicitly shown in for this exemplary configuration. More generally the host system can represent a smaller part of a larger network not shown of the organization and can comprise different components and or be arranged in different topologies than that shown in the exemplary embodiment of .

To facilitate the operation of the communication device and the wireless communication of messages and message related data between the communication device and components of the host system a number of wireless communication support components can be provided. In some implementations the wireless communication support components can include a message management server a mobile data server a web server such as Hypertext Transfer Protocol HTTP server a contact server and a device manager module . HTTP servers can also be located outside the enterprise system as indicated by the HTTP server attached to the network . The device manager module includes an IT Policy editor and an IT user property editor as well as other software components for allowing an IT administrator to configure the communication devices . In an alternative embodiment there can be one editor that provides the functionality of both the IT policy editor and the IT user property editor . The support components also include a data store and an IT policy server . The IT policy server includes a processor a network interface and a memory unit . The processor controls the operation of the IT policy server and executes functions related to the standardized IT policy as described below. The network interface allows the IT policy server to communicate with the various components of the host system and the communication devices . The memory unit can store functions used in implementing the IT policy as well as related data. Those skilled in the art know how to implement these various components. Other components can also be included as is well known to those skilled in the art. Further in some implementations the data store can be part of any one of the servers.

In this exemplary embodiment the communication device communicates with the host system through node of the wireless network and a shared network infrastructure such as a service provider network or the public Internet. Access to the host system can be provided through one or more routers not shown and computing devices of the host system can operate from behind a firewall or proxy server . The proxy server provides a secure node and a wireless internet gateway for the host system . The proxy server intelligently routes data to the correct destination server within the host system .

In some implementations the host system can include a wireless VPN router not shown to facilitate data exchange between the host system and the communication device . The wireless VPN router allows a VPN connection to be established directly through a specific wireless network to the communication device . The wireless VPN router can be used with the Internet Protocol IP Version 6 IPV6 and IP based wireless networks. This protocol can provide enough IP addresses so that each mobile device has a dedicated IP address making it possible to push information to a mobile device at any time. An advantage of using a wireless VPN router is that it can be an off the shelf VPN component and does not require a separate wireless gateway and separate wireless infrastructure. A VPN connection may be a Transmission Control Protocol TCP IP or User Datagram Protocol UDP IP connection for delivering the messages directly to the communication device in this alternative implementation.

Messages intended for a user of the communication device are initially received by a message server of the host system . Such messages can originate from any number of sources. For instance a message can have been sent by a sender from the computer within the host system from a different mobile device not shown connected to the wireless network or a different wireless network or from a different computing device or other device capable of sending messages via the shared network infrastructure possibly through an application service provider ASP or Internet service provider ISP for example.

The message server typically acts as the primary interface for the exchange of messages particularly e mail messages within the organization and over the shared network infrastructure . Each user in the organization that has been set up to send and receive messages is typically associated with a user account managed by the message server . Some exemplary implementations of the message server include a Microsoft Exchange server a Lotus Domino server a Novell Groupwise server or another suitable mail server installed in a corporate environment. In some implementations the host system can comprise multiple message servers . The message server can also be adapted to provide additional functions beyond message management including the management of data associated with calendars and task lists for example.

When messages are received by the message server they are typically stored in a data store associated with the message server . In at least some embodiments the data store can be a separate hardware unit such as data store with which the message server communicates. Messages can be subsequently retrieved and delivered to users by accessing the message server . For instance an e mail client application operating on a user s computer can request the e mail messages associated with that user s account stored on the data store associated with the message server . These messages are then retrieved from the data store and stored locally on the computer . The data store associated with the message server can store copies of each message that is locally stored on the communication device . Alternatively the data store associated with the message server can store all of the messages for the user of the communication device and only a smaller number of messages can be stored on the communication device to conserve memory. For instance the most recent messages i.e. those received in the past two to three months for example can be stored on the communication device .

When operating the communication device the user may wish to have e mail messages retrieved for delivery to the communication device . The message application operating on the communication device can also request messages associated with the user s account from the message server . The message application can be configured either by the user or by an administrator possibly in accordance with an organization s IT policy to make this request at the direction of the user at some pre defined time interval or upon the occurrence of some pre defined event. In some implementations the communication device is assigned its own e mail address and messages addressed specifically to the communication device are automatically redirected to the communication device as they are received by the message server .

The message management server can be used to specifically provide support for the management of messages such as e mail messages that are to be handled by mobile devices. Generally while messages are still stored on the message server the message management server can be used to control when if and how messages are sent to the communication device . The message management server also facilitates the handling of messages composed on the communication device which are sent to the message server for subsequent delivery.

For example the message management server can monitor the user s mailbox e.g. the message store associated with the user s account on the message server for new e mail messages and apply user definable filters to new messages to determine if and how the messages are relayed to the user s communication device . The message management server can also through an encoder not shown associated therewith compress message data using any suitable compression decompression technology e.g. YK compression JPEG MPEG x H.26x and other known techniques and encrypt messages e.g. using an encryption technique such as Data Encryption Standard DES Triple DES or Advanced Encryption Standard AES and push them to the communication device via the shared network infrastructure and the wireless network . The message management server can also receive messages composed on the communication device e.g. encrypted using Triple DES decrypt and decompress the composed messages re format the composed messages if desired so that they will appear to have originated from the user s computer and re route the composed messages to the message server for delivery.

Certain properties or restrictions associated with messages that are to be sent from and or received by the communication device can be defined e.g. by an administrator in accordance with IT policy and enforced by the message management server . These may include whether the communication device can receive encrypted and or signed messages minimum encryption key sizes whether outgoing messages must be encrypted and or signed and whether copies of all secure messages sent from the communication device are to be sent to a pre defined copy address for example.

The message management server can also be adapted to provide other control functions such as only pushing certain message information or pre defined portions e.g. blocks of a message stored on the message server to the communication device . For example in some cases when a message is initially retrieved by the communication device from the message server the message management server can push only the first part of a message to the communication device with the part being of a pre defined size e.g. 2 KB . The user can then request that more of the message be delivered in similar sized blocks by the message management server to the communication device possibly up to a maximum pre defined message size. Accordingly the message management server facilitates better control over the type of data and the amount of data that is communicated to the communication device and can help to minimize potential waste of bandwidth or other resources.

The mobile data server encompasses any other server that stores information that is relevant to the corporation. The mobile data server can include but is not limited to databases online data document repositories customer relationship management CRM systems or enterprise resource planning ERP applications. The mobile data server can also connect to the Internet or other public network through HTTP server or other suitable web server such as a File Transfer Protocol FTP server to retrieve HTTP webpages and other data. Requests for webpages are typically routed through mobile data server and then to HTTP server through suitable firewalls and other protective mechanisms. The web server then retrieves the webpage over the Internet and returns it to mobile data server . As described above in relation to message management server mobile data server is typically provided or associated with an encoder that permits retrieved data such as retrieved webpages to be decompressed and compressed using any suitable compression technology e.g. YK compression JPEG MPEG x H.26x and other known techniques and encrypted e.g. using an encryption technique such as DES Triple DES or AES and then pushed to the communication device via the shared network infrastructure and the wireless network . While encoder is only shown for mobile data server it will be appreciated that each of message server message management server and HTTP servers and can also have an encoder associated therewith.

The contact server can provide information for a list of contacts for the user in a similar fashion as the address book on the communication device . Accordingly for a given contact the contact server can include the name phone number work address and e mail address of the contact among other information. The contact server can also provide a global address list that contains the contact information for all of the contacts associated with the host system .

It will be understood by persons skilled in the art that the message management server the mobile data server the HTTP server the contact server the device manager module the data store and the IT policy server do not need to be implemented on separate physical servers within the host system . For example some or all of the functions associated with the message management server can be integrated with the message server or some other server in the host system . Alternatively the host system can comprise multiple message management servers particularly in variant implementations where a large number of mobile devices need to be supported.

The device manager module provides an IT administrator with a graphical user interface with which the IT administrator interacts to configure various settings for the communication devices . As mentioned the IT administrator can use IT policy rules to define behaviors of certain applications on the communication device that are permitted such as phone web browser or Instant Messenger use. The IT policy rules can also be used to set specific values for configuration settings that an organization requires on the communication devices such as auto signature text WLAN VoIP VPN configuration security requirements e.g. encryption algorithms password rules etc. specifying themes or applications that are allowed to run on the communication device and the like.

The communication device may be a dual or multiple mode device configured to operate not only in voice centric but also data centric networks. For example the mobile device may be configured to communicate over a dual mode network such as those identified above including but not limited to CDMA CDMA2000 GSM GPRS EDGE EVDO HSPA HSPA UMTS and LTE and may also be configured to communicate over wireless networks that are typically IP based such as wireless LANs implementing the Wi Fi protocol one or more of the IEEE 802.11 suite of protocols personal area networks implementing other protocols such as Bluetooth other wireless networks implementing wireless broadband standards such as WiMAX one or more of the IEEE 802.16 suite of protocols and the like. The mobile device may also be configured to operate over a fixed connection to an IP based network for example via a USB or Ethernet connection. For ease of reference these two modes are respectively referred to generally as cellular and LAN modes or networks where LAN includes both wireless and wired LANs. Although the description herein is generally directed to an implementation on a mobile communication device typically communicating over networks over a wireless link such as a 3G or 4G link it will be understood by those skilled in the art that the description is not intended to be so limiting and includes wired connections. The mobile device may therefore be equipped with multiple interfaces and transceivers for communicating over different fixed and wireless networks such as the communication subsystems and and may be configured to communicate over more than one network at a given time.

The communication device may further be configured to operate as a router or access point for other communication or data processing devices in the vicinity of the device . For example as shown in the communication device may operate as a router for a number of other devices configured to communicate wirelessly with the communication device . Alternatively the communication device and one or more other communication or data processing devices may be configured to automatically set up an ad hoc network for example using the Wi Fi Direct or another suitable protocol. In an exemplary wireless enabled tablet laptop computer and camera are shown each communicating with the communication device over a wireless link. While only three wirelessly enabled devices are shown communicating with the communication device over wireless links the communication device may be capable of maintaining connections with fewer than three or more than three other devices. Further although each of the other devices is shown communicating with the communication device over a wireless link one or more of these devices may be connected to the communication device over a fixed connection such as via the data port . Given space constraints the communication device may have limited data ports other devices such as the laptop may be provided with a number of data ports to permit the other devices to be connected over a fixed connection. In addition the other devices may be configured to enter into ad hoc networks with another one of these devices as reflected by the additional wireless links in .

The communication device is in communication with a wireless network including a tower station . The communication device thus may have access to data services over a data centric network and through its operation as a router for the other devices may provide these other devices with connectivity to the Internet or another wide area data network using the wireless network as a backhaul link. Operation in this mode may be referred to as providing a mobile hotspot for the other devices. When one or more of the devices is brought within the vicinity of the communication device while it is operating as a hotspot or conversely when the communication device operating as a hotspot is brought within the vicinity of one or more of the devices the device or devices may connect to the communication device subject to any authentication or other security restrictions implemented by the communication device and thereby access the wide area network.

Another device such as the laptop or the tablet may be similarly equipped to communication over the wireless network and to provide WLAN or LAN connectivity to the other user devices or and may be used in place of the communication device . Alternatively if the laptop or tablet is not provided with on board wireless network or WLAN LAN functionality this functionality may be provided with an expansion card installed in the device or via a dongle or other external hardware device. Alternative network topologies are shown in . In the example of the laptop may lack the required on board hardware to communicate with the wireless network so wireless network connectivity may be provided by means of a separate dongle or tethering device . In the tethering device is connected to a data port of the laptop by a fixed connection. The laptop may be adapted to use its Wi Fi chipset or other WLAN or LAN module to communicate with the remaining devices . Thus the remaining devices are provided with Internet connectivity over the wireless network backhaul via the laptop and the external device . In an alternative embodiment of the communication device which is configured to communication over the wireless network may be tethered to the laptop instead in which case the external device may not be needed.

In a mobile hotspot device provides connectivity to the wireless network and communicates over a WLAN with all of the devices wirelessly. The hotspot device may provide Wi Fi connectivity in particular either in conventional or Wi Fi Direct peer to peer mode in which case it may be referred to as a mobile Wi Fi hotspot device. The mobile hotspot device may be provided in a compact form factor and be battery powered as it is intended to be easily transportable from place to place along with a mobile communication or data processing device. The hotspot device may thus be limited in range or in the number of devices supported at a given time for example a typical hotspot device or the communication device in or laptop in may be limited to providing connectivity to up to five other devices. The hotspot device may also be configured with few controls or user interface systems due to its limited size the laptop or another one of the devices may be used to communicate with the hotspot device for the purpose of configuring the operation of the device such as configuring security features filtering and other functions. It will be appreciated by those skilled in the art that configuration of the device will likely be handled using one of the communication device the laptop or the tablet each of which is provided with sufficient user interface subsystems such as keyboards touchpads and or other data entry means to permit a user to enter data to configure the hotspot device . Communication with and configuration of hotspot devices and similar wireless routers in this manner will be understood by those of ordinary skill in the art.

With one of the network configurations shown in the various devices may thus share Internet connectivity over the wireless network . Provided each of the other devices is configured to communicate with one device provided with access to the wireless network and the device with wireless network access is configured to provide wireless or fixed router functions to the other devices with or without the use of a separate mobile hotspot device it is not necessary for each of the other devices to be equipped for separate access to the wireless network or for separate network accounts to be maintained for use with each of the other devices. The other devices may include laptops tablets and cameras as described above but may also include other electronic communication or data processing devices that are configured for communication over a LAN or WLAN whether intended for entertainment or productivity purposes. Other examples of suitable communication devices include audio and video players gaming devices navigation devices e book readers personal organizers and the like.

Many wireless network operators permit subscribers to roam from their home network i.e. the home location at which the communication device is registered for wireless service to other network locations which may be controlled by other operators. Thus when a user of the communication device travels from a geographical region served by the wireless network to a region served by a different network operator he or she may still be able to access data services with the communication device through the wireless data services offered by the other network operator. If the communication device also functions as a router or mobile hotspot for other communication and data processing devices as described above these other devices may continue to be provided with data service connectivity even while the user of these devices is travelling outside the home network.

Wireless network operators may also impose limits on the use of data services offered over their wireless networks particularly in the form of data allowances or quotas i.e. a limit on the quantity of data that may be transferred between the communication device and the wireless network during a given billing cycle . If a user exceeds the usage limit then the subscriber may be responsible for additional charges which may come as a surprise to the subscriber if he or she is unaware of the quantity of data transferred via the communication device particularly if other devices such as the devices shown in have made use of the operator s data services via the mobile hotspot function or the mobile hotspot device . In some cases the network operator may offer unlimited data services within the home network. However outside the home network while the communication device or the mobile hotspot device is in roaming mode data charges may apply.

In addition the user of the communication device may wish to be able to control access granted to other devices via the mobile hotspot function. If the mobile hotspot device or communication device is discoverable by other wireless enabled devices in the vicinity monitoring of connections will be required to ensure that unauthorized devices are not permitted access particularly if the connection is not secured by an encryption key. Further if other devices connect to the mobile hotspot device or communication device in an ad hoc network the user of the communication device and optional mobile hotspot device providing the link to the broadband backhaul may not realize that the other devices are connected or the quantity data transferred to and from those devices.

Therefore a system and method for managing connections are provided. This system and method are first described in the context of the communication device of which operates as the mobile hotspot or router for the other devices connected to the communication device .

The communication device may be configured to store data allowance and data service usage related data in memory such as the non volatile memory . As shown in the memory may store pricing and data allowance data which may include the basic data allowances or limits imposed by the network operator s billing plan. In this data includes pricing data which are the costs associated with data transfers over the basic data allowances although in a simple embodiment only the data allowance information may be stored. The pricing and data allowance data may be stored only for the home network associated with the communication device . However if data services are available while the communication device is roaming it is useful to also store data allowance information and optionally pricing information for regions outside the home network. Thus data is shown in as including pricing and allowance data for a Region A and Region B through Region N . Each region may represent a different network within the same region as the home network typically a wireless network operated by a different operator rather than a network implementing different wireless technology offered by the same operator providing the home network a geographical region other than the region covered by the home network possibly served by different networks and or operators or a group of geographical regions countries or networks implementing an aggregate pricing and data allowance. The operator of the wireless network may have entered into roaming agreements with a number of different network operators in different geographic regions and may therefore establish data allowances and prices for its subscribers for each of these different network operators. In some cases a data allowance and overage cost may be fixed by the network operator in respect of a group of countries or geographic regions and the pricing and allowance may apply to the aggregate data service usage in that group of countries or regions. For example the Region A data may represent the data allowance and pricing of the communication device s home network. Region B may represent a first group of countries such that the data allowance fixed for that group applies to the total of all data service usage in all of the countries that are members of that first group.

This pricing and data allowance data may be manually maintained by a user at the communication device . For example the data may be directly input into the communication device by a user or may be directly input into another communication device such as a personal computer with which the communication device stores are periodically synchronized. Alternatively the data may be obtained over the air or over a wired connection from the IT policy server or another component on the host system or over the wireless network from an Internet server storing this pricing and data allowance information. Such a resource may be maintained by the wireless network operator of the wireless network . In a still further alternative the pricing and data allowance information may be provided to the communication device by the wireless network operator for example as part of a billing update or other policy update delivered to the communication device .

The memory may also store the usage data for the data services used at the communication device . If the communication device stores data in respect of multiple service regions as described above separate usage data may be stored for each separate region. Thus in the usage data includes Region A usage data Region B usage data and may include further data for other regions as shown by Region N usage data . The usage data may be obtained by the communication device through a process or application executing on the communication device for monitoring data transfer or alternatively from the wireless network operator either in a communication pushed from the network operator or in response to a query transmitted from the communication device . Further detail concerning the acquisition of usage data is discussed below.

The communication device may also store separately from the pricing and data allowance data usage cap or quota data . Even though a data allowance may have been established by the wireless network operator it may be desirable to set a different practical quota or limit on data usage at the communication device for example the user may be willing to incur additional charges for exceeding the data allowance and may therefore wish to set a different limit for the communication device . The usage cap data may be manually configurable at the communication device although permission to alter the usage cap data may be restricted by an administrator of the host system and the communication device . The usage cap data may also be configured at the host system for example at the IT policy server and transmitted to the communication device . Again this usage cap data may be stored according to the applicable region as different practical usage caps may be established for different regions. In there is shown Region A usage cap data and Region B usage cap data . There may be usage cap data for a number of other regions as indicated by Region N usage cap data .

A user of the communication device may possess more than one SIM RUIM card for use with the device . Each of these cards may be associated with a different account with the same or a different wireless network provider and may therefore be assigned its own corresponding data allowances and pricing plans. Accordingly a similar set of data may be stored in the memory for each additional SIM RUIM card. illustrates possible memory contents where two SIM RUIM cards are used for the communication device . A first set of data associated with a first SIM RUIM card includes pricing data allowance data usage data and usage cap data a second set of data associated with a second SIM RUIM card includes corresponding pricing data allowance data usage data and usage cap data . In the various embodiments described below data retrieved from the memory will be retrieved from the data set associated with the SIM RUIM card currently in use on the communication device . Alternatively the data may be stored in memory on the SIM RUIM card itself provided sufficient memory capacity is available on the card.

With the data stored in the memory illustrated in the communication device may be configured to manage connections by other devices to the communication device and data services accessed via the communication device. show examples of user interfaces that may be displayed at the communication device for managing the data services available to the communication device from the wireless network . illustrates a first user interface which provides information concerning the data services available to the communication device . A first setting indicates whether the data services are available at the communication device . In the value of the setting is set to ON i.e. the wireless network operator s data services are available to the communication device at least while the communication device is in its home network. The value of the setting may be altered via the user interface for example to OFF so as to disable data services at the communication device .

Another setting identifies the current network operator providing the data services. While the value of this setting may not be alterable by the user other configuration functions at the communication device may be used to select an alternative network provider not shown . A further setting indicates whether data service is available while the communication device is roaming i.e. connected outside its home network . In the example of this roaming data service is ON meaning that the communication device is able to access the data services of another wireless network while in roaming mode. The value of this setting may be altered via the user interface to terminate roaming data access. In one embodiment the value of the roaming data service setting may be set at the host system for example in an enterprise policy provided by the IT policy server . Further alteration of this setting via the user interface of the communication device may be disabled so that only an administrator or another person with sufficient privileges at the host system is able to alter the setting . For example it may be an enterprise policy to deny access to data services while the communication device is roaming. Disabling alteration of the setting thus prevents a user of the communication device from circumventing this policy. If multiple SIM RUIM cards are used with the communication device different enterprise policies may be applied for the different cards .

The user interface also provides information concerning data allowances for one or more regions or networks according to the data allowances information stored at the communication device . A listing identifies a number of wireless networks accessible by the communication device when the communication device is located in the relevant geographical region and their corresponding data allowances as set by the wireless network operator. It can be seen in that for the communication device s home network there is an unlimited data allowance meaning that no excess charges may be incurred for data transfers using the data services of the wireless network so long as the communication device is within the range of that network and not roaming. For another region Region B a data allowance of 5 GB is indicated meaning that once data transfers using a data service while the device is served by a network in Region B exceed 5 GB excess data transfer charges may be levied. The user interface also indicates when the current billing cycle ends for the communication device subscription since data allowances are typically defined for a single billing cycle and any data usage from a previous billing cycle is reset to zero once a new billing cycle begins. Finally also includes warnings setting which may be used to set a threshold for issuing a warning once data usage has reached that threshold.

Some or all of the information displayed in the user interface may be editable at the communication device . illustrates an example of a user interface similar to but including an overlay window comprising a number of options selectable via an interface subsystem on the device . This overlay window may be invoked as a result of a detected command or instruction at the communication device such as a keypress on a keyboard or keypad a tap or gesture on a touchscreen display and the like. As can be seen in the overlay window provides the options of editing or acquiring the data allowances editing the warning thresholds and editing the billing period information . In addition the overlay window includes an option to view quotas . Upon selection of one of these options and invocation of a command the communication device may present a new user interface for the editing or input of data relevant to that option.

In this user interface an entry in the listing may be selected for editing which in this embodiment invokes a drop down list providing a series of possible increments or decrements for selection. Upon detection of a selection of one of the listed increments or decrements the usage cap data and the listing in the user interface may be updated accordingly. As noted above certain settings may not be alterable at the communication device if an enterprise policy has been set to prevent the user from altering certain settings thus in some embodiments the drop down list may not be invocable.

Another option listed in the overlay of is to view quotas . provides an example of a further user interface displaying the current usage statistics for the various regions in which the device is able to access data services. As can be seen from the listing 2.35 GB of the data allowance available for the home network has been used in the present billing cycle zero percent of the data allowance available for Regions B and C and 40 of the allowance for Region D. A context menu may be invocable in this view displaying options to either reset the quotas i.e. reset the usage statistics displayed in the listing to zero or to acquire current usage data from the wireless network operator acquire data from billing server . As noted above data transfer may be monitored at the communication device . This monitoring may be carried out in real time. However the network operator may maintain its own records concerning data usage for all regions and may provide this data to the communication device in response to a request or as part of a periodic update transmitted to the communication device . If usage data is obtained from the network operator this usage data may replace the current usage data stored at the device .

A method for managing a mobile hotspot connection and other data service usage at the communication device is illustrated in . At data allowance information is obtained at the communication device . Usage of data services is then monitored by the communication device at . Data transfer using the data services may be carried out through an application or other process at the communication device accessing the data services for use at the communication device or through the communication device transferring data to and from the wireless network or a visited network if the communication device is roaming while functioning as a router or mobile hotspot to provide network connectivity to other devices such as the devices of . Usage monitoring may be carried out locally at the communication device or alternatively by the wireless network operator and provided to the communication device as described above. It will be noted however that the network operator may not provide usage data to the communication device on a sufficiently frequent basis to keep the usage data at the communication device sufficiently up to date to ensure that the data allowances or usage caps set at or for the device have not been exceeded. Thus even if the communication device relies on the network operator pushing data usage information to the device it may be useful for the communication device to also monitor data transfers itself or to periodically query the network operator for updated usage data particularly if a number of devices are concurrently connected to the communication device and making use of the router or hotspot function or if a large amount of data is currently being or has recently been transferred between the communication device and the wireless network .

Since the data allowances may differ by region the data usage information is recorded in respect of each individual region as illustrated by . If the communications device receives usage data from the network operator then the usage data provided by the network operator may indicate to which region the usage data applies. However if the communication device monitors the data usage itself the device may need to determine for itself whether it is in roaming mode or not and in which region it is currently roaming so that it can both record its monitored usage data against the appropriate region in the memory and determine whether it has reached a warning threshold or a data allowance or cap for that region. Thus the device may periodically query the network to which it is connected to obtain an alphanumeric identifier for comparison to an identifier stored at the communication device e.g. on the device s SIM RUIM card . If the received identifier is determined to match the stored identifier then the device may determine that it is not roaming. Alternatively in a GSM type network the communication device may query the network for an identifier for the cell tower with which it is in communication and then compare a portion of this identifier which may include a country code with a corresponding portion of the communication device s IMSI. If there is a match then the communication device may determine that it is not roaming if it does not match the communication device may be able to identify which region it is in for the purpose of monitoring data usage. Similarly in a CDMA or CDMA2000 based network the communication device may obtain the network s system ID SID or network identification number NID if available and use the SID or NID to determine whether the device is within its home network or roaming. In a further embodiment the communication device may use GPS or another geolocation service implemented at the device to determine where it is located so that it may determine which region it is in. However the device may track the commencement or termination of roaming a monitoring or listening process may be maintained at the communication device to receive notifications from a tracking module indicating when the device is in roaming mode and where and or receive notifications from a geolocation function implemented at the device identifying the device s current location to assist in maintaining and updating the usage data .

At it is determined whether the current data usage for the current region is at a warning threshold if a warning threshold level had been set for example as shown in two different threshold levels have been set . If a warning threshold has not been reached and the cap or allowance for that region has not yet been reached as determined at then the process returns to . If a warning threshold has been reached then a warning may be issued at . This warning may be a notification displayed at the communication device such as the notification shown in . The notification may overlay any current user interface displayed at the device such as the user interface . The notification may be dismissed from the display of the communication device for example through actuation of the OK button or actuation of the manage Wi Fi connections button which invokes a new view displayed at the communication device for managing the devices connected to the device over a Wi Fi connection or other LAN or WLAN connection . In the meantime the communication device may continue to monitor and update usage data for that region. If a further threshold is determined to have been reached at then again a warning may be issued at .

If it is determined on the other hand that the cap or quota for data transfer for the current region has been reached then at a management protocol is executed. This management protocol may simply comprise disconnecting any devices currently making use of the router or hotspot function or disabling data service altogether until either the billing cycle starts over the data allowances stored on the device are reset or the management protocol is overridden either by the user of the communication device or an administrator or other person with sufficient privileges at the host system . illustrates an example of a notification that may be displayed at the communication device as part of the management protocol. This notification indicates that data services have been disabled because 100 of the data allowance for the current region here Region D has been used. The notification may be dismissed by actuating the OK button or alternatively a device management or data services management view such as the user interface may be invoked through actuation of the override button. Again as noted above the ability to override the data allowances may not be permitted depending on the enterprise policies set for the communication device .

In addition to managing device services as discussed above with respect to the devices connecting to the communication device may also be managed. Turning to a first user interface is shown for managing wireless clients connected to the communication device through a Wi Fi link. The same or a similar user interface may also be used to manage wired connections with other devices. The user interface includes a listing of currently connected client devices and a list of previously connected clients . This data may be stored in the memory . It will be appreciated that the previously connected clients need not be displayed for the purpose of managing current connections although the identification of previously connected clients may be useful for prioritizing access to the router or hotspot function of the communication device as discussed below. The listings of clients may include the MAC address as a unique identifier as well as the assigned IP address the protocol type e.g. 11g for 802.11g . Other information such as the time the client joined the duration of the connection and any friendly name or identifier for the connected devices may also be stored in the memory .

Connections of devices shown in the listing may be managed through this user interface. As shown in the user interface shows that a context menu may be invoked for a selected on of the listed clients. The context menu provides the options of either disconnecting the device in the case of a currently connected device or blocking the device from connecting to the communication device . For past clients the context menu may also provide for deletion of the client information from the memory .

When a new device connects via the Wi Fi or other LAN or WLAN link a notification is displayed at the communication device to alert the user of the new device. As shown in this notification overlays the current user interface displayed at the device identifies the newly connected device and provides options to accept the connection i.e. dismiss the notification block the device from connecting or to invoke a device management view . The device management view may be the user interfaces shown in .

Data services may be managed at the communication device according to a predetermined budget rather than by data quantities. For example an alternative means for setting data allowances is shown in . The user interface of provides a listing of pricing data for the regions in which data services area available for the communication device . This pricing data may be drawn from the pricing allowance data shown in . In this example the data allowance for the home network is unlimited so no pricing information is provided instead the listing indicates this is unlimited prices in dollars per megabyte or gigabyte are shown for the other regions. As mentioned above this data may be provided by the wireless network operator for example during an update transmitted to the communication device alternatively this data could be provided to the device from the host system or retrieved over the wireless network from a server on the Internet. The user interface also provides the option of fixing a single limit value for any data transfers at . This single limit may be expressed as a dollar value. If this option is enabled in the example of the option is enabled by checking the checkbox associated with the option then regardless of whether the communication device is roaming or within the home network any data transfers in excess of the predetermined data allowance established by the network operator are capped at a fixed amount. This fixed amount is an aggregate amount for all regions. Thus for example if the limit is 10 the user may travel first to Region B and exceed the basic data allowance provided by the network operator by 20 MB which is equivalent to 5 according to the pricing data and will be left with a further 5 to spend on data transfers during the same billing cycle. There is thus no need to establish a usage cap for each individual region or to store the associated data in the memory it is sufficient to simply track the equivalent cost of data services and to store a single dollar value in the memory .

A method for implementing this cap is shown in . At the aggregate quota or cap is obtained i.e. the limit value of option . At the communication device monitors and updates data usage in a manner similar to that described above however in this embodiment the data usage is converted to a dollar value based on the pricing data available to the communication device . Similar to the method of warnings thresholds may be instituted e.g. at 80 and or 90 of the cap . Thus at it is determined whether the current data usage is at a warning threshold. If it is not and the current data usage has not reached the cap at then the process continues to monitor and update data usage at the device . If it is determined at that a warning threshold has been reached then at a warning may be issued in a manner similar to that described in respect of . If it is subsequently determined that the current usage has reached the cap i.e. the cost of data usage has reached the limit fixed in option then at a management protocol is executed. This management protocol may be similar to the protocol described above.

The user interface of also illustrates an alternative means of setting a budget for data transfers. Listing provides a list of the networks accessible to the communication device including data services with corresponding dollar values. A dollar value may be established for each of the regions identified in the listing . Again with respect to the home network the listing indicates that the dollar value cannot be edited since the data allowance for the home network is unlimited. Also as noted above these values may be editable at the communication device although in other embodiments an enterprise policy may prevent these values from being edited at the device while they may be editable at the host system .

The dollar values thus reflect the quantity of data that may be transferred over and above any predetermined data allowance set by the network operator. Thus they effectively operate in a similar manner to the data allowances set in or applied in . Turning to at data allowance information is obtained at the communication device . This data allowance information may be the dollar figures set out in listing . Usage of data services is then monitored by the communication device at . Data transfer using the data services may be carried out and monitored as described above with respect to . The usage data is also stored in respect of each region. At it is determined whether the current data usage for the current region is at a warning threshold if a warning threshold level had been set. If a warning threshold has not been reached and the cap or allowance for that region has not yet been reached as determined at then the process returns to . If a warning threshold has been reached then a warning may be issued at . In the meantime the communication device may continue to monitor and update usage data for that region. If a further threshold is determined to have been reached at then again a warning may be issued at .

If it is determined on the other hand that the budget for data transfer for the current region has been reached then at a management protocol is executed. As before this management protocol may simply comprise disconnecting any devices currently making use of the router or hotspot function or disabling data service altogether until either the billing cycle starts over the data allowances stored on the device are reset or the management protocol is overridden either by the user of the communication device or an administrator or other person with sufficient privileges at the host system .

In still a further embodiment device connections at the communication device may be prioritized. This prioritization may be applied in the management protocol employed to handle situations where a warning threshold has been reached or data usage has reached the cap or data allowance for that region. illustrates a further user interface in which the client devices e.g. the devices connected to the communication device are listed in order of priority. This priority may be set by a value at the communication device or in an enterprise policy transmitted to the communication device from the host system . The priority listing includes not only those devices that may be currently connected to the communication device as shown in the listing but also those devices that were previously but are no longer connected. The priority listing may be organized in order of decreasing priority with the most important devices listed first and least important devices last. illustrates a further user interface in which a selected one of the entries in the listing has been highlighted at . A context menu may be invoked through a user command at the device . In this example the context menu provides the option of moving the selected device up or down in the list. Thus by selecting all the devices necessary in turn the list of currently and formerly connected client devices can be arranged in order of priority.

Even in the absence of data allowance considerations this prioritization may be used to generally control access to the communication device or mobile hotspot device when a limited number of connections to the device or are available. For example if there is a limit of five connections all of which are used by external devices such as and so on a request from another device having a higher priority than one of the currently connected devices may result in the lower priority currently connected device being disconnected from the communication device or hotspot device and the higher priority device being permitted to connect in its place. In this manner the user is able to prioritize and manage connections to the device or in advance without waiting for a device to request a connection before making a determination whether a currently connected device should be disconnected.

Data pertaining to the order of priority may also be stored in the memory for example as a numerical value as shown in . In addition to the data illustrated in the memory may also store usage data for each individual device connecting via the router or hotspot function as shown by data items and . The memory may also store the priority data for each of these devices .

If it is determined at that the current data usage has reached the cap or predetermined data allowance then at the appropriate management protocol is invoked. Referring again to in this embodiment the management protocol is to automatically disconnect all currently connected devices. Thus at all devices are disconnected from the router or hotspot function provided by the communication device and the mobile hotspot or routing feature is disabled at the device until such time that the usage data is reset the data allowances are overridden or the billing cycle ends and a new one begins.

From time to time new data allowance data may be required at the device for the purpose of real time monitoring since roaming agreements between the home network and roaming network operators may change or data plans offered by operators may change. Thus illustrates a simple method by which new data allowance information may be applied at the device . At new data allowance data is received. At it is determined whether an effective date for applying the new data allowance data has been provided for example the operator may provide advance notice of a change in data service rates. If no effective date is provided or if the effective date has passed then the new data allowances are applied immediately at . If a future effective date is provided then the device may store the data allowance data in the memory until the effective date arrives then apply the data allowance data in respect of the particular network or roaming information stored at the device .

As noted above usage data delivered by the network operator to the device may not be current. For example the roaming agreements entered into between the home network operator and the roaming network operators may not only provide for different data allowances but may also provide for different reporting periods. Thus if the user of the device travels across different regions and uses data services while roaming by the time updated data usage information in respect of the home network becomes available for example at the end of a billing period there may not be updated roaming data usage information available. While the device may monitor data services usage itself despite the storage of roaming data allowance information there may be some inherent uncertainty whether data usage during certain periods should be allocated to a current home network billing period or to a future billing period. In addition even if a reporting period for a roaming network is defined at the device and the device monitors data usage over that roaming network it may not be known at the device whether data usage occurring near the end of a current reporting period or the beginning of a new reporting period should be allocated to the current roaming reporting period or home network billing period or to the next period. The uncertainty may arise from a simple difference in time zones between the home network which may be the source of data allowance information for the device and the roaming network for example a roaming network operator may allocate data usage by the device occurring at 11 p.m. in the device s home network time zone as usage occurring at 2 a.m. in the roaming network operator s time zone and this allocation may affect the computation of the quota consumed at the device . While in theory governing time zone information may be made available to the device in practice a single network may span multiple time zones roaming agreements may change from time to time and incomplete information may be conveyed to end users.

Accordingly the data stored at the device in respect of a given region or network operator may include data usage information that is maintained as a buffer to reduce the likelihood that the user will exceed a defined cap or allowance on data usage while roaming or alternatively underestimate the remaining capacity available under the established cap or allowance. illustrates data that may be stored at the device such as that shown in for a given region. The pricing data allowance data for Region B for example may include a data allowance value specifying a basic quota pricing data for the basic quota and data transfers over the quota and a definition of a reporting period to which the quota applies e.g. a date range that is expressly defined with a start date or end date or a rule defining a regular reporting period such as once a month every four weeks or some other period . The usage data that is monitored and recorded at the device may be segregated into two components a basic usage amount and a buffer usage amount . The buffer usage amount may comprise a record of data allowance consumed while accessing data services in that region where the access takes place during a buffer period defined around the end beginning of the reporting period . The size of the buffer period may be defined with reference to a time zone difference between the home network and the roaming network for example if the home network time zone lags the roaming network time zone by a maximum time zone difference of 10 hours then the buffer period may be defined as the period of 10 hours prior to the end of the reporting period . In a first embodiment any data quota consumption during this buffer period is tracked but not used in a real time estimation of quota consumption for the purpose of the current reporting or billing period. Data usage monitored prior to the buffer period is stored as basic usage data for the current reporting or billing period. Exclusion of the buffer usage data in this manner reduces the likelihood that the real time usage will be overestimated at the device . In an alternate embodiment the buffer usage data is included in real time usage estimations to provide an additional cushion to ensure that data consumption does not exceed any established cap or allowance.

A method for tracking and reconciling data allowance consumption using the buffer usage data is illustrated in . At a new monitoring period commences this may be defined by the reporting period associated with a given roaming area if data consumption in that region is being monitored. Based on the data allowance data and pricing info available to the device the device engages in data usage monitoring and implementation of any necessary management protocols at as described generally above. At the device receives updated quota data likely from the home network operator either through a billing statement received electronically at the device or another report received from the home network operator which may be delivered to the device in a message such as e mail SMS and the like received by the device in response to a request transmitted from the device or alternatively pushed to the device SIM RUIM or memory by another method . This updated info is reconciled against the real time usage data collected by the device . If it is determined that all device monitored real time usage data is included in the update received from the operator at for example any deviation between the quantity of data transferred estimated by the device and the reported quantity is within a predetermined error range or all dates of data usage recorded by the network operator correspond to the dates of data usage recorded at the device regardless whether the quantities are accurate then at any real time data usage data stored at the device may be discarded. If however it is determined that some of the real time data usage information is not reflected in the update received from the operator then at the excluded usage data is allocated to the next monitoring period or next update period and is not discarded by the device . All remaining reconciled data is discarded at . At it is determined whether the current monitoring period has ended. If it has a new monitoring period begins at .

The foregoing systems and methods thus provide a means to control access to the router or hotspot feature provided by the communication device . If the hotspot functionality is integrated in the communication device but is rather implemented in a separate hotspot device as in these systems and methods may be implemented on the communication device or other device that is used to configure the hotspot device . The relevant pricing data allowance data usage usage cap and device priority data may be stored either at the hotspot device itself or alternatively at the device used to configure the hotspot device .

The systems and methods disclosed herein are presented only by way of example and are not meant to limit the scope of the subject matter described herein. Other variations of the systems and methods described above will be apparent to those in the art and as such are considered to be within the scope of the subject matter described herein. For example it should be understood that steps and the order of the steps in the processing described herein may be altered modified and or augmented and still achieve the desired outcome.

The systems and methods data may be stored in one or more data stores. The data stores can be of many different types of storage devices and programming constructs such as RAM ROM flash memory programming data structures programming variables etc. It is noted that data structures describe formats for use in organizing and storing data in databases programs memory or other computer readable media for use by a computer program.

Code adapted to provide the systems and methods described above may be provided on many different types of computer readable media including computer storage mechanisms e.g. CD ROM diskette RAM flash memory computer s hard drive etc. that contain instructions for use in execution by a processor to perform the methods operations and implement the systems described herein.

The computer components software modules functions and data structures described herein may be connected directly or indirectly to each other in order to allow the flow of data needed for their operations. It is also noted that a module or processor includes but is not limited to a unit of code that performs a software operation and can be implemented for example as a subroutine unit of code or as a software function unit of code or as an object as in an object oriented paradigm or as an applet or in a computer script language or as another type of computer code.

A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by any one of the patent document or patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyrights whatsoever.

