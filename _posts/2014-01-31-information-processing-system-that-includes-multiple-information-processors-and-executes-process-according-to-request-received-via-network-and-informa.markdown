---

title: Information processing system that includes multiple information processors and executes process according to request received via network, and information processing method therein
abstract: An information processing system includes multiple information processors. Each of the information processors includes a control part configured to periodically store a duplicate copy of at least part of predetermined information stored inside the information processor in a first storage part. The control part is configured to cause the first storage part to be operable from the information processor prior to storing the duplicate copy in the first storage part, store the duplicate copy after causing the first storage part to be operable, and cause the first storage part to be inoperable from the information processor after completion of storing the duplicate copy.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09152343&OS=09152343&RS=09152343
owner: RICOH COMPANY, LTD.
number: 09152343
owner_city: Tokyo
owner_country: JP
publication_date: 20140131
---
The present application is based upon and claims the benefit of priority of Japanese Patent Applications No. 2013 021420 filed on Feb. 6 2013 and No. 2014 004887 filed on Jan. 15 2014 the entire contents of which are incorporated herein by reference.

Recently it has been becoming popular to provide services using software provided on a network such as the Internet without execution of application programs in information processors directly operated by users. Cloud services are known as such form of providing services.

Reference may be made to for example Japanese Laid Open Patent Application No. 2011 192250 for related art.

According to an aspect of the invention an information processing system includes multiple information processors where each of the information processors includes a control part configured to periodically store a duplicate copy of at least part of predetermined information stored inside the information processor in a first storage part. The control part is configured to cause the first storage part to be operable from the information processor prior to storing the duplicate copy in the first storage part store the duplicate copy after causing the first storage part to be operable and cause the first storage part to be inoperable from the information processor after completion of storing the duplicate copy.

According to an aspect of the present invention an information processing method in an information system which includes an information processor including a control part configured to periodically store a duplicate copy of at least part of predetermined information stored inside the information processor in a first storage part includes causing by the control part the first storage part to be operable from the information processor prior to storing the duplicate copy in the first storage part storing by the control part the duplicate copy after causing the first storage part to be operable and causing by the control part the first storage part to be inoperable from the information processor after completion of storing the duplicate copy.

The object and advantages of the invention will be realized and attained by means of the elements and combinations particularly pointed out in the claims.

It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory and not restrictive of the invention.

Computers that provide cloud services contain various kinds of log information and configuration information. Such log information serves as important materials for analyzing the cause of a failure when it occurs and may contain information on users. Accordingly it is desirable that the log information be safely managed in a condition that makes it difficult to externally access the log information.

According to an aspect of the present invention the security of data stored in a computer that provides services via a network is improved.

A description is given below with reference to the accompanying drawings of embodiments of the present invention. is a diagram for illustrating the relationship between a cloud service system and apparatuses according to an embodiment of the present invention. Referring to a cloud service system and apparatuses in an apparatus usage environment are connected by a network N such as a wide area network WAN typified by the Internet so as to be able to communicate with each other.

The apparatus usage environment is an environment where apparatuses capable of cooperating with services provided by the cloud service system are used. Examples of the apparatus usage environment include an office or the like in an enterprise. Referring to the apparatus usage environment includes an image forming apparatus a projector a video conference apparatus and a personal computer PC as examples of apparatuses. Hereinafter the image forming apparatus the projector the video conference apparatus and the PC may be collectively referred to as apparatuses . 

The image forming apparatus is for example a multifunction machine a printer a scanner a facsimile machine or the like. The projector is an apparatus that projects image data. The video conference apparatus is an apparatus used in a video conference. Embodiments of the present invention may also be applied to apparatuses other than the apparatuses illustrated in .

The cloud service system is a group of one or more computers information processors that provide various kinds of services with which the apparatuses are capable of cooperating hereinafter referred to as apparatus cooperation services as cloud services. Examples of apparatus cooperation services include the service of storing image data scanned by and transferred from the image forming apparatus in a predetermined storage hereinafter referred to as cloud scan service and the service of causing the image forming apparatus to download print data uploaded in advance to the cloud service system and to execute a print job based on the print data hereinafter referred to as cloud print service .

The apparatus cooperation services may not be necessarily provided as cloud services. For example the cloud service system may be a server side system in a common client server system. Furthermore the network N may be a local area network LAN .

The functions of the cloud service system are classified into five layers which are an application layer L a common service layer L a database layer L a management layer L and an operation layer L. Of these the three layers of the application layer L the common service layer L and the database layer L are directly related to the provision of apparatus cooperation services. On the other hand the management layer L and the operation layer L are layers related mainly to the maintenance management development or the like of the cloud service system .

The application layer L is a layer in which server side applications hereinafter referred to as server applications related to apparatus cooperation services are implemented. Referring to the application layer L includes a portal application a scan application and a print application . The portal application is a server application that provides the portal sites of apparatus cooperation services. In the portal sites it is possible to register user information and set configuration information with respect to server applications user by user. The scan application is a server application that executes a server side process with respect to the above described cloud scan service. The print application is a server application that executes a server side process with respect to the above described cloud print service.

The common service layer L is a layer that includes functions common to multiple server applications or basic functions used by multiple server applications. The functions of the common service layer L may be called through a platform application programming interface API . The platform API is basically called from a server application in the application layer L. The platform API may be made open to a third party vendor different from the operator of the cloud service system . In this case server applications may be implemented by the third party vendor. That is server applications are suitably developed and added using the platform API .

Referring to the common service layer L includes an authentication part an organization management part a user management part a license management part an apparatus management part a temporary image management part an image processing control part and a log collection part

The authentication part performs authentication and authorization with respect to users and the apparatuses that access the cloud service system . The authorization includes determining whether to authorize a user or apparatus to access a service that is an access target. For example the authorization is performed based on the presence or absence of a license for a service that is a target access.

The organization management part the user management part the license management part the apparatus management part and the temporary image management part provide access to an organization information storage part a user information storage part a license information storage part an apparatus information storage part and a temporary image storage part respectively in the database layer L. The access provides an interface for writing information to and reading information from a corresponding storage part.

The image processing control part controls a workflow with respect to the processing of data such as image data. The workflow with respect to image processing refers to a process flow constituted by sequencing one or more processing units whose target of processing is data. The image processing control part includes a message queue and workers . The workers execute processing on data. Referring to an image conversion part and an image transmission part are illustrated as examples of the workers . The image conversion part converts data formats and performs optical character recognition OCR with respect to data. The image transmission part transmits image data to an online storage or the like outside the cloud service system for example. Each of the image conversion part and the image transmission part which is indicated by a single rectangle in may be implemented function by function in different software modules.

The message queue manages requests for processing processing requests to the workers using a storage area of a queue structure. The message queue which is indicated by a single rectangle in may be provided for each worker . That is the message queue may be provided in correlation with the corresponding worker . The transmission of processing requests stored in the message queue to the workers may be of either a PUSH type or a PULL type. In the PUSH type transmission processing requests registered with the message queue are transmitted to the workers by the message queue . In the PULL type transmission each worker polls the message queue and if a processing request is included in the message queue extracts the processing request. The presence of the message queue makes it possible for each worker to execute processing asynchronously with a processing request. As a result it is possible to reduce the necessity for a requestor of processing to wait for the completion of the processing by the workers

The log collection part collects logs related to processes executed in the application layer L and the common service layer L from each part and stores the collected logs in a log information storage part in the database layer L. The form of collecting logs may also be either a PUSH type or PULL type.

The database layer L is a layer including a database that stores various kinds of information. Referring to the database layer L includes the log information storage part the organization information storage part the user information storage part the license information storage part the apparatus information storage part the temporary image storage part a job information storage part and an application information storage part

The log information storage part stores logs collected by the log collection part . The organization information storage part stores the attribute information of each of organization users of the cloud service system hereinafter referred to as organization information . The term organization refers to a group of one or more individual users of which examples include enterprises or other associations. The organization information includes an organization ID for identifying the organization. The user information storage part stores the attribute information of each individual user belonging to the organization user hereinafter referred to as user information . The user information includes a user ID for identifying the individual user and a password used for authenticating the individual user. The user information includes the organization ID of an organization to which the individual user belongs as well. This is because it is satisfactory if the uniqueness of the user ID is guaranteed within the organization. That is in this embodiment each individual user is identified by the combination of an organization ID and a user ID.

The license information storage part stores with respect to each organization user information on a license possessed by the organization user. The license is a license for an apparatus cooperation service. The apparatus cooperation service is basically in one to one correspondence with a server application. Accordingly the license for an apparatus cooperation service may also be a license for a server application.

The apparatus information storage part stores the attribute information of an apparatus used in an organization user hereinafter referred to as apparatus information . The apparatus information includes for example identification information for identifying the machine body individual body of each apparatus .

The temporary image storage part stores a temporary image. The temporary image is data temporarily generated by processing by the workers . Although the term image is used for convenience purposes the temporary image does not necessarily have to be image data. For example the temporary image may be text data. The job information storage part stores information related to processing by the workers . The application information storage part stores with respect to each organization user or individual user configuration information with respect to a server application available to the organization user or individual user.

Basically the server application may access each storage part of the database layer L through a corresponding management part in the common service layer L. The application information storage part however may be directly accessed by each server application.

The management layer L is a layer where functions for maintaining and managing the cloud service system are implemented. Referring to the management layer L includes a monitoring part a deployment part an account management part a login management part and a backup part

The monitoring part monitors the operations of the application layer L the common service layer L and the database layer L which are hereinafter referred to as upper three layers and detects the occurrence of an abnormality. The deployment part performs software deployment installation upgrading etc. for the upper three layers. The account management part manages the account of a manager who may log into each of the below described servers of the upper three layers. The manager refers to a user in an organization that operates the cloud service system and is a term for making a distinction from a user in the apparatus usage environment .

The login management part operates as a step for logging into the above mentioned servers by the manager. That is the manager may log into each server via the login management part

The backup part executes processes related to the backing up of files containing predetermined information which are stored in below described server computers corresponding to the respective parts in the upper three layers. For example files containing logs and files containing configuration information are to be subjected to backing up. Logs to be backed up by the backup part are different from logs to be collected by the log collection part . Logs to be collected by the log collection part are mainly logs related to the execution of functions by respective parts while logs to be backed up by the backup part are mainly logs recorded by the system side such as the operating system OS of each computer. Logs to be backed up by the backup part however may overlap logs to be collected by the log collection part

The operation layer L is a layer where functions for operations carried out by the cloud service system are implemented. Referring to the operation layer L includes a customer information management part a contract management part a sales management part a license management part and a development environment provision part

The customer information management part manages information on customers. The customers are basically organization users. The contract management part manages information on contracts made with customers in their usage of apparatus cooperation services. The sales management part manages information on the sales of apparatus cooperation services. The license management part manages with respect to each customer information on a license possessed by the customer. The license management part in the operation layer L registers information to be set on the operator side and updates the registered information. The information to be set on the operator side includes for example license registration and deletion information. On the other hand the license management part in the common service layer L registers information to be set on the user side and updates the registered information. The information to be set on the user side includes information on for example the start of use of a license and the end of use of a license.

The development environment provision part provides a developer with a development environment of software with respect to the upper three layers. The developer is for example a developer in an enterprise that operates the cloud service system . The development environment provided by the development environment provision part may be made open to software vendors outside the enterprise.

The functional configuration of the cloud service system may be implemented as illustrated in . is a diagram illustrating a second functional configuration of a cloud service system according to an embodiment of the present invention. In the same elements as those of are referred to by the same reference characters and their description is omitted.

Referring to a domain specific service layer L is provided between the application layer L and the common service layer L. The domain specific service layer L is a layer that provides services of higher completeness coarser granularity or higher applicability than the common service layer L. The services provided by the domain specific service layer L are available through a domain specific API . The domain specific API is an API of coarser granularity than the platform API . The domain specific API may also be made open to the outside.

Referring to the common service layer L includes a scan logic part and a print logic part . The scan logic part executes a logic part of the cloud scan service. The logic part of the cloud scan service is the function of the scan application except for a user interface UI function in the configuration of . The user interface function mainly refers to the function of generating and providing a Web UI Web page . Accordingly in the configuration of the main function of the scan application is related to the user interface function as a result of using the scan logic part

The print logic part executes a logic part of the cloud print service. The logic part of the cloud print service is the function of the print application except for a user interface function in the configuration of . Accordingly in the configuration of the main function of the print application is related to the user interface function as a result of using the print logic part

The provision of the domain specific service layer L and the provision of the domain specific API make it possible to reduce the amount of source codes to be implemented when other cloud services or the like cooperate with apparatus cooperation services for example. That is a single function or method hereinafter collectively referred to as method of the domain specific API provides a function close to a server application by calling multiple methods of the platform API . Accordingly the domain specific API is effective in such a case where early cooperation with a service is desired although the service is ready made. Furthermore a server application having multiple functions may be implemented using the domain specific API .

On the other hand in the case where it is desired to implement a unique server application it is preferable to use the platform API .

The front end segment g is the forefront segment to the network N. A firewall FW is provided between the front end segment g and the network N.

The connecting segment g is a segment for connecting the front end segment g to the application segment g the common service segment g the database segment g and the management segment g via a firewall FW. Gateways such as an Internet gateway an operation gateway and a management gateway are connected to the connecting segment g. In this embodiment gateways are apparatuses that balance a load of processing with respect to an external message and determine whether to allow passage of a message. Firewalls FW also determine whether to allow passage of a message. The difference however lies in that while firewalls FW monitor the TCP IP layers gateways monitor the HTTP layer which is a layer higher than the TCP IP layer. For example firewalls FW determine whether to allow passage of a packet based on the IP address of at least one of the source and the destination of the packet and a port number. On the other hand gateways determine whether to allow passage of a message based on for example the uniform resource locator URL of at least one of the source and the destination of the message.

The Internet gateway is a gateway that processes messages via the network N. Accordingly messages via the network N are first received by the Internet gateway .

The operation gateway is a gateway that processes messages from the operation segment g. The operation segment g corresponds to part of the intra WAN of the operator operating enterprise of the cloud service system . The other segments g through g also constitute the intra WAN. Accordingly for example when a developer or the like of software related to the cloud service system tests or uses a server application using a computer connected to the operation segment g a message from the computer is received by the operation gateway via the intra WAN without going through the network N.

The application segment g is a segment corresponding to the application layer L and the domain specific service layer L in . An application gateway an application server and a domain specific server are connected to the application segment g.

The application gateway is a gateway that processes messages to the application segment g. The application server is a computer that implements the application layer L. That is a server application is implemented in the application server . Referring to two housings are graphically represented with respect to the application server . This indicates that the application server has a redundant configuration. The same is the case with other servers. A redundant configuration may also be adopted for a server for which only one housing is graphically represented.

The domain specific server is a computer that implements the domain specific service layer L. Accordingly the domain specific API is provided by the domain specific server . Furthermore one or more programs that cause a computer to operate as the scan logic part and the print logic part are installed in the domain specific server .

In the case where a third party vendor different from the operator of the cloud service system implements a server application for example the application segment g may be divided into a segment under the management of the operator and a segment available to the third party vendor.

The common service segment g is a segment corresponding to the common service layer L. That is the platform API is provided by a group of computers connected to the common service segment g. The platform API and the domain specific API are called via a network. For example representational state transfer REST may be used in implementing an API via a network. Alternatively the platform API and the domain specific API may be implemented using other communication protocols.

A common service gateway a log collection server a management server a queue server an image transmission server and an image conversion server are connected to the common service segment g. The common service gateway is a gateway that processes messages to the common service segment g. The log collection server is a computer that operates as the log collection part . That is a program that causes a computer to operate as the log collection part is installed in the log collection server . The management server is a computer that operates as the authentication part the organization management part the user management part the apparatus management part and the license management part . That is one or more programs that cause a computer to operate as the authentication part the organization management part the user management part the apparatus management part and the license management part are installed in the management server . The parts through implemented by the management server may be implemented by different computers respectively.

The queue server is a computer that operates as the message queue . That is a program that causes a computer to operate as the message queue is installed in the queue server . The image transmission server is a computer that operates as the image transmission part which is one of the workers . That is a program that causes a computer to operate as the image transmission part is installed in the image transmission server . The image conversion server is a computer that operates as the image conversion part which is one of the workers . That is a program that causes a computer to operate as the image conversion part is installed in the image conversion server .

The queue server the image transmission server and the image conversion server constitute the image processing control part

The database segment g is a segment corresponding to the database layer L of . A database gateway a log information storage server a temporary image storage server a management information storage server and an application information storage server are connected to the database segment g.

The database gateway is a gateway that processes messages to the database segment g. The log information storage server is a computer that operates as the log information storage part . The temporary image storage server is a computer that operates as the temporary image management part and the temporary image storage part . The management information storage server is a computer that operates as the organization information storage part the user information storage part the license information storage part the apparatus information storage part and the job information storage part . The application information storage server is a computer that operates as the application information storage part . In the computers in the database segment g programs for example database management system DBMS s that cause the computers to operate as the corresponding storage parts are installed.

The management segment g is a segment corresponding to the management layer L. A monitoring server an account management server a deployment server a login management server a backup server a temporary storage and an accumulation storage are connected to the management segment g.

The monitoring server is a computer that operates as the monitoring part . That is a program that causes a computer to operate as the monitoring part is installed in the monitoring server . The account management server is a computer that operates as the account management part . That is a program that causes a computer to operate as the account management part is installed in the account management server . The deployment server is a computer that operates as the deployment part . That is a program that causes a computer to operate as the deployment part is installed in the deployment server . The login management server is a computer that operates as the login management part . That is a program that causes a computer to operate as the login management part is installed in the login management server .

The backup server is a computer that operates as the backup part . That is a program that causes a computer to operate as the backup part is installed in the backup server .

The temporary storage is a storage device that temporarily stores a duplicate copy backup file of a file to be backed up in each of the servers connected to the application segment g the common service segment g or the database segment g. Specifically the temporary storage stores a backup file of a file in the latest condition version in each server at the time of executing the last backup process. That is the temporary storage may be said to store a snapshot of a file to be backed up at some point in time.

The accumulation storage is a storage device that stores backup files for generations. For example the backup server stores backup files stored in the temporary storage in the accumulation storage with predetermined timing. At this point new backup files are stored separately from the backup files that have been stored in the accumulation storage before. That is in the accumulation storage backup files of the same file are stored separately in accordance with the time period of their storage in the temporary storage . As a result the generations of backup files are managed by the accumulation storage . Each of the temporary storage and the accumulation storage may be implemented using for example a network attached storage NAS .

The operation segment g is a segment corresponding to the operation layer L of . An information management server and a development server are connected to the operation segment g. The information management server is a computer that operates as the customer information management part the contract management part the sales management part and the license management part . That is one or more programs that cause a computer to operate as these parts through are installed in the information management server . The development server is a computer that operates as the development environment provision part . That is a program that causes a computer to operate as the development environment provision part is installed in the development server .

The license management part in the information management server copies license information stored in the information management server to the license management part in the management server of the common service segment g. A message for this copy is transmitted to the license management part via the management gateway . That is the management gateway is used for the license management part to copy license information to the license management part . The license information is information of extremely high confidentiality. Therefore the management gateway that restricts messages with higher security is used in copying the license information.

Furthermore in a network group n which starts at the connecting segment g and ends at the management segment g is a network group that is used to transmit messages received in the gateways through in the connecting segment g perform communications according to the messages and perform communications for the monitoring of servers by the monitoring server . The network group n is a group of networks each connecting corresponding two of the segments between the connecting segment g and the management segment g. That is the segments are connected by independent networks each connecting corresponding two of the segments. A firewall FW not graphically represented is provided in each of the inter segment networks. Accordingly high security is ensured for inter segment communications as well.

The network group n does not reach the operation segment g in order to prevent access to the operation segment g intra WAN from outside the intra WAN of the operator of the cloud service system .

Furthermore a network group n which starts at the operation segment g and ends at the application segment g is a network group used to access the segments from the operation segment g for operation purposes. The network group n is a group of networks each connecting corresponding two of the segments between the operation segment g and the application segment g. A firewall FW not graphically represented is provided in each of the inter segment networks.

As illustrated in the network of the cloud service system is divided into segments corresponding to the layers in the functional configuration of . The layers are classified by functional or obligational commonality. Furthermore the calling relationship between parts over layers has commonality layer by layer. Accordingly with respect to firewalls FW whether to allow passage of a message may be set not server by server but segment by segment. If there is an exceptional server settings may be configured with respect to the exceptional server.

For example is a diagram illustrating communications allowed by a firewall. illustrates the contents of an allowed communication such as a communication protocol or a communication purpose with respect to each combination of a communication source segment and a communication destination segment. In SSH Secure Shell is a communication protocol used for authentication. Furthermore INTERNET corresponds to the network N in this embodiment.

According to communications from the Internet are allowed with respect to the application segment g and are not allowed with respect to other segments. Exceptionally however communications regarding an authentication request are allowed with respect to the common service segment g.

Furthermore communications from the application segment g to the common service segment and the database segment g are allowed. The communications from the application segment g to the common service segment g include calling the platform API and transferring a log to the log collection server . The communications from the application segment g to the database segment g are mainly communications for accessing the application information storage server .

Furthermore communications from the common service segment g to the Internet the application segment g and the database segment g are allowed. As described below the communications from the common service segment g to the Internet are required in the case of storing image data in an external storage such as a storage service. The communications from the common service segment g to the application segment g are mainly communications for transmitting a response to a processing request registered with the queue server . That is because the response is made asynchronously with the processing request is called back the communications from the common service segment g to the application segment g need to be allowed. The communications from the common service segment g to the database segment g are communications for accessing the storage parts in the database layer L from the common service layer L.

Communications from the management segment g to the application segment g the common service segment g and the database segment g are allowed.

Communications from the operation segment g to the application segment g the common service segment g and the management segment g are allowed.

Basically communications from any segment to the operation segment g are prevented. Exceptionally however communications from the license management part in the management server of the common service segment g to the license management part of the information management server of the operation segment g are allowed.

Furthermore is a diagram for illustrating control of communications by each gateway. illustrates with respect to each URL path a destination to which each gateway transfers when receiving a message related to a URL including the path the received message. In hyphen indicates that passage of a message related to the corresponding URL is prevented. Furthermore 1 indicates that an HTTPS Hypertext Transfer Protocol Security communication of an SSL server certificate is accepted in addition to HTTP communications. Furthermore 2 indicates that a communication of an SSL client certificate is accepted. In some URL paths are omitted. For example portal indicates portal and other URLs that start with portal . The same applies to other URLs.

For example messages having a URL path portal may be received by the Internet gateway the operation gateway and the application gateway . These gateways and transfer the messages to the application server . The messages basically relate to requests to obtain a Web UI Web page .

Messages having a URL path scan or print may be received by the Internet gateway the operation gateway and the application gateway . These gateways and transfer the messages to the domain specific server . Specifically scan corresponds to the scan logic part and print corresponds to the print logic part

Messages having a URL path auth may be received by the Internet gateway the operation gateway the management gateway and the common service gateway . These gateways and transfer the messages to the authentication part of the management server . The messages relate to authentication requests.

Messages having a URL path openam may be received by the common service gateway . The common service gateway transfers the messages to the authentication part of the management server .

Messages having a URL path riflex may be received by the common service gateway . The common service gateway transfers the messages to the queue server .

Messages having a URL path accountex may be received by the common service gateway . The common service gateway transfers the messages the authentication part of the management server .

Messages having a URL path synconv may be received by the database gateway . The database gateway transfers the messages to the temporary image storage server .

Messages having a URL path lm may be received by the management gateway . The management gateway transfers the messages to the authentication part of the management server . The messages relate to authentication requests from the license management part of the information management server .

Messages having a URL path logviewer may be received by the operation gateway . The operation gateway transfers the messages to the log collection server . The messages relate to requests to obtain a log at the time of viewing logs. The viewing of logs is authorized in the operation layer L. That is users of the apparatus usage environment are not authorized to view logs. Accordingly the Internet gateway is prevented inhibited from receiving these messages.

Referring back to to each of the segments g through g computers corresponding to the functional parts in a layer in corresponding to the segment are connected. By thus installing computers unit by unit with respect to the units classified by functional commonality it is possible to flexibly address unbalanced loads on functions. That is the frequency of use and the load may differ from function to function. When loads on functions are not balanced it is possible to easily level loads on servers by adding one or more computers corresponding to a functional part whose frequency of use or load is high. Specifically for example if a load on an image processing server is extremely high so that processing by the image processing server has become a bottleneck it is possible to reduce the load by adding a computer to the computer s of the image processing server.

In view of facilitating the addition of a computer scaling out the computers gateways and firewalls FW illustrated in may be implemented by virtual machines. In this case each segment also is virtualized.

Furthermore according to this embodiment a segment that requires higher security is located at a position more distant from the network N such as the Internet. Specifically the database segment g which corresponds to the database layer L in which information specific to users and should not be leaked such as log information organization information user information license information apparatus information and temporary images is stored is located deeper than the application segment g and the common service segment g. As a result it is possible to ensure high security with respect to the above described information.

Next a description is given of hardware configurations of computers. is a diagram illustrating a hardware configuration of each of computers of a cloud service system according to an embodiment of the present invention. Each computer includes a drive unit a secondary storage device a memory device a central processing unit CPU and an interface unit all of which are interconnected by a bus B.

A program that implements processing in each computer is provided by a recording medium such as a CD ROM. When the recording medium containing a program is loaded into the drive unit the program is installed into the secondary storage device from the recording medium via the drive unit . The program however does not necessarily have to be installed from the recording medium and may be downloaded from another computer via a network. The secondary storage device stores the installed program and stores files and data.

The memory device reads a program from the secondary storage device and stores the program in response to a command to activate the program. The CPU executes functions pertaining to the computer in accordance with the program stored in the memory device . The interface unit is used as an interface for connecting to a network.

A description is given below of a procedure for a file backup process executed by each server in the cloud service system . In the following description a simple statement of server or servers refers to a server or servers connected to the application segment g the common service segment g or the database segment g.

First an outline of the file backup process is given. is a diagram for giving an outline of the file backup process.

For example at steps S through S N each server periodically for example once a day stores in the temporary storage a duplicate copy of a file to be backed up among the files stored in the server. For example a file of each server is copied while retaining the original pathname directory configuration under a directory whose directory name is the identification information of the server for example a host name . As a result the latest backups of files of servers are stored separately server by server in the temporary storage .

Next at step S the backup server transfers the duplicate copies of the backup files stored in the temporary storage to the accumulation storage . At this point new backup files are stored separately from the backup files that have been stored in the accumulation storage before. As a result the generations of backup files are managed by the accumulation storage . In generations are separately shown by rectangles defined by broken lines. Alternatively generations may be separated by for example creating directories each having as a directory name a date or date and time at which backup files are transferred to the accumulation storage and storing the backup files of each generation in one of the directories corresponding to the generation.

It is desirable that step S be executed in the same cycle as steps S through S N. For example step S may be executed after passage of a predetermined time since the execution of steps S through S N in order to ensure that the backup files of each generation are copied to the accumulation storage . That is for example if step S is executed once after steps S through S N are executed twice the backup files of the first time are lost. In order to avoid such a situation it is desirable that step S be executed in the same cycle as steps S through S N.

A more detailed description is given below of each of the process of backing up files to the temporary storage by servers S through S N and the process of transferring backup files from the temporary storage to the accumulation storage step S .

At step S the CPU of each server waits for a backup time to come. Information indicating the backup time may be stored in the secondary storage device of each server. When detecting determining that the backup time has come YES at step S the CPU of each server mounts a directory whose directory name is the host name of the server in the file system of the temporary storage for example. This mounting makes a backup area under the directory operable from the server that has mounted the directory. The sharing of a file system via a network may be achieved using NFS Network File System or CIFS Common Internet File System .

Next at step S the CPU of each server copies all or some of files to be backed up to the backup area under the directory of the mounting destination. At this point each file is copied with its pathname being retained. A list of the pathnames of files to be backed up may be stored in the secondary storage device in each server. The CPU of each server may specify files to be backed up by referring to the list.

As a result of the execution of step S the stored contents of the temporary storage are as illustrated in . That is the files to be backed up of each server are stored under the directory backup area of the server. In the case where the backup area of each server is cleared deleted every time backing up is executed files to be backed up may be simply copied. On the other hand in the case where the backup area of each server is not cleared the backup files copied at a previous backup time may be replaced with the backup files of a current backup time. At this point the server may delete files that exist in the backup area but no longer exist in the server from the backup area.

At step S when the copying of files to be backed up is completed the CPU of each server unmounts the directory corresponding to the server in the temporary storage . As a result the backup area under the directory is made inoperable.

Thus the temporary storage is mounted only for a period during which a backup process is executed. Specifically mounting is performed prior to the storage of files in the temporary storage and unmounting is performed after completion of the storage. As a result the state where the temporary storage is operable from the CPU of each server is limited to a short period of time. Accordingly even if a malicious person breaks into any of the servers it is possible to reduce the possibility that the malicious person accesses the temporary storage using the server as a springboard. That is it is possible to improve security with respect to the backup files stored in the temporary storage .

Next a detailed description is given of the process of transferring backup files from the temporary storage to the accumulation storage . is a flowchart for illustrating a procedure for a process of transferring backup files from a temporary storage to an accumulation storage.

At step S the backup server waits for a time to transfer backup files from the temporary storage to the accumulation storage a transfer time to come. The transfer time may be for example the time at which a predetermined time has passed since the backup time at step S in . Furthermore information indicating the transfer time may be stored in the secondary storage device of the backup server .

When detecting determining that the transfer time has come YES at step S at step S the backup server generates a backup area for storing the backup files of a new generation in the accumulation storage . For example a directory whose directory name is the date or date and time of a current transfer is generated in the accumulation storage as a backup area for the new generation.

Next at step S the backup server transfers copies the backup files stored in the temporary storage to the backup area corresponding to the new generation in the accumulation storage . As a result the stored contents of the accumulation storage are for example as illustrated in .

For example in the case where the number of generations to be managed is finite for example five generations and the generation transferred at step S is the 5n 1 where n is an integer greater than or equal to one generation a directory name corresponding to the backup area of the oldest generation may be updated to the date or date and time of a current transfer. In this case at step S the backup files stored in the temporary storage may be overwritten on the backup area. At this point files that do not exist in the temporary storage but exit in the backup area may be deleted.

Thus the files of each server periodically backed up to the temporary storage have their generations managed in the accumulation storage . Accordingly for example even if a malicious person intrudes any of the servers and alters any of the log files in order to erase the trace of the intrusion it is possible to increase the possibility of detecting the alteration of the log file and the intrusion by the malicious person by analyzing the inter generation difference of the log file.

Backup files may be compressed converted into an archive file at the time of their backing up to the temporary storage or at the time of their transfer to the accumulation storage . This makes it possible to reduce consumption of the storage capacity of the temporary storage or the accumulation storage .

Furthermore each server may store different files in the temporary storage in different cycles. For example in each server important files may be backed up once in several minutes or the like and other files may be backed up at once a day or the like.

In this case a list of files to be backed up may be stored frequency by frequency or cycle by cycle in each server. For example a file containing a list of the pathnames of files that are backed up every minute hereinafter referred to as first configuration file and a file containing a list of the pathnames of files that are backed up every day hereinafter referred to as second configuration file are prepared. Each server refers to the first configuration file and executes the process illustrated in every minute. Furthermore each server refers to the second configuration file and executes the process illustrated in every day.

The backup server may execute the process illustrated in in a cycle corresponding to the highest frequency for example every minute . Alternatively information indicating the frequency or cycle of backing up may be stored server by server and file by file in the secondary storage device of the backup server . In this case the backup server may execute the process of file by file in a cycle corresponding to the file.

Furthermore a configuration where the temporary storage and the accumulation storage are not distinguished may be employed. For example each server may store files generation by generation in the accumulation storage . In this case however although temporarily it is possible to access the accumulation storage from each server. As a result although temporarily a malicious person may access the accumulation storage using each server as a springboard. On the other hand by separating the temporary storage and the accumulation storage to prevent the accumulation storage from being operated from each server as in the above described embodiments it is possible to ensure higher security with respect to the backup files stored in the accumulation storage .

Furthermore according to the above described embodiments all the histories generations of configuration information and logs in multiple servers are gathered in the accumulation storage . Accordingly it is possible for a manager who needs these configuration information and logs to easily obtain necessary information by referring to the stored contents of the accumulation storage . That is in the case where each server stores the history of configuration information and logs a manager is required to access each server. According to the above described embodiments however it is possible to reduce such a workload.

Furthermore by storing backups and managing their generations in the accumulation storage with respect to not only logs but also configuration information it is possible to increase the possibility of easily recovering the configuration information of a server even if the configuration information is mistakenly deleted.

In the above described embodiments the cloud service system is an example of an information processing system. The temporary storage is an example of a first storage part. The accumulation storage is an example of a second storage part. The backup server or the backup part is an example of a transfer part. The database segment g is an example of a first segment. The common service segment g is an example of a second segment. The application segment g is an example of a third segment. The CPU is an example of a control part.

All examples and conditional language provided herein are intended for pedagogical purposes of aiding the reader in understanding the invention and the concepts contributed by the inventors to further the art and are not to be construed as limitations to such specifically recited examples and conditions nor does the organization of such examples in the specification relate to a showing of the superiority or inferiority of the invention. Although one or more embodiments of the present invention have been described in detail it should be understood that the various changes substitutions and alterations could be made hereto without departing from the spirit and scope of the invention.

