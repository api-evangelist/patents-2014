---

title: Injecting active periods into scheduled inactive periods
abstract: A processing device determines a usage schedule for a mobile device based on one or more first criteria, the usage schedule comprising a scheduled active period of the mobile device and a scheduled inactive period of the mobile device. The processing device identifies an additional active period for the mobile device that is based on one or more second criteria. The processing device causes the mobile device to transition into a low power state during the scheduled inactive period and to transition out of the low power state during the additional active period prior to the scheduled active period, wherein the mobile device will perform a scheduled operation during the additional active period and prior to the scheduled active period.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09319993&OS=09319993&RS=09319993
owner: Amazon Technologies, Inc.
number: 09319993
owner_city: Reno
owner_country: US
publication_date: 20140530
---
Battery life is an important issue for mobile devices. Even when a mobile device is idle or in a low power mode e.g. suspended hardware components of the mobile device consume power. Moreover while hardware components are enabled any application may wake up the mobile device and use those hardware components. Such activity may be performed even if the mobile device is not actively being used by a user. Each time the mobile device is woken up and or a hardware component is used additional power is consumed. Accordingly a battery of a mobile device may be unnecessarily used to power modules without any interaction from a user. Hence a user may be forced to charge the mobile device with increased frequency.

Mobile devices have batteries with a finite amount of available power. Each hardware component of a mobile device consumes some amount of power when it is under power even when the mobile device is in a suspended state. Thus any hardware component that is not shut off or deactivated will have some impact on battery life. Furthermore many applications will periodically wake up the mobile device to use hardware components such as a wireless e.g. Wi Fi radio or global positioning system GPS receiver. For example social network applications and email applications may periodically wake up the mobile device to check for updated information. However such wake up events are frequently not associated with user activity and may be immaterial to a user experience.

Embodiments described herein provide a device state manager and or service that determines a usage schedule for a mobile device based on monitored activity. The usage schedule includes scheduled active periods in which the mobile device remains in a standard suspended state while not in use. The usage schedule further includes inactive periods in which the mobile device is placed into a low power state. While the mobile device is in the low power state one or more power consuming hardware components are disabled e.g. placed into a reduced power state or powered off . Additionally operations such as alarm wake ups may be restricted and or components such as a processing device may be throttled. Since the usage schedule is determined based on monitored activity for the mobile device user impact is minimal. For example it may be determined that a user uses the mobile device only between 7 00 PM and 10 00 PM every day. Accordingly the usage schedule may identify active periods of 7 00 PM 10 00 PM every day and inactive periods of 12 00 AM 7 00 PM and 10 00 PM 12 00 AM every day. During the inactive periods power hungry components such as a Wi Fi module and a wireless area network WAN module may be shut off.

Further embodiments herein provide a device state manager and or service that determines additional active periods to inject into the usage schedule. To determine an additional active period the device state manger and or service predict data that would be sent to the mobile device if the mobile device were not in a low power state e.g. if a Wi Fi module of the mobile device were not disabled . The device state manager may then determine a timing for an additional active period that will be sufficient to enable the mobile device to complete transfer of the predicted data prior to a scheduled active period. The determined additional active period may then be injected into the usage schedule. Injection of the additional active period into the usage schedule ensures that all data such as application updates new content from subscriptions and so forth is available for use or consumption when a next scheduled active period begins. Thus battery life of the mobile device may be lengthened without impacting a user experience.

The mobile device may include any type of mobile computing device that has a finite power source e.g. that is powered by a battery . Examples of mobile devices include electronic book readers portable digital assistants mobile phones laptop computers portable media players tablet computers cameras video cameras netbooks notebooks portable gaming consoles portable media players e.g. portable music players portable video players etc. wearable devices e.g. watches fitness monitors Google Glass etc. and the like.

The mobile device may be configured with functionality to enable consumption of one or more types of media items. The media items may be any type of format of digital content including for example electronic texts e.g. eBooks electronic magazines digital newspapers etc. digital audio e.g. music audible books etc. digital video e.g. movies television short clips etc. images e.g. art photographs etc. and multi media content.

The mobile device includes a wireless communication module that sends and receives information to wireless communication systems . The wireless communication module may be a wireless network interface controller WNIC or a wireless modem. Examples of WNICs include a Wi Fi network interface controller NIC a Bluetooth NIC and a Zigbee NIC. Examples of wireless modems include second generation of mobile communications technology 2G wireless modems third generation of mobile communications technology 3G wireless modems and fourth generation of mobile communications technology 4G wireless modems as well as multi mode wireless modems that can communicate using some or all of 2G 3G and or 4G telecommunications protocols. In one embodiment the wireless communication module and the processing device of the mobile device are two logics of a single integrated circuit. Alternatively the wireless communication module and the processing device may be discreet devices.

The server system and the mobile device deliver and or receive media items applications upgrades and or other information via the network . For example the mobile device may download or receive data from the server system . The server system also receives various requests instructions and other data from the mobile device via the network . The server system may include one or more machines e.g. one or more server computer systems routers gateways etc. that have processing and storage capabilities to provide the above functionality.

Communication between the server system and the mobile device may be enabled via any communication infrastructure. One example of such an infrastructure includes a combination of a wide area network WAN and wireless infrastructure which allows a user to use the mobile device to purchase items and consume items without being tethered to the server system via hardwired links. The wireless infrastructure may be provided by one or multiple wireless communications systems such as wireless communications system and wireless communication system . One of the wireless communication systems may be a Wi Fi access point connected with the network . Another of the wireless communication systems may be a wireless carrier system that can be implemented using various data processing equipment communication towers etc. Alternatively or in addition the wireless carrier system may rely on satellite technology to exchange information with the mobile device .

The communication infrastructure may also include a communication enabling system that serves as an intermediary in passing information between the server system and the wireless communication system . The communication enabling system may communicate with the wireless communication system e.g. a wireless carrier via a dedicated channel and may communicate with the server system via a non dedicated communication mechanism e.g. a public Wide Area Network WAN such as the Internet.

In one embodiment server system acts as an intermediary between server system and mobile device . An application installed on mobile device may initiate a connection with server system . While the connection is active server system may send data in network packets to server system and server system may forward these network packets to mobile device . Similarly the mobile device may send network packets to server system and server system may forward the network packets to server system . In alternative network configurations the mobile device may connect to server system directly without using server system as an intermediary or proxy.

The mobile device may be capable of receiving and executing applications that may perform various functions. Applications may be developed by an entity affiliated with the mobile device e.g. a manufacturer of the mobile device and or by third parties. For example applications provided by social network services game developers news providers and so forth may be installed on the mobile device. Each of the applications that are installed on the mobile device may use application programming interfaces APIs provided by the mobile device for waking up the mobile device communicating with remote computing devices e.g. server systems and or performing other operations.

Mobile device includes among other physical and logical modules a device state manager and a wireless communication module . The device state manager uses a usage schedule to determine what state to place the mobile device in at any given time. In one embodiment the device state manager applies one of two states to the mobile device at any given time. The two states may include a standard operating state and a low power state. While in the standard operating state the mobile device may be fully active e.g. with a display powered on a processing device executing instructions etc. or suspended e.g. with a display powered off a processing device and other hardware modules in reduced power consumption modes etc. . While the mobile device is in the low power state one or more components e.g. the wireless communication module are disabled or throttled. In one embodiment some of the components are completely powered off. Alternatively the components may be placed into a reduced power stated in which one or more modules within the components may be powered off and or in which the components are unable to perform all of their standard functionality.

For the sake of clarity as used herein the terms suspended and low power state refer to separate and distinct states of the mobile device. The suspended state refers to a state in which the mobile device is unused but ready for use at a moment s notice. While the mobile device is in the standard suspended state components such as a Wi Fi module or wireless modem are typically powered on unless a user has expressly disabled these components. Accordingly when a user begins using the mobile device that is initially in the suspended state the Wi Fi module for example may already have an established wireless connection to a Wi Fi hotspot. However one or more of these components is disabled during the low power state. If a user begins using the mobile device while the device is in the low power state the unpowered or underpowered components may be reactivated and may then perform initial operations such as connecting to a Wi Fi access point. Accordingly the low power state in general consumes less power than the suspended state but it takes more time to transition out of the low power state than out of a standard suspended state.

In some embodiments the mobile device may be in the low power state while suspended e.g. to result in a low power suspended state and may also be in the low power state while active e.g. to result in a low powered active state . The term waking up a mobile device as used herein means causing a component of the mobile device to transition from a suspended state to a fully active state. In some embodiments the mobile device may be woken up by an application in while remaining in the low power state e.g. the mobile device may be woken up by an application during a scheduled inactive period . Waking up the mobile device may not transition the mobile device out of the low power state unless the wake up is based on detected user activity. For example if an application wakes up the mobile device without user input then the mobile device may stay in the low power state while active.

The usage schedule may be generated based on device usage patterns learned from activity information gathered by the mobile device . The usage schedule may include scheduled active periods for the mobile device and scheduled inactive periods for the mobile device. The scheduled active periods correspond to periods during which the mobile device is predicted to be used and the scheduled inactive periods correspond to time periods during which the mobile device is predicted to be unused.

In one embodiment the time periods during which the mobile device is predicted to be used and unused are determined by computing a probabilities of usage at particular time periods based on determined usage patterns. One or more probability thresholds may then be applied. If during a given time period the probability of usage is above a threshold probability then it is predicted that the mobile device will be used. If during a given time period the probability of usage is below the threshold probability then it is predicted that the mobile device will be unused.

In one embodiment the predicted use is predicted usage by a user e.g. predicted user interaction in which a user may view a display provide input listen to audio play a game etc. . In another embodiment the predicted use is automated use that does not involve user interaction. Such predicted automated use may include the device performing automatic operations such as communicating with a server or backend taking sensor readings performing additional operations locally on the device and so on. Thus the scheduled active periods are time periods during which particular functionality such as a network connection are predicted to be used by the device based on prior usage. By contrast the scheduled inactive periods are time periods during which the particular functionality is predicted to be unused. The device state manager may transition the mobile device into the low power state during the scheduled inactive periods and may transition the mobile device out of the low power state during the scheduled active periods. This may ensure that a battery of the mobile device is not unnecessarily drained by components that will most likely be unused during scheduled inactive periods.

Applications an operating system syndications content sources that a user subscribes to etc. may periodically send data such as new content updates and so forth to the mobile device . However the mobile device may be unable to receive such data or perform other scheduled operations while it is in the low power state during the scheduled inactive periods. Accordingly in one embodiment the device state manager injects additional previously unscheduled active periods into the usage schedule to cause the mobile device to transition out of the low power state and receive such data or perform one or more scheduled operations before a next scheduled active period. Thus the mobile device may be ready for use by the time the next scheduled active period occurs. Scheduled operations may include scheduled updates scheduled synchronization operations scheduled downloads scheduled data transmissions scheduled backup operations and so forth. Any other scheduled operations may be also be identified.

In one embodiment device state manager determines the usage schedule and the additional active periods to inject into the usage schedule . Alternatively or additionally device state manager may rely on a device state service running on server system to determine the usage schedule and or the additional active periods. For example device state manager may send gathered activity information to server system and device state service may use the activity information to determine the usage schedule. The device state service may have access to greater information and or processing resources than the mobile device and may apply more complex machine learning algorithms than the device state manager to determine the usage schedule. The device state service may then send the usage schedule to the mobile device or may send individual instructions instructing the mobile device when to enter into or out of the low power state according to the determined usage schedule.

Device state service may collect additional information from server systems and computing devices where the additional information may not originate from the mobile device . For example a user of mobile device may have a user account with the server system . That user account may be associated with the mobile device . However the user may also perform activity associated with that user account from other computing devices which may be other mobile devices or stationary devices e.g. desktop computers smart televisions home entertainment systems etc. . Device state service may gather such additional information and use it for the computation of the usage schedule and or for the computation of additional active periods. Additionally the device state manager may have access to information such as scheduled or unscheduled updates scheduled or unscheduled synchronization events and so forth. Device state service may additionally use such information for the computation of the usage schedule and or the additional active periods. Device state service may send an instruction to the mobile device to inject an additional active period into the usage schedule whether the usage schedule was determined by the mobile state manager or the device state service .

Most processes operate at the application layer . Applications that run at the application layer may include standard applications that are automatically included in the mobile device and additional applications which may be third party applications and or other applications that are not pre installed on the mobile device . Examples of applications or apps include a social network application e.g. a Facebook app a Google app a LinkedIn app etc. an electronic mail email application e.g. a Yahoo Mail app a Gmail app an OS X mail app etc. a calendar application games a newsreader application and so on.

The mobile device includes a device state manager which may include components at one or more of the framework layer and application layer . In the illustrated embodiment the device state manager includes a framework module at the framework layer and an application module at the application layer .

In one embodiment framework module is a low level daemon that may interact with drivers and other processes running at the framework layer and or application layer . Framework module may include an activity monitor a state selector a usage schedule determiner and a server interaction module . Framework module may also include or have access to a usage schedule .

Activity monitor gathers activity information about the mobile device . The activity information indicates when a user actively uses the mobile device . Accordingly activity information may be any metric that reflects how much and or how often the mobile device is actually being used by a user. Activity monitor monitors and logs events indicative of such user interaction. In one embodiment activity monitor identifies and logs time periods during which a display of the mobile device is active. Activity monitor may also identify and log time periods during which the mobile device is subject to a wake lock. In the aggregate the times during which wake locks are in place and the times during which the display is active should represent all time periods during which a user is using the mobile device .

In one embodiment usage schedule determiner uses the gathered activity information to determine the usage schedule for the mobile device . Usage schedule determiner may apply one or more machine learning techniques or algorithms to generate the usage schedule. Any type of machine learning technique may be used. Some examples of possible machine learning techniques include a support vector machine SVM a K nearest neighbors algorithm linear discriminant analysis quadratic discriminant analysis neural networks and so on. The gathered activity information is used as an input for the machine learning algorithm and the usage schedule that includes scheduled active periods and scheduled inactive periods may be a generated output. The criteria for determining the scheduled active periods and the scheduled inactive periods may depend on the specific machine learning technique used. However regardless of the machine learning technique that is applied the criteria for scheduled active periods and for scheduled inactive periods will be based on when a user uses the mobile device.

In one embodiment the usage schedule determiner applies a custom K nearest neighbors algorithm to determine the usage schedule . Usage schedule determiner may first partition time into individual days and determine activity patterns for each day. To determine a usage schedule for a particular day usage schedule determiner then computes a distance between the particular day and other days. For days having a computed distance that is less than a threshold these days will be taken into consideration for the determination of the particular day s usage schedule. For example the data from days with similar usage patterns may be aggregated with the data for the particular day with or without application of a weighting factor. For example usage schedule determiner may determine that the usage patterns for one or more Mondays Tuesdays and Wednesdays are similar but not exactly alike. Accordingly usage schedule determiner may take into account the activity information of one or more Mondays Tuesdays and Wednesdays when computing the usage schedule for a particular Monday.

In one embodiment usage schedule determiner computes probabilities of usage at particular time periods using the machine learning algorithm. One or more probability thresholds may then be determined using the machine learning algorithm and then applied. Alternatively the probability thresholds may be set by a user. If the probability of usage is above a threshold probability for a given time period then a scheduled active period may be determined for that time period. If the probability of usage is below the threshold probability for a given time period then a scheduled inactive period may be determined for that time period.

The usage schedule may be a data structure such as a table a database a spreadsheet or other data structure containing information identifying scheduled active periods and scheduled inactive periods. As mentioned previously the scheduled active periods correspond to time periods during which there is a high probability that the mobile device will be used by a user. The scheduled inactive periods correspond to time periods during which there is a low probability that the user device will be used. In one embodiment the usage schedule determiner periodically stores the usage schedule to non volatile storage so that it can be used on subsequent boot ups.

In one embodiment usage schedule determiner applies a minimum time period for scheduled inactive periods. In such an embodiment no scheduled inactive period would have a time period that is shorter than the minimum time period. If a scheduled inactive period would have a time period that is less than the minimum time period then that period of time may be included in an adjacent scheduled active time period. This may ensure that the mobile device does not toggle frequently into and out of the low power state. For example the minimum scheduled inactive period may be 1 hour 2 hours 30 minutes or another amount of time.

State selector selects a current state to apply to the mobile device. State selector may be configured to select whether to apply a low power state or a standard state based on the usage schedule . For example state selector may be configured to transition the mobile device to a low power state during scheduled inactive periods and to transition the mobile device out of the low power state during scheduled and additional active periods. While the mobile device is in the low power state one or more components may be powered off disabled and or throttled. For example wireless communication modules GPS receivers and other components that consume large amounts of power may be powered off. Additionally components such as a processing device may be throttled to reduce power consumption. Operations that consume large amounts of power such as wake up alarms may also be restricted.

In one embodiment drivers for such components monitor the present state of the mobile device and power off their associated hardware components responsive to determining that the mobile device is in a low power state. For example a Wi Fi module driver may power off a Wi Fi module responsive to the mobile device entering the low power state. Alternatively the state selector may determine which components should be shut off and instruct the appropriate drivers to power down those components.

When the state selector places the mobile device into the low power state the state selector may call on the wake up scheduler to schedule a wake up alarm at a future time corresponding to the start of a scheduled active period. Wake up scheduler may insert a wake up alarm entry onto an alarm wake up schedule for the device state manager . When the scheduled time arrives the alarm wake up may cause the mobile device to wake up at which time the state selector may transition the mobile device out of the low power state.

In one embodiment all wireless communication modules e.g. Wi Fi module wireless modem wireless area network WAN module etc. may be disabled while the mobile device is in the low power state. Accordingly there may be no network connectivity while the mobile device is in the low power state. Many applications frequently or periodically wake up the mobile device either via alarm wake ups or via network wake ups in which a received network packet causes the mobile device to wake up to check for new data from a remote service. However no network connections may be maintained while the mobile device is in the low power state. Accordingly applications may not schedule wake up alarms while the mobile device is in the low power state and network wake ups may not be possible while the mobile device is in the low power state. Additionally in one embodiment applications are prohibited from using wake up alarms while the mobile device is in the low power state. Thus the battery drain during the low power state may be considerably lower than a battery drain during a standard suspended state.

Though the state selector is described herein as selecting one of two states standard state or low power state it should be understood that additional states may also be implemented. For example usage schedule may include scheduled active periods scheduled inactive periods and scheduled intermediate activity periods. An intermediate power state may be applied during the intermediate activity periods and a low power state may be applied during the inactive periods. More power saving settings or options may be implemented for the low power state than for the intermediate power state. In example the usage schedule determiner may determine that a user does not use a particular component e.g. a GPS receiver of the mobile device during certain time periods and may determine a schedule for intermediate activity periods based on such a determination. During these periods state selector may transition the mobile device into the intermediate power state which may cause the GPS receiver to be powered off. The GPS receiver may or may not also be turned off during the low power state in addition to other hardware components such as a Wi Fi module.

The application module of the device state manager may include a user interface. The user interface may be a graphical user interface GUI or command line user interface. User interface may display usage level statistics patterns the usage schedule a list of components that will be shut off during scheduled inactive periods and or other information. The user interface may also enable a user to easily manually adjust the usage schedule and or which components are active or inactive during different device states. The user interface may also enable a user to manually insert one time or repeating additional active periods into the usage schedule.

In some embodiments the usage schedule determiner determines a usage schedule for the mobile device without any input from a server system. Alternatively a server interaction module of the device state manager may offload the computation of the usage schedule to a device state service running on a server system . In particular the server interaction module may send activity information of the mobile device to server system device state service may compute the usage schedule and may then send the determined usage schedule and or instructions for implementing the determined usage schedule to server interaction module .

In one embodiment device state service is a cloud service that helps mobile devices to accurately determine usage schedules and to implement those usage schedules in a manner that has minimal or no user impact other than a prolonged battery life . In one embodiment device state service includes a mobile device interaction module an information gathering module a usage schedule determiner and a data transmission predictor .

Mobile device interaction module is responsible for communicating with one or more mobile devices. Mobile device interaction module may receive activity information from mobile devices . Mobile device interaction module may additionally send one or both of usage schedules and instructions for implementing usage schedules to mobile devices. For example mobile device interaction module may send instructions to enter into a low power state at a designated time corresponding to a scheduled inactive period and may send instructions to exit the low power state at another designated time corresponding to a scheduled active period. Mobile device interaction module may also send a usage schedule to the mobile device the usage schedule constituting instructions to implement particular states during scheduled inactive and scheduled active periods. The mobile device may accordingly determine when to transition into and out of the low power state based on the provided usage schedule. The mobile device interaction module may also send instructions to inject additional active periods into the usage schedule discussed in greater detail below .

Usage schedule determiner may perform all of the operations previously discussed with reference to usage schedule determiner . However usage schedule determiner may have far greater resources available than usage schedule determiner . Accordingly usage schedule determiner may apply more complex or processor intensive machine learning algorithms to determine an appropriate usage schedule for mobile device .

In one embodiment usage schedule determiner applies multiple different machine learning algorithms to determine different versions of a usage schedule for the mobile device. Usage schedule determiner may then select and apply one of the versions of the usage schedule to the mobile device. The usage schedule determiner may monitor the accuracy of the applied version of the usage schedule e.g. by determining a hit miss ratio for the usage schedule . Usage schedule determiner may additionally monitor the accuracy of the unapplied other versions of the usage schedule. If any of the other versions turns out to be more accurate than the applied version then usage schedule determiner may switch to usage of the other more accurate usage schedule. This may cause mobile device interaction module to transmit new instructions and or the new usage schedule to the mobile device .

Usage schedule determiner may apply usage schedule determination policies of various levels of aggressiveness to determine scheduled inactive periods. A non aggressive policy may apply criteria that include low usage thresholds and or large or moderate buffers around detected device usage activity to determine scheduled inactive periods. By contrast an aggressive policy might apply criteria that include high usage thresholds and or no buffers to determine scheduled inactive periods.

In an example assume that activity information for the mobile device shows that Tuesday Wednesday and Friday have similar activity patterns. Activity information shows that a user typically stops using the mobile device at 8 PM on Tuesdays Wednesdays and Fridays. However the mobile device was briefly used for 1 minute at 9 PM on Tuesday. There is no other recorded device usage after 8 PM for any of the days. A non aggressive policy might apply criteria stating that any detected usage should result in a scheduled active period with a buffer. Such a non aggressive policy might cause scheduled active periods for Tuesday Wednesday and Friday to end one hour after the last detected use e.g. at 10 01 PM . A slightly more aggressive policy might state that any detected usage should result in a scheduled active period but that less than a threshold level of usage does not cause a buffer to be created. Such a policy might not apply the one hour window and may cause the scheduled active period to end at 9 01 PM for example. An even more aggressive policy might state that at least a threshold amount of activity should be detected to create a scheduled active period. Such an aggressive policy might disregard the 9 PM usage and might cause the scheduled active period to terminate at 8 PM.

In one embodiment usage schedule determiner applies a policy of a particular level of aggressiveness to determine the scheduled inactive periods in the usage schedule. Usage schedule determiner may start with a non aggressive policy an aggressive policy or an intermediate policy. Usage schedule determiner may then receive updated activity information from the mobile device and may compare the updated activity information to the usage schedule to determine a hit miss ratio. To determine the hit miss ratio the usage schedule determiner identifies one or more hits for the usage schedule wherein a hit is identified for a scheduled inactive period where no user activity has been detected. The usage schedule determiner additionally identifies one or more misses for the usage schedule wherein a miss is identified for a scheduled inactive period where user activity has been detected. The hit miss ratio is then computed by taking a ratio of the number of hits to the number of misses. If there are too many misses e.g. a hit miss ratio below a first threshold then the policies for generating the usage schedule may be adjusted to be less aggressive and the usage schedule may be recomputed. If there have been no misses or very few misses e.g. a hit miss ratio above a second threshold then the policies for generating the usage schedule may be adjusted to be more aggressive and the usage schedule may be recomputed.

In addition to having access to greater resources than usage schedule determiner usage schedule determiner may also have access to more information. In one embodiment information gathering module gathers such additional information and provides it to usage schedule determiner for computation of the usage schedule . For example information gathering module may gather information of other devices used by a user of the mobile device . Additionally or alternatively information gathering module may gather activity information for similar devices to mobile device that are used by other users having similar usage patterns to those shown for mobile device . Some or all of the additional gathered information may be used as inputs to a machine learning system of usage schedule determiner .

In one example the mobile device may be associated with a user account that is known to server system . Information gathering module may detect activity associated with the user account from other computing devices. Based on such activity usage schedule determiner may determine that the user is likely to use the mobile device or unlikely to use the mobile device and may update or determine a usage schedule for the mobile device accordingly.

In an example the mobile device may be an ebook reader. Information gathering module may detect that a user frequently browses for electronic books from another computing device at particular times and that that such behavior occasionally results in the purchase of an ebook. Accordingly usage schedule determiner may make sure that the mobile device is active at these times to receive the purchased books.

In another example the mobile device may be an ebook reader or tablet computer. The mobile device may be associated with a user account and a smart television may also be associated with the user account. Information gathering module may detect that a user is presently watching the smart television and that the user is not presently using the mobile device . Based on previous information regarding user activity on the mobile device while the user was watching the smart television usage schedule determiner may determine that the mobile device should be in an inactive period or in an active period. Usage schedule determiner may then insert an additional active period or an additional inactive period into the usage schedule in accordance with the determination. Accordingly user activity on one device can be used to insert additional active and or inactive periods into other devices associated with the same user account.

Other types of information that information gathering module may gather include scheduled or predicted push notifications from messaging services such as the Amazon device messaging framework ADM . For example ADM occasionally generates notifications and pushes these notifications to devices. Based on such information the usage schedule determiner may identify when notifications will be pushed to devices and what user interaction such pushes usually trigger and can plan accordingly.

In an example assume mobile device has a turn based game installed and a server regularly pushes updates to the game at 7 AM. Assume also that the updates regularly result in the device being used shortly after 7 AM. Usage schedule determiner may use data about such updates collected by information gathering module to assure that the mobile device will be awake to receive the game update. Accordingly usage schedule determiner may leverage ADM traffic history for example to determine that even though the user is not using the mobile device at particular time periods updates are typically sent during these periods and these updates result in later user interaction.

In one embodiment data transmission predictor predicts data that would be sent to mobile device during time periods in which the mobile device is in a low power state as well as data that might be sent to the mobile device while it is not in the low power state e.g. is in a standard active or suspended state . Such data transfer predictions may be made based on information gathered by information gathering module . Data transmission predictor then applies one or more criteria to the gathered information to determine an additional active period to be injected into the usage schedule of mobile device . Notably the criteria and information used to determine the additional active periods may be separate and distinct from the data and or criteria used to generate the usage schedule .

Note that embodiments are discussed herein with regards to injecting or adding additional active periods into initial usage schedules based on additional information and or criteria that is different from the information and or criteria used to develop the usage schedule. It should be understood that the same principles may be applied to inject additional inactive periods into the initial usage schedule. For example if additional information shows that there is a low probability that a user will be using the mobile device for a certain period of time that corresponds to a presently scheduled active period usage schedule determiner may generate an additional inactive period and cause that additional inactive period to be inserted into the initial usage schedule.

One example of gathered information that may be used to predict future data transfers is the above mentioned regular data pushes. For example data pushed to a mobile device by ADM may be recorded over time and may be used by data transmission predictor to identify patterns in data pushes.

Information gathering module may additionally gather information regarding application updates operating system updates firmware updates driver updates and or other updates referred to generally as over the air OTA updates . Such updates may be based on past update records and or may be based on scheduled future updates. Information gathering module may additionally gather information regarding synchronization patterns for various applications installed on the mobile device . For example information gathering module may gather information showing that a first application performs synchronization operations every hour and that a second application performs synchronization operations every other hour. Information gathering module may additionally gather information identifying scheduled backup events for the mobile device .

Information gathering module may additionally receive and or record information identifying previous data transfer attempts to the mobile device that failed due to the mobile device being in a low power state during a scheduled inactive period. This information may be used to determine that a similar future data transfer attempt is likely and thus to determine an additional active period to insert into an initial usage schedule.

Data transmission predictor uses the various data gathered by information gathering module e.g. historic and or scheduled future OTA updates historic and or scheduled message pushes by ADM or other messaging services scheduled backup events and or historic backup events scheduled and or historic synchronization events etc. to predict when future data transfers will occur. Data transmission predictor additionally uses the gathered information to predict an amount of time that will be used to complete each of the predicted data transfer events. The predicted time to complete a data transfer may be estimated based on gathered information regarding the amount of data that is to be transmitted the nature of the data to be transmitted a current and or usual bandwidth of the mobile device and or historic amounts of time that were used to complete past data transfers.

Data transmission predictor may identify all of the predicted data transfers that are predicted for a next scheduled inactive period of the mobile device . Data transfer predictor may then aggregate the predicted amounts of time to complete each of the predicted data transfers. Based on the total amount of time to complete the data transfers data transmission predictor determines an appropriate timing for an additional active period. Data transmission predictor then generates an instruction to inject the determined additional active period into the usage schedule of the mobile device which mobile device interaction module may send to mobile device . In an example data transmission predictor may identify which applications are installed on the mobile device identify which applications have updates estimate how much time will be used to download and install each update and then set a timing for an additional active period accordingly.

In one embodiment rather than performing the above described operations to determine when to inject an additional active period into a usage schedule data transmission predictor causes the device state manager to inject an additional active period a fixed amount of time e.g. about 30 45 minutes before a next scheduled active period is to occur. Data transmission predictor may then determine whether all data transfers e.g. updates synchronization events backups etc. completed before a next scheduled active period. If the data transfers did not complete prior to the next scheduled active period then data transmission predictor may increase the fixed amount of time for future additional active periods. If the data transfers completed prior to the next scheduled active period then an amount of idle time between completion of the data transfers and the scheduled active period may be measured. This value may then be used to reduce the fixed time used for future additional active periods.

In one embodiment data transmission predictor injects a brief additional active period into the usage schedule on a periodic basis. For example data transmission predictor may cause the device state manager to inject a 1 minute additional active period every hour. During the 1 minute additional active period one or more applications may initiate data transfers such as synchronization operations updates and so forth. If any of the data transfers will take more than 1 minute to complete the applications may place a wake lock that will be held until the transfer is complete. The state selector will wait until there are no active wake locks to transfer the mobile device back into the low power state.

In one embodiment data transmission predictor identifies one or more scheduled operations that can only be performed if the mobile device is not in the low power state. Additional active periods may be determined and added to an initial usage schedule based on the scheduled operations. Examples of such operations include backup operations synchronization operations download operations upload operations and so forth.

Some additional active period computation techniques that do not rely on data unavailable to the mobile device may be performed on the mobile device. In one embodiment framework module includes a data transmission predictor not shown that determines additional active periods to inject into the usage schedule using such techniques such as those described above.

In one embodiment responsive to receiving an instruction to inject an additional active period into the usage schedule device state manager updates a usage schedule by adding one or more entries for the additional active period. The received instruction may indicate that the additional active period is to be recurring or that it is a one time additional active period. Based on the received instruction device state manager may additionally or alternatively add a wake up alarm to the alarm wake up schedule . The wake up alarm may wake the mobile device at a scheduled time at which point the state selector may transition the mobile device out of the low power state.

In an alternative embodiment responsive to an instruction to inject an additional active period into the usage schedule usage schedule determiner and or usage schedule determiner uses the additional active period as an input into the machine learning system. Usage schedule determiner may then re compute the usage schedule using the additional active period as an additional input. Depending on the other data and the machine learning algorithm used the additional active period may cause a new scheduled active period to be added to the usage schedule may cause a timing of one or more scheduled active periods and or inactive periods to be changed or may have no effect.

The mobile device includes one or more processing devices . Each processing device may be a general purpose processing device e.g. a microprocessor central processing unit or the like or a special purpose processing device e.g. an application specific integrated circuit ASIC a field programmable gate array FPGA a digital signal processor DSP network processor or the like . The mobile device also includes system memory which may correspond to any combination of volatile and or non volatile storage mechanisms. The system memory stores information which provides an operating system component various program modules such as for a device manager program data device drivers and or other components. The mobile device performs functions by using the processing device s to execute instructions provided by the system memory .

The mobile device also includes a data storage device that may be composed of one or more types of removable storage and or one or more types of non removable storage. The data storage device includes a computer readable storage medium on which is stored one or more sets of instructions embodying any one or more of the methodologies or functions described herein. As shown instructions for the device manager may reside completely or at least partially within the computer readable storage medium system memory and or within the processing device s during execution thereof by the mobile device the system memory and the processing device s also constituting computer readable media. The mobile device may also include one or more input devices keyboard mouse device specialized selection keys touchpad touch screen etc. and one or more output devices displays printers audio output mechanisms etc. .

Mobile device may also include a battery that provides a finite amount of power. The battery may provide a consistent voltage and or amperage to components of the mobile device until the battery reaches a drained state at which the battery can no longer provide the voltage and or amperage. When the battery reaches this state the mobile device may be suspended and or turned off.

The mobile device may further include a wireless modem to allow the mobile device to communicate via a wireless network e.g. such as provided by the wireless communication systems with other computing devices such as remote computers the server systems and so forth. The wireless modem may allow the mobile device to handle both voice and or non voice communications such as communications for text messages multimedia messages media downloads web browsing etc. with the wireless communication system . The wireless modem may provide network connectivity using any type of mobile network technology including for example cellular digital packet data CDPD general packet radio service GPRS enhanced data rates for GSM evolution EDGE universal mobile telecommunications system UMTS 1 times radio transmission technology 1 RTT evaluation data optimized EVDO high speed down link packet access HSDPA long term evolution LTE worldwide interoperability for microwave access WIMAX etc. The wireless modem may generate signals and send these signals to power amplifier amp for amplification after which they are wirelessly transmitted via antenna . In addition to sending data antenna may also receive data e.g. network packets which is sent to wireless modem .

The mobile device may further include a wireless network interface controller WNIC to allow the mobile device to communicate via a wireless network e.g. such as provided by the wireless communication systems with other computing devices such as remote computers the server systems and so forth. The WNIC may be a Wi Fi NIC a Bluetooth NIC a Zigbee NIC or other wireless NIC.

The WNIC may generate signals and send these signals to power amplifier amp for amplification after which they are wirelessly transmitted via antenna . In addition to sending data antenna may also receive data e.g. network packets which is sent to WNIC . In one embodiment the wireless modem the WNIC and the processing device s are each discreet devices e.g. each discreet integrated circuits . Alternatively one or more of the wireless modem WNIC and processing devices may be logics of a single integrated circuit.

In one embodiment the mobile device includes a power management unit . The power management unit is hardware e.g. a microcontroller that governs power functions of the mobile device . The power management unit may include a processing device firmware software memory input outputs timers analog to digital converters and or other components. The power management unit may monitor power connections and battery charge charge the battery when appropriate control power to other hardware components e.g. to hardware components wireless modem WNIC system memory data storage and so on shut down components and or perform other operations. In one embodiment the device state manager communicates with the power management unit to shut down and or power on hardware components during a low power state. In one embodiment the device state manager and or at least one module of the device state manager runs on the power management unit .

Mobile device may additionally include one or more additional hardware components such as a light sensor hardware accelerators e.g. audio codecs graphics processors etc. a touch sensor a proximity sensor an accelerometer a gyroscope and so forth.

The server computing device includes a processing device a main memory e.g. read only memory ROM flash memory dynamic random access memory DRAM such as synchronous DRAM SDRAM or DRAM RDRAM etc. a static memory e.g. flash memory static random access memory SRAM etc. and a data storage device which communicate with each other via a bus .

Processing device represents one or more general purpose processing devices such as a microprocessor a central processing unit or the like. More particularly the processing device may be complex instruction set computing CISC microprocessor reduced instruction set computing RISC microprocessor very long instruction word VLIW microprocessor or processor implementing other instruction sets or processors implementing a combination of instruction sets. Processing device may also be one or more special purpose processing devices such as an application specific integrated circuit ASIC a field programmable gate array FPGA a digital signal processor DSP network processor or the like. The processing device is configured to execute instructions for performing the operations and steps discussed herein.

The server computing device may further include a network interface device . The server computing device also may include a video display unit e.g. a liquid crystal display LCD or a cathode ray tube CRT an alphanumeric input device e.g. a keyboard a cursor control device e.g. a mouse and or a signal generation device e.g. a speaker .

The data storage device may include a machine readable storage medium also known as a computer readable medium on which is stored one or more sets of instructions or software embodying any one or more of the methodologies or functions described herein. The instructions may also reside completely or at least partially within the main memory and or within the processing device during execution thereof by the server computing device the main memory and the processing device also constituting machine readable storage media.

In one implementation the instructions include instructions for a device state service e.g. device state service of and or a software library containing methods that call modules in a device state service. While the machine readable storage medium is shown in an example implementation to be a single medium the term machine readable storage medium should be taken to include a single medium or multiple media e.g. a centralized or distributed database and or associated caches and servers that store the one or more sets of instructions. The term machine readable storage medium shall also be taken to include any medium other than a carrier wave that is capable of storing or encoding a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present disclosure. The term machine readable storage medium shall accordingly be taken to include but not be limited to solid state memories optical media and magnetic media.

For simplicity of explanation the methods are depicted and described as a series of acts. However acts in accordance with this disclosure can occur in various orders and or concurrently and with other acts not presented and described herein. Furthermore not all illustrated acts may be performed to implement the methods in accordance with the disclosed subject matter. In addition those skilled in the art will understand and appreciate that the methods could alternatively be represented as a series of interrelated states via a state diagram or events. Additionally it should be appreciated that the methods disclosed in this specification are capable of being stored on an article of manufacture to facilitate transporting and transferring such methods to computing devices. The term article of manufacture as used herein is intended to encompass a computer program accessible from any computer readable device or storage media.

At block processing logic receives an instruction to inject an additional active period into the usage schedule. Alternatively processing logic may use one or more second criteria to determine the additional active period to inject into the usage schedule. At block processing logic injects the additional active period into the usage schedule. This may include updating a data structure that represents the usage schedule and or adding an entry to an alarm wake up schedule. The added entry to the alarm wake up schedule may cause the mobile device to wake up at a specified time corresponding to the additional active period.

At block processing logic transitions into a low power state at a designated first time corresponding to a scheduled inactive period. At block processing logic then later transitions the mobile device out of the low power state at a designated second time corresponding to the additional active period.

At block processing logic receives transmission of data and or performs another scheduled operation during the additional active period. Preferably the data transmission and or other operation completes prior to a subsequent scheduled active period. At block processing logic then accesses the data that was received during the additional active period. Alternatively if the data was an application update processing logic may execute an application that was updated e.g. an application associated with the data during the additional active period.

At block processing logic determines whether the mobile device has been used by a user during one or more active periods. A determination that the mobile device has not been used may be made based on absence of user input signals. For example if no user input signals were received e.g. from a touch screen keyboard buttons etc. then processing logic may determine that the device was not used during the active periods. Other information that may be analyzed to determine that the mobile device was not used during the active periods includes display state wake locks and or sensor data gathered during the active periods. For example if the screen remained off during the active periods and or there were no wake locks issued during the active periods then processing logic may determine that the mobile device was not used. Additionally or alternatively if one or more sensors of the mobile device such as an accelerometer or proximity sensor did not detect motion and or a user proximity during the active periods then processing logic may determine that the mobile device was unused during the active periods. If the mobile device was not used during a threshold number of sequential scheduled active periods it may be determined that the user is away. For example the user may go on vacation and leave the mobile device at home. If the mobile device has not been used for the threshold number of scheduled active periods the method continues to block and processing logic transitions the mobile device into an away state.

While the mobile device is in the away state processing logic treats all scheduled active periods and scheduled inactive periods as scheduled inactive periods. Additionally processing logic may prohibit additional active periods while the mobile device is in the away state. The mobile device remains in the away state until user interaction is detected. Responsive to detection of user interaction processing logic may transition the mobile device out of the away state and thus resume applying the usage schedule. Thus the battery life of the mobile device may be maximized while a user is away. In one embodiment processing logic automatically shuts the mobile device completely off if the mobile device remains in the away state for a threshold amount of time e.g. for 2 days for 3 days 1 week etc. .

At block processing logic predicts data to be transferred to the mobile device during a scheduled inactive period. At block processing logic determines an additional active period for the mobile device based on the predicted data and one or more second criteria. The second criteria may include data transfer likelihood thresholds data size predictions and so forth.

At block processing logic transmits a first instruction to the mobile device that will cause the mobile device to transition to a low power state during the scheduled inactive period. In one embodiment processing logic transfers the determined usage schedule to the mobile device. At block processing logic transmits a second instruction to the mobile device that will cause the mobile device to transition out of the low power state to receive the predicted data during the determined additional active period and prior to a subsequent scheduled active period.

At block processing logic predicts data to be transferred to the mobile device during a scheduled inactive period. At block processing logic determines an additional active period for the mobile device based on the predicted data. At block processing logic inputs the additional active period into the machine learning system to update the usage schedule. At block processing logic transmits the updated usage schedule to the mobile device.

At block processing logic determines a user account associated with the user device. At block processing logic gathers information associated with the user account. At block processing logic predicts additional data to be transmitted to the mobile device during the inactive period based on additional gathered information. Examples of such additional gathered information may include scheduled backups historic synchronization events of an operating system and so forth.

At block processing logic estimates an amount of time to complete all of the predicted data transfers and or install data associated with the data transfers. At block processing logic selects a timing for an additional active period that will enable data transfers and or installations to complete prior to a subsequent scheduled active period.

At block processing logic identifies days having similar activity patterns. In one embodiment processing logic applies a K nearest neighbors algorithm to determine days having similar activity patterns. At block processing logic determines a usage schedule for a particular day using the activity pattern for that day and the activity patterns for other days with similar activity patterns. The determined usage schedule includes scheduled active periods and scheduled inactive periods.

At block processing logic identifies misses for the usage schedule. A miss corresponds to a scheduled inactive period for which a user interaction was detected. At block processing logic determines a hit miss ratio for the usage schedule. At block processing logic then adjusts the usage schedule based on the hit miss ratio. For example if the hit miss ratio is high e.g. above a first threshold then processing logic may increase the duration of the scheduled inactive periods. If the hit miss ratio is low e.g. below a second threshold then processing logic may decrease the duration of the scheduled inactive periods.

Note that in additional embodiments processing logic may load balance based on all mobile devices that will have overlapping scheduled inactive periods. For example processing logic may identify all mobile devices that will have scheduled inactive periods within a certain time range. Processing logic may then offset the additional active periods to inject into the usage schedules of these mobile devices regardless of the specific data transfers that are predicted to be made to these mobile devices.

In the above description numerous details are set forth. It will be apparent however to one of ordinary skill in the art having the benefit of this disclosure that embodiments of the invention may be practiced without these specific details. In some instances well known structures and devices are shown in block diagram form rather than in detail in order to avoid obscuring the description.

Some portions of the detailed description are presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated. It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the above discussion it is appreciated that throughout the description discussions utilizing terms such as gathering determining identifying receiving transmitting transitioning or the like refer to the actions and processes of a computer system or similar electronic computing device that manipulates and transforms data represented as physical e.g. electronic quantities within the computer system s registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage transmission or display devices.

Embodiments of the invention relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the disclosed purposes or it may comprise a general purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a computer readable storage medium such as but not limited to any type of disk including floppy disks optical disks CD ROMs and magnetic optical disks read only memories ROMs random access memories RAMs EPROMs EEPROMs magnetic or optical cards or any type of non transitory media suitable for storing electronic instructions e.g. media other than a carrier wave .

The algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general purpose systems may be used with programs in accordance with the teachings herein or it may prove convenient to construct a more specialized apparatus to perform the required method steps. The structure for a variety of these systems will appear from the description above. In addition embodiments of the present invention are not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the invention as described herein.

It is to be understood that the above description is intended to be illustrative and not restrictive. Many other embodiments will be apparent to those of skill in the art upon reading and understanding the above description. The scope of the invention should therefore be determined with reference to the appended claims along with the full scope of equivalents to which such claims are entitled.

