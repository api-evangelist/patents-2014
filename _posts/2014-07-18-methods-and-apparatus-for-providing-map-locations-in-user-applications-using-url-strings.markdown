---

title: Methods and apparatus for providing map locations in user applications using URL strings
abstract: Techniques for use in a wireless communication device for displaying a map are described. The device receives via a user interface a selection of a hypertext link object in an electronic file or message. The object is associated with a URL string which includes a server address and location data corresponding to a location. When a mapping application is installed in the device, the device executes the mapping application for rendering a map of the location in response to receiving the selection of the object. When the mapping application is not installed in the device, the device executes a web browser of the device for receiving and displaying a map image of the location in response to receiving the selection of the object.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09298838&OS=09298838&RS=09298838
owner: BlackBerry Limited
number: 09298838
owner_city: Waterloo
owner_country: US
publication_date: 20140718
---
The present application is a continuation of and claims priority to U.S. non provisional patent application having application Ser. No. 13 451 100 and filing date of 19 Apr. 2012 now U.S. Pat. No. 8 788 604 which is a continuation of and claims priority to U.S. non provisional patent application having application Ser. No. 13 150 752 and filing date of 1 Jun. 2011 now U.S. Pat. No. 8 166 083 which is a continuation of and claims priority to U.S. non provisional patent application having application Ser. No. 12 781 397 and filing date of 17 May 2010 now U.S. Pat. No. 7 970 807 which is a continuation of and claims priority to U.S. non provisional patent application having application Ser. No. 11 483 215 and filing date of 7 Jul. 2006 now U.S. Pat. No. 7 720 893 which claims priority to U.S. provisional patent application having application No. 60 787 872 and filing date of 31 Mar. 2006 and U.S. provisional patent application having application No. 60 787 541 and filing date of 31 Mar. 2006 each application being hereby incorporated by reference herein.

The present disclosure relates generally to providing map locations in user applications for the visual display of maps in computer devices including mobile communication devices.

Increasingly mobile communication devices operating in wireless communication networks are provided with mapping capabilities for presenting visually displayed maps of geographic locations. Traditionally visually displayed maps for computer devices have been limited to those based on bitmap images which are relatively large files. In recent years newer and even more elaborate mapping capabilities for computer devices have been devised. Mobile communication devices which typically operate with use of one or more batteries or battery packs however typically have relatively limited memory and processing power as compared to larger computer devices such as personal computers PCs or even laptop computers. It is generally desirable to minimize the use of memory and communication bandwidth radio bandwidth or otherwise resources.

Accordingly there is a need for providing map locations in user applications for the visual display of maps especially in mobile communication devices which operate in wireless communication networks as well as other computer devices by fully exploiting the capabilities of such devices and minimizing memory and or communication bandwidth resources where possible.

Methods and apparatus for use in mapping a location in a computer device are described herein. In one illustrative example the method includes the steps of receiving an electronic file or message which includes a hypertext link mapping indicator associated with a uniform resource locator URL string having a server address and latitude and longitude coordinates receiving through a user interface of the computer device an end user selection of the hypertext link mapping indicator in the electronic file or message and in response to the end user selection of the hypertext link mapping indicator if a predetermined type of mapping application is provided in the computer device invoking a mapping function of the mapping application to produce a map of a location corresponding to the latitude and longitude coordinates for visual display in a display of the computer device e.g. based on received maplet data and if the predetermined type of mapping application type is not provided in the computer device requesting and receiving map data from a map coordinating server identified by the server address of the URL string to produce a map of the location for visual display in the display e.g. based on a bitmap image . If the predetermined type of mapping application is not provided in the computer device and the computer device or associated browser is identified as not being that of a mobile communication device i.e. the computer device has higher processing capabilities then the computer device causes a request to be sent to the map coordinating server at the server address and in response to the request receives a redirection from the map coordinating server to an interactive map server at an interactive map server address and further requests and receives map data from the interactive map server at the interactive map server address to produce a map of the location for visual display in the display. Advantageously processing of the received hypertext link mapping indicator is handled differently depending on the type of device or whether a predetermined mapping application is installed in the device so that optimal mapping functionality is provided for different device environments.

Mobile station sends communication signals to and receives communication signals from network over a wireless link via antenna . RF transceiver circuitry performs functions similar to those of station and BSC including for example modulation demodulation and possibly encoding decoding and encryption decryption. It is also contemplated that RF transceiver circuitry may perform certain functions in addition to those performed by BSC . It will be apparent to those skilled in art that RF transceiver circuitry will be adapted to particular wireless network or networks in which mobile station is intended to operate.

Mobile station includes a battery interface for receiving one or more rechargeable batteries . Battery provides electrical power to electrical circuitry in mobile station and battery interface provides for a mechanical and electrical connection for battery . Battery interface is coupled to a regulator which regulates power to the device. When mobile station is fully operational an RF transmitter of RF transceiver circuitry is typically keyed or turned on only when it is sending to network and is otherwise turned off to conserve resources. Similarly an RF receiver of RF transceiver circuitry is typically periodically turned off to conserve power until it is needed to receive signals or information if at all during designated time periods.

Mobile station operates using a Subscriber Identity Module SIM which is connected to or inserted in mobile station at a SIM interface . SIM is one type of a conventional smart card used to identify an end user or subscriber of mobile station and to personalize the device among other things. Without SIM the mobile station terminal is not fully operational for communication through wireless network . By inserting SIM into mobile station an end user can have access to any and all of his her subscribed services. SIM generally includes a processor and memory for storing information. Since SIM is coupled to SIM interface it is coupled to controller through communication lines . In order to identify the subscriber SIM contains some user parameters such as an International Mobile Subscriber Identity IMSI . An advantage of using SIM is that end users are not necessarily bound by any single physical mobile station. SIM may store additional user information for the mobile station as well including datebook or calendar information and recent call information.

Mobile station may consist of a single unit such as a data communication device a cellular telephone a Global Positioning System GPS unit a multiple function communication device with data and voice communication capabilities a personal digital assistant PDA enabled for wireless communication or a computer incorporating an internal modem. Alternatively mobile station may be a multiple module unit comprising a plurality of separate components including but in no way limited to a computer or other device connected to a wireless modem. In particular for example in the mobile station block diagram of RF transceiver circuitry and antenna may be implemented as a radio modem unit that may be inserted into a port on a laptop computer. In this case the laptop computer would include display keyboard one or more auxiliary UIs and controller embodied as the computer s CPU. It is also contemplated that a computer or other equipment not normally capable of wireless communication may be adapted to connect to and effectively assume control of RF transceiver circuitry and antenna of a single unit device such as one of those described above. Such a mobile station may have a more particular implementation as described later in relation to mobile station of .

Mobile station communicates in and through wireless communication network . Wireless communication network may be a cellular telecommunications network. In the embodiment of wireless network is configured in accordance with Global Systems for Mobile Communications GSM and General Packet Radio Service GPRS technologies. Although wireless communication network is described herein as a GSM GPRS type network any suitable network technologies may be utilized such as Code Division Multiple Access CDMA Wideband CDMA WCDMA whether 2G 3G or Universal Mobile Telecommunication System UMTS based technologies. In this embodiment the GSM GPRS wireless network includes a base station controller BSC with an associated tower station a Mobile Switching Center MSC a Home Location Register HLR a Serving General Packet Radio Service GPRS Support Node SGSN and a Gateway GPRS Support Node GGSN . MSC is coupled to BSC and to a landline network such as a Public Switched Telephone Network PSTN . SGSN is coupled to BSC and to GGSN which is in turn coupled to a public or private data network such as the Internet . HLR is coupled to MSC SGSN and GGSN .

Station is a fixed transceiver station and station and BSC may be referred to as transceiver equipment. The transceiver equipment provides wireless network coverage for a particular coverage area commonly referred to as a cell . The transceiver equipment transmits communication signals to and receives communication signals from mobile stations within its cell via station . The transceiver equipment normally performs such functions as modulation and possibly encoding and or encryption of signals to be transmitted to the mobile station in accordance with particular usually predetermined communication protocols and parameters under control of its controller. The transceiver equipment similarly demodulates and possibly decodes and decrypts if necessary any communication signals received from mobile station within its cell. Communication protocols and parameters may vary between different networks. For example one network may employ a different modulation scheme and operate at different frequencies than other networks.

The wireless link shown in communication system of represents one or more different channels typically different radio frequency RF channels and associated protocols used between wireless network and mobile station . An RF channel is a limited resource that must be conserved typically due to limits in overall bandwidth and a limited battery power of mobile station . Those skilled in art will appreciate that a wireless network in actual practice may include hundreds of cells each served by a station i.e. or station sector depending upon desired overall expanse of network coverage. All pertinent components may be connected by multiple switches and routers not shown controlled by multiple network controllers.

For all mobile station s registered with a network operator permanent data such as mobile station user s profile as well as temporary data such as mobile station s current location are stored in HLR . In case of a voice call to mobile station HLR is queried to determine the current location of mobile station . A Visitor Location Register VLR of MSC is responsible for a group of location areas and stores the data of those mobile stations that are currently in its area of responsibility. This includes parts of the permanent mobile station data that have been transmitted from HLR to the VLR for faster access. However the VLR of MSC may also assign and store local data such as temporary identifications. Optionally the VLR of MSC can be enhanced for more efficient co ordination of GPRS and non GPRS services and functionality e.g. paging for circuit switched calls which can be performed more efficiently via SGSN and combined GPRS and non GPRS location updates .

Serving GPRS Support Node SGSN is at the same hierarchical level as MSC and keeps track of the individual locations of mobile stations. SGSN also performs security functions and access control. Gateway GPRS Support Node GGSN provides interworking with external packet switched networks and is connected with SGSNs such as SGSN via an IP based GPRS backbone network. SGSN performs authentication and cipher setting procedures based on the same algorithms keys and criteria as in existing GSM. In conventional operation cell selection may be performed autonomously by mobile station or by the transceiver equipment instructing mobile station to select a particular cell. Mobile station informs wireless network when it reselects another cell or group of cells known as a routing area.

In order to access GPRS services mobile station first makes its presence known to wireless network by performing what is known as a GPRS attach . This operation establishes a logical link between mobile station and SGSN and makes mobile station available to receive for example pages via SGSN notifications of incoming GPRS data or SMS messages over GPRS. In order to send and receive GPRS data mobile station assists in activating the packet data address that it wants to use. This operation makes mobile station known to GGSN interworking with external data networks can thereafter commence. User data may be transferred transparently between mobile station and the external data networks using for example encapsulation and tunneling. Data packets are equipped with GPRS specific protocol information and transferred between mobile station and GGSN .

Those skilled in art will appreciate that a wireless network may be connected to other systems possibly including other networks not explicitly shown in . A network will normally be transmitting at very least some sort of paging and system information on an ongoing basis even if there is no actual packet data exchanged. Although the network consists of many parts these parts all work together to result in certain behaviours at the wireless link.

Mobile station will normally incorporate a communication subsystem which includes a receiver a transmitter and associated components such as one or more preferably embedded or internal antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . Communication subsystem is analogous to RF transceiver circuitry and antenna shown in . As will be apparent to those skilled in field of communications particular design of communication subsystem depends on the communication network in which mobile station is intended to operate.

Mobile station may send and receive communication signals over the network after required network registration or activation procedures have been completed. Signals received by antenna through the network are input to receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection and like and in example shown in analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by DSP . These DSP processed signals are input to transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission over communication network via antenna . DSP not only processes communication signals but also provides for receiver and transmitter control. For example the gains applied to communication signals in receiver and transmitter may be adaptively controlled through automatic gain control algorithms implemented in DSP .

Network access is associated with a subscriber or user of mobile station and therefore mobile station requires a Subscriber Identity Module or SIM card to be inserted in a SIM interface in order to operate in the network. SIM includes those features described in relation to . Mobile station is a battery powered device so it also includes a battery interface for receiving one or more rechargeable batteries . Such a battery provides electrical power to most if not all electrical circuitry in mobile station and battery interface provides for a mechanical and electrical connection for it. The battery interface is coupled to a regulator not shown which provides a regulated voltage V to all of the circuitry.

Mobile station includes a microprocessor which is one implementation of controller of which controls overall operation of mobile station . Communication functions including at least data and voice communications are performed through communication subsystem . Microprocessor also interacts with additional device subsystems such as a display a flash memory a random access memory RAM auxiliary input output I O subsystems a serial port a keyboard a speaker a microphone a short range communications subsystem and any other device subsystems generally designated at . Some of the subsystems shown in perform communication related functions whereas other subsystems may provide resident or on device functions. Notably some subsystems such as keyboard and display for example may be used for both communication related functions such as entering a text message for transmission over a communication network and device resident functions such as a calculator or task list. Operating system software used by microprocessor is preferably stored in a persistent store such as flash memory which may alternatively be a read only memory ROM or similar storage element not shown . Those skilled in the art will appreciate that the operating system specific device applications or parts thereof may be temporarily loaded into a volatile store such as RAM .

Microprocessor in addition to its operating system functions preferably enables execution of software applications on mobile station . A predetermined set of applications which control basic device operations including at least data and voice communication applications as well as techniques of the present disclosure will normally be installed on mobile station during its manufacture. A preferred application that may be loaded onto mobile station may be a personal information manager PIM application having the ability to organize and manage data items relating to user such as but not limited to e mail calendar events voice mails appointments and task items. Naturally one or more memory stores are available on mobile station and SIM to facilitate storage of PIM data items and other information.

The PIM application preferably has the ability to send and receive data items via the wireless network. In the present disclosure PIM data items are seamlessly integrated synchronized and updated via the wireless network with the mobile station user s corresponding data items stored and or associated with a host computer system thereby creating a mirrored host computer on mobile station with respect to such items. This is especially advantageous where the host computer system is the mobile station user s office computer system. Additional applications may also be loaded onto mobile station through network an auxiliary I O subsystem serial port short range communications subsystem or any other suitable subsystem and installed by a user in RAM or preferably a non volatile store not shown for execution by microprocessor . Such flexibility in application installation increases the functionality of mobile station and may provide enhanced on device functions communication related functions or both. For example secure communication applications may enable electronic commerce functions and other such financial transactions to be performed using mobile station .

In a data communication mode a received signal such as a text message an e mail message or web page download will be processed by communication subsystem and input to microprocessor . Microprocessor will preferably further process the signal for output to display or alternatively to auxiliary I O device . A user of mobile station may also compose data items such as e mail messages for example using keyboard in conjunction with display and possibly auxiliary I O device . Keyboard is preferably a complete alphanumeric keyboard and or telephone type keypad. These composed items may be transmitted over a communication network through communication subsystem .

For voice communications the overall operation of mobile station is substantially similar except that the received signals would be output to speaker and signals for transmission would be generated by microphone . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on mobile station . Although voice or audio signal output is preferably accomplished primarily through speaker display may also be used to provide an indication of the identity of a calling party duration of a voice call or other voice call related information as some examples.

Serial port in is normally implemented in a personal digital assistant PDA type communication device for which synchronization with a user s desktop computer is a desirable albeit optional component. Serial port enables a user to set preferences through an external device or software application and extends the capabilities of mobile station by providing for information or software downloads to mobile station other than through a wireless communication network. The alternate download path may for example be used to load an encryption key onto mobile station through a direct and thus reliable and trusted connection to thereby provide secure device communication.

Short range communications subsystem of is an additional optional component which provides for communication between mobile station and different systems or devices which need not necessarily be similar devices. For example subsystem may include an infrared device and associated circuits and components or a Bluetooth communication module to provide for communication with similarly enabled systems and devices. Bluetooth is a registered trademark of Bluetooth SIG Inc.

A Maplet data structure is provided that contains all of the graphic and labeled content associated with a geographic area e.g. map features such as restaurants point features streets line features or lakes polygon features . Maplets are structured in Layers of DEntries Data Entries identified by a Layer ID to enable data from different sources to be deployed to the device and meshed for proper rendering. Each DEntry is representative of one or more artifact or label or a combination of both and includes coordinate information also referred to a bounding box or bounding area to identify the area covered by the DEntry and a plurality of data Points that together represent the artifact or label. For example a DEntry may be used to represent a street on a city map or a plurality of streets wherein the various Points within the DEntry are separated into different parts representing various portions of the artifact e.g. portions of a street . A mobile device may issue a request for the map server to download only those DEntries that are included within a specified area or bounding box representing an area of interest that can be represented by for example a pair of bottom left top right coordinates.

As discussed later below with reference to the mobile device issues one or more AOI Area of Interest requests DEntry or data requests and Maplet Index requests to the map server for selective downloading of map data based on user context Thus rather than transmitting the entire map data with each request from the device local caching may be used within the mobile device in conjunction with context filtering of map data on the server. For example if a user s mobile device is GPS enabled and the user is traveling in an automobile at 120 km hr along a freeway then context filtering can be employed to prevent downloading of map data relating to passing side streets. Or if the user is traveling in an airplane at 30 000 then context filtering can be employed to prevent downloading of map data for any streets whatsoever. Also a user s context can be defined for example in terms of occupation e.g. a user whose occupation is transport truck driver can employ context filtering to prevent downloading of map data for side streets on which the user s truck is incapable of traveling or a user whose occupation is to replenish supplies of soft drink dispensing machines can employ context filtering to download public map data showing the user s geographical area of responsibility with irrelevant features such as lakes or parks filtered out and private map data containing the location of soft drink dispensing machines superimposed on the public map data.

The Maplet Index request results in a Maplet Index i.e. only a portion of the Maplet that provides a table of contents of the map data available within the Maplet rather than the entire Maplet being downloaded from the map server to the device thereby conserving OTA Over the Air bandwidth and device memory caching requirements. The Maplet Index conforms to the same data structure as a Maplet but omits the data Points. Consequently the Maplet Index is small e.g. 300 400 bytes relative to the size of a fully populated Maplet or a conventional bit map and includes DEntry bounding boxes and attributes size complexity etc. for all artifacts within the Maplet. As the field of view changes e.g. for a location aware device that displays a map while moving the device client software assesses whether or not it needs to download additional data from the server. Thus as discussed above if the size attribute or complexity attribute of an artifact that has started to move into the field of view of the device but is not yet being displayed is not relevant to the viewer s current context then the device can choose not to display that portion of the artifact. On the other hand if the portion of the artifact is appropriate for display then the device accesses its cache to determine whether the DEntries associated with that portion of the artifact have already been downloaded in which case the cached content is displayed. Otherwise the device issues a request for the map server to download all of the DEntries associated with the artifact portion.

By organizing the Maplet data structure in Layers it is possible to seamlessly combine and display information obtained from public and private databases. For example it is possible for the device to display an office building at a certain address on a street e.g. 1z order attribute from public database adjacent a river e.g. 2z order attribute from public database with a superimposed floor plan of the building to show individual offices e.g. 11z order attribute from a private database accessible through a firewall .

Referring back to within the network having LBS server s and database s accessible to it all of the map data for the entire world is divided and stored as a grid according to various levels of resolution zoom as set forth below in Table A. Thus a single A level Maplet represents a 0.05 0.05 degree grid area a single B level Maplet represents a 0.5 0.5 degree grid area a single C level Maplet represents a 5 5 degree grid area a single D level Maplet represents a 50 50 degree grid area and a single E level Maplet represents the entire world in a single Maplet. It is understood that Table A is only an example of a particular Maplet grid configuration other or different grid configurations may also be developed. A Maplet comprises of a set of layers with each layer containing a set of DEntries and each DEentry containing a set of points.

Turning now to three specific types of requests may be generated by a mobile communication device i.e. the client AOI requests DEntry requests and Maplet Index requests. The requests may be generated separately or in various combinations as discussed in greater detail below. An AOI area of interest request calls for all DEntries in a given area bounding box for a predetermined or selected set of z order layers. The AOI request is usually generated when the mobile communication device moves to a new area so as to fetch Dentries for display before the device client knows what is available in the Maplet. The Maplet Index has the exact same structure as a Maplet but does not contain complete DEntries i.e. the data Points that actually represent artifacts and labels are omitted . Thus a Maplet Index defines what layers and DEntries are available for a given Maplet. A data or DEntry request is a mechanism to bundle together all of the required DEntries for a given Maplet.

Typically AOI and Maplet Index requests are paired together in the same message although they need not be while DEntry requests are generated most often. For example when the mobile communication device moves into an area in connection with which no information has been stored on the device client the Maplet Index request returns a Maplet Index that indicates what data the client can specifically request from the server while the AOI request returns any DEntries within the area of interest for the specified layers if they exist . In the example requests shown in the desired Maplet is identified within a DEntry request by specifying the bottom left Maplet coordinate. In addition the DEntry request may include a layer mask so that unwanted Layers are not downloaded a DEntry mask so that unwanted data Points are not downloaded and zoom values to specify a zoom level for the requested DEntry. Once the device client has received the requested Maplet Index the client typically then issues multiple DEntry requests to ask for specific DEntries since the client knows all of the specific DEntries that are available based on the Maplet Index .

According to the present disclosure herein a collection of 20 20 A level Maplets representing a 1 1 degree square is compiled into a Maplet file .mbl . An .mbl file contains a header which specifies the offset and length of each Maplet in the .mbl file. The same 20 20 collection of Maplet index data is compiled into a Maplet Index file .mbx . The .mbl and .mbx file structures are set forth in Tables B and C respectively.

In Table B the offset of Maplet is x  since according to the present disclosure the data structure is based on the assumption that the base address for the actual Maplet data is x C. Therefore the absolute address for Maplet data is Maplet Address Base Address x C Maplet Offset x  and additional Maplet addresses are calculated as Maplet n 1 Offset Maplet n Offset Maplet n Length. If a Maplet has no data or does not exist the length parameter is set to zero x  .

In Table C the offset of Maplet Index is x  since according to the present disclosure the data structure is based on the assumption that the base address for the actual Maplet index data is x C. Therefore the absolute address for Maplet Index data is Maplet Index Address Base Address x C Maplet Index Offset x  and additional Maplet index addresses are calculated as Maplet Index n 1 Offset Maplet Index n Offset Maplet Index n Length. If a Maplet Index has no data or does not exist the length parameter is set to zero x  .

For even greater detail if desired this application hereby incorporates by reference herein a U.S. provisional patent application entitled Method And System For Distribution Of Map Content To Mobile Communication Devices having Ser. No. 60 787 541 lead inventor Eric Johnson and a filing date of 31 Mar. 2006.

Keys of keyboard are disposed on a front face of a housing and positioning wheel is disposed at a side of housing . Keyboard is in the example form of a reduced QWERTY keyboard including a plurality of keys that serve as input members. It can be seen that the arrangement of the characters on keys of keyboard is generally of the QWERTY arrangement albeit with many of keys including two of characters . In the example depiction of keyboard many of keys include two characters such as including a first character and a second character assigned thereto. It is understood that the expression characters shall broadly be construed to include letters digits symbols and the like and can additionally include ideographic characters components thereof and the like. One of keys of keyboard includes as the characters thereof the letters Q and W and an adjacent key includes as the characters thereof the letters E and R . Keyboard may be of other configurations such as an AZERTY keyboard a QWERTZ keyboard a Dvorak keyboard or other keyboard or keypad arrangement whether presently known or unknown and either reduced or not reduced i.e. full . In a full or non reduced keyboard or keypad arrangement each key has a single letter not multiple letters of the alphabet assigned to it.

Among keys of keyboard are a key and an key . The key wherein for example may be a symbol or may be the word next provided e.g. printed on the key may be pressed to provide a selection input to the processor and provides substantially the same selection input as is provided by a rotational input of positioning wheel . Since key is provided adjacent a number of other keys of keyboard the user can provide a selection input to the processor substantially without moving the user s hands away from the keyboard during a text entry operation. Another key the key is disposed on the side of housing adjacent positioning wheel although the same or similar key may be disposed as part of keyboard . Among keys of the keyboard additionally is a key that can be provided to delete a text entry.

Positioning wheel may serve as another input member and is both rotatable as is indicated by an arrow to provide selection inputs to the processor and also can be pressed in a direction generally toward housing as is indicated by an arrow to provide another selection input to the processor. Positioning wheel will be described in more detail in relation to below.

Display may include a cursor that depicts generally where the next input or selection from user interface will be received. Display is shown in as displaying a home screen that represents a number of applications see also which shows some of the example possible applications depicted as corresponding discrete icons . Icons include for example an Electronic Mail E Mail icon a Calendar icon an Address Book icon a Tasks icon a Messages icon a MemoPad icon and a Search icon respectively.

As shown in memory includes a plurality of applications or routines associated with the visually displayed icons of for the processing of data. Applications may be in any of a variety of forms such as without limitation software firmware and the like. Applications include for example an Electronic Mail E Mail application associated with E mail icon a Calendar application associated with Calendar icon an Address Book application associated with Address Book icon a Tasks application associated with Tasks icon a MemoPad Memos application associated with MemoPad icon a Messages application associated with Message icon and a Search application associated with Search icon . An operating system OS program also resides in memory . The mobile station of the present disclosure is also adapted to render visual maps in its visual display and utilizes a mapping application stored in memory to facilitate map rendering and related functionality.

In the home screen output is currently active and constitutes the main ribbon application for displaying the icons shown. An application such as E mail application of may then be initiated opened or viewed from user interface by providing a suitable user input to it. For example E mail application may be initiated opened or viewed by rotating positioning wheel to highlight E mail icon and providing a selection input by translating positioning wheel in the direction indicated by arrow . As another example display displays icon associated with Search application and accepts input from positioning wheel to initiate a search from that icon . Applications may be additionally or alternatively initiated opened or viewed from user interface by providing another suitable input to it such as by suitably rotating or rolling trackball and providing a selection input by for example pushing the trackball e.g. somewhat similar to positioning wheel except into the plane of .

Movement navigation and or scrolling with use of a cursor view positioning mechanism is beneficial given the relatively large size of visually displayed information and the compact size of display and since information and messages are typically only partially presented in the limited view of display at any given moment. As previously described positioning wheel is one helpful cursor view positioning mechanism to achieve such movement. Positioning wheel which may be referred to as a scrollwheel specifically includes a circular disc which is rotatable about a fixed axis of housing and may be rotated by the end user s index finger or thumb. When the information or message is being partially displayed an upwards rotation of positioning wheel causes an upwards scrolling such that display presents viewing of an upper portion of the information or message. Similarly a downwards rotation of positioning wheel causes a downwards scrolling such that display presents viewing of a lower portion of the information or message. Positioning wheel is mounted along a fixed linear axis such that the end user can depress positioning wheel inwards toward housing e.g. with the end user s index finger or thumb for selection of information. Again see the direction indicated by an arrow of positioning wheel shown.

A more detailed mechanism for positioning wheel is now described in relation to . Positioning wheel of is shown connected to and rotatable about a body assembly . Body assembly may be connected to or be part of a slide assembly . Slide assembly allows the entirety of positioning wheel and body assembly may move freely laterally with respect to the handheld device. Lateral positioning wheel movement is defined as movement along a plane normal to the rotational axis of positioning wheel . To control this lateral movement slide assembly may be connected to a control mechanism such as a cam mechanism with a cam or alternatively a level mechanism a solenoid mechanism or some other actuating means. Cam mechanism is connected to a cam controller responsible for controlling a lateral position of positioning wheel . As cam connected to cam mechanism and slide assembly moves positioning wheel and body assembly accordingly move laterally. Such lateral movement inwards toward the housing is detectable by the processor of the mobile station as a switch input actuation or depression of the positioning wheel key .

Although positioning wheel has been shown and described as one mechanism for use in navigating and moving through visually displayed information any suitable mechanism may be utilized for the present user interface techniques such a trackball UP DOWN LEFT and RIGHT keys a mouse and cursor mechanism or a touch screen display mechanism.

Beginning at a start block of the processor causes a map to be visually displayed in a display step of . Next a user input request to copy a location of the map is received through the user interface step of . In response to the user input request the processor produces a URL string corresponding to the location of the map step of . The URL string includes a server address and latitude and longitude coordinates corresponding to the location of the map. Another parameter such as a zoom parameter or a reference coordinate or sizing parameter may also be provided although such information may be implied or set by default as an alternative. The server address is an address to a server preferably a public domain server which is operative to provide map data in response to a request for the map data using the URL string. Specifically the URL string may have the following predetermined format for all such requests 

Subsequently the processor causes the URL string to be inserted in the electronic file or message step of preferably for communications to another communication device. The electronic file or message may be an e mail file or message a calendar file or message a task file or message or a map file or message as examples. Steps and may be triggered and performed automatically by the processor in response to the request in step without further user intervention. Alternatively step may be a first user input request to invoke a COPY function and step performed in response to receiving a second user input request to invoke a PASTE function.

Beginning with a start block of step an electronic file or message which includes a uniform resource locator URL string is received by the processor step of . The electronic file or message may be an e mail file or message a calendar file or message a task file or message or a map file or message as examples. The URL string includes a server address and latitude and longitude coordinates corresponding to the location of the map. Another parameter such as a zoom parameter or a reference coordinate or sizing parameter may also be provided although such information may be implied or set by default as an alternative. The server address is an address to a server preferably a public domain server which is operative to provide map data in response to a request for the map data using the URL string. Specifically again the URL string may have the following format for all such location rendering 

Next a user input request to select the URL string in the electronic file or message is received via the user interface from the end user step of .

In response to the user input request in step the processor causes a map of a location corresponding to the latitude and longitude coordinates to be visually displayed in the display step of . Step is preferably triggered and performed automatically by the processor in response to the request in step without further user intervention. As will be described later below in relation to processing of the received URL string may be handled differently depending on the type of device or whether a predetermined mapping application is installed in the device so that mapping functionality is provided in different environments.

In one scenario of step when the device has the mapping application installed the processor may first identify whether map data corresponding to the map of the location is available in its memory cache from a previous rendering of the map. If the map data is available in its cache the processor selects this cached map data to render the map of the location. If the map data is not available in the cache however the processor must retrieve the map data from an external source. In this case the user input request causes the processor to act on the URL string by sending a request message for the map data to the server at the server address. The request message includes the latitude and longitude coordinates and any other information to the server as input parameters. A source address of the communication device is also received at the server along with the request. In response the server operates to receive and process the request to retrieve map data for the rendering of the map at the location corresponding to the latitude and longitude coordinates. The server then operates to respond to the request of the communication device by sending a response message which includes the map data to the communication device at its address. The processor of the communication device receives the map data and causes the map of the location to be visually displayed in the display.

Specific examples of the techniques of are now illustrated with reference to for providing and utilizing map locations in user applications with use of the URL strings.

In describing the method of the steps of the flowchart may be referred to in combination with components in . Beginning with the flowchart of a URL string of the type specified above is received in an electronic file or message at a computer device step of . For example the URL string may be received in hypertext link format according to one of the methods described previously in relation to One example of the URL string is revealed in the box in step of e.g. bbplanet1.ottawa.testnet.rim.net lat 45.44328 Ion 75.69311 z 3 . The URL string may be referred to more generally as a hypertext link mapping indicator since alternative indicators may be displayed in its place e.g. icon or other graphics or text with the actual URL string being hidden. In this approach the hypertext link mapping indicator or URL string may be received at one of three different types of computer devices a computer device such as a personal computer PC desktop or laptop or mobile communication device which has the predetermined mapping application installed therein e.g. in mobile communication device having mapping application operating in carrier network a mobile communication device of the same type above without the predetermined mapping application installed therein e.g. in a mobile communication device operating in carrier network or a computer device such as a PC desktop or laptop without the predetermined mapping application installed therein e.g. in a computer connected to the Internet .

In response to an end user selection of the URL string via the user interface the computer device causes processing associated with the URL string to occur for mapping the location specified in the URL string. If the computer device that processes the URL string has the predetermined mapping application installed as identified at step e.g. the computer device is mobile device having mapping application in then the technique for rending the map is performed with use of the installed mapping application as described earlier above e.g. see and using map data from the device s cache or obtained from the network server database as when needed step of . Note that the predetermined mapping application operating in connection with the associated network server s as needed is optimized and preferred for use with this device in terms of memory usage and processing power and provides an interactive map interface. The computer device having the predetermined mapping application is adapted to make the decision in step with use of a URL hook associated with the URL string which is registered when the mapping application is installed in the device. In response to the end user selection of the URL string the computer device may identify all or a portion of the selected URL string e.g. bbplanet1 which triggers the mapping functionality in the device. Thus in response to the end user selection of the URL string for this type of device a mapping function of the mapping application installed in the device is invoked to render a map of the specified location in the URL string.

If the predetermined mapping application is not installed or provided in the computer device as identified in step e.g. the computer device is mobile device without having the predetermined mapping application in however then the processor causes a request for an HTML page to be sent to the server address of the server specified in the URL string step of FIG. . The server is preferably the map coordinating server in . In step of the flowchart this process is indicated as request index.php . If the computer device has a predetermined browser type e.g. mobile device browser or is a predetermined mobile device type as tested in step of by the map coordinating server then flow proceeds to step of . In step the computer device e.g. the predetermined type of mobile device not a PC or laptop computer receives the HTML data from the map coordinating server and causes the HTML page which contains an image of the map to be displayed step of . Since the computer device may be a mobile communication device having relatively limited processing power and memory capability the map image is preferably a fixed image e.g. a bitmap such as a fixed and non interactive image or other different type.

The image of the map may be obtained by the map coordinating server through steps and of now described. In steps and responsive to the end user s request the map coordinating server causes a request for the map image to be sent to a server address of a public map server e.g. public map server of step of request device map.php . In response a portable network graphics PNG image is created and obtained step of . Specifically a screen size is obtained using resource description framework RDF identified in the URL string specified in a HTTP PROFILE HTTP header of the request. A default screen size may be provided as an alternative e.g. defaulting to 234 320 if the header or resource is not available. Tile numbers are calculated based on the requested latitude and longitude coordinates and zoom and screen size. Tiles associated with these tile numbers are fetched from the public map server having the tiles stitched together and assembled with other information such as a location marker and copyright information etc. which are added. The generated image is returned to the requesting computer device by the map coordinating server and displayed in the display of the computer device. Again the map image displayed in steps and is preferably not provided with an interactive map interface capability but rather merely a fixed image without end user manipulation capability.

The HTML page displayed in step of may further contain and display a link e.g. a hypertext link to a server address of a download server for downloading the mapping application. Thus the map coordinating server may produce data to generate this link on the same page as the map image for the mobile communication device. The download server may or may not be the same server as the map coordinating server. The link may be or include an invitation to the end user to download the predetermined mapping application. In response to an end user selection of such link through the user interface the mobile communication device causes a mapping application download page from the server at the server address to be displayed. From there a mapping application download for downloading the predetermined mapping application to the computer device may be initiated in response to an end user selection of an associated link. Alternatively the mapping application download for the predetermined mapping application may be initiated in response to an end user selection of the initial link which is contained and displayed on the same HTML page as the map image.

Next if the computer device fails to have the predetermined mobile browser type or is not the predetermined mobile device type identified in step of then flow proceeds to steps and of for a computer device which is a desktop PC or laptop with relatively larger memory and processing power. In this case the computer device causes a request to be sent step request desktop.php to the server address specified in the URL string e.g. map coordinating server of and an HTML page of a map is obtained and displayed at the communication device in response step . Although the request was made to the map coordinating server the request was actually redirected to a public map server e.g. public map server of which provides for interactive mapping ability and functionality e.g. a Google Maps server associated with a Google Maps application . Thus communication by the computer device with this other predetermined server may be initiated through a redirection to that server from the map coordinating server. The map of the location is provided in the display of the computer device where a JavaScript Application Programming Interface API may be provided e.g. Google Maps JavaScript API and the API may be used to display the location map and add a location marker. Thus interactive map functionality is provided for computer devices having suitable memory and processing power capabilities.

Advantageously processing of the received URL string may be handled differently depending on the type of device or whether a predetermined mapping application is installed in the device so that suitable or optimized mapping functionality is provided in different types of device environments.

Thus as described herein a method for use in mapping a location in a computer device includes the steps of receiving an electronic file or message which includes a hypertext link mapping indicator associated with a uniform resource locator URL string having a server address and latitude and longitude coordinates receiving through a user interface of the computer device an end user selection of the hypertext link mapping indicator in the electronic file or message and in response to the end user selection of the hypertext link mapping indicator if a predetermined type of mapping application is provided in the computer device invoking a mapping function of the mapping application to produce a map of a location corresponding to the latitude and longitude coordinates for visual display in a display of the computer device e.g. based on received maplet data and if the predetermined type of mapping application type is not provided in the computer device requesting and receiving map data from a map coordinating server identified by the server address of the URL string to produce a map of the location for visual display in the display e.g. based on a bitmap image . If the predetermined type of mapping application is not provided in the computer device and the computer device or associated browser is identified as not being that of a mobile communication device i.e. the computer device has higher processing capabilities then the computer device causes a request to be sent to the map coordinating server at the server address and in response to the request receives a redirection from the map coordinating server to an interactive map server at an interactive map server address and further requests and receives map data from the interactive map server at the interactive map server address to produce a map of the location for visual display in the display. Advantageously processing of the received hypertext link mapping indicator is handled differently depending on the type of device or whether a predetermined mapping application is installed in the device so that optimal mapping functionality is provided for different device environments.

The above described embodiments of the present disclosure are intended to be examples only. Those of skill in the art may effect alterations modifications and variations to the particular embodiments without departing from the scope of the invention. The invention described herein in the recited claims intends to cover and embrace all suitable changes in technology.

