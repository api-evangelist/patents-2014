---

title: Data-related task support in wireless communication systems
abstract: Apparatuses may stay synchronized with a network via a beacon signal that is transmitted at a set interval. Various communication-related activities may be planned around an instance when a beacon signal is expected, or a target beacon transmission time (TBTT). While some networked apparatuses are active during every TBTT, other apparatuses may operate using a diluted beacon period that is an integer multiple of the network beacon signal interval. Diluted beacon intervals may initiate periods of time during which apparatuses may become “aware” of other apparatuses. Awareness may comprise information related to communication configuration, apparatus status, and services offered by the various apparatuses in the network. Awareness information obtained during an awake window may also comprise information on data-related tasks that are pending in one or more apparatuses which may allow for the control of further data conveyance activities.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09307551&OS=09307551&RS=09307551
owner: Nokia Technologies Oy
number: 09307551
owner_city: Espoo
owner_country: FI
publication_date: 20140616
---
This application is a continuation of U.S. application Ser. No. 12 635 400 filed Dec. 10 2009 the entire contents of which are incorporated herein by reference.

Embodiments of the present invention pertain to wireless communication and in particular to supporting data related tasks in wireless communication systems.

Wireless communication has evolved from being a means for verbal information to being more focused on total digital interactivity. Enhancements in wireless technology have substantially improved communication abilities quality of service QoS speed etc. which has contributed to an insatiable desire for new device functionality. As a result portable wireless apparatuses are no longer just tasked with making telephone calls. They have become integral and in some cases essential tools for managing the professional and or personal life of users.

In order to support the desired expansion of electronic communication more and more applications that did not incorporate any communication functionality are being redesigned to support wired and or wireless communication. Such wireless communication support may in some instances include the ability to send monitored or observed data to other apparatuses via wireless communication. Example usage scenarios may include natural resource monitoring biometric sensors systems for supporting financial transactions personal communication and or location devices etc. Apparatuses such activities and subsequent communications often operate using limited resources. For example these apparatuses may be simple e.g. may have limited processing resources may be small e.g. may have space constraints due to size limitations imposed in retrofit applications may have power constraints e.g. battery powered etc.

Link establishment and maintenance processes defined in existing communication protocols may not be appropriate for apparatuses operating with resource constraints such as set forth above. For example standards for existing wireless communication protocols may require lengthy interaction in order to keep apparatuses participating in the network synchronized with other apparatuses wherein such interaction may comprise either continuous or periodic network participation. These requirements may not take into consideration the burden that such extensive network communication places upon resource constrained devices. As a result it may become difficult to operate such resource constrained apparatuses in accordance with these standards.

Example embodiments of the present invention may be directed to a method apparatus computer program and system for facilitating apparatus interaction while conserving apparatus resources. In accordance with at least one example implementation apparatuses may stay synchronized with a network via a beacon signal that is transmitted at a set interval. Various communication related activities may be planned around an instance when a beacon signal is expected which may also be known as a target beacon transmission time TBTT . While some networked apparatuses may be able to be active during every TBTT other apparatuses may find this practice too burdensome due to the resources required by such behavior. In this regard a diluted beacon period based on an integer multiple of the network beacon signal interval may be established that may lessen the burden on apparatuses since communication is less frequent.

The diluted beacon interval may initiate periods of time during which apparatuses may communicate within the network. This period of time or awake window may initially allow apparatuses to become aware of the current disposition of other apparatuses. Awareness may comprise information related to communication configuration apparatus status and services offered by the various apparatuses in the network. Further in accordance with at least one embodiment of the present invention awareness information obtained during an awake window may also comprise information on data related tasks that are pending in one or more apparatuses.

Data related tasks may comprise for example information regarding data that has been published by an apparatus in order to make the data available to other apparatuses in the network. Published data may be of interest to e.g. may be required or desired by apparatuses in the network. Obtaining this published data may however require much more bandwidth than is currently available in the network. In accordance with various example implementations of the present invention an apparatus may alter its configuration in order to perform data related tasks such as obtaining published data from an apparatus that is publishing its availability.

Altering the configuration of an apparatus may depend on whether the current protocol being implemented supports data sub mode operation. For example the protocol being implemented in order to form the network over which awareness information is obtained may also support a data sub mode operation. Data sub mode operation may temporarily allocate communication resources to support more substantial messaging. The apparatus may continue operation in the data sub mode until the data related task is complete or until the time allocated for the data sub mode is complete. This may occur for example just before the start of the next awake state period. In situations where a data sub mode is not supported by a communication protocol the apparatus may switch to an alternative communication protocol. For example the apparatus may establish a wireless link with a new protocol in order to support data transmission.

The above summarized configurations or operations of various embodiments of the present invention have been provided merely for the sake of explanation and therefore are not intended to be limiting. Moreover inventive elements associated herein with a particular example embodiment of the present invention can be used interchangeably with other example embodiments depending for example on the manner in which an embodiment is implemented.

While the present invention has been described herein in terms of a multitude of example embodiments various changes or alterations can be made therein without departing from the spirit and scope of the present invention as set forth in the appended claims.

An example system usable as a basis for explaining the various embodiments of the present invention is disclosed in . The apparatuses and configurations shown in are merely representative and thus may be included in or omitted from actual implementations.

Computing device may correspond to various processing enabled apparatuses including but not limited to micro personal computers UMPC netbooks laptop computers desktop computers engineering workstations personal digital assistants PDA computerized watches wired or wireless terminals nodes etc. mobile handsets set top boxes personal video recorders PVR automatic teller machines ATM game consoles or the like. Elements that represent basic example components comprising functional elements in computing device are disclosed at . Processor may comprise one or more components configured to execute instructions for instance wherein a group of instructions may constitute program code. In at least one scenario the execution of program code may include receiving input information from other elements in computing device in order to formulate an output e.g. data event activity etc. . Processor may be a dedicated e.g. monolithic microprocessor device or may be part of a composite device such as an ASIC gate array multi chip module MCM etc.

Processor may be electronically coupled to other functional components in computing device via a wired and or wireless bus. For example processor may access memory in order to obtain stored information e.g. program code data etc. for use during processing. Memory may generally include removable or imbedded memories that operate in a static or dynamic mode. Further memory may include read only memories ROM random access memories RAM and rewritable memories such as Flash EPROM etc. Examples of removable storage media based on magnetic electronic and or optical technologies are shown at 100 I O in and may serve for instance as a data input output means. Code may include any interpreted or compiled computer language including computer executable instructions. The code and or data may be used to create software modules such as operating systems communication utilities user interfaces more specialized program modules etc.

One or more interfaces may also be coupled to various components in computing device . These interfaces may allow for inter apparatus communication e.g. a software or protocol interface apparatus to apparatus communication e.g. a wired or wireless communication interface and even apparatus to user communication e.g. a user interface . These interfaces allow components within computing device other apparatuses and users to interact with computing device . Further interfaces may communicate machine readable data such as electronic magnetic or optical signals embodied on a computer readable medium or may translate the actions of users into activity that may be understood by computing device e.g. typing on a keyboard speaking into the receiver of a cellular handset touching an icon on a touch screen device etc. Interfaces may further allow processor and or memory to interact with other modules . For example other modules may comprise one or more components supporting more specialized functionality provided by computing device .

Computing device may interact with other apparatuses via various networks also shown in . For example communication hub may provide wired and or wireless support to devices such as computer and server . Communication hub may also be coupled to router allowing devices in the local area network LAN to interact with devices on a wide area network WAN such as Internet . In such a scenario another router may transmit information to and receive information from router so that devices on each LAN may communicate. Further all of the components depicted in this example configuration are not necessary for implementation of the present invention. For example in the LAN serviced by router no additional hub is needed since this functionality may be supported by the router.

Further interaction with remote devices may be supported by various providers of short and long range wireless communication . These providers may use for example long range terrestrial based cellular systems and satellite communication and or short range wireless access points in order to provide a wireless connection to Internet . For example personal digital assistant PDA and cellular handset may interact with computing device over Internet as facilitated by wireless communication . Similar functionality may be also be included in other apparatuses such as laptop computer in the form of hardware and or software resources configured to allow short and or long range wireless communication.

Wireless enabled apparatuses are labeled A to G in . Apparatuses may for example correspond to any of the wireless enabled apparatuses that were disclosed in and may further include at least the resources discussed with respect to apparatus . These apparatuses may further operate utilizing at least one common wireless communication protocol. That is all of the apparatuses disclosed in may interact with each other within the operational space and thus may participate together in a wireless communication network.

An example communication between apparatuses in accordance with at least one embodiment of the present invention is disclosed at in . While only two apparatuses A and B are shown the example disclosed in has been presented for explanation only and is not intended to limit the scope of the present invention. Various embodiments of the present invention may readily facilitate wireless interaction between more than two apparatuses.

Additional detail with respect to communication example is disclosed further in . Apparatus A may have communication requirements that require interaction with apparatus B. For example these requirements may comprise interactions by apparatus users applications residing on the apparatuses etc. that trigger the transmission of messages that may be generally classified under the category of data type communication . Data type communication may be carried out using messages that may be wirelessly transmitted between apparatus A and B. However typically some form of wireless network link or connection needs to be established before any data type communication messages may be exchanged.

Network establishment and media access control MAC management messages may be utilized to establish and maintain an underlying wireless network architecture within an operating space that may be utilized to convey data type communication messages . In accordance with various example embodiments of the present invention messages containing apparatus configuration operation and status information may be exchanged to transparently establish wireless network connections when for example an apparatus enters an operating space. Network connections may exist between any or all apparatuses existing within the operating space and may be in existence for the entire time that an apparatus resides in the operating space. In this way data type communication messages may be conveyed between apparatuses using existing networks new network connections do not need to be negotiated each time messages are sent which may reduce response delay and increase quality of service QoS .

In accordance with at least one embodiment of the present invention an example of distributed local network formation via automated network establishment and MAC management messages is disclosed in . Apparatuses entering into operational space may immediately initiate network formation through the exchange operational information. Again the exchange of this information may occur without any prompting from or even knowledge of a user. Example interactivity is shown in wherein various network establishment and MAC management messages are exchanged between apparatuses A to G. In accordance with at least one example embodiment of the present invention messages may be exchanged directly between an originating apparatus e.g. the apparatus that is described by information elements contained in a message and a receiving apparatus. Alternatively messages corresponding to apparatuses in operational space may be forwarded from one apparatus to another thereby disseminating the information for multiple apparatuses.

An example of information that may be communicated in network establishment and MAC management messages e.g. using information elements in accordance with at least one example embodiment of the present invention is disclosed in . The activity flow disclosed at represents an example implementation based on the wireless local area networking WLAN standard as defined in the IEEE 802.11 specification. However embodiments of the present invention are not limited only to implementation with WLAN and thus may be applied to other wireless network architectures or communication protocols.

The WLAN logical architecture comprises stations STA wireless access points AP independent basic service sets IBSS basic service sets BSS distribution systems DS and extended service sets ESS . Some of these components map directly to hardware devices such as stations and wireless access points. For example wireless access points may function as bridges between stations and a network backbone e.g. in order to provide network access . An independent basic service set is a wireless network comprising at least two stations. Independent basic service sets are also sometimes referred to as an ad hoc wireless network. Basic service sets are wireless networks comprising a wireless access point supporting one or multiple wireless clients. Basic service sets are also sometimes referred to as infrastructure wireless networks. All stations in a basic service set may interact through the access point. Access points may provide connectivity to wired local area networks and provides bridging functionality when one station initiates communication to another station or with a node in a distribution system e.g. with a station coupled to another access point that is linked through a wired network backbone .

In wireless network architectures like WLAN beacon signals may be utilized to synchronize the operation of networked apparatuses. In situations where new ad hoc networks are being created the initiating apparatus may establish standard network beaconing based on it owns clock and all apparatuses that join the network may conform to this standard beacon. Similarly apparatuses that desire to join an existing wireless network may synchronize to the existing beacon. In the case of WLAN apparatuses may synchronize to beacon signals utilizing a timing synchronization function TSF . The timing synchronization function is a clock function that is local to an apparatus that synchronizes to and tracks the beacon period.

An example of a beacon signal is shown in at wherein a target beacon transmission time TBTT indicates the targeted beacon transmission. This time may be deemed targeted because the actual beacon transmission may be a somewhat delayed from the TBTT due to for example the channel being occupied at TBTT. The apparatuses that are active in the network may communicate with each other in accordance with the beacon period time between two beacon transmissions . However there may be instances where it may not be beneficial and may possibly even be detrimental for apparatuses to be active during each beacon period. For example apparatuses that do not expect frequent communication within the wireless network may not benefit from being active for every beacon period. Moreover apparatuses with limited power or processing resource may be forced to waste these precious resources by the requirement of being active for every beacon period.

In accordance with at least one embodiment of the present invention functionality may be introduced utilizing the example distributed wireless network described above to allow apparatuses to operate at a standard beaconing rate that has been established in the network or alternatively using a diluted beaconing rate. Diluted beaconing may comprise a beaconing mode operating at a lower frequency than the standard beaconing rate originally established in the network. Diluted beaconing may be based on information e.g. information elements that is included in network beacon frames wherein the included information may express one or more diluted beacon rates as multiples of the beacon. Using the beacon and the one or more associated diluted beacon period indications contained within beacon frames networked apparatuses may elect to operate e.g. via random contention based either on the standard beacon or a diluted beacon period. In particular all apparatuses may synchronize to the same initial target beacon transmission time TBTT for example when TSF 0 and may then count the number periods that occur after the initial TBTT based on the internal TSF function. In this way apparatuses operating using a diluted beacon period may be active on TBTT counts that corresponds to the multiple defined by the diluted beaconing period.

An example diluted beacon interval of every 10TBTT is disclosed in at . The decision on a beacon interval to utilize may be handled by each apparatus individually e.g. in the protocol stacks that manage operation of a radio modem . All apparatuses will then in accordance with at least one embodiment of the present invention operate based on a beacon interval that remains the same for the lifetime of the network. In view of the requirement that the beacon interval remain unchanged for the duration of the wireless network the diluted beacon signal may be expressed as a multiple of the beacon signal. Starting intervals may be defined by the apparatus that formed the network and in the example disclosed in and as previously set forth the first TBTT is equivalent TSF 0. Other apparatuses that subsequently join the network may adopt this beacon interval parameter and TBTT timing. For example the TBTT at TSF 0 is the base point that determines when beacons are transmitted. All the devices in the network may update their own TSF counters as per legacy synchronization rules and from the TSF they may determine the particular TBTT in which to participate in beaconing assuming that regardless of the beacon interval the first beacon was transmitted at TSF 0.

For example in a network comprising four apparatuses where devices and operate using a diluted beaconing mode having a beacon interval e.g. a time period between beacon transmissions of every 6TBTT all apparatuses may remain synchronized even though only device may be active e.g. competing in all beaconing periods and e.g. all apparatuses may participate in TBTT TBTT TBTT etc. Therefore there can be at least two different beacon periods among the apparatuses and possibly further diluted beacon periods as other groups of apparatuses may have selected their own diluted beaconing period based on the original beaconing period and the one or more associated diluted beacon period indications transmitted therewith.

In accordance with at least one example embodiment of the present invention beacons will contain a diluted beacon period parameter. The diluted beacon period parameter may for example be carried in vendor specific information elements IEs . Diluted beacon period parameter values may remain the same for the lifetime of the network. However should there be need for more flexibility other beacon intervals may be defined and all of the defined beacon intervals may be signaled in a manner similar to the diluted beacon interval.

Possible awake windows for an apparatus that is participating in the network are further shown in an example of which is identified at . These active periods occur in accordance with each transmitted TBTT and therefore may be deemed aligned with the normal network beacon period. These awake windows do not necessarily represent that an apparatus has planned activity e.g. messages queued for transmission during these time periods. On the contrary they are merely periods of time when apparatuses may be active and therefore will be able to transmit messages to and or receive messages from other apparatuses in the network.

The behavior of another example apparatus in accordance with at least one embodiment of the present invention is further disclosed at . While all apparatuses in the network will operate based on the same origin point e.g. TSF 0 and normal beacon period e.g. as set forth by the TBTT each apparatus may select an operational mode based upon the one or more diluted beacon period indications that are transmitted in the beacon. For example the apparatus corresponding to the activity disclosed at is operating utilizing diluted beacon period which is a multiple 4 in this scenario. Therefore diluted beacon period may involve beacon transmissions per every four TBTTs. Awake windows for example as shown at may also occur in accordance with the diluted beacon period . In at least one example implementation the awake windows may begin just prior to the commencement of the diluted beacon period.

The duration of awake windows while configured at constant duration by a predetermined information element IE in the beacon may end up being variable in actual practice. For example the awake window may be based on a MAC parameter that is similar to the beacon interval and diluted beacon period parameters. A host in the beaconing apparatus may determine it and provides it to the modem for transmission in the beacon. It may be communicated using for example a general or vendor specific information element IE as with the beacon interval and diluted beacon period. Upon awake window expiration apparatuses may attempt to transition to a doze or sleep state. However doze state transitions may occur earlier or later based on the particular control methodology employed such as that discussed in .

The N EQC state may comprise optional implementations Legacy and Beacon Prioritized . Using Legacy implementation upon receiving or transmitting a beacon channel contention may be executed as in legacy devices for example as defined by the channel access rules specified in the particular wireless communication medium. Legacy implementation represents an example of channel contention in accordance with an existing set of access control rules between and . Once the apparatus gains access to media at it will obtain a transmission opportunity TXOP during which it may transmit frames to the network e.g. if one or more frames are queued for transmission. TX as shown between and in represents the transmission of any queued messages. Further frames may be received from the network as acknowledgements to the transmitted frames in the TX period.

In Beacon Prioritized implementation the apparatus that has transmitted the network beacon is permitted to continue transmitting any frames that are queued for transmission in its transmit buffers. The apparatus obtains a TXOP for beacon transmission and once it has transmitted the beacon at it may automatically obtain a new TXOP as shown at to transmit any frames that are pending in its transmit buffers. In the disclosed example the new TXOP may start after a short interframe space SIFS period following the end of the beacon frame which is represented in example by the space shown between and .

Once the apparatus has completed transmission e.g. emptied its transmission buffers it shall enter into an EQC state as shown in implementations and at and respectively. If an apparatus has no frames for transmission during a beacon interval the device transition directly into an EQC state after the beacon reception transmission e.g. at . When in the EQC state apparatuses may try to obtain a TXOP for a given number of times determined for example by a RepeatEmptyQueueContention parameter . Upon obtaining a TXOP apparatuses without pending messages may attempt to obtain a new TXOP as shown at and in implementations and respectively instead of initiating the transmission of a frame sequence. Devices that obtain a number of TXOPs that is equal to a predetermined threshold value e.g. RepeatEmptyQueueContention times during a beacon interval may enter into doze or sleep state. In example implementations and in this may occur at and respectively. All of these events may happen before awake window expires. Moreover example legacy implementation and example beacon prioritized implementation both assume that the message transmissions between and as well as and respectively succeed and thus no frames are pending for re transmission beyond this point.

In accordance with at least one embodiment of the present invention apparatuses may automatically obtain contextual information regarding the local environment via apparatus to apparatus communication networks e.g. via ad hoc networking . As used herein awareness information may comprise information and or context about a local environment as well as the users and corresponding apparatuses in the local environment. By way of example awareness information may be used for social networking applications determining user presence location determining contexts associated with an apparatus advertising searching for information etc.

For example ad hoc networking schemes may build upon an existing wireless protocol such as the IEEE 802.11 WLAN standard. While WLAN has been referenced herein for the sake of explanation the various embodiments of the present invention are not specifically limited to utilizing WLAN. Continuing with the IEEE 802.11 example the standard WLAN ad hoc mode may be modified in accordance with the prior disclosure e.g. so that apparatuses may operate utilizing a diluted beacon period to allow for always on operation suitable for a large number of apparatuses while not being overly resource intensive. As the result an operational mode for WLAN may be created to allow for easy conveyance of awareness information. It may have some elements of the standard ad hoc mode but it is intended to be an operation of its own. Ad hoc networking that allows for always on operation and which may be built upon periodic awake state periods such as disclosed above may be deemed awareness networking and in addition a similar operational mode for WLAN may be called awareness operation mode. 

An example usage scenario may help clarify how various embodiments of the present invention may be employed in wireless communication. A user may create data e.g. files in an apparatus and make this data available for other users. In this regard the apparatus of the user may have the ability to exchange awareness information and in accordance with at least one embodiment of the present invention may utilize this functionality to facilitate the localized sharing of the data by making the operational environment e.g. apparatuses participating in the network aware of the shared published data. In looking for the shared published data or while searching for a similar type of data a user may observe that this data is being offered. A match between shared published data and desired required data may initiate an actual transfer of data.

The amount of information exchanged between devices during the publishing and search phases would be minimal and therefore may be supported using a less robust operational scheme such as awareness networking implemented for example in the form of an awareness operational mode. However when a transfer involving the shared published data occurs it may require substantially more bandwidth than is available in awareness networking. Moreover as other data transfer protocols may be better suited e.g. more reliable for transferring substantial amounts of data there would be no reason to use lower capacity awareness communication tools for actual data transfers. So after the initial publishing of data and search phases the previously discussed operational scheme for sharing awareness information may also be used to configure and initiate actual data transfer utilizing related protocols and transport technologies.

In accordance with at least one embodiment of the present invention apparatuses may initially exchange small amounts of information pertaining to awareness. In the publishing and search phases this information may be related to identifying published data and matching it with apparatus requirements. If a user finds the published data attractive and decides to examine it awareness networking operations may be used to exchange information related to setup and configuration of data transfer services and related high bandwidth IP networking technology. So in addition to awareness information common awake state periods may be used for signaling IP service setup and configuration information. The actual exchange of service data may then require wireless communication solutions that can provide higher bandwidth than the low duty cycles provided during awake state periods and a level of reliability e.g. quality of service QoS that can t be provided by the protocols that are used for awareness information delivery.

An example communication structure usable in accordance with various embodiments of the present invention is disclosed in . Apparatus comprises two types of operation. Always active stack may be responsible for providing awareness information over ad hoc mesh networks. Awareness maintenance application may use the services of the protocol stack and local ad hoc mesh network . Application may exploit awareness information regarding the local environment via a protocol stack API provided in the apparatus.

A traditional data centric service application stack is also disclosed in . It may typically be run over IP and may be a service application that is inactive most of the time. Data intensive applications may include simple file transmission downloading applications that utilize IP stack in order to establish connectivity with other apparatuses. Control application program interface API between awareness maintenance application and data intensive applications may make the always active services available to typically inactive IP services . Control API may be responsible for communication activities that configure launch and manage operations for typically inactive services as disclosed at in . As an example always active services may advertise actively or passively services on IP side . It may also advertise data available in an apparatus data that can be retrieved from an apparatus by using IP stack . Always active services may also provide services for information search so that a determination may be made as to whether there are desired required resources e.g. services or data that are locally available. The underlying stack architecture may also support services and applications configured to support IP networking.

In this framework and context only always active services are active almost all of the time in apparatus while typically inactive services remain idle. Always active services keep on running over a proper low power low duty cycle local ad hoc networking solution e.g. diluted beacon interval . Traditional services and applications may only activate on an as needed basis. A criteria for activation may be the need for networking and data transmission using a server client model. Configuration and activation may be supported by always on services after relevant signaling that occurs between apparatuses in the network.

An example of a process by which information may be published located and obtained is disclosed in . Initially user may determine that data is to be shared. User utilizes apparatus and may issue a ShareFileReq command to an awareness management AM application . This command may trigger the issuance of a RCE SHARE FILE REQ message to AM protocol layer which may be confirmed and may then further trigger an indication that the data has been published in the form of RC PUBLISH ITEM IND message to AM application in apparatus . A user of apparatus may then review accept the published data e.g. file and then issue a SearchFileRequest command in apparatus . This command may then trigger the issuance of a RC SEARCH FILE REQ message from AM application and AM protocols in apparatus to AM protocols in apparatus . After receiving confirmation an RC SEARCH FILE RESULT IND message which comprises transferParams in the searchResults field of the message may be returned to AM application in apparatus .

If the user of apparatus decides that the published data is desired required a GetFileStartReq command may be issued by AM application in apparatus . A RC GET FILE START REQ may then be transmitted and confirmed by AM Protocols in order to initiate the download of the desired required data. Periodic process updates may be provided to apparatus in the form of RC DOWNLOAD PROGRESS IND messages. These progress messages may include the bytesDownloaded primitive which may inform apparatus of the amount of the data download that has been completed. The download may then terminate with a RC FILE STOP IND message.

The example of is explored in further detail with respect to . The disclosed example expands upon the roles of file transfer protocols FTP and and file transfer application programming interfaces FT API and . This process is similar to in that an application first transmits messages via network to FT API in order to publish data. Publishing the data causes indication message to be transferred to network and then application . FT API may then initiate services in FT API through a series of commands in order to activate file distribution services in apparatus . Eventually file transfer may be conducted between FTP and . Progress indicators are available during the process in order to update apparatus as to the status of the download. The process may then terminate via a series of commands that terminate services in both apparatus and apparatus .

In most instances IP services are locally accessible to surrounding apparatuses. Thus the most suitable connection technology in many cases may be WLAN ad hoc or a similar communication technology with which devices close to each other can directly exchange large amounts of data with IP networking in a peer to peer manner. More advanced implementations may also allow data to be exchanged over multiple hops via WLAN ad hoc network technology. For example a searcher may request access to take a closer look at files provided by a publisher. In practice this would require a traditional server client relationship between the two apparatuses in order to obtain the file e.g. to download the file from the publisher apparatus . Additionally the apparatuses may communicate utilizing an IP protocol for exchanging the data.

In accordance with at least one embodiment of the present invention operations related to the exchange of awareness information may be used here to convey configuration information between apparatuses. It may also trigger activation of the IP services so that the published data may be conveyed to the requesting apparatus. If for example the published file comprises multimedia information e.g. video and or audio information the lower bandwidth awareness network operation may further trigger streaming and media file consumption over the previously configured and activated IP connection. Alternatively file transfer services may be activated in order to obtain a published file from a publishing apparatus to a searching apparatus.

Streaming and or downloading may occur utilizing standard protocols such as TCP IP UDP RTP FTP etc. An example of such a process is disclosed with respect to . Initially the example shown on the left hand side of the page discloses that IP stack is not actively communicating utilizing any form of connectivity. However at control API may configure and launch connectivity . Typically inactive services may then notify awareness maintenance application of information such as IP information connectivity information and application related information at . As the result the two apparatuses may establish IP connectivity for data transfer. After the data has been streamed or transferred there may no longer be a need to keep the transfer specific resources active. These resources may then be deactivated and always on services may be used for further awareness signaling. Thus at the end the apparatuses may again be in a situation where only always on services are active.

The above approach in which a separate WLAN ad hoc network is created for supporting service data delivery e.g. to retrieve shared published data as in the above example is straightforward but includes inherent problems. Apparatuses would need to be able to operate both a low bandwidth network and a service data ad hoc network concurrently. Most existing apparatuses systems do not have the capability to handle multiple concurrent WLAN instances. Moreover a new ad hoc network may increase signaling overhead and thus the probability for radio coexistence problems. As an example there may be two independent WLAN ad hoc type networks beaconing in parallel an awareness network e.g. operating using a diluted beacon period and a legacy ad hoc network for data transmissions. These two networks may contend for the same media and transmission capacity even if the apparatuses operate in both networks.

In accordance with at least one embodiment of the present invention operating using a service data sub mode in an awareness network may allow for the transmission of both protocol stack messages and IP datagrams as well as relevant required protocol messages such as address resolution protocol ARP messages. Service data sub mode may be activated via signaling over protocol stack and once the sub mode is activated the apparatus can use an awareness network with both diluted beacon interval operation and with normal beacon interval operation also for protocol messages related to the IP based service. An example implementation for an awareness network that is also able to support a data sub mode is disclosed with respect to . The example is similar to except that a separate network connection does not have to be established at since the existing network configuration that is being utilized for conveying awareness information may also support the conveyance of data utilizing a data sub mode in the awareness network.

All apparatuses that are involved in service data delivery may operate using this sub mode and may determine their power state in accordance with sub mode related transition rules. Consequently apparatuses would not need to establish a separate WLAN ad hoc network for service data delivery but instead they use the awareness network for service data delivery as well. There are four aspects in the service data sub mode usage including media access rules sub mode activation signaling sub mode use and sub mode closure signaling. There may be separate time periods corresponding to awareness maintenance messages and data related messages. For example data related messages e.g. IP datagrams configuration protocol messages like ARP and all the required protocol messages that run over IP such as FTP and RTP may occur during dedicated periods of time that immediately follow awake state periods.

In accordance with the example disclosed in all service data messages may be transmitted during time periods that follow the awake state periods . As a result there may be dedicated time periods for awareness maintenance signaling and IP based service messages. Consequently an apparatus that supports a service data sub mode active may use a part of each beacon interval during which the apparatus is awake for beaconing for high bandwidth service data transmissions. We can rename these periods service data periods SDP and the awake state periods as control periods CP as illustrated in . While discloses an example of a diluted beacon interval activity data sub mode operation may be utilized in both diluted beacon operation schemes and in standard network operation e.g. where an apparatus can be active during every TBTT . Each apparatus that employs a service data sub mode may deem service data period active immediately after closing control period . Service data periods may then close at the next TBTT. Apparatuses need to ensure that all the service data packets are transmitted during the service data periods. If an apparatus operates per diluted beaconing rules the rules for service data period opening and closure may remain the same. However since apparatuses are not active at every TBTT service data periods occur only in beacon periods where the apparatus is awake for beaconing as per the beaconing rules.

Apparatuses may need to separate awareness information packets from service data packets typical IP packets . For example the WLAN MAC layer may utilize both types of data frames. In practice an apparatus needs to have separate logical or physical transmission queues for the two packet types to maintain the separation in time. All awareness information packets need to be transmitted during control periods and all service data packets need to be transmitted during service data period . In reception the WLAN MAC doesn t have to make separation between the two packet types. A possible solution may be to use the Protocol ID field in the link layer control LLC sub network access protocol SNAP packet header and reserve a value for awareness information. WLAN already uses this field and various other networking protocols e.g. IPv4 and IPv6 may be identified utilizing specific values of the field.

In accordance with at least one embodiment of the present invention renaming the awake state period may have no effect on the rules that may apply to operations occurring during that period which is further disclosed in . As opposed to which discloses an example of diluted beacon interval operation discloses an example where standard network operation allows an apparatus to be active for every beacon interval. All small packets related to awareness information and service setup and configuration may still be transmitted during control period . This is labeled in as awareness stack transmission . No IP messages or other traditional networking protocol packets are transmitted during that period but they may be transmitted during the subsequent service data periods . Therefore only IP stack transmissions may occur during service data periods . The only difference for scenarios where the service data sub mode is not in use is the time when the apparatus transitions into a doze state. When a service data sub mode is active apparatuses may remain in the awake state for the duration of service data period to make subsequent service data transmissions.

Apparatuses signal using protocol stack as to whether they have service data sub mode capability whether they are able to start using the service data sub mode and the time it will take for IP service frame transmission when needed. Sub mode activation timing can be either TSF based e.g. signaled to start at certain TBTT or implicit from the activation signaling phase. Before all this the apparatuses may have already signaled IP configuration information IP service protocol IP service application configuration and activation information using protocol stack . Data sub mode typically needs to be activated before protocol messages related to the IP can be transmitted during service data periods of an awareness network.

Details of the activation signaling may however depend on the type of IP based service. If a service is a point to point service in which data is transmitted in a unicast manner it may be more natural to utilize unicast point to point signaling in order to ensure that a service data sub mode has been activated in both apparatuses. If the transmission is implemented in multi hop manner using multiple wireless links a data sub mode must also be activated in all of the intermediate devices along the path from the source device to the destination. There are however some services like multimedia e.g. video and or audio streaming that are more effectively handled using groupcast transmission. In this instance receiving apparatuses should be allowed to activate a data sub mode at times when a user wants to start consuming the stream e.g. activation timing and related signaling has no critical timing requirements . It would be enough for the streaming apparatus to make the other apparatuses in the network aware of the service and use of the service data sub mode for service transmission. Apparatuses that want to receive the stream may then activate a data sub mode at any time while the streaming is active.

As disclosed in the Example of after service data sub mode activation is confirmed at activation time second TBTT from the left can be signaled either as a TSF value in a message before the given TBTT or the activation protocol rules may have timing rules for controlling the activation e.g. a data sub mode is activated on the next TBTT following the activation confirmation message as shown at . When the sub mode is active all messages from IP stack will be transmitted during the service data period. Service data sub mode closure may be signaled in a manner similar to the activation as shown at . Closure time can be indicated either as a TBTT or it may be implicit from the signaling phases e.g. a TBTT following a specific closure signaling message as shown at . Implication of IP service type may also be similar to the activation signaling. As an example a stream receiver can deactivate the sub mode at any time as long as the device is not along a multi hop path of the service but in point to point services deactivation must not happen before all IP service related transmissions are complete. Thus the source of the service may determine the time when the service closes and the service data sub mode is deactivated.

A flowchart of an example process in accordance with at least one embodiment of the present invention is disclosed with respect to . A new TBTT may be realized in step . The TBTT may be realized as a periodic network beacon signal received in an apparatus. A determination may then be made in step as to whether the apparatus should wake up. For example apparatuses operating using standard beaconing may wake up for every new TBTT while apparatuses that are participating using diluted beaconing may determine whether the current TBTT corresponds to the diluted beacon interval that the apparatus is utilizing for interacting with the network. If the current TBTT does not trigger the apparatus to wake up then in step the apparatus may remain in a doze state and then return to step in preparation for the next TBTT. If the current TBTT does cause the apparatus to wake up as determined in step then an awake window for the apparatus and a control period within the awake window may begin in step . Awareness management operations in step may be performed during the control period that began in step . Awareness management operations may comprise for example interacting with other apparatuses in the network in order to obtain apparatus identity information apparatus condition information communication configuration information available service information and or pending data task information etc.

In step the awareness information obtained in step may be evaluated in order to determine whether any data related tasks are pending. Data related tasks may comprise publishing data from the apparatus and or obtaining data published by another apparatus. If in step no data tasks are pending the process may proceed to step where a determination may be made as to whether control period for the current awake window is now complete. If the current control period is not complete the process may return to step for further awareness information related operations e.g. obtaining updated awareness information . If the control period is complete the apparatus may reenter a doze state in step and return to step in order to prepare for the next TBTT. If data tasks are determined to be pending in step then the process may proceed to step where a further determination may be made as to whether a data sub mode is supported by the communication protocol currently being employed. If no data sub mode is determined to be available then in step a further determination may be made as to whether another connection mode is available for supporting the pending data task. Other connection modes may include existing or new modes of communication using the same wireless transport or another wireless transport that may be more appropriate for supporting the data tasks. If no other connection mode is available then in step the pending data task may not currently be supported e.g. the task cannot currently be completed . The process may then return to step in order to determine if the control period is complete. If another connection mode is determined to be available then the data related task may be performed using the other connection in step . After the data related task is complete in step the apparatus may enter the doze state in step and return to step in preparation for the next TBTT.

Alternatively if in step a determination is made that a data sub mode is available then the process may move to step where the apparatus may enter a service data period after the control period is complete. The data related tasks may then be supported using the data sub mode in step . Processing of the data related task continue in step until the service data period is complete in step or if the service data period is determined to be still active if the data related task is complete in step . Regardless of whether the service data window is done in step or the data task is complete in step the apparatus may then enter a doze state in step and return to step in preparation for the next TBTT.

Further to the above the various example embodiments of the present invention are not strictly limited to the above implementations and thus other configurations are possible.

For example apparatuses in accordance with at least one embodiment of the present invention may comprise means for maintaining awareness information in an apparatus by interacting with other apparatuses in a wireless network for at least a portion of an interval between network beacon signals during which the apparatus is permitted to communicate in the wireless network means for determining whether any data related tasks are pending in the network by evaluating the awareness information in the apparatus and means for if data related tasks are determined to be pending supporting the pending data related tasks by altering apparatus configuration.

At least one other example embodiment of the present invention may include electronic signals that cause apparatuses to maintain awareness information by interacting with other apparatuses in a wireless network for at least a portion of an interval between network beacon signals during which the apparatus is permitted to communicate in the wireless network determining whether any data related tasks are pending in the network by evaluating the awareness information in the apparatus and if data related tasks are determined to be pending supporting the pending data related tasks by altering apparatus configuration.

Accordingly it will be apparent to persons skilled in the relevant art that various changes in forma and detail can be made therein without departing from the spirit and scope of the invention. The breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

