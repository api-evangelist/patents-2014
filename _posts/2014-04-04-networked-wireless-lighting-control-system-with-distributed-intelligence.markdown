---

title: Networked, wireless lighting control system with distributed intelligence
abstract: A programmable lighting control system integrates time-based, sensor-based, and manual control of lighting and other loads. The system includes one or more groups of controlled lighting areas, which may be, e.g., floors of a building. Each group may have one or more lighting zones, which may be, e.g., individual rooms or offices on a building floor. Each lighting zone includes occupancy and/or daylight sensors that may be wirelessly coupled to a gateway of the group. Each gateway is coupled to a network, such as, e.g., a local area network (LAN). Control software, residing on a computer (e.g., a personal computer or a server) coupled to the network and accessible via the network, remotely communicates with and controls the lighting zones either individually, groupwise, or globally. Each lighting zone can also be locally controlled at the gateway and can function independently of the control software and the gateway.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09215784&OS=09215784&RS=09215784
owner: ABL IP HOLDING, LLC
number: 09215784
owner_city: Conyers
owner_country: US
publication_date: 20140404
---
This is a continuation of U.S. patent application Ser. No. 12 116 185 filed May 6 2008 now U.S. Pat. No. 8 731 689 which is hereby incorporated by reference herein in its entirety for all purposes.

The invention relates to lighting control systems. More particularly the invention relates to networked lighting control systems that use wired or wireless connectivity and distributed intelligence to control multiple zones of room or area lighting.

Lighting control systems automate the operation of lighting devices throughout a building or residence based upon preset time schedules and or occupancy and or daylight sensing. These systems may also be used to automate the operation of other electrical devices or appliances ranging from for example simple fans to more complex HVAC heating ventilating and air conditioning systems. These systems may further be used in conjunction with fire and or security systems. Lighting control systems typically employ occupancy sensors and or daylight sensors to determine which lighting devices to activate deactivate or adjust the light level of and when to do so. Occupancy sensors typically sense the presence of one or more persons within a defined area and generate signals indicative of that presence. Daylight sensors typically sense the amount of daylight present within a defined area and generate signals indicative of that amount. Known lighting control systems receive those sensor signals at a central lighting control panel which may be located for example in a building manager s control center. The control panel responds to the received signals by deciding which if any relays switching devices and or dimming ballasts to drive in order to turn on or off and or adjust the light levels of one or more lighting devices.

Lighting control systems are advantageous because they reduce energy costs by automatically lowering light levels or turning off devices and appliances when not needed and they allow all devices in the system to be controlled from one location.

Known lighting control systems also have however many disadvantages. For example one type of known system requires each sensor manually operated switch and load i.e. a lighting or other electrical device to be controlled by the system to be hardwired to the lighting control panel or to a main communications bus which is hardwired to the lighting control panel. Relays for connecting disconnecting power to loads are usually incorporated in the control panel. Many commercial educational and industrial settings can have hundreds if not thousands of sensors switches and loads. Accordingly hardwiring each device to a main bus or control panel often involves long wire runs that result in costly and time consuming installation and maintenance.

Another disadvantage of known lighting control systems is that all decision making occurs at the control panel. Thus if the control panel becomes inoperative all lighting devices in the system are no longer under automated control and some or all may not operate even manually. Similarly if a connection to or from the control panel is severed the lighting devices served by that connection are no longer under automated control and also may not operate manually.

Still another disadvantage is the one way communication from the sensors to the control panel. Changes to a sensor s operational settings parameters or modes e.g. sensor time delays photocell set points etc. have to be made at the individual sensor itself and cannot be made from the control panel.

Conversely a further disadvantage is that any partial or system wide functional change such as an immediate need to override current system settings e.g. during a fire or other emergency cannot be made from anywhere but the control panel. Likewise even routine modifications such as to a preset time schedule of some or all of the lighting devices cannot be made from anywhere but the control panel even if that location is not convenient at the time.

Another type of known lighting control system is referred to as a DALI digital addressable lighting interface system which adheres to a standardized digital protocol. This system includes dimming and electrical ballasts as well as sensors e.g. daylight and occupancy manually operated switches lighting and perhaps other loads and a central controller running application software. A DALI controller can communicate with devices in the system via bi directional data exchange. However a disadvantage is that every device in the system with which the controller is to communicate has to be assigned an address that has to be manually identified to the controller upon start up known as commissioning . Initial set up and subsequent modification of a DALI based system can thus be complicated and time consuming. Moreover if the assignment of addresses does not correspond in some way to the devices physical location maintenance and replacement of faulty devices can also be complicated and time consuming. Another disadvantage of a DALI based system is the limited number of addresses available which is believed to be 64. DALI therefore cannot be used in large installations without using another technology to overcome the limitation which increases the complexity of the system. DALI based systems also have the same disadvantages as other known centrally controlled systems they are vulnerable to controller malfunctions outages severed connections and the inability to make local or global operational mode changes from anywhere but the central controller.

In view of the foregoing it would be desirable to be able to provide a networked wireless lighting control system with distributed intelligence for both global and local lighting control capabilities and for local independent operation.

In accordance with the invention a lighting control system is provided that effectively integrates time based sensor based and manual control with distributed intelligence throughout a building or building complex. As used herein distributed intelligence means that all lighting control decisions as well as all switching and dimming actions are carried out by the devices within each individual lighting zone. A lighting zone may be for example an individual room or office a classroom a manufacturing area a lobby or other defined area. Lighting zones include one or more intelligent devices such as for example occupancy sensors daylight sensors power packs and manually operated switches. The intelligence is provided by microcontrollers and firmware incorporated in preferably each device. Relays connecting disconnecting power to lighting devices are located locally within the lighting control zone such as for example in sensors and or power packs. The manually operated switches are connected in series with the lights i.e. the load and are typically mounted in a single gang wall unit that may also include a sensor and or a relay. The lighting control system of the invention is self commissioning which means the system automatically searches for and identifies devices connected to it thus eliminating the tedious and time consuming task of manually identifying each device in the system. The system can be wirelessly connected between lighting zones and centrally but not exclusively controlled via Web based i.e. World Wide Web based lighting control software executing on a host computer. Advantageously the Web based software provides global access to the lighting system which means the system can be remotely controlled from anywhere in the world where Web access is available. Remote system upgrades and status inquiries can be easily performed via the control software. Moreover each of the zones alternatively may be controlled locally via a wall unit in the zone or a gateway device nearby. Gateway devices connect multiple lighting zones to a preferably Ethernet local area network LAN to which the host computer executing the Web based lighting control software is connected. The system advantageously eliminates the need for centrally hardwired equipment and enables the devices of each zone to function independently of any central control. That is the Web based software does not make lighting control decisions those decisions are made in the individual lighting control zones by the intelligent devices deployed therein. Thus connection to the host computer is not required in order to maintain automated lighting control in each of the lighting control zones of the system. The lighting control system can be advantageously deployed in schools offices museums government buildings apartment and building complexes parking garages factories retail stores and malls and combinations thereof.

The lighting control system of the invention incorporates time based sensor based and manual control. Time based control automatically switches lights on and off based upon preset time schedules or astronomical clocks. Sensor based control automatically switches lights on and off based upon occupancy and or daylight. And manual control switches lights on and off based upon manual toggling of a wall switch by a user.

The lighting control system of the invention advantageously provides numerous programmable settings operational modes that can be configured individually for each lighting control zone. Settings include numerical device parameters such as time delays for occupancy sensing and photocell set points for daylight sensing. Other settings include switch operation e.g. manual automatic on dimming limits enable disable sound detection broadcast channel for switches and sensors e.g. occupancy and daylight and source channel for switches and sensors e.g. occupancy and daylight . Broadcast channel refers to any of several possible channels on which all switches and sensors of the invention can be configured to output their information. Some sensors can output two poles of occupancy or daylight information on two channels simultaneously and each pole can be independently configured with different parameter settings such as time delay. Devices with relays or dimming outputs can then be configured to listen to any combination of the available channels via their source channel settings which advantageously can be changed remotely or at the device. Still other settings detail a zone s operational mode. Operational modes define how a zone s relays and or dimming outputs react to events such as occupancy daylight and manual switching. Operational modes include override lights on or off scheduled lights on or off automatic on or off with astronomical clock manual on or off via local switch track or ignore occupancy daylight and or switch es and follow only internal occupancy photocell and or internal switch es . The follow only modes refer to those wall units of the invention that are a combination relay and either a sensor a manual switch or both a sensor and a manual switch. These units can be programmed to operate such that only the devices internal source sensor photocell or switch affects that unit s relay or dimming output.

The factory default setting for all relays and dimming outputs in a lighting control zone is to track all occupancy and daylight sensors and manually operated switches within that zone. This setting creates the following normal operational mode referred to as automatic on automatic off permanent off lights automatically turn on when occupancy is sensed lights automatically turn off when vacancy or sufficient daylight is sensed and lights turn off and stay off when the wall switch is manually pressed regardless of occupancy or daylight. The switch has to be pressed again to turn the lights back on and restore the sensor to automatic on automatic off operation.

Lighting control zones that have both sensors and manually operated switches can be further configured to operate in the following advanced modes of operation manual on to semi automatic manual on to override on manual on to fully automatic and predictive off. The semi automatic mode operates as follows The lights are initially off and the sensors are ignored. A manually operated switch is pressed to turn on the lights. Once on the manually operated switches in that zone will have permanent off functionality as described above. When occupancy is no longer sensed the sensor times out after a time delay and the lights automatically turn off. The time delay is programmable and allows a user to momentarily leave the room or defined area and return within the time delay without the lights turning off. Once the lights do turn off there is an additional grace period during which re entry into the room or area will automatically turn the lights back on and the sensor s will continue to monitor occupancy and or daylight. Once the sensor turns off the lights and the additional grace period expires the lights will not automatically turn back on if occupancy or insufficient daylight is sensed. The user will have to manually turn the lights back on with a switch press.

The manual on to override on mode disables the automatic off feature once the wall switch is manually pressed to initially turn on the lights. In this mode the lights stay on regardless of vacancy or sufficient daylight.

The manual on to fully automatic mode operates as follows The lights are initially off and the sensor is ignored. A manually operated switch is pressed to turn on the lights. The switch press also activates the sensor to operate fully automatically i.e. automatic on automatic off while the switch resumes permanent off functionality. So long as occupancy is sensed the lights will stay on. When occupancy is no longer sensed the sensor times out after the time delay and the lights automatically turn off. When occupancy is again sensed the lights automatically turn back on.

Another advantageous feature of the invention is the predictive off mode. Rather than create the habit of walking out of a room without turning off the lights because presumably a lighting control system will do it automatically this mode does not automatically turn off the lights when an occupant leaves the room. Upon an occupant manually turning off the lights the occupancy sensor determines whether the occupant has stayed in the room e.g. to view a slide projection or has left the room. If the occupant has stayed in the room the lights will stay off until the wall switch is pressed again. If the occupant has left the room the lights will turn on automatically when the next occupant enters the room.

The lighting control system of the invention has three main components devices lighting control zones and a network backbone. Each device which may be an occupancy sensor a daylight sensor a power pack or a wall unit has the ability to communicate over the network backbone. Each device preferably has an integrated microcontroller and firmware and is equipped with preferably RJ 45 style communication ports.

A lighting control zone is a collection of devices that function together to control the lighting of a defined area. For example a lighting control zone may be an office lobby that includes an occupancy sensor power pack and wall unit that controls the lighting in the lobby. Devices within a zone are wired in a daisy chain fashion advantageously in any order preferably using standard category 5 5 cabling. While lighting control zones are typically made up of multiple devices of different types a zone may contain just a single device. A zone may also have multiple instances of the same device or device type such as for example two or more occupancy sensors or power packs of the same or different type. Multiple lighting control zones are networked together. Each lighting control zone however advantageously retains the ability to function independently from the rest of the system. That is there is no dependence on a central controller to make lighting control decisions and issue lighting control commands for each lighting control zone. Moreover a lighting control zone does not even require a physical connection to a central controller in order to operate automatically and independently.

The network backbone of the invention is the communication network that interconnects the lighting control zones and the Web based lighting control software. The network backbone includes devices referred to as bridges and gateways that work together to transport and route information between lighting control zones and the lighting control software. Multiple control zones can be wired individually to a bridge. The bridge is a device that acts as a hub by aggregating communication traffic from these connected zones and placing that traffic onto the backbone. A bridge also acts as a communications router by forwarding information from the backbone to the applicable zones. Gateways are devices that link the backbone to a preferably Ethernet LAN where a host computer executing the control software resides. The network backbone of the invention advantageously can include multiple bridges and gateways deployed in virtually any physical topology. Bridges and gateways communicate via wired 5 connections and or wireless connections over a wireless mesh network.

A wireless mesh network advantageously provides multiple redundant paths of communication between a collection of devices. Every wireless device in a mesh network is an active transmitter receiver and router of information. Once initiated to start or join a network mesh networking devices automatically establish communication with as many other devices as possible. Benefits of a wireless mesh network include elimination of cables that are costly to run and are at risk of being cut inherent self healing thus preventing single device failures from interrupting communication navigation around blocked paths and reliable delivery of messages and control commands to their destinations even in adverse conditions. While certain embodiments of bridges have internal circuitry capable of wireless communication gateways require connection to a wireless transceiver power supply of the invention described below or wireless bridge in order to communicate wirelessly. While the range of two wireless radio devices with line of sight can be several hundred feet wireless devices of the invention spaced within 100 feet of each other is recommended. To span longer distances the transceiver power supplies of the invention should be deployed midspan. If a network contains more than one gateway multiple radio frequency RF channels are available to designate bridges to specific gateways. Simple push button commands are used to start and join a device to a particular mesh network of the invention.

The wireless mesh network used in the lighting control system of the invention is preferably a ZigBee mesh network. A ZigBee mesh network is a wireless mesh networking standard characterized by low power consumption support for multiple network structures and secure connections. The standard is regulated by a group known as the ZigBee Alliance.

The lighting control system of the invention may be controlled by a user four ways through a local wall unit through a nearby gateway device at the host computer executing the Web based control software or remotely via access to the Web based control software with a laptop or other computer workstation or handheld device. The simplest level of user control is via the wall unit. These single gang devices are located within a lighting control zone and provide the local user with the ability to control the lighting in that zone. Turning the zone s lights on off adjusting the dimming level or selecting one of four preset lighting profiles are available features on the various types of wall units of the invention described below .

These single gang wall units use finger touch controls and and instead of mechanical push buttons or slides. Pressing touch controls and turns on a serially connected load while pressing touch controls and turns off the serially connected load. Pressing touch control which is a dimmer control on or near up arrow increases the light level of the serially connected load while pressing touch control on or near down arrow decreases the light level of the serially connected load.

The finger touch controls of the invention use a capacitive sense technology and as shown in are advantageously implemented with only a single microcontroller known finger touch controls are typically implemented with two processors each running special firmware a first processor scanning and decoding the electrical pad capacitance when a finger is sensed and the second processor reading and communicating the state of the sensors . Finger touch controls includes touch control pads which is an array of flexboard sensors microcontroller which may be a Texas Instruments MSP430F2272 a voltage regulator and a preferably EIA 485 transceiver connected via the 2 wire serial bus to the RJ 45 connector ports. Resistor based capacitive measurements from touch control pads are input to the microcontroller via the general purpose I O pins GPIO . That is the charge or discharge through a resistor of a capacitive sensor in control pads is measured and processed by microcontroller . This approach reduces the complexity of the software and internal hardware of the microcontroller and the hardware of the finger touch controls.

At block finger touch controls are initialized by detecting noise and the baseline capacitance and accordingly calibrating touch control pads . At block touch control pads are scanned to measure their capacitance. At block the noise is calculated based on the difference between the capacitance measurements and the capacitance baseline. At block the current noise is compared to the noise baseline. If the current noise is below the threshold a timer is reset at block . At block the current measurements are used to update the baseline capacitance and baseline noise. If the current noise is above the threshold the state of the timer is checked at block . If the timer has expired touch control pads are recalibrated at block . If the timer has not expired the magnitude of the noise of the current pad is compared to that of the other pads at block . If the noise magnitude of the current pad is the highest of all the pads then that control pad has been touched and the associated action is processed at block by microcontroller . At block the remaining functionality of the device is handled such as for example serial communication settings status relay control etc.

Wall units of the invention can also be configured with a wall switch sensor as shown in . This conveniently adds occupancy detection to a room with an existing toggle switch. In one embodiment the occupancy sensor can detect small motion up to about 20 feet away. These wall units can communicate over the lighting backbone and can be daisy chain wired via 5 cabling to other devices in the zone. Wall unit occupancy sensors may operate with line voltage or low voltage. Both low and line voltage units include a manually operable push button switch an occupancy sensor and an LED light emitting diode to indicate that the sensor is functioning. Occupancy sensor can be programmed to operate with either passive infrared PIR detection or both PIR and sound detection for rooms or areas with obstructions. The PIR and sound detection technology may be the same as that disclosed in for example U.S. Pat. No. 5 701 117 which is hereby incorporated by reference . Line voltage units also include a relay and may be provided with 2 pole operation. The 2 pole units include two relays and can be used for inboard outboard switching applications and multi level lighting control applications. That is they can be used for A B switching as follows full on only load A on only load B on or all off. Separate time delays and switch functions can be programmed for each pole enabling almost countless configuration options. For example one of these sensor units can be used to control a light and a fan and the sensor unit can be set to operate each with a different time delay. Also these 2 pole units can handle applications with multiple loads and voltages such as for example a restroom with 277 VAC lighting and a 120 VAC exhaust fan. The settings for each pole can be programmed either at the device or via the lighting control software either at the host computer or a computer or handheld device with remote access to the LAN. The line voltage wall switch sensor unit may optionally include a night light which is preferably a white LED integrated with push button switch . The default operational mode of the night light wall switch sensor unit is preferably manual on to semi automatic. The default operational mode of the other wall switch sensor units is preferably fully automatic automatic on automatic off . The wall switch sensor units can be programmed or reprogrammed locally via the front push button switch a gateway or remotely via the lighting control software to operate in any of the other advanced modes described above.

In sum combinations of wall units can be used together to create lighting control zones with multiple switching locations and functionalities.

In addition to the wall switch sensor units the lighting control system of the invention includes several other types of occupancy sensors with different sensing capabilities to provide occupancy detection for rooms and areas having a wide variety of characteristics and configurations. The different types include ceiling mounted 360 sensors for placement in areas such as private offices vestibules or small rooms. In one embodiment the sensor provides about 12 ft of radial coverage when mounted to a standard 9 ft ceiling. Sound can be detected up to about 20 ft and more in spaces with hard floors or low background noise. Other types of occupancy sensors include ceiling mounted extended range 360 sensors for placement in large rooms or areas high bay 360 sensors for placement in areas with high ceilings such as warehouses racquetball courts and gymnasiums corner or ceiling mounted wide view sensors for placement in areas such as classrooms and wall or ceiling mounted hallway sensors for placement in long narrow areas such as hallways or corridors. U.S. Pat. Nos. 6 215 398 and 6 304 180 each disclose occupancy sensing technologies that may be used by the occupancy sensors of the invention and are thus hereby incorporated by reference.

All occupancy sensors of the invention have integrated microcontrollers and firmware two preferably RJ 45 connector ports the ability to communicate over the network backbone and the ability to operate with PIR detection technology alone or both PIR and sound detection technology. Occupancy sensors can be connected to other devices such as power packs wall units and daylight sensors in a daisy chain manner using 5 cabling and are available in low voltage and line voltage embodiments. Low voltage sensors do not have a relay and thus send their information to relays located elsewhere within the zone while line voltage sensors have an integrated relay that they can control. Advantageously the integrated relay in a line voltage sensor is not required to switch its zone s lighting but can instead be used as a signal relay to another system. Multiple occupancy sensors can be used in the same zone to provide coverage for oddly shaped rooms or large open areas. Each occupancy sensor can be programmed either locally via a push button on each sensor or remotely via the lighting control software.

Occupancy sensors of the invention provide either a single level of lighting control or two independent levels of lighting control via 2 pole embodiments of the sensors. For example overhead lights may be controlled by the first pole of a sensor while an exhaust fan may be controlled by the second pole. Each pole can be given its own time delay. Thus continuing with the lights and fan example the lights can be set to turn off 10 minutes after the last person leaves while the exhaust fan can be set to continue running for 20 minutes after the last person leaves. Also if a fan is shared between two restrooms installing a 2 pole sensor in each restroom with the second poles wired in parallel will cause the fan to turn on if either room is occupied. Multi level lighting control is also possible with 2 pole sensors. For example a first group of lights can be controlled by the first pole and a second group of lights can be controlled by the second pole. Four lighting levels are thus possible all lights on only the first group on only the second group on and all lights off.

The lighting control system of the invention also provides daylight sensors to provide intelligent control of lighting in defined areas with windows such as for example vestibules corridors classrooms or offices that receive sufficient daylight such that a lighting device can be turned off or at least dimmed. Daylight sensors monitor daylight conditions via a photocell and can control one or more lighting devices to ensure that adequate lighting levels are maintained. Daylight sensors of the invention have an integrated microcontroller with firmware and thus do not need a separate control unit. Daylight sensors operate using a single set point with automatic set point programming that requires only one installation visit. Calibration can be done at any time of the day. Daylight sensors automatically adapt to changes in room lighting conditions e.g. lamp aging or burn out and determine the amount daylight present. Daylight sensors of the invention can communicate over the network backbone and can be daisy chain wired within a lighting control zone via 5 cabling to other devices of the invention such as power packs wall units and occupancy sensors. Once linked to a gateway the sensor can be remotely monitored upgraded and controlled via the lighting control software. Embodiments include low voltage daylight sensors that do not have internal relays and accordingly send their information to relays located elsewhere within the zone and line voltage daylight sensors that have a relay integrated within the sensor that they can control. Daylight sensors of the invention may provide on off functionality dimming functionality or both as illustrated in . To provide on off functionality daylight sensors control relays to connect disconnect line voltage to one or more lighting devices. To provide dimming functionality daylight sensors control 0 10 VDC dimmable ballasts of lighting devices by issuing dimming commands to the ballasts over low voltage wiring. Daylight sensors are 2 pole devices but alternatively can be single pole that have a second output to separately control an additional load or a second group of lighting devices in the lighting control zone. The set point for the second output can be a percentage of the first pole s set point. Also a second 0 10 VDC dimmable ballast can be controlled by the second output at a selected daylight level higher than that used for a first 0 10 VDC dimmable ballast controlled by the first output. The sensor determines the necessary on off combination of the two poles in order to maintain adequate lighting.

Daylight sensors can be used with occupancy sensors to achieve even greater energy savings. In one embodiment lighting control decisions are made using occupancy as the primary factor and daylight as the secondary factor as shown in .

Power packs of the invention include a transformer and a relay to provide two important functions to the lighting control system supplying power to other devices and switching lighting loads. show a power pack in accordance with the invention. Power pack has housing two preferably RJ 45 connector ports that can be daisy chain wired using 5 cabling to other devices e.g. sensors and or wall units to form a lighting control zone and two LED indicators to indicate connector functionality. For simplifying installation power packs also have an elongated chase nipple that allows them to be attached either directly through a knockout into a junction box or inside an adjacent box for meeting specific local code requirements in ceiling plenums. Line voltage Class 1 wiring B is received through chase nipple . To provide system power transformer transforms Class 1 line voltage 120 277 347 VAC to Class 2 15 VDC. The power provided by a power pack enables a lighting control zone to operate independently of the lighting control software or connection to any other device outside the zone. For switching a lighting load an internal preferably 16 A latching relay is used. Power packs like other devices of the invention have a microcontroller and transceiver for communicating over the network backbone of the invention. Power pack also includes a full wave rectifier current limiter 1 current limiter 2 voltage regulators and reset chip H bridge and relay sensor . Microcontroller is preferably a Texas Instruments MSP430F2272 transceiver is preferably an RS 485 Analog Devices ADM3493 and reset chip is preferably a TelCom Semiconductor TC54VN27 voltage detector.

A power pack s transformer supplies up to 40 mA of current i.e. power to each of its two RJ 45 ports for distribution to a lighting control zone and beyond. Because sensors and other devices within a lighting control zone typically require less then 2 mA each a power pack can usually power its entire control zone with power to spare. The remaining power is made available over the network to other zones and devices e.g. bridges and gateways .

Power packs can be remotely configured and upgraded i.e. their firmware and are push button programmable via push button . The lighting control software can program settings for each power pack individually. Operational settings for power packs include override lights on or off track ignore occupancy sensors manual switches and or daylight sensors and occupancy daylight or switch source channel designation. By factory default power packs are configured to respond to all occupancy photocell and switch commands arriving on channel 1 but can be reconfigured to respond to either channel 1 or channel 2 via their source channel setting. Power packs can also participate in the following advanced control modes manual on to semi automatic manual on to fully automatic manual on to override on and predictive off.

A modified embodiment of the power pack is the slave pack. A slave pack includes the same switching relay as the power pack but does not have a transformer. Thus it can switch line voltage to and from a load via the relay but only receives and distributes power via 5 cabling through its RJ 45 connector ports. The housing and other external features of the slave pack are identical to power pack . Slave packs like other devices of the invention also have a microcontroller and transceiver for communicating over the network backbone of the invention.

Another related device of the invention is the auxiliary relay pack. An auxiliary relay pack provides switching of low voltages primarily for interfacing with devices or control systems outside the invention. In one embodiment the auxiliary relay pack has a rated switching load of 1 A at 40 VAC VDC. The housing and other external features of the auxiliary pack are identical to power pack . Auxiliary packs like other devices of the invention have a microcontroller transceiver and two preferably RJ 45 connector ports for communicating over the network backbone of the invention.

The lighting control system also includes a power supply unit that supplies power to the devices of the system. Power supplies have transformers but unlike power packs do not have relays. One embodiment of the power supply has two preferably RJ 45 ports and makes its power available to other devices via 5 cabling. Another embodiment of the power supply connects directly to terminal inputs on a bridge or gateway via Class 2 wiring. Both embodiments supply up to 150 mA at 15 VDC. The housings and external features of the two power supply embodiments are identical or substantially similar to those of power pack . For example both embodiments have a chase nipple for simplifying installation. These power supply devices do not however communicate with any other devices or the lighting control software.

The lighting control system of the invention also includes a transceiver power supply that provides a wireless access point for a gateway or a lighting control zone that cannot be directly wired into a bridge. The transceiver power supply also provides system power by transforming Class 1 line voltage 120 277 347 VAC to Class 2 15 VDC. Both power and communication are supplied via the unit s two preferably RJ 45 connector ports which can be used to connect to other devices via 5 cabling. The housing and other external features of the transceiver power supply are identical to power pack . For example the transceiver power supply is also push button programmable and has LED status indicators. In one embodiment the transceiver power supply supplies up to 250 mA of current. When wired to a gateway this amount meets the 60 80 mA requirement of one embodiment of the gateway and provides the remaining 170 190 mA to other devices and or zones. When wired to a lighting control zone sufficient power for the entire zone is easily provided by this unit as each zone device typically requires 2 mA or less. The transceiver power supply operates wirelessly at 2.4 GHz and preferably is capable of joining and participating with other transceiver power supplies and wireless bridges of the invention in a ZigBee wireless mesh network. If the transceiver power supply s RJ 45 ports are not wired to a gateway or lighting control zone the unit will continue to participate in the mesh network as a stand alone wireless repeater. This feature is used to span long hops between other wireless devices of the invention.

Transceiver power supply also includes current limiter linear voltage regulators and system clock and driver microcontroller wireless chipset which is preferably ZigBee chipset EM250 storage harmonic filter balun network two preferably RJ 45 connector ports two transceivers and two port controllers . In one embodiment current limiter allows a total of 250 mA to be shared between the two connector ports . Communication between transceivers and port controllers preferably adheres to the RS 232 standard for serial binary data signals. The transceivers are preferably RS 485 National Semiconductor Corporation DS36C278 transceivers port controllers are preferably Silicon Laboratories 8051F305 microcontrollers and microcontroller is preferably a Silicon Laboratories 8051F346 microcontroller. Wireless chipset harmonic filter and balun network represent the circuitry for wireless communication to and from the transceiver power supply . Data is transmitted at preferably 2.4 GHz and adheres to preferably the IEEE 802.15.4 wireless low data rate PAN personal area network standard. The digital modulation technique for transmitting digital data is preferably O QPSK offset quadrature phase shifting key .

Bridges of the invention are integral components of the network backbone. They increase the number of lighting control zones that can be connected to the system and act as a hub by aggregating traffic from connected downstream lighting control zones and placing that traffic onto the backbone. Bridges also act as routers by forwarding information from the backbone to the applicable downstream zones. In particular bridges route data packets received from either a gateway the lighting control software via a gateway or a scene controller wall unit described below to their final destination. Using a proprietary protocol that includes destination and source addresses a bridge will pass a data packet received on its upstream port to a device connected on a downstream port or to another bridge if the destination device is not directly connected to this bridge. Because the packet is repeated on the downstream port signal integrity is reaffirmed. Also the bridge will check for an outbound packet generated by a device such as the scene controller wall unit and will route that packet where it needs to go. Bridges respond to packets addressed to them just like other devices. Some examples of the information a bridge would transmit in a response packet are name product code date code software firmware update and microcontroller information such as the number of reboots the number of saves to memory or the voltage of the microcontroller. Bridges also individually poll each connected device for status and may receive a packet which contains for example time delay remaining photocell reading switch exertion etc. This status is made known to every other device in the zone. Devices use this information to control their individual outputs i.e. relay or dimming level . Note however only devices within the same lighting control zone receive each other s polling status response.

As shown in bridge includes a full wave rectifier which in one embodiment receives either 12 24 VAC or 15 34 VDC switching regulator linear regulator system clock and driver microcontroller wireless chipset which is preferably ZigBee chipset EM250 storage harmonic filter balun network eight preferably RJ 45 connector ports note only two are shown ports eight current limiters note only two are shown limiters eight transceivers note only two are shown transceivers and eight port controllers note only two are shown controllers . Communication between the transceivers and port controllers preferably adheres to the RS 232 standard for serial binary data signals. The transceivers are preferably RS 485 National Semiconductor Corporation DS36C278 transceivers port controllers are preferably Silicon Laboratories 8051F305 microcontrollers and microcontroller is preferably a Silicon Laboratories 8051F340 microcontroller. Wireless chipset harmonic filter and balun network represent the circuitry for wireless communication to and from bridge . Data is transmitted at preferably 2.4 GHz and adheres to preferably the IEEE 802.15.4 wireless low data rate PAN personal area network standard. The digital modulation technique for transmitting digital data is preferably O QPSK offset quadrature phase shifting key .

Bridge has a push button to activate the self commissioning process wherein the bridge automatically discovers and stores the unique serial number of each device attached to it. In one embodiment a bridge is capable of storing 128 devices per port for a maximum total of 1 024 devices i.e. 8 ports 128 devices 1024 devices . If more than 128 devices are connected on a port the remainder will be ignored. The bridge sends the collected serial numbers to a gateway for use with the lighting control software. This data packet may also include the bridge s serial number and the connector port number to which each device is connected. With this information the lighting control software can display a device tree that shows how all the devices are connected in the entire system. A bridge also detects if a device stops responding and thus needs to be deleted from a gateway s list. If a device fails to respond to a certain number of polls it is deleted from memory and a packet is sent to the gateway. A device would fail to respond if it is malfunctioning or its 5 cabling is cut or unplugged from a connector port.

All device and communication power is delivered via the 5 bus that interconnects zones and bridges. Power to the bus is supplied from power packs power supplies and or bridges. In one embodiment power supplies deliver about 150 mA while power packs provide 40 mA from each of their two connector ports 80 mA total . Devices in a lighting control zone e.g. sensors wall units slave packs etc. typically consume about 2 mA each. Thus a power pack or power supply can often power more than a single lighting control zone and each bridge embodiment can advantageously combine system power from lighting control zones that are net contributors of power i.e. those with more than enough downstream power packs and power supplies and distribute that power to lighting control zones that are net consumers of power i.e. those with less than enough or no power packs or power supplies . This power distribution methodology advantageously allows lighting control zones with power packs or power supplies to run independently without connection to a gateway or bridge. Moreover lighting control zones without power packs or power supplies can still function independently provided they are connected to a bridge.

There are two methods of directly powering a bridge connecting the bridge s terminal connectors located on the side of the bridge housing to a power supply of the invention via Class 2 wiring or connecting one of the bridge s connector ports to either a power supply or a power pack of the invention via 5 cabling. While directly connecting a power supply or power pack to a bridge is recommended power can also be supplied from a power pack or power supply located elsewhere in the network. In one embodiment of the invention bridges with wireless communication capability require about 90 mA while those with only wired connection capability require about 60 mA. Power supplies of the invention can deliver about 150 mA. Excess current up to about 80 mA from a directly connected power supply can be distributed via the bridge s connector ports which in one embodiment is limited to a maximum of about 40 mA per port. Current limiters ensure that the current drawn from a port does not exceed the maximum amount. Demand for more current from a connector port results in a voltage decrease in order to maintain the current limit. Bridges also monitor the voltage on the 5 cabling and send that information to the lighting control software. If voltage is too low below 14 volts in one embodiment the software indicates that more power packs or power supplies are needed in the system. Note that with respect to power distribution a bridge has the same functionality as the transceiver power supply except the transceiver power supply is limited to two connector ports and has its own power supply.

Gateway front panel A has a display screen which is preferably a backlit LCD liquid crystal display screen and finger touch controls which may alternatively be a conventional keypad. Back panel B has a LAN connector port which is preferably a 10 100BaseT Ethernet port. LAN connector port is assigned an IP Internet Protocol address on the building s LAN where the lighting control software is located. This IP address can be fixed or assigned dynamically using DHCP Dynamic Host Configuration Protocol . Back panel B also has three preferably RJ 45 connector ports for connection to any downstream bridge or lighting control zone via 5 cabling. In one embodiment of the invention a gateway can support up to 32 devices without a bridge. Overall an embodiment of a gateway can support up to 400 downstream devices connected to it.

There are two methods of powering a gateway. A gateway may be powered over a 5 connection to one of connector ports from either a power supply power pack or transceiver power supply of the invention. While it is preferred that the power supply power pack or transceiver power supply be connected directly to one of the RJ 45 connector ports these devices may be located elsewhere in the network. A gateway may also be powered with a power supply of the invention over Class 2 wiring connected to power terminal connector on back panel B of the gateway. In one embodiment of the invention the gateway consumes about 80 mA.

A gateway functions as an autonomous scheduler using an internal real time clock. A gateway stores information called lighting control profiles which include settings that will be applied at a particular time or date to a group of devices connected to the gateway. All lighting control profiles are created in the lighting control software described in more detail below and are stored within the gateway. Once programmed with one or more profiles a gateway can operate independently of the lighting control software. Using its onboard time clock a gateway sends out the settings specified in the profiles to the appropriate downstream devices according to a defined schedule. Lighting control profiles can also be selected and run on demand from a gateway.

A gateway also provides a local user interface for accessing any of the downstream devices connected to it. Using display screen and finger touch controls users can navigate a gateway s menu driven interface to view status and configuration information about any downstream device. shows an embodiment of a gateway menu interface accessible via the display screen and finger touch controls. Access to the system via a gateway preferably requires a 4 digit pin code and device inventory and status information can be displayed at a gateway.

Microprocessor is preferably an 8 bit Rabbit microprocessor from Rabbit Semiconductor. In one embodiment of the invention the microprocessor configuration is implemented using Rabbit s RCM3305 core module reference design. Microprocessor preferably has 44 MHz clock speed hardware and or software support for TCP IP IrDA SDLC HDLC Async SPI and I2C 56 digital I O 6 serial ports and operates at 1.8 3.6 volts 5 volt tolerant I O . Microprocessor communicates with external memory devices and via a parallel data address bus. This interface is also used to communicate with internal registers and buffers of LAN transceiver A B. The application code executed by one embodiment of the microprocessor implements Rabbit s embedded TCP IP stack software. This software comprises API calls and hardware drivers to implement most TCP IP protocols such as for example TCP UDP HTTP etc. This allows the gateway to interface with an IP network and communicate with the lighting control software using standard protocols over a preferably 10 100 Ethernet network. Microprocessor executes application code from the memory devices and controls all communication peripherals.

Memory device is preferably a 512 KB flash memory which is a type of nonvolatile memory. Memory is divided into two blocks 300 KB for program memory where the actual application code and gateway configuration block parameters are stored and 210 KB for lighting control profile data storage. The gateway configuration block is an area reserved for configuration parameters such as gateway serial number Ethernet MAC address etc. This area is initialized during manufacture. Memory may be a Silicon Storage Technology SST39VF040.

Memory device is preferably a 512 KB FSRAM fast static random access memory . This memory is used by the application code and stack software for variables and communication buffers. The Rabbit TCP IP Stack software allocates variables in this memory to manage and store information received from the LAN transceiver and other communication peripherals. Memory may be an Alliance Semiconductor AS7C34096.

Memory device is preferably a 512 KB SRAM static random access memory . The application code allocates space in this memory for lighting control profile schedules and settings tables. Profile data information is retrieved from memory and loaded into structures defined in this memory area for fast execution. This memory area is also used for structures that contain all device information discovered during self commissioning described below . Memory may be an Integrated Silicon Solutions Inc. IS62WV5128.

CPU clock includes a main CPU oscillator 22.12 MHz and a real time clock oscillator 32.768 KHz . The CPU clock is multiplied internally for an operational frequency of 44 MHz and the real time clock circuitry is external to the processor and provides an initial clock for serial programming as well as the reference to an internal clock for calendar and profile scheduling. LAN clock is preferably an Ethernet driver oscillator 25 MHz . These clocks are all individual circuits that provide each module with their respective operational frequency.

LAN transceiver A B is preferably a 10 100 Ethernet MAC PHY media access control physical layer driver and associated magnetics respectively. This device allows microprocessor to communicate over the LAN using a standard IEEE 802.3 Ethernet protocol. The microprocessor TCP IP stack software implements the higher level protocols for TCP IP communication. The lighting control software communicates to the gateway using UDP TCP HTTP protocols. LAN transceiver A is preferably an AX88796LF local bus fast Ethernet controller by ASIX Electronics Corporation and LAN transceiver B is a high speed LAN magnetics isolation module which may be a TG1100 S050N2 by HALO Electronics Inc.

Transceivers are preferably EIA 485 transceivers coupled respectively to connector ports . Using three UARTs from microprocessor the gateway can interface with the lighting control zones and devices connected to the three connector ports. Each connector port connection preferably operates in half duplex 2 wire mode at 115.2 Kbps. Microprocessor controls these ports and the read write data packets used to communicate with connected devices.

Switching regulator is a DC DC step down switching regulator which may be a Linear Technology LT1776. In one embodiment this circuit converts a DC input voltage of 12V 50V to about 3.3V output with 500 mA current. All the electronic components in gateway are powered via this regulator.

Display driver is an LCD liquid crystal display driver display that may be implemented using Desintron F STN positive display DV5520BB 132 W 64 H pixels . Microprocessor communicates with the display driver which in one embodiment is integrated with the glass screen of the LCD by sending data and commands using an SPI serial communication interface. This display driver provides a user interface that displays a number of menus and options see that show information and status of the devices connected to the gateway as well as the current status of the Ethernet and gateway configuration parameters.

Gateways implement finger touch controls of the invention as described above with respect to the wall units. Display driver includes a flexboard circuit laid out in a special pattern to recognize four finger touch controls up down right enter and left escape . Signal microcontroller has specialized hardware and software that measures capacitance from an array of sensors in the flexboard circuit and is preferably a Programmable System on a Chip PSoC from Cypress Semiconductor. When a user touches one of the finger touch controls the difference in capacitance is measured by microcontroller and filtered from any noise. Microprocessor polls microcontroller through the I2C communication bus checks for any key presses and then performs and displays the respective action on display screen .

In accordance with the invention the most powerful way of controlling the lighting control system is through the Web based lighting control software. The control software provides complete system administration via a tabbed graphical interface. The control software features a network device tree and three primary pages information groups and profiles. The information page provides individual device information such as for example properties setting and status information. The group and profile pages provide the ability to create lighting control profiles apply them to particular lighting zones and schedule their implementation. The control software requires a single installation onto a host computer server. Multiple users can access the software via a standard Web browser with network access to the host computer. Each user can be required to login to the system with a user name and password and can be assigned varying degrees of system access. Communication between the gateways and the control software is preferably encrypted.

In one embodiment of the invention the host computer preferably has a 133 MHz 1.2 GHz processor 128 512 MB RAM and 2 30 GB hard drive. The Web browser is either Internet Explorer 7.0 by Microsoft Corporation of Redmond Wash. or preferably Mozilla Firefox 2.0.0.6 by Mozilla Corporation of Mountain View Calif. The operating system is either Microsoft s Windows Server 2000 or preferably Windows Server 2003 and the software requirements are Microsoft s IIS Internet Information Services 5.0 or 6.0 .NET 2.0 or higher the Microsoft .NET Framework is a software component that is part of the Microsoft Windows operating system .

The lighting control software provides for the creation of lighting control profiles. Lighting control profiles are outlines of settings that direct how a collection of devices function for a defined time period. Profiles have three main components groups settings and schedules. A group is a collection of devices defined by the user that may include some or all devices from the same zone or different zones to which a lighting control profile is applied. The control software provides the ability to identify devices according to convenient categories and features such as for example function e.g. occupancy sensing daylight sensing and or dimming device type e.g. power pack wall unit or sensor power type e.g. low voltage or line voltage detection technology e.g. passive infrared or dual passive infrared and sound type of relay and or photocell feature. The settings define parameters that direct how a group of devices will function. The settings may be grouped into general occupancy daylight or advanced category tabs. Some device settings are numerical parameters e.g. delay time while others are enable disable only. The lighting control screen provides a group screen for creating a profile schedule. A profile schedule includes calendar dates times and recurrence periods e.g. daily weekdays weekends weekly monthly and yearly . Offsets to account for sunrise and sunsets may also be programmed as well as adjustments for daylight savings time.

Lighting control profiles are saved in a database of the host computer. In addition each gateway maintains a copy of all profiles applicable to its downstream devices. Advantageously the gateways and not the host computer control software administer the profiles. This feature allows the lighting control system to operate without constant connection to the host computer. A real time clock within each gateway directs when a particular profile is sent out over the network backbone. Once on the backbone the bridges route the profiles to the intended devices. When a particular profile s schedule expires the gateway will then send out either the profile with the next highest priority setting or the device s default settings. Because lighting control profiles are stored in gateways a user can access and run them on demand at the gateway. When accessed via the gateway s touch controls the profile s normal associated schedule is ignored and the settings entered or selected by the user are sent immediately downstream to the applicable devices. Profiles can also be run on demand from the host computer or a remotely accessed computer or handheld device via the control software.

Another way of running profiles on demand is with a scene controller wall unit of the invention. A scene controller wall unit is located in a lighting control zone and provides a user with local access for selecting one of four user created lighting profiles that can be applied to that lighting control zone. shows scene controller wall unit which may be advantageously installed in zones where for example up to four different levels of on demand dimming are required. This single gang device has four finger touch controls no mechanical push buttons to which any four of the zone s lighting control profiles can be assigned using the lighting control software. Scene controller wall unit also has two preferably RJ 45 connector ports and four LEDs to indicate which one of the profiles is currently selected. Each LED is preferably located next to the profile s name in area to indicate the selected profile. Scene controller wall unit like other wall units connects to other devices in the zone via daisy chain wired 5 cabling connected to its connector ports. Scene controller wall unit has the ability to communicate over the network backbone and requires connection to a bridge in order to function.

An unlimited number of potential lighting control profiles are possible when all the combinations of groups settings and schedules are considered. To organize this collection the lighting control software provides several profile management features. First profiles can be easily created edited deleted or deactivated. Second in order to resolve conflicts between overlapping profiles with different settings a configurable priority list is provided to the user. Finally a convenient 24 hour bar chart is displayable to show the resultant profiles scheduled for each lighting control zone. When fully expanded this chart also shows the tracking and or broadcast lighting control states for each device within a zone. A tracking state is the resultant type s of lighting control information that a relay or dimming output will respond to when all applicable profiles and settings have been considered. Tracking states include occupancy photocell switch occupancy and photocell occupancy and switch occupancy photocell and switch photocell and switch override on and override off. A broadcasting state is a listing of the lighting control information that is output from a sensor or a switch when all applicable profiles and their priorities have been considered. Broadcast states include occupancy photocell switch occupancy and photocell occupancy and switch occupancy photocell and switch and photocell and switch.

Network backbone 2 of system includes gateway which is also wired via 5 cabling to LAN . Gateway is further wired directly to a lighting control zone and to bridge via 5 cabling. Bridge is wired to six lighting control zones and to bridge via 5 cabling. Bridge is in turn wired to seven lighting control zones via 5 cabling and to power supply via low voltage Class 2 wiring C. Power supply delivers power to bridge which distributes remaining power to its lighting control zones bridge bridge s lighting control zones and if any power remains to gateway . Gateway is also wired via 5 cabling to transceiver power supply which receives line voltage via Class 1 wiring B. Transceiver power supply is wired via 5 cabling directly to a lighting control zone and is wirelessly connected to bridge . Transceiver power supply delivers power and information to and receives information from its directly connected lighting control zone and bridge . That received and delivered information is respectively forwarded to and received from gateway . Bridge is in turn wired via 5 cabling to eight lighting control zones and is wirelessly connected to bridge which is wired via 5 cabling to eight lighting control zones

Each device in system comes factory preset with default settings. If communication with a gateway is lost the lighting control zones connected thereto advantageously will continue to run according to their default settings. If a lighting control zone has a power pack or power supply daisy chain wired within it communication with the zone s bridge can be lost and the zone will continue to run according to its default settings. Default settings are also implemented when a zone has no scheduled profiles. Users may also customize the default settings via the lighting control software. Because all the devices within system are networked together they can be remotely upgraded via the control software in order to incorporate future system features.

Upon initial power up system self commissions and automatically begins functioning according to the default settings of its devices. This self commissioning allows each lighting control zone to be wired and tested separately from the rest of the network. Once the zone is connected to the network backbone via connection to a bridge or gateway the zone is automatically classified by the control software as a preset zone. Advantageously the only information an installer needs to note is the serial number and port number of the bridge that each zone is connected to. Information about the individual devices within a zone is advantageously not required during commissioning only the location of the zone itself. For example if 300 sensors are spread across a building and are networked such that they use ten bridges the installer would only need to write down ten bridge serial numbers and the locations of the zones connected to the bridges connector. This is far simpler than having to manually commission each device as in known lighting control systems.

As part of the self commissioning process the lighting control software advantageously auto populates a network tree with every device of the invention in the system. By default the tree is organized according to the physical connectivity between gateways bridges bridge ports and all devices daisy chain wired in the lighting control zones. Within the tree each bridge and its ports are labeled with the serial number or port number respectively. Using this information a user can then match each lighting control zone to what is displayed in the tree and re label each zone with a custom name if desired.

For the system to be self commissioning each device in the system has an ID that in one embodiment comprises 32 bits. In order to discover all the possible combinations of the 32 bits in a device s ID an intelligent search method needs to be performed to avoid extremely long discover times. To do this the zeroes quiet ones quiet binary search method is used. This method sends a command that instructs all devices to pulse the line if the specified value 0 or 1 is present in the specified position 1 32bit of their ID s. A path is chosen and devices on the opposing path are instructed to be quiet through use of the zeroes and ones quiet commands. This process is repeated until all devices have been discovered.

To implement this in software the positions of conflicts need to be recorded and returned to later to be evaluated. To accomplish this the concept of paths and pebbles was created. When a conflict is encountered the current search path is pushed onto the paths stack and the position of the conflict is pushed onto the pebbles stack. This allows the rest of the current search to be completed and when finished the other paths can be evaluated. An algorithm to implement this includes a supervisor function and a subfunction which is called repeatedly. The algorithm initiates the pointers to the paths and pebbles stacks to the bottom of the stack which is empty. The subfunction is called with the current paths and pebbles values from the stack as input. The subfunction will first evaluate the path from the paths stack up to the pebble from the pebbles stack by doing a zeroes quiet or ones quiet for each bit value up to the pebble. This ensures that all devices not on the current path of interest will be quiet. The first time through the path will be empty and the pebble will be one so no quiets will be performed. Next the algorithm tests for presence of both a zero and a one at the current bit location. If both are found there is a conflict. The current path up to this point is then loaded onto the paths stack with a zero at the current position with the pebble loaded onto the pebbles stack as an indication of where the path ended. The algorithm then takes the high road and evaluates the next bit position until the final bit position is reached and every bit has been tested. Each pass results in one newly discovered device. The supervisor function then evaluates if there are any more paths and pebbles on the stack and runs the subfunction again if there is until no more conflicts exist. If no response is returned for either the zero or the one at a given bit position an error condition exists and the algorithm returns an error path.

The design of a lighting control system of the invention has the following basic rules and steps. Every lighting control zone requires either a power pack or a connection to a bridge in order to power the zone s devices and communication bus. While devices within a zone can be wired in any order connecting the power pack directly to a bridge is recommended. Also while virtually any combination of devices can exist in a lighting control zone each zone should only have at most one device with a photocell. Occupancy sensors should be chosen with coverage patterns and detection technology appropriate for the area to be covered using multiple sensors of various types as needed. Photocell sensors should be added where significant daylight is available and where the photocell sensor can see all the lights it is controlling. Wall units with the appropriate function s should be added where local control is desired. An adequate number of power packs should be added such that all circuits can be switched and that sufficient system power is supplied. Each lighting control zone should be connected to a bridge or alternatively directly to a gateway. Because each device in the zone e.g. sensors wall units power packs has two preferably RJ 45 connector ports and are connected to each other in a daisy chain fashion with a connection from one of the devices to a bridge or gateway each zone should have if wired correctly exactly one open connector port i.e. at the last device in the daisy chain connection . Bridge to bridge hops should be minimized and extra bridge ports should be left unused to accommodate the addition of future zones. Gateways should be placed such that connection to a preferably Ethernet LAN is convenient.

Alternatively a lighting control zone can be created to operate in a pure stand alone configuration with no connection to the network backbone. Operation of the zone would be only sensor based and manual there would be no time based control. The devices in such a zone would also be connected together in daisy chain fashion but there would be no connection to a bridge or gateway thus leaving exactly two open connector ports.

In one embodiment of a lighting control system in accordance with the invention the control software can support about 40 concurrent Web sessions and at least about 40 gateways. Each gateway can connect to about 400 downstream devices including bridges and there is no limit to the number of bridges per network other than the 400 device limitation of a gateway . Also the control software can support about 40 profiles per lighting control zone. The lighting control system of the invention can thus be advantageously used to create and control a very large system with a very large number of lighting devices.

Note that the lighting control system of the invention is not limited solely to the control of lighting devices but alternatively or additionally may be used to control or work with other devices and systems such as for example HVAC fire detection and security systems.

Thus it is seen that a networked lighting control system that uses wireless connectivity and distributed intelligence to control multiple independent zones of lighting is provided. One skilled in the art will appreciate that the invention can be practiced by other than the described embodiments which are presented for purposes of illustration and not of limitation and the invention is limited only by the claims which follow.

