---

title: Context based algorithmic framework for identifying and classifying embedded images of follicle units
abstract: The subject invention provides a method for detecting and analyzing the hair follicles on a scalp to assist with hair follicle transplantation. The methods of the subject invention are able to count the number of hair follicle groups and the number of follicles within each group based upon a microscopic image of a sample from a human scalp. An algorithm is then used to cluster the follicles and generate a neighboring connected graph to calculate the inter object distances. A report can then be generated that provides information regarding the density, placement, and percentage of hair follicle type in different areas of the scalp. This report can be used to generate a hair follicle transplant strategy to assist a physician or robotic system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09576359&OS=09576359&RS=09576359
owner: NRG Medical, LLC
number: 09576359
owner_city: Coral Gables
owner_country: US
publication_date: 20141103
---
This application is a National Stage Application of International Application No. PCT US2014 063699 filed Nov. 3 2014 which claims benefit of U.S. Provisional Application Ser. No. 61 898 836 filed Nov. 1 2013 all of which are incorporated herein by reference in their entirety.

Recent developments have increased the need for computerized analysis of biological images. Some of these types of biological images contain so much visual information referred to as noise that most standard image computer analysis procedures cannot be applied to accurately detect desired objects. One example of such a noisy images are those of human hair and skin obtained through a microscope. The variations in skin texture color surface features etc. make most image analysis procedures difficult to apply or provide inaccurate results. Of particular interest is the ability to analyze skin images to determine follicular counts and densities for use in hair transplant surgeries.

Qureshi and Bodduluri 1 developed a follicle detection model using contour. With their technique a contour is drawn around the circumference of any detected possible follicle instance. If the contour has one concave hull there are two follicles grown from same root. So the contour will look like a triangle with a concave hull. Similarly two concave hulls indicate three follicle units and so on. Unfortunately this method is only applicable to images where the follicle units does not overlap each other and where the follicle units is in good regular geometric shape like hair. If two or more follicles overlap or are crossed over each other there will be more concave hulls which will increase the error in counting of follicles. Also if the image contains irregular shaped follicle units the method will perceive more concave hulls on the contour.

TrichoScan is another system proposed by Hoffmann and Rolf 2 to count hairs on scalp images. This method detects straight lines on an image. These straight lines are considered to be individual hairs. To ensure accuracy before the input image is acquired a patient s hair is subject to a number of chemical treatment steps. These steps make the hair straight and prepares it for image analysis. After treatment and image acquisition each straight line in the image is considered a hair instance in the image. This method is useful for some standard cases where the hair must be straight and hair edges must be smooth. However if some hairs are crossed or overlapped with each other there may be more hair lines counted than actually exist or other anomalies in the data can occur.

Lempitsky and Zisserman 3 developed a supervised learning model to count objects in microscopic images. This method works well if there is similarity among the trained sets and input sets. Variation between trained sets and real input sets will cause errors. Unfortunately most follicles in skin images are not similar and vary in size color and geometric shape. So the learning method of Lempitsky and Zisserman is not very applicable and would require significant refinement to address the problem of follicular analysis of an image.

Thus it can be seen that there is a particular need to be able to detect and count the number of follicles in a microscopic image of the scalp. An analysis to obtain an exact count of follicles in a given sample area is difficult not only because such images are noisy but also the follicle shapes are nonstandard. Follicle objects can usually be detected in an image utilizing analysis based on RGB color codes. Unfortunately follicles also overlapped three or four of them can be tied together or growing from same root and fan out to different directions. Thus distinguishing individual follicles or other structures in a visual image can be problematic.

In accordance with the subject invention the difficulties of analyzing biological images to extract specific information about structures seen in the image is solved by the use of an algorithmic framework based on pixel group density to detect specific features. More specifically the subject invention provides an algorithmic framework to accurately detect the number of hair follicles in a skin image.

One embodiment of the subject invention employs a pixel merging technique to connect the follicle pixels at one edge of a particular follicle to form small follicle articles and applied vicinity based clustering to group them together. Each group consists of a number of follicle particles. By applying scaling there is generated an approximate count of follicles in each group. This method is applicable to most of the real world images obtained from patients and can be divided into four sub systems 

1. A Feature Extraction Sub System Extract the exact quadrilateral bald area from the input raw images.

2. Pre Processing Sub System Filters the background scalp area to separate the follicular units from skin.

3. Follicle Detection Sub System Detects each follicle unit uniquely by pixel merging follicle particle building and clustering.

4. Inter Follicular Distance Sub System Measures the inter follicular distances among the detected follicle clusters.

In general a raw image is obtained from a patient utilizing microscopic techniques. Techniques and algorithms of the subject invention which detect the corners of an image are used to align the image and eliminate extraneous areas to provide a uniform image area for analysis. The image is then analyzed for follicle pixels. The follicle pixels are merged to form follicle particles which for purposes of analysis are considered to be the part of same follicle. The follicle particle data is then analyzed with a recursive 2D point clustering algorithm to group the merged follicle pixels into clusters. This analysis determines whether there are between two to seven merged follicle particles in a cluster for each follicle particle depending on the type of input image. Finally scaling methods are applied to determine number of approximate follicles in each cluster.

More specifically to begin analysis it is necessary to extract or define only the scalp area to be analyzed in the microscopic image. Typically the microscopic image provides a quadrilateral shaped scalp region. This quadrilateral region is not horizontal which is necessary for follicular analysis. So the first task is to rotate the image and extract the quadrilateral scalp area therefrom. Next to rotate the image the uppermost two corner points of the scalp region in the images can be detected. In one embodiment the corners of the quadrilateral area are connected to the corners of the main image using virtual elastic threads. As with real elastic threads the virtual elastic threads expand and or contract to reach equilibrium usually by minimizing the distance between each of the scalp area corners and the corresponding image corner to which it is attached. As a consequence the image can be made horizontal. To achieve this equilibrium state for analysis with the subject invention it is necessary to first detect the shortest thread.

Once the corners are obtained the image can be rotated and the quadrilateral scalp area can be extracted. The follicle pixels can then be merged to form follicle particles which are assumed to be the part of same follicle. This initial information can then be analyzed by a recursive 2D point clustering algorithm which groups the merged follicle pixels into clusters. This further analysis results in two to seven merged follicle particles in a cluster for each follicle depending on the nature of input image. Then scaling was applied to decide the number of approximate follicles in each cluster.

Further the inter object distances can be calculated by generating a graph wherein only the neighboring vertices around a vertex are connected by edges without any edges crossing in the graph. One method for doing this is the Delaunay triangulation method. However the Delaunay method can be more complex than necessary for the images to be analyzed. One embodiment of the subject invention employs a simple geometrical approach to generate a complete graph and remove unnecessary edges to obtain a clear mosaic output image. In another embodiment the edges of the graph are designated with their lengths to provide inter object distances or more specifically the distance between each follicle particle 

The methods of the subject invention provide a follicle count of acceptable accuracy on various images. The method can detect both long and short follicles regardless of their length overlapped follicles follicles growing from same root follicles joined tightly together and even broken follicles.

The subject invention provides materials and methods for analyzing an image to detect specific features of interest within an image. More specifically the subject invention provides methods and an algorithm by which to reduce the amount of extraneous information so that specific details within an image can be isolated and analyzed. In a specific embodiment the subject invention provides a method by which a scalp sample image can be analyzed to detect the location and density of hair follicles in the sample. Once the location of individual hair follicles is determined an algorithm of the subject invention can be used to provide metrics pertaining to follicle cluster and patterns.

The subject invention is particularly useful in the field of image analysis. In particular analysis of scalp sample images for use in formulating hair transplantation surgeries still more particularly to automated processes for hair transplantation however a person with skill in the art will recognize other uses for the devices and methods of the subject invention. For example images of other skin areas can also be processed and analyzed by the techniques described herein to provide metrics of interest for that particular area.

In a particular use the methods described herein are used to detect and count the follicle units in the scalp sample images obtained from a patient having baldness. The scalp sample image is acquired through a microscopic imaging method using high definition image capturing devices. The images can be sent to a hybrid cloud where the image processing software resides. An image can be sent using either wired or wireless network. In wired network TCP IP Telnet FTP protocol can be used to transfer the raw images to a cloud server. For a wireless network a mobile phone can act as a smart client where GSM CDMA protocols are used.

The embodiments of the subject invention can determine individual follicle groups count the number of follicles in each group and determine the inter follicular distances between the follicle groups detected. Even images as noisy as those shown in can be analyzed by the methods of the subject invention. The expected output image can be as shown in .

In the description that follows a number of terms used in relation to image analysis and scalp images are utilized. In order to provide a clear and consistent understanding of the specification and claims including the scope to be given such terms the following definitions are provided.

The term patient as used herein describes an animal including mammals to which the systems and methods of the present invention are applied. Mammalian species that can benefit from the disclosed systems and methods include but are not limited to apes chimpanzees orangutans humans monkeys domesticated animals e.g. pets such as dogs cats guinea pigs hamsters veterinary uses for large animals such as cattle horses goats sheep and any wild animal for veterinary identification or tracking purposes.

The term noise or noisy as applied herein refers to images that contain variations in brightness color pixel variations or other information in addition to the information of interest. Typically it is the noise in an image that inhibits accurate detection and or analysis of information of interest.

Aspects of the invention can be described in the general context of computer executable instructions such as program modules being executed by a computer. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. Such program modules can be implemented with hardware components software components or a combination thereof. Moreover those skilled in the art will appreciate that the invention can be practiced with a variety of computer system configurations including multiprocessor systems microprocessor based or programmable consumer electronics minicomputers mainframe computers and the like. Any number of computer systems and computer networks are acceptable for use with the present invention.

Any specific hardware devices programming languages components processes protocols formats and numerous other details including operating environments and the like are set forth to provide a thorough understanding of the present invention. In other instances structures devices and processes are shown in block diagram form rather than in detail to avoid obscuring the present invention. But an ordinary skilled artisan would understand that the present invention can be practiced without these specific details. Computer systems servers work stations and other machines can be connected to one another across a communication medium including for example a network or networks.

As one skilled in the art will appreciate embodiments of the present invention can be embodied as among other things a method system or computer program product. Accordingly the embodiments can take the form of a hardware embodiment a software embodiment or an embodiment combining software and hardware. In an embodiment the present invention takes the form of a computer program product that includes computer useable instructions embodied on one or more computer readable media. Methods data structures interfaces and other aspects of the invention described above can be embodied in such a computer program product.

Computer readable media include both volatile and nonvolatile media removable and non removable media and contemplate media readable by a database a switch and various other network devices. By way of example and not limitation computer readable media comprise media implemented in any method or technology for storing information. Examples of stored information include computer useable instructions data structures program modules and other data representations. Media examples include but are not limited to information delivery media RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile discs DVD holographic media or other optical disc storage magnetic cassettes magnetic tape magnetic disk storage and other magnetic storage devices. These technologies can store data momentarily temporarily or permanently. In an embodiment non transitory media are used.

The invention can be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network or other communication medium. In a distributed computing environment program modules can be located in both local and remote computer storage media including memory storage devices and services e.g. cloud environments. The computer useable instructions form an interface to allow a computer to react according to a source of input. The instructions cooperate with other code segments or modules to initiate a variety of tasks in response to data received in conjunction with the source of the received data.

The present invention can also be practiced in a network environment such as a communications network. Such networks are widely used to connect various types of network elements such as routers servers gateways and so forth. Further the invention can be practiced in a multi network environment having various connected public and or private networks.

Communication between network elements can be wireless or wireline wired . As will be appreciated by those skilled in the art communication networks can take several different forms and can use several different communication protocols.

Embodiments of the subject invention can be embodied in a processing system. Components of the processing system can be housed on a single computer or distributed across a network as is known in the art. In an embodiment components of the processing system are distributed on computer readable media. In an embodiment a user can access the processing system via a client device. In an embodiment some of the functions or the processing system can be stored and or executed on such a device. Such devices can take any of a variety of forms. By way of example a client device may be a desktop or laptop computer a personal digital assistant PDA an MP3 player a communication device such as a telephone pager email reader or text messaging device or any combination of these or other devices. In an embodiment a client device can connect to the processing system via a network. As discussed above the client device may communicate with the network using various access technologies both wireless and wireline. Moreover the client device may include one or more input and output interfaces that support user access to the processing system. Such user interfaces can further include various input and output devices which facilitate entry of information by the user or presentation of information to the user. Such input and output devices can include but are not limited to a mouse touch pad touch screen or other pointing device a keyboard a camera a monitor a microphone a speaker a printer a scanner among other such devices. As further discussed above the client devices can support various styles and types of client applications.

The description herein provides an embodiment of the steps and methods of the subject invention and illustrate one embodiment for practicing the subject invention within a particular operating environment. However it will be understood that these steps and methods can be performed by a myriad of software and hardware configurations. Thus the subject invention is not to be limited by the specific software and or hardware mentioned herein.

The present invention is more particularly described in the following examples that are intended to be illustrative only since numerous modifications and variations therein will be apparent to those skilled in the art. As used in the specification and in the claims the singular for a an and the include plural referents unless the context clearly dictates otherwise.

Reference will be made to the attached figures on which the same reference numerals are used throughout to indicate the same or similar components. With reference to the attached figures which show certain embodiments of the subject invention it can be seen that the subject invention comprises in general a Feature Extraction Sub System a Pre Processing Sub System a Follicle Detection Sub System and an Inter follicular Distance Calculation Sub System . is a flow chart that illustrates the general steps and procedures of the subject invention.

The normalization process of the subject invention is a process by which to extract the quadrilateral scalp region from an image. The scalp region of the image is considered the region of interest ROI as all the follicles reside within that area. Surrounding areas such as the four edge regions around the quadrilateral scalp area are removed as part of this step. In one embodiment any three corners of the quadrilateral are detected and used to extract the sub image. In another embodiment the rectangular contour is directly detected.

For corner detection the Harris corner detector method can be used which measures the strength of detected corners and only marks those above a given strength as an actual corner. Another method based on the Canny and Hough algorithm can be used to detect the rectangular contour of the ROI. It is also possible to use methods available through an openCV image processing library. It is possible that these methods will not provide the exact ROI or results of sufficient accuracy or consistency.

The methods of the subject invention employ a refined corner detection algorithm. Advantageously the algorithm can detect the corners of the quadrilateral areas or ROI with approximately 90 accuracy. shows the principle behind the corner detection mechanism of the subject invention.

In the method of the subject invention an example of which is shown in Algorithm 1 the exact quadrilateral bald area from the input image such as those shown in can be extracted. For this it is necessary to detect the corners of the quadrilateral scalp area. In one embodiment the three corners Upper left Upper right Lower left. The Lower right corner is then possible to detect though can be unnecessary. A further embodiment calculates the angle of the ROI with the horizontal axis being considered the upper left and upper right corners. The image is then rotated accordingly to make it horizontal. Once horizontal the image can be cropped to create a sub image of the exact ROI for further analysis.

To detect corners the ROI inside the raw input image is tied with a virtual elastic thread to the nearest corners of the raw input image. This means that the smallest thread connects the possible corner of the raw image with the corner of the ROI. This process is presented in . Noise in the raw image may cause the virtual elastic thread no to attach to an original corner as shown in . To inhibit this reaction the system of the subject invention checks some of the surrounding pixels in the image to determine whether the attachment point is a part of the ROI or is a part of image noise. If the possible corner is a part of ROI then it is accepted that this as a corner otherwise the system continues to search for another nearest pixel. In one embodiment the image is analyzed with the method of the subject invention at least three times to find three corner co ordinates. Ideally the three coordinates correspond to the upper left upper right and lower left corners of the ROI.

Once the corner points have been determined the image needs to be rotated to the horizontal. To crop an image standard cropping tools known to those with skill in the art can be utilized. However to do so requires providing a start point height and width of the target area to be cropped. With this information a rotation angle can be determined utilizing equation 2 

This part of the system of the subject invention can filter the background of the ROI to separate the follicular units and reduce the amount of noise in the ROI or make the ROI clean. This can be accomplished with standard noise filtration smoothing resizing and other standard image processing techniques known to those with skill in the art.

Next the image needs to be resized and convert the input image size to a fixed standard size measurement for output. One more Gaussian Blurr smoothing operations can also be applied. These resizing and smoothing operations can make the image more compact so that the image becomes smoother removing some stairway shapes from edges of objects residing inside the image. Further the follicle units need to be enhanced and clarified in the image. From the color histogram seen in we know that the scalp color for this patient is light and the follicle color is dark for every sample image. A thresh holding or contrast enhancing technique can be applied to remove the background scalp area by making it brighter and making the follicles darker. Typically if the intensity of a pixel is higher than a predefined threshold the thresh holding technique can set the new pixel intensity to a maximum value making them bright . Otherwise the pixels are set to a value near zero making them dark .

Once these steps are complete the image can be converted to grayscale coloration. The increased contrast between features in the image obtained by the above described method allows the grayscale image to be adjusted to contain mostly black and white pixels increasing intensity and contract to make it clearer for analysis. This also makes only the border of scalp and follicles visible. If the border of scalp area are treated as image noise these areas can be avoided from computations in the next steps. At this point only the dark colored follicles are seen in the image as seen in step I in . illustrates the entire process of removing noise from an image. shows examples of follicle images and the results of grayscale conversion.

To proceed the system of the subject invention detects each follicle unit uniquely along with a 2D co ordinate location for each follicle in the image. In one embodiment the grayscale image is analyzed by a follicle detection and merging subsystem which generates a number of small follicle particles for each follicle unit. A clustering algorithm can be applied to the follicle particles for grouping. After clustering analysis the number of follicles in each cluster will be known along with the 2D co ordinates of the clusters.

The image can be scanned usually from left to right and searched for any dark regions which would indicate possible follicles. The procedure is depicted for example in and the process followed using Algorithm 2.

Quick analysis can identify that there are two follicles seen in the image in . The follicles have started from a single root at A coordinates 8 2 and then became separate. In one embodiment Algorithm 2 will start scanning the image from row 1 and column 1 It proceeds to scan columns 1 to 18 in row 1. Then it starts scanning row 2 from column 1 to 18 which is usually a left to right scan. When it reaches point A 8 2 it detects a possible dark follicle pixel. Detection of a dark pixel presents two possibilities. The first is that the dark pixel is an instance of a newly detected follicle or two it is the continuation of a previously detected follicle. To confirm this the surrounding pixels can be examined. In a further embodiment Algorithm 2 checks points 9 1 8 1 7 1 and 7 2 seen on the image in to determine if any other dark pixels are connected. In this embodiment it is only necessary to check four of the surrounding pixels during a scan of each row. For each follicle unit detected a record of the start point or head pixel and endpoint or tail pixel co ordinates is recorded. To determine if a newly detected dark pixel is a continuation of a follicle the already detected follicles in surrounding four pixels can be analyzed. If a continuation of dark pixels is found in adjoining pixels the endpoint or tail is updated with current pixel coordinates of the already detected follicle unit for which the current pixel is treated as a continuation. With this method each follicle can start with one pixel and can grow by progression of continuation or tail pixels. If the four points 9 1 8 1 7 1 and 7 2 are bright and the follicle list is currently empty the method records a new follicle by adding pixel A 8 2 to the follicle list with starting pixel 8 2 . For each follicle recorded the head and tail pixels are added to the follicle list. For the follicle just detected the follicle head is 8 2 . The follicle tail is also 8 2 as this is a newly detected follicle. Thus initially the head and tail are same. The first pixel is 4 

The algorithm proceeds to scan the next pixel 9 2 . As seen in it will also detect a possible follicle at this coordinate. However according to the algorithm once a follicle is detected it is added to the follicle list. Then the algorithm ignores the consecutive pixels in same row until the scalp area in that row is completed which means the end of a follicle region for current follicle in current row. The scan proceeds similarly in search of the other follicles. So the algorithm will not check and point 9 2 as it knows that it is the continuation of the previously detected follicle starting at A 8 2 . This will continue until any bright pixel is not found which means the end of a follicle currently scanned by the system. With this strategy pixel 10 2 is detected it will ready the system to detect any new possible follicle. It can be seen that the rest of row 2 does not contain any possible follicle. So scanning row 2 is finished with a follicle detected from point A 8 2 to 8 2 .

The algorithm then starts scanning row 3 and finds pixel 8 3 denoted by B in as a new candidate follicle. So this triggers the algorithm to check points 9 2 8 2 7 1 and 7 2 for any previously detected follicle tail or contiguous dark pixel. The algorithm detects and returns coordinates 8 2 as a previously detected follicle tail. So the system recognizes point 8 3 as the continuation of a previously detected follicle and does not add it to the follicle particle list. But an update is recorded as the follicle tail being 8 3 which was previously 8 2 . The follicle head remains same A 8 2 . The rest of this row does not contain any follicle particles. Once scanning of row 3 is complete the algorithm proceeds to build a follicle particle with a head A 8 2 and B 8 3 . This represents follicle pixels merging to form a follicle particle.

In row 4 of it can be seen that point C 7 4 is a follicle candidate. But after checking 8 3 7 3 6 3 6 4 it is determined that point B 8 3 is a continuing follicle tail of one of the already detected follicles tail. This prompts the system to update that follicle particle to indicate that the tail of that follicle is now C 7 4 . Then the pixels 8 4 to 10 4 will be omitted from follicle detection as there is no white pixel in between them. Once updated with coordinates 11 4 the system is again ready to detect a new follicle.

By way of further example scanning row 5 in it can be seen that when existing follicle tail is updated with coordinates D 7 5 the system will avoid the pixels until 9 5 which is a white pixel. This also triggers the system that a new follicle has been detected and proceeds to find pixel E 10 5 . It then checks the pixels 11 4 10 4 9 4 and 9 5 . Since as seen in none of these coordinates is the tail of any detected follicle in the follicle particle list this indicates that only one follicle has been detected so far in the image whose tail is currently at D 7 5 . The system will add a new follicle with head and tail at pixel E 10 5 . Now the image has two follicles detected. So follicle particles are now growing and after n steps there will be a complete follicle particle Pwhere as seen in Equation 5 5 

It can be seen in that there are only two follicles indicated in that image. However there were detected four follicle pixel groups particles. This is due to the normalization process in which some follicle pixels were lost. Another reason is the image noise that occurs during sample acquisition from a patient. As a consequence some pixels or pixel groups became discrete from the original follicle image and erroneously form instances of new follicle particles. It can be seen that in this happened at points F and G. One embodiment utilizes an erode and dilate procedure to eliminate this problem which can minimize these gaps among the follicle pixel parts. However this method can overcompensate and cause two or more separate but very adjacent follicles to be merged together and detected as one follicle. Nonetheless this method provides a good approximation for the number of follicles regardless of the variability in shape thickness or length. Follicles can lie in any direction with any angle irrespective to one another and will still be detected by the methods of the subject invention. With the algorithms disclosed herein in general multiple follicle pixel groups are detected for a single follicle. The next step is to perform clustering techniques to determine how many follicle particles are within a cluster.

At this point of the analysis process a list of 2D points of follicle particles has been obtained with only two points added in the follicle list for each follicle group which indicate the start points and endpoints. The start pixel of each follicle particle can be used for clustering purposes. In one embodiment a recursive clustering algorithm is utilized to cluster the 2D points. The algorithm is shown Algorithm 3. This algorithm takes the follicle list and gives a list of clusters of follicle pixel groups.

Initially with the algorithm there is a clusterList with n clusters containing one follicle group each. In each recursive step two clusters are merged into one and the clusterList is updated. Then recursively merge another two clusters then another two and so on. This recursion stops when there is no cluster remaining to be merged with some other cluster.

The clusters and number of follicle pixel groups in a cluster is now available. In one embodiment this count can be scaled to determine how many follicles there are in each cluster. There are various methods by which a proper scaling calibration can be determined. Usually brute force analysis of multiple samples is conducted and results normalized for patient types. In one embodiment this technique was used to develop the following scaling model for use in detecting the number of follicles. In this example let ac be the number of merged follicle groups in cluster c.

In this step the inter follicular distances among the detected follicle clusters or groups are measured. This can provide a connected points graph such that all of the vertices follicle groups are connected only to respective neighbor vertices. Ideally there are no edge inter follicular distance crossings.

Once the inter follicular distances are determined a complete connected points graph can be created. A complete graph will show every vertex connected to all other vertices of the graph. So the edges from one follicle cluster to every other follicle clusters are drawn on the graph. illustrate examples of images having different noise levels on which complete connected point graphs have been drawn thereon.

The next step is to remove all of the edge crossings. To compute if two edges such as E1 and E2 are crossing it is necessary to know whether the endpoints of one edge are in the opposite sides of the other edge. By way of example let x1 y1 and x2 y2 be two endpoints of edge E1 and a1 b1 and a2 b2 be two endpoints of edge E2. This would indicate that the following two values value1 and value2 will be of opposite sign one will be and other will be if a1 b1 and a2 b2 resides in opposite sides of edge E1. value1 2 1 1 2 2 1 1 2 value2 2 1 2 2 2 1 2 2 7 

With reference to it can be seen that this is acceptable in case 1. But this will not work for the case 2 where the edges are not crossing each other because a1 a2 and a2 b2 are on opposite sides of E1 x1 y1 x2 y2 and the above method will delete one of them. But it would be unacceptable to remove any point in case 2. Thus it can be necessary to consider another method by which to check whether x1 y1 and x2 y2 are in the opposite side of edge E2. One embodiment utilizes the following two equations 8 . value3 2 1 1 2 2 1 1 2 value4 2 1 2 2 2 1 2 2 8 With these equations if value1 and value 2 are of opposite signs and value3 and value4 are of opposite signs it can be accurately assumed that they are involved in edge crossing requiring that one be removed. In one embodiment the longer edge between these two edges is removed so that a connected points graph connecting the nearer neighboring vertices can be created.

This process can be carried out until all of the edges involved in crossing have been removed. shows a flow chart of this edge clearing step.

A mobile application was developed to utilize the systems and methods of the subject invention from any location. The mobile application can take the sample digital image and send it to a web server through the world wide web where a web service can receive the digital image. The web server can have installed thereon an embodiment of the algorithm of the subject invention and can process the image using the installed algorithm. After processing the web server can provide the coordinates of one or more markers along with one or more labels that are also generated during analysis of the digital image. In one embodiment a marker is a visual indicator of the location for each pixel cluster that represents a follicle group. In a further embodiment each label is a number or other symbol in close proximity to the marker that it represents how many follicles are present at each marker position. The mobile application can obtain the marker and label information and display it on the digital image for final output to a user. illustrates one example of this embodiment. Advantageously this application can provide a framework for analysis of follicle images that physicians can utilize from their mobile devices thus removing reliance on desktop computers. Also provided is an expert system to aid in the analysis and advice on the selection of medical procedure. Other mobile applications can be developed by providing a generic mobile application development framework that allows for access of other applications into the mobile domain.

One embodiment utilizes software which is capable of taking an image of a portion of a patients scalp and identify folical location and density. This information can be conveyed back to a user in the form of a report illustrated for example in which can be used to plan a folical hair transplant. This information can easily be formatted and transmitted via a system interface for use by a robotic implantation system.

In a further embodiment a physician utilizes a mobile device such as for example a tablet or smart phone device to acquire an image from a patient s scalp in the physicians office. The software can transmit the image to a web based or cloud server where it will be analyzed and a Follicle Analysis report sent back to the tablet or smart phone device with the necessary metrics provided to the physician. The results can be shared with the patient in near realtime so that the consultation can conclude in the patient being informed whether the technique can be used and what the expected results will look like.

In advance of a surgery a robotic implantation device can receive the follicle pattern information from the here described system and use it to plan an implantation pattern based on the location of the baldness being treated. The industry is moving toward the use of assistive robotic systems that remove and implant patient hair follicles. Embodiments of the subject invention can be used to direct the operations of a robotic hair implant system to reduce the amount of time the surgeon must operate on the patient and can potentially reduce surgery costs for patients over time. Embodiments of the subject invention provide advantages that are currently not available in any robotic system which is the ability to systematically identify the unique hair follicle patterns of a patient and render this information via a simple application programming interface API . The API will allow a robotic system to acquire follicle placement information necessary to plan its objective area. In an embodiment the robotic system will connect to a cloud based service via an API and can transmit images from the patient s scalp taken in the physician s office. Cloud servers having installed therein embodiments of the algorithm of the subject invention can be used to analyze the image and send a report back to the robotic system via the API with the necessary metrics requested by the physician via the robotic system. The results can be shared with the patient in near realtime so that the consultation can conclude in the patient being informed whether this technique can be used and what the expected results will look like. With the planning data computed the patient can return to the office for the procedure and the system can be initiated with the planned treatment.

A further advantage to the method of the subject invention is that it can enables a new grafting technique for implantation and this would help doctors to derive the distribution of hair follicles on the scalp in addition to their inter follicular distances. A graft can be produced to match original hair patterns exactly so that the implantation appears more natural.

Certain modifications of the imaged patterns should be incorporated in specific areas of the hair transplant to achieve optimal outcomes.

1 Frontal hairline The leading edge of the hairline zone must be completely irregular and have no straight line characteristics. The most peripheral areas of the hairline zone are grafted at a lower density and the density increases as one progresses inward. Exclusively single hair follicular units preferably with finer caliber hairs are utilized in the first 3 to 5 mm. wide area of the hairline zone. Occasionally some two hairs follicular units can be used interspersed within the single hairs towards the most posterior aspect of this zone. Behind the area just described the pattern can begin.

2 The whorl part of the posterior scalp or crown is an area that in common language is called the cow lick area and measures approx. 1 2 cm in diameter. Hairs in this area are lie a vortex type pattern radiating outwards in a 360 range of directions. Towards the center of the whorl mostly single hair follicular units are utilized with perhaps a rare two hair follicular unit interspersed. No three hair follicular units should be utilized in this area and it should be grafted at slightly lower density than the rest of the crown.

3 The back hairline When the front half to two thirds of the balding scalp is transplanted the most posterior border of the transplanted zone is sometime referred to as the back hairline . This area is composed of a zone approximately 2 to 3 cm wide in the anterior posterior plane and should be characterized by total irregularity it and is never a straight line . In this back hairline the density is lower and is density gradually decreased as one goes more posteriorly. Predominantly one hair follicular units are utilized interspersed with some two hair follicular units. No three hair follicular units are used in this zone.

4 Temporal points these are hair bearing peaks similar in shape to a triangle with the apex pointing towards the front. The temporal points are located above the sideburns. One hair follicular units with low caliber hairs are used for 5 mm around the periphery with two hair units used centrally. Lower densities are utilized to recreate these structures.

5 In most cases of advanced baldness donor follicle limitations are such that transplantation can cover from the frontal hairline posteriorly to where the scalp starts transitioning from the horizontal to the vertical plane. This transition point has been termed the vertex transition point . By transplanting up to this point the changing scalp curvature is taken advantage of as the transplanted hairs in this area fall and covers the vertical component of the crown. Since the crown can expand centrifugally with continuing baldness it is best to not commit to transplantation of the vertical crown so that if hair loss continues inferiorly one does not have to utilize precious donor supply to keep chasing the baldness in a downward direction.

The scope of the invention is not limited by the specific examples and suggested procedures and uses related herein since modifications can be made within such scope from the information provided by this specification to those skilled in the art.

Following examples illustrates procedures for practicing the subject invention. This example is provided for the purpose of illustration only and should not be construed as limiting. Thus any and all variations that become evident as a result of the teachings herein or from the following examples are contemplated to be within the scope of the present invention.

The methods of the subject invention were conducted on several different types of sample images obtained from real patients. The results are shown in . The graph shown in depicts average accuracy for each follicle groups.

Accuracy can be determined from two dimensions a how many follicles are undetected and b how many counts of follicle are incorrect. The methods of the subject invention provide results that are accurate in terms of detecting the follicle instances. Almost no follicle particle is undetected. Then accuracy in terms of correct count of follicles can be calculated by the following formula 

In one case 5 groups of follicles was indicated where the number of follicles was actually 3. The methods and algorithms of the subject invention detected 6 such groups. So the accuracy was determined to be 83.33 . As seen in most of the time accuracy was over 80 which is quite good for these types of noisy blurry nonstandard image samples. The methods herein could identify all the follicle groups successfully. Interestingly the total number of actual follicles is usually greater than the number of follicles detected by our system. This is due to the subtraction of some border regions early in the method to reduce noise which can eliminate some follicles.

The methodology worked well on almost all of the sample images regardless of the size of the follicles and level of image noise. For example the input images seen in and have a lot of differences between them. is a clearer image but the follicles are not dark enough. is very noisy but the follicles are dark enough to see. illustrates results obtained from an image with less initial noise. The methods and algorithms of the subject invention were able to accurately detect follicle groups for both of the images. This is due to the application of thresh holding to separate the follicles from background and reduction of other noise by applying Gaussian Blur and gray imaging techniques. Advantageously grayscale imaging gives dark follicles regardless of the original color of follicles. Finally in the counting phase merging the follicle pixels ensures that there will not be much difference between long and short follicles in the number of follicle pixel groups.

The methods of the subject invention provide a generalized way to count any type of shape or region of interest within an image. Currently existing standard methods can work on specific images with specific shapes. But they usually have so many constraints on the quality of the input image that they can be impractical to use. The subject invention applies simple techniques to detect the corners of a quadrilateral object detecting and merging the connected pixels to form follicle particles and finally a recursive clustering algorithm to cluster them. Results were found to be acceptably accurate in terms of object follicle count. The method can be applied not only follicle detection but any type of noisy or heavily cluttered images especially medical or biological images where the randomly scattered objects need to be detected and counted. to provide a graphical illustration of one embodiment for practicing the methods and procedures of the subject invention. In a particular embodiment a Follicle Analysis Report is generated such as shown for example in . The report provides metrics that can be used to determine whether a patient is a viable candidate for the procedures.

This system for clustering hair follicle units is unique because it groups the individual follicles which reside very close together on the human scalp and computes a percentage for each on the basis of whether it contains 1 2 3 or 4 follicle s per cluster. This in turn can be used to obtain the patient s hair follicle density. The technique can further merge follicular units which are then inputted into a clustering algorithm in order to group the follicle pixels together. The results are then used in an approximation model to map the number of merged follicle pixels to the number of follicles per cluster. The more follicle pixels detected in a cluster the more follicles that reside within the cluster. The system used in claim one comprises acquisition components which use mobile phones and microscopes to capture the input images.

The technology is based on an algorithm that uses a unique context dependent framework wherein directional progression of pixels which is part of a follicle is used to merge the follicle pixels for identifying follicle units. Specifically directional progression is used to measure the angle of a follicle on the vertical axis. This allows the physician to know in which direction the patient s hair grows. Furthermore the angle of growth for each follicle can help the physician know using the sample image which part of the scalp it was taken from. For example the sample taken from the crown area of the scalp has different angles of growth compared to the back of the skull.

Input images can be sent to a hybrid cloud for analysis where the image processing software kernel resides. This introduces the application in the context of telemedicine for hair implantation. In addition a centralized client server system can been incorporated. The hair implantation robots can be the clients and will be connected to a central cloud server. All the robots can have extensive processing power and their software will be updated regularly through the parent server.

Finally the system enables the computation of the inner follicular distances using a graph model to connect neighboring follicular units by calculating the distance between each edge. There are no edge crossings to obtain a standard connected sample. Furthermore a hair follicle mosaic model generated is the patient s signature which can be used to identify the user. This would also enable recognition of the nationality of a person from this signature. For example driven profiling of patients from Latin America mostly mixed complexion differ greatly in terms of hair signature when compared to patients from North America mostly white complexion .

All patents patent applications provisional applications and other publications referred to or cited herein are incorporated by reference in their entirety including all figures and tables to the extent they are not inconsistent with the explicit teachings of this specification. Additionally the entire contents of the references cited within the references cited herein are also entirely incorporated by reference.

The examples and embodiments described herein are for illustrative purposes only and that various modifications or changes in light thereof will be suggested to persons skilled in the art and are to be included within the spirit and purview of this application.

Any reference in this specification to one embodiment an embodiment example embodiment further embodiment alternative embodiment etc. is for literary convenience. The implication is that any particular feature structure or characteristic described in connection with such an embodiment is included in at least one embodiment of the invention. The appearance of such phrases in various places in the specification does not necessarily refer to the same embodiment. Further when a particular feature structure or characteristic is described in connection with any embodiment it is within the purview of one skilled in the art to affect such feature structure or characteristic in connection with other ones of the embodiments.

The invention has been described herein in considerable detail in order to comply with the Patent Statutes and to provide those skilled in the art with information needed to apply the novel principles and to construct and use such specialized components as are required. However the invention can be carried out by specifically different equipment and devices and that various modifications both as to equipment details and operating procedures can be effected without departing from the scope of the invention itself. Further although the present invention has been described with reference to specific details of certain embodiments thereof and by examples disclosed herein it is not intended that such details should be regarded as limitations upon the scope of the invention except as and to the extent that they are included in the accompanying claims.

