---

title: System and methods for optical lambda flow steering
abstract: A system implementing an optical steering domain that steers traffic flows through a plurality of processing nodes is described. The system includes a first, second, and third wavelength selective switch (WSS). The first WSS receives the traffic flows, and transmits traffic flows out a plurality of tributary ports toward the processing nodes. The second WSS receives the processed traffic from the processing nodes, and sends it to a third WSS. The third WSS receives the processed traffic from the second WSS, and causes the processed traffic requiring further processing to be transmitted out its third plurality of tributary ports to be looped back toward the plurality of processing nodes, and causes the processed traffic that does not require further processing to be transmitted by a different tributary port of the third WSS that is an exit port leading out of the optical steering domain.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09520961&OS=09520961&RS=09520961
owner: Telefonaktiebolaget L M Ericsson (publ)
number: 09520961
owner_city: Stockholm
owner_country: SE
publication_date: 20140227
---
This application claims priority to U.S. Provisional Patent Application No. 61 928 996 entitled System and Methods for Optical Lambda Flow Steering filed Jan. 17 2014 which is incorporated by reference herein in its entirety.

Embodiments of the invention relate to the field of computer networking and more specifically to circuit based lambda flow traffic steering for Network Function Virtualization in the optical domain.

The Internet transformation being witnessed today is led by growing connectivity needs mobile services cloud computing and big data. These have significantly increased the volume and requirements of traffic processed by network equipment. To meet these increasing demands while maintaining or improving profitability network operators are constantly seeking ways to reduce costs and enable faster innovation. To this end network function virtualization NFV is a new paradigm embraced by service providers. In NFV common network functions are realized in software by using commercial off the shelf COTS hardware e.g. general purpose server and storage hardware or other generic hardware to provide Network Functions NFs through software virtualization techniques. These network functions are referred as Virtualized Network Functions vNFs . The use of vNFs aids both scalability and largely decouples functionality from physical location which allows the vNFs to be flexibly placed at the different places e.g. as at customers premises at network exchange points in central offices data centers and further enables time of day reuse easy support for testing production and developmental versions of software the enhancement of resilience through virtualization eased resource sharing reduced power usage and the ability to implement various vNFs in networks including heterogeneous server hardware.

Similar to virtual machines the concept of vNFs allows multiple instances of network functions to be run on shared physical infrastructure desirably in a data center environment. NFV encompasses both middlebox functionalities e.g. firewall deep packet inspection DPI network address translation NAT as well as core network functions that are more challenging to virtualize e.g. session border controllers SBCs provider edge PE routers broadband remote access server BRAS serving gateway GPRS support node SGSN GGSN . The core network functions handle large volume coarse granularity traffic flows and don t have the same fine grained traffic steering requirements as middleboxes do. As these core vNFs are instantiated traffic will need to be routed across various intermediate vNFs before reaching its destination e.g. in a content delivery server or back to the PE and or customer edge CE router . This process is called traffic steering for NFVs which requires a flexible network configuration to steer traffic through a set of vNFs.

Compared to the traffic steered across traditional middleboxes the traffic between core vNFs is usually more aggregated occurs at much higher rates e.g. 10 s of Gigabits per second Gbps with a fast growing trend and usually doesn t have the same fine grained traffic steering requirements that normal middleboxes do. Thus existing Layer2 Layer3 packet based traffic steering has scalability issues in trying to handle the large traffic volume required when steering traffic between core vNFs and further may require a large energy use.

For example illustrates a prior art packet based switching configuration for steering packets through vNFs. This illustration demonstrates the scalability issue for a pure packet based approach for traffic steering between core vNFs where data center network infrastructure has to grow with traffic volume and vNF demands. In a core switch network element in a packet steering domain is tasked with steering two traffic flows through several vNFs A D.

The first traffic flow enters the packet steering domain at a rate of 5 Gbps and must be passed to vNF A A executing on a computing device of a set of one or more computing devices A in a rack and joined through a Top of Rack ToR switch A and then must be passed to vNF B B which also executes on a computing device of a set of computing devices B in another rack and joined through another ToR switch B. Similarly the second traffic flow enters the packet steering domain at a rate of 5 Gbps and must be passed to vNF C C executing on a computing device of a set of computing devices C in a rack and joined through a ToR switch C and then must be passed to vNF D D which also executes on a computing device of a set of computing devices D in another rack and joined through another ToR switch D.

Accordingly the path for the first traffic flow is to enter the packet steering domain and arrive at the switch network element at circle go to the ToR switch A go to the vNF A A go back to ToR switch A and then re enter the switch network element at circle . Next this traffic is sent to ToR switch B directed to the vNF B B is returned back to the ToR switch B and returned to the switch network element at circle before exiting the packet steering domain . The path for the second traffic flow is similar as it enters the packet steering domain and arrives at the switch network element at circle is sent to the ToR switch B on its way to the vNF C C and thus returns to ToR switch B and then re enters the switch network element at circle . Next this traffic of the second traffic flow is sent to ToR switch D directed to the vNF D D is returned back to the ToR switch D and then returned back to the switch network element at circle before exiting the packet steering domain .

In this example each of these two 5 Gbps flows transits the switch network element three times which means that the switch network element must process a packet throughput of 30 Gbps 5 Gbps per flow 3 occurrences per flow 2 flows . This presents an amplification effect as the addition of new flows will create an amplified load being placed on the packet steering domain .

Further as the size i.e. rate of each flow grows and the number of vNFs each flow must transit grows a natural occurrence over time as traffic increases and the number of to be applied NFs increases this amplification effect is further magnified. For example assume the packet steering domain still processes two flows but that each flow is instead 10 Gbps and each flow must transit three vNFs each instantiated on server hardware at a different racks. In this case each flow transits the packet steering domain four times and now the packet throughput at the packet steering domain is 80 Gbps. For core switches used in data centers high throughput typically requires more hardware density and power consumption and thus there is a strong need for efficient and scalable systems to direct high volume traffic flows across vNFs that may dynamically change in terms of location and the required sequences of vNF traversal.

According to an embodiment a method in an optical steering domain for steering one or more traffic flows through a plurality of processing nodes is described. Each of the one or more flows of traffic is to be processed by a different defined series of one or more processing nodes of the plurality of processing nodes. In an embodiment each of the plurality of processing nodes are vNFs. The optical steering domain includes a set of three or more wavelength selective switches WSSs . The method includes receiving traffic of a traffic flow of the one or more traffic flows at a common port of a first WSS of the set of WSSs. The first WSS includes a plurality of tributary ports coupled to a respective plurality of optical links leading toward the plurality of processing nodes. The method also includes transmitting using a first tributary port of the WSS over a first optical link of the plurality of optical links the traffic toward a first processing node of the plurality of processing nodes. The method also includes receiving at a tributary port of a second WSS of the set of WSSs processed traffic. The processed traffic is the result of the traffic being processed by the first processing node. The method further includes transmitting at a common port of the second WSS the processed traffic to a third WSS of the set of WSSs and receiving at a common port of the third WSS the processed traffic. The method also includes transmitting one or more times the processed traffic out of one or more tributary ports of the third WSS on one or more optical links coupled to the one or more tributary ports of the third WSS on one end and coupled to one or more of the plurality of optical links that are coupled to the first WSS to be looped back for further processing by one or more other processing nodes of the plurality of processing nodes.

According to an embodiment a system to implement an optical steering domain to steer one or more traffic flows through a plurality of processing nodes is described. The system includes a first wavelength selective switch WSS a second WSS and a third WSS coupled to the second WSS. The first WSS includes a first common port configured to receive the one or more traffic flows from outside the optical steering domain a first plurality of tributary ports to be coupled to a respective first plurality of optical links leading toward the plurality of processing nodes and a first steering module coupled to the first common port and the first plurality of tributary ports. The first steering module is configured to identify for each of the one or more traffic flows a wavelength that the traffic flow is to be sent at and one of the first plurality of tributary ports to be used to send the traffic flow toward the processing node that the traffic flow is to be initially processed by. The first steering module is also configured to cause each of the one or more traffic flows to be sent at the respective identified wavelength using the respective one of the first plurality of tributary ports. The second WSS includes a second plurality of tributary ports configured to receive processed traffic for each of the one or more traffic flows. The processed traffic is the traffic of the one or more flows that has been processed by one or more of the plurality of processing nodes. The second WSS further includes a second common port coupled to the third WSS and that is configured to transmit the received processed traffic to the third WSS. The third WSS which is coupled to the second WSS includes a third common port configured to receive the processed traffic from the second WSS a third plurality of tributary ports coupled to a second plurality of optical links that are coupled to the first plurality of optical links and a second steering module coupled to the third common port and to the third plurality of tributary ports. The second steering module is configured to cause that of the processed traffic that requires further processing to be transmitted by the third plurality of tributary ports to be looped back toward the plurality of processing nodes. The second steering module is further configured to cause that of the processed traffic that does not require further processing to be transmitted by a different tributary port of the third WSS that is an exit port leading out of the optical steering domain.

In an embodiment a method in an optical steering domain for steering traffic through a plurality of processing nodes is described. The method includes receiving a first set of one or more packets at a first optical port of a first wavelength selective switch WSS . The first set of packets are to be serially processed by a first processing node and a second processing node of the plurality of processing nodes. The method further includes transmitting at a second optical port of the first WSS the first set of packets toward the first processing node. The method further includes receiving at a first optical port of a second WSS a second set of packets that have been processed and sent by the first processing node and transmitting at a second optical port of the second WSS the second set of packets to a third WSS. The method further includes receiving at a first optical port of the third WSS the second set of packets and transmitting at a second optical port of the third WSS the second set of packets. The second optical port is coupled to an optical link that is further coupled to another optical link that itself is coupled to the first WSS at one end and leads to the second processing node at the other end. The method further includes receiving a third set of packets at a third optical port of the second WSS. The third set of packets result from the processing of the second set of packets by the second processing node. The method further includes transmitting at the second optical port of the second WSS the third set of packets to the third WSS and receiving at the third WSS the third set of packets. The method further includes transmitting at a third optical port of the third WSS the third set of packets out of the optical steering domain.

Embodiments of the invention are thus enabled to steer coarse traffic flows carried in wavelengths across processing nodes e.g. core vNFs with high efficiency by employing reconfigurable wavelength switching devices and a fiber loopback scheme to dynamically control the path of wavelength. By switching traffic in an optical domain a significant reduction of power results and the system provides good scalability and flexibility as traffic volume and vNF demand grow or change. Further embodiments are applicable to many scenarios where bulky traffic is to be steered across multiple sites.

In the following description numerous specific details are set forth. However it is understood that embodiments of the invention may be practiced without these specific details. In other instances well known circuits structures and techniques have not been shown in detail in order not to obscure the understanding of this description. Those of ordinary skill in the art with the included descriptions will be able to implement appropriate functionality without undue experimentation.

References in the specification to one embodiment an embodiment an example embodiment etc. indicate that the embodiment described may include a particular feature structure or characteristic but every embodiment may not necessarily include the particular feature structure or characteristic. Moreover such phrases are not necessarily referring to the same embodiment. Further when a particular feature structure or characteristic is described in connection with an embodiment it is submitted that it is within the knowledge of one skilled in the art to effect such feature structure or characteristic in connection with other embodiments whether or not explicitly described.

Bracketed text and blocks with dashed borders e.g. large dashes small dashes dot dash and dots are used herein to illustrate optional operations that add additional features to embodiments of the invention. However such notation should not be taken to mean that these are the only options or optional operations and or that blocks with solid borders are not optional in certain embodiments of the invention.

In the following description and claims the terms coupled and connected along with their derivatives may be used. It should be understood that these terms are not intended as synonyms for each other. Coupled is used to indicate that two or more elements which may or may not be in direct physical or electrical contact with each other co operate or interact with each other. Connected is used to indicate the establishment of communication between two or more elements that are coupled with each other. However depending upon the context of the use of these terms especially with regard to fiber optics the term coupled may simply refer to two fiber links being physically joined perhaps using a coupler device. The exact meaning of the terms however will be apparent to those of skill in the art based upon the context of their use.

An electronic device or computing device e.g. an end station a network device stores and transmits internally and or with other electronic devices over a network code composed of software instructions and data using machine readable media such as non transitory machine readable media e.g. machine readable storage media such as magnetic disks optical disks read only memory flash memory devices phase change memory and transitory machine readable transmission media e.g. electrical optical acoustical or other form of propagated signals such as carrier waves infrared signals . In addition such electronic devices includes hardware such as a set of one or more processors coupled to one or more other components such as one or more non transitory machine readable media to store code and or data user input output devices e.g. a keyboard a touchscreen and or a display and network connections to transmit code and or data using propagating signals . The coupling of the set of processors and other components is typically through one or more busses and bridges also termed as bus controllers . Thus a non transitory machine readable medium of a given electronic device typically stores instructions for execution on one or more processors of that electronic device. One or more parts of an embodiment of the invention may be implemented using different combinations of software firmware and or hardware.

As used herein a network device e.g. a router switch bridge is a piece of networking equipment including hardware and software which communicatively interconnects other equipment on the network e.g. other network devices end stations . Some network devices are multiple services network devices that provide support for multiple networking functions e.g. routing bridging switching Layer aggregation session border control Quality of Service and or subscriber management and or provide support for multiple application services e.g. data voice and video . Subscriber end stations e.g. servers workstations laptops netbooks palm tops mobile phones smartphones multimedia phones Voice Over Internet Protocol VOIP phones user equipment terminals portable media players GPS units gaming systems set top boxes access content services provided over the Internet and or content services provided on virtual private networks VPNs overlaid on e.g. tunneled through the Internet. The content and or services are typically provided by one or more end stations e.g. server end stations belonging to a service or content provider or end stations participating in a peer to peer service and may include for example public webpages e.g. free content store fronts search services private webpages e.g. username password accessed webpages providing email services and or corporate networks over VPNs. Typically subscriber end stations are coupled e.g. through customer premise equipment coupled to an access network wired or wirelessly to edge network devices which are coupled e.g. through one or more core network devices to other edge network devices which are coupled to other end stations e.g. server end stations .

Network devices are commonly separated into a control plane and a data plane sometimes referred to as a forwarding plane or a media plane . In the case that the network device is a router or is implementing routing functionality the control plane typically determines how data e.g. packets is to be routed e.g. the next hop for the data and the outgoing port for that data and the data plane is in charge of forwarding that data. For example the control plane typically includes one or more routing protocols e.g. Border Gateway Protocol BGP Interior Gateway Protocol s IGP e.g. Open Shortest Path First OSPF Routing Information Protocol RIP Intermediate System to Intermediate System IS IS Label Distribution Protocol LDP Resource Reservation Protocol RSVP that communicate with other network devices to exchange routes and select those routes based on one or more routing metrics.

As used herein a processing node is an entity in a network that is capable of receiving packets and performing one or more functions with those packets. A processing node may optionally also further transmit those packets and these transmitted packets may be the same as when they arrived at the processing node or different i.e. modified by the processing node . For example a processing node can be any node of a data center including but not limited to a data file storage server a router a firewall e.g. a stateful firewall a load balancer a DPI service element database web server email server virus spam phishing detection elements an application delivery controller a special purpose server a softswitch etc. A processing node may include software and the hardware e.g. a computing device that it executes upon. In some instances a processing node is a vNF.

Unlike traditional network architectures that require complex network management functions to be distributed in the control planes of multifunctional network elements throughout the network and further require complex data and control planes integrated into the same multifunctional network element a software defined network SDN allows the data plane of the network to be separated from the control plane. Data planes can be implemented as simple discrete flow switches forwarding elements distributed throughout the network and the control planes providing the networks intelligence are implemented in a centralized controller that oversees the flow switches. By decoupling the control function from the data forwarding function software defined networking eases the task of modifying the network control logic and provides a programmatic interface upon which developers can build a wide variety of new routing and protocol management applications. This allows the data and control planes to evolve and scale independently while reducing the management necessary for the data plane network components.

In one embodiment of a software defined network the control plane controls the forwarding planes through a control plane signaling protocol over a secure and reliable transport connection between the forwarding elements and the controller. The controller typically includes an operating system that provides basic processing I O and networking capabilities. A middleware layer provides the context of the software defined network controller to the operating system and communicates with various forwarding plane elements using a control plane signaling protocol. An application layer over the middleware layer provides the intelligence required for various network operations such as protocols network situational awareness and user interfaces. At a more abstract level the application layer works with a logical view of the network and the middleware layer provides the conversion from the logical view to the physical view.

In an embodiment of a software defined network paradigm each forwarding element is a flow switching enabled network device. The flow switching enabled network device forwards packets based on the flow each packet belongs to instead of the destination IP address within the packet which is typically used in current conventional packet switched IP networks. A flow may be defined as a set of packets whose headers match a given pattern of bits. In this sense traditional IP forwarding is also flow based forwarding where the flow is defined by the destination IP address only. Instead of just considering the destination IP address or the source IP address though generic flow definitions allow many fields e.g. approximately 40 or more in the packet headers to be considered.

The control plane transmits relevant messages to a forwarding element based on application layer calculations and middleware layer mapping for each flow. The forwarding element processes these messages and programs the appropriate flow information and the corresponding actions in its flow tables. The forwarding element maps packets to flows and forwards packets based on these flow tables.

One problem addressed by embodiments of the invention can be illustrated by considering the need for traffic forwarding inside a data center across various racks and servers. Network traffic usually enters the access network traverses common core network functions such as routers switches access gateways and middleboxes and ultimately reaches end devices e.g. server hardware in a data center . The traffic flows may fluctuate depending on the applications being supported and the overall resource management practices in place. In NFV scenarios traffic patterns are expected to fluctuate more than in today s data centers where most flows are from a user machine to a terminating server. As a consequence vNFs will be instantiated and turned off at various servers as needed and large data flows are to be steered across the vNFs based on network status and server availability. Therefore the network infrastructure connecting various vNFs will need to be dynamically configured.

Today s pure packet based traffic steering approaches include Ethernet based overlay routing and software defined networking SDN based flow steering like OpenFlow. Typically these approaches define rules at the packet level for different vNF paths. While a packet based scheme may be required for fine grained traffic steering such as service chaining this same solution is not efficient especially in terms of power usage for the set of high rate aggregated traffic flows that need to traverse a number of core vNFs. Embodiments of the invention assure high transmission and switching efficiency such that the amount of packet processing in terms of packet throughput can be significantly reduced by employing traffic switching in an optical domain.

A method apparatus and system for steering one or more traffic flows through a plurality of processing nodes in an optical steering domain is described. In an embodiment of the invention each of the one or more flows of traffic is to be processed by a different defined series of one or more processing nodes of the plurality of processing nodes. In an embodiment the optical steering domain comprises a set of three or more wavelength selective switches WSSs which are configured to transmit the one or more traffic flows toward the plurality of processing nodes receive the processed traffic of the traffic flows and loopback any of the processed traffic that requires further processing toward the necessary processing nodes. In some embodiments each processing node is a vNF and in some of those embodiments each vNF is a core vNF. The one or more traffic flows received at the optical steering domain in an embodiment are received from a ROADM which in some embodiments receives traffic and sends it to either the optical steering domain or a packet switching domain.

In an embodiment per user traffic flows arrive and are inspected by an operator s aggregation domain. Based on policy rules injected through OSS BSS the flows are classified in aggregated groups that will determine which NF sequence the flow will go through. Flows belonging to the same aggregated group may be marked either with a common virtual local area network VLAN identifier ID Multiprotocol Label Switching MPLS Label or similar . The SDN controller and the cloud management jointly perform routing and wavelength assignment RWA and VM assignment for each aggregated group. The aggregation routers are equipped with tunable optics also referred to herein as tunable transceivers to convert each aggregated group to a specific wavelength as outputted from RWA. A ROADM configured by the SDN controller identifies the aggregated groups and dispatches the groups to either a packet steering domain or an optical steering domain. Those of the aggregated flows heading to the packet steering domain are dropped by the ROADM to a core switch for regular steering in the packet steering domain. However those of the aggregated groups heading to optical steering domain or lambda flows are routed into the optical steering domain to WSS devices and then are steered based on their central frequencies each time entering the WSS. The WSS devices and the tunable transceivers are configured by the SDN controller based on the RWA. The lambda flows are steered by the WSS devices and loopback fibers to be sent through the desired series of vNFs and then the lambda flows will be routed back to the ROADM after such processing.

Thus embodiments of the invention are thus enabled to steer coarse wavelength traffic across core vNFs with high efficiency by employing reconfigurable WSSs and a fiber loopback scheme to dynamically control the path of wavelength. By switching traffic in an optical domain a significant reduction of power results and the system provides good scalability and flexibility as traffic volume and vNF demand grow or change. Further embodiments are applicable to many scenarios where bulky traffic is to be steered across multiple sites.

The architecture introduces a novel optical steering domain which operates at the dense wavelength division multiplexing DWDM layer to minimize power intensive packet switching. An entire traffic path traverses both the aggregation domain e.g. operator access network and optical steering domains. Traffic destined to core vNFs e.g. vNF A M is first aggregated in the aggregation domain e.g. by aggregation router and grouped based on pre defined NF policies. For example one possible solution is using an OpenFlow based scheme with rules specifying one or a combination of fields from packets that identify packets needing to be transmitted to a certain defined series of core NFs e.g. vNFs A D . Thus the processing burden of traffic aggregation lies in matching packets against fields and switching to an aggregation port. The aggregation port is equipped with optical modules to convert traffic into DWDM wavelengths. Multiple wavelengths can be multiplexed onto a single fiber e.g. WDM link A for transporting to the operator s data center . The aggregation domain itself in some embodiments can include vNFs e.g. Z and traditional NFs e.g. A B though these can be placed in other locations as well.

The entry point of the data center is a reconfigurable optical add drop module ROADM which receives and sends traffic in the form of wavelength and sends wavelength traffic that needs to be steered in the optical domain over a WDM link B. After this traffic has been processed by multiple core vNF s e.g. vNF A D it will be steered back to the ROADM and then will be routed towards its destination e.g. by sending it through a core packet switch network element into a packet steering domain sending to back to the access network sending it toward another network e.g. the Internet . Note that it is possible for the traffic to exit the data center in the form of a DWDM optical signal without needing to go through the core packet switch . Aggregated traffic carried by a wavelength is treated as a lambda flow in the optical steering domain . A lambda flow is the basic entity for steering based on its central frequency which is a similar concept as lambda label employed in the GMPLS based networks. Accordingly the terms flow or traffic flow may be used depending upon the context herein to mean lambda flow. For the traffic that does not need to be steered in the optical domain it will be dropped by the ROADM to the attached core switch es and will be processed using traditional packet switching schemes.

The optical steering domain includes three wavelength selective switches WSS and four vNF servers A D. Each WSS is an active optical switching device which has a single common port e.g. A on one side and multiple tributary ports e.g. A on the other side. Each wavelength of light entering through the common port can be flexibly directed to one of the multiple tributary ports independent of how all other wavelength channels are being switched. The configuration of a WSS can be changed dynamically by sending a control signal e.g. by the SDN controller and or cloud management system to its interface which will be received and processed by its steering module which will change the inner switching configuration i.e. the connectivity between the common port and tributary ports . For a simple representation of switching status the notation of P wis used to indicate that port z of WSS y is configured at wavelength x.

The numbers of WSS and vNF servers in the network of each embodiment depend on the actual demand. Each vNF server is connected to one tributary port of WSSA and WSSB. Tunable transceivers are equipped at each ToR switch A D to convert between DWDM e.g. referencing at 193.10 THz with 50 GHz or 100 GHz channel spacing and electrical signals. WSSB multiplexes multiple wavelengths on the WDM optical link B between WSSB and WSSC. One tributary port of WSSC Pin this example which is the bottom tributary port is designated as an exit port to steer traffic out of the optical domain . The rest of the tributary ports i.e. those tributary ports that are not the exit port based on their configuration loop the traffic back toward the corresponding vNF servers through optical links and optical couplers . In an embodiment each optical coupler is a 2 1 passive device allowing an optical signal to enter the device from either of the two input ports i.e. from either WSSA or WSSC . In some embodiments the two input ports of an optical coupler cannot simultaneously carry incoming signals even at different frequencies and thus this issue is resolved by the centralized controller e.g. SDN controller and or cloud management system which configures each WSS such that WSSC does not cause any wavelength contention when it loops traffic back toward the vNF servers .

The optical electronic optical O E O conversion by the tunable transceivers offers a free wavelength conversion to address wavelength contention. For example if another lambda flow at the same wavelength also enters WSSC the tunable transceivers may tune traffic to a different wavelength to avoid receiving conflicting lambda flows. In addition when high spectrum efficiency is pursued by introducing a flexible grid a single lambda flow can take multiple consecutive fine spectrum slots. This will create substantial spectrum fragments as flows dynamically arrive and depart and lead to low spectrum utilization. With the help of O E O conversion spectrum fragmentation is effectively addressed. Also the O E O conversion clears the transmission impairment and extends the total length of a lambda flow.

Accordingly as traffic of one or more lambda flows enters the optical steering domain on WDM optical link A WSSA receives the traffic at common port A and per the configuration of the steering module A e.g. by the SDN controller and or cloud management system causes each of the flows to be directed to and then sent by one of the tributary ports A. In some scenarios each of the flows arrives on the WDM optical link A at a first wavelength and per the configuration of the steering module A that traffic of the flow may be transmitted by one of the tributary ports A at the same wavelength or a different wavelength which can help avoid wavelength contention in the optical steering domain .

The single wavelength optical links are coupled to the tributary ports A of WSSA are connected to tunable transceivers which in an embodiment are connected to or part of ToR switches A D and thus the traffic is sent to the vNFs A D or vNFs A N executing on one or more computing devices . When the vNFs A D are finishing processing the traffic it is sent back toward the tunable transceivers . These tunable transceivers in an embodiment are configured programmed e.g. by the SDN controller and or cloud management system to possibly change their wavelength i.e. compared to what wavelength the traffic arrived on and transmit the traffic back to the WSSB which multiplexes all such arriving traffic at its tributary ports B and transmits it out the common port B. The steering module B of the WSSB may also be configured to change the wavelength of the transmitted traffic of a flow as compared to the same traffic of the flow that the WSSB receives.

This traffic flows over the WDM optical link B to the common port C of WSSC and the steering module C of the WSSC may be configured to cause the WSSC to direct the traffic of the flows out an exit port e.g. the bottom tributary port C of WSSC or out one of the other tributary ports C which is looped back toward the vNFs A N and coupled via optical couplers to the plurality of optical links connecting the WSSA and the tunable transceivers . Thus this traffic again travels to the vNFs A N for further processing and returns to WSSB and WSSC which per configuration may direct the traffic to be looped back again toward a particular vNF e.g. A or out the exit tributary port and out of the optical steering domain . Thus per the configuration of the WSSs and the tunable transceivers the traffic of the flows can be flexibly and efficiently steered through defined sequences of vNFs A N possibly of differing lengths and eventually back out of the optical steering domain on WDM optical link C.

Many possible configurations exist allowing the traffic of the three lambda flows to transit the optical steering domain . One such example configuration is presented herein with respect to the tunable transceiver configuration table and the WSS configuration table . In an embodiment the WSSs and tunable transceivers are configured to receive configurations e.g. messages user input etc. and process the configurations to configure themselves to operate accordingly.

In this depicted embodiment this configuration is made without any wavelength and NF contention amongst the lambda flows. In this configuration lambda flow keeps the exiting wavelength the same as the incoming wavelength i.e. it is received at wavelength by the first WSSA and then later exits the optical steering domain also at wavelength which makes the optical steering domain completely transparent.

In this example traffic of the first flow circle shape is received by the first WSSA at wavelength . Since this traffic needs to be first processed by vNF A A the WSSA is configured to transmit this traffic at circle out its fifth tributary port using wavelength per the WSS configuration table . After it is processed by vNF A A the tunable transceiver at circle transmits the traffic at wavelength per the tunable transceiver configuration table . The second WSSB receives this traffic at its second tributary port at wavelength and also transmits it out its common port also at wavelength . The WSSC receives this traffic at its common port and per its configuration is configured to transmit it at circle out its third port at wavelength . This traffic is then looped back and is passed at circle onto an optical link directed back to vNF C C. After processing by vNF C C the traffic is directed back to its tunable transceiver and at circle is sent back at wavelength to WSSB which passes it to WSSC also at wavelength . At this point per its configuration WSSC transmits this traffic at wavelength out its fifth port which is the exit port out of the optical steering domain.

Similarly traffic of the second flow pentagon shape is received at the WSSA at wavelength . Per its configuration this traffic is sent out of its second tributary port at wavelength at pentagon and is directed to vNF D D. After vNF D D processes the traffic its tunable transceiver at pentagon transmits the traffic at wavelength to WSSB which passes this traffic on to WSSC at the same wavelength . WSSC per configuration thus transmits the traffic out its second port at pentagon at wavelength . This traffic is then looped back and is passed at pentagon onto an optical link directed back to vNF B B. After processing by vNF B B this traffic is directed back to its tunable transceiver and at pentagon is sent back at wavelength to WSSB which passes the traffic on to WSSC also at wavelength . WSSC per configuration indicating that it is to pass any traffic at wavelength out the exit port transmits the traffic out of its fifth exit tributary port and out of the optical steering domain.

As indicated above traffic of the third flow is configured to immediately exit the optical steering domain. Thus traffic of the third flow heart shape is received at wavelength by WSSA and sent out of the first tributary port which leads directly to WSSB thereby skipping the vNFs . WSSB passes this traffic still at wavelength to WSSC which per configuration transmits all traffic of wavelength out of the last i.e. fifth tributary exit port out of the optical steering domain.

As indicated above many other configurations are possible for this scenario which use different wavelengths of light to transmit the flows. Accordingly the orchestration layer may use any of a multitude of algorithms to determine which flows are to be transmitted at what particular wavelengths at the particular stages including greedy search algorithms and even na ve algorithms to iteratively begin to exhaustively enumerate all configuration possibilities until a proper non conflicting solution is arrived upon. At that point the orchestration layer may utilize techniques to configure the WSSs optical couplers and tunable transceivers accordingly.

The southbound interface between the network controller and the configurable network elements i.e. networking infrastructure offers a unified control channel to push down configurations to set up optical paths. This interface requires support of optical circuit switching and can be realized by using proprietary command provided by hardware vendors and or by standardized protocols such as the OpenFlow protocol. The latest version of the OpenFlow protocol v1.4 introduces the extension to optical circuit configuration and to enable this architecture.

One benefit is flexibility. Embodiments of the invention support flexible configuration for optical paths across vNFs . The WSS as the basic wavelength switching element offers a low tuning time of around 100 ms. Compared with the time needed to instantiate a core network function which is typically at the order of a few minutes the time for optical path configuration can be within hundreds of milliseconds which meets the requirement of dynamicity to steer traffic across vNFs . The flexibility of traffic steering is further enhanced by the ability to offer multiple choices of computing devices possibly at different racks for vNF instantiation which can avoid potential wavelength contention. For example when no wavelength is available to a particular server device i.e. computing device running the required network function instance a different server device with wavelength available to it can be chosen to instantiate the same required network function. Additionally for extremely high volume of traffic carried by multiple lambda flows network functions can be instantiated at multiple server devices. By distributing these lambda flows to different servers embodiments of the invention offer extra flexibility for load balancing.

Another benefit is scalability. The optical steering domain makes the steering architecture less sensitive to traffic and vNF demand growth. The WSSs wavelength is in optical domain and thus is agnostic of the traffic rate carried by each wavelength it switches. Therefore the same WSS can be used when a lambda flow grows to a higher rate. In contrast increasing traffic volume requires higher switching throughput of a non optical e.g. electrical packet switch. Since switching in optical domain is much more energy efficient than in the electrical packet domain in the electrical domain it is desirable to keep packet throughput as low as possible. For a flow at rate r traversing n vNFs the required packet throughput in the core switches can be calculated as T r 1 n .

However using embodiments of the invention there is no need to perform packet switching in core switches. For example graph illustrates six scenarios with growing traffic volume and vNF demand. The six scenarios are as presented below in Table A 

Graph illustrates the corresponding throughput of core switches for both a packet based scheme line with square data points and an embodiment of the invention using an optical steering domain line with circle data points . It is evident that as the traffic volume and the number of required vNFS per flow increases the flow needs to be switched more times by the switch at higher rates. In contrast packet switching at core switches is avoided for lambda flows which therefore requires zero packet throughput at core switches. However when ToR switches are used under either traditional packet switching or in embodiments of the invention using optical steering domain architectures these ToR switches may remain operating as packet based and therefore packet switching will still be utilized. Thus the packet throughput is the same for the two architectures and therefore is not illustrated.

Another benefit provided by embodiments of the invention is power efficiency which is illustrated in graph . In this graph the power consumption is measured at a system level which means it includes all components. For example the power consumption by 10 GbE traffic typically includes transceivers line cards network fabric cards chassis etc. For the transceiver the packet solution is assumed to employ grey transceivers e.g. 10 G SFP while optical steering domain architecture employs DWDM 10 G tunable transceivers.

Graph illustrates the power consumption of the packet based and optical steering domain architecture for the same six scenarios presented above in Table A. It can be observed that the gap between the two architectures becomes larger as traffic grows due to the increasing difference of packet throughput needed by the two architectures.

According to an embodiment each of the one or more flows of traffic is to be processed by a different defined series or chain of one or more processing nodes of the plurality of processing nodes. In an embodiment each processing node is a vNF. The optical steering domain includes a set of three or more wavelength selective switches WSSs .

The flow includes at block receiving traffic of a traffic flow of the one or more traffic flows at a common port of a first WSS of the set of WSSs. The first WSS includes a plurality of tributary ports coupled to a respective plurality of optical links leading toward the plurality of processing nodes. The traffic in an embodiment is received from a ROADM and each of the traffic flows is received at a different wavelength. In an embodiment the first WSS also includes one or more other tributary ports that lead directly to a second WSS.

The flow also includes at block transmitting using a tributary port of the WSS over an optical link of the plurality of optical links the traffic toward a first processing node of the plurality of processing nodes. In an embodiment the traffic is received by a tunable transceiver coupled to a switch and then sent to a computing device executing a processing node that is to first process the traffic. In an embodiment after processing the traffic the processing node sends the traffic back to the switch and then flows to the tunable transceiver. In some embodiments the tunable transceiver is configured to change the wavelength of the traffic that it now sends.

At block the flow includes receiving at a tributary port of a second WSS of the set of WSSs processed traffic. The processed traffic is the result of the traffic being processed by the first processing node. The traffic may be at the same wavelength as it was when sent by the first WSS or at a different wavelength. At block the flow includes transmitting at a common port of the second WSS the processed traffic to a third WSS of the set of WSSs and then at block the flow includes receiving at a common port of the third WSS the processed traffic.

At block the flow includes transmitting one or more times the processed traffic out of one or more tributary ports of the third WSS on one or more optical links. The one or more optical links are coupled to the one or more tributary ports of the third WSS on one end and coupled to one or more of the plurality of optical links that themselves are coupled to the first WSS. The processed traffic is thus looped back for further processing by one or more other processing nodes of the plurality of processing nodes.

In some embodiments the flow includes at block receiving at the common port of the third WSS further processed traffic. The further processed traffic is the result of the processed traffic being further processed by the one or more other processing nodes.

In some embodiments the flow includes at block transmitting out another tributary port of the third WSS the further processed traffic. This tributary port of the third WSS is an exit port leading out of the optical steering domain.

Aspects of embodiments of the invention hereby focused upon steering large traffic flows in data centers where core network functions are virtualized. Embodiments of the invention introduce an optical steering domain to such data centers to perform traffic steering at the wavelength level. Wavelength division multiplexing WDM technology and reconfigurable wavelength switching devices are employed to flexibly set up optical paths based on network function demand and resource availability. The optical steering domain architecture complements traditional packet based schemes which handle fine grained traffic by handling coarse grained traffic and additionally offers high scalability and flexibility. Further embodiments of the invention significantly save power especially in long runs.

While embodiments of the invention has been described in relation to NFV and data centers other embodiments are useful in other systems where a large volume of traffic needs to be steered in a coarse manner. Therefore embodiments of the invention are not so limited to use with NFV.

While the flow diagrams in the figures show a particular order of operations performed by certain embodiments of the invention it should be understood that such order is exemplary e.g. alternative embodiments may perform the operations in a different order combine certain operations overlap certain operations etc. .

Additionally while the invention has been described in terms of several embodiments those skilled in the art will recognize that the invention is not limited to the embodiments described can be practiced with modification and alteration within the spirit and scope of the appended claims. The description is thus to be regarded as illustrative instead of limiting.

