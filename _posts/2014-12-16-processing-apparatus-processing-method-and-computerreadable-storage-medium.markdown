---

title: Processing apparatus, processing method and computer-readable storage medium
abstract: A priority order of a plurality of storage locations as candidates for storing data is set in accordance with an instruction from a user. The data to be stored is acquired. A storage location of the data is decided, based on a priority order which has already been set before acquisition of the data, so as to assign a higher priority level as a storage location to a first storage location than a second storage location lower in the priority order. Data is stored in the decided storage location.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09407785&OS=09407785&RS=09407785
owner: CANON KABUSHIKI KAISHA
number: 09407785
owner_city: Tokyo
owner_country: JP
publication_date: 20141216
---
Recently it has been practiced that the images read by image reading apparatuses are stored in portable media and network storages connected to image reading apparatuses and information processing apparatuses other than being stored in the built in storages of information processing apparatuses. In consideration of a possibility that the portable medium will be detached there is a proposal in which an image is temporarily stored in the built in storage of an image reading apparatus while a portable medium is not connected and then is transferred to the portable medium while it is connected U.S. Pat. No. 8 027 054 .

According to the arrangement of U.S. Pat. No. 8 027 054 however while a portable medium is connected an image is stored in the medium. For this reason even if the user wants to store the image in for example a built in storage the image is sometimes unintentionally stored in the portable medium when the medium is connected.

The present invention provides a processing technique which can store data in a proper storage location.

A processing apparatus according to the present invention which is configured to achieve the above object has the following arrangement. That is a processing apparatus which stores data in a memory the apparatus comprising a setting unit configured to set a priority order of a plurality of storage locations as candidates for storing data in accordance with an instruction from a user an acquisition unit configured to acquire the data to be stored a decision unit configured to decide a storage location of the data based on a priority order already set by the setting unit before acquisition of the data by the acquisition unit so as to assign a higher priority level as a storage location to a first storage location than a second storage location lower in the priority order and an execution unit configured to store the data in the storage location decided by the decision unit.

The present invention can provide a processing technique which can store data in a proper storage location.

Further features of the present invention will become apparent from the following description of exemplary embodiments with reference to the attached drawings.

The embodiments of the present invention will be described in detail below with reference to the accompanying drawings.

In the image reading apparatus the printer function is implemented by a printer portion and the scanner function is implemented by a scanner portion . The storage function is implemented by a memory card mount portion and a memory card . In addition a copy function can be implemented by combining the printer function and the scanner function.

The printer portion prints data such as externally received print data and image data stored in the memory card on a print sheet by a printing scheme such as an inkjet scheme or electrophotographic scheme. The scanner portion optically reads a document set on the document table and converts the read data into electronic data. The scanner portion further converts the data into a designated file format and transmits it to an external apparatus via a network. The copy service is a service of transferring the image data generated by reading the document placed on the document table via the scanner portion to the printer portion and making the printer portion print the document data on a print sheet. An external apparatus connected via a network can read out a file stored in the memory card edit the file and store the file in the memory card .

The image reading apparatus further includes a CPU Central Processing Unit for controlling the respective types of constituent elements and a program memory such as a ROM which stores data such as program codes read out by the central processing unit . The image reading apparatus also includes a work memory such as a RAM for temporarily storing or buffering data such as image data at the time of execution of each service a display portion including a display screen such as an LCD and an operation portion including switches and a touch panel. The central processing unit can implement various types of processing to be described later by executing programs stored in the program memory in the work memory .

The image reading apparatus also includes a network communication portion for performing various types of communications by connecting the image reading apparatus to a network and a network connection portion for connecting the network communication portion to a network medium. The network communication portion corresponds to at least one of a wired network and a wireless network. If the network communication portion corresponds to a wired network the network connection portion serves as a connector for connecting a wired network cable to the image reading apparatus . If the network communication portion corresponds to a wireless network the network connection portion serves as an antenna.

In addition the image reading apparatus includes a flash memory as a nonvolatile memory which can store the transmission source information of a packet received by the network communication portion . Furthermore the image reading apparatus includes a USB Universal Serial Bus communication portion for communicating with an information processing apparatus via a USB interface and is connected to the information processing apparatus via a USB connection portion using a connector such as a USB connector.

The respective constituent elements of the image reading apparatus are connected to each other via signal lines . As described above the image reading apparatus also serves as an image processing apparatus which processes images by using the printer function the scanner function and the storage portion and as an image forming apparatus which forms images by using the printer function.

Referring to a CPU controls the respective constituent elements of the information processing apparatus . A disk device installs an application program an OS Operating System and the like read out by the CPU and stores data such as various types of files. An external disk reading apparatus reads out contents of an external storage medium such as a CD ROM. A memory is a memory in which for example the CPU temporarily stores or buffers data as needed. The CPU can implement various types of processing to be described later by executing various types of programs stored in the disk device in the memory .

The CPU installs various types of programs in the information processing apparatus by executing from the information processing apparatus setup programs for software using the image reading apparatus . Various types of programs stored in the disk device include various types of device drivers such as a scanner driver for the use of the scanner function and a printer driver for the use of the printer function. In addition such programs include various types of applications such as a polling application for inquiring about the state the presence absence of an event or the like of the image reading apparatus and management software button monitor for managing the state status of the image reading apparatus .

A display portion includes an LCD. An operation portion includes a keyboard and a mouse. A network communication portion performs various types of communications by connecting the information processing apparatus to a network. A network connection portion connects the network communication portion to a network medium.

Like the image reading apparatus the network communication portion and the network connection portion correspond to at least one of a wired network and a wireless network. More specifically like the network communication portion and the network connection portion which are built into the image reading apparatus the network communication portion and the network connection portion take necessary functions and forms in accordance with a corresponding network. Signal lines connect the respective constituent elements. A USB communication portion communicates with various types of peripheral devices via a USB interface. A USB connection portion includes a USB connector.

In this manner the image reading apparatus can be connected to the information processing apparatus via a network to construct a processing system. This network is for example a LAN Local Area Network . The following description deals with a network formed from a network using wired network cables. However the present invention is not limited to this. The form of the network remains the same regardless of whether it is a wired network or a network including both a wired network and a wireless network. An example of an image reading apparatus is an MFP Multi Function Peripheral . However the image reading apparatus need not always be an MFP and may be an image scanner or digital camera.

Application software designates scan settings such as a scan method color settings and resolution settings and instructs driver software to acquire an image by using an API Application Programming Interface . In addition the application software has a function of setting the function of the operation portion of the image reading apparatus and storing files in various types of formats.

In this case APIs include for example TWAIN and WIA OS standard image input APIs employed by Microsoft for WindowsMe and subsequent versions of Windows and interfaces based on specifications unique to venders.

The driver software can transfer the image acquired from the image reading apparatus to the application software and display a unique GUI Graphical User Interface . The GUI has a function of for example designating a preview and a crop area with respect to a preview image setting a resolution a reading mode a binary mode 8 bit multivalued mode 24 bit multivalued mode or the like and making color adjustment settings such as gamma correction.

A device driver acquires an image by transmitting a control command for controlling firmware incorporated in the image reading apparatus to the image reading apparatus . When dealing with the image reading apparatus in which no firmware is incorporated the device driver performs various types of control by accessing the control registers of the respective modules of the image reading apparatus . For example the device driver performs shading control motor speed setting in accordance with a resolution and a crop range transmission processing of gamma correction data received from the driver software to the image reading apparatus and procedure control for image reading.

A port driver performs communication control with respect to the image reading apparatus in accordance with an interface such as a parallel interface USB interface IEEE1394 interface SCSI interface LAN interface or Wireless LAN interface. A button monitor is a module which detects whether a button on the operation portion of the image reading apparatus has been pressed. The button monitor always detects at given predetermined intervals whether a button has been pressed. Upon detecting that a button has been pressed the button monitor notifies the application software of information corresponding to the pressed button. The application software then reads an image under the conditions set for each button.

An OS Operating System is the basic system of the information processing apparatus such as Windows . The port driver the device driver the driver software the button monitor and the application software are implemented on the OS .

This UI is a UI program which makes PullScan setting for issuing an instruction to read an image when the user operates the information processing apparatus . The UI displays a UI window which is a setting window on the display portion of the information processing apparatus and displays a list control UI in the UI window . The list control UI is a UI control which displays a plurality of items in a plurality of rows a plurality of columns.

The elements of the list control UI include column bars and . The column bar displays a column indicating the order priority order of the storage locations to be described in detail later of data and postprocessing. The column bar displays a column indicating the storage locations. The column bar displays a column indicating postprocessing.

In the case shown in the USB memory which can be connected to the USB connection portion of the information processing apparatus is assigned with the highest priority as a data storage location and the folder Picture formed in the disk device is assigned with the second highest priority. Assume that in this setting state the image reading apparatus has read a document. In this case if a USB memory is connected to the information processing apparatus the read image is stored in the USB memory. If no USB memory is connected to the information processing apparatus the image is stored in folder Picture .

In addition Document is designated at the third highest priority level. With respect to Document storage destination selection is designated as postprocessing. Assume that this storage destination selection is designated. In this case when a document is read and Document is a storage destination candidate for the read image a window for selecting a storage destination is displayed. The user can select a storage destination in this window at the time of document reading. This operation will be described in detail later.

On the other hand no operation is set as postprocessing with respect to the USB memory and Picture at the highest priority level and the second highest priority level. In this case the above window displaying operation is not performed at the time of document reading and the read image is stored in a storage destination in accordance with the priority order. This allows the user to store the read image in a storage designation decided in accordance with the predetermined priority order without selecting any storage destination at the time of document reading.

Note that the list shown in may include both a memory incorporated in or connected to the information processing apparatus and a memory incorporated in or connected to the image reading apparatus . That is a priority order is set concerning whether to store a read image in the image reading apparatus or the information processing apparatus .

On the list control UI shown in data can be displayed in four rows and more rows can be displayed by changing the display area using a scroll bar UI arranged on the right side of the list control UI . In another form it is not always necessary to display four rows on the list control UI. Referring to values are currently set only on the first second and third rows and the second row is selected and hence the second row is displayed in a form different from that of the remaining rows so as to make it possible to identify the selected state.

Combo boxes and displayed on the column bar each allow the user to select one of a plurality of options. shows a state in which no operation is selected with the combo box on the second row and storage destination selection is selected with the combo box on the third row.

When the user presses a change button an add button a delete button and an OK button processing programmed with respect to each button is executed. The details of an operation to be performed when the user presses each of these buttons will be described below.

The UI shown in is an example which differs in how it looks or an expression method depending on the type or version of an OS window manager or the like.

Operation processing of the UI in which is used to execute the first embodiment will be described with reference to . The processing shown in is implemented when the CPU of the information processing apparatus executes the application software .

In step S the application software determines whether the user has pressed the change button . It is conceivable to implement this determination by for example a method of performing determination based on the ID included in UI processing of the OS upon assigning a unique ID to each button. When the user has pressed the change button YES in step S the process advances to step S. If the user has not pressed the change button NO in step S the process advances to step S.

In step S the application software performs storage location selection processing. A storage location selection UI not shown prepared by the OS is displayed. This storage location selection UI includes as selection candidates a folder already set in the disk device of the information processing apparatus and an external memory such as a USB memory. The storage location selection UI displays an external memory such as a USB memory regardless of whether it is connected. That is even if a USB memory is not connected at this stage of display it is possible to select the USB memory as a storage destination. For example after the user sets the priority order of storage destinations in the window shown in a USB memory may be connected to the information processing apparatus when the image reading apparatus is made to read a document.

The user can select a new storage location with this storage location selection UI. The application software selects a storage location in accordance with the selecting operation by the user.

In step S the application software sets a storage location to the storage location selected in step S. If the storage location before selection differs from the selected storage location the storage destination is changed. If for example it is determined in step S that the user has pressed the change button the storage location on the second row selected with the list control UI is changed to the new storage location selected by the user in step S.

In step S the application software determines whether postprocessing has been changed. In this determination processing it is determined whether postprocessing has been changed depending on whether the selected content in the combo box or has been changed by a user s operation. If the selected content has been changed that is the postprocessing has been changed YES in step S the process advances to step S. If the selected content has not been changed that is the postprocessing has not been changed NO in step S the process advances to step S.

In step S the application software changes the postprocessing to the selected content changed in step S.

In step S the application software determines whether the user has pressed the add button . If the user has pressed the add button YES in step S the process advances to step S. If the user has not pressed the add button NO in step S the process advances to step S.

In step S the application software adds the storage location to the list control UI . More specifically the storage location selection UI displayed in step S is displayed and the user selects a storage location to be added. Referring to since the list control UI includes storage locations on three rows when the user presses the add button the fourth row is added. A storage location and postprocessing may be added by using preset values or may be checked by the user when they are added.

In step S the application software determines whether the user has pressed the delete button . If the user has pressed the delete button YES in step S the process advances to step S. If the user has not pressed the delete button NO in step S the process advances to step S.

In step S the application software deletes the row selected with the list control UI . Referring to since the second row is selected the second row is deleted and the third row is moved to the second row.

In step S the application software determines whether the user has pressed the OK button . If the user has pressed the OK button YES in step S the process advances to step S. If the user has not pressed the OK button NO in step S the process advances to step S.

In step S the application software stores the updated contents the set state in as setting information in the memory based on changing adding deleting by a user s operation. Thereafter the display of the UI window is terminated.

As described above the user can add change delete a plurality of storage locations with respect to the list control UI and individually set postprocessing for each storage location. In addition it is possible to freely change the order of storage locations on the list control UI by adding changing deleting storage locations. For example as shown in it is possible to interchange the second and third rows on the list control UI in .

Although not described in the flowchart of some OS may provide an arrangement configured to permit a row interchanging operation performed by dragging and dropping a row on the list control UI with a pointing device such as a mouse. Such an OS allows the user to interchange the order of rows storage locations by an intuitive operation without using any adding changing deleting operation.

Although explains the setting contents storage destination settings of PullScan it is possible to set the order of storage locations concerning the setting contents storage destination settings of PushScan by similar processing. Note that PushScan will be described in detail later with reference to . Referring to the UI window includes a list control UI column bars and a combo box a change button an add button a delete button and an OK button which have functions similar to those in .

In this case PullScan indicates a method of reading a document and acquiring an image by issuing a scan instruction from the information processing apparatus serving as a host apparatus to the image reading apparatus such as a scanner. In contrast PushScan indicates a method of reading a document and acquiring an image transmitting an image to the information processing apparatus by an operation from the operation portion of the image reading apparatus instead of an operation from the host apparatus.

Image read processing according to the first embodiment will be described next with reference to . The information processing apparatus executes the processing shown in . More specifically programs corresponding to the respective types of processing are stored in the disk device . The CPU then implements the processing shown in by executing the programs in the memory .

In step S the CPU of the information processing apparatus acquires the read image which the image reading apparatus has obtained by reading a document. In the case of PullScan the CPU performs read control to cause the image reading apparatus to read a document by executing a program corresponding to the device driver . In step S the CPU acquires the read image obtained by this read control. In the case of PushScan a document is read in accordance with a user s operation with respect to the operation portion of the image reading apparatus . In step S the read image is acquired.

In step S the application software determines whether the currently set function is PullScan of starting image reading in accordance with a user s operation via a UI. If the function is PullScan YES in step S the process advances to step S. If the function is not PullScan NO in step S it is determined that PushScan is set which starts image reading by operating the image reading apparatus . The process then advances to the flowchart of .

Assume that in the following description which concerns the processing of deciding a storage location the setting order of storage locations is displayed on the list control UI in . In this case as described above this setting state is registered as setting information in the memory of the information processing apparatus and the information processing apparatus executes the flowchart of by referring to the setting information. Note that as described with reference to the flowchart of since the user can freely change the display order on the list control UI processing different from that based on the flowchart to be described below may be performed depending on user s settings.

In step S the application software determines whether the image acquired in step S can be stored in the storage location the storage destination at the highest priority level set on the first row on the list control UI in . Referring to since USB Memory is set at the storage location at the highest priority level it is determined whether a USB memory is accessibly inserted in a USB port of the information processing apparatus to allow the image to be stored.

In this determination it may be determined that the image can be stored if for example the CPU can access the USB memory by accessing the USB connection portion via the USB communication portion . Alternatively a flag indicating connection may be set in the disk device when a USB memory is connected to the USB connection portion . In this case in step S the CPU performs the determination by checking whether the above flag is set. Alternatively when connection is made the CPU may check the remaining capacity of the USB memory regardless of whether the USB memory is connected and may determine that the image can be stored if the remaining capacity is equal to or more than a predetermined amount. In this case the data capacity of the read image acquired in step S is set as the above predetermined amount. It is then determined whether the image can be stored by comparing the data capacity with the remaining capacity of the memory.

Also whether the image can be stored can be determined by the generation method of the data to be stored. For example it is possible to determine that the image data read from the image reading apparatus by the control of the information processing apparatus can be stored. On the other hand it is possible to determine that the image data which is read from the image reading apparatus stored in the memory card and subsequently transferred to the information processing apparatus by the control of the central processing unit of the image reading apparatus cannot be stored. Concerning other data storage methods it is possible to determine whether the data can or cannot be stored depending on the type of a reading method such as a method of reading an image from a document set on a document table a method of reading an image from a document set on an automatic document feeder ADF or the like. The determination method of whether the data can or cannot be stored can be opposite to the proposed example. It is possible to determine that while the image data read from the image reading apparatus by the control of the information apparatus cannot be stored the image data read otherwise can be stored.

In addition whether the image can be stored can be determined by an analysis result of data to be stored. It is possible if the image data is a binary image or a gray scale image to determine that the image data is a document image and can be stored. If the image data is a color image it is possible to determine that the image data is a picture image and cannot be stored. Also it is possible to generate a histogram of the image data and determine the image data to be a document image if it is close to a binary image or a gray scale image otherwise it is determined to be a color image and whether the image data can be stored is determined. The determination method of whether the data can or cannot be stored can be opposite to the proposed example. It is possible to determine that the image data cannot be stored if it is a document image and that the image data can be stored if it is a color image.

Also whether the image can be stored can be determined by the capacity of the data to be stored. For example if the stored data is equal to or less than a predetermined amount for example 10 MB it is determined that the image data can be stored. If the stored data is more than the predetermined amount it is determined that the image data cannot be stored. Further it is possible to determine that the data can be stored if the stored data is equal to or less than a predetermined amount select an email client as a subsequent startup application and transmit the stored data by email.

Since several determination methods can be considered for determining whether the image can be stored the user can select what type of storage condition is possible for storing the image data using a UI window shown in . The UI window shown in shows that the condition for storing image data in the USB memory is set only for the image data determined to be a picture and that the image data read from the automatic document feeder ADF and the image data determined to be a document will be stored in the folder Document .

Note that the UI window shown in has an arrangement in which the items for selecting the storage conditions have been added to the UI window shown in . The same reference numerals are given to the UI control in common with the window UI shown in .

If the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S the application software stores the image acquired in step S in the USB memory. In addition since no operation is selected as corresponding postprocessing in the processing is terminated without any operation after the storing operation.

In step S the application software determines whether the image acquired in step S can be stored in the storage location the storage destination at the second highest priority level set on the second row on the list control UI in . Referring to since Picture is set as a storage location it is determined whether it is possible to access the Picture folder in the information processing apparatus and store the image in the folder. In this determination the CPU determines for example whether any access limitation is imposed on Picture . If the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S the application software stores the image acquired in step S in the Picture folder. In addition since no operation is selected as corresponding postprocessing in the processing is terminated without any operation after the storing operation.

In step S the application software determines whether the image acquired in step S can be stored in the storage location the storage destination at the third highest priority level set on the third row on the list control UI in . This determination is performed by processing similar to the determination in step S. Referring to since Document is set as a storage location it is determined whether it is possible to access the Document folder in the information processing apparatus and store image in the folder. If the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S since storage location selection is set as postprocessing on the third row on the list control UI in the application software executes storage location selection processing. In this case for example the application software displays a storage destination selection window like that shown in on the display portion of the information processing apparatus . The currently selected storage location is set on a UI element . Since Document is set as the storage location on the third row on the list control UI in Document is set on the UI element .

When the user presses a change button the storage location selection UI prepared by the OS is displayed. The user can select a storage location via this UI. More specifically when the user presses the change button the storage location selection UI to be displayed when the change button in is pressed is displayed to decide a priority order and the user can designate a storage location other than the Document folder. Note however that on this UI unlike the case of priority order decision an external memory such as a USB memory which is actually connected is displayed as a selection candidate but any external memory which is not connected to a predetermined interface is not displayed as a selection candidate. This can prevent a situation in which the external memory selected by the user is not connected and a storing operation cannot be performed.

When the user presses an OK button upon completion of the selection the value set on the UI element is designated as a storage location.

In step S the application software stores the image read in step S in the storage location designated in step S and terminates the processing.

In step S the application software executes error processing because the image read in step S cannot be stored in any of all the designated storage locations. Since three storage locations are set on the list control UI in it is determined whether the image can be stored in any of the three storage locations. Only when the image cannot be stored in any storage location the process advances to step S. If for example four or more storage locations are set the determination whether the image can be stored in a storage location is repeated by the number of times corresponding to the number of storage locations set.

In addition error processing may include displaying a simple error message and displaying the storage destination selection window in to prompt the user to select a storage location again.

The processing to be performed when it is determined in step S in that the currently set function is PushScan will be described next with reference to .

Assume that the priority order of storage destinations of a read image obtained by PushScan is registered by the UI shown in before the read image is acquired in before for example a user instruction to execute PullScan or PushScan is issued .

It is possible to register the priority order of storage destinations in the same manner as in the case of PullScan as indicated by column bars and in . More specifically by pressing the buttons and the user can edit the priority order by changing adding and deleting a storage destination. In addition it is possible to set scan history as postprocessing. This scan history will be described later.

In step S the application software determines whether the image can be stored in the storage location set on the first row on the list control UI in . Referring to since USB Memory is set at a storage location it is determined whether a USB memory is accessibly inserted in a USB port of the information processing apparatus to allow the image to be stored. This determination processing is performed in the same manner as in the determination processing in step S. If the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S the application software stores the image read in step S in the USB memory. In addition since no operation is selected as corresponding postprocessing in the processing is terminated without any operation after the storing operation.

In step S the application software determines whether the image can be stored in the storage location set on the second row on the list control UI in . Referring to since Picture is set as a storage location it is determined whether it is possible to access the Picture folder in the information processing apparatus and store the image in the folder. This determination is performed in the same manner as in the determination processing in step S. If the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S the application software sets scan history with the combo box postprocessing on the second row on the list control UI in . In this case the path of the stored image storage destination information information for specifying a storage location is added as history information to the scan history managed as data by the information processing apparatus .

The scan history managed by the information processing apparatus can be displayed in a scan history window as the window UI shown in . In addition to the scan history which has already been managed an added scan history is displayed on a list control UI in the scan history window . It is possible to delete a past history by pressing a history delete button . It is also possible to finish displaying the scan history window by pressing an OK button .

The scan history displayed in the scan history window is not synchronous with the operation of PushScan. The user can display the scan history window at a desired timing when the application software is activated. This makes it possible to check the image read upon displaying the scan history window after the user notices that no image is stored in the USB memory upon performing PushScan a plurality of times.

In step S the application software executes error processing because the image read in step S cannot be stored in any of all the designated storage locations. Since two storage locations are set on the list control UI in it is determined whether the image can be stored in one of the two storage locations. Only when it is determined that the image cannot be stored in any of the storage locations the process advances to step S. If for example three or more storage locations are set the determination whether the image can be stored in a storage location is repeated by the number of times corresponding to the number of storage locations set.

In addition error processing may include displaying a simple error message on the information processing apparatus or the image reading apparatus .

The first embodiment is configured to search for a storage location in which an image can be stored in a priority order after the image is acquired. However it is possible to acquire an image after searching for a storage location in which the image can be stored in a priority order. For example when a user instruction to perform PullScan is input or the CPU of the information processing apparatus recognizes that a document has been read by PushScan a storage destination is decided. Thereafter a read image is acquired and stored in the decided storage destination.

When acquiring an image first the image is stored in a USB memory even if the USB memory is inserted during document reading. This for example allows the user to insert a USB memory upon issuing an instruction to read a document. In addition even if a USB memory is removed during document reading it is possible to properly determine that the read image cannot be stored in the USB memory.

When acquiring an image after searching for a storage location even if a USB memory is inserted during document reading the USB memory is not connected at the time of deciding a storage location before image reading. For this reason in this case a USB memory is not decided as a storage destination. It is also conceivable to search for a storage location in which an image can be stored in advance before image reading and to search for a storage location again after a scan and store the image in the storage location.

As described above according to the first embodiment providing the UIs shown in to the user and making him her operate the UIs can assign priority levels to storage locations in which the user performs an storing operation and set postprocessing with respect to storage locations at the second and subsequent highest priority levels. In addition it is possible to select a storage location corresponding to an image reading method PullScan or PushScan from the set storage locations.

In the first embodiment a portable medium such as a USB memory is set at the highest priority level and storage locations storage areas capable of storing data such as the storages of information processing apparatuses are designated as storage locations at the second and subsequent highest priority levels. This makes it possible to store data in a USB memory if the USB memory is inserted and is capable of storing the data and to store data in a storage location at the second or subsequent highest priority level without causing any error after a scan if for example a USB memory is not inserted no other storage locations are present or write access is protected.

In addition when executing PullScan of reading an image by operating the information processing apparatus if it is not possible to store the image in a USB memory a selection window for prompting to select another storage location is displayed to enable the user to select a location capable of storing data. Assume also that when executing PushScan of reading an image by operating the image reading apparatus the image cannot be stored in a USB memory. In this case even if it is difficult to make the user select on the image reading apparatus another storage location in the information processing apparatus it is possible to store a storage history in the information processing apparatus and browse check storage locations after a reading operation.

In this manner by registering a plurality of storage locations other than a portable medium and setting a priority order even if data cannot be stored in the portable medium the user can store the data in another storage location. It is possible to reduce the risk of losing a storage location by setting as postprocessing corresponding to the second or subsequent highest priority level a processing content such as re selecting a storage location or leaving a scan history in accordance with a usage situation.

In addition an administrator for a routine operation can set a plurality of storage locations and record a storage history as postprocessing corresponding to the second or subsequent highest priority level in consideration of the importance or usage form of the routine operation. This setting can minimize storage errors in the routine operation. In addition even if data cannot be stored in a storage area at the highest priority level at the time of a storing operation leaving a storage history makes it possible to check that data is stored in another location.

The first embodiment is configured to make the information processing apparatus display UIs for setting changing adding and deleting storage locations for images. In contrast to this the second embodiment will exemplify an arrangement configured to make an image reading apparatus display UIs for setting storage locations for images.

The second embodiment is based on the assumption that a plurality of information processing apparatuses are connected to one image reading apparatus as shown in . In this case a plurality of information processing apparatuses including an information processing apparatus and an information processing apparatus are connected to the image reading apparatus via a network . Although shows the arrangement in which two information processing apparatuses are connected to the image reading apparatus the number of information processing apparatuses to be connected is not specifically limited. The arrangements of the image reading apparatus and information processing apparatus are the same as those in the first embodiment and hence a detailed description of them will be omitted.

Note that the registration list shown in may include both a memory incorporated in or connected to the information processing apparatus and a memory incorporated in or connected to the image reading apparatus . That is a priority order may be set concerning whether to store a read image in the image reading apparatus or the information processing apparatus .

In step S the image reading apparatus acquires the current time from a timer held inside or an information processing apparatus and stores the current time. This current time is necessary to know an elapsed time since registration in the registration list. The current time need not be the Japan standard time or the like and the time counted by the timer from the activation of the image reading apparatus may be used. This information is not limited to the time and the date and time including the date may be registered.

In step S the image reading apparatus determines whether it has received storage location setting information from an information processing apparatus. If no storage location setting information has been received NO in step S the process advances to step S. If storage location setting information has been received YES in step S the process advances to step S.

In step S the image reading apparatus determines whether the processing instruction corresponding to the storage location included in the received storage location setting information is add . If the instruction is not add NO in step S the process advances to step S. If the instruction is add YES in step S the process advances to step S.

In step S the image reading apparatus registers in the registration list the storage location included in the received storage location setting information and the current time acquired in step S.

In step S the image reading apparatus determines whether the processing instruction corresponding to the storage location included in the storage location setting information is change update . If the instruction is not update NO in step S the process advances to step S. If the instruction is update YES in step S the process advances to step S.

In step S the image reading apparatus updates the update time of the storage location in the registration list which corresponds to the storage location indicated by the received storage location setting information to the current time acquired in step S. In this case if the storage location has been changed the storage location is updated to the changed storage destination.

In step S the image reading apparatus determines whether the processing instruction corresponding to the storage location included in the storage location setting information is delete . If the instruction is not delete NO in step S the process advances to step S. If the instruction is delete YES in step S the process advances to step S.

In step S the image reading apparatus deletes the storage location in the registration list which corresponds to the storage location indicated by the received storage location setting information.

With the above processing a storage location can be added updated deleted with respect to the registration list. If however the image reading apparatus receives storage location setting information including no processing instruction corresponding to the storage location because of a trouble in the information processing apparatus NO in step S or the information processing apparatus is powered off before the completion of the transmission of storage location setting information the storage location is left in the registration list without being deleted. For this reason in step S and the subsequent steps the image reading apparatus periodically deletes from the registration list any storage location which is less frequently used and not updated for a predetermined time.

In step S the image reading apparatus repeats the loop of deleting a storage location of the storage locations registered in the registration list which is not updated for a predetermined time by the number of times corresponding to the number of storage locations registered in the registration list.

In step S the image reading apparatus acquires the ith value storage location update time in the registration list in the loop. If for example i is 1 the image reading apparatus reads the ith storage location update time from the registration list in .

In step S the image reading apparatus compares the current time acquired in step S with the update time read in step S to determine whether a predetermined time has lapsed. If the predetermined time has not elapsed NO in step S the processing is terminated. If the predetermined time has elapsed YES in step S the process advances to step S.

In step S the image reading apparatus deletes a processing target value storage location update time corresponding to the elapse of the predetermined time from the registration list.

The loop starting from step S finishes upon completion of the processing in steps S S and S. With this processing a storage location update current which is not updated for a predetermined time is deleted from the registration list.

In addition the user may edit a registration list by operating the image reading apparatus as well as making the information processing apparatus edit the registration list stored in the image reading apparatus . A UI which is displayed on the image reading apparatus to edit a registration list will be described with reference to .

A display portion shown in is a display device such as an LCD Liquid Crystal Display and can display graphics and characters. An operation portion is a device having operation elements such as physical keys and switches arranged thereon or a device which uses a touch panel and receives inputs from the user.

The display portion is used to designate a storage location for the image read by image read processing. Numbers indicating a storage order are displayed on a first column . Character strings indicating storage locations are displayed on a second column . Character strings indicating postprocessing are displayed on a third column . The user can set change a storage location or postprocessing by operating an operation portion .

In addition the second column can display the storage locations included in the storage location setting information received from the information processing apparatus by the processing in . Furthermore the second column can display external network storages connected via a memory card mount portion a USB connection portion to which a USB memory can be attached and a network connection portion of the image reading apparatus . Referring to the storage location PC1 Document displayed on the third row indicates Document folder in the information processing apparatus with the computer name PC1 .

In step S the image reading apparatus reads the document placed on the document table. For example in the case of PushScan the document is read based on the user s operation of the operation portion of the image reading apparatus . In the case of PullScan a read instruction is input to the image reading apparatus in accordance with a user s instruction to the information processing apparatus and the image reading apparatus reads the document in accordance with this read instruction. When storing a read image in the memory incorporated in or connected to the image reading apparatus a reading operation is performed based on a user s operation of the operation portion of the image reading apparatus .

At this time a registration list indicating the priority order of storage locations has already been stored in the image reading apparatus . As shown in therefore since there is no need to make the user select a storage location before an image reading operation a simple expression like that shown on the display portion can be used. In addition the user need not set and check storage locations for each scan.

In step S the image reading apparatus determines whether the image read in step S can be stored in the storage location set on the first row displayed on the display portion in . Referring to since USB Memory is set as a storage location it is determined whether a USB memory is accessibly inserted in a USB port of the image reading apparatus to allow the image to be stored. Note that when the read image is to be stored in the USB memory connected to the information processing apparatus the information processing apparatus determines whether it is possible to store the image. In step S the determination result is acquired and checked.

If the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S the image reading apparatus stores the image read in step S in the USB memory connected to the image reading apparatus or the information processing apparatus and terminates the processing.

In step S the image reading apparatus determines whether the image read in step S is stored in the storage location set on the second row displayed on the display portion in . Referring to flash memory is set as a storage location and hence it is determined whether the image can be stored in a flash memory . If the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S the image reading apparatus stores the image read in step S in the flash memory . When a storage location is a flash memory postprocessing is move when 1 is effective . In this case if a storage location a USB memory in this case at the highest priority level permits storage the image is moved from the storage destination at which the image is stored in step S to the storage destination at the highest priority level. For this purpose the image reading apparatus determines in step S whether the image stored in the flash memory can be stored in the USB memory connected to the USB connection portion . If the image cannot be stored NO in step S the process waits until the image can be stored. If the image can be stored YES in step S the process advances to step S. In step S the image reading apparatus moves the image stored in the flash memory to the USB memory and terminates the processing.

Note that the image stored in the flash memory may be deleted upon movement in step S or may be copied to the USB memory while being left in the flash memory .

Even if the USB memory cannot be temporarily used because of the processing in steps S to S the image is temporarily stored in the flash memory. If the image can be stored afterward when the USB memory is inserted or the USB memory permitting storage is inserted the image can be moved to the USB memory.

In step S the image reading apparatus determines whether the image read in step S can be stored in the storage location set on the third row displayed on the display portion in . Referring to since PC1 Document is set as a storage location the image reading apparatus determines whether it is possible to access the Document folder in the information processing apparatus and store the image in the folder. This determination may be performed by for example a method of determining that the image can be stored if the connection to the information processing apparatus is maintained or a method of determining that the image can be stored upon inquiring of the information processing apparatus whether the image can be stored.

If it is determined that the image cannot be stored NO in step S the process advances to step S. If the image can be stored YES in step S the process advances to step S.

In step S the image reading apparatus transmits the image read in step S to application software which operates in the information processing apparatus . With this operation the information processing apparatus which has received this image stores the image in the Document folder. In step S upon storing the image in the Document folder the application software adds the path storage destination information of the stored image as history information to the scan history. This scan history can be displayed on the scan history window shown in .

In step S the image reading apparatus executes error processing because the image read in step S cannot be stored in any of all the designated storage locations. Since three storage locations are set on the display portion in it is determined whether the image can be stored in one of the three storage locations. Only when it is determined that the image cannot be stored in any of the storage locations the process advances to step S. If for example four or more storage locations are set the determination whether the image can be stored in a storage location is repeated by the number of times corresponding to the number of storage locations.

The second embodiment is configured to search for a storage location in which an image can be stored in a priority order after the image is read. It is however possible to read an image upon searching for a storage location permitting storage in the priority order. When reading an image first the image is stored in a USB memory even if the USB memory is inserted during image reading. In contrast to this when reading an image upon searching for a storage location the image is stored in the storage location found before image reading even if a USB memory is inserted during image reading. It is also conceivable to search for a storage location in which an image can be stored in advance before image reading and to search for a storage location again after a scan and store the image in the storage location.

As described above according to the second embodiment as in the first embodiment by registering a plurality of storage locations other than a portable medium and setting a priority order even if data cannot be stored in the portable medium the user can store the data in another storage location. In addition it is possible to reduce the risk of losing a storage location by setting as postprocessing corresponding to the second or subsequent highest priority level processing contents such as moving a storage location or leaving a scan history in accordance with a usage situation.

The first and second embodiments have exemplified the image reading apparatus having the scanner function. However the present invention is not limited to this. For example it is possible to use an image input apparatus such as a digital camera.

The first and second embodiments are configured to register storage locations and set postprocessing in either the information processing apparatus or the image reading apparatus . However the present invention is not limited to this. Such registering and setting operations may be performed in any processing apparatuses other than the information processing apparatus and the image reading apparatus which are capable of implementing the functions of the respective embodiments.

In addition various types of postprocessing have been described in the above embodiments. The user may individually set each of these types of postprocessing.

Furthermore in the first and second embodiments data to be stored is an image. However the present invention is not limited to this. For example the above embodiments may be applied to storage locations and postprocessing when data such as FAX or mail data is received input by the communication function of the information processing apparatus or the image reading apparatus .

Embodiment s of the present invention can also be realized by a computer of a system or apparatus that reads out and executes computer executable instructions e.g. one or more programs recorded on a storage medium which may also be referred to more fully as a non transitory computer readable storage medium to perform the functions of one or more of the above described embodiment s and or that includes one or more circuits e.g. application specific integrated circuit ASIC for performing the functions of one or more of the above described embodiment s and by a method performed by the computer of the system or apparatus by for example reading out and executing the computer executable instructions from the storage medium to perform the functions of one or more of the above described embodiment s and or controlling the one or more circuits to perform the functions of one or more of the above described embodiment s . The computer may comprise one or more processors e.g. central processing unit CPU micro processing unit MPU and may include a network of separate computers or separate processors to read out and execute the computer executable instructions. The computer executable instructions may be provided to the computer for example from a network or the storage medium. The storage medium may include for example one or more of a hard disk a random access memory RAM a read only memory ROM a storage of distributed computing systems an optical disk such as a compact disc CD digital versatile disc DVD or Blu ray Disc BD a flash memory device a memory card and the like.

While the present invention has been described with reference to exemplary embodiments it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.

This application claims the benefit of Japanese Patent Application Nos. 2013 273173 filed Dec. 27 2013 and 2014 247317 filed Dec. 5 2014 which are hereby incorporated by reference herein in their entirety.

