---

title: Adjusting in-store media to customer preferences
abstract: The disclosure provides techniques for adjusting in-store media according to customer preferences. A customer's presence or purchase is detected at an establishment, and a system at the establishment retrieves information on media preferences of the customer. A media backend then matches the customer preferences to media items (music tracks, images, videos, etc.), and the matching media items are played, displayed, or broadcast at the establishment. If multiple customers are present at the establishment or make orders, the media backend may order media items that match the customers' preferences in first-served order, or based on a ranking of the customers relative to each other or on the content of the media items themselves.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09632663&OS=09632663&RS=09632663
owner: FISH SIX RC
number: 09632663
owner_city: San Francisco
owner_country: US
publication_date: 20140122
---
Embodiments of the present invention relate generally to in store media systems and more specifically to an approach for implicitly adjusting in store media such as the music played in store to customer preferences.

A modern business such as a restaurant chain oftentimes provides in store music as part of an overall service offering. For example the business may continuously play background music received over traditional radio. As another example the business may install a jukebox a coin operated device that plays selected music tracks.

Recently streaming music services have become popular. Some streaming music services provide comprehensive libraries of licensed music titles from which playlists i.e. lists of music tracks may be compiled and streamed over the internet. That is operators of an establishment select music tracks to include in the playlists and the streaming music service streams such music tracks for playback at the establishment. Similarly an operator can select from a variety playlists selected by artist genres etc. and stream music from these playlists within a retail establishment in order to create a given atmosphere or ambience. In addition some streaming music services permit customers to select desired music tracks to be streamed extending the music available from a jukebox to a larger library. For example customers may use a mobile device application to make explicit selections of music tracks from available music tracks and the streaming music service may then stream such selected music tracks for playback at the establishment.

One embodiment includes a method for selecting media for playback display or broadcast at an establishment. This method may generally include detecting one of presence of a customer at the establishment and a purchase by the customer at the establishment. The method may further include in response to detecting the presence of the customer or the purchase determining media preferences associated with the customer and identifying at least one media item corresponding to the determined media preferences to playback display or broadcast at the establishment.

Other embodiments include without limitation a computer readable medium that includes instructions that enable a processing unit to implement one or more aspects of the disclosed method as well as a system configured to implement one or more aspects of the disclosed method.

Embodiments disclosed herein provide techniques for customizing customers in store experiences with media e.g. music images videos etc. based on customer preferences. For example consider a restaurant that permits customers to place orders online. In such a case the restaurant could provide a customer with a barcode graphic such as a quick response QR code that can be scanned to fulfill the order at the restaurant. When the QR code is scanned at the restaurant an order fulfillment system may retrieve from an order processing backend order details associated with the QR code. Additionally the fulfillment system may retrieve information related to the music preferences of the customer. The music preference information may include a favorite band artist genre time period or other information used to identify a music track to stream and play for the customer. A customer s music preferences may be determined in various ways such as by explicitly asking the customer during a registration process extracting the music preferences from an online profile belonging to the customer matching a customer s age to music from an associated time period etc. In addition music preferences may be gleaned from a mobile device e.g. by obtaining a music playlist or custom ringtones on the mobile device. Other metadata that may indicate preference include specific albums movies books favorite instruments hobbies etc. Even overall mood may be gleaned based on keyword analysis of the customer s recent messages and email. However identified the preferences may used to identify one or more music tracks for playback at the establishment or used to customize other aspects of a given customers experience.

After retrieving the customer music preferences the order fulfillment system transmits a message to a streaming music backend requesting that a music track matching the music preferences be added to a queue of music tracks to be streamed. In one embodiment the queue may include a set of media tracks from which the streaming music backend randomly chooses a next media track. The queue may initially be populated with music tracks from a playlist. The streaming music backend may track the currently playing media track as well as the queue of media tracks e.g. two to four media titles which may be pre cached for next play. The next media track to be streamed for playback becoming the currently streamed song is chosen from the queue and may be randomly selected with a weighted chance of being picked based on a number of votes associated with the music track.

The streaming music backend may be a streaming music service which provides access to a comprehensive library of licensed music tracks. Given the customer music preferences the streaming music backend first determines whether those preferences match a music track already in the queue of music tracks. For example a music track by the customer s favorite band may have already been added to the queue for a previous customer who liked the same band. If a matching music track is identified in the queue the streaming music backend increases a vote on the matching music track. Continuing the previous example the music track added for the previous customer may be initialized to have a vote of two or one or any other number indicating that one customer likes the music track. When the streaming music backend determines that the current customer s music preferences match the same music track the streaming music backend may increase this vote by one to three or by any other increment .

If no matching music track is identified in the current in store playlist then the streaming music backend identifies a music track matching the customer s music preferences to add to the in store playlist. In one embodiment the track is identified from a playlist of titles already associated with the restaurant. Doing so helps ensure the music track that is chosen is appreciated by the customer and also fits the current ambiance of the restaurant. For example the restaurant may approve one playlist for a lunch service and another for a dinner or late night service. Similarly the playlists could be tailored for times of year e.g. the availability of Christmas music during November and December months. The streaming music backend may add the identified matching music track to the queue of music tracks with a given initial vote such as a vote of two. However if no other customer music tracks are in the queue the streaming music backend may fade out a music track currently playing and then begin playing the matching music track.

In another embodiment the music may be streamed according to a ranking of the customers. For example the streaming music backend may prioritize some customers celebrities frequent customers etc. and place a higher vote on their music tracks. In yet another embodiment the music tracks may be streamed based on uniqueness of the music tracks. For example if a customer prefers one band that is commonly preferred and another customer prefers a less commonly preferred band the streaming music backend may rank the uncommon choice higher and provide e.g. a higher vote. Doing so may seem counter intuitive but may result in a more memorable experience for the customer who prefers the uncommonly preferred band. On the other hand the customer who prefers the commonly preferred band may not even notice if a music track by such a band is played as music tracks by the commonly preferred band may often be included in playlists.

Note although a restaurant is used herein as a representative example of an establishment this disclosure is not limited to any particular commercial enterprise as embodiments of the invention may generally be adapted for a variety of environments where music is played to create part of an atmosphere or ambience for customers. Similarly although music is used herein as a representative example of in store media this disclosure is not limited to any particular form of media. In general embodiments of the invention may make any adjustments to a customer s experience in response to detecting the customer s presence or a purchase made by the customer. For example in response to detecting the customer s presence or purchase an in store media system may display artwork pictures videos or other information play sound effects etc. specific to the customer. This process may generally be automated with no user customer store operator interaction required for the system to select and display play or broadcast the media. That is the process may be seamless and the media may be selected and played without user input.

In the following description numerous specific details are set forth to provide a more thorough understanding of the present invention. However it will be apparent to one of skill in the art that the present invention may be practiced without one or more of these specific details.

Customer interface cloud order fulfillment system and streaming music backend communicate over a data communications network such as the internet. Customer interface may be a website a mobile application app or other executable program which provides a customer facing user interface allowing a customer to register an account as well as to view and select virtual items to include in an order. As used herein virtual items refers to items that customer selects from a menu provided by customer interface . The virtual items may represent generic categories of items e.g. sandwich beverage etc. that can be mapped when the customer visits a restaurant to specific items e.g. specific sandwiches beverages etc. present in the inventory of the restaurant. The specific items can then be presented to the customer to fulfill the order. This process of mapping virtual items to actual items is described in greater detail in U.S. patent application Ser. No. 14 085 607 which is incorporated by reference herein in its entirety.

 Registration generally refers to a process of creating an account which can then be used to place orders online. The registration process may include supplying billing information configuring user preferences updating profile details and so forth. In particular music preferences information may be collected during registration and stored in customer preferences database . Illustratively the customer preferences database is stored in computing cloud but the customer preferences database may also be stored in any other remote or locally accessible system. One advantage of storing the customer preferences database in the cloud is that this enables the preferences to be delivered to any establishment that the customer visits providing a similar experience to the customer regardless of location.

In one embodiment the registration process may include an option for the customer to specify a favorite band artist music genre time period song etc. or a combination of these via the customer interface . The specified music preferences are then stored in the customer preferences database . After registration the music preferences information and other preferences may also be updated in the customer s account via the customer interface . Note the music preferences information entered by the customer need not be stored as entered and may instead be used to identify a corresponding specific band artist genre time period song etc. in a database storing labels for music tracks with the specific information being stored in the customer preferences database . For example the customer may enter rock which may be associated with a rock and roll label that is ultimately stored in the customer preferences database . In addition to a customer providing their express preferences customer music preferences may be obtained in other ways. For example the registration may extract music preferences from an online profile belonging to the customer match the customer s birth date to music from an associated time period infer music preferences from the customer s address or ZIP code or other demographic markers. For example the customer may provide social network account information during the registration process and music preferences may be extracted from the customer s social network profile. In addition music preferences may be gleaned from a mobile device playlist or ringtones. As discussed other metadata that may also be used as preference indicators including specific albums movies books favorite instruments hobbies etc. and overall mood may be gleaned based on keyword analysis of e.g. the customer s recent messages and email.

Order processing backend is a cloud based web service that receives stores and processes orders placed by customer via customer interface . Although shown as cloud based order processing backend may be any other remotely accessible or local computing system. In addition to the registration process customer interface and order processing backend also allow customer to place an order and receive a QR code that includes an order number and potentially other information associated with the order. The QR code may then be scanned at a restaurant to fulfill the order or at least inform the restaurant that the customer is now present within the restaurant. In one embodiment order processing backend validates orders placed via customer interface and stores orders within an order database with the assigned order numbers. The order processing backend then transmits the order number back to the customer interface which generates the QR code that includes the order number and any associated information .

The customer may later scan the QR code to fulfill the order at which time the order fulfillment system also adjusts in store music according to the customer s music preferences. More specifically in one embodiment the QR code scanner scans a QR code presented by customer and extracts data from the QR code. Data extracted from the QR code is passed to KMS which includes hardware and software for order fulfillment such as computer monitors that allow restaurant operators to track the order process touch screen devices that allow the operators to input or modify order information and databases that dynamically update inventory in response to received orders. KMS is configured to parse the QR code data and extract the order number for the customer s order.

KMS then passes the extracted order number to POS which is configured to perform various functions associated with order processing such as retrieving order details determining items in the restaurant s inventory matching the order causing a payment processing backend not shown to bill the customer generating a receipt that may be physically printed and provided to the customer or emailed to the customer among other things. In one embodiment POS may request order details from order processing backend and provide the extracted order number. In response the order processing backend may query the order database using the order number for information needed to fulfill the order e.g. specific items ordered billing information etc. .

In one embodiment the order fulfillment system also queries customer preferences database for music preferences of the customer who made the order. Order processing backend then return any information needed to fulfill the order and music preferences information to POS . For example order processing backend may return an extensible markup language XML file or some other serialized representation of data that includes the order fulfillment information and music preferences information.

At this point the POS transmits music preferences information back to KMS which then requests that streaming music backend add a music track that matches the customer s music preferences and a current playlist to a queue of streaming music tracks. At any given time streaming music backend may stream the first music track in the queue. Initially the queue may include music tracks from a predetermined playlist of music tracks. For example the restaurant may play streamed music tracks from a given playlist during the daytime and another playlist at nighttime to create different atmospheres. As customer orders are processed streaming music backend adds music tracks that match the customers music preferences and the current playlist to the queue based on the presence of a given customer. Finding a match to the customer s music preferences as well as the current playlist ensures that the customers in store experiences are customized to include music they appreciate while preserving the atmosphere of the restaurant. Note customers do not explicitly request particular music tracks for music tracks consistent with their preferences to be queued for streaming.

Prior to adding a music track to an in store playlist the streaming music backend may first determine whether a music track that is already in the queue matches the customer s preferences. If such a matching music track is found streaming music backend may increase a vote on that music track. As a result music tracks matching the music preferences of more customers are associated with a higher number of votes. If no matching music track is found in the queue streaming music backend may determine a matching music track from other available music tracks e.g. music tracks in the restaurant s custom library or in the comprehensive library of licensed music tracks provided by the streaming music backend and add the matching music track with a vote of two or any other initial value to the queue behind other customers music tracks as discussed in greater detail below. If no other customers music tracks are in the queue streaming music backend may stream the matching music track after fading out the currently playing music track.

Customer interface order processing backend customer preferences database streaming music backend and order fulfillment system including KMS order board and POS may each be implemented by a computing device or network of computing devices or by a remote or cloud based computing device. illustrates an exemplary computing device that is a component of the system of according to one embodiment. Computing device may be a physical or a virtual computing device or a combination of the two. As shown computing device includes a processing unit input output devices and a memory unit coupled to one another. Memory unit includes an application that is coupled to a database . Processing unit may be a central processing unit CPU application specific integrated circuit ASIC or any other data processing element. I O devices may include devices capable of receiving input devices capable of generating output and devices capable of both receiving input and generating output. Memory unit may include any type of memory module or a collection of memory modules capable of storing data. Processing unit executes software application e.g. to store and retrieve data from database such as store and retrieve music preferences service web based requests receive an online order fulfilled at a restaurant etc.

As mentioned computing device may implement one or more of the customer interface order processing backend customer preferences database streaming music backend and order fulfillment system including KMS order board and POS shown in . For example if computing device implements customer interface then software application may be a web server application that registers customers and processes web requests including orders placed by customers to support the operation of a customer facing website. Database may store customer preferences such as music preferences. As another example if computing device implements streaming music backend then software application may receive customer music preferences identify music tracks that match the customer music preferences and a current playlist add the matching music tracks to a queue of music tracks if necessary and stream the music tracks in the queue for playback at the restaurant.

Persons skilled in the art will recognize that computing device represents just one exemplary implementation of a component within order processing system and that other implementations also fall within the scope of the present invention. As a general matter computing device may be any technically feasible type of device configured to implement any of the functionality described herein.

As shown partial order details include order number customer information and virtual item details . As discussed after customer scans QR code KMS may extract the order number from the QR code data. This order number is then used to determine customer preferences which are transmitted to streaming music backend so that a music track that matches the customer s preferences may be queued for streaming if not immediately streamed . In another embodiment KMS may also extract partial order details such as the customer information and the virtual items details and populate an order board which displays orders being processed at the restaurant with portions of partial order details including customer information and virtual item details e.g. Customer X Sandwich . In this fashion customer may be notified that order was received very shortly after QR code is scanned and may track the processing of the order.

At step order fulfillment system retrieves customer music preferences from order processing backend . In one embodiment POS may transmit the order number extracted from the QR code to order processing backend and request music preferences information as well as information needed to fulfill the order. In one embodiment the processing backend queries a customer preferences database to retrieve music preferences associated with the particular customer who placed the order who may be identified by e.g. a customer number associated with the order number in an order database . The order processing backend may return the retrieved customer music preferences along with order details needed to fulfill the order in any feasible form e.g. as an XML file . As discussed the music preferences information may include any information identifying music that the customer likes or is predicted to like. For example the music preferences information may identify a specific track or tracks as well as identify a favorite band artist genre of music time period song etc. The customer s music preferences may be determined in various ways such as by explicitly asking the customer during a registration process extracting the music preferences from an online profile belonging to the customer matching a customer s age to music from an associated time period among other things. For example music preference information may be inferred from the customer s year of birth e.g. 1980s music for a customer born between 1970 and 1990 hip hop for a customer born after 1990 etc. . As another example music preferences may be gleaned from a mobile device playlist or ringtones or based on keyword analysis of the customer s recent messages and email. Any metadata may be used as music preference indicators including specific albums movies books favorite instruments hobbies etc.

Note in an alternative embodiment the customer s music preferences may be encoded in the QR code such that step does not need to be performed. For example order processing backend may generate in response to an order being placed via customer interface a QR code that includes the order number as well as music preferences information or a reference to such information . In such a case order fulfillment system may simply scan the QR code and extract the music preferences information.

At step order fulfillment system requests to add a music track matching the customer music preferences and current playlist to a queue of streaming media tracks. For example streaming music backend may provide an application programming interface API which KMS or other component of the order fulfillment system invokes to request the music track. After KMS invokes such an API to make the request streaming music backend may determine a music track that matches the customer music preferences and the current playlist and add such a music track to the queue if the music track is not already in the queue as discussed in greater detail below with respect to .

At step streaming music backend determines whether the customer music preferences match a music track that is already in the queue. A match may be defined in a number of different ways in addition to a specific match for a specific track and techniques are known for mapping music preference information such as a favorite band or genre to specific music tracks. For example the music tracks may be labeled by genre subgenre time period etc. and streaming music backend may search for a matching music track in the related genre subgenre time period etc. that the customer prefers. If no such music track is found streaming music backend may also look beyond the favorite band itself to determine whether e.g. a music track by a related band is in the queue. Of course if the music preferences information does not include a favorite band or includes other information e.g. favorite genre time period song etc. streaming music backend may determine a match as appropriate using available information.

If the customer music preferences match a music track already in the queue then at step streaming music backend increases a vote on the matching music track e.g. by one vote or two votes . As discussed voting may be used in choosing a next media track. In particular the streaming music backend may choose the next media track randomly from the music tracks in the queue with each music track having a weighted chance of being picked based on the number of votes associated with the music track. In one embodiment each music track in the queue associated with a customer may also have two or more votes. Other music tracks in the queue that belong to a playlist created by the restaurant but are not associated with any particular customer may have zero votes or perhaps one vote . The number of votes for a given music track may be incremented by any value each time a customer s music preferences match the music track.

A broad variety of other schemes for voting and ranking can be used. For example the current customer may be a repeat customer or other very important person VIP such as a celebrity who the restaurant wishes to reward for his her patronage and the streaming media backend may prioritize such customers by increasing the number of votes on their matching music tracks by two or by some other amount corresponding to a perceived value or status of a customer . In such a case the order XML and order processing backend discussed above may be also modified as appropriate so that information about repeat customers and VIPs is stored and repeat customers and VIPs are recognized. As another example the music tracks may be streamed based on uniqueness of the music tracks such that a music track that is less commonly preferred is prioritized over more commonly preferred music tracks. This may result in a more memorable experience for customers who prefer uncommonly preferred music. On the other hand customers who prefer commonly preferred music may not even notice if such a music track is played as the music track may often be included in playlists.

Referring again to method at step if the customer music preferences do not match a music track already in the queue streaming music backend determines a music track matching the customer music preferences and the current playlist from other available music tracks. The other available music tracks may include music tracks in the restaurant s custom library of music tracks music tracks in a comprehensive library of licensed music etc. Identifying a music track that both matches customer preferences and the current playlist helps ensure that the music track chosen is not only appreciated by the customer but also fits the current ambiance of the restaurant. Similar to the discussion above a match may be defined in a variety of ways and techniques are known for mapping music preference information to specific music tracks.

At step streaming music backend determines whether music tracks associated with other customers present in the restaurant remain in the queue. If not then at step streaming music backend fades out the currently playing music track and plays the determined music track that matches the customer preferences and the current playlist. That is streaming music backend immediately begins to stream the determined music track for playback at the establishment after cutting short the currently playing music track by fading it out.

If music tracks associated with previous customers are present in the queue then at step streaming music backend adds the determined music track with an initial vote value e.g. two votes to the queue. That is music tracks that match customer preferences are not cut short. Accordingly if streaming music backend determines that music tracks associated with previous customers are in the queue then the music track that matches the customer preferences and current playlist may be placed in the queue along with the tracks of previous customers. In another embodiment the customers music tracks may be played in first come first served order.

Then at step the streaming music backend selects a music track from the queue to play with weighting of the selection based on the number of votes for each music track. That is the queue may include a set of media tracks from which the streaming music backend randomly chooses a next media track. The next media track to be streamed for playback becoming the currently streamed song is then chosen randomly from the music tracks in the queue with each music track having a weighted chance of being picked based on the number of votes associated with the music track. In an alternative embodiment the queue itself may be sorted by the number of votes for each music track such that music tracks with more votes are played before music tracks with fewer votes.

Although discussed above primarily with respect to a QR code customer presence and purchase may be determined in other ways. In general any identifiable piece of information may be used that permits linking a customer who is present or makes a purchase to an entry in the customer preferences database. For example the order fulfillment system may determine customer presence based on facial recognition in response to detecting at the restaurant a mobile device MAC address known to belong to the customer s device when the customer uses a check in application etc. or any combination of such techniques. The order fulfillment system may determine a purchase by the customer using credit card information radio frequency identification RFID or some other near field communication method a unique order profile i.e. a unique combination of items ordered associated with the customer etc. or any combination of such techniques. In one embodiment customer presence and purchase may even be determined based on input by an operator of the establishment. For example the operator may recognize a repeat customer and enter his her name in the system. In cases where o customer presence but not purchase is detected the system may also adjust the music played according to the customer s music preferences similar to the discussion above. For example if a customer is present but has not made a purchase the streaming music backend may increase the vote on a matching music track in the queue discussed above and after the customer makes a purchase the streaming music backend may increase the vote again by one. Conversely a VIP customer however identified may have more votes assigned to selections added to the queue in response to their presence in a restaurant.

Although discussed above primarily with respect to ordering music tracks in a queue by a number of votes techniques disclosed herein may be modified so that the music tracks are ordered according to other mechanisms. For example the streaming music backend may aggregate preference data for all customers in the restaurant at a given time and make intelligent track selection and queuing decision based on those aggregated preferences.

Although discussed above primarily with respect to playing music techniques disclosed herein may be modified so that adjustments to a customer s experience other than the music being played are made in response to detecting the customer s presence or purchase at a restaurant. That is other in store experiences including any audio or visual media may be changed upon detecting the customer s presence or purchase. For example in response to detecting the customer s presence or purchase the order board discussed above which displays the status of orders may also display customer specific information images e.g. artwork or scenic photos videos etc.

Note persons skilled in the art will recognize that embodiments disclosed herein may be modified as a result of various practical limitations. For example digital rights management DRM restrictions may provide that a music track cannot be replayed within a certain time period and that a limited number of songs may be cut short within any given hour. As another example if a customer scans his her order just before the end of a music track the streaming media backend may not have enough time to pre cache a music track matching the customer s preferences before the currently playing music track completes. Some streaming media services only play a media track in the queue that has loaded a sufficient enough cache to stream at the available bandwidth of an establishment s internet connection so as to not interrupt music service.

Advantageously techniques disclosed herein permit customers experiences at an establishment to be customized in a favorable manner. For example music that customers like may be played at the establishment without requiring customers to explicitly select the music tracks or even be aware that music tracks are being selected according to their preferences. Customers may feel more comfortable and enjoy the ambience of the establishment more given that music they appreciate is played when they are present. In addition such music may be played as a reward for making a purchase.

One embodiment of the invention may be implemented as a program product for use with a computer system. The program s of the program product define functions of the embodiments including the methods described herein and can be contained on a variety of computer readable storage media. Illustrative computer readable storage media include but are not limited to i non writable storage media e.g. read only memory devices within a computer such as compact disc read only memory CD ROM disks readable by a CD ROM drive flash memory read only memory ROM chips or any type of solid state non volatile semiconductor memory on which information is permanently stored and ii writable storage media e.g. floppy disks within a diskette drive or hard disk drive or any type of solid state random access semiconductor memory on which alterable information is stored.

The invention has been described above with reference to specific embodiments. Persons of ordinary skill in the art however will understand that various modifications and changes may be made thereto without departing from the broader spirit and scope of the invention as set forth in the appended claims. The foregoing description and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. In particular the techniques described herein may be applicable to a wide variety of business outside of those discussed herein including for example big box retail locations boutique stores concert theater movie or other entertainment venues spas or beauty salons and so forth.

