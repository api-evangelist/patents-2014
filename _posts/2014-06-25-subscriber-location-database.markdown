---

title: Subscriber location database
abstract: A system may be configured to allow for storage of location information regarding a set of user devices. The location information may be updated relatively frequently, and without introducing additional traffic into a wireless telecommunications network associated with the user devices. The location information may be made available to internal devices associated with the wireless telecommunications network and/or to external third party devices (such as banks, payment card processors, or advertisers) with user consent. Since the information is obtained and stored prior to requests, the location information may be provided, in response to requests, relatively quickly.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09521510&OS=09521510&RS=09521510
owner: Verizon Patent and Licensing Inc.
number: 09521510
owner_city: Basking Ridge
owner_country: US
publication_date: 20140625
---
User devices such as mobile telephones smart phones etc. may be carried by users on a regular basis. The location of a user device may typically be determined by a service provider associated with the user device. For example the service provider may perform cell tower triangulation may query the user device for the location of the user device etc. in order to determine the location of the user device.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements.

Some implementations described herein may allow for low latency access to frequently updated and or highly granular user device location information. For example a subscriber location database SLD may receive location information regarding a set of user devices on a relatively frequent basis e.g. whenever a network event occurs such as when a voice call is placed when a data connection is established or torn down etc. . The location information may be received from a service provider associated with the user devices from a third party and or from another source and may be obtained using a variety of techniques. The SLD may provide an interface such as an application programming interface API via which the SLD may provide on demand access to location information associated with user devices. For example an external device may query the SLD for the last known location or a location history associated with a particular user device.

Using the SLD as described herein may save network and or processing resources compared to conventional techniques for determining a location of a user device. Further querying the SLD for a location of a user device may consume less time than conventional techniques. For example typically when determining the location of a user device a request may be made to a service provider s network and or to the user device itself. Thus in conventional techniques multiple devices may be involved in the determination of the user device which may consume resources as well as time. Further additional traffic may be generated e.g. traffic sent between the multiple devices regarding the request for the location and the response to the request . The SLD however may receive location information on an ongoing basis which may be obtained without introducing extra traffic related to location determination. Further since the SLD stores location information network devices and or the user device may not need to be queried in order to obtain the location of the user device.

The information stored and or obtained by the SLD or other devices may be stored and or collected on an opt in basis. In some implementations a user may be given the opportunity to review information such as location information that has been collected regarding or on behalf of the user and to delete the information and or make the information unavailable for use. In some implementations the user may have the opportunity to opt out in which case the SLD may cease receiving and or storing information regarding the user and may delete any existing information regarding the user. Further the user may have the option to share the information with individual third parties such as payment processors advertisers etc. or to refrain from sharing the information with any or all parties. In some implementations the third parties may be required to obtain user consent before third parties are able to access information stored in the SLD.

As shown in an SLD may be used in the prevention of fraud during transactions involving payment cards e.g. credit cards debit cards etc. . As shown the SLD may receive at arrow user device location updates. The location updates may be received from a network associated with the user device a third party device and or another source. The location updates may indicate a geo location of the user device e.g. latitude and longitude coordinates and may be obtained relatively frequently. For example the location updates may be received at intervals that are based on the occurrence of network events e.g. starting or ending a voice call establishing or tearing down a data connection sending or receiving a text message etc. and or at other intervals. The location updates may in some implementations be obtained using conventional techniques.

The SLD may store the location information e.g. the last known location and or the last few known locations of the user device with identifying information e.g. a mobile directory number MDN that indicates the user device to which the location information is associated. In this manner location information may be stored on a per user device basis. The SLD may make the location information available via an interface e.g. an API . For example as discussed below an authorization device which may be associated with a bank a payment card company etc. may communicate with the SLD via the interface in order to obtain location information regarding the user device e.g. the last known location of the user device .

As shown in a user e.g. a user associated with the user device may attempt at arrow to make a payment via a point of sale POS terminal e.g. a device that processes and or authorizes payment card transactions . For example the user may physically hand a payment card to a cashier associated with the POS terminal may insert the payment card into the POS terminal etc. The POS terminal may request at arrow Auth. request authorization from the authorization device to process the payment card.

The authorization device may identify an MDN associated with the payment card e.g. based on previously stored information and may obtain at arrow the last known location of the user device from the SLD. For example the authorization device may provide the MDN when requesting the last known location.

The authorization device may determine at arrow whether to authorize the payment attempt based on the received location information. For instance if the last known location of the user device was relatively close to the POS terminal e.g. within a threshold distance and or if the last known location was determined relatively recently e.g. within a threshold time before the payment attempt was made the authorization device may determine that the payment attempt should be allowed. On the other hand if the last known location of the user device was relatively far away from the POS terminal e.g. beyond a threshold distance and or if the last known location was not determined relatively recently e.g. beyond a threshold time before the payment attempt was made the authorization device may determine that the payment attempt should be denied. In some implementations the last known location may be one of several factors that the authorization device uses to determine whether to authorize the payment attempt. The authorization device may provide at arrow Auth. response a response to the POS terminal indicating whether the payment attempt was authorized or not.

User device may include any computation and communication device such as a wireless mobile communication device that is capable of communicating with one or more networks e.g. network . For example user device may include a radiotelephone a personal communications system PCS terminal e.g. a device that combines a cellular radiotelephone with data processing and data communications capabilities a personal digital assistant PDA e.g. that can include a radiotelephone a pager Internet intranet access etc. a smart phone a laptop computer a tablet computer a camera a television a set top device STD a personal gaming system a wearable device and or another type of mobile computation and communication device. User device may receive connectivity to network via services provided by a service provider such as an Internet service provider ISP . An ISP may in some implementations be a wireless telecommunications provider e.g. a cellular telecommunications provider .

SLD may include one or more computation communication and or storage devices that receive and or store information regarding the geographic locations of user devices . SLD may receive the location information from a network device e.g. a device associated with a telecommunications network and or from another device e.g. a device that works with a telecommunications network in order to determine location information for user devices . SLD may receive updates to location information relatively frequently such as whenever location information is obtained by the network device and or another device. For instance SLD may receive location updates for user device when a network event associated with user device occurs. As mentioned above network events may correspond to calls being sent and or received by user device data connections being established and or torn down messages being sent and or received etc.

In some implementations SLD may be deployed in a cached duplicated and or a distributed manner. For example while one SLD is shown in in practice multiple SLDs may be present. Additionally or alternatively a single SLD may store multiple instances of the same data and or may be distributed across multiple physical devices. By storing multiple instances of data different devices e.g. multiple internal network devices and or third party devices may access location information without significantly affecting the performance of SLD .

Internal network device may include one or more computation communication and or storage devices that access and or analyze location information e.g. as provided by SLD . Internal network device may be for example a device that is associated with the same operator and or service provider with which SLD is associated. For example SLD and internal network device may be associated with the same telecommunications network service provider. In some implementations internal network device may only be reachable by SLD via a private address e.g. a private IP address that may only be able to be resolved within a particular network associated with internal network device . Additionally or alternatively internal network device may access SLD using a private address associated with SLD . As described below internal network device may analyze and or otherwise utilize information received from SLD . For example internal network device may generate network analytics information that a service provider associated with a network can use to improve aspects of the network e.g. performance aspects monetization aspects etc. .

Third party device may include one or more computation communication and or storage devices that access and or analyze location information e.g. as provided by SLD . Third party device may be for example a device that is associated with a different operator and or service provider with which SLD is associated. In some implementations SLD and third party device may be associated with different operators and or service providers who have contracted and or otherwise agreed that third party device may access information associated with SLD . In some implementations third party device may be reachable by SLD via a public address e.g. an IP address that may able to be resolved over the Internet by a public Domain Name System DNS server . Additionally or alternatively third party device may communicate with SLD using a public address associated with SLD . As described below third party device may analyze and or otherwise utilize information received from SLD . For example third party device may be associated with a bank a payment card processor an advertising service and or another entity that is interested in obtaining location information for user device .

Network may include one or more networks via which user device SLD internal network device and or third party device may communicate. For example network may include an evolved packet system EPS that includes a Long Term Evolution LTE network and or an evolved packet core EPC network that operate based on a third generation partnership project 3GPP wireless communication standard. The LTE network may be or may include a radio access network RAN that includes one or more base stations some or all of which may take the form of an eNodeB eNB via which user device and or another device may communicate with the EPC network. The EPC network may include one or more serving gateways SGWs mobility management entities MMEs and or packet data network PDN gateways PGWs and may enable user device to communicate with a PDN e.g. the Internet and or an IP Multimedia Subsystem IMS core network. The IMS core network may manage authentication session initiation account information a user profile etc. associated with user device .

Network may additionally or alternatively include a wide area network WAN a metropolitan area network MAN the Internet a fiber optic based network and or a combination of these or other types of networks. Network may include one or more wireless networks in addition to or in lieu of an LTE network. For example network may include a Code Division Multiple Access CDMA 2000 1 network a second generation 2G wireless network a third generation 3G wireless network a fourth generation 4G wireless network a fifth generation 5G wireless network a Wi Fi wireless network e.g. a network that operates according to an Institute of Electrical and Electronics Engineers IEEE 802.11 based standard and or another wireless network. In some implementations network may be communicatively coupled to one or more other networks.

Location data interface may serve as an interface between SLD and an external device or set of devices via which location data interface receives location information associated with one or more user devices . For example as mentioned above the location information may be received from a telecommunications service provider and or another device or system that obtains location information regarding user devices . Location data interface may be an implementation of an API via which location data interface can receive the location information

Internal network device interface may include an interface e.g. an IP interface and or an implementation of an API between SLD and internal network device . As mentioned above the interface to internal network device may be accessed via a private IP address. In some implementations internal network device interface may include proprietary and or secure protocols in order to ensure that internal network device is a trusted device associated with a particular service provider and or operator. Via internal network device interface SLD may provide location information to internal network device . For example internal network device interface may include protocols via which internal network device may request location information associated with a particular MDN or set of MDNs location information associated with a particular geographic location or area location information based on the occurrence of certain types of events e.g. when a new user device is detected when a location for a particular user device has not been updated for a particular amount of time etc. .

Third party device interface may include an interface e.g. an IP interface and or an implementation of an API between SLD and third party device . As mentioned above the interface to third party device may be accessed via a public IP address. In some implementations third party device interface may include standard and or secure protocols in order to ensure that third party device is a trusted device e.g. a device that has been determined as being allowed to access information stored by SLD . Via third party device interface SLD may provide location information to third party device . For example third party device interface may include protocols via which third party device may request location information associated with a particular MDN or set of MDNs location information associated with a particular geographic location or area location information based on the occurrence of certain types of events e.g. when a new user device is detected when a location for a particular user device has not been updated for a particular amount of time etc. .

Location data repository may store location information regarding one or more user devices such as information received via location data interface . As mentioned above location data repository may include one or more physical devices that may store one or more instances of data. In some implementations location data repository may be distributed in a hierarchical manner. For example a first storage device or set of storage devices may receive location information and may propagate some or all of the data to a second storage device or set of storage devices and so on. That is while shown as a single block in location data repository may include multiple physical devices which may be integrated within the same physical enclosure or the same data center or located in diverse regions.

As shown information regarding N locations where N is an integer greater than or equal to 1 for each user device may be stored. For example data structure may store the last five locations for a particular user device the last ten locations all received locations etc. In some implementations data structure may store a different quantity of locations for different user devices .

For each location data structure may store information regarding the geographical location e.g. latitude and longitude coordinates shown in the figure as and a timestamp an accuracy value and a cell identifier ID . The timestamp for a particular location record may indicate a time at which the location was measured and or received by SLD . The accuracy value may indicate for instance a distance e.g. expressed in meters from the specified location that the user device may be located. This distance may in some implementations correspond to the radius of a circle for which the location e.g. the latitude and longitude is the center. The accuracy value for a particular location record may be based upon a pre determined confidence level which may typically be approximately 90 . The accuracy value may be received from an external device or system that provided the location information to SLD . The cell identifier for a particular location record may indicate an identifier of a serving cell of a telecommunications network e.g. a cellular network to which user device was connected when the location record was generated.

Process may include receiving and storing at user device location information. For example as described above with respect to location data interface SLD may receive location information regarding one or more user devices from an external device or system e.g. a system that collects or otherwise determines location information based on the occurrence of network events and or using other techniques including conventional techniques . As also mentioned above e.g. with respect to location data repository storing the location information may include storing multiple instances of the information e.g. in multiple caches which may be collocated or geographically distributed .

Process may further include receiving at a request for location information associated with a particular user device. For example SLD may receive a request e.g. via internal network device interface or third party device interface for location information. The request may be received from for example internal network device or third party device .

Process may include identifying at whether the requestor is an internal network device or a third party device. For example SLD may determine whether the request was received via internal network device interface or third party device interface . Additionally or alternatively the request may include identifying information based on which SLD may identify the requestor. In some implementations SLD may authenticate the requestor in order to determine whether the requestor is authorized to access location information. For instance the request may include authentication information such as an encrypted authentication token a password and or other authentication or security related information.

If the requestor is an internal network device at YES then process may include providing at the latest location and or location history information. For example SLD may provide location information specified in the request. For instance the request may identify one or more user devices for which location information is requested. As another example the request may identify geographic locations and or regions for which location information is requested. As yet another example the request may specify a set of triggers based on which SLD should output or push location information to the requestor. For instance a particular trigger may indicate that the MDN of a user device for which location information has not been updated for six hours should be provided to the requestor. In some implementations the request may indicate an amount of location information requested e.g. a quantity of previous locations only the last known location etc. .

Since the requestor is an internal network device SLD may assume that a user of user device has consented to the location information being used internally with respect to the network. For example the user may have agreed to internal use of location information associated with user device when registering for access to the network. In other implementations SLD may confirm or determine whether the user has provided consent for the location information being used internally.

If on the other hand the requestor is not an internal network device at NO then it may be assumed that the requestor is a third party device or purports to be a third party device . Process may include determining at whether the third party device is authorized and or whether a user associated with the user device has consented to provide information to the requestor. If the user has consented to provide information to the requestor at YES then process may include providing at the requested location information based on a level of authorization or consent. For example users may provide differing levels of consent to different third party devices e.g. whether only the last known location can be provided how often the location information may be provided a quantity of previous locations that may be provided etc. . Further a user may authorize some third party devices to access location information associated with the user device while not authorizing other third party devices .

If the user has not consented to provide the information to the requestor and or if the requestor is not otherwise authorized to receive the information at NO then process may include denying at the request for location information.

Location data interface may serve as an interface between cell analytics server and SLD via which cell analytics server may request and receive from SLD location information associated with one or more user devices . For example as mentioned above the location information may be received from a telecommunications service provider and or another device or system that obtains location information regarding user devices . Location data interface may be an IP interface and or implementation of another API.

Cell location repository may include information identifying locations of cells associated with a particular telecommunications network server provider. A cell may refer to for example a coverage area or set of coverage areas associated with a particular base station a portion of a base station e.g. a set of radio transceivers associated with a base station a set of base stations etc. The information for a particular cell stored in cell location repository may indicate for instance the bounds of a particular cell e.g. latitude and longitude coordinates which when taken together form an outline of the cell . As another example a cell location may be expressed in terms of a point e.g. a set of latitude and longitude coordinates and a radius. In some implementations cell location repository may store a location of a single cell. In other implementations cell location repository may store locations for multiple cells such as cells associated with a particular region cells associated with a particular radio access technology all cells associated with the telecommunications network etc. The information stored by cell location repository may be received from for example the telecommunications network service provider and or another source.

In some implementations in addition to or in lieu of information stored by cell location repository the location data received via location data interface may indicate cell identifiers. For example a particular location information record received via location data interface may indicate an MDN of a particular user device a latitude and longitude and a cell identifier for a cell to which user device was connected when the location was determined.

Cell analytics engine may generate analytics information for a cell or set of cells based on location information received via and cell location information stored by cell location repository . For example using the cell location information cell analytics engine may identify location information that corresponds to the same location as a particular cell. Thus cell analytics engine may be able to identify location information for user devices on a per cell basis. As mentioned above the location information may indicate an identity of user devices e.g. MDNs associated with user devices . Using the identity information cell analytics engine may be able to determine trends associated with cells such as how long user devices tend to remain connected to cells how many different user devices connect to cells etc.

For example if a particular cell is located in an airport or shopping center cell analytics engine may determine based on location information received via that the particular cell has a relatively high amount of turnover. As another example cell analytics engine may determine an average time spent per user device connected to a particular cell. As yet another example cell analytics engine may segment the information based on times of day days of weeks seasons etc. For example cell analytics engine may determine certain trends during the week while determining other trends during the weekend.

These types of information may be used for example for advertising purposes network planning purposes or other purposes. For example certain types of advertising may be provided to user devices that are connected to a cell with high turnover versus a cell with low turnover. High turnover cells may be associated with for example generic or wide interest advertising while low turnover cells may be associated with more focused advertising.

As shown process may include receiving at user device location information. For example as discussed above with respect to location data interface cell analytics server may receive location information regarding a set of user devices . In some implementations cell analytics server may request location information that corresponds to a particular cell or set of cells. For instance cell analytics server may provide a cell identifier and or a region in the request. Process may further include receiving at cell location information e.g. via location data interface .

Process may additionally include generating at per cell location information based on user device locations and cell locations. For example as discussed above with respect to cell analytics engine cell analytics server may segment the received information on a per cell basis. In some implementations cell analytics engine may use information stored by cell location repository to segment the location information on a per cell basis. Additionally or alternatively the location information may include cell identifiers based on which cell analytics server may segment the location information.

Process may also include identifying at trends associated with cells based on the per cell location information. For example as discussed above with respect to cell analytics engine cell analytics server may determine for example an average amount of time that user devices spent within a cell an average number of different user devices present in a cell per amount of time or other trends. The trends may be segmented based on various factors such as time of day day of week seasons etc.

Process may further include storing and or outputting at the information regarding the trends and or the per cell location information. For example cell analytics server may output the trend information for application of the information. For example an advertiser may use the information to generate targeted advertising a network service provider may use the information for network planning purposes the information may be further segmented or analyzed in view of other information etc.

Bus may include one or more communication paths that permit communication among the components of device . Processor may include a processor microprocessor or processing logic that may interpret and execute instructions. Memory may include any type of dynamic storage device that may store information and instructions for execution by processor and or any type of non volatile storage device that may store information for use by processor .

Input component may include a mechanism that permits an operator to input information to device such as a keyboard a keypad a button a switch etc. Output component may include a mechanism that outputs information to the operator such as a display a speaker one or more light emitting diodes LEDs etc.

Communication interface may include any transceiver like mechanism that enables device to communicate with other devices and or systems. For example communication interface may include an Ethernet interface an optical interface a coaxial interface or the like. Communication interface may include a wireless communication device such as an infrared IR receiver a Bluetooth radio or the like. The wireless communication device may be coupled to an external device such as a remote control a wireless keyboard a mobile telephone etc. In some embodiments device may include more than one communication interface . For instance device may include an optical interface and an Ethernet interface.

Device may perform certain operations relating to one or more processes described above. Device may perform these operations in response to processor executing software instructions stored in a computer readable medium such as memory . A computer readable medium may be defined as a non transitory memory device. A memory device may include space within a single physical memory device or spread across multiple physical memory devices. The software instructions may be read into memory from another computer readable medium or from another device. The software instructions stored in memory may cause processor to perform processes described herein. Alternatively hardwired circuitry may be used in place of or in combination with software instructions to implement processes described herein. Thus implementations described herein are not limited to any specific combination of hardware circuitry and software.

The foregoing description of implementations provides illustration and description but is not intended to be exhaustive or to limit the possible implementations to the precise form disclosed. Modifications and variations are possible in light of the above disclosure or may be acquired from practice of the implementations.

For example while series of blocks have been described with regard to the order of the blocks may be modified in other implementations. Further non dependent blocks may be performed in parallel. Also while an example data structure has been described with regard to in practice the data structure may include a linked list an array a table a tree a hash table and or another type of data structure.

The actual software code or specialized control hardware used to implement an embodiment is not limiting of the embodiment. Thus the operation and behavior of the embodiment has been described without reference to the specific software code it being understood that software and control hardware may be designed based on the description herein.

Even though particular combinations of features are recited in the claims and or disclosed in the specification these combinations are not intended to limit the disclosure of the possible implementations. In fact many of these features may be combined in ways not specifically recited in the claims and or disclosed in the specification. Although each dependent claim listed below may directly depend on only one other claim the disclosure of the possible implementations includes each dependent claim in combination with every other claim in the claim set.

Further while certain connections or devices are shown in practice additional fewer or different connections or devices may be used. Furthermore while various devices and networks are shown separately in practice the functionality of multiple devices may be performed by a single device or the functionality of one device may be performed by multiple devices. Further multiple ones of the illustrated networks may be included in a single network or a particular network may include multiple networks. Further while some devices are shown as communicating with a network some such devices may be incorporated in whole or in part as a part of the network.

To the extent the aforementioned embodiments collect store or employ personal information provided by individuals it should be understood that such information shall be used in accordance with all applicable laws concerning protection of personal information. Additionally the collection storage and use of such information may be subject to consent of the individual to such activity for example through well known opt in or opt out processes as may be appropriate for the situation and type of information. Storage and use of personal information may be in an appropriately secure manner reflective of the type of information for example through various encryption and anonymization techniques for particularly sensitive information.

Some implementations are described herein in conjunction with thresholds. The term greater than or similar terms as used herein to describe a relationship of a value to a threshold may be used interchangeably with the term greater than or equal to or similar terms . Similarly the term less than or similar terms as used herein to describe a relationship of a value to a threshold may be used interchangeably with the term less than or equal to or similar terms . As used herein exceeding a threshold or similar terms may be used interchangeably with being greater than a threshold being greater than or equal to a threshold being less than a threshold being less than or equal to a threshold or other similar terms depending on the context in which the threshold is used.

No element act or instruction used in the present application should be construed as critical or essential unless explicitly described as such. An instance of the use of the term and as used herein does not necessarily preclude the interpretation that the phrase and or was intended in that instance. Similarly an instance of the use of the term or as used herein does not necessarily preclude the interpretation that the phrase and or was intended in that instance. Also as used herein the article a is intended to include one or more items and may be used interchangeably with the phrase one or more. Where only one item is intended the terms one single only or similar language is used. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

