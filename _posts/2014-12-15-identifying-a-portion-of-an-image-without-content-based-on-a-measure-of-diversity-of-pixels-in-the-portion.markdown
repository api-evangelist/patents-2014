---

title: Identifying a portion of an image without content based on a measure of diversity of pixels in the portion
abstract: A digital magazine server detects a portion of an image including pixels having similar or matching color values. Values are identified for pixels within the portion based on color values of the pixels and a measure of diversity of color is determined based on the identified values. The measure of color diversity is compared to a threshold value, and if the measure of diversity does not exceed the threshold value, the digital magazine server stores information indicating the portion does not include content. The digital magazine server may also identify an additional portion within a threshold distance of the portion if the portion does not include content and determine whether the additional portion includes pixels having matching or similar color values.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09342740&OS=09342740&RS=09342740
owner: Flipboard, Inc.
number: 09342740
owner_city: Palo Alto
owner_country: US
publication_date: 20141215
---
This invention relates generally to image analysis and more specifically to identifying a portion of an image that does not include content.

A digital magazine server provides content to its users via a digital magazine having various pages each including one or more content items. Each page also includes information describing positioning of content items within a page relative to each other. Frequently content included in a digital magazine includes images so a page of the digital magazine often includes multiple images.

However images included in a page of the digital magazine may include content as well as portions without content such as a letterbox region of a frame captured from a video. Conventional instructions for presenting images in a page of digital content do not account for portions of an image that do not include content which may cause the content included in the image to appear distorted or difficult to view when the image is presented to a user. For example if content in an image is surrounded by a border that does not include content a difference in the area including the content and the total area of the image may cause the content in the image to be distorted when the image is presented by the page of the digital magazine.

A digital magazine server retrieves content from one or more sources and generates a personalized customizable digital magazine for a user based on the retrieved content. The digital magazine server organizes content items having at least one common characteristic into various sections based on page templates describing the relative positioning of content items to each other. Content items are presented to the user according to the sections. The retrieved content items may be associated with images or include images and the digital magazine server may identify portions of an image without content to improve presentation of the image via the digital magazine.

When selecting content for inclusion in a digital magazine the digital magazine server obtains an image that includes a set of pixels. For example the digital magazine server obtains an image from a source from another user of the digital magazine server or from the digital magazine server. A color model represents the image by associating one or more color components each specifying a color and color values specifying an intensity of the one or more colors specified by the color components with each pixel in the image. Example color models include red green blue RGB cyan magenta yellow black CMYK International Commission on Illumination cone response luminosity and blue stimulation CIE XYZ hue saturation value HSV hue saturation lightness HSL or any other suitable mathematical model representing color.

Additionally the image includes multiple borders specifying boundaries of an image. For example the image includes borders corresponding to an upper boundary a lower boundary a right boundary and a left boundary of the image. The digital magazine identifies a border of the image and identifies a portion of the image that includes one or more pixels from the set of pixels included in the image and that is within a threshold distance from the border of the image. In some embodiments the distance from the identified border is a number of pixels from the border a number of pixels from the border at a specified angle a number of pixels from the border in a specified direction or any other suitable distance from the border. However a portion of the image within a threshold distance of an edge included in the image from a feature included in the image e.g. an object text etc. or from any suitable characteristic of the image may be identified in some embodiments.

Values identifying one or more colors associated with the pixels included in the portion are identified by the digital magazine server. In one embodiment a value identifying a color associated with a pixel in the portion is based on color components and color values associated with the pixel by the color model associated with the image. Alternatively the value identifying a color associated with a pixel in the portion may be based on the color components and the color values associated with the pixel as well as color components and color values associated with additional pixels within the portion that are within a threshold distance of the pixel. In other embodiments the identified value is based on color components associated with the pixel and satisfies one or more criteria e.g. less than a threshold greater than a threshold .

Based on the values identifying colors associated with pixels within the portion the digital magazine server determines a measure of diversity of color within the portion. The measure of diversity of color within the portion describes differences between colors associated with pixels within the portion. In one embodiment the measure of diversity of color within the portion is an average of difference between values associated with different pairs of adjacent pixels within the portion. As another example the measure of diversity of color is an average difference between values associated with various pixels in the portion and a baseline value. Alternatively the measure of diversity of color is a variance of identified values associated with various pixels in the portion differences between identified values associated with various pixels a difference between a value based on the identified values associated with various pixels e.g. an average of the identified values and a threshold value or any suitable value.

The digital magazine server determines whether the measure of diversity of color within the portion exceeds a threshold value. If the measure of diversity of color within the portion is an average difference between identified values associated with adjacent pixels within the portion the threshold value specifies a maximum difference between identified values hence if the measure of diversity of color is less than the maximum difference pixels within the portion are determined to be associated with the same color or with similar colors. In another embodiment the measure of diversity of color is an average of the identified values for pixels in the portion and the threshold value is a color value the digital magazine server determines whether the measure of diversity of color is within a specified amount of the threshold value. If the measure of diversity is within the specified amount of the threshold value the digital magazine server determines the color associated with pixels within the portion matches the color value specified by the threshold value which indicates a common color is associated with pixels in the portion.

Responsive to determining the measure of diversity of color does not exceed the threshold value the digital magazine server stores information indicating the portion of the image does not include content and identifies an additional portion of the image within the threshold distance from the portion of the image. The additional portion is identified as described above. However if the digital magazine server determines the measure of diversity of color exceeds the threshold value information indicating the portion of the image includes content may be stored in association with the image.

The figures depict various embodiments of the present invention for purposes of illustration only. One skilled in the art will readily recognize from the following discussion that alternative embodiments of the structures and methods illustrated herein may be employed without departing from the principles of the invention described herein.

A digital magazine server retrieves content from one or more sources and generates a personalized customizable digital magazine for a user based on the retrieved content. The generated digital magazine is retrieved by a digital magazine application executing on a computing device such as a mobile communication device tablet computer or any other suitable computing system and presented to the user. For example based on selections made by the user and or on behalf of the user the digital server application generates a digital magazine including one or more sections including content items retrieved from a number of sources and personalized for the user. The generated digital magazine allows the user to more easily consume content that interests and inspires the user by presenting content items in an easily navigable interface via a computing device.

The digital magazine may be organized into a number of sections that each include content having a common characteristic e.g. content obtained from a particular source . For example a section of the digital magazine includes articles from an online news source such as a website for a news organization another section includes articles from a third party curated collection of content associated with a particular topic e.g. a technology compilation and an additional section includes content obtained from one or more accounts associated with the user and maintained by one or more social networking systems. For purposes of illustration content included in a section is referred to herein as content items or articles which may include textual articles pictures videos products for sale user generated content e.g. content posted on a social networking system advertisements and any other types of content capable of display within the context of a digital magazine.

A source is a computing system capable of providing various types of content to a client device . Examples of content provided by a source include text images video or audio on web pages web feeds social networking information messages or other suitable data. Additional examples of content include user generated content such as blogs tweets shared images video or audio social networking posts and social networking status updates. Content provided by a source may be received from a publisher e.g. stories about news events product information entertainment or educational material and distributed by the source or a source may be a publisher of content it generates. For convenience content from a source regardless of its composition may be referred to herein as an article a content item or as content. A content item may include various types of content such as text images and video.

The sources communicate with the client device and the digital magazine server via the network which may comprise any combination of local area and or wide area networks using both wired and or wireless communication systems. In one embodiment the network uses standard communications technologies and or protocols. For example the network includes communication links using technologies such as Ethernet 802.11 worldwide interoperability for microwave access WiMAX G G code division multiple access CDMA digital subscriber line DSL etc. Examples of networking protocols used for communicating via the network include multiprotocol label switching MPLS transmission control protocol Internet protocol TCP IP hypertext transport protocol HTTP simple mail transfer protocol SMTP and file transfer protocol FTP . Data exchanged over the network may be represented using any suitable format such as hypertext markup language HTML or extensible markup language XML . In some embodiments all or some of the communication links of the network may be encrypted using any suitable technique or techniques.

The client device is one or more computing devices capable of receiving user input as well as transmitting and or receiving data via the network . In one embodiment the client device is a conventional computer system such as a desktop or a laptop computer. Alternatively the client device may be a device having computer functionality such as a personal digital assistant PDA a mobile telephone a smartphone or another suitable device. In one embodiment the client device executes an application allowing a user of the client device to interact with the digital magazine server . For example an application executing on the client device communicates instructions or requests for content items to the digital magazine server to modify content presented to a user of the client device . As another example the client device executes a browser that receives pages from the digital magazine server and presents the pages to a user of the client device . In another embodiment the client device interacts with the digital magazine server through an application programming interface API running on a native operating system of the client device such as IOS or ANDROID . While shows a single client device in various embodiments any number of client devices may communicate with the digital magazine server .

A display device included in the client device presents content items to a user of the client device . Examples of the display device include a liquid crystal display LCD an organic light emitting diode OLED display an active matrix liquid crystal display AMLCD or any other suitable device. Different client devices may have display devices with different characteristics. For example different client devices have display devices with different display areas different resolutions or differences in other characteristics.

One or more input devices included in the client device receive input from the user. Different input devices may be included in the client device . For example the client device includes a touch sensitive display for receiving input data commands or information from a user. Using a touch sensitive display allows the client device to combine the display device and an input device simplifying user interaction with presented content items. In other embodiments the client device may include a keyboard a trackpad a mouse or any other device capable of receiving input from a user. In another example the input device is configured to receive information from a user of the client device through a touchless interface. Examples of a touchless interface include sensors such as an image capture device to receive gestures from a client device user without the user physically contacting the display device or the client device . Additionally the client device may include multiple input devices in some embodiments. Inputs received via the input device may be processed by a digital magazine application associated with the digital magazine server and executing on the client device to allow a client device user to interact with content items presented by the digital magazine server .

The digital magazine server receives content items from one or more sources generates pages in a digital magazine by processing the received content and provides the pages to the client device . As further described below in conjunction with the digital magazine server generates one or more pages for presentation to a user based on content items obtained from one or more sources and information describing organization and presentation of content items. For example the digital magazine server determines a page layout specifying positioning of content items relative to each other based on information associated with a user and generates a page including the content items arranged according to the determined layout for presentation to the user via the client device . This allows the user to access content items via the client device in a format that enhances the user s interaction with and consumption of the content items. For example the digital magazine server provides a user with content items in a format similar to the format used by print magazines. By presenting content items in a format similar to a print magazine the digital magazine server allows a user to interact with content items from multiple sources via the client device with less inconvenience from horizontally or vertically scrolling to access various content items.

Each user of the digital magazine server is associated with a user profile which is stored in the user profile store . A user profile includes declarative information about the user that was explicitly shared by the user and may also include profile information inferred by the digital magazine server . In one embodiment a user profile includes multiple data fields each describing one or more attributes of the corresponding social networking system user. Examples of information stored in a user profile include biographic demographic and other types of descriptive information such as gender hobbies or preferences location or other suitable information. A user profile in the user profile store also includes data describing interactions by a corresponding user with content items presented by the digital magazine server . For example a user profile includes a content item identifier a description of an interaction with the content item corresponding to the content item identifier and a time when the interaction occurred.

While user profiles in the user profile store are frequently associated with individuals allowing individuals to provide and receive content items via the digital magazine server user profiles may also be stored for entities such as businesses or organizations. This allows an entity to provide or access content items via the digital magazine server . An entity may post information about itself about its products or provide other content items associated with the entity to users of the digital magazine server . For example users of the digital magazine server may receive a digital magazine or section including content items associated with an entity via the digital magazine server .

The template store includes page templates each describing a spatial arrangement layout of content items relative to each other on a page for presentation by a client device . A page template includes one or more slots each configured to present one or more content items. In some embodiments slots in a page template may be configured to present a particular type of content item or to present a content item having one or more specified characteristics. For example a slot in a page template is configured to present an image while another slot in the page template is configured to present text data. Each slot has a size e.g. small medium or large and an aspect ratio. One or more page templates may be associated with types of client devices allowing content items to be presented in different relative locations and with different sizes when the content items are viewed using different client devices . Additionally page templates may be associated with sources allowing a source to specify the format of pages presenting content items received from the source . For example an online retailer is associated with a page template to allow the online retailer to present content items via the digital magazine server with a specific organization. Examples of page templates are further described in U.S. patent application Ser. No. 13 187 840 filed on Jul. 21 2011 which is hereby incorporated by reference in its entirety.

The content store stores objects that each represent various types of content. For example the content store stores content items received from one or more sources within a threshold time of a current time. Examples of content items stored by the content store include a page post a status update a photograph a video a link an article video data audio data a check in event at a location or any other type of content. A user may specify a section including content items having a common characteristic and the common characteristic is stored in the content store along with an association with the user profile or the user specifying the section.

The layout engine retrieves content items from one or more sources or from the content store and generates a page including the content items based on a page template from the template store . Based on the retrieved content items the layout engine may identify candidate page templates from the template store score the candidate page templates based on characteristics of the slots in different candidate page templates and based on characteristics of the content items. Based on the scores associated with candidate page templates the layout engine selects a page template and associates the retrieved content items with one or more slots to generate a page where the retrieved content items are presented relative to each other and sized based on their associated slots. When associating a content item with a slot the layout engine may associate the content item with a slot configured to present a specific type of content item or to present content items having one or more specified characteristics. An example of using a page template to present content items is further described in U.S. patent application Ser. No. 13 187 840 filed on Jul. 21 2011 which is hereby incorporated by reference in its entirety.

In some embodiments the layout engine also identifies portions of an image obtained from a source or from the content store that do not include content. For example the image may be included in a content item or a content item itself may be the image. The image comprises a set of pixels and the layout engine identifies a portion of the image including a set of pixels that are within a threshold distance from a border or a feature of the image. A value is identified for various pixels within the region where the value associated with a pixel within the portion identifies a color associated with the pixel. The layout engine determines a measure of diversity of color within the portion based on the identified values associated with various pixels in the portion. In some embodiments the measure of diversity of color specifies a difference between colors associated with various pixels within the portion. Alternatively the measure of diversity identifies a color associated with the portion determined from the values associated with pixels within the portion. Based on the measure of diversity of color the digital magazine server determines whether pixels in the portion are associated with a common color. For example the measure of diversity of color is an average difference between values associated with pairs of pixels in the portion e.g. pairs of adjacent pixels in the portion and the layout engine determines whether the measure of diversity of color exceeds a threshold value specifying a maximum difference between values. If the measure of diversity of color does not exceed the threshold value the layout engine determines the portion includes pixels having a common color stores information indicating that the portion does not include content and identifies an additional portion of the image within a threshold distance of the portion of the image. However in the preceding example if the measure of diversity of color exceeds the threshold value the layout engine stores information indicating the portion of the image includes content. Identification of a portion of an image that does not include content is further described below in conjunction with .

The connection generator monitors interactions between users and content items presented by the digital magazine server . Based on the interactions the connection generator determines connections between various content items connections between users and content items or connections between users of the digital magazine server . For example the connection generator identifies when users of the digital magazine server provide feedback about a content item access a content item share a content item with other users or perform other actions with content items. In some embodiments the connection generator retrieves data describing user interaction with content items from the user s user profile in the user profile store . Alternatively user interactions with content items are communicated to the connection generator when the interactions are received by the digital magazine server . The connection generator may account for temporal information associated with user interactions with content items. For example the connection generator identifies user interactions with a content item within a specified time interval or applies a decay factor to identified user interactions based on times associated with interactions. The connection generator generates a connection between a user and a content item if the user s interactions with the content item satisfy one or more criteria. In one embodiment the connection generator determines one or more weights specifying a strength of the connection between the user and the content item based on user interactions with the content item that satisfy one or more criteria. Generation of connections between a user and a content item is further described in U.S. patent application Ser. No. 13 905 016 filed on May 29 2013 which is hereby incorporated by reference in its entirety.

If multiple content items are connected to a user the connection generator establishes implicit connections between each of the content items connected to the user. In one embodiment the connection generator maintains a user content graph identifying the implicit connections between content items connected to a user. In one embodiment weights associated with connections between a user and content items are used to determine weights associated with various implicit connections between content items. User content graphs for multiple users of the digital magazine server are combined to generate a global content graph describing connections between various content items provided by the digital magazine server based on user interactions with various content items. For example the global content graph is generated by combining user content graphs based on mutual connections between various content items in user content graphs.

In one embodiment the connection generator generates an adjacency matrix from the global content graph or from multiple user content graphs and stores the adjacency matrix in the connection store . The adjacency matrix describes connections between content items. For example the adjacency matrix includes identifiers of content items and weights representing the strength or closeness of connections between content items based on the global content graph. As an example the weights indicate a degree of similarity in subject matter or similarity of other characteristics associated with various content items. In other embodiments the connection store includes various adjacency matrices determined from various user content graphs the adjacency matrices may be analyzed to generate an overall adjacency matrix for content items provided by the digital magazine server . Graph analysis techniques may be applied to the adjacency matrix to rank content items to recommend content items to a user or to otherwise analyze relationships between content items. An example of the adjacency matrix is further described in U.S. patent application Ser. No. 13 905 016 filed on May 29 2013 which is hereby incorporated by reference in its entirety.

In addition to identifying connections between content items the connection generator may also determine a social proximity between users of the digital magazine server based on interactions between users and content items. The digital magazine server determines social proximity or social distance between users using a variety of techniques. For example the digital magazine server analyzes additional users connected to each of two users of the digital magazine server within a social networking system to determine the social proximity of the two users. In another example the digital magazine server determines social proximity between a first and a second user by analyzing the first user s interactions with content items posted by the second user whether the content item is posted using the digital magazine server or on another social networking system. Additional examples for determining social proximity between users of the digital magazine server are described in U.S. patent application Ser. No. 13 905 016 filed on May 29 2013 which is incorporated by reference in its entirety. In one embodiment the connection generator determines a connection confidence value between a user and an additional user of the digital magazine server based on the user s and the additional user s common interactions with particular content items. The connection confidence value may be a numerical score representing a measure of closeness between the user and the additional user. For example a larger connection confidence value indicates a greater similarity between the user and the additional user. In one embodiment if a user has at least a threshold connection confidence value with another user the digital magazine server stores a connection between the user and the additional user in the connection store .

Using data from the connection store the recommendation engine identifies content items from one or more sources for recommending to a digital magazine server user. Hence the recommendation engine identifies content items potentially relevant to a user. In one embodiment the recommendation engine retrieves data describing interactions between a user and content items from the user s user profile and data describing connections between content items and or connections between users from the connection store . In one embodiment the recommendation engine uses stored information describing content items e.g. topic sections subsections and interactions between users and various content items e.g. views shares saved links topics read or recent activities to identify content items that may be relevant to a digital magazine server user. For example content items having an implicit connection of at least a threshold weight to a content item with which the user interacted are recommended to the user. As another example a the recommendation engine presents a user with content items having one or more attributes in common with a content item with which an additional user having a threshold connection confidence score with the user interacted. Recommendations for additional content items may be presented to a user when the user views a content item using the digital magazine may be presented as a notification to the user by the digital magazine server or may be presented to the user through any suitable communication channel.

In one embodiment the recommendation engine applies various filters to content items received from one or more sources or from the content store to efficiently provide a user with recommended content items. For example the recommendation engine analyzes attributes of content items in view of characteristics of a user retrieved from the user s user profile. Examples of attributes of content items include a type e.g. image story link video audio etc. a source from which a content item was received time when a content item was retrieved and subject matter of a content item. Examples of characteristics of a user include biographic information about the user users connected to the user and interactions between the user and content items. In one embodiment the recommendation engine analyzes attributes of content items in view of a user s characteristics for a specified time period to generate a set of recommended content items. The set of recommended content items may be presented to the user or may be further analyzed based on user characteristics and on content item attributes to generate more refined set of recommended content items. A setting included in a user s user profile may specify a length of time that content items are analyzed before identifying recommended content items to the user allowing a user to balance refinement of recommended content items with time used to identify recommended content items.

The search module receives a search query from a user and retrieves content items from one or more sources based on the search query. For example content items having at least a portion of an attribute matching at least a portion search query are retrieved from one or more sources . The user may specify sources from which content items are received through settings maintained by the user s user profile or by identifying one or more sources in the search query. In one embodiment the search module generates a section of the digital magazine including the content items identified based on the search query as the identified content items have a common attribute of their association with the search query. Presenting identified content items identified from a search query allows a user to more easily identify additional content items at least partially matching the search query when additional content items are provided by sources .

To more efficiently identify content items based on search queries the search module may index content items groups or sections of content items and user profile information. In one embodiment the index includes information about various content items such as author source topic creation data time user interaction information document title or other information capable of uniquely identifying the content item. Search queries are compared to information maintained in the index to identify content items for presentation to a user. The search module may present identified content items based on a ranking. One or more factors associated with the content items may be used to generate the ranking Examples of factors include global popularity of a content item among users of the digital magazine server connections between users interacting with a content item and the user providing the search query and information from a source . Additionally the search module may assign a weight to the index information associated with each content item selected based on similarity between the index information and a search query and rank the content items based on their weights. For example content items identified based on a search query are presented in a section of the digital magazine in an order based in part on the ranking of the content items.

To increase user interaction with the digital magazine the interface generator maintains instructions associating received input with actions performed by the digital magazine server or by a digital magazine application executing on a client device . For example instructions maintained by the interface generator associate types of inputs or specific inputs received via an input device of a client device with modifications to content presented by a digital magazine. As an example if the input device is a touch sensitive display the interface generator includes instructions associating different gestures with navigation through content items or presented via a digital magazine. Instructions from the interface generator are communicated to a digital magazine application or other application executing on a client device on which content from the digital magazine server is presented. Inputs received via an input device of the client device are processed based on the instructions when content items are presented via the digital magazine server is presented to simplify user interaction with content presented by the digital magazine server .

The web server links the digital magazine server via the network to the one or more client devices as well as to the one or more sources . The web server serves web pages as well as other content such as JAVA FLASH JSON XML and so forth. The web server may retrieve content item from one or more sources . Additionally the web server communicates instructions for generating pages of content items from the layout engine and instructions for processing received input from the interface generator to a client device for presentation to a user. The web server also receives requests for content or other information from a client device and communicates the request or information to components of the digital magazine server to perform corresponding actions. Additionally the web server may provide application programming interface API functionality to send data directly to native client device operating systems such as IOS ANDROID WEBOS or BlackberryOS.

For purposes of illustration describes various functionalities provided by the digital magazine server . However in other embodiments the above described functionality may be provided by a digital magazine application executing on a client device or may be provided by a combination of the digital magazine server and a digital magazine application executing on a client device . In one embodiment the digital magazine server identifies a portion in an image that does not include content based on a measure of diversity of color associated with the portion of the image based on colors associated with pixels in the portion. For example the layout engine determines whether the portion of the image includes or does not include content based on the measure of diversity of color. In another embodiment a digital magazine application executing on the client device identifies the portion in the image without content based on the measure of diversity. Alternatively the digital magazine server and the client device operate in conjunction with each other to identify a portion of the image that does not include content based on the measure of diversity of color for the portion. For example certain functionality e.g. identifying the portion of the image is performed by the digital magazine server while other functionality e.g. presenting portions of the image including content is performed by a digital magazine application executing on the client device .

In the example of when a digital magazine server generates a page for presentation to a user the digital magazine server populates slots in a page template with content items. Information identifying the page template and associations between content items and slots in the page template is stored and used to generate the page. For example to present a page to a user the layout engine identifies the page template from the template store and retrieves content items from one or more sources or from the content store . The layout engine generates data or instructions associating content items with slots within the page template . Hence the generated page includes various content regions presenting one or more content items associated with a slot in a location specified by the slot.

A content region may present image data text data a combination of image and text data or any other information retrieved from a corresponding content item. For example in the content region A represents a table of contents identifying sections of a digital magazine and content associated with the various sections are presented in content regions B H. For example content region A includes text or other data indicating that the presented data is a table of contents such the text Cover Stories Featuring followed by one or more identifiers associated with various sections of the digital magazine. In one embodiment an identifier associated with a section describes a characteristic common to at least a threshold number of content items in the section. For example an identifier refers to the name of a user of social network from which content items included in the section are received. As another example an identifier associated with a section specifies a topic an author a publisher e.g. a newspaper a magazine or other characteristic associated with at least a threshold number of content items in the section. Additionally an identifier associated with a section may further specify content items selected by a user of the digital magazine server and organized as a section. Content items included in a section may be related topically and include text and or images related to the topic.

Sections may be further organized into subsections with content items associated with one or more subsections presented in content regions. Information describing sections or subsections such as a characteristic common to content items in a section or subsection may be stored in the content store and associated with a user profile to simplify generation of a section or subsection for the user. A page template associated with a subsection may be identified and slots in the page template associated with the subsection used to determine presentation of content items from the subsection relative to each other. Referring to the content region H includes a content item associated with a newspaper to indicate a section including content items retrieved from the newspaper. When a user interacts with the content region a page template associated with the section is retrieved as well as content items associated with the section. Based on the page template associated with the section and the content items the digital magazine server generates a page presenting the content items based on the layout described by the slots of the page template. For example in the section page includes content regions presenting content items associated with the section. The content regions may include content items associated with various subsections including content items having one or more common characteristics e.g. topics authors etc. . Hence a subsection may include one or more subsections allowing hierarchical organization and presentation of content items by a digital magazine.

The digital magazine server obtains an image that includes a set of pixels. For example the digital magazine server obtains an image from a source from another user of the digital magazine server or from the digital magazine server. A color model represents the image by associating one or more color components each specifying a color and color values specifying an intensity of the one or more colors specified by the color components with each pixel in the image. Example color models include red green blue RGB cyan magenta yellow black CMYK International Commission on Illumination cone response luminosity and blue stimulation CIE XYZ hue saturation value HSV hue saturation lightness HSL or any other suitable mathematical model representing color. For example in an image represented using the RGB color model each pixel is associated with three color components having color values representing intensity of red green and blue colors. As another example in an image represented using the CMYK color model each pixel is associated with four color components having color values representing intensity of cyan magenta yellow and black colors.

A portion of the image within a threshold distance from a border of the image is identified by the digital magazine server . One or more pixels from the set of pixels are included in the portion of the image. In some embodiments the portion of the image is identified so it includes at least at threshold number of pixels. The border of the image may be a boundary of the image hence an image includes multiple borders e.g. an upper border a lower border a right border and a left border . However the digital magazine server may identify a portion of the image within a threshold distance of an edge included in the image from a feature included in the image e.g. an object text etc. or from any suitable characteristic of the image in some embodiments. The threshold distance from the border or from a feature or an edge may be a number of pixels from the border a number of pixels from the border at a specified angle a number of pixels from the border in a specified direction e.g. horizontal vertical diagonal or any other suitable distance from the border. For example if the threshold distance is ten pixels from an upper border perpendicular to the upper border the identified portion of the image includes pixels within ten pixels between the upper border and a plane parallel to the upper border and separated from the upper border by ten pixels along an axis perpendicular to the upper border. In some embodiments the digital magazine server identifies the portion so the portion includes at least a threshold number of pixels. The threshold number of pixels may be specified by one or more settings maintained by the digital magazine server . In some embodiments the threshold number of pixels may be a percentage of a number of pixels included in the image.

The digital magazine server identifies values specifying one or more colors associated with one or more pixels included in the portion. For example the digital magazine server identifies a value associated with each pixel included in the portion. In another embodiment the digital magazine server samples a subset of pixels included in the portion and identifies a value associated with each pixel in the subset of the portion e.g. the subset of pixels is determined by sampling every N pixels within the portion for computational efficiency or by pseudorandomly sampling pixels included in the portion . As described above the image is represented using a color model that associates one or more color components as well as color values with each pixel in the image. In one embodiment a value associated with a pixel in the portion is based on the color values and color components associated with the pixel by the color model associated with the image. For example the identified value is a maximum color value from the color values associated with color components associated with the pixel or is a minimum color value from the color values associated with color components associated with the pixel. As another example the identified value of a pixel is an average of the color values associated with the color components associated with the pixel. Alternatively the value identified for a pixel is a difference between a maximum color value associated with a color component and a minimum color value associated with a color component associated with the pixel or a difference between various color values associated with color components associated with the pixel. Alternatively the value identified for a pixel is one or more color values associated with the pixel satisfying one or more criteria e.g. greater than a threshold value less than a threshold value equal to a value . In other embodiments the value identified for a pixel is based on the color values and color components associated with the pixel using any suitable relationship.

Based on the identified values for pixels within the portion of the image the digital magazine server determines a measure of diversity of color within the portion of the image. The measure of diversity of color within the portion provides an indication of a number of different colors associated with pixels within the portion. In one embodiment the measure of diversity of color within the portion is a variance of the identified values. Alternatively the measure of diversity of color within the portion is an average difference between values identified for different pairs of pixels within the portion e.g. adjacent pixels or another value based on differences between values identified for various pixels within the portion. In another embodiment the measure of diversity of color within the portion is an average of differences between values identified for pixels within the portion and a specified value or is a difference between an average of the values identified for pixels within the region and the specified value. For example the measure of diversity is a difference between a minimum value identified for a pixel within the region and a maximum value identified for a pixel within the portion.

The digital magazine server determines whether the measure of diversity of color within the portion exceeds a threshold value. If the measure of diversity of color within the portion is an average difference between identified values associated with various pairs of pixels within the portion e.g. adjacent pixels the threshold value specifies a maximum difference between identified values hence if the measure of diversity of color is less than the maximum difference pixels within the portion are determined to be associated with the same color or with similar colors. In this example if the measure of diversity of color exceeds the maximum difference the digital magazine server determines the portion includes multiple colors which indicates the portion includes content.

Responsive to determining the measure of diversity of color does not exceed the threshold value the digital magazine server stores information indicating the portion does not include content and identifies an additional portion of the image within the threshold distance from the portion of the image. The additional portion may be identified based on the threshold distance or based on an additional threshold distance from the portion of the image. If the measure of diversity of color does not exceed the threshold value the values identified for pixels in the portion indicate that the pixels in the portion have a common color or have colors within a threshold value of each other. A uniform color within the portion indicates the portion does not include content for presentation e.g. the portion includes a border or frame .

The additional portion is identified as described above. For example the portion is a row parallel to a border of the image and the additional portion is another row parallel to the row. In other embodiments the additional portion is identified based on a threshold distance from an additional border or feature of the image. For example the portion is a number of rows parallel to a border and an additional portion of the image within a threshold distance or within an additional threshold distance of another border of the image is identified. The additional portion of the image is analyzed as described above to determine whether the additional portion includes pixels having a common color. In some embodiments the digital magazine server identifies additional portions of the image that increase one or more dimensions of the identified portion of the image until one or more criteria are satisfied by the measure of diversity of color of an additional portion of the image. For example the digital magazine server stops identifying additional portions of the image when an additional portion of the image has a measure of diversity of color that equals a threshold value.

In one embodiment the digital magazine server stores information associated with the image indicting the portion includes content if the measure of diversity of color exceeds the threshold value. Determining the measure of diversity of color exceeds the threshold value indicates the portion includes pixels having various colors which indicates the portion includes content of the image for presentation to the user. Alternatively the digital magazine server identifies an additional portion of the image as described above without storing information associated with the image in response to determining the measure of color diversity exceeds the threshold value.

When generating content for presentation to a user the digital magazine server may use information associated with the image identifying portions of the image that do not include content. For example when identifying a slot of a page template for presenting the image the digital magazine server may use dimensions of the image including content rather than the dimensions of the image as a whole. This may improve presentation of the content included in the image when presented via the digital magazine. In some embodiments the digital magazine server determines dimensions of the image for selecting a slot within a page template by excluding portions of the image identified as not including content and including at least a number of pixels.

The foregoing description of the embodiments has been presented for the purpose of illustration it is not intended to be exhaustive or to limit the patent rights to the precise forms disclosed. Persons skilled in the relevant art can appreciate that many modifications and variations are possible in light of the above disclosure.

Some portions of this description describe the embodiments in terms of algorithms and symbolic representations of operations on information. These algorithmic descriptions and representations are commonly used by those skilled in the data processing arts to convey the substance of their work effectively to others skilled in the art. These operations while described functionally computationally or logically are understood to be implemented by computer programs or equivalent electrical circuits microcode or the like. Furthermore it has also proven convenient at times to refer to these arrangements of operations as modules without loss of generality. The described operations and their associated modules may be embodied in software firmware hardware or any combinations thereof.

Any of the steps operations or processes described herein may be performed or implemented with one or more hardware or software modules alone or in combination with other devices. In one embodiment a software module is implemented with a computer program product comprising a computer readable medium containing computer program code which can be executed by a computer processor for performing any or all of the steps operations or processes described.

Embodiments may also relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes and or it may comprise a general purpose computing device selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a non transitory tangible computer readable storage medium or any type of media suitable for storing electronic instructions which may be coupled to a computer system bus. Furthermore any computing systems referred to in the specification may include a single processor or may be architectures employing multiple processor designs for increased computing capability.

Embodiments may also relate to a product that is produced by a computing process described herein. Such a product may comprise information resulting from a computing process where the information is stored on a non transitory tangible computer readable storage medium and may include any embodiment of a computer program product or other data combination described herein.

Finally the language used in the specification has been principally selected for readability and instructional purposes and it may not have been selected to delineate or circumscribe the inventive subject matter. It is therefore intended that the scope of the patent rights be limited not by this detailed description but rather by any claims that issue on an application based hereon. Accordingly the disclosure of the embodiments is intended to be illustrative but not limiting of the scope of the patent rights which is set forth in the following claims.

