---

title: Implantable medical devices storing graphics processing data
abstract: In one example, a device includes a telemetry module configured to retrieve graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data and that is associated with delivering therapy to a therapy target of a patient, and a control unit configured to apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient, wherein the anatomical feature comprises the therapy target for an implantable medical device, and to cause a display unit of a user interface to display the image, wherein the image of the anatomical feature is specific to the patient. The graphics processing data may include a list of vertices or a transform to be applied to a non-patient-specific anatomical atlas. The data may also include a location of a therapy element of the implantable medical device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09055974&OS=09055974&RS=09055974
owner: Medtronic, Inc.
number: 09055974
owner_city: Minneapolis
owner_country: US
publication_date: 20141204
---
This application is a divisional of U.S. patent application Ser. No. 13 786 610 filed Mar. 6 2013 which is a divisional of U.S. patent application Ser. No. 13 086 991 filed Apr. 14 2011 the entire contents of both applications are hereby incorporated by reference.

This disclosure relates to implantable medical devices IMDs and more particularly to processing of images used in conjunction with IMDs.

A variety of implantable medical devices IMDs are used for chronic i.e. long term delivery of therapy or diagnostic monitoring to patients suffering from a variety of conditions such as cardiac dysfunction chronic pain tremor Parkinson s disease epilepsy urinary or fecal incontinence sexual dysfunction obesity spasticity or gastroparesis. As examples electrical stimulation generators are used for chronic delivery of electrical stimulation therapies such as cardiac pacing cardiac cardioversion defibrillation neurostimulation muscle stimulation or the like. Pumps or other fluid delivery devices may be used for chronic delivery of therapeutic fluids such as drugs proteins growth factors pain relief agents or genetic agents. Typically such devices provide therapy continuously or periodically according to parameters contained within a program. A program may comprise respective values for each of a plurality of parameters specified by a clinician. The devices may receive the program from a programmer controlled by the clinician.

Examples of such implantable medical devices include implantable fluid delivery devices implantable neurostimulators implantable cardioverters implantable cardiac pacemakers implantable cardioverter defibrillators and cochlear implants. Typically such devices are implanted in a patient to deliver therapy to or measure a signal from a target site within the patient under specified conditions on a recurring basis.

For example an implantable fluid delivery device may be implanted at a location in the body of a patient and deliver a fluid medication through a catheter to a selected delivery site in the body. Similarly an implantable electrical stimulator can be implanted to deliver electrical stimulation therapy to a patient at a selected site. For example an implantable electrical stimulator delivers electrical therapy to a target tissue site within a patient with the aid of one or more medical leads that include electrodes. An electrical stimulator may deliver therapy to a patient via selected combinations of electrodes.

Precise placement of a lead or catheter or at least knowledge of positioning of the lead or catheter may be helpful in programming and delivering therapy. As one example knowledge of the positions of electrodes carried by one or more leads may be helpful in formulating efficacious therapy both upon implantation and over the course of therapy following implantation. As another example the position of the distal outlet of a catheter may be helpful in determining proximity to a therapeutic target both upon implantation and over the course of therapy following implantation. Knowledge of the location of a device element may further aid in the interpretation of sensed physiologic data.

In general this disclosure describes techniques for storing data for reproducing an image of an anatomical feature of a patient. The techniques of this disclosure are directed to producing a patient specific image that is an image of the anatomical feature of the patient as it exists within the patient. The image may include a representation of a therapy element such as a lead or a catheter at the location of the anatomical feature at which the therapy element is implanted.

Rather than storing image data itself or an encoded representation of the image data the techniques of this disclosure are directed to storing graphics processing data that can be applied during a rendering process to reproduce the image. In this manner a clinician may view the details of the anatomical feature specific to the patient as well as the location of the therapy element within the patient relative to the anatomical feature to monitor and or adjust the therapy delivered by an implantable medical device coupled to the therapy element.

In one example an implantable medical device includes a memory configured to store data for a program of the implantable medical device a therapy unit configured to perform at least one of delivery of therapy and sensing of a physiological signal at a therapy target of an anatomical feature of a patient and an interface configured to receive the data for the program and to store the data for the program to the memory wherein the interface is further configured to receive graphics processing data comprising data that when applied during a rendering process produces an image of the anatomical feature of the patient wherein the implantable medical device is not configured to perform the rendering process using the graphics processing data.

In another example a method includes retrieving graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient applying the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and displaying the image wherein the image of the anatomical feature is specific to the patient.

In another example a device includes a telemetry module configured to retrieve graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data and that is associated with at least one of delivering therapy and sensing a physiological signal at to a therapy target of a patient and a control unit configured to apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and to cause a display unit of a user interface to display the image wherein the image of the anatomical feature is specific to the patient.

In another example a computer readable medium such as a computer readable storage medium contains e.g. is encoded with instructions that when executed cause a processor to retrieve graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and cause a display unit comprising a user interface to display the image wherein the image of the anatomical feature is specific to the patient.

In another example a system includes an implantable medical device and an image manipulation device. The implantable medical device includes a memory that stores graphics processing data wherein the implantable medical device is configured to at least one of deliver therapy and sense a physiological signal at a therapy target of a patient and wherein the implantable medical device is not configured to perform a rendering process using the graphics processing data. The image manipulation device is configured to retrieve the graphics processing data from the memory of the implantable medical device and to perform the rendering process to apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for the implantable medical device and to cause a user interface of a display unit to display the image wherein the image of the anatomical feature is specific to the patient.

In another example a method includes obtaining information representative of an anatomical feature of a patient wherein the anatomical feature comprises a therapy target for an implantable medical device determining graphics processing data based on the obtained information wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient and storing the graphics processing data to a device that is not configured to perform the rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at the therapy target of the patient.

In another example a device includes an interface configured to obtain information representative of an anatomical feature of a patient wherein the anatomical feature comprises a therapy target for an implantable medical device and a control unit configured to determine graphics processing data based on the obtained information wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient and store the graphics processing data to a device that is not configured to perform the rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at the therapy target of the patient.

In another example a computer readable medium includes instructions that when executed cause a processor to obtain information representative of an anatomical feature of a patient wherein the anatomical feature comprises a therapy target for an implantable medical device determine graphics processing data based on the obtained information wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient and store the graphics processing data to a device that is not configured to perform the rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at the therapy target of the patient.

In another example an implantable medical device includes a therapy unit configured to perform at least one of delivery of a therapy and measurement of physiologic signals at a therapy target of an anatomical feature of a patient and a memory comprising stored data for a program of the implantable medical device and graphics processing data wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient wherein the implantable medical device is not configured to perform the rendering process using the graphics processing data.

The details of one or more examples are set forth in the accompanying drawings and the description below. Other features objects and advantages will be apparent from the description and drawings and from the claims.

This disclosure describes techniques for producing a patient specific image that is an image of an anatomical feature of the patient as the anatomical feature exists within the patient. The image may include a representation of a therapy element such as a lead a leadless stimulator or a catheter at the location of the anatomical feature at which the therapy element is implanted. Rather than storing image data itself or an encoded representation of the image data the techniques of this disclosure are directed to storing graphics processing data that can be applied during a rendering process to produce the image.

The phrase graphics processing data as used in this disclosure refers to data that is rendered or applied during a rendering process. The term render is intended to refer to the process of producing pixel data which is to be displayed as a two dimensional image or a set of images arranged so as to create a three dimensional effect by a display device such as a computer monitor from graphics objects which may comprise two dimensional or three dimensional graphics objects. Graphics objects include graphics primitives such as points lines triangles rectangles and other polygons as well as structures made up of multiple primitives such as for example three dimensional meshes.

The rendering process is performed to generate pixel data such as values for red green blue triplet values for each pixel of an image from the graphics objects. In this manner the rendering process referred to by this disclosure is distinct from for example decoding an encoded representation of an image such as decoding a Joint Photographic Experts Group JPEG encoded image. That is whereas decoding an encoded image generally includes decoding encoded pixel data or other data generally representative of pixels of an image a rendering process generally includes generating pixel data from a higher order representation of data such as two or three dimensional graphics objects e.g. graphics primitives which may in some examples further take into account camera viewpoint lighting effects and other such factors. Though portions of the image actually displayed following the rendering process may result from decoding an encoded image at least some portion of the displayed image is generated from graphics processing data e.g. by applying the graphics processing data during a rendering process in accordance with the techniques of this disclosure.

The techniques of this disclosure may include generating a three dimensional model of an anatomical feature including a therapy target for a patient. The model of the anatomical feature may be patient specific. For example an image manipulation device may receive data from an imaging device such as a magnetic resonance imaging MRI machine a computed tomography CT machine a fluoroscopic imaging machine or an ultrasound imaging machine that captures images of the anatomical feature of the patient. The image manipulation device may then construct a patient specific model of the anatomical feature of the patient. The images used to construct the model may be captured after implanting an implantable medical device in the patient such that the images include a representation of a lead or catheter generally referred to herein as a therapy element of the implantable medical device at the anatomical feature.

In particular the techniques of this disclosure are directed to storing and retrieving graphics processing data to and from devices associated with delivering therapy to patients but that are not themselves configured to perform the rendering process using the graphics processing data. In some examples these techniques include storing the graphics processing data to an implantable medical device. In some examples these techniques include storing the graphics processing data to a patient programmer associated with the implantable medical device. In each case the device may store graphics processing data for use by a different device such as a clinician programmer or other computing device.

The graphics processing data as noted above may be applied during a rendering process to generate an image of the patient specific anatomical feature of the patient. In some examples a three dimensional mesh of the anatomical feature of the patient is created. The three dimensional mesh may be constructed from a plurality of graphics primitives e.g. triangles. Graphics primitives are typically defined using a list of vertices. For example a triangle graphics primitive is defined using three vertices. Accordingly the graphics processing data may comprise a list of vertices for graphics primitives corresponding to the three dimensional mesh. The list of vertices may also be referred to as a vertex array. Accordingly applying the graphics processing data during the rendering process may include rendering a graphics object defined by the graphics processing data in some examples.

In some examples the graphics processing data may include one or more transforms also referred to as transform functions or transform matrices. Transforms can be applied to a model such as an anatomical atlas to manipulate the model e.g. to translate the model e.g. move vertices of the model along a specified vector rotate the model e.g. rotate vertices of the model about a vector or scale the model e.g. increase or decrease distance between vertices of the model to change the size of the model along one or more axes . In these examples a patient specific model may be compared to an anatomical atlas. The anatomical atlas model may define a general non patient specific model of the anatomical feature e.g. representative of a median for a general population of patients. The techniques of this disclosure include calculating one or more transforms that when applied to the anatomical atlas model yield a model that substantially conforms to the patient specific model of the anatomical feature. In this manner the transforms may be used to represent differences between the patient specific model and the anatomical atlas model. The transforms may be applied during the rendering process. That is the anatomical atlas model may be transformed by the one or more transforms to produce a model which is rendered to produce a patient specific image of the anatomical feature of the patient. In this manner applying the graphics processing data during the rendering process may include transforming an anatomical model using transforms defined by the graphics processing data in some examples.

It is not uncommon for patients to visit various clinical care centers during treatment. Even when a patient returns to the same care center the care center may include a variety of different clinician programmer devices or other general computing devices which may be spread across locations or users. By storing the graphics processing data to a device associated with delivering therapy to a patient the techniques of this disclosure may ensure that a clinician is able to view an image of an anatomical feature of the patient so long as the patient is near the clinician. For example the clinician may use a clinician programmer also referred to as a physician programmer or other computing device to retrieve the graphics processing data from the device associated with delivering therapy to a patient e.g. an implantable medical device or a patient programmer device. After the clinician programmer retrieves the graphics processing data the clinician programmer may perform the rendering process applying the graphics processing data during the rendering process to produce a patient specific image of the anatomical feature of the patient being treated by the implantable medical device. Accordingly the clinician may then have access to a patient specific image which may more accurately reflect the patient s physiology than a more general anatomical atlas.

Moreover the graphics processing data may consume less memory than stored image data itself or even an encoded representation of the image data. For example stored image data for a head scan MRI may consume 20 30 Mbytes of data of data. Higher resolution scans or scans of larger body areas can increase storage size significantly. On the other hand a stored list of vertices in accordance with the techniques of this disclosure may consume approximately 45 kilobytes of data assuming a relatively high polygon count of 650 triangles defined by 1950 vertices. This data could be optimized e.g. by reducing the precision of the vertices to produce a list of vertices consuming only tens of kilobytes. Likewise a stored transform may consume only tens of hundreds of bytes of data. Even storing multiple transforms e.g. individual transforms per brain hemisphere or even per anatomical structure may yield data of less than a full kilobyte. Accordingly the techniques of this disclosure may provide advantages in terms of the amount of data stored by an implantable medical device and or patient programmer device. Because the graphics processing data can be represented using a lower amount of data the time required to download the graphics processing data to an implantable medical device e.g. via wireless telemetry may be significantly reduced over storing an image to the implantable medical device.

The techniques of this disclosure may also provide advantages over storing images on a remote server. In some cases a clinical care center may not have access to a remote server e.g. due to Internet connectivity being unavailable or due to restrictions that may block hardware not managed by clinic or hospital staff. Also storing data to a device associated with delivering therapy to a patient such as an implantable medical device or patient programmer may reduce privacy concerns that may arise by storing patient data on a remote server.

Programmable implantable medical devices are typically programmed using an external programming device sometimes known as a controller or programmer which can communicate with the implanted medical device through well known techniques such as wireless telemetry. An external controller or programmer can be used by a medical professional for example to change the therapeutic regimen by increasing or decreasing the amount of fluid medication delivered to the patient in the case of fluid delivery therapy or changing electrode stimulation patterns in the case of electrical stimulation. Typically a medical professional interacts with the external controller or programmer to set various parameters associated with the implantable medical device and then transmits or downloads those parameters to the implanted medical device. The external device may also record other information important to the delivery of the therapy. Some information may be stored in the implantable medical device and or the external programming device. Such information may include patient information implanted device information such as model volume implant location length of catheter or lead and other information specific to different devices.

During a programming session which may occur during implant of the medical device during a trial session or during a follow up session after the medical device is implanted in the patient a clinician may generate one or more therapy programs that provide efficacious therapy to the patient where each therapy program may define values for a set of therapy parameters. The clinician may refer to a patient specific image of an anatomical feature of the patient which may include a representation of the lead or catheter placement in a therapy target of the anatomical feature while programming the device.

Therapy system includes medical device programmer implantable medical device IMD lead extension and leads A and B with respective sets of electrodes . In the example shown in electrodes of leads A B collectively referred to as leads respectively are positioned to deliver electrical stimulation to a tissue site within brain such as a deep brain site under the dura mater of brain of patient . In this example IMD provides deep brain stimulation DBS therapy. In other examples IMD may provide other therapies such as for example spinal cord stimulation pelvic floor stimulation gastric stimulation occipital nerve stimulation cardiac stimulation intrathecal drug delivery intraparenchymal drug delivery intracerebroventricular drug delivery pelvic floor drug delivery and the like.

Although the example of illustrates leads in other examples IMD may be configured to deliver other types of therapy. For example IMD may comprise an implantable drug pump in some examples. In such examples rather than being coupled to leads such as leads IMD would be coupled to one or more catheters. This disclosure generally refers to the item coupled to IMD by which IMD delivers therapy e.g. stimulation therapy or chemical therapy to a therapy target of patient as a therapy element although the coupled item may also measure physiologic signals in addition to or instead of delivering therapy. Accordingly in various examples the therapy element may comprise one or more leads or one or more catheters. For purposes of example the discussion of refers to the specific example of leads . However it should be understood that the techniques of this disclosure may also be applied when the therapy element of IMD comprises e.g. a catheter.

In some examples delivery of stimulation to one or more regions of brain such as the subthalamic nucleus e.g. the dorsal subthalamic nucleus globus pallidus internal capsule thalamus or motor cortex may be an effective treatment to mitigate or even eliminate one or more symptoms of movement disorders. A movement disorder or other neurodegenerative impairment may include symptoms such as for example muscle control impairment motion impairment or other movement problems such as rigidity bradykinesia rhythmic hyperkinesia nonrhythmic hyperkinesia and akinesia. In some cases the movement disorder may be a symptom of Parkinson s disease. However the movement disorder may be attributable to other patient conditions.

Electrodes of leads may also be positioned to sense bioelectrical brain signals within brain of patient . In some examples some of electrodes may be configured to only sense bioelectrical brain signals and other electrodes may be configured to only deliver electrical stimulation to brain . In other examples some or all of electrodes are configured to both sense bioelectrical brain signals and deliver electrical stimulation to brain .

IMD includes a therapy module that includes a stimulation generator that generates and delivers electrical stimulation therapy to patient via a subset of electrodes of leads A and B respectively. The subset of electrodes includes at least one electrode and can include a plurality of electrodes. The subset of electrodes that are used to deliver electrical stimulation to patient and in some cases the polarity of the subset of electrodes may be referred to as a stimulation electrode combination or configuration. In some examples the stimulation electrode combination includes a first electrode positioned on a lead A or B and a reference electrode positioned relatively far from the first electrode e.g. unipolar stimulation or two or more electrodes positioned on one or more leads A B e.g. bipolar stimulation .

The stimulation electrode combination can be selected for a particular patient and patient condition based on a bioelectrical brain signal sensed within brain of patient and a physiological model which is specific to an anatomical feature such as brain of patient that is based on placement of electrodes of leads within the brain of the patient. The physiological model can be generated by a computing device e.g. a medical data computing device implemented in a general purpose computer or a medical device programmer executing instructions defining an algorithm that references a location of leads within brain relative to patient anatomy data. The locations of leads can be determined using any suitable technique such as based on a medical image generated using any suitable imaging modality e.g. computed tomography CT magnetic resonance imaging MRI x ray or fluoroscopy based on the stereotactic coordinates used to implant leads within brain based on correlations of signals sensed by IMD with anatomical structures expected to yield those signals correlations of stimulation effects at electrodes with anatomical structures expected to yield those effects or based on a clinician estimated location of leads within brain .

In other examples the stimulation electrode combination can be selected for a particular patient and patient condition based on a bioelectrical brain signal sensed within brain of patient and a physiological model that is based on placement of electrodes of another medical member such as a leadless electrical stimulator. Thus although described with respect to electrodes of leads the devices systems and techniques described herein can also be used to select a stimulation electrode combination based on placement of electrodes within brain of patient regardless of the type of component to which the electrodes are coupled. In such examples the physiological model can be generated by a computing device executing instructions defining an algorithm that references a location of the electrodes or the medical member comprising the electrodes within brain relative to patient anatomy data. The location of the electrodes or medical component can be determined using any suitable technique such as the techniques described with respect to leads .

Patient anatomy data indicates one or more characteristics of patient tissue proximate to implanted leads such as one or more anatomical structures proximate implanted leads . The patient anatomy data may include at least one of an anatomical image of a patient a reference anatomical image an anatomical atlas a tissue conductivity data set or a data set containing parameters of fluid dynamics governing distribution of an infused agent. The patient anatomy data may be specific to patient or may represent data for more than one patient e.g. model or averaged data of the anatomical structure and tissue conductivity of multiple patients. For example in some examples the patient anatomy data may include tissue conductivity data or other relevant tissue data that is typical for the particular lead location for the particular therapeutic application e.g. deep brain stimulation in the case of and may be but need not be specific to patient . Such data may consist of regions of anatomy that are associated with beneficial therapeutic effects target volumes or regions that are associated with negative outcomes side effect volumes as determined by analysis of population data sets. In some examples the computing device generates the patient anatomy data from an imaging modality such as but not limited to CT MRI x ray fluoroscopy and the like.

In some examples the bioelectrical signals sensed within brain may reflect changes in electrical current produced by the sum of electrical potential differences across brain tissue. Examples of bioelectrical brain signals include but are not limited to electrical signals generated from local field potentials LFP sensed within one or more regions of brain such as an electroencephalogram EEG signal or an electrocorticogram ECoG signal. Local field potentials however may include a broader genus of electrical signals within brain of patient .

In some examples the bioelectrical brain signals that are used to select a stimulation electrode combination may be sensed within the same region of brain as the target tissue site for the electrical stimulation or a different region of brain . As previously indicated these tissue sites may include tissue sites within the thalamus subthalamic nucleus STN or globus pallidus of brain as well as other target tissue sites e.g. other basal ganglia structures . The specific target tissue sites and or regions within brain may be selected based on the patient condition. Thus in some examples both a stimulation electrode combination and sense electrode combinations may be selected from the same set of electrodes . In other examples the electrodes used for delivering electrical stimulation may be different than the electrodes used for sensing bioelectrical brain signals.

A processor of therapy system accesses data for a physiological model from e.g. a memory of therapy system which can be a memory of programmer IMD or a memory of another device e.g. a database remotely located from programmer or IMD that stores one or more physiological models . In accordance with the techniques of this disclosure IMD and or programmer may store graphics processing data for the physiological model. The physiological model may be generated by a different computing device and stored in the memory. The physiological model may be specific to patient . For example the stored physiological model may be generated based on placement of leads and electrodes within brain of patient .

In some examples the processor generates a physiological model based on a placement of leads and electrodes within brain . The physiological model can be generated with the aid of modeling software hardware or firmware executing on a computing device such as programmer or a separate dedicated or multifunction computing device. In some examples the processor displays an image representative of the physiological model on a user interface of a display in order to provide information that guides a clinician in the selection of the stimulation electrodes. In other examples the computing device provides a stimulation electrode combination recommendation based on the physiological model generated based on the location of lead and the patient anatomy data.

In some examples the physiological model comprises a graphical representation of a therapy field that represents a region of the patient s tissue to which therapy is delivered. For example the therapy field can include an electrical stimulation field also referred to as an electrical field that is generated when IMD delivers electrical stimulation to brain of patient via a selected subset of electrodes and a therapy program defining stimulation parameters. The electrical field represents the region of tissue that will be covered by an electrical field e.g. an electrical field or an electromagnetic field during therapy. In other examples the therapy field can be an activation field which indicates the neurons that will be activated by the electrical field in the patient anatomical region covered by the stimulation therapy thereby indicating the tissue area activated by the electrical stimulation delivered via the specific therapy program which includes a selected subset of electrodes and other stimulation parameter values e.g. current or voltage amplitude value and or frequency value . Another type of therapy field model is a voltage gradient or a current density model that indicates the voltage gradient or current density of an electrical field generated when IMD delivers electrical stimulation to brain of patient via a selected subset of electrodes and a particular set of therapy parameter values. Yet another type of therapy field model may relate to regions in which an infusion agent is distributed at a concentration sufficient to yield efficacious effect.

In other examples the physiological model includes graphics processing data for producing a graphical representation of the one or more anatomical structures of brain proximate the implanted leads and in some examples also includes graphics processing data for producing a graphical representation of leads . The graphics processing data for producing the graphical representation of leads may correspond to a point representative of a distal tip of a lead and an angle of the lead relative to the point two points defining the lead parameters defining one or more curves along which the lead traverses and or points representative of centers of electrodes along the lead. In some examples the physiological model is determined based on the actual implant site of leads within brain . For example a processor of a computing device e.g. programmer or another computing device can implement an algorithm that maps the 3D coordinates e.g. stereotactic coordinates of electrodes within brain to an anatomical image of brain to determine and display the anatomical structures proximate implanted electrodes .

The 3D coordinates can be the coordinates with which leads were implanted in brain or coordinates provided by a clinician that estimate the location of leads within brain . The location of the anatomical structures within brain can be determined based on patient anatomy data specific to patient . For example the physiological model that includes the graphical representation of the anatomical structures of brain can be rendered to display an image of at least a portion of brain of patient . In some examples the physiological model can be produced by applying one or more transforms stored within IMD to an anatomical atlas also referred to as an anatomical atlas model or an atlas model in this disclosure and the transforms may be stored within IMD .

In some examples programmer or another computing device can generate the physiological model and display a rendered version of the physiological model on a display of a user interface. The clinician can then determine based on the image of the physiological model whether the electrodes of the sense or stimulation electrode combination are proximate the target anatomical structures or the anatomical structures to be avoided.

After selecting stimulation electrode combinations a clinician alone or with the aid of a computing device such as programmer may select the other stimulation parameter values that provide efficacious therapy to patient . These other stimulation parameter values may include for example a frequency and amplitude of stimulation signals and in the case of stimulation pulses a duty cycle pulse width of the stimulation signals and an electrode configuration e.g. selected combination and polarities of electrodes. In other cases programmer may suggest information about the stimulation waveform as well as pattern of delivered stimulation pulses.

In some examples after IMD is implanted within patient and programmed for chronic therapy delivery IMD may periodically reassess the selected stimulation electrode combination to determine whether another stimulation electrode combination may provide more efficacious therapy. IMD may determine for example whether the target tissue site for stimulation therapy has changed based on physiological changes in brain or whether one or both leads A B have migrated away from the original implant site within brain or whether the leads have migrated relate to one another.

In order to assess the selected stimulation electrode combination based on the physiological model a clinician can obtain a medical image of leads and respective electrodes using any suitable imaging modality. Programmer or another computing device can generate the physiological model based on the location of electrodes indicated by the medical image and patient anatomy data. The physiological model can indicate for example whether the selected stimulation electrodes are still positioned to deliver electrical stimulation to the one or more target anatomical structure and or avoid the one or more anatomical structures associated with a stimulation induced side effect. For example the physiological model can indicate whether the electrical field activation field voltage gradient or current density of the therapy field resulting from stimulation delivery via the selected stimulation electrode combination is still targeting the target anatomical structures and or avoiding the anatomical structures associated with stimulation induced side effects.

Electrical stimulation generated by IMD may be configured to manage a variety of disorders and conditions. In some examples the stimulation generator of IMD is configured to generate and deliver electrical pulses to patient via electrodes of a selected stimulation electrode combination. However in other examples the stimulation generator of IMD may be configured to generate and deliver a continuous wave signal e.g. a sine wave or triangle wave. In either case a signal generator within IMD may generate the electrical stimulation therapy for DBS according to a therapy program that is selected at that given time in therapy. In examples in which IMD delivers electrical stimulation in the form of stimulation pulses a therapy program may include a set of therapy parameter values such as a stimulation electrode combination for delivering stimulation to patient pulse frequency pulse width and a current or voltage amplitude of the pulses. As previously indicated the stimulation electrode combination may indicate the specific electrodes that are selected to deliver stimulation signals to tissue of patient and the respective polarity of the selected electrodes.

IMD may be implanted within a subcutaneous pocket above the clavicle or alternatively the abdomen back or buttocks of patient on or within cranium or at any other suitable site within patient . Generally IMD is constructed of a biocompatible material that resists corrosion and degradation from bodily fluids. IMD may comprise a hermetic housing to substantially enclose components such as a processor therapy module and memory.

As shown in implanted lead extension is coupled to IMD via connector also referred to as a connector block or a header of IMD . In the example of lead extension traverses from the implant site of IMD and along the neck of patient to cranium of patient to access brain . In the example shown in leads A and B collectively leads are implanted within the right and left hemispheres respectively of patient in order to deliver electrical stimulation to one or more regions of brain which may be selected based on the patient condition or disorder controlled by therapy system . The stimulation electrodes used to deliver stimulation to the target tissue site may be selected based on one or more sensed bioelectrical brain signals and a physiological model that indicates a region of brain proximate the implanted electrodes. Other lead and IMD implant sites are contemplated. For example IMD may be implanted on or within cranium in some examples. As another example leads may be implanted within the same hemisphere of brain or IMD may be coupled to a single lead. In other examples IMD may be coupled to a leadless stimulator. In still other examples IMD may comprise an implantable fluid delivery device coupled to a catheter rather than a lead.

Although leads are shown in as being coupled to a common lead extension in other examples leads may be coupled to IMD via separate lead extensions or directly to connector . Leads may be positioned to deliver electrical stimulation to one or more target tissue sites also referred to herein as therapy targets within brain to manage patient symptoms associated with a patient condition such as a movement disorder. Leads may be implanted to position electrodes at desired locations of brain through respective holes in cranium . Leads may be placed at any location within brain such that electrodes are capable of providing electrical stimulation to target tissue sites within brain during treatment. For example electrodes may be surgically implanted under the dura mater of brain or within the cerebral cortex of brain via a burr hole in cranium of patient and electrically coupled to IMD via one or more leads .

In the example shown in electrodes of leads are shown as ring electrodes. Ring electrodes may be used in DBS applications because they are relatively simple to program and are capable of delivering an electrical field to any tissue adjacent to electrodes . In other examples electrodes may have different configurations. For example in some examples at least some of the electrodes of leads may have a complex electrode array geometry that is capable of producing shaped electrical fields. The complex electrode array geometry may include multiple electrodes e.g. partial ring or segmented electrodes around the outer perimeter of each lead rather than one ring electrode. In this manner electrical stimulation may be directed in a specific direction from leads to enhance therapy efficacy and reduce possible adverse side effects from stimulating a large volume of tissue.

An example of a complex electrode array geometry including segmented electrodes is shown and described with reference to . In some examples a housing of IMD may include one or more stimulation and or sensing electrodes. In alternative examples leads may have shapes other than elongated cylinders as shown in . For example leads may be paddle leads spherical leads bendable leads or any other type of shape effective in treating patient and or minimizing invasiveness of leads . In addition in other examples leads may include both macro electrodes e.g. rings segments adapted to sensing local field potentials and stimulation and micro electrodes e.g. adapted to sensing spike trains in the time domain in any combination.

In the example shown in IMD includes a memory shown in to store a plurality of therapy programs that each define a set of therapy parameter values. In some examples IMD may select a therapy program from the memory based on various parameters such as a detected patient activity level a detected patient state based on the time of day and the like. IMD may generate electrical stimulation based on the selected therapy program to manage the patient symptoms associated with a movement disorder or another patient condition . In accordance with the techniques of this disclosure the memory of IMD may store graphics processing data that may be applied during a rendering process to produce an image of an anatomical feature such as brain of patient . A computing device such as programmer may retrieve the graphical processing data e.g. via wireless telemetry to perform the rendering process using the graphical processing data.

During a trial stage in which IMD is evaluated to determine whether IMD provides efficacious therapy to patient a plurality of therapy programs may be tested and evaluated for efficacy. In addition one or more stimulation electrode combinations may be selected for the one or more therapy programs based on at least one sensed bioelectrical brain signal and a physiological model that is determined based on a location of leads within brain as described in further detail below. Therapy programs may be selected for storage within IMD based on the results of the trial stage.

During chronic therapy in which IMD is implanted within patient for delivery of therapy on a non temporary basis IMD may generate and deliver stimulation signals to patient according to different therapy programs. In addition in some examples patient may modify the value of one or more therapy parameter values within a single given program or switch between programs in order to alter the efficacy of the therapy as perceived by patient with the aid of programmer . The memory of IMD may store instructions defining the extent to which patient may adjust therapy parameters switch between programs or undertake other therapy adjustments. Patient may generate additional programs for use by IMD via external programmer at any time during therapy or as designated by the clinician.

External programmer wirelessly communicates with IMD as needed to provide or retrieve therapy information. Programmer is an external computing device that the user e.g. the clinician and or patient may use to communicate with IMD . For example programmer may be a clinician programmer that the clinician uses to communicate with IMD and program one or more therapy programs for IMD . Alternatively programmer may be a patient programmer that allows patient to select programs and or view and modify therapy parameters. The clinician programmer may include more programming features than the patient programmer. In other words more complex or sensitive tasks may only be allowed by the clinician programmer to prevent an untrained patient from making undesirable changes to IMD . Moreover a clinician programmer may be configured to perform a rendering process using the graphics processing data stored on IMD whereas a patient programmer is typically not though may be configured to perform the rendering process.

Programmer may be a hand held computing device with a display viewable by the user and an interface for providing input to programmer i.e. a user input mechanism . For example programmer may include a small display screen e.g. a liquid crystal display LCD or a light emitting diode LED display that presents information to the user. In addition programmer may include a touch screen display keypad buttons a peripheral pointing device or another input mechanism that allows the user to navigate though the user interface of programmer and provide input. If programmer includes buttons and a keypad the buttons may be dedicated to performing a certain function i.e. activation of power or the buttons and the keypad may be soft keys that change in function depending upon the section of the user interface currently viewed by the user. Alternatively the screen not shown of programmer may be a touchscreen that allows the user to provide input directly to the user interface shown on the display. The user may use a stylus or a finger to provide input to the display.

In other examples programmer may be a larger workstation or a separate application within another multi function device rather than a dedicated computing device. For example the multi function device may be a notebook computer tablet computer workstation cellular phone personal digital assistant or another computing device that may run an application that enables the computing device to operate as medical device programmer . A wireless adapter coupled to the computing device may enable secure communication between the computing device and IMD . Elements of the programmer may also be implemented using networked computing resources such that significant computation occurs remotely.

When programmer is configured for use by the clinician programmer may be used to transmit initial programming information to IMD . This initial information may include hardware information such as the type of leads and the electrode arrangement the position of leads within brain the configuration of electrode array initial programs defining therapy parameter values and any other information the clinician desires to program into IMD . Programmer may also be capable of completing functional tests e.g. measuring the impedance of electrodes of leads .

The clinician may also store therapy programs within IMD with the aid of programmer . During a programming session the clinician may determine one or more therapy programs that provide efficacious therapy to patient to address symptoms associated with the patient condition and in some cases specific to one or more different patient states such as a sleep state movement state or rest state. For example the clinician may select one or more stimulation electrode combinations with which stimulation is delivered to brain . During the programming session patient may provide feedback to the clinician as to the efficacy of the specific program being evaluated or the clinician may evaluate the efficacy based on one or more physiological parameters of patient e.g. muscle activity or muscle tone . Programmer may assist the clinician in the creation identification of therapy programs by providing a methodical system for identifying potentially beneficial therapy parameter values.

Programmer may also be configured for use by patient . When configured as a patient programmer programmer may have limited functionality compared to a clinician programmer in order to prevent patient from altering critical functions of IMD or applications that may be detrimental to patient . In this manner programmer may only allow patient to adjust values for certain therapy parameters or set an available range of values for a particular therapy parameter.

Programmer may also provide an indication to patient when therapy is being delivered when patient input has triggered a change in therapy or when the power source within programmer or IMD needs to be replaced or recharged. For example programmer may include an alert LED may flash a message to patient via a programmer display generate an audible sound or somatosensory cue to confirm patient input was received e.g. to indicate a patient state or to manually modify a therapy parameter.

Programmer is configured to communicate to IMD and optionally another computing device via wireless communication. Programmer for example may communicate via wireless communication with IMD using radio frequency RF telemetry techniques known in the art. Programmer may also communicate with another programmer or computing device via a wired or wireless connection using any of a variety of local wireless communication techniques such as RF communication according to the IEEE 802.11 or Bluetooth specification sets infrared IR communication according to the IRDA specification set or other standard or proprietary telemetry protocols. Programmer may also communicate with other programming or computing devices via exchange of removable media such as magnetic or optical disks or memory cards. Further programmer may communicate with IMD and another programmer via remote telemetry techniques known in the art communicating via a local area network LAN wide area network WAN public switched telephone network PSTN or cellular telephone network for example.

Therapy system can be implemented to provide chronic stimulation therapy to patient over the course of several months or years. However system may also be employed on a trial basis to evaluate therapy before committing to full implantation. If implemented temporarily some components of system may not be implanted within patient . For example patient may be fitted with an external medical device such as a trial stimulator rather than IMD . The external medical device may be coupled to percutaneous leads implanted leads via a percutaneous extension or one or more external leads. If the trial stimulator indicates DBS system provides effective treatment to patient the clinician may implant a chronic stimulator within patient for relatively long term treatment.

In other examples of therapy system therapy system includes only one lead or more than two leads. The devices systems and techniques described below can be applied to a therapy system that includes only one lead or more than two leads. Likewise the techniques of this disclosure may be applied to other implantable medical devices such as implantable fluid delivery devices that deliver a fluid based medication to a therapy target of patient via e.g. a catheter.

In the example shown in memory stores therapy programs bioelectrical brain signals operating instructions and graphics processing data within memory or separate areas within memory . In some examples memory represents separate memories for individually storing therapy programs bioelectrical brain signals operating instructions and graphics processing data . Each stored therapy program defines a particular set of electrical stimulation parameters such as a stimulation electrode combination current or voltage amplitude frequency e.g. pulse rate in the case of stimulation pulses and pulse width.

In other examples e.g. when IMD comprises an implantable fluid delivery device therapy programs store instructions for fluid delivery dosing programs e.g. a rate at which to deliver fluid and or a time at which to deliver fluid at that rate possibly including multiple rates scheduled out over a longer duration of days or weeks. In some examples individual therapy programs may be stored as a therapy group which defines a set of therapy programs with which stimulation may be generated. The stimulation signals defined by the therapy programs of the therapy group may be delivered together on an overlapping or non overlapping e.g. time interleaved basis.

Bioelectrical brain signals include bioelectrical brain signals sensed within brain of patient by sensing module . Example bioelectrical brain signals include but are not limited to a signal generated from local field potentials within one or more regions of brain . EEG and ECoG signals are examples of local field potentials that may be measured within brain . However local field potentials may include a broader genus of electrical signals within brain of patient . In some examples bioelectrical brain signals are raw bioelectrical brain signals sensed by sensing module or another sensing module a parameterized bioelectrical brain signal generated by sensing module or data generated based on the raw bioelectrical brain signal. Operating instructions guide general operation of IMD under control of processor .

In accordance with the techniques of this disclosure memory may store graphics processing data . In some examples graphics processing data may comprise a list of vertices for graphics primitives making up one or more graphics objects for a patient specific model of an anatomical feature of patient . In some examples graphics processing data may comprise one or more transforms that can be applied to an anatomical atlas which may comprise a general model of the anatomical feature of patient .

The anatomical feature of patient represented by graphics processing data may include a therapy target at which leads are implanted. Processor need not interact with graphics processing data other than to receive graphics processing data via telemetry module and store the graphics processing data to memory . For example processor need not implement graphical rendering processes. In this manner IMD represents an example of a device that is not configured to perform a rendering process and that is associated with delivery of therapy to patient .

Processor may include any one or more of a microprocessor a controller a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or discrete logic circuitry. The functions attributed to processors described herein may be embodied in a hardware device via software firmware hardware or any combination thereof. Processor controls stimulation generator according to therapy programs stored in memory to apply particular stimulation parameter values specified by one or more of programs such as amplitude pulse width and pulse rate. Processor may control stimulation generator sensing module and switch module among other elements of IMD to deliver therapy to patient via leads . Accordingly portions of IMD e.g. processor stimulation generator sensing module and switch module may collectively be referred to as a therapy unit of IMD .

In the example shown in the set of electrodes includes electrodes A B C and D and the set of electrodes includes electrodes A B C and D. Processor also controls switch module to apply the stimulation signals generated by stimulation generator to selected combinations of electrodes . In particular switch module may couple stimulation signals to selected conductors within leads which in turn deliver the stimulation signals across selected electrodes . Switch module may be a switch array switch matrix multiplexer or any other type of switching module configured to selectively couple stimulation energy to selected electrodes and to selectively sense bioelectrical brain signals with selected electrodes . Hence stimulation generator is coupled to electrodes via switch module and conductors within leads . In some examples however IMD does not include switch module and instead contains a separate stimulation generator for each electrode.

Stimulation generator can be a single channel or multi channel stimulation generator. In particular stimulation generator may be capable of delivering a single stimulation pulse multiple stimulation pulses or a continuous signal at a given time via a single electrode combination or multiple stimulation pulses at a given time via multiple electrode combinations. In some examples however stimulation generator and switch module may be configured to deliver multiple channels on a time interleaved basis. For example switch module may serve to time divide the output of stimulation generator across different electrode combinations at different times to deliver multiple programs or channels of stimulation energy to patient .

In some examples processor dynamically changes the selected combinations of electrodes i.e. the stimulation electrode combination based on one or more time or frequency domain characteristics of bioelectrical signals sensed within brain . Sensing module under the control of processor may sense bioelectrical brain signals and provide the sensed bioelectrical brain signals to processor . Processor may control switch module to couple sensing module to a selected combinations of electrodes e.g. a sense electrode combination. In this way IMD is configured such that sensing module may sense bioelectrical brain signals with a plurality of different sense electrode combinations. Switch module may be electrically coupled to the selected electrodes via the conductors within the respective leads which in turn deliver the bioelectrical brain signal sensed across the selected electrodes to sensing module . The bioelectrical brain signal may include electrical signals that are indicative of electrical activity within brain of patient . Processor can store the sensed bioelectrical brain signals in memory .

Although sensing module is incorporated into a common housing with stimulation generator and processor in in other examples sensing module may be in a separate housing from IMD and may communicate with processor and in some examples programmer via wired or wireless communication techniques.

Telemetry module supports wireless communication between IMD and an external programmer or another computing device under the control of processor . Processor of IMD may receive as updates to programs values for various stimulation parameters such as amplitude and electrode combination from programmer via telemetry module . The updates to the therapy programs may be stored within therapy programs portion of memory . Telemetry module in IMD as well as telemetry modules in other devices and systems described herein such as programmer may accomplish communication by RF communication techniques. In addition telemetry module may communicate with external medical device programmer via proximal inductive interaction of IMD with programmer . Accordingly telemetry module may send information such as information relating to sensed bioelectrical brain signals to external programmer on a continuous basis at periodic intervals or upon request from IMD or programmer .

Power source delivers operating power to various components of IMD . Power source may include a small rechargeable or non rechargeable battery and a power generation circuit to produce the operating power. Recharging may be accomplished through proximal inductive interaction between an external charger and an inductive charging coil within IMD . In some examples power requirements may be small enough to allow IMD to utilize patient motion and implement a kinetic energy scavenging device to trickle charge a rechargeable battery. In other examples traditional batteries may be used for a limited period of time.

Throughout the disclosure a group of electrodes may refer to any electrodes located at the same position along the longitudinal axis of one or more leads. A group of electrodes may include one electrode or a plurality of electrodes e.g. two or more electrodes .

In this manner represents an example of an implantable medical device including a memory configured to store data for a program of the implantable medical device a therapy unit configured to deliver a therapy to a therapy target of an anatomical feature of a patient and an interface configured to receive the data for the program and to store the data for the program to the memory wherein the interface is further configured to receive graphics processing data comprising data that when applied during a rendering process produces an image of the anatomical feature of the patient wherein the implantable medical device is not configured to perform the rendering process using the graphics processing data. also represents an example of an implantable medical device that includes a therapy unit configured to perform at least one of delivery of a therapy and measurement of physiologic signals at a therapy target of an anatomical feature of a patient and a memory comprising stored data for a program of the implantable medical device and graphics processing data wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient wherein the implantable medical device is not configured to perform the rendering process using the graphics processing data.

In accordance with the techniques of this disclosure in some examples graphics processing data stored to IMD and or programmer may include data representative of the location of lead implanted within a therapy target of patient . For example IMD may store information defining the location of lead in the form of a point representative of the distal tip of lead and an angle of lead relative to the distal tip. It may also store information about the axial rotation of a lead or catheter relative to anatomical midline or another reference so as to be able to render the directionality of relevant therapy elements correctly e.g. the orientation of a egress hole in a catheter tip . In other examples IMD may store information defining locations of centers of electrodes . In such examples IMD may further store information indicating types for electrodes e.g. to indicate that electrodes comprise ring electrodes whereas electrodes A C and A C comprise segmented electrodes. IMD may further store information indicating locations of segments of segmented electrodes A C and A C.

A user such as a clinician or patient may interact with programmer through user interface . Accordingly in some examples programmer may comprise a patient programmer or a clinician programmer. The techniques of this disclosure are directed to storing graphics processing data such as graphics processing data to a device associated with delivering therapy to a therapy target of a patient while not being configured to perform a rendering process using the graphics processing data. Accordingly when programmer is configured as a patient programmer in some examples the patient programmer is not necessarily configured to perform the rendering process using graphics processing data . In some examples when programmer is configured as a clinician programmer processor may be configured to perform the rendering process using graphics processing data to generate an image of an anatomical feature including the therapy target of patient and to display the image e.g. via user interface .

User interface includes a display not shown such as a LCD or LED display or other type of screen to present information related to the therapy such as information related to bioelectrical signals sensed via a plurality of sense electrode combinations and in some examples when configured to render graphics objects an image of an anatomical feature including a therapy target of patient . In addition user interface may include an input mechanism to receive input from the user. The input mechanisms may include for example buttons a keypad e.g. an alphanumeric keypad a peripheral pointing device or another input mechanism that allows the user to navigate through user interfaces presented by processor of programmer and provide input.

If programmer includes buttons and a keypad the buttons may be dedicated to performing a certain function e.g. a power button or the buttons and the keypad may be soft keys that change in function depending upon the section of the user interface currently viewed by the user. Alternatively the display not shown of programmer may be a touch screen that allows the user to provide input directly to the user interface shown on the display. The user may use a stylus or a finger to provide input to the display. In other examples user interface also includes audio circuitry for providing audible instructions or sounds to patient and or receiving voice commands from patient which may be useful if patient has limited motor functions. Patient a clinician or another user may also interact with programmer to manually select therapy programs generate new therapy programs modify therapy programs through individual or global adjustments and transmit the new programs to IMD .

In some examples at least some of the control of therapy delivery by IMD may be implemented by processor of programmer . In addition in some examples processor may select a stimulation electrode combination based on a bioelectrical brain signal sensed by IMD and a physiological model that indicates a one or more characteristics of tissue of brain of patient proximate implanted electrodes of leads . The examples described herein primarily refer to a bioelectrical brain signal sensed by IMD but are also applicable to selecting an electrode combination based on a bioelectrical brain signal sensed by a sensing module that is separate from IMD . The separate sensing module may but need not be implanted within patient .

In some examples a clinician or other user of programmer may select one or more electrodes based on time domain characteristics of a sensed bioelectrical signal such as a sensed spike train from an individual or small group of neurons. In addition the user may view an image of an anatomical feature of patient which may include a representation of implanted therapy elements of IMD to select the electrodes. In some cases e.g. after determining a desirable stimulation electrode combination processor may transmit a signal to IMD to instruct IMD to use the selected stimulation electrode combinations.

Processor of IMD may receive the signal from programmer via its respective telemetry module . Processor of IMD may switch stimulation electrode combinations by selecting a stored therapy program from memory based on the signal from processor of programmer . Alternatively processor of programmer may select a therapy program or a specific stimulation electrode combination and transmit a signal to IMD where the signal indicates the therapy parameter values to be implemented by IMD to help improve the efficacy of the stimulation to manage the patient s movement disorder. The indication may be for example an alphanumeric identifier or symbol that is associated with the therapy program in memory of IMD .

In the example shown in memory stores sense and stimulation electrode combinations graphics processing data bioelectrical brain signals and anatomical atlas in separate memories within memory or separate areas within memory . Memory may also include instructions for operating user interface and telemetry module and for managing power source . Memory may also store any therapy data retrieved from IMD during the course of therapy such as bioelectrical brain signals sensed by IMD . The clinician may use this therapy data to determine the progression of the patient condition in order to predict future treatment. Memory may include any volatile or nonvolatile memory such as RAM ROM EEPROM or flash memory. Memory may also include a removable memory portion that may be used to provide memory updates or increases in memory capacities. A removable memory may also allow sensitive patient data to be removed before programmer is used by a different patient.

Sense and stimulation electrode combinations stores sense electrode combinations and associated stimulation electrode combinations. As described above in some examples the sense and stimulation electrode combinations may include the same subset of electrodes or may include different subsets of electrodes. Thus memory can store a plurality of sense electrode combinations and for each sense electrode combination store information identifying the stimulation electrode combination that is associated with the respective sense electrode combination. The associations between sense and stimulation electrode combinations can be determined e.g. by a clinician automatically by processor or a processor of another device e.g. IMD .

In some examples corresponding sense and stimulation electrode combinations may comprise some or all of the same electrodes. In other examples however some or all of the electrodes in corresponding sense and stimulation electrode combinations may be different. For example a stimulation electrode combination may include more electrodes than the corresponding sense electrode combination in order to increase the efficacy of the stimulation therapy. In some examples as discussed above stimulation may be delivered via a stimulation electrode combination to a tissue site that is different than the tissue site closest to the corresponding sense electrode combination but is within the same region e.g. the thalamus of brain in order to mitigate any irregular oscillations or other irregular brain activity within the tissue site associated with the sense electrode combination. In another example stimulation may be delivered via a stimulation electrode combination to a tissue site that is different than the tissue site closest to the corresponding sense electrode combination but is within the same pathway or brain circuit e.g. IMD may sense bioelectrical brain signals in the GPi and stimulate in the STN of brain in order to mitigate any abnormal oscillatory activity or other abnormal brain activity within the tissue site associated within the sense electrode combination. The regions of the brain circuit may be functionally related to one another via neurological pathways in a manner that causes activity within one region of the network to be influenced by activity within another region of the network.

Graphics processing data stores information with which processor of programmer may when configured to perform a rendering process render a patient specific model to generate an image of a therapy target proximate leads of IMD . In some examples the image may include one or more anatomical structures within brain of patient proximate implanted leads . In some examples graphics processing data stores lead placement information that identifies a location of leads which can be an actual location of leads within brain or an approximate location of leads within brain . The information relating to the actual or approximate location of leads can include for example points representing distal tips of the leads angles of the leads relative to the distal tips a three dimensional vector relative to the distal tip second point representative of a proximal ends of the leads points defining centroids of electrodes along a lead axial orientation or rotation relative to a reference direction or other such information.

Graphics processing data also stores data that when applied during a rendering process produces an image representative of an anatomical feature of patient including a therapy target proximate to leads of IMD . In one example graphics processing data may store a list of vertices defining graphics primitives for a three dimensional mesh representative of the patient specific model of the anatomical feature. In this example memory need not necessarily store anatomical atlas which is illustrated using a dashed outline to represent that storing data for anatomical atlas is optional. In another example graphics processing data may store one or more transforms that when applied to anatomical atlas transform anatomical atlas to the patient specific model. Such a transform may be generated by a process in which a non patient specific atlas or data set is altered via a series of rigid or non rigid registrations such that it better matches this patient s specific anatomy. The rendering process may further include generating pixel data for an image of the anatomical feature from the patient specific model. In some examples graphics processing data may store both vertex data and transform data which may both be applied during the rendering process. In still other examples memory may additionally store image data e.g. an encoded representation of a portion of the image to be displayed.

When programmer is configured as a clinician programmer memory may store graphics processing data temporarily. That is the clinician programmer may retrieve graphics processing data from memory of IMD e.g. via wireless telemetry and store the graphics processing data temporarily as graphics processing data . In other examples the clinician programmer may retrieve graphics processing data from a patient programmer and store the retrieved graphics processing data as graphics processing data . The clinician programmer may store graphics processing data during a programming session performed by a clinician user and processor or a separate processor such as a graphics processing unit GPU may be configured to perform the rendering process. Following the programming session processor may erase graphics processing data or overwrite graphics processing data when new data is to be stored to memory . Graphics processing data may alternately be stored locally or cached for future use on this programmer. Processor may cause a display not shown of user interface to display an image generated by performance of the rendering process.

Wireless telemetry in programmer may be accomplished by RF communication or proximal inductive interaction of external programmer with IMD . This wireless communication is possible through the use of telemetry module . Accordingly telemetry module may be similar to the telemetry module contained within IMD . In alternative examples programmer may be capable of infrared communication or direct communication through a wired connection. In this manner other external devices may be capable of communicating with programmer without needing to establish a secure wireless connection.

Power source delivers operating power to the components of programmer . Power source may include a battery and a power generation circuit to produce the operating power. In some examples the battery may be rechargeable to allow extended operation. Recharging may be accomplished by electrically coupling power source to a cradle or plug that is connected to an alternating current AC outlet. In addition recharging may be accomplished through proximal inductive interaction between an external charger and an inductive charging coil within programmer . In other examples traditional batteries e.g. nickel cadmium or lithium ion batteries may be used. In addition programmer may be directly coupled to an alternating current outlet to operate. Power source may include circuitry to monitor power remaining within a battery. In this manner user interface may provide a current battery level indicator or low battery level indicator when the battery needs to be replaced or recharged. In some cases power source may be capable of estimating the remaining time of operation using the current battery.

MRI unit may capture a series of magnetic resonance images of an anatomical feature including a therapy target of patient while IMD is implanted within patient . Accordingly a therapy element of IMD such as one or more leads or one or more catheters may be implanted proximate to the therapy target. Although the example of depicts an MRI unit in other examples other imaging devices may be used e.g. CT units x ray units fluoroscopy units and the like. MRI unit may capture a series of images of the anatomical feature of patient which may include images of the therapy element of IMD . In some examples MRI unit may capture a set of images of the therapy target of patient prior to implant of the therapy element and IMD in order to assist physicians in planning placement of the therapy element of IMD . In some examples MRI unit may capture a set of images following implant e.g. to assist clinicians in programming of IMD .

MRI unit provides the captured images to image manipulation device . Image manipulation device may use the images from MRI unit to construct a patient specific model of the anatomical feature including the therapy target of patient . As an example the MRI image data may be used to alter a non patient specific atlas or data set a series of rigid or non rigid registrations such that it better matches this patient s specific anatomy. The patient specific model may correspond to a three dimensional model of the anatomical feature specific to patient . For example the patient specific model may comprise one or more graphics objects made up of one or more graphics primitives. Each of the graphics primitives may be defined by one or more vertices. In some examples certain portions of the anatomical feature of patient may be pre stored to image manipulation device and graphics processing data for producing an image of patient specific structures of interest may be stored to IMD and or programmer e.g. the therapy target and neighboring structures.

In accordance with the techniques of this disclosure in some examples image manipulation device may be configured to store a list of vertices defining the graphics primitives for the graphics objects making up the patient specific model to a device that is not configured to perform a rendering process but that is associated with delivering therapy to patient e.g. programmer and or IMD in this example. In this manner storing a list of vertices to programmer or IMD represents an example of storing graphics processing data to a device associated with delivering therapy to a patient. In such examples image manipulation device need not necessarily access data of atlas model . That is the list of vertices can be used to directly recreate the patient specific model. Therefore atlas model is illustrated using a dashed outline indicating that atlas model is an optional component of system . Atlas model is generally ubiquitous that is available to any device configured to interact with graphics processing data stored by IMD and or programmer .

In other examples of the techniques of this disclosure image manipulation device may be configured to compare the patient specific model to atlas model e.g. to determine differences between the models. Image manipulation device may be configured to calculate one or more transforms that when applied to atlas model produce a model that is substantially similar to the patient specific model for patient . In these examples image manipulation device may store data for the transforms to programmer and or IMD . In this manner storing transform data to programmer or IMD represents an example of storing graphics processing data to a device associated with delivering therapy to a patient.

Likewise image manipulation device may determine locations of therapy elements of IMD within the anatomical feature of patient from the images received from MRI unit . Image manipulation device may store data indicative of the locations of therapy elements to IMD or programmer such as a point and one or more angles which can be stored efficiently in tens of bytes two points defining a line multiple points corresponding to centers of electrodes of a lead a point representative of a leadless stimulator or other location data. The data indicative of the location of the therapy element may also include geometry information for the therapy element such as for example a model identifier e.g. model number of the therapy element a length and width e.g. circumference of the therapy element a number of electrodes and positions of the electrodes which may be described by spacing between the electrodes when the therapy element comprises a lead coefficients of a curve spline or otherwise when the therapy element is not straight or other such information.

When graphics processing data are stored to programmer and or IMD image manipulation device may retrieve the graphics processing data from programmer or IMD . In some examples image manipulation device may be configured only to perform a graphics rendering process and not to generate an actual patient specific model from data of MRI unit . Accordingly MRI unit is illustrated using a dashed line to indicate that MRI unit is an optional component of system . In some examples image manipulation device may be configured to retrieve the graphics processing data from programmer or IMD as well as to produce a patient specific model of the anatomical feature of patient e.g. to assist a clinician in monitoring drift of leads of IMD if any.

In this manner image manipulation device may have various configurations. For example image manipulation device may be configured to generate graphics processing data to be stored to IMD and or programmer to retrieve graphics processing data from IMD and or programmer and perform a rendering process using the graphics processing data or both.

Display device may comprise a user interface for displaying images rendered by image manipulation device . In some examples display device may form part of image manipulation device or may comprise a separate device coupled to image manipulation device . Image manipulation device may apply the graphics processing data during a rendering process to generate an image of an anatomical feature of patient including a therapy target and of therapy elements of IMD in some examples. Image manipulation device may cause display device to display the image after rendering.

In this manner represents an example of a system including an implantable medical device comprising a memory that stores graphics processing data wherein the implantable medical device is configured to at least one of deliver therapy and sense a physiological signal at a therapy target of a patient and wherein the implantable medical device is not configured to perform a rendering process using the graphics processing data and an image manipulation device configured to retrieve the graphics processing data from the memory of the implantable medical device to apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for the implantable medical device and to cause a user interface of a display unit to display the image wherein the image of the anatomical feature is specific to the patient.

The graphics processing data may be referred to as key information. In accordance with the techniques of this disclosure this key information can be stored to a device associated with delivering therapy to patient e.g. IMD and or programmer . In this manner the key information can be retrieved rather than regenerated e.g. by obtaining a subsequent set of MRI images. The key information may include graphics processing data that when applied during a rendering process allows for a visualization programming interface to be presented. Because the key information is stored to IMD and or programmer image manipulation device or other devices e.g. clinician programmers may have access to the graphics processing data when patient is present.

Control unit A may include a memory for storing executable instructions and one or more processing units for executing the instructions. In other examples control unit A may include one or more discrete hardware units such as digital signal processors DSPs application specific integrated circuits ASICs field programmable gate arrays FPGAs or any other equivalent integrated or discrete logic circuitry. In the example of control unit A includes memory for storing atlas model A as well as transform calculation unit three dimensional 3D model generation unit telemetry module control unit A graphics processing unit A and image analysis unit . In this example 3D model generation unit image analysis unit and MRI interface collectively form a patient specific model generation unit . In other examples patient specific model generation unit may correspond to a separate functional unit.

In the example of image manipulation device A receives images from MRI unit via MRI interface . Image analysis unit analyzes the images and provides data for the images to 3D model generation unit . 3D model generation unit creates a patient specific 3D model of an anatomical feature of patient from the images received from MRI unit . The patient specific model may comprise one or more graphics objects each of which may comprise one or more graphics primitives. 3D model generation unit may generate a list of vertices defining the graphics primitives and pass the list of vertices to telemetry module control unit A. Telemetry module control unit A may in turn cause telemetry module A to store the list of vertices to programmer and or IMD . In some examples 3D model generation unit may also provide other graphics processing data in addition to the list of vertices such as arrangement of polygon faces among the vertices to aid in reconstruction.

One common example of a graphics primitive is a triangle which may be defined by three vertices in a three dimensional space. That is each of the vertices may comprise an X component a Y component and a Z component. Thus nine values may be used to define the geometry for a triangle graphics primitive. In some examples an instruction to draw triangle graphics primitives may be followed by a list of X Y Z coordinate triplets comprising a list of vertices. The instruction and list of vertices may case graphics processing unit GPU A to construct triangles having vertices starting with the first vertex three vertices forming each of the triangles. Table 1 below provides an example of a list of vertices for rendering triangles.

In some examples the first three rows of coordinates in Table 1 may define a first triangle and the next three rows of Table 1 may define a second triangle. In other examples rows 1 through 3 of Table 1 may define a first triangle rows 2 through 4 may define a second triangle rows 3 through 5 may define a third triangle and so on. In this manner a list of vertices such as the list of vertices represented in Table 1 may define one or more graphics primitives that make up a graphics object for a patient specific physiological model.

GPU A or other GPUs of other image manipulation devices may apply the list of vertices during a graphics rendering process to produce an image of the patient specific model constructed by patient specific model generation unit . For example instructions may be passed to GPU A via an application programming interface API such as Open Graphics Library OpenGL DirectX or other graphics processing APIs to render the graphics objects defined by the list of vertices. The following pseudocode represents one example using OpenGL like syntax for drawing triangles using the example list of vertices of Table 1 

In this example pseudocode glBegin GL TRIANGLES is an instruction that causes GPU A to begin drawing triangles based on vertices passed to GPU A. Each of the glVertex3f instructions correspond to instructions for passing vertices to GPU A to use to draw triangles in the format glVertex3f X Y Z . In this example GPU A may draw two triangles one triangle with the first three vertices and a second triangle with the next three vertices. The glEnd instruction informs GPU A that the list has ended and to stop drawing triangles. In other examples of course there may be a much larger set of vertices e.g. 1950 vertices used to define many triangles e.g. 650 triangles to construct graphics objects for a patient specific physiological model of an anatomical feature of patient . In some examples 3D model generation unit A may define a vertex array to include the example list of vertices of Table 1. Thus in some examples image manipulation device A may store the vertex array to IMD and or programmer via telemetry module A.

Rather than storing a list of vertices in some examples 3D model generation unit sends the patient specific model to transform calculation unit . Transform calculation unit may also retrieve atlas model A from memory of control unit A. In this example atlas model A corresponds to a general non patient specific model of the anatomical feature of interest for patient . For example atlas model A may be generated based on an average of patient specific models of the anatomical feature from a relatively large number of test patients. Alternately atlas model A may be generated from the dissection of a physical specimen wherein experts in the field segment structures based on staining or other techniques. As yet another example atlas model A may be generated by statistical analysis of the correlation of therapy outcome against anatomical location using large sets of previous test patients.

Transform calculation unit may calculate one or more transforms that when applied to atlas model A substantially yield the patient specific model produced by patient specific model generation unit . For example a user may manipulate elements of the anatomical atlas model to move vertices or graphics objects of the atlas model to mirror the patient specific model. In addition or in the alternative transform calculation unit may match features of the patient specific model to the atlas model and calculate the transforms to manipulate vertices of the atlas model to mirror the patient specific model. The transforms may comprise any of translations scaling and or rotations in one or more dimensions. Each of these types of transforms can be stored in for example a 3 3 matrix transform. In some examples transform calculation unit may calculate a 4 4 matrix comprising an affine transform that represents a combination of a translation transform a scaling transform and a rotation transform. Table 2 below represents an example 4 4 affine transform 

In some examples transform calculation unit may be configured to operate completely autonomously to calculate the transforms. In other examples a user may interact with transform calculation unit e.g. to adjust the transforms to cause the model produced by applying the transforms to atlas model A to fit the patient specific model more precisely. In still other examples transform calculation unit may represent a tool provided to a user to adjust atlas model A to substantially fit the patient specific model such that transform calculation unit produces transforms corresponding to the adjustments made or to key landmarks identified by the user. In any case transform calculation unit may send the calculated transforms to telemetry module control unit A. Telemetry module control unit A may in turn cause telemetry module A to store the transforms to IMD and or programmer .

Moreover transform calculation unit may provide the transforms to GPU A. GPU A may also receive atlas model A. GPU A may perform a rendering process during which GPU A may apply the transforms to atlas model A. In this manner GPU A may manipulate vertices defining atlas model A according to the transforms from transform calculation unit during a rendering process.

Accordingly image manipulation device A represents an example of a device that can use graphics processing data comprising either or both of a list of vertices defining a patient specific model and transforms applied to atlas model A or in some cases to the patient specific model defined by the list of vertices . GPU A may apply the graphics processing data during a rendering process to produce an image of an anatomical feature of patient . GPU A may then pass the image to display A to cause a user interface of display A to display the image. In some examples a clinician may use the image to adjust programming of IMD . In such examples image manipulation device A may be configured as a clinician programmer.

Furthermore rather than using the data provided by either or both of 3D model generation unit and or transform calculation unit image manipulation device A may be configured to retrieve graphics processing data from IMD and or programmer that was previously stored. Thus GPU A may be configured to perform a rendering process using graphics processing data retrieved from IMD and or programmer in addition to or in the alternative to graphics processing data constructed by patient specific model generation unit and or transform calculation unit . For example image manipulation device A may retrieve data from IMD and or programmer rather than subjecting patient to an additional imaging process using MRI unit or other imaging devices e.g. CT units x ray units fluoroscopy units or the like.

In still other examples image manipulation device A may retrieve graphics processing data stored by IMD and or programmer to produce a first image and also generate an updated patient specific model using patient specific model generation unit to produce a second image. In this manner a clinician may compare the two images or compare to calculated transforms to determine whether therapy elements of IMD have drifted over time.

In this manner represents an example of a device including a telemetry module configured to retrieve graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data and that is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient and a control unit configured to apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and to cause a display unit of a user interface to display the image wherein the image of the anatomical feature is specific to the patient.

In this manner represents an example of a device including a telemetry module configured to retrieve graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data and that is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient and a control unit configured to apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and to cause a display unit of a user interface to display the image wherein the image of the anatomical feature is specific to the patient. In the example of the graphics processing data comprises one or more transforms and thus the control unit is configured to obtain an anatomical atlas for the anatomical feature of the patient wherein the anatomical atlas comprises a general model of the anatomical feature of the patient apply the one or more transforms to the anatomical atlas to produce a patient specific model of the anatomical feature of the patient wherein the patient specific model comprises three dimensional graphics data and render the patient specific model to produce pixel data for the image representative of the patient specific model.

In this manner represents an example of a device including a telemetry module configured to retrieve graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data and that is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient and a control unit configured to apply the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and to cause a display unit of a user interface to display the image wherein the image of the anatomical feature is specific to the patient. In the example of the graphics processing data comprises a list of vertices for graphics primitives corresponding to a three dimensional graphical mesh representative of the anatomical feature of the patient. Accordingly the control unit in this example is configured to render the graphics primitives using the list of vertices to produce pixel data for the image representative of the graphics primitives of the three dimensional graphical mesh.

Initially a clinician may determine a therapy target of patient . For example the clinician or other medical personnel may diagnostically determine a therapy to be applied to patient and that an implantable medical device such as an implantable electrical stimulator or an implantable fluid delivery device could be used to deliver the therapy. The clinician may then implant IMD near the therapy target of patient and implant a therapy element such as a lead proximate to the therapy target .

Following the implant procedure an imaging device such as MRI unit may capture image data of the therapy target of patient . MRI unit may for example capture a sequence of slices through magnetic resonance imaging procedures. Each of the slices may correspond to one image of a portion of the therapy target. MRI unit may then provide the image data to image manipulation device A via MRI interface . Patient specific model generation unit of image manipulation device A may generate a patient specific model of an anatomical feature that includes the therapy target for patient from the received image data . For example if an x axis corresponds to the direction from one side of patient to the other a y axis corresponds to the direction from the back of patient to the front of patient and the z axis corresponds the direction from the head of patient to the feet of patient then each slice may include image data in x y planes. Moreover the slices may be stacked in z axis order. In this manner image analysis unit may attempt to identify anatomical features in the slice images received from MRI unit while 3D model generation unit may generate X and Y coordinates for the features within a particular slice and Z coordinates for the features based on the position of the feature in the ordering of the slices.

Using the patient specific model image manipulation device A may generate graphics processing data that when applied during a rendering process produces an image of the anatomical feature specific to patient . In some examples the graphics processing data may comprise a list of vertices while in other examples the graphics processing data may comprise one or more transforms that can be applied to a non patient specific atlas e.g. atlas model A. Image manipulation device A may then store the graphics processing data for the patient specific model in e.g. IMD via telemetry module A. Additionally or alternatively image manipulation device A may store the graphics processing data to programmer . Moreover programmer need not necessarily be configured to perform the rendering process using the graphics processing data.

The image data provided by MRI unit may also include a representation of a therapy element such as one or more leads of IMD implanted within the therapy target of patient . Accordingly image manipulation device A may also calculate data representative of the location of the therapy element and store the location data for the lead in IMD along with the graphics processing data .

GPU A may further perform the rendering process to generate an image of the anatomical feature of patient with a representation of the lead or other therapy elements of IMD via display A. A clinician may use the image to determine e.g. points of contact for electrodes of the lead with the therapy target . The clinician may determine a program e.g. a combination of electrodes stimulation frequency pulse width and or amplitude waveform and the like based at least in part on the image of the therapy target and the lead implant location presented in the image . The clinician may use image manipulation device A or another device to download the program to IMD or to download an indication of a previously stored program for IMD to use to deliver therapy to the therapy target of patient via the therapy element e.g. the lead .

In this manner represents an example of a method including obtaining information representative of an anatomical feature of a patient wherein the anatomical feature comprises a therapy target for an implantable medical device determining graphics processing data based on the obtained information wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient and storing the graphics processing data to a device that is not configured to perform the rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at the therapy target of the patient.

Initially image manipulation device A may obtain image data of an anatomical feature of patient . For example as discussed above with respect to image manipulation device A may receive image data from MRI unit . The image data may include an image of a lead or other therapy element of IMD . Using the image of the lead image manipulation device A may determine a location of the lead in the therapy target of patient .

3D model generation unit may calculate a patient specific model of an anatomical feature including the therapy target of patient . 3D model generation unit may determine a list of vertices defining graphics primitives of a graphic mesh of the patient specific model . In the example of image manipulation device A stores the list of vertices for the graphic mesh to IMD . In other examples image manipulation device A may store the list of vertices for the graphic mesh to programmer in addition to or in the alternative to IMD . Image manipulation device A may also store data indication the location of the lead of IMD to IMD .

In this manner represents an example of a method including obtaining information representative of an anatomical feature of a patient wherein the anatomical feature comprises a therapy target for an implantable medical device determining graphics processing data based on the obtained information wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient and storing the graphics processing data to a device that is not configured to perform the rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at the therapy target of the patient. In the example of the graphics processing data includes a list of vertices for graphics primitives corresponding to a three dimensional mesh based on the information representative of the anatomical feature of the patient.

Initially image manipulation device A may obtain image data of an anatomical feature of patient . For example as discussed above with respect to image manipulation device A may receive image data from MRI unit . The image data may include an image of a lead or other therapy element of IMD . Using the image of the lead image manipulation device A may determine a location of the lead in the therapy target of patient . 3D model generation unit may also calculate a patient specific model of an anatomical feature including the therapy target of patient .

In this example 3D model generation unit may provide the patient specific model to transform calculation unit . Transform calculation unit may further retrieve data for atlas model A for the anatomical feature . However whereas 3D model generation unit provides a patient specific model of the anatomical feature atlas model A represents a non patient specific model of the anatomical feature. Transform calculation unit may calculate one or more transforms that can be applied to transform atlas model A to a patient specific model that is substantially similar to the patient specific model received from 3D model generation unit .

In this example image manipulation device A may store the transforms calculated by transform calculation unit to IMD via telemetry module A . In addition or in the alternative image manipulation device A may store the transforms to programmer . Image manipulation device A may further store data indicating the lead location to IMD and or programmer .

In this manner represents an example of a method including obtaining information representative of an anatomical feature of a patient wherein the anatomical feature comprises a therapy target for an implantable medical device determining graphics processing data based on the obtained information wherein the graphics processing data comprises data that when applied during a rendering process produces an image of the anatomical feature of the patient and storing the graphics processing data to a device that is not configured to perform the rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at the therapy target of the patient. In the example of the graphics processing data includes one or more transforms that are applied to an anatomical atlas representing a general model of the anatomical feature of the patient. In this example applying the one or more transforms to the anatomical atlas yields a patient specific model that substantially conforms to the information representative of the anatomical feature of the patient.

Initially image manipulation device A may retrieve graphics processing data such as a list of vertices or one or more transforms from IMD . In other examples image manipulation device A may retrieve the graphics processing data from a patient programmer such as programmer . GPU A may then perform a rendering process using the retrieved graphics processing data to produce an image of the patient specific anatomical feature of patient . For example when the graphics processing data comprises a list of vertices GPU A may render a graphics object comprising graphics primitives defined by the list of vertices to produce the image. When the graphics processing data comprises one or more transforms GPU A may apply the transforms to atlas model A to produce a patient specific model which GPU A may render to produce the image.

During the rendering process GPU A may also utilize data indicative of a location of a lead or other therapy element of IMD to display a representation of the lead in the image . For example the graphics processing data may comprise data for a first graphics object corresponding to the patient specific anatomical feature and a second graphics object corresponding to the lead or other therapy element . When performing the rendering process GPU A may render both of these graphics objects to produce an image of the anatomical feature as well as the lead or other therapy element of IMD .

In the example of a clinician may review the image in addition to other data e.g. patient feedback data to determine the location of the lead in the therapy target of patient . Based on the information available the clinician may determine whether IMD should be reprogrammed or whether IMD should be configured to operate according to a different program already stored by IMD . Accordingly image manipulation device A which may in this example comprise a clinician programmer may receive new IMD programming instructions e.g. from the clinician and download the new IMD programming instructions to IMD . Of course if the clinician determines that no new programming instructions are needed steps and may be omitted.

In this manner represents an example of a method including retrieving graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient applying the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and displaying the image wherein the image of the anatomical feature is specific to the patient.

In this example image manipulation device C may retrieve a list of vertices from IMD or in some examples programmer . The list of vertices may define one or more graphics primitives for a graphics object corresponding to a patient specific model of an anatomical feature of patient . Accordingly GPU C may render the graphics primitives defined by the list of vertices to produce an image specific to the anatomical feature of patient . Image manipulation unit C may also retrieve lead location data from IMD and display a lead representation in the image .

Although illustrated as separate steps it should be understood that in general a graphics object representative of the lead and one or more graphics objects representative of the patient specific model of the anatomical feature may be rendered as part of the same rendering process. The steps in are illustrated separately only for purposes of example. Thus the final image produced by the rendering process may include a representation of the patient specific anatomical feature as well as a representation of the lead or in other examples other therapy elements such as one or more leads or one or more catheters .

In this manner represents an example of a method including retrieving graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient applying the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and displaying the image wherein the image of the anatomical feature is specific to the patient. In the example of the graphics processing data corresponds to a list of vertices for graphics primitives corresponding to a three dimensional graphical mesh representative of the anatomical feature of the patient. The method may therefore include rendering the graphics primitives using the list of vertices to produce pixel data for the image representative of the graphics primitives of the three dimensional graphical mesh.

In this example image manipulation device B may retrieve one or more transforms from IMD or in some examples programmer . GPU B may retrieve data for atlas model B which comprises a non patient specific anatomical atlas in this example . GPU B may apply the retrieved transforms to data for atlas model B to warp the anatomical atlas to a patient specific model . GPU B may also render the patient specific model to produce a patient specific model of the anatomical feature of patient . Image manipulation unit B may also retrieve lead location data from IMD and display a lead representation in the image . As discussed with respect to the method of it should be understood that in general a graphics object representative of the lead and one or more graphics objects representative of the patient specific model of the anatomical feature may be rendered as part of the same rendering process rather than as separate steps as illustrated in the example of . Again provides separate steps for purpose of explanation.

In this manner represents an example of a method including retrieving graphics processing data from a device that is not configured to perform a rendering process using the graphics processing data wherein the device is associated with at least one of delivering therapy and sensing a physiological signal at a therapy target of a patient applying the graphics processing data while performing the rendering process to generate an image of an anatomical feature of the patient wherein the anatomical feature comprises the therapy target for an implantable medical device and displaying the image wherein the image of the anatomical feature is specific to the patient. In the example of the graphics processing data corresponds to one or more transforms that when applied to the anatomical atlas produce a patient specific model of the anatomical feature of the patient. The method may therefore include rendering the patient specific model to produce pixel data for the image representative of the patient specific model.

User interface also provides change program button and modify image button . When a clinician or other user selects change program button e.g. using a mouse a stylus a finger with a touchpad device or other input mechanism a computing device presenting user interface may provide a separate window not shown by which the user may modify programming of IMD . Using this separate window the user may adjust various programming parameters of IMD e.g. to select a different program stored on IMD or to define a new program for IMD .

When a clinician or other user selects modify image button a computing device presenting user interface may provide a separate window not shown by which the user may modify a view of anatomical feature and lead . For example the user may adjust camera parameters such as camera position and or camera direction relative to anatomical feature and lead . A GPU of a computing device presenting user interface may re render data using the same graphics processing data used to generate image based on the new camera parameters to generate a second different image of anatomical feature and lead .

As another example the user may highlight various graphical objects of image using e.g. various colors hide graphics objects of image e.g. hide lead or electrodes thereof or other objects for anatomical feature not of interest e.g. to avoid occlusion or otherwise manipulate the displayed image to gain a fuller appreciation of the idiosyncratic elements of anatomical feature specific to patient in order to better treat patient .

In still other examples the separate window may allow the user to retrieve a second image of anatomical feature e.g. an image generated according to a second different patient specific model which may have been created at a different time as the model used to generate image . In this manner the user may compare the two images to determine changes to anatomical feature and or lead e.g. to detect lead migration.

The techniques described in this disclosure may be implemented at least in part in hardware software firmware or any combination thereof. For example various aspects of the described techniques may be implemented within one or more processors including one or more microprocessors digital signal processors DSPs application specific integrated circuits ASICs field programmable gate arrays FPGAs or any other equivalent integrated or discrete logic circuitry as well as any combinations of such components. The term processor or processing circuitry may generally refer to any of the foregoing logic circuitry alone or in combination with other logic circuitry or any other equivalent circuitry. A control unit comprising hardware may also perform one or more of the techniques of this disclosure.

Such hardware software and firmware may be implemented within the same device or within separate devices to support the various operations and functions described in this disclosure. In addition any of the described units modules or components may be implemented together or separately as discrete but interoperable logic devices. Depiction of different features as modules or units is intended to highlight different functional aspects and does not necessarily imply that such modules or units must be realized by separate hardware or software components. Rather functionality associated with one or more modules or units may be performed by separate hardware or software components or integrated within common or separate hardware or software components.

The techniques described in this disclosure may also be embodied or encoded in a computer readable medium such as a computer readable storage medium containing instructions. Instructions embedded or encoded in a computer readable medium may cause a programmable processor or other processor to perform the method e.g. when the instructions are executed. Computer readable media may include non transitory computer readable storage media and transient communication media. Computer readable storage media which is tangible and non transitory may include random access memory RAM read only memory ROM programmable read only memory PROM erasable programmable read only memory EPROM electronically erasable programmable read only memory EEPROM flash memory a hard disk a CD ROM a floppy disk a cassette magnetic media optical media or other computer readable storage media. It should be understood that the term computer readable storage media refers to physical storage media and not signals carrier waves or other transient media.

Various examples have been described. These and other examples are within the scope of the following claims.

