---

title: System with call forward profile
abstract: A method and system for providing call forwarding in an IP telephone network is disclosed. First, when a telephone number for a first telephone from a second telephone is dialed, the call is routing to a call manager. Call setup procedures with a BRG responsible for the first telephone are then initiated. The BRG then checks stored call forwarding profiles to determine whether there is an active call forwarding profile for the first telephone. The call is connected to the first telephone if an active call forwarding profile is not found. However, if an active call forwarding profile is found, the call forwarding information is sent to the call manager. The call is routed to at least a third telephone based on the call forwarding information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09300699&OS=09300699&RS=09300699
owner: Shoretel, Inc.
number: 09300699
owner_city: Sunnyvale
owner_country: US
publication_date: 20140115
---
This application is a continuation of U.S. patent application Ser. No. 13 278 923 filed Oct. 21 2011 which is a continuation of U.S. patent application Ser. No. 12 391 828 filed Feb. 24 2009 and issued as U.S. Pat. No. 8 054 963 which in turn is a continuation of U.S. patent application Ser. No. 11 133 030 filed May 20 2005 and issued as U.S. Pat. No. 7 496 190 which in turn is a continuation of U.S. patent application Ser. No. 09 475 144 filed Dec. 30 1999 and issued as U.S. Pat. No. 6 937 713 all of which are hereby incorporated by reference herein in their entirety.

Applicant s hereby rescind any disclaimer of claim scope in the parent grandparent great grandparent and great great grandparent applications namely U.S. application Ser. No. 13 278 923 U.S. application Ser. No. 12 391 828 U.S. application Ser. No. 11 133 030 and U.S. application Ser. No. 09 475 144 and in the prosecution histories thereof and hereby advise the US Patent and Trademark Office USPTO that the claims in this continuation application may be broader than any claim in the parent grandparent and great grandparent applications. Accordingly Applicant s notify the USPTO of a need to re visit the disclaimer of claim scope in the parent grandparent and great grandparent applications and to further re visit all prior art cited in the parent grandparent and great grandparent applications including but not limited to cited references over which any disclaimer of claim scope was made in the parent grandparent and great grandparent applications and in the prosecution histories thereof. See Hakim v. Cannon Avent Group PLC 479 F.3d 1313 Fed. Cir. 2007 . Moreover any disclaimer made in the current application should not be read into or against the parent grandparent and great grandparent.

The present invention relates to communication between users in diverse communication systems and more particularly to providing a broadband communication system including an Internet Protocol Telephony Network and public switched telephone network.

Present day telephony voice networks have a network built around circuit switches end offices a toll network tandem switches and twisted wires. These voice networks are referred to as a public switched telephone network PSTN or plain old telephone service POTS . Due to bandwidth limitations of plain old telephone service POTS there is an inherent inability to efficiently integrate multiple types of media such as telephony data communication for personal computers PC and television TV broadcasts. Accordingly a new broadband architecture is required. This new architecture gives rise to a new array of user services.

Conventional call forwarding only allows a call to be forwarded to a single predetermined number. This is inflexible and outdated considering the increasing mobility of subscribers today. There is a need for a more flexible and useful call forwarding system that allows call forwarding to a variety of numbers depending upon different dynamic factors such as time date etc. There is also a need for call forwarding features in the new IP telephone architecture.

Aspects of the invention include to providing broadband access capabilities or enhanced services for use in conjunction with a packetized network such as an Internet Protocol IP based system infrastructure.

Other aspects of the invention include providing one or more of the following either individually or in any combination or subcombination 

It is an object of the present invention to overcome the deficiencies cited above by allowing a subscriber to customize a call forwarding profile for controlling the forwarding of calls over an Internet Protocol Telephony Network.

According to one embodiment of the invention a method and system for providing call forwarding in an IP telephone network is disclosed. First when a telephone number for a first telephone from a second telephone is dialed the call is routing to a call manager. Call setup procedures with a BRG responsible for the first telephone are then initiated. The BRG then checks stored call forwarding profiles to determine whether there is an active call forwarding profile for the first telephone. The call is connected to the first telephone if an active call forwarding profile is not found. However if an active call forwarding profile is found the call forwarding information is sent to the call manager. The call is routed to at least a third telephone based on the call forwarding information.

Although the invention has been defined using the appended claims these claims are exemplary and limiting to the extent that the invention is meant to include one or more elements from the apparatus and methods described herein and in the applications incorporated by reference in any combination or subcombination. Accordingly there are any number of alternative combinations for defining the invention which incorporate one or more elements from the specification including the drawings claims and applications incorporated by reference in any combinations or subcombinations.

A new system is provided for broadband access and applications. Unless otherwise indicated by the appended claims the present invention is not limited to the preferred embodiments described in this section but is applicable to other integrated multimedia communication systems.

Referring to an exemplary embodiment of a broadband network 1. The broadband network generally provides interconnection between a plurality of customer locations utilizing various interconnection architectures including Internet Protocol IP based network various existing systems legacy systems such as the public switched telephone network PSTN ATM networks the Internet signaling networks as well as other systems. The broadband network provides versatile intelligent conduits that may carry for example Internet Protocol IP telephony or multimedia signals between the customer premises over for example the public switched telephone network Internet or wireless communication networks.

Again referring to the broadband network 1 may include one or more customer premises equipment CPE units . The customer premise equipment may be variously configured. In one example the customer premise equipment may include one or more local control devices such as a broadband residential gateway BRG . Although the broadband residential gateway is preferably disposed in a residence for many aspects of the invention in exemplary embodiments it may also be disposed in a business or other location. The broadband residential gateway may be variously configured to provide one or more integrated communication interfaces to other devices within the customer premise equipment such as televisions TV personal computers PC plain old telephone system POTS phone s video phones IP enabled phones and other devices. For example the broadband residential gateway may provide one or more telephone port connections e.g. plain old telephone system Ethernet connections coaxial connections fiber distributed data interface FDDI connections wireless local area network LAN connections firewire connections and or other connections to a plurality of devices such as plain old telephones IP based phones television converters e.g. cable television CATV set top devices televisions digital televisions high definition televisions HDTV video phones and other devices. In exemplary embodiments the broadband residential gateway may support communications between any of the aforementioned devices in intra premises calling and or extra premises calling. Further when the broadband residential gateway is used in a business environment it can function as a private branch exchange or key type telephone system.

In broadband residential gateway is illustrated as a single physical device. This configuration is appropriate where centralization of maintenance and control is desirable. Alternatively the broadband residential gateway may be separated into more than one physical device allowing functionality to be distributed to a plurality of different physical locations in the customer premise and or broadband network 1. However in many embodiments having a centralized broadband residential gateway located in a single location provides ease of maintenance control and re configuration as well as a reduction in cost due to shared functionality. For example the broadband residential gateway may be configured to provide the intelligence needed to allow each of the customer premises equipment devices to operate within the broadband network 1. For example analog voice may be converted to digital data and packetized for transmission in an appropriate output protocol such as an Internet protocol IP .

In exemplary embodiments the broadband residential gateway may function to couple devices within the customer premise equipment to the rest of the broadband network 1 using any suitable broadband communication mechanism. In the embodiment shown in the broadband residential gateway utilizes a hybrid fiber coaxial plant to couple the broadband residential gateway to the rest of the broadband network 1. The hybrid fiber coaxial plant may be preferred in many embodiments over other broadband communication mechanisms because of the large number of homes currently connected to cable networks the capacity for shared access and the ability for asymmetric data access speeds which allow high quantities of data to be distributed to the various devices in the customer premises equipment . The hybrid fiber coaxial plant may include coaxial cable and or optical fiber networks in any suitable combination. The hybrid fiber coaxial plant may provide an intelligent broadband conduit between the broadband residential gateway and a gateway such as the head end hub HEH . The head end hub may be variously configured to provide various services and or interconnections with the rest of the broadband network 1. For example the head end hub may provide an interconnection point to gather and aggregate external services e.g. off air and satellite video public switched telephone network voice multimedia messages and Internet data for distribution to and from the hybrid fiber coaxial plant . With respect to telephony and multimedia calls the head end hub may function as intelligent conduit for connection and communication between the hybrid fiber coaxial plant and external networks such as an IP network and or an ATM frame relay cell relay network .

The broadband network 1 may include any number of interconnected head end hubs IP networks and or ATM networks . Further the IP network and or ATM network may be connected to one or more other networks and devices such as 

The IP network and or ATM network may include one or more routers and or other devices to route for example telephony calls multimedia calls signaling messages administrative messages programming messages and or computer data between the various devices in the broadband network 1 such as the head end hub the public switched telephone network the private branch exchange PBX as well as the other devices discussed above. In preferred embodiments the information traveling in the IP network may be packetized and formatted in accordance with one of the Internet protocols. The IP network may also include gateways to interface with the various other networks and or devices. For example the gateways may be distributed at the edge of the IP network where the IP network interfaces with one of the other devices or networks. Alternatively the gateways interfacing the IP central station to for example the Internet public switched telephone network PSTN signaling system 7 SS7 wireless networks ATM frame cell relay networks may be provided in the IP central station or in both the IP network and the IP central station and or partially distributed between the IP network and the IP central station . Where the gateways are separated by an IP network an appropriate transport protocol may be utilized to logically connect the IP central station to the particular gateway.

The IP central station s may be connected to for example one or more FP networks ATM networks secure management data networks and or administration centers . The IP central station may be variously configured to include one or more servers and or one or more gateways. In exemplary embodiments the servers and gateways provide the necessary intelligence and traffic management capabilities to enable information e.g. IP telephony signals to travel through the broadband network 1. For example the IP central station may be configured to manage voice information transfer from the public switched telephone network through the IP network and into and out of one or more devices such as those connected to a broadband residential gateway . The IP central station may be configured to store various control and system information such as location address and or configurations of one or more broadband residential gateways as well as other routing and call set up information.

In exemplary embodiments one or more administration centers may be connected to the IP network and provide billing and local directory number portability administration. The local number portability may be handled by one or more Local Service Management System LSMS which may be included in the administration center and or in the IP central station . Further the Secure Management Data Network may also include a mechanism for transferring various information such as billing call tracking and or customer service provisioning. Various existing systems may be utilized to provide this information such as existing billing systems OSS and or one or more network operations center NOC . The network operations centers may be included in the administration center the EP central station and or the billing system . The network operations center NOC may be variously configured to include a translation server to allow communications with the various disparate entities e.g. legacy systems in the broadband network 1.

The IP network and or the ATM network illustrated in may include one or a plurality of sub networks. Each of the sub networks may include its own IP central station in a distributed configuration with certain routing data replicated across all IP central stations or each sub network may be connected to a single centralized IP central station . Where the IP network includes one or more sub networks each sub network may be connected to multiple head end hubs . Further each head end hub may be connected to multiple hybrid fiber coaxial plants and each hybrid fiber coaxial plant may be connected to multiple pieces of customer premises equipment and or broadband residential gateways . The IP network provides an interconnected broadband network which may be utilized to transport and route packetized information to and from diverse geographic locations and may be used on a national or international basis. Further the IP network and or ATM network may utilize private network facilities and or may be provisioned over a shared network such as the Internet.

The IP central station may be configured to provide connectivity for the broadband residential gateway to the Internet e.g. World Wide Web www as well as connectivity to other external networks such as public switched telephone network and signaling system 7 SS7 for end to end voice multimedia and data applications for example voice over IP telephony. IP packets traveling through the IP network provide for priority so that for example voice packets are given priority over data packets to maintain certain VoIP telephony QoS requirements and a leased line concept for packet traffic which may have an even higher priority. However the system is sufficiently flexible so that the priority can be dynamically altered according to customer preferences variable billing rates traffic patterns and or congestion.

Referring to the IP central station may be variously configured. In preferred embodiments it may be configured to ensure seamless integration of IP based communication system including the IP network with the public switched telephone network signaling system 7 SS7 network and the Internet so that packetized data for example voice calls and information data is properly transferred between the broadband residential gateway the public switched telephone network and or the Internet . In one embodiment the hybrid fiber coaxial plant head end hub and IP network provide a virtual signaling conduit for packetized voice and data which may with the coordination of the IP central station be provided in the appropriate format between the broadband residential gateway and the public switched telephone network and or Internet .

Again referring now to the IP central station may include a central router for example a gigabit switch which may be utilized to interconnect various servers and gateways contained in the IP central station . The central router provides for example Ethernet switching and aggregate traffic between servers gateways and the IP network and or ATM network backbone. In one exemplary embodiment the central router provides high speed non blocking IP and IP multicast Layer 3 switching and routing. The IP central station may include one or more of the following servers the least cost server LCS the time of day TOD server the dynamic host control protocol DHCP server the trivial file transfer protocol TFTP server and the domain name service DNS server the system management SM server the call manager CM server the announcement server AS the multimedia server MS and or the conference server CS . As illustrated in the servers may be separate servers for example the call manager server or may be incorporated into a single server. In the exemplary embodiment the dynamic host control protocol server trivial file transfer protocol server and the domain name service server are each incorporated in a single server facility. Each server in the IP central station may include computer s storage device s and specialized software for implementing particular predefined functions associated with each server. In this manner the servers in the IP central station may be provisioned as a main server and one or more back up servers to provide redundant processing capabilities. Similarly the router may be implemented as a main router and a back up router with similar routing functionality.

The IP central station may also include for example one or more of the following gateways a element management gateway EMG an accounting gateway AG an Internet Boarder gateway IG a signaling system 7 SS7 gateway SG a voice gateway VG and or a multimedia gateway MG . The IP central station may utilize one or more of these gateways to provide centralized system intelligence and control of voice and or data IP packets.

In exemplary embodiments the dynamic host control protocol server and domain name service server may operate to dynamically assign IP addresses devices in the customer premise equipment . Where a dynamic IP assignment scheme is used the customer premises equipment may be provided with one or a plurality of dynamic IP assignment when activated initially and or at the initiation of each active secession. Where an IP address is assigned when the device is initially activated it may be desirable to assign a single IP address to a single broadband residential gateway and assign a port address to devices connected to the broadband residential gateway . In other embodiments an individual IP address may be assigned to each device coupled to the broadband residential gateway . For example the broadband residential gateway may include and or be coupled to one or more cable modems IP phones plain old telephone system phones computers wireless devices CATV converters video phones and or other devices which each may be assigned a unique static and or dynamic IP address and or a port of a one of these IP addresses. The particular protocol for allocating IP addresses and or ports may be specified using protocols defined in the dynamic host control protocol server . In exemplary embodiments the dynamic host control protocol and DN server may be configured to assign available IP addresses from address pools based for example on the identity or type of requesting device the amount of use expected for the requesting device and or predefined assignment protocols defined in the dynamic host control protocol and DN server . In centralized embodiments it may be desirable to configure the call manager CM to provide sufficient information such that the domain name service server can distinguish between static IP devices dynamic IP devices registered devices unregistered devices and registered devices that have been assigned to a particular class of service e.g. data vs. telephony un provisioned vs. provisioned etc.

The trivial file transfer protocol TFTP server may be configured to transfer certain information to from one or more broadband residential gateways . In exemplary embodiments the trivial file transfer protocol server provides Data Over Cable Service Interface Specifications DOCSIS configuration information containing QoS parameters and other information required for the broadband residential gateway to operate optimally.

The time of day TOD server may include a suitable facility for maintaining a real time clock such as an RFC868 compliant time server. In exemplary embodiments the time of day server provides system messages and or responses to system inquiries containing a coordinated time e.g. universal coordinated time UCT . The universal coordinated time may be used by any of the servers and or devices in the broadband network 1. For example the broadband residential gateway may use the universal coordinated time to calculate the local time for time stamping error logs.

The system management SM server may include responsibility for the overall operational state and functioning of components the broadband network 1 either alone or in combination with other system management servers . The system management SM server may be variously configured to provide monitoring and administrative functions for devices within the broadband network 1. For example the system management server may be configured to provide management of various database functions memory buffer functions and software utility functions within the broadband network 1. Software management includes for example version control generic control and or module control.

The least cost server LCS may be variously configured to enable the system to determine the least cost routing of telephone and data transmission throughout the network. The least cost server may also provide one or more broadband residential gateway users capability to select between for example cost and Quality of Service QoS .

The announcement service AS server may be variously configured. In exemplary embodiments it may store and send announcements to specified destinations and or all destinations based on instructions received by for example the call manager CM server . The announcement server receives for example Media Gateway Control Protocol MGCP or later signaling e.g. H.GCP an ITU standard Gateway Control Protocol control messages from the call manager and sends announcements to one or more voice gateways VG and or the one or more broadband residential gateway e.g. using Real Time Protocol RTP packets . The announcement server may send an announcement once a predetermined number of times or in a continuous loop. The announcement server may detect when a phone or other device has been taken off hook and play an advertisement or other announcement to the user. Where a user has signed up for an advertising plan whereby phone rates are reduced in return for advertising revenue generated by the advertisements the announcement server may be utilized to track the number of individuals with a particular income age or other profile which hear the advertisement. The announcement server may respond to requests from individual system devices such as one of the broadband residential gateways and or under control of for example the call manager . Where the announcement server is under control of the call manager the call manager may be configured to control various operating parameters of the announcement server. For example the call manager may request that certain announcements are sent once a specified number of times or in a continuous loop.

In still further embodiments announcements may be generated elsewhere in the broadband network 1 stored as files and distributed to one or more announcement servers via a file transfer protocol or resource such as the trivial file server using one or more file transfer protocols. In many embodiments it is desirable to store announcements in an appropriate encoding format e.g. G.711 or G.729 within the Announcement Server. The announcement may have an audio component and or a audio video component. The audio video component may be stored using a combination of an encoding format e.g. G.711 and or a standard file format such as wave WAV MPEG and other suitable formats.

In one exemplary method of operation a user picks up a telephone which sends a signal to the call manager . Subsequently the call manager may establish a connection to the announcement server and play one or more pre recorded and or predetermined announcement hypertext and or audio . Signaling tones such as a busy signal may be played by the broadband residential gateway or the call manager but Special Information Tones SIT and or messages may also be included as part of an announcement file. In this way the user experience is enhanced such that the user receives a busy message and or hypertext announcement providing one of several options for contacting the called party. The announcement server may have information entered by a user using for example a broadband residential gateway to provide additional information to the called party. The additional information may include the ability to leave a message type in a chat note page the called party barge in on the call and or other user or system defined call handling capabilities.

The announcement server may also be programmed with various system messages such as an announcement indicating that a number dialed is incorrect or that the call did not go through as dialed that the lines are busy that all lines between two countries are currently busy that the called party has changed numbers that the called parties phone has been disconnected that one or more system errors have occurred and or other announcement messages.

The call manager CM may be variously configured. In exemplary embodiments the call manager provides a centralized call control center for supporting call set up and tear down in the broadband network 1. The call manager may be configured to include trunk and line information maintenance call state maintenance for the duration of a call and or user service features execution. The call manager may also provide for call processing functions such as a standardized call model for processing the various voice connections such as voice over IP calls. In exemplary embodiments a standardized open call model may be utilized which supports standardized application programming interfaces APIs to provide transport services and other user functions such as calling cards. An open application programming interface and call set up interface in the call manager will enable third party applications to be loaded into the call manager and broadband residential gateway . This will facilitate the development of third party applications for enhancing the functionality of components in the broadband network 1. For example third parties and other equipment vendors may manufacture various broadband residential gateways for use in the broadband network 1 by writing applications to support the open call model of the call manager . The call manager and or broadband residential gateway may also be configured to execute and or accept commands form a standardized scripting language which may generate instructions for the call manager and or broadband residential gateway to execute various functions. The scripting functionality may include the ability to execute an entire call model including interfaces to the signaling system 7 SS7 public switched telephone network IP network ATM frame cell relay network and or other functions within for example IP central station such as the multimedia server announcement server system management server conference server time of day server least cost server and or domain name server .

The call manager may also be configured to maintain the call states for each call it handles e.g. a voice over IP call and respond to system events created by for example the multimedia gateway control protocol MGCP messages and or integrated services digital network user part ISUP messages for signaling system 7 SS7 protocol that may occur during the processing of a call. Exemplary events handled by the call manager include call state changes call feature changes call feature triggering events changes in the status of lines and trunks and or error conditions. Further the call manager may interact with devices connected to a single circuit on the public switched telephone network and or a device connected to a port of the broadband residential gateway . In this manner new devices may be added to the infrastructure and operate using the open call model contained in the call manager .

The call manager may also include storage for subscriber and network configuration a cache server for faster access to frequently used data a routing engine for selecting an appropriate routing algorithm e.g. least cost routing and or a service broker which provides the data and logic for specific services. In addition the call manager may include an authentication AC server that provides authentication of various devices objects packets and users in the integrated multimedia system. In this manner a user may verify the identity of the calling or called party.

The call manager may interact with the signaling gateway SG the accounting gateway AG the element management gateway EMG the voice gateway VG and the multimedia gateway MG using any suitable protocol such as IP and an interconnection mechanism such as the central router . In one preferred embodiment the call manager may be configured to utilize signaling messages such as a ISUP messages over Common Object Broker Architecture COBRA interface to and or from signaling gateway b MGCP SIP simple internet protocol H.GCP and or other suitable control messages to and or from the announcement server c call event records in modified Radius format to the accounting gateway d Radius or Enhanced Radius or compatible protocol control messages to and or from the voice gateway and or the broadband residential gateways and e signaling network management protocol SNMP messages to and or from the element management gateway .

The call manager may incorporate one or more databases. For example the call manager may include database information such as 1 a resources database that provides an identification of what resources are connected to the broadband network 1 and their current state 2 a trunk gateway database that indicates which gateway serves what circuits in a trunk 3 a customer database which indicates whether a call is authorized identifies what services a line supports and determines whether a telephone number is on or off the integrated IP communication network 4 a numbering plan least cost routing database which provides routing information that enables the IP central station to choose the correct trunk as a function of the call number and 5 a local number portability LNP database that indicates the North American Numbering Plan NANP and associated prefixes which are open for association with the number portability service and 6 an address of the service control point SCP towards which requests for translating these local portability numbers should be routed.

In exemplary embodiments the broadband network 1 includes equipment compatible with the COBRA standard. COBRA may be utilized to allow applications from a plurality of vendors to operate with each other. The COBRA standard allows a company such as AT T to build its network using multi vendor equipment and yet ensure seamless integration and operation. Some of the major areas covered by COBRA v. 2.2 includes Inter ORB Bridge Support General Inter ORB Protocol GIOP support Internet Inter ORB Protocol BOP support and Environment Specific Inter ORB Protocol ESIOP support. The call manager may integrate these protocols to facilitate call set up with diverse equipment. This is advantageous in that equipment from a plurality of vendors may interoperate over the broadband network 1 without modification.

The multimedia server MS may be variously configured. For example one or more multimedia servers may provide support for multimedia messaging service and or the overall management of multimedia voice and mail messages transmitted across the broadband network 1. The multimedia server may be configured to support e mail e.g. html messages voice mail audio messages and or video mail audio and video messages. The multimedia messages may include standard pre configured system messages advertising messages and or user defined messages. In either event where the messages are stored in a centralized location the multimedia server may provide such storage. Where the multimedia server provides storage for the multimedia messages a database may be utilized for indexing storage and retrieval of such messages. In exemplary systems the user may access predetermined ones of these messages. The multimedia server may utilize IP as a method of communicating with other devices across the broadband network 1.

The conference server CS may be configured to provide for multiparty conference calls using for example IP voice packets during an IP telephony or multimedia session call. The conference server may include specialized software that runs on a computing platform having associated multiplexing and demultiplexing capability for segregating and aggregating user information packets. For example the conference server may log several calls into a conference session. When information packets are sent from one or more phones they are aggregated and sent to the other phones on the conference call. The conference server may use any suitable communication protocol such as H.GCP or SIP. The conference server may function to aggregate user information from two or more users onto a single call path. The conference server may include one or more call in numbers and be controlled from any location e.g. a centralized operator location and or one or more broadband residential gateways . It may be desirable to have the conference server configured such that some callers simply monitor the call without voice interruption while other callers have both voice transmit and receive capabilities. Where a caller is not given the privileges associated with active participation in the call voice packets from these users are discarded. For example a CEO may have a conference call with a plurality of financial advisors and invite the press to listen on the call without interruption capabilities.

The gateways in the IP central station may be configured to provide translation of signals to and or from the various servers in the IP central station the IP network the public switched telephone network the signaling system 7 SS7 network the Internet and or the secured management data SMD network . The gateways typically support one or more of the following group of functions call processing signaling system 7 SS7 connectivity billing support OAM P support connection to public switched telephone network control CoS QoS parameters and enhanced services.

The voice gateway VG may be connected to the public switched telephone network and operate to convert between IP based voice packets and standard public switched telephone network voice traffic. Voice gateway may be configured as multi frequency MF or ISUP gateways on a per T1 basis. Where multi frequency MF trunks are used one embodiment utilizes signaling between the call manager and the voice gateway using MGCP SIP H.GCP and or other compatible protocol. Multi frequency trunks may be compatible with Feature Group D FGD Operator Service OS Signaling protocol and or Termination Protocol TP .

The IP central station may be variously connected to the public switched telephone network. For example the IP central station may be connected directly to the public switched telephone network using for example a bearer channel e.g. a T1 or T3 carrier and or interconnected using one or more networks such as an IP network and or ATM frame cell relay network . Where a T1 network is utilized it may be desirable to utilize one or more of ISUP or MF FGD and OS to interconnect a service bureau in the public switched telephone network . Alternatively the service bureau in the public switched telephone network may be interconnected using an alternative network arrangement such as an IP network and or a ATM frame cell relay network . The service bureau may coordinate with the IP central station in providing operator services directory services and provisioning for 311 611 and 711 services. Emergency 911 services may be routed to an E911 tandem switch that has the appropriate databases and interfaces with a Public Safety Answering Position PSAP . Emergency 911 services may be coordinated by the call manager and or public switched telephone network based service bureau.

Voice gateway may be router based and include one or more voice feature cards and or DSP Module cards to perform voice processing. The voice gateway may optionally include host processors LAN WAN ports Ethernet ports T1 or E1 telephony interface cards Voice Feature Cards with DSP Modules providing voice compression transcoding G.711 and G.729 carrier quality echo cancellation with 8 ms 32 ms tail length a de jitter buffer which adapts to delay variations in the network in order to minimize the delay packet loss concealment that generates concealment frames for lost packets using information from previously received data and or tone detection and generation. This function detects Multi Frequency MF tones and generates MF and call processing tones e.g. dial tone call waiting tone etc. .

In exemplary embodiments the voice gateway may include T1 E1 interfaces with internal Channel Service Units CSUs . It may also be desirable to configure the voice gateway such that ISUP MF and Centralized Attendant Services CAS trunks are supported with a configuration done on a per T1 basis. Additionally multi frequency tones and Centralized Attendant Services may utilize a robbed bits communication scheme where bits are robbed from sub frames to transmit in band signaling. The multi frequency tones may be converted to and or from for example simple gateway control protocol SGCP signal requests and events by the voice gateway . For example multi frequency tones and or lower level signaling and timing functions may be translated to and or from any of the following indications simple gateway control protocol Notify functions simple gateway control protocol Notification Requests Connection requests Modify Connection requests off hook and or on hook indications.

An Ethernet interface with a RJ 45 connector may be used to connect the voice gateway to the central router e.g. Gigabit Switch or High Speed Router HSR . The multimedia gateway control protocol may be used as the interface between the voice gateway and the call manager . For example call control signaling and multimedia data stream real time protocol RTP connections IP addresses UDP ports codec choice etc may be configured in any suitable manner such as by using a multimedia gateway control protocol. In exemplary embodiments audio streams may be passed directly between customer premises equipment using real time protocol connections over for example a user datagram protocol UDP . Thus the multimedia gateway control protocol may be utilized to request the voice gateway to initiate cancel and or otherwise modify connections in order to set up and tear down RTP media streams. A similar procedure may also be utilized to request continuity tests and results.

In exemplary embodiments it may be desirable to adapt the IP network to carry signaling system 7 SS7 Transaction Capabilities Application Part TCAP messages over the IP network and or the ATM frame cell relay network . The transport of signaling system 7 SS7 transaction capabilities application part TCAP messages over the packet networks allows signaling operations to be supported by multiple connections to the same host multiple host connections and distributed processing of call set up information using for example multiple call managers in the broadband network 1. Thus the IP network and or ATM frame cell relay network may be utilized to interconnect a plurality of ESS switches to transport signaling information voice and or data. In embodiments where the signaling gateway SG is configured to support signaling system 7 SS7 signaling transport using transaction capabilities application part TCAP messages it may be desirable to include a translator for converting between multimedia gateway control protocol MGCP messages and transaction capabilities application part TCAP messages and or ISDN User Part ISUP messages.

The point where ISUP and TCAP messages are terminated at a signaling system 7 SS7 signaling gateway is defined as a Service Switching Point SSP to the signaling system 7 SS7 network . The call manager may be configured with a standardized Application Programming Interface API to allow interaction with the signaling system 7 SS7 by for example sending and or receiving ISUP and TCAP messages from a service switching point SSP . Full class 5 signaling system 7 SS7 functionality may be included in the call manager including the ability to provide all of the information necessary for billing as defined in the GR 246 Bellcore standard. The signaling gateway may be arranged to perform signaling system 7 SS7 message handling message discrimination message distribution and message routing signaling link management e.g. link activation deactivation signaling route management managing Point Code PC route status based on route received management messages such as Transfer Prohibited Transfer Allowed Transfer Restricted etc. and signaling traffic management diversion of traffic based on unavailability availability restriction of signaling link route and Point Code. The signaling system 7 SS7 architecture supports the necessary redundancy component scheme for system reliability and availability during scheduled maintenance and or software hardware upgrades. The signaling gateway may be configured to directly provide for lower level signaling system 7 SS7 processing.

In exemplary embodiments the signaling gateway interacts with the call manager using an appropriate open interface e.g. Common Object Request Broker Architecture COBRA . In these embodiments it may be desirable for translation software in the signaling gateway to add Message Transfer Part MTP layer information to the ISUP and or TCAP data to create a complete signaling system 7 SS7 message. The complete signaling system 7 message may then be sent to the Signaling Transfer Point STP in the external signaling system 7 SS7 network . Conversely the signaling gateway may be configured to remove ISUP or TCAP application layer data from the signaling system 7 SS7 messages received from the STP prior to converting the information to an appropriate open interface e.g. COBRA and forwarding the information to the call manager via the central router .

The accounting gateway AG may be configured to receive messages representing events from the call manager via a suitable transport mechanism such as the central router . Typically two messages are received for each call the first when the call is established and second when the call terminates. In the case of unsuccessful calls only the failure message will be logged. The messages provide details about the calling and called parties the timing of the call set up the duration and the quality of the call. Accounting gateway may be duplicated using a redundant computer with each gateway having dual mirrored disks. The accounting gateway stores usage records and may then distribute them to linked destinations e.g. billing centers for processing. Billing centers typically include bill processors that receive accounting information from the accounting gateway and generate appropriate on line or paper billing to customers. The accounting gateway may be configured to accommodate multiple days worth of accounting records such as the records for one day two days three days four days a week or a month. The period in which the data is retained in the accounting gateway may be dependent on business needs hardware restrictions and or the billing cycle. For example as the end of the billing cycle nears it may be desirable to shorten the period the accounting gateway holds the data such that calls placed the day the bills are printed are included on the bills. Further the accounting gateway may both retain and forward data to the billing centers. In this manner if the equipment at the billing center fails the accounting gateway may serve as a backup. Similarly the billing center may act as a backup where the accounting gateway fails.

An Automatic Message Accounting AMA format is typically used by circuit switching systems packet switching systems and other network elements to provide billing usage measurements data e.g. the Bellcore Automatic Message Accounting Format BAF . This data may be utilized either to permit charging the customer for use of network resources or to permit charging other carriers e.g. InterExchange Carrier IEC and other Local Exchange Carrier LEC for assistance in placing call connections. The accounting gateway may be configured to convert this information into an Automatic Message Accounting Format AMA Format e.g. BAF records and send these records to the external billing systems using for example a TFTP trivial file transfer protocol . Time stamp accuracy is typically based on the accuracy of the call manager clock which may be derived from the TOD server. To create appropriate AMA records the event information produced by the call manager preferably has appropriate information for the telephone service specified such as phone number of the calling party customer phone number of the called party customer time of call duration of the phone call and use of any discretionary features. Different AMA structures may be generated between On Net calls defined as within a network service provider IP network vs. Off Net calls defined as outside of service provider IP network e.g. public switched telephone network for billing purposes.

The element management gateway EMG may provide system management functionality that includes for example a status and performance monitoring for the Operation Administration Maintenance and Provisioning center to gauge the ongoing operation of applications b extensive information exchange with a network operations center responsible for ongoing maintenance of one or more applications c customizable operations interface to allow the network operations center to view only information required thus reducing the time spent filtering information d centralize distributed application configuration allowing for the centralized configuration of objects residing on a plurality machines e proactive network management capabilities to remove the need for constant operator intervention making the day to day operations more efficient and or f intelligent display of status information to separate critical issues from low priority problems allowing the operation center to assign resources to the right problems at the right time.

The multimedia gateway MG may be configured to connect to the public switched telephone network and to convert IP based multimedia packets into standard public switched telephone network traffic. The multimedia gateway may include an intelligent franking interface that communicates with the call manager for automatic trunk sizing and allocation between the IP network and the public switched telephone network . For example when an system user at the customer premises is using a PC and or a multimedia phone to communicate with a traditional public switched telephone network user the communication session involves the transmission of video and audio data. The bandwidth that is required for this type of communication is much greater than that required for a PSTN to PSTN voice call or an IP to PSTN voice call. The multimedia gateway as the interface between two systems may negotiate a larger bandwidth to facilitate the call if the called party is also video enabled. This bandwidth negotiation process typically occurs with a 5ESS or a Local Digital Switch within the public switched telephone network . Typically a multimedia call including live video audio and data will require bandwidth ranging from 56K to 1.544 Mbps. However as the number of users sharing the same link grows the quality of the transmission deteriorates significantly. The multimedia gateway must be able to monitor bandwidth usage and make appropriate adjustments so as to maintain an acceptable quality of service. Further it may be desirable for the call manager and the multimedia gateway to communicate between themselves and or the customer premises equipment to determine whether the user has authorized the additional bandwidth and hence expense of the call. For example even where a called and or calling party is video enabled it may nonetheless refuse to authorize payment for the increased bandwidth necessary for video.

The Internet gateway IG may be connected to the Internet e.g. World Wide Web www and provide a means for IP based data packets to be routed between the IP network and the Internet . Alternatively IP based voice packets may be routed via the Internet . In exemplary embodiments the Internet gateway routes data only packets which share the same priority level with other lower priority non real time traffic consistent with computer data communications presently experienced with the Internet . Consequently low priority and low latency data traffic on the IP network utilize the Internet gateway to communicate with other IP data networks such as the www. Voice packets may be routed through another network such as the ATM frame cell relay network a private IP network and or the public switched telephone network where committed information rates may be easily obtained.

In exemplary embodiments the broadband network 1 includes the interfaces which enable connections to existing Operation Maintenance and Provisioning OAM P systems that support billing accounting provisioning and or configuration management functions. A Secured Management Data SMD Network may be utilized to connect the OAM P to the accounting gateway and element management gateway . The Secure Management Data network may include a Network Service Division s NSD Net. The Secure Management Data network helps ensure that only secure communication can occur between the IP central station and the OAM P . This eliminates one potential means of tampering with the billing and provisioning functions in the OAM P. The billing systems OSS may include the Network Operations Center NOC . The NOC may include a translation server which includes functions for allowing communications and control of diverse networks.

Referring to a preferred embodiment for a broadband residential gateway BRG will now be described and explained. The broadband residential gateway may be configured as the interface unit between the remainder of the customer premise equipment devices and the external network. The broadband residential gateway may be connected to the remainder of the broadband network 1 using any suitable mechanism such as a gateway directly into an IP network and or a cable connection. In the most preferred embodiments a hybrid fiber coaxial plant connection is utilized such as hybrid fiber coaxial HFC plant . The hybrid fiber coaxial plant allows numerous broadband residential gateways to be included on an existing hybrid fiber coaxial plant without modification to the plants infrastructure.

The broadband residential gateway may be variously configured to for example provide high speed cable modem capabilities to interconnect one or more associated PCs with each other and with the remainder of the broadband network 1 provide functionality to one or more TVs using for example either an integrated or separate decoder functionality e.g. set top box one or more telephone connections such as plain old telephone service POTS phones and or digital telephones displays wireless interfaces voice processing remote control interface display interface and or administrative functions. In exemplary embodiments the broadband residential gateway may a providing conversion between analog voice and IP voice packets b multiplexing demultiplexing streams of IP voice packets c supporting multiplexing demultiplexing of multiple incoming and outgoing signals including multiple voice multimedia data system administration and or TV information signals.

Where the elements of the broadband residential gateway are interconnected the interconnection may be provided by one or more data buses for example a high speed bus HSB processor bus and or other interconnection system. The high speed bus may be configured to provide a flexible conduit for transferring information between the internal hardware processors and ports. In exemplary embodiments of the broadband residential gateway the high speed bus may include one or more of the following functional units a a universal remote control receiver module for receiving wireless e.g. infrared and or RF signals e.g. keyboard signals and or remote control signals for control of the broadband residential gateway and or any connected devices b a display display driver touch screen logic module for driving one or more local and or remote displays for interfacing with the broadband residential gateway and or one or more connected devices c one or more TV port modules for interconnecting televisions set top devices and or other audiovisual devices to the broadband residential gateway d one or more data port modules for connecting interconnecting data enabled devices e.g. personal computers palm top devices ect. e one or more telephony port modules for interconnecting one or more analog and or digital telephones f one or more peripheral port modules for interconnecting one or more peripheral devices such as disk drives data storage devices video cassette recorders DVD devices audio devices video devices e.g. camcorders digital cameras digital video recorders stereos etc. g one or more external internal intercom modules for interconnecting remote intercom and or security monitoring devices h one or more wireless interface modules for interconnecting with various wireless extension devices such as wireless TVs cordless and or wireless telephones wireless LANs etc. i one or more voice recognition voice synthesis modules for generating voice announcements voice messages and voice prompts and for recognizing voice generated commands and data j set top box module for performing the functions associated with a set top box locally and or for communicating with one or more remotely coupled set top boxes k memory e.g. DRAM RAM flash and or other memory for storing information and operating data within the broadband residential gateway l transceiver for communicating with one or more external broadband networks m operating program store e.g. ROM flash etc. for storing at least portions of the operating programs for the broadband residential gateway and or interconnected devices n security processor smart card and or credit card interface module for providing secure processing functions and or credit card smart card transaction functions and or o distributed processing controller which may be a microprocessor and or one or more interconnected distributed processing modules for controlling the broadband residential gateway . Where the distributed processing controller includes one or more distributed processing modules the modules may include a telephony processing module P1 data processing module P23 video processing module P3 auxiliary processing module P4 IP processing module P5 and or an operations administration maintenance and provisioning processing module P6 interconnected through one or more busses such as processor bus . The processor bus and or high speed bus may include any suitable interconnect bus including intelligent bus configurations incorporating smart buffer logic not shown in to facilitate data transfer between interconnected processors and or modules. The various modules and or processing components of the broadband residential gateway may be powered by for example a power supply unit not shown . Each of the individual modules of the broadband residential gateway will now be described in more detail.

The transceiver may include circuits for converting digital signals to and from RF signals suitable for transmission across a broadband network such as the hybrid fiber coaxial plant . The transceiver may include one or more input output ports such as a cable interface e.g. an F connector cable connection and or a fiber optic interface connected to a communication media e.g. hybrid fiber coaxial Plant . The transceiver may be compatible with the DOCSIS 1.0 or later specifications. For signaling purposes the broadband residential gateway may be compatible with the Media Gateway Control Protocol MGCP or other compatible signaling protocol e.g. SIP or H.GCP to support telephony applications. The transceiver may serve as a modem a translator and or a multiplexor demultiplexor. Data received from the network may be de multiplexed and placed on the data bus for dispatch to the appropriate peripherals and or ports. Data from the various ports and peripherals may be multiplexed together for distribution over one or more broadband networks e.g. the hybrid fiber coaxial HFC plant . Where a hybrid fiber coaxial plant is utilized the data may be multiplexed onto various frequency bands of the hybrid fiber coaxial plant in a continuous data stream s and or packetized data stream s . To facilitate data transfer for various networks the transceiver may be include one or more registers for data queuing and or IP tunneling of data packets across the broadband network.

Although the illustration of a display display drivers and touch screen logic device suggests that the a display is integral to the broadband residential gateway alternative embodiments of the broadband residential gateway may provide a user interface via the TV screen PC screen video telephone and or other display device in addition to or in lieu of a display integral to the broadband residential gateway .

The peripheral ports module may include a plurality of ports providing connectivity to external peripherals. Exemplary interfaces include PCI Firewire USB DB25 etc. Devices which incorporate one or more of these interfaces may utilize the broadband residential gateway to interconnect to the remainder of the broadband network 1.

The external internal Intercom Module IM may include one or more microphones speakers voice CODECs telephony processors and or interface ports. Where an intercom module is utilized the built in circuitry may be configured to detect for example unused plain old telephone system telephone s and generates a special intercom tone on these unused telephones. In this manner existing plain old telephone system telephones digital phones and or other devices may serve as an intercom throughout the residence. The controller e.g. such as the P1 telephony processor may function to command the intercom module to determine an appropriate intercom path to select an intercom connection between various locations. In exemplary embodiments the CODEC may be configured to convert the analog voice signal into IP packets for transmission over one or more data ports TV ports display modules telephony ports peripheral ports external internal intercom ports wireless interface ports and or set top boxes .

In yet further embodiments multiple broadband residential gateways may be configured through for example IP tunneling to set up an intercom connection between multiple remote broadband residential gateways . In this manner an administrative assistant at the office may be contacted via an intercom connection present at the users home. Thus one or more individuals disposed at either local and or remote locations with diverse types of equipment may communicate as an intercom group without the need to communicate via normal dialing procedures.

In addition to intercom services the intercom module may also configure intercom services for other telephony services e.g. extension transfer call conferencing internal caller ID high speed data services e.g. LAN connections facsimile transmission reception e mail transmission reception video conferencing and or CATV HDTV Cable Television High Definition Television using standard industry protocols such as DOCSIS 1.0 or higher and IP tunneling transmissions. These services are advantageous in that once configured the user may simulate a work environment in his home.

Though processing may be accomplished by a single processor performing all functions e.g. processing controller in the preferred embodiment shown in the architecture employs a distributed processing controller and a plurality of processors P1 P6 . In the distributed processing architecture each of the plurality of processors P1 P6 may be configured to have a dedicated function to provide predetermined services or applications. The processors may be coupled together via any suitable mechanism such as the processor bus and or high speed bus HSB . The first processor P1 may include telephony applications such as call set up call tear down and call functions the second processor P2 may include management functions such as distribution and coordination of data within the various devices of the broadband residential gateway the third processor P3 may include video processing functions for configuring control panels screen displays of attached devices video conference calls MPEG decoding functions and other video processing functions the fourth processor P4 may include an auxiliary processor for off loading special processing functions such as numeric processing the fifth processor P5 may include interface input output processing e.g. text to voice and vise versa and or Internet protocol IP processing functions for configuring data to communicate with the remainder of the broadband network 1 and or devices attached to the broadband residential gateway such as IP telephones or IP enable PCs and the sixth processor P6 may include processing functions for Operation Maintenance and Provisioning OAM P processing. Each of the above processors may be an entirely separate processing unit with included RAM ROM Flash memory or may share RAM ROM and or Flash memory. Where shared RAM ROM and or Flash memory is utilized the memory may be located within the distributed processor controller and or on the processor bus . Alternatively the memory may be integrated into the operating program store and or into memory .

The Distributed Processing Controller with its associated processors P1 P6 may be coupled to the various elements of the broadband residential gateway so as to enable proper operation of each of the individual components. For example the distributed processing controller with any associated processors P1 P6 may also coupled to the security processor smart card credit card and interface module the peripheral port s module and or the External Internal Intercom Module for providing control and coordination among devices coupled to the high speed bus .

The display may include for example an interactive LED LCD module positioned in a suitable location such as within or attached to the broadband residential gateway . The display may include an interface to notify display and receive user inputs and processing status. The display may be configured to display various informational status such as multimedia mail called ID call logs call in progress and associated information call waiting information call conferencing and or other call related information. The display may provide a display of real time status of the various devices connected to the broadband residential gateway as well as any current connections calls and or data transfers. The display may also include touch screen capabilities that allow information to be input via a plurality of interrelated on screen prompts on screen icons and or a keypad e.g. an alphanumeric keyboard . The keypad may be a remote control numeric keyboard and or alphanumeric keyboard.

In one embodiment of the display operation a user may touch an icon representing a pending voicemail and or multimedia mail message. The panel may be configured to send an electronic signal to the processing controller and or an attached processor such as the telephony processor. On receiving the signal the P1 telephony processor may be configured to generate an IP packet via the transceiver across portions of the broadband network 1 to the multimedia server in IP central station . The multimedia server may authenticate the request by for example verifying location of the request and or the identity of the requesting party. Where identity of the calling party is being verified the user enter an access password by an audio and or keyboard request. Where an audio request is generated the user may utilize the external internal intercom module of the broadband residential gateway or via a text message entered into the display . The user may then enter the appropriate access code via the onscreen soft keypad microphone and or keyboard. Alternatively the message could be stored locally in the broadband residential gateways memory and depending on whether there is a password lock on the broadband residential gateway the user may not have to enter a password to access the message. Where the message is stored locally in the broadband residential gateways memory rather than IP central station the display simply recalls the message from memory and presents to the user to provide one touch instant message retrieval.

In embodiments where the broadband residential gateway supports multiple mailboxes the icons on the LCD LED may be personalized to show the identity of the owner of the message. Each user may have a different password to ensure privacy of access. An activity log which tracks past and present messages and or archives multimedia messages may be presented on display . The archive may be stored locally or at a remote location such as IP central. The archive may be utilized by the user to recall messages which have long since been erased from local storage but may be retrieved from IP central on tape and or disk storage. This is preferably an optional feature for those users who are less security conscious. The multimedia messages need not be displayed only on display . In alternate embodiments any of the peripheral devices attached to the broadband residential gateway are capable of receiving the multimedia messages.

The memory may be variously configured to include one or more field upgradeable card slots for permitting memory expansion. Certain users may wish to enable higher end applications such as near video on demand e.g. pausing of shows via buffering in memory video conferencing of multiple users multi party conferences call waiting for multiple parties etc. Accordingly the use of a broadband residential gateway allows the user to upgrade memory via inserting additional cards. Alternatively the user may use system memory in IP central and buffer data remotely.

Operating program store may be configured to receive updates. This may be accomplished by having the user replace one or more memory cards or automatically by the IP central station downloading new operating code into one or more residential gateways .

As previously indicated smart buffer logic SBL may be coupled to the telephony port s data port s TV port s peripheral port s and or the distributed processing controller DPC . Where the smart buffer logic is utilized it may function to buffer the IP packets for delivery over the communication network such as the hybrid fiber coaxial plant . In addition the smart buffer logic may include selectable switching and routing algorithms based on services and applications associated with each port. Depending on the destination of the IP traffic the smart buffer logic may multiplex signal from various devices to effect faster information transfer. The smart buffer logic may also allow direct memory access between memory and one or more of the devices and or ports coupled to the high speed bus .

The telephony port s may include various interface circuitry e.g. analog interface logic and firmware for interfacing with the Plain Old Telephone POTs telephones . Also the telephony port s may also be configured to include user interface logic voice processing logic voice activity detector logic voice CODECs and DTMF dual tone multi frequency tone sensing logic. Echo cancellation and automatic gain control may also be utilized in the telephony port s circuitry. In one embodiment RJ 11 connectors for a plurality of lines e.g. 4 are provided for connection to one or more existing plain old telephone system telephone units. However the broadband residential gateway may contain any number of telephone connection ports. In this manner any number of existing user phone may connected directly to the broadband residential gateway without modification. Alternatively the broadband residential gateway can be configured to support in addition to or as alternative to the plain old telephone system telephone units ISDN telephones and or other digital phones e.g. IP telephones using an appropriate interface.

The data port s interface may be variously configured. In one configuration the data ports include high speed data service connections to for example a personal computer PC using a LAN connection. For example the data ports may include an Ethernet 802.3 connection compatible with category 5 unshielded twisted pair UTP cable and a RJ 45 connector. The data port s may include the necessary interface circuitry for coupling to remote computers.

The TV port s may include an interface for conventional television HDTV and or CATV services. The TV port s typically have one or more F connectors used for coaxial cable connection to a TV set s . The TV ports may be configured to connect to a set top box STB via the F connector or directly to a remote television. In embodiments where the settop box is co located with the television the data supplied over the TV ports may be either analog and or digital information. Where the settop box is integrated into and or comprises the broadband residential gateway the TV ports may be analog or compatible with HDTV signals.

The broadband residential gateway need not necessarily be limited to home use and is intended to also be utilized in business applications. In some configurations the broadband residential gateway may serve the same functions and operate as a private branch exchange PBX . Where greater capacity is desired one or more broadband residential gateways may be disposed on a PC card and combined in a PC rackmount and or server to create an expandable private branch exchange type system that enables intra premises calling between telephones connected to various telephone connectors on the broadband residential gateway .

Where the broadband residential gateway is coupled to the hybrid fiber coaxial plant in accordance with a preferred embodiment of the present invention it may be configured to provide the user with both information data e.g. through an Ethernet interface telephony access and TV service e.g. HDTV Digital TV and or CATV services . In exemplary embodiments the hybrid fiber coaxial plant typically includes both coaxial cable and optical fiber networks though where desired the network may include only coaxial cable or optical fiber. The hybrid fiber coaxial plant may be coupled to a head end hub HEH . The head end hub may provide an interconnection point to gather and or transform external services e.g. off air and satellite video public switched telephone network voice and Internet data into a format suitable for distribution on the hybrid fiber coaxial plant for use with the customer premise equipment . The head end hub may include one or more cable modem termination systems CMTS coupled between the hybrid fiber coaxial plant a Head end HE and or an Edge Router ER . The edge router may be coupled to the cable modem termination system and to one or more ultra high speed routers UHR . One or more ultra high speed routers may be interconnected to each other and or through a centralized mechanism such as an IP network database to form a high speed network. The high speed packet network is one example of the network e.g. IP network shown in .

In the embodiment shown in the high speed network includes the ultra high speed routers UHR configured in a ring configuration. Although this embodiment shows the use of the IP network database IND other configurations are also suitable. Where an IP network database is utilized it may be desirable to incorporate one or more data sets such as a IP local number portability database IP LNP which may be utilized for transferring local DN among service providers when a user changes their service provider an IP caller name database IP CNAME which may be utilized to provide a database of names relating to IP addresses and or domain names an IP line information database IP LIDB which may provide alternative billing and allow flexibility in determining who pays for a call and an IP 1 800 Database IP 8YY which may provide a database of 1 800 numbers relating to the IP network . Alternatively the IP local number portability database may be located at another location such as at an IP central station IP Central . Where desired a local service management system LSMS may be arranged to provide management of the IP local number portability database. Where a local service management system is utilized a plurality of local service order administration LSOA units may be coupled to the local service management system by for example a number portability administration center NPAC . In this manner directory numbers may be transported among different service providers. In such a case a NPAC is generally coupled to the LSMS and uses the LSMS to synchronize the numbering databases and to coordinate the porting process.

As indicated above the broadband network 1 may include a plurality of interconnected high performance networks . Each high performance network may include a separate IP central station and or share a single IP central station. Having distributed IP central stations located throughout the broadband network 1 provides improved performance and quicker response time for an individual user. Although not illustrated each high performance network may be connected to multiple head end hubs each head end hub may be connected to multiple hybrid fiber coaxial plants and each hybrid fiber coaxial plant may be connected to a plurality of customer premises equipment each containing one or more broadband residential gateways . The plurality of high performance networks may be configured as an interconnected network for routing packetized information from point to point in accordance with a desired destination.

The high performance network may be configured to provide connectivity for and between a plurality of head end hubs and or a plurality of broadband residential gateways and other networks such as the Internet e.g. www the public switched telephone network PSTN and or various signaling systems such as the SS7 network for end to end voice over IP applications. The IP central station may be configured to provide seamless integration and control of the high performance network e.g. an IP based communication system interface with the public switched telephone networks PSTN signaling system seven SS7 and or the Internet so that packetized data voice calls and other signaling information is properly transferred between the broadband residential gateway and the public switched telephone network and Internet . In certain configurations the hybrid fiber coaxial head end hub and high performance network provide a signal conduit for packetized voice and data which may with the coordination of the IP central station be provided in the appropriate format between the broadband residential gateway the public switched telephone network and or the www .

The typical home user is currently required to purchase multiple intelligent data conduits such as multiple set top boxes a plurality of conventional DSL and or ISDN phones cable modems HDTV receivers satellite receivers home PC LANs etc. The integrated communication system of the present invention provides a user friendly versatile communication system that enables voice over IP telephony information data e.g. PC and Internet and television services in a system with one intelligent customer premise equipment interface the broadband residential gateway . The broadband residential gateway in conjunction with the IP central station provides a flexible communication system that can provide any number of integrated communication service features and functions without requiring the user to become familiar with numerous diverse types of equipment.

In one exemplary application of the voice over IP operations the broadband residential gateway digitizes the analog telephony signal using for example G.711 law coding 64 Kbps Pulse Code Modulation . The digital samples may then be packetized in for example the broadband residential gateway into IP packets. The broadband residential gateway may be configured to encapsulate the IP packets into for example DOCSIS Data Over Cable Service Interface Specifications frames for transmission back to the head end hub HEH over the hybrid fiber coaxial plant . The hybrid fiber coaxial plant may then be configured to transport signals for both upstream to head end hub and downstream to the broadband residential gateway and customer premise equipment directions. Although the DOCSIS protocol is utilized in this example any future protocol may also be used for the digitizing and packeting of data. Where the protocol changes it may be desirable to download new operating code from for example IP central station to the individual broadband residential gateways to update the communication protocols dynamically. When new protocols are adopted the IP central station may utilize for example the system management server to download new protocol data into for example the protocol manager in the call manager and the program store in the broadband residential gateway .

Where voice packets are sent over constant bit rate CBR channels using unsolicited grants additional packet data channels may be used to support signaling messages e.g. SGCP Simple Gateway Control Protocol high speed cable modem service and or other upstream packet data services. The upstream packet data services may be sent using available bit rate ABR channels such that the voice channels not impacted by data traffic.

The head end may originate CATV signals for transmission over the distribution network. However in alternate embodiments signals may be inserted at other points in the distribution network such as at various hubs or may arise at remote locations in the network such as IP central. Down stream channels may be utilized to facilitate the transmission of signals from the head end or other input distribution point to the subscriber premise. Where analog RF signals arrive at the broadband residential gateway of the customer premise equipment typically the transceiver circuitry will detect if the signal is addressed to this broadband residential gateway . If so the transceiver will allow reception of the RF signal. Upon conversion to a digital format the signal is typically output over the high speed bus HSB to one or more associated devices for processing. For example where the signal is a TV signal the signal may be output directly to the TV port and or processed by the settop box prior to outputting to the TV ports and or display . Where user channel selection is preformed directly in the broadband residential gateway channel selection may be preformed by remote control receiver using an external device such as a remote control. The remote control receiver may receive a plurality of individually coded remote control commands from different receivers and process the signals for only one associated device in accordance with the received commands. Alternative channel inputs include the display and or any associated keypad. Authorization to certain channels may be controlled by security processor .

Where a remote settop box is utilized the box may be coupled directly to the HFC for individual frequency tuning and or receive a digital feed from the broadband residential gateway after decoding the digital signal. For example where hybrid fiber coaxial plant contains fiber connections to locations near the individual homes it may be desirable to download one or more simultaneous individually requested programming stream s and or digital data stream s to the broadband residential gateway . In this manner the number of channels movie selections and or entertainment options available to the user are unlimited. Cost is minimized since only a single intelligent user interface is used in the home and all televisions phones computers and or other user interface devices use the same intelligent user interface to the broadband network 1. In this manner the broadband network 1 may offer premium television voice and or data services to multiple conventional televisions phones and PCs without the use of multiple set boxes modems and external connections. Thus the users are provided a single unified interface to satisfy their external data needs.

Although the IP voice packets for these calls are typically routed over the IP network the system may where appropriate route IP voice packets over the Internet .

According to one embodiment of the present invention a subscriber can create a customized call forwarding profile for controlling the forwarding of calls to the subscriber over the IP telephony network. The subscriber can create multiple call forwarding profiles which are then stored in the BRG associated with the telephone or elsewhere in the IP telephony network. The call forwarding profiles may be created by the subscriber using a PC connected to the Broadband Residential Gateway BRG . The BRG can pro user through the PC to select various criteria set forth below. Alternatively the PC can have appropriate software for communicating with the BRG and setting up the call forwarding profile. Alternatively the call forwarding profile can be created using the BRG directly. For example the subscriber can create the call forwarding profile by entering or selecting the appropriate information displayed on the touch sensitive screen. In addition the call forwarding profile can be created by speaking into the microphone on the BRG. For example the subscriber could say Create call forwarding Profile and then list a plurality of telephone numbers. Alternatively the subscriber might be prompted by a series of questions from the BRG regarding the creation or modification of a call forwarding profile. In either case the subscriber s spoken words are recognized by the BRG s voice recognition device. Alternatively the call forwarding profile may be created and or stored in the IP network itself such as in a database accessible by the Call Manager.

Each call forwarding profile may point to one or more in any combination of the following types of call forwarding services 

For example a subscriber may wish to have calls forwarded from his home to his office during the work day from either his home or office to his cellular phone during rush hour while the subscriber is traveling to and from the office and from his office to his home during the evening. The subscriber may further have all calls from the subscriber s spouse always forwarded to the subscriber s cellular phone at all times except on weekends.

When a desired call forwarding profile is created and selected by the subscriber the profile will remain active until the user disables deletes the profile. Once the call forwarding profile is created the subscriber may store the profile on the PC connected to the BRG and the profile may be downloaded to the BRG. The BRG may be equipped with a flash memory for storing the call forwarding profile. In such an embodiment where a call forwarding profile has been activated by the subscriber when a call arrives the BRG first checks it s flash memory for active call forwarding features as listed in the call forwarding profile. The distributed intelligence in the PC and BRG greatly enhances the flexibility and user friendliness for IP telephony customers. Alternatively where the call forwarding profile is stored in the IP network the Call Manager may refer to the call forwarding profile for activating the appropriate call forwarding features.

Optionally an alerting parameter in the call delivery message may be used to instruct the called Broadband Residential Gateway BRG to generate a distinctive ringing tone on the forwarded phone to notify the subscriber that the call is a forwarded call and not a call originally directed to the forwarded phone. The alerting Parameter is inserted into the call delivery message by the Call Manager.

Although the present invention has been described in relation to particular preferred embodiments thereof many variations equivalents modifications and other uses will become apparent to those skilled in the art. It is preferred therefore that the present invention be limited not by the specific disclosure herein but only by the appended claims.

