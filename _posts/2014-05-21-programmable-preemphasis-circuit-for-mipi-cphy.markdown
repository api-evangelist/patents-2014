---

title: Programmable pre-emphasis circuit for MIPI C-PHY
abstract: System, methods and apparatus are described that improve signaling in a three-wire multiphase communication link. A method for data communications includes determining a transition in signaling state of three wires of a communication link between a pair of consecutive symbols transmitted on the communication link, and enhancing or attenuating energy of a signal prior to the transition in signaling state of the three wires when the transition in signaling state includes a change in signaling state of a wire on which the signal is transmitted. Each symbol may define a different signaling state of the three wires of the communication link. For each symbol transmitted, two of the three wires are differentially encoded and the third wire is in a neutral state. Different wires are differentially encoded during transmission of consecutive symbols.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09148198&OS=09148198&RS=09148198
owner: QUALCOMM Incorporated
number: 09148198
owner_city: San Diego
owner_country: US
publication_date: 20140521
---
The present disclosure relates generally to high speed data communications interfaces and more particularly signaling in multi wire multi phase data communication links.

Manufacturers of mobile devices such as cellular phones may obtain components of the mobile devices from various sources including different manufacturers. For example an application processor in a cellular phone may be obtained from a first manufacturer while the display for the cellular phone may be obtained from a second manufacturer. The application processor and a display or other device may be interconnected using a standards based or proprietary physical interface. For example a display may provide an interface that conforms to the Display System Interface DSI standard specified by the Mobile Industry Processor Interface Alliance MIPI .

Higher frequency components of a high speed signal traveling through a channel can be significantly attenuated due to channel bandwidth limitations and the degree of attenuation may correlate to the frequency of the signal. The losses of high frequency components can cause inter symbol interference ISI and can increase jitter. A commonly used compensation technique employs pre emphasis at the transmitter which may also be referred to as feed forward equalization FFE . FFE can be employed in single ended and differential line drivers but has limited effect on other types of drivers.

In one example a three wire interface C PHY defined by MIPI uses a trio of conductors rather than differential pairs to transmit information between devices. Each of the three wires may be in one of three signaling states during transmission of a symbol over the C PHY interface. Clock information is encoded in a sequence of symbols transmitted on the C PHY link and a receiver generates a clock signal from transitions between consecutive symbols. In a C PHY interface the maximum speed of the communication link and the ability of a clock data recovery CDR circuit to recover clock information may be limited by the maximum time variation related to transitions of signals transmitted on the different wires of the communication link.

Embodiments disclosed herein provide systems methods and apparatus that enable improved communications on a multi wire and or multiphase communications link. The communications link may be deployed in apparatus such as a mobile terminal having multiple Integrated Circuit IC devices.

In an aspect of the disclosure a method for data communications includes determining a transition in signaling state of three wires of a communication link between a pair of consecutive symbols transmitted on the communication link and enhancing or attenuating energy of a signal prior to the transition in signaling state of the three wires when the transition in signaling state includes a change in signaling state of a wire on which the signal is transmitted. Each symbol may define a different signaling state of the three wires of the communication link. During transmission of a first symbol in the pair of consecutive symbols a first wire of the three wires and a second wire of the three wires may be at voltage levels that have different polarities from one another with respect to a reference voltage level. During transmission of a second symbol in the pair of consecutive symbols the first wire and a third wire of the three wires may be at the voltage levels that have different polarities from one another.

In another aspect the reference voltage level is defined by the third wire during transmission of the first symbol and the reference voltage level is defined by the second wire during transmission of the second symbol.

In another aspect the energy of the signal is enhanced when the transition in signaling state of the three wires includes a polarity change of the signal. The energy of the signal may be attenuated when the transition in signaling state of the three wires does not include a polarity change of the signal.

In another aspect enhancing or attenuating the energy of the signal includes pre emphasizing the signal by initiating the transmission of the second symbol before the transmission of the first symbol is terminated.

In another aspect the energy of the signal is enhanced when the change in signaling state of the wire on which the signal is transmitted results in a swing in a difference voltage measured between two of the three wires that exceeds the maximum voltage range of the signal.

In another aspect the energy of the signal is enhanced or attenuated based on signaling state of all three wires after the transition. The energy of the signal may be enhanced or attenuated based on changes in relative signaling states of each pairing of wires in the three wires. The energy of the signal may be enhanced or attenuated based on changes in the signaling state of all three wires. Enhancing or attenuating energy of a signal may include enabling or disabling a set of driver circuits coupled to the wire on which the signal is transmitted.

In an aspect of the disclosure an apparatus includes means for determining a transition in signaling state of three wires of a communication link between a pair of consecutive symbols transmitted on the communication link and means for enhancing or attenuating energy of a signal prior to the transition in signaling state of the three wires when the transition in signaling state includes a change in signaling state of a wire on which the signal is transmitted. Each symbol may define a different signaling state of the three wires of the communication link. A first wire of the three wires and a second wire of the three wires may be at voltage levels that have different polarities from one another with respect to a reference voltage level during transmission of a first symbol in the pair of consecutive symbols. The first wire and a third wire of the three wires may be at the voltage levels that have different polarities from one another during transmission of a second symbol in the pair of consecutive symbols.

In an aspect of the disclosure an apparatus includes a processing circuit configured to determine a transition in signaling state of three wires of a communication link between a pair of consecutive symbols transmitted on the communication link and to enhance or attenuate energy of a signal prior to the transition in signaling state of the three wires when the transition in signaling state includes a change in signaling state of a wire on which the signal is transmitted. Each symbol defines a different signaling state of the three wires of the communication link. During transmission of a first symbol in the pair of consecutive symbols a first wire of the three wires and a second wire of the three wires may be at voltage levels that have different polarities from one another with respect to a reference voltage level. During transmission of a second symbol in the pair of consecutive symbols the first wire and a third wire of the three wires may be at the voltage levels that have different polarities from one another.

In an aspect of the disclosure a processor readable storage medium has one or more instructions stored or maintained thereon. The instructions when executed by at least one processing circuit cause the at least one processing circuit to determine a transition in signaling state of three wires of a communication link between a pair of consecutive symbols transmitted on the communication link and enhance or attenuate energy of a signal prior to the transition in signaling state of the three wires when the transition in signaling state includes a change in signaling state of a wire on which the signal is transmitted. Each symbol defines a different signaling state of the three wires of the communication link. During transmission of a first symbol in the pair of consecutive symbols a first wire of the three wires and a second wire of the three wires are at voltage levels that have different polarities from one another with respect to a reference voltage level. During transmission of a second symbol in the pair of consecutive symbols the first wire and a third wire of the three wires are at the voltage levels that have different polarities from one another.

Various aspects are now described with reference to the drawings. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of one or more aspects. It may be evident however that such aspect s may be practiced without these specific details.

As used in this application the terms component module system and the like are intended to include a computer related entity such as but not limited to hardware firmware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a computing device and the computing device can be a component. One or more components can reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers. In addition these components can execute from various computer readable media having various data structures stored thereon. The components may communicate by way of local and or remote processes such as in accordance with a signal having one or more data packets such as data from one component interacting with another component in a local system distributed system and or across a network such as the Internet with other systems by way of the signal.

Moreover the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from the context the phrase X employs A or B is intended to mean any of the natural inclusive permutations. That is the phrase X employs A or B is satisfied by any of the following instances X employs A X employs B or X employs both A and B. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from the context to be directed to a singular form.

Certain aspects of the invention may be applicable to communications links deployed between electronic devices that are subcomponents of a mobile apparatus such as a telephone a mobile computing device an appliance automobile electronics avionics systems etc. Examples of a mobile apparatus include a cellular phone a smart phone a session initiation protocol SIP phone a laptop a notebook a netbook a smartbook a personal digital assistant PDA a satellite radio a global positioning system GPS device a multimedia device a video device a digital audio player e.g. MP3 player a camera a game console a wearable computing device e.g. a smartwatch a health or fitness tracker etc. an appliance a sensor a vending machine or any other similar functioning device.

The communication link may include multiple channels and . One or more channel may be bidirectional and may operate in half duplex and or full duplex modes. One or more channel and may be unidirectional. The communication link may be asymmetrical providing higher bandwidth in one direction. In one example described herein a first communications channel may be referred to as a forward link while a second communications channel may be referred to as a reverse link . The first IC device may be designated as a host system or transmitter while the second IC device may be designated as a client system or receiver even if both IC devices and are configured to transmit and receive on the communications link . In one example the forward link may operate at a higher data rate when communicating data from a first IC device to a second IC device while the reverse link may operate at a lower data rate when communicating data from the second IC device to the first IC device .

The IC devices and may each include a processor or other processing and or computing circuit or device . In one example the first IC device may perform core functions of the apparatus including maintaining wireless communications through a wireless transceiver and an antenna while the second IC device may support a user interface that manages or operates a display controller and may control operations of a camera or video input device using a camera controller . Other features supported by one or more of the IC devices and may include a keyboard a voice recognition component and other input or output devices. The display controller may include circuits and software drivers that support displays such as a liquid crystal display LCD panel touch screen display indicators and so on. The storage media and may include transitory and or non transitory storage devices adapted to maintain instructions and data used by respective processors and and or other components of the IC devices and . Communication between each processor and its corresponding storage media and and other modules and circuits may be facilitated by one or more internal bus and and or a channel and or of the communication link .

The reverse link may be operated in the same manner as the forward link and the forward link and reverse link may be capable of transmitting at comparable speeds or at different speeds where speed may be expressed as data transfer rate and or clocking rates. The forward and reverse data rates may be substantially the same or differ by orders of magnitude depending on the application. In some applications a single bidirectional link may support communications between the first IC device and the second IC device . The forward link and or reverse link may be configurable to operate in a bidirectional mode when for example the forward and reverse links and share the same physical connections and operate in a half duplex manner. In one example the communication link may be operated to communicate control command and other information between the first IC device and the second IC device in accordance with an industry or other standard.

The communication link of may be implemented according to MIPI specifications for C PHY and may provide a wired bus that includes a plurality of signal wires denoted as M wires . The M wires may be configured to carry N phase encoded data in a high speed digital interface such as a mobile display digital interface MDDI . The M wires may facilitate N phase polarity encoding on one or more of the channels and . The physical layer drivers and may be configured or adapted to generate N phase polarity encoded data for transmission on the communication link . The use of N phase polarity encoding provides high speed data transfer and may consume half or less of the power of other interfaces because fewer drivers are active in N phase polarity encoded data communication links .

The physical layer derivers and or e.g. N phase polarity encoding devices can typically encode multiple bits per transition on the communication link . In one example a combination of 3 phase encoding and polarity encoding may be used to support a wide video graphics array WVGA 80 frames per second LCD driver IC without a frame buffer delivering pixel data at 810 Mbps for display refresh.

Signaling states defined for each of the 3 wires in a 3 wire 3 phase polarity encoding scheme may include an undriven state a positively driven state and a negatively driven state. The positively driven state and the negatively driven state may be obtained by providing a voltage differential between two of the signal wires and or also referred to as connectors and or conductors and or by driving a current through two of the signal wires and or connected in series such that the current flows in different directions in the two signal wires and or . The undriven state may be realized by placing an output of a driver of a signal wire or in a high impedance mode. Alternatively or additionally an undriven state may be obtained on a signal wire or by passively or actively causing an undriven signal wire or to attain a voltage level that lies substantially halfway between positive and negative voltage levels provided on driven signal wires and or . Typically there is no significant current flow through an undriven signal wire or . Signaling states defined for a 3 wire 3 phase polarity encoding scheme may be denoted using the three voltage or current states 1 1 and 0 .

A 3 wire 3 phase polarity encoder may employ line drivers to control the signaling state of connectors and . The drivers may be implemented as unit level current mode or voltage mode drivers. In one example each driver may receive sets of two or more of signals and that determine the output state of corresponding connectors and . In one example the sets of two signals and may include a pull up signal PU signal and a pull down signal PD signal that when high activate pull up and pull down circuits that drive the connectors and toward a higher level or lower level voltage respectively. In this example when both the PU signal and the PD signal are low the connectors and may be terminated to a mid level voltage.

For each transmitted symbol interval in an M wire N phase polarity encoding scheme at least one signal wire or is in the midlevel undriven 0 voltage or current state while the number of positively driven 1 voltage or current state signal wires or is equal to the number of negatively driven 1 voltage or current state signal wires or such that the sum of current flowing to the receiver is always zero. For each symbol the state of at least one signal wire or is changed from the symbol transmitted in the preceding transmission interval.

In operation a mapper may receive and map 16 bit data to 7 symbols . In the 3 wire example each of the 7 symbols defines the states of the signal wires and for one symbol interval. The 7 symbols may be serialized using parallel to serial converters that provide a timed sequence of states for each wire and . The sequence of states is typically timed using a transmission clock. A 3 wire 3 phase encoder receives the sequence of states representing the sequence of 7 symbols produced by the mapper one symbol at a time and computes the state of each signal wire and for each symbol interval. The 3 wire encoder selects the states of the signal wires and based on a current input symbol and the previous states of signal wires and

The use of M wire N phase encoding permits a number of bits to be encoded in a plurality of symbols where the bits per symbol is not an integer. In the simple example of a 3 wire communications link there are 3 available combinations of 2 wires which may be driven simultaneously and 2 possible combinations of polarity on the pair of wires that is driven yielding 6 possible states. Since each transition occurs from a current state 5 of the 6 states are available at every transition. The state of at least one wire is required to change at each transition. With 5 states log 5 2.32 bits may be encoded per symbol. Accordingly a mapper may accept a 16 bit word and convert it to 7 symbols because 7 symbols carrying 2.32 bits per symbol can encode 16.24 bits. In other words a combination of seven symbols that encode five states has 5 78 125 permutations. Accordingly the 7 symbols may be used to encode the 2 65 536 permutations of 16 bits.

Information may be encoded in the direction of rotation at each phase transition and the 3 phase signal may change direction for each signaling state. Direction of rotation may be determined by considering which wires and or are in the 0 state before and after a phase transition because the undriven wire and or changes at every signaling state in a rotating three phase signal regardless of the direction of rotation.

The encoding scheme may also encode information in the polarity of the two conductors and or that are actively driven. At any time in a 3 wire implementation exactly two of the conductors are driven with currents in opposite directions and or with a voltage differential. In a simple implementation data may be encoded using two bit values where one bit is encoded in the direction of phase transitions and the second bit is encoded in the polarity for the current state.

The timing chart illustrates data encoding using both phase rotation direction and polarity. The curves and relate to signals carried on three wires and respectively for multiple phase states. Initially the phase transitions are in a clockwise direction and the most significant bit is set to binary 1 until the rotation of phase transitions switches at a time to a counterclockwise direction as represented by a binary 0 of the most significant bit. The least significant bit reflects the polarity of the signal in each state.

According to certain aspects disclosed herein one bit of data may be encoded in the rotation or phase change in a 3 wire 3 phase encoding system and an additional bit may be encoded in the polarity of the two driven wires. Additional information may be encoded in each transition of a 3 wire 3 phase encoding system by allowing transition to any of the possible states from a current state. Given 3 rotational phases and two polarities for each phase 6 states are available in a 3 wire 3 phase encoding system. Accordingly 5 states are available from any current state. Accordingly there may be log 5 2.32 bits encoded per symbol transition which allows the mapper to accept a 16 bit word and encode it in 7 symbols.

N Phase data transfer may use more than three wires provided in a communication medium such as a bus. The use of additional signal wires that can be driven simultaneously provides more combinations of states and polarities and allows more bits of data to be encoded at each transition between states. This can significantly improve throughput of the system and reduce the power consumption over approaches that use multiple differential pairs to transmit data bits while providing increased bandwidth.

In one example an encoder may transmit symbols using 6 wires with 2 pairs of wires driven for each state. The 6 wires may be labeled A through F such that in one state wires A and F are driven positive wires B and E negative and C and D are undriven or carry no current . For six wires there may be 6 4 6 6 4 4 15 possible combinations of actively driven wires with 4 2 4 4 2 2 6 different combinations of polarity for each phase state.

Of the 4 wires driven the possible combinations of two wires driven positive and the other two must be negative . The combinations of polarity may include 

Accordingly the total number of different states may be calculated as 15 6 90. To guarantee a transition between symbols 89 states are available from any current state and the number of bits that may be encoded in each symbol may be calculated as log 89 6.47 bits per symbol. In this example a 32 bit word can be encoded by the mapper into 5 symbols given that 5 6.47 32.35 bits.

The general equation for the number of combinations of wires that can be driven for a bus of any size as a function of the number of wires in the bus and number of wires simultaneously driven 

The wire state decoder may extract a sequence of symbols from phase encoded signals received on the wires and . The symbols are encoded as a combination of phase rotation and polarity as disclosed herein. The wire state decoder may include a CDR that extracts a clock that can be used to reliably capture symbols from the wires and . A transition occurs on least one of the wires and at each symbol boundary and the CDR may be configured to generate the clock based on the occurrence of a transition or multiple transitions. An edge of the clock may be delayed to allow time for all wires and to have stabilized and to thereby ensure that the current symbol is captured for decoding purposes.

Certain transitions between transmitted symbols may be detectable by a single differential receiver or while other transitions may be detected by two or more of the differential receivers and . In one example the states or relative states of two wires may be unchanged after a transition and the output of a corresponding differential receiver or may also be unchanged after the phase transition. In another example both wires in a pair of wires and or may be in the same state in a first time interval and both wires may be in a same second state in a second time interval and the corresponding differential receiver or may be unchanged after the phase transition. Accordingly a clock generation circuit may include transition detect circuits and logic to monitor the outputs of all differential receivers and in order to determine when a phase transition has occurred The clock generation circuit may generate a receive clock based on detected phase transitions.

Changes in signaling states of the 3 wires may be detected at different times for different combinations of the wires and or . The timing of detection of signaling state changes may vary according to the type of signaling state change that has occurred. This result of this variability is illustrated in the simplified timing chart of . Markers and represent transitions identified by the transition change detection circuitry and or identifiable in the outputs of the differential receivers and . The markers and are assigned different heights in the timing chart for clarity of illustration only and the relative heights of the markers and are not intended to show a specific relationship to voltage or current levels polarity or weighting values used for clock generation or data decoding. The timing chart illustrates the effect of timing of transitions associated with symbols transmitted in phase and polarity on the three wires and . In the timing chart transitions between some symbols may result in variable capture windows and or collectively symbol capture windows during which symbols may be reliably captured. The number of state changes detected and their relative timing can result in jitter on the clock signal .

Variability in the sizes of the symbol windows and jitter may be caused in part by the electrical characteristics of the wires and as illustrated in the simple example depicted in . The throughput of a C PHY communications link may be affected by duration and variability in signal transition times. For example variability in detection circuits may be caused by manufacturing process tolerances variations and stability of voltage and current sources and operating temperature. Certain impediments to accomplishing higher data rates are attributable to channel bandwidth and its increased effect on higher frequency components of digital signals. For example attenuation of the higher frequencies can affect signal rise and fall times. In conventional line drivers pre emphasis circuits may be provided whereby the pre emphasis circuits operate to increase the detection of transitions at the receiver. Some pre emphasis circuits may affect the timing of signals by initiating a transition early or terminating a transition late. Other pre emphasis circuits may increase the current flow provided by the driver during transitions. However these pre emphasis techniques may not be applicable in C PHY interfaces.

In particular large variability in signal transition times can be attributed to the existence of multiple different voltage or current levels used in 3 phase signaling. A simplified voltage level example is depicted in which illustrates transition times in a single wire or . A first symbol Syminterval for a first symbol may end at time a second symbol Syminterval for a second symbol may end at time and a third symbol Syminterval for a third symbol may end at time when a fourth symbol Syminterval for a fourth symbol begins. The transition from a state determined by the first symbol to the state corresponding to the second symbol may be detected after a delay attributable to the time taken for voltage in the wire or to reach a threshold voltage and or . The threshold voltages may be used to determine the state of the wire or . The transition from a state determined by the second symbol to the state for the third symbol may be detected after a delay attributable to the time taken for voltage in the wire or to reach one of the threshold voltages and or . The transition from a state determined by the third symbol to the state for the fourth symbol may be detected after a delay attributable to the time taken for voltage in the wire or to reach a threshold voltage and or . The delays and may have different durations which may be attributable in part to the different voltage or current levels associated with the 3 states and consequent different transition magnitudes.

In each of the examples shown in the timing charts and the initial symbol z see transitions to a different symbol. As shown in the timing charts and signal A is initially in a 1 state signal B is in a 0 state and signal C is in the 1 state. Accordingly the differential receivers initially measure a 1 difference and the differential receiver measures a 2 difference as shown in the timing charts for the differential receiver outputs.

In a first example of timing charts a transition occurs from symbol z to symbol x see in which signal A transitions to a 1 state signal B transitions to a 1 state and signal C transitions to a 0 state with the differential receiver transitioning from 1 difference to a 2 difference differential receiver remaining at a 1 difference and differential receiver transitioning from 2 difference to a 1 difference .

In a second example of timing charts a transition occurs from symbol z to symbol z in which signal A transitions to a 1 state signal B remains at the 0 state and signal C transitions to a 1 state with two differential receivers and transitioning from 1 difference to a 1 difference and differential receiver transitioning from 2 difference to a 2 difference .

In a third example of timing charts a transition occurs from symbol z to symbol x in which signal A remains at the 1 state signal B transitions to the 1 state and signal C transitions to a 0 state with the differential receiver transitioning from a 1 difference to a 2 difference the differential receiver transitioning from a 1 difference to a 1 difference and the differential receiver transitioning from 2 difference to a 1 difference .

These examples of timing charts include examples of transitions in difference values spanning 0 1 2 3 4 and 5 levels. Pre emphasis techniques used for typical differential or single ended serial transmitters were developed for two level transitions and may introduce certain adverse effects if used on a MIPI C PHY signal. In particular a pre emphasis circuit that overdrives a signal during transitions may cause overshoot during transitions spanning 1 or 2 levels and may cause false triggers to occur in edge sensitive circuits.

According to certain aspects of the disclosure a pre emphasis circuit for MIPI C PHY driver may implement the mathematical equation d n d n a d n 1 on every conductor as discussed below. illustrates the effect of pre emphasis on some transitions related to the examples and illustrated in . Certain pre emphasis circuits for MIPI C PHY driver are disclosed that compensate for channel loss by pre amplifying high frequency signal energy at transitions.

The first pre emphasis circuit can be configured or adapted to implement the equation d n d n a d n 1 by controlling a portion a of bits in a symbol based on a signaling state associated with the preceding symbol and using an emphasis amplitude control signal . As illustrated in pre emphasis at signal transitions in MIPI C PHY interface may be performed based on the nature of transition on a wire. For example signal energy may be enhanced when the differential signal polarity changes as illustrated for several signals and in . Attenuation may be provided when the differential signal polarity remains unchanged as illustrated for one signal in . This approach enables a received 1 or 1 to be more easily distinguished.

The amount of pre emphasis applied can also be controlled by selecting a portion of the output circuits in the driver that respond to pre emphasis control. The multiplexers and may be addressed in a manner that enables the pull up circuits and pull down circuits based on the bit setting of the prior symbol. Thus for example a maximum portion M N of the output circuits in the driver may be allocated for pre emphasis and desired pre emphasis level can be programmed using an N bit register emp con N 1 0 by assigning a logic 1 value to M bits emp con M 1 0 of the N bit register and assigning a logic 0 value to the remainder of the bits in the of the N bit register. The circuit illustrated in can be easily implemented and used for compensating heavy channel loss. However in some instances the 50 ohm output matching impedance may not be guaranteed due to the change of termination resistor value on mid level wire.

In operation signal amplitude may be pre emphasized to compensate for probable loss of amplitude after large swing transitions thereby improving signal quality and bit error rate at the receiver. In one example the heaviest differential signal amplitude loss occurring in the example transition may affect the CA difference signal when signal A experiences a large swing transition from 1 to 1 without application of pre emphasis. The control logic may determine that pre emphasis is required after this transition. To ensure that an accurate 50 ohm output impedance is provided to each signal wire at the terminals a complementary pre emphasis may be performed on signal B . In another example pre emphasis may not be required for the example transition of because no large swing transition occurs.

The control logic may be configured to judge the case for pre emphasis for each signal at each symbol transition. The control logic may distinguish between different circumstances and may decide whether or not emphasis action is needed for the current symbol. In some instances both the control signals and pull up pull down signals may be resynchronized by the symbol clock order to eliminate glitches in the output signals attributable to combinational logic delays. Accordingly the output signals may be delayed by one symbol cycle.

Each of the three sections and drives one phase of the 3 phase signaling scheme used on the MIPI C PHY interface. A pull up section receives a pull up signal that indicates when the connector is to be driven to the high voltage level a pull down section receives a pull down signal that indicates when the connector is to be driven to the low voltage level and a mid level section receives a signal that indicates when the connector is to be terminated to the mid level voltage. It will be appreciated that any one of the three input signals or can be derived from the other two input signals and or .

In the example the multiplexers for each of the pull up and pull down sections and may be configured as two sets of multiplexers where one set provides inputs to 2N M drive circuits and the other set provides inputs to M pre emphasis drive circuits . A total of 2N drive circuits is provided in each section. In the mid level termination section all 2N drive circuits are operated as a single set of 2N drive circuits . The number N may be calculated such that 2N drive circuits provide a desired terminating impedance at the terminal . In one example each drive circuit of the sets of drive circuits and may be based on the output circuit shown in .

The pre emphasis circuit may be operated synchronously and driven by a clock signal that is derived from the system clock or from a transmitter clock which may have a frequency that is a multiple of the symbol clock for the MIPI C PHY interface. The same clock signal may be provided to or generated by the control logic .

At step the device may enhance or attenuate energy of a signal prior to the transition in signaling state of the three wires when the transition in signaling state includes a change in signaling state of a wire on which the signal is transmitted. During transmission of a first symbol in the pair of consecutive symbols a first wire of the three wires and a second wire of the three wires are at voltage levels that have different polarities from one another with respect to a reference voltage level. During transmission of a second symbol in the pair of consecutive symbols the first wire and a third wire of the three wires are at the voltage levels that have different polarities from one another.

In one example the reference voltage level is defined by the third wire during transmission of the first symbol and the reference voltage level is defined by the second wire during transmission of the second symbol.

In another example the energy of the signal is enhanced when the transition in signaling state of the three wires includes a polarity change of the signal. The energy of the signal may be attenuated when the transition in signaling state of the three wires does not include a polarity change of the signal.

In another example enhancing or attenuating the energy of the signal includes pre emphasizing the signal by initiating the transmission of the second symbol before the transmission of the first symbol is terminated.

In another example the signal has a maximum voltage range and the energy of the signal is enhanced when the change in signaling state of the wire on which the signal is transmitted results in a swing in a difference voltage measured between two of the three wires that exceeds the maximum voltage range.

In another example the energy of the signal is enhanced or attenuated based on signaling state of all three wires after the transition. The energy of the signal may be enhanced or attenuated based on changes in relative signaling states of each pairing of wires in the three wires. The energy of the signal may be enhanced or attenuated based on changes in the signaling state of all three wires. Enhancing or attenuating energy of a signal may include enabling or disabling a set of driver circuits coupled to the wire on which the signal is transmitted.

The processor may include a microprocessor a controller a digital signal processor a sequencer a state machine etc. The processor is responsible for general processing including the execution of software stored on the computer readable storage medium . The software when executed by the processor causes the processing circuit to perform the various functions described supra for any particular apparatus. The computer readable storage medium may also be used for storing data that is manipulated by the processor when executing software. The processing circuit further includes at least one of the modules and . The modules and or may include software modules running in the processor resident stored in the computer readable storage medium one or more hardware modules coupled to the processor or some combination thereof.

In one configuration the apparatus includes means for determining a transition in signaling state of three wires of a communication link between a pair of consecutive symbols transmitted on the communication link and means for enhancing or attenuating energy of a signal prior to the transition in signaling state of the three when the transition in signaling state includes a change in signaling state of a wire on which the signal is transmitted.

The aforementioned means may be implemented for example using some combination of a processor or physical layer drivers or and storage media and .

It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplary approaches. Based upon design preferences it is understood that the specific order or hierarchy of steps in the processes may be rearranged. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but is to be accorded the full scope consistent with the language claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed as a means plus function unless the element is expressly recited using the phrase means for. 

