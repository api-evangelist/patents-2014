---

title: Operating group resources in sub-groups and nested groups
abstract: The present invention provides a method, a group server, and an apparatus for operating a group resource; a member resource operation request sent to a member device carries an operation request identifier, so that the member device that the member resource belongs to determines, according to the operation request identifier, whether operation request identifiers stored by the member device include the operation request identifier, and processes the member resource operation request according to a determination result. Therefore, repeated processing or cyclic processing of the member resource operation request may be avoided.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09438601&OS=09438601&RS=09438601
owner: Huawei Technologies Co., Ltd.
number: 09438601
owner_city: Shenzhen
owner_country: CN
publication_date: 20141118
---
This application is a continuation of U.S. patent application Ser. No. 14 145 844 filed on Dec. 31 2013 which is a continuation of International Application No. PCT CN2012 078742 filed on Jul. 17 2012. The International Application claims priority to Chinese Patent Application No. 201210050131.1 filed on Feb. 29 2012. The aforementioned patent applications are hereby incorporated by reference in their entireties.

The present invention relates to the field of machine to machine communications Machine to Machine Communications M2M technologies and in particular to management of group resources in sub groups and nested groups.

Machine to machine communications Machine to Machine Communications M2M is a network based application and service focusing on intelligent machine to machine interaction. The M2M technology embeds a wireless or wired communication module and an application processing logic into a machine to implement data communication without manual intervention so as to satisfy information requirements of a user in various aspects such as monitoring commanding and scheduling data collection and measurement. In an M2M architecture in the prior art a communication method oriented to a group resource is described. In this method an M2M application an M2M platform an M2M terminal an M2M gateway and each application or a first data object running on the M2M terminal and M2M gateway are all regarded as a representational state transfer REpresentational State Transfer style of RESTful resources a universal resource identifier Universal Resource Identifier URI is used to identify an application or a data object and various group resources are created to perform a group operation for the above multiple resources.

In some common M2M services a user may create a group to simultaneously perform same operations for member resources such as the M2M terminal or gateway included in the group resource. It is understandable that the created group resource is also a resource and that the group resource includes resources of the group resource itself and member resources included in the group resource. The resources of the group resource itself may be an identifier of the group resource a group server that the group resource belongs to a state for example whether it is a stateful group resource and so on. Further the member resources included in the group resource may be a list of member resources and may also be a mapping of member resource related information in the group resource. The member resources in the M2M group resource may belong to a local group server or may also belong to a remote group server. However in some cases either of two group resources may be a member resource of the other group resource. For example in an intelligent safe guard system a regional police station can set monitoring groups in neighboring communities to be mutually inclusive and when an alarm occurs mutual aid may be provided according to the actual condition. For another example in a future smart home system a user may perform group management for electrical appliances such as a lamp a door and a window and metering at home or on behalf of another family member. Consider a specific example when children consider that parents are old and therefore a group of electrical appliances at the home of the parents may be nested to help the parents to perform management. In such case for example the system may help to close the windows when it rains confirm closure of doors and windows at night and turn off all electrical appliances. Similarly in an instance where the parents consider that the children are busy on work and always on business trips and a group of electrical appliances at the home of the children may also be nested to help the children to take care of the family. In another case a same member resource may be included by two group resources.

In the above cases when group resources are mutually inclusive an error indicating that an operation request sent to a group resource is sent cyclically between the mutually inclusive group resources may be caused and when a same member resource is included by at least two group resources an error indicating that an operation request directed to the at least two group resources is executed repeatedly may be caused.

The method group server and apparatus for operating a group resource according to embodiments of the present invention can avoid repeated processing or cyclic processing of an operation request directed to a member resource.

In one aspect the present invention provides a method for operating a group resource including receiving an operation request directed to a member resource generating a first operation request identifier for the operation request directed to the member resource and sending a first member resource operation request to a member device that the member resource belongs to where the first member resource operation request includes the first operation request identifier so that the member device that the member resource belongs to determines according to the first operation request identifier whether operation request identifiers stored by the member device include the first operation request identifier and processes the first member resource operation request according to a determination result.

Optionally the operation request directed to the member resource carries a group resource identifier of a group resource that the member resource belongs to and before the generating a first operation request identifier for the operation request directed to the member resource the method further includes determining according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated includes determining according to the group resource identifier that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource and determining that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated includes determining according to the group resource identifier that a sub group resource included in the group resource identified by the group resource identifier is a remote group resource or determining according to the group resource identifier that a member resource included in the group resource identified by the group resource identifier includes the group resource identified by the group resource identifier and determining that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally before the generating a first operation request identifier for the operation request directed to the member resource the method further includes determining that the operation request directed to the member resource is an update request.

Optionally the method further includes receiving a second member resource operation request where the second member resource operation request includes a second operation request identifier determining that a stored list of operation request identifiers includes the second operation request identifier and returning an error response to a sender of the second member resource operation request or determining that the stored list of operation request identifiers does not include the second operation request identifier storing the second operation request identifier and performing the operation indicated in the second member resource operation request or the method further includes receiving a second member resource operation request where the second member resource operation request includes a second operation request identifier and a sub group resource identifier and when determining that the stored list of operation request identifiers includes the second operation request identifier returning an error response to the sender of the second member resource operation request or when determining that the stored list of operation request identifiers does not include the second operation request identifier sending a third member resource operation request to a member device that a member resource included in the sub group resource identified by the sub group resource identifier belongs to.

In another aspect the present invention provides a method for operating a group resource including receiving a second member resource operation request determining that the second member resource operation request carries a second operation request identifier and determining whether a stored list of operation request identifiers includes the second operation request identifier and processing the second member resource operation request according to a determination result.

Optionally when the second member resource operation request further carries a sub group resource identifier the processing the second member resource operation request according to a determination result includes when determining that the stored list of operation request identifiers includes the second operation request identifier returning an error response to a sender of the second member resource operation request or when determining that the stored list of operation request identifiers does not include the second operation request identifier sending a third member resource operation request to a member device that a member resource included in a sub group resource identified by the sub group resource identifier belongs to or when the second member resource operation request does not carry a sub group resource identifier the processing the second member resource operation request according to a determination result includes when determining that the stored list of operation request identifiers includes the second operation request identifier returning an error response to the sender of the second member resource operation request or when determining that the stored list of operation request identifiers does not include the second operation request identifier storing the second operation request identifier and performing an operation indicated in the second member resource operation request.

Optionally the method further includes receiving an operation request directed to a member resource generating a first operation request identifier for the operation request directed to the member resource and sending a first member resource operation request to a member device that the member resource belongs to where the first member resource operation request includes the first operation request identifier so that the member device that the member resource belongs to determines according to the first operation request identifier whether operation request identifiers stored by the member device include the first operation request identifier and processes the member resource operation request according to a determination result.

Optionally the operation request directed to the member resource carries a group resource identifier of a group resource that the member resource belongs to and before the generating a first operation request identifier for the operation request directed to the member resource the method further includes determining according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated includes determining according to the group resource identifier that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource and determining that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated includes determining according to the group resource identifier that a sub group resource included in the group resource identified by the group resource identifier is a remote group resource or determining according to the sub group resource identifier that a member resource included in the sub group resource identified by the sub group resource identifier includes the group resource identified by the group resource identifier and determining that the first operation request identifier for the operation request directed to member resource needs to be generated.

Optionally before the generating the operation request identifier for the operation request directed to the member resource the method further includes determining that the member resource operation request is an update request.

In another aspect the present invention provides a group server including a receiving module configured to receive an operation request directed to a member resource a generating module configured to generate a first operation request identifier for the operation request directed to the member resource and a sending module configured to send a first member resource operation request to a member device that the member resource belongs to where the first member resource operation request includes the first operation request identifier so that the member device that the member resource belongs to determines according to the first operation request identifier whether operation request identifiers stored by the member device include the first operation request identifier and processes the first member resource operation request according to a determination result.

Optionally the operation request directed to the member resource carries a group resource identifier of a group resource that the member resource belongs to and the group server further includes a determining module configured to determine according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining module is specifically configured to determine according to the group resource identifier that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource and determine that the first operation request identifier for the operation request directed to the member resource needs to be generated or the determining module is specifically configured to determine according to the group resource identifier that a sub group resource included in the group resource identified by the group resource identifier is a remote group resource or determine according to the group resource identifier that a member resource included in the group resource identified by the group resource identifier includes the group resource identified by the group resource identifier and determine that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the group server further includes an operation request determining module configured to determine that the operation request directed to the member resource is an update request.

Optionally the receiving module is further configured to receive a second member resource operation request where the second member resource operation request includes a second operation request identifier and the group server further includes a judging module configured to determine that a stored list of operation request identifiers includes the second operation request identifier and return an error response to a sender of the second member resource operation request or configured to determine that the stored list of operation request identifiers does not include the second operation request identifier store the second operation request identifier and perform an operation indicated in the second member resource operation request or the receiving module is further configured to receive a second member resource operation request where the second member resource operation request includes a second operation request identifier and a sub group resource identifier and the group server further includes a judging module configured to determine that the stored list of operation request identifiers includes the second operation request identifier and return an error response to the sender of the second member resource operation request or configured to determine that the stored list of operation request identifiers does not include the second operation request identifier and send a third member resource operation request to a member device that a member resource included in a sub group resource identified by the sub group resource identifier belongs to.

In still another aspect the present invention provides an apparatus for operating a group resource including a receiving module configured to receive a second member resource operation request a determining module configured to determine that the member resource operation request carries a second operation request identifier and a judging module configured to determine whether a stored list of operation request identifiers includes the operation request identifier and process the second member resource operation request according to a determination result.

Optionally when the second member resource operation request further carries a sub group resource identifier the judging module is specifically configured to determine that the stored list of operation request identifiers includes the second operation request identifier and return an error response to a sender of the second member resource operation request or determine that the stored list of operation request identifiers does not include the second operation request identifier and send a third member resource operation request to a member device that a member resource included in a sub group resource identified by the sub group resource identifier belongs to or when the second member resource operation request does not carry a sub group resource identifier the judging module is specifically configured to determine that the stored list of operation request identifiers includes the second operation request identifier and return an error response to the sender of the second member resource operation request or determine that the stored list of operation request identifiers does not include the second operation request identifier store the second operation request identifier and perform an operation indicated in the second member resource operation request.

Optionally the receiving module is further configured to receive an operation request directed to a member resource and the apparatus further includes a generating module configured to generate a first operation request identifier for the operation request directed to a member resource and a sending module configured to send a first member resource operation request to a member device that the member resource belongs to where the first member resource operation request includes the first operation request identifier so that the member device that the member resource belongs to determines according to the first operation request identifier whether operation request identifiers stored by the member device include the first operation request identifier and processes the first member resource operation request according to a determination result.

Optionally the operation request directed to the member resource carries a group resource identifier of a group resource that the member resource belongs to and the determining module is further configured to determine according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining by the determining module according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated includes determining according to the group resource identifier that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource and determining that the first operation request identifier for the operation request directed to the member resource needs to be generated or determining according to the group resource identifier that a sub group resource included in the group resource identified by the group resource identifier is a remote group resource or determining according to the group resource identifier that a member resource included in the group resource identified by the group resource identifier includes the group resource identified by the group resource identifier and determining that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining module is further configured to determine that the operation request directed to a member resource is an update request.

As seen from the technical solutions provided by embodiments of the present invention a member resource operation request sent to a member device carries an operation request identifier so that the member device that the member resource belongs to determines according to the operation request identifier whether operation request identifiers stored by the member device include the operation request identifier and processes the member resource operation request according to a determination result. Therefore subsequent repeated processing of the member resource operation request by the member device may be avoided.

The following clearly and completely describes the technical solutions according to the embodiments of the present invention with reference to the accompanying drawings in the embodiments of the present invention. Apparently the embodiments in the following description are merely a part rather than all of the embodiments of the present invention. All other embodiments obtained by persons of ordinary skill in the art based on the embodiments of the present invention without creative efforts shall fall within the protection scope of the present invention.

It should be noted that in the embodiment of the present invention a group server may generate an operation request identifier after receiving an operation request directed to a member resource and send a member resource operation request carrying the operation request identifier and the same group server may also receive from other group servers a member resource operation request carrying an operation request identifier. Therefore for the purpose of differentiation the member resource operation request sent by the group server or an apparatus for operating a group resource is referred to as a first member resource operation request where the operation request identifier carried in the first member resource operation request is a first operation request identifier. The member resource operation request received by the same group server or the same apparatus for operating a group resource is referred to as a second member resource operation request where the identifier carried in the second member resource operation request is a second operation request identifier. That is in the first member resource operation request and the second member resource operation request and in the first operation request identifier and the second operation request identifier first and second are only for differentiating names and have no technical sense.

Specifically a group server receives the operation request directed to a member resource in a group resource. The operation request directed to the member resource includes a group resource identifier of the group resource that the member resource belongs to.

For example the first group server receives a request for accessing the member resource included in the group resource with the group resource identifier Grp1 GET http g1.example.org groups grp1 membersContent data HTTP 1.11 where Grp1 is a group resource identifier membersContent indicates that the request is an operation request directed to all member resources in the group resource corresponding to Grp1 and data is an instance of suffix data and is used to indicate that the request specifically should access the data data of each member resource. Certainly the operation request directed to the member resource may also be a request such as a member resource update request or a member resource deletion request. In other optional modes the group resource identifier may also be a name of the group resource a URL indicating the group resource and so on which is not limited herein by the embodiment of the present invention.

Step Generate an operation request identifier for the operation request directed to the member resource.

Specifically the group server may determine according to the group resource identifier that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource. In an embodiment of the present invention herein the sub group resource is a group resource that is used as a member resource included in other group resource for example Group 2 included in Group 1 is a sub group resource of Group 1 and because Group 1 is also included in Group 2 Group 1 is also a sub group resource of Group 2. In the case shown in of the embodiment of the present invention group resources Group 1 and Group 2 form group nesting.

When the group server determines that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource the determination may be performed according to a list of member resources included in the group resource.

The group server may determine according to the group resource identifier Grp2 included in the list of member resources included in Group 1 that Group 1 includes a sub group resource Grp2 that is used as a member resource.

The sub group resource included in the group resource may be a group resource set in the group server or may also be a group resource usually referred to as a remote group resource set in other group servers. As seen from the above mutual nesting is allowed between group resources that is in Group 2 serves as a sub group resource of Group 1 and Group 1 also serves as a sub group resource of Group 2.

Step Send a member resource operation request to a member device that the member resource belongs to where the member resource operation request includes the operation request identifier so that the member device that the member resource belongs to determines according to the operation request identifier whether operation request identifiers stored by the member device include the operation request identifier and processes the member resource operation request according to the determination result.

Specifically according to the list of member resources included in the group resource the group server sends a member resource operation request to the member device that the member resource belongs to. If the list of member resources included in the group resource includes a sub group resource as shown in with respect to the Group 1 member resource operation request the group server sends the member resource operation request to the member device that the member resource included in Group 1 belongs to namely the group server that the sub group resource Group 2 belongs to the device that Member 1 belongs to and the device that the Member 2 belongs to.

In all embodiments of the present invention unless otherwise specified the group server in M2M may be an M2M platform an M2M gateway or an M2M device. That is in the M2M network any device gateway and platform capable of storing and maintaining group resources and having service middleware may serve as a group server. In addition the resource in the embodiment of the present invention may be an M2M application an M2M platform an M2M terminal an M2M gateway and each application or a first data object running on the M2M terminal and M2M gateway and so on group nesting is not limited to the M2M service field and the solution of the present invention is also applicable to other applications with nested groups and repeated members including groups such as the email group and the contact group in an address book.

As seen from the technical solutions provided by embodiments of the present invention a member resource operation request sent to a member device carries an operation request identifier so that the member device that the member resource belongs to determines according to the operation request identifier whether operation request identifiers stored by the member device include the operation request identifier and processes the member resource operation request according to a determination result. is a flowchart of a method for a group server to process a received member resource operation request according to an embodiment of the present invention where the operation request identifier in the request is a mandatory parameter and the method includes the following steps 

Step A group server receives an operation request directed to a group resource. Specifically the operation request directed to a group resource may be an operation request directed to a member resource. The operation request directed to a member resource may be the access request directed to a member resource in step or an update request directed to a member resource or other requests which is not limited herein by the embodiment of the present invention where the operation request directed to a member resource includes a group resource identifier of the group resource that the member resource belongs to.

Alternatively the operation request directed to a group resource received by the group server may be a member resource operation request carrying a REQ ID where the member resource operation request may also carry a sub group resource identifier of a sub group resource that is used as a member resource.

Step The group server determines whether the operation request directed to a group resource carries the operation request identifier REQ ID and if the operation request directed to a group resource does not carry the REQ ID the operation request directed to a group resource is an operation request directed to a member resource of the group resource and the group server performs step or otherwise the operation request directed to a group resource is a member resource operation request and step is performed.

Step The group server generates the REQ ID for the operation request directed to a group resource and records the generated REQ ID.

In the embodiment of the present invention the REQ ID generated by the group server is a unique identifier of the operation request directed to a member resource. Specifically the REQ ID may be obtained by performing a hash encryption algorithm for the identifier of the group server such as the address of the group server plus a random number generated by the group server.

However in the embodiment of the present invention the REQ ID may be carried in a message header or message body of the operation request directed to a member resource which is not limited herein by the embodiment of the present invention.

In addition after generating the REQ ID the group server further needs to store the generated REQ ID. Specifically the group server may store the REQ ID as a group resource attribute in the group resource for example requestTag so as to indicate that the first group server has processed the operation request directed to a member resource corresponding to the REQ ID.

Step After the group server determines that the received operation request directed to a group resource carries the REQ ID namely after determining that the operation request directed to a group resource is a member resource operation request the group server compares the carried REQ ID with the REQ ID recorded in the group resource attribute requestTag and processed by the group server and determines whether a list recorded in the requestTag stores a REQ ID same as the carried REQ ID. If the REQ ID carried in the member resource operation request is stored in the list recorded in the requestTag step is performed or otherwise step is performed.

Step If the member resource operation request carrying the REQ ID does not carry a sub group resource identifier the group server performs the operation indicated in the member resource operation request carrying the REQ ID and stores the REQ ID carried in the member resource operation request into the group resource attribute requestTag or if the member resource operation request carrying the REQ ID further carries a sub group resource identifier the group server sends a third member resource operation request to a member device that a member resource included in the sub group resource identified by the sub group resource identifier belongs to and stores the REQ ID carried in the member resource operation request into the group resource attribute requestTag. The third member resource operation request is generated according to the second member resource operation request and is directed to each member resource included in the sub group resource identified by the sub group identifier.

Certainly adding the attribute requestTag to the group resource to record the REQ ID carried in the member resource operation request is only one way of recording the REQ ID. In addition the group server may maintain the list REQ IDs of requests processed by each group or maintain the list by using other feasible methods which is not limited herein by the embodiment of the present invention. For simplicity no repeated explanation and stress are provided in the following steps and embodiments and the requestTag method is used as an example for description.

Step The group server determines that the REQ ID carried in the member resource operation request is stored in the list recorded in the requestTag. In this case the operation indicated in the member resource operation request corresponding to the carried REQ ID has been processed. The group server returns an error response loop detected loop detected to the sender of the member resource operation request other group servers indicating that the request message is sent repeatedly.

Step The group server receives from each member device a response message for the member resource operation request and aggregates the response message returned by each member device.

Certainly if the response message received by the group server includes an error response returned by the member device the group server may ignore the error response returned by each member device in an optional mode the group server may also aggregate the error responses.

Specifically the operation request directed to a group resource may be an operation request directed to a member resource. The operation request directed to the member resource may be the access request directed to a member resource in step or an update request directed to a member resource or other requests which is not limited herein by the embodiment of the present invention where the operation request directed to a member resource includes a group resource identifier of the group resource that the member resource belongs to.

Alternatively the operation request directed to a group resource received by the group server is a member resource operation request carrying a REQ ID where the member resource operation request may also carry the group resource identifier of the group resource that the member resource belongs to.

Step The group server determines whether the operation request directed to a group resource carries the operation request identifier REQ ID and if the operation request directed to a group resource does not carry the REQ ID the operation request directed to a group resource is an operation request directed to a member resource and step is performed or otherwise the operation request directed to a group resource is a member resource operation request and step is performed.

Step The group server determines whether the received operation request is an update request and if so performs step or otherwise performs step .

Step The group server determines according to the group resource identifier carried in the operation request directed to a member resource whether the group resource identified by the group resource identifier includes a sub group resource subgroup that is used as a member resource and if the group resource identified by the group resource identifier includes a sub group resource subgroup that is used as a member resource performs step or otherwise performs step .

Step The group server determines whether the sub group resource subgroup included in the group resource is a remote sub group resource remote subgroup . If so the group server performs step otherwise the group server performs step .

In the embodiment of the present invention the remote sub group resource is a group resource created by other group servers and the group resource created by the other group servers that is used as a member resource of the group resource identified by the group resource identifier is carried in the operation request directed to a member resource. For example assuming that the received member resource operation request is GET http g1.example.org groups grp3 membersContent data HTTP 1.1 the group server receiving the member resource operation request is g1 and the group resource identifier carried in the operation request directed to a member resource is grp3 assuming that the member resources included in the group resource Group 3 corresponding to the group resource identifier grp3 are as follows 

the group server g1 determines according to the member resource Grp4 http g4.example.com groups grp4 that the group server that the group resource Group 4 corresponding to grp4 belongs to is g4 rather than g1. Therefore the sub group resource Group 4 included in Group 3 is a remote sub group resource. Specifically in step the group server determines that the sub group resource Group 4 included in the group resource Group 3 includes a remote sub group resource Group 4 .

Step The group server determines whether the group resource assumed to be a group resource identified by the group resource identifier carried in the operation request directed to a member resource has a nested group. In other words the group server determines whether the member resource included in the group resource includes a sub group resource and whether the member resource included in the sub group resource includes a group resource that is whether the group resource identified by the group resource identifier carried in the operation request directed to a member resource and the sub group resource included in the group resource are sub group resources of each other. Further the group server obtains the list of member resources included in the group resource and the list of member resources included in the sub group resource namely the subgroup resource when the member resource included in the group resource includes a sub group resource assumed to be a subgroup resource and then determines whether the member resource included in the sub group resource includes the group resource namely the group resource identified by the group resource identifier carried in the operation request directed to a member resource.

In an embodiment assuming that the received member resource operation request is GET http g1.example.org groups grp1 membersContent data HTTP 1.1 

In this case group resources Group 1 and Group 2 respectively have a nested group. In this step the group server g1 needs to determine whether Group1 has a nested group according the member resource included in the member resource Group 2 included in Group 1 and in this case the group server needs to obtain the list of member resources of the member resource Group 2 included in Group 1. The foregoing group server that Group 2 belongs to and the group server that Group 1 belongs to are both g1 therefore g1 may easily obtain the member resource included in Group 2.

Assuming that the access address of the member resource Group 2 included in Group 1 is Grp2 http g2.example.org groups grp2 the g1 further needs to obtain the member resource included in Group 2 from the group server g1 according to the access address of Group 2 namely Grp2 http g2.example.org groups grp2. In an optional mode during execution of the present invention when the group server g1 determines that the group server that the member resource Group 2 included in Group 1 belongs to is g2 the group server g1 may directly determine according to step that the sub group resource Group 2 included in the group resource Group 1 includes a remote sub group resource Group 2 and does not need to obtain the member resource included in Group 2 from the group server g2 that Group 2 belongs to.

Step is the same as step and is not further described herein in the embodiment of the present invention.

Step is the same as step and is not further described herein in the embodiment of the present invention.

Step is the same as step and is not further described herein in the embodiment of the present invention.

Step is the same as step and is not further described herein in the embodiment of the present invention.

Step is the same as step and is not further described herein in the embodiment of the present invention.

Step is the same as step and is not further described herein in the embodiment of the present invention.

It should be noted that step to step are optional and some of the steps may be selected in addition step and step to step may be in any sequence.

Step An application server sends an operation request directed to a group resource Group 1 to the first group server g1 where the group resource Group1 is located. Specifically the application server may be an independent application server or may also be an application server of the M2M network or an application module arranged in the gateway or an application module arranged in the M2M device the application server may also be a module at a service capability layer of the host device where the group resource is located.

Similarly to step the operation request directed to the group resource Group 1 may be an operation request directed to a member resource or a member resource operation request carrying a REQ ID. In addition the operation request directed to the group resource Group 1 carries a group resource identifier of Group 1. In this embodiment of the present invention it is assumed that the operation request directed to the group resource Group 1 is an operation request directed to a member resource. In addition the operation request directed to a member resource may be a request such as an access request directed to a member resource or an update or deletion request directed to a member resource similar to that in step and is not limited herein by this embodiment of the present invention.

After receiving the operation request directed to the group resource Group 1 the first group server g1 determines that the operation request directed to a group resource does not carry an operation request identifier REQ ID that is the operation request directed to the group resource Group 1 is an operation request directed to a member resource. Any one of steps to is performed.

In this embodiment of the present invention it is assumed that the member resource included by Group 1 includes a sub group resource Group 2 and Group 2 belongs to a second group server that is Group 2 is a remote sub group and Group 2 also includes Group 1 that is the first group server may determine in step that Group 1 includes a remote sub group. Therefore the first group server may perform step after any step of steps to when performing steps to that is generate a REQ ID for the operation request directed to a member resource and record the generated REQ ID.

Certainly in another optional mode the first group server may also directly perform step after determining that the received operation request directed to a group resource does not carry the operation request identifier REQ ID that is the operation request directed to the group resource Group 1 is an operation request directed to a member resource and determine whether the operation request directed to a member resource is an update request. Because the operation request directed to a member resource is an update request the first group server generates a REQ ID for the operation request directed to a member resource and records the generated REQ ID and does not perform any step of steps to or otherwise performs step to step .

Step The first group server performs the operation indicated in the operation request directed to a member resource that is adding the generated REQ ID to the member resource operation request and sending the request to the member device that each member resource included in Group 1 belongs to namely the second group server g2 member device 1 and member device 2.

Step After receiving the member resource operation request the member device 1 and member device 2 perform the operation indicated in the member resource operation request.

Specifically the member device 1 and member device 2 determine that the member resource operation request carries a REQ ID and determines that the REQ ID carried in the member resource operation request is stored in the list recorded in the requestTag. Therefore the operation indicated in the member resource operation request corresponding to the carried REQ ID has been performed the operation indicated in the operation request is not performed again and an error response is returned to the first group server.

However in this embodiment of the present invention assuming that the member device 1 and member device 2 determine that the REQ ID carried in the member resource operation request is not stored in the list recorded in the requestTag the member device 1 and member device 2 store the REQ ID carried in the member resource operation request into the list recorded in the requestTag and perform the operation indicated in the member resource operation request.

Step The second group server determines that the REQ ID carried in the member resource operation request is not stored in the list recorded in the requestTag. Therefore the second group server stores the REQ ID carried in the member resource operation request into the list recorded in the requestTag.

Certainly if the second group server determines that the REQ ID carried in the member resource operation request is stored in the list recorded in the requestTag the operation indicated in the member resource operation request corresponding to the REQ ID has been performed the operation indicated in the operation request is not performed again and an error response is returned to the first group server.

Step is similar to step . The member device 3 determines that the REQ ID carried in the member resource operation request is not stored in the list recorded in the requestTag. Therefore the member device 3 stores the REQ ID carried in the member resource operation request into the list recorded in the requestTag and performs the operation indicated in the member resource operation request.

Step and step The first group server and member device 1 determine that the REQ ID carried in the member resource operation request is stored in the list recorded in the requestTag. Therefore the operation indicated in the member resource operation request corresponding to the carried REQ ID has been performed and the operation indicated in the operation request is not performed again.

Step and step The first group server and member device 1 respectively return an error response to the second group server.

Step The second group server aggregates the response messages received from the first group server member device 1 and member device 3. However because both the first group server and member device 1 return error responses the second group server does not need to aggregate the response message returned by the member device 3.

Step The second group server returns a first aggregated group response message to the first group server.

Step The first group server aggregates the response messages from the member device 1 and member device 2 and the first aggregated group response message from the second group server.

Step The first group server returns a second aggregated group member response message to the application server.

In it is assumed that group1 and Group 2 are located in different group servers and that Group 2 is a remote sub group of group1. In an optional mode group1 and Group 2 may be located in a same group server that is Group 2 is a local sub group of group1.

Specifically the member device receives the member resource operation request sent by a group server that the member device belongs to or a group server such as g2 receives the second member resource operation request sent by another group server g1 as shown in step . Therefore in the embodiment of the present invention the member device or group server receiving the second request is called an apparatus for operating a group resource.

Step Determine that the second member resource operation request carries a second operation request identifier.

Specifically the apparatus for operating a group resource determines that the second member resource operation request sent by the group server includes a second operation request identifier. Certainly the apparatus for operating a group resource especially a member device may also receive an operation request directed to a member resource where the operation request directed to a member resource does not carry an operation request identifier. The embodiment of the present invention does not describe the operation after receiving the operation request directed to a member resource where the operation request directed to a member resource does not carry an operation request identifier is received.

Step Determine whether a stored list of operation request identifiers includes the carried second operation request identifier and processes the second member resource operation request according to the determination result.

Specifically processing the second member resource operation request according to the determination result is as follows 

When the second member resource request further carries a sub group resource identifier the processing the second member resource operation request according to the determination result includes determining that the stored list of operation request identifiers includes the second operation request identifier and returning an error response to the sender of the second member resource operation request or determining that the stored list of operation request identifiers does not include the second operation request identifier and sending a third member resource operation request to the member device that the member resource included in the group resource identified by the sub group resource identifier belongs to or when the second member resource request does not carry a sub group resource identifier the processing the second member resource operation request according to the determination result includes determining that the stored list of operation request identifiers includes the second operation request identifier and returning an error response to the sender of the second member resource operation request or determining that the stored list of operation request identifiers does not include the second operation request identifier storing the second operation request identifier and performing the operation indicated in the member resource operation request.

In the above embodiment after receiving the second member resource operation request the apparatus for operating a group resource may determine that the second member resource operation request includes a second operation request identifier and process the second member resource operation request according to the determination result thus avoiding repeated processing of the processed operation request.

In addition as a supplement to the embodiment corresponding to because the apparatus for operating a group resource may be a group server the apparatus may also perform the steps performed by the group server in the embodiments corresponding to to which is not further described herein.

Further the member resource operation request carries a group resource identifier of a group resource that the member resource belongs to and the group server further includes a determining module configured to determine according to the group resource identifier that the first operation request identifier for the operation request directed to a member resource needs to be generated.

Further the determining module is specifically configured to determine according to the group resource identifier that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource and determine that the first operation request identifier for the operation request directed to a member resource needs to be generated or the determining module is specifically configured to determine according to the group resource identifier that a sub group resource included in the group resource identified by the group resource identifier is a remote group resource or determine according to the group resource identifier that a member resource included in the group resource identified by the group resource identifier includes the group resource identified by the group resource identifier and determine that the first operation request identifier for the operation request directed to a member resource needs to be generated.

Further the group server further includes an operation request determining module configured to determine that the operation request directed to a member resource is an update request.

Further the receiving module is further configured to receive a second member resource operation request where the second member resource operation request includes a second operation request identifier and the group server further includes a judging module configured to determine that a stored list of operation request identifiers includes the second operation request identifier and return an error response to the sender of the second member resource operation request or configured to determine that the stored list of operation request identifiers does not include the second operation request identifier store the second operation request identifier and perform an operation indicated in the second member resource operation request or the receiving module is further configured to receive a second member resource operation request where the second member resource operation request includes a second operation request identifier and a sub group resource identifier and the judging module is configured to determine that the stored list of operation request identifiers includes the second operation request identifier and return an error response to the sender of the second member resource operation request or configured to determine that the stored list of operation request identifiers does not include the second operation request identifier and send a third member resource operation request to a member device that a member resource included in a group resource identified by the sub group resource identifier belongs to.

Optionally when the second member resource operation request further carries a sub group resource identifier the judging module is specifically configured to determine that the stored list of operation request identifiers includes the second operation request identifier and return an error response to a sender of the second member resource operation request or determine that the stored list of operation request identifiers does not include the second operation request identifier and send a third member resource operation request to a member device that a member resource included in a sub group resource identified by the sub group resource identifier belongs to or when the second member resource operation request does not carry a sub group resource identifier the judging module is specifically configured to determine that the stored list of operation request identifiers includes the second operation request identifier and return an error response to the sender of the second member resource operation request or determine that the stored list of operation request identifiers does not include the second operation request identifier store the second operation request identifier and perform an operation indicated in the second member resource operation request.

Optionally the receiving module is further configured to receive an operation request directed to a member resource. A generating module is configured to generate a first operation request identifier for the operation request directed to a member resource and a sending module is configured to send a first member resource operation request to a member device that the member resource belongs to where the first member resource operation request includes the first operation request identifier so that the member device that the member resource belongs to determines according to the first operation request identifier whether operation request identifiers stored by the member device include the first operation request identifier and processes the member resource operation request according to the determination result.

Optionally the member resource operation request carries a group resource identifier of a group resource that the member resource belongs to and the determining module is further configured to determine according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining by the determining module according to the group resource identifier that the first operation request identifier for the operation request directed to the member resource needs to be generated includes determining according to the group resource identifier that the group resource identified by the group resource identifier includes a sub group resource that is used as a member resource and determining that the first operation request identifier for the operation request directed to the member resource needs to be generated or determining according to the group resource identifier that a sub group resource included in the group resource identified by the group resource identifier is a remote group resource or determining according to the group resource identifier that a member resource included in the group resource identified by the group resource identifier includes the group resource identified by the group resource identifier and determining that the first operation request identifier for the operation request directed to the member resource needs to be generated.

Optionally the determining module is further configured to determine that the operation request directed to the member resource is an update request.

As seen from the technical solutions provided by embodiments of the present invention a member resource operation request sent to a member device carries an operation request identifier so that the member device that the member resource belongs to determines according to the operation request identifier whether operation request identifiers stored by the member device include the operation request identifier and processes the member resource operation request according to a determination result. If the operation request identifiers stored by the member device include the operation request identifier an error response is returned and the member resource operation request is not further processed. Therefore subsequent repeated processing of the member resource operation request by the member device may be avoided.

The implementation of the processing function of each module included in the group server or the apparatus for operating a group resource is described in the foregoing method embodiments and is not further described herein. In addition in the M2M network the M2M platform may be a computer or a device with a processor. The M2M gateway and M2M terminal are not strictly differentiated in terms of devices for example the device serving as a gateway may also serve as a terminal in addition various terminal devices such as the mobile phone computer personal digital assistant PDA notebook computer remote controller home electrical appliance instruments and sensor may serve as the gateway or terminal of the M2M network. In the preceding module embodiments the apparatus is divided into modules by function logic but the division is not limited by the present invention so long as the corresponding functions can be implemented. In addition the specific names of the functional modules are only used for differentiation and not intended to limit the protection scope of the present invention. The function of each functional module in the above method for operating a group resource the group server or the apparatus for operating a group resource may be implemented by each module run by the processor of the group server or apparatus for operating a group resource and the method performed by the group server and the function of each functional module of the group server may be implemented by the processor of the group server.

In addition the group server in and may perform any step performed by the group server in the foregoing method embodiments the apparatus for operating a group resource in and may perform any step performed by the group server in the foregoing method embodiments and may also perform any step performed by the member device in the foregoing method embodiments which is not further described herein.

The foregoing descriptions are merely exemplary embodiments of the present invention but not intended to limit the present invention. Any variation or replacement made by persons skilled in the art without departing from the spirit of the present invention shall fall within the protection scope of the present invention. Therefore the protection scope of the present invention shall be subject to the appended claims.

