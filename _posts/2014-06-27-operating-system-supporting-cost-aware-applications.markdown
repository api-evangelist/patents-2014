---

title: Operating system supporting cost aware applications
abstract: A mobile computing device that supports cost-aware application components for operation over a metered network. A current basis for computing usage charges over one or more networks may be made available to the cost-aware application components through an application programming interface supported by an operating system service. That service may receive a policy for charging for data usage over a network and may also obtain information defining data usage for the mobile computing device. Based on this information, the service may determine a current basis for charging for data usage. With this information, the application component can determine a manner for executing network operations that involve data transmission over the network, such as deferring the operation or selecting an alternative network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09338309&OS=09338309&RS=09338309
owner: Microsoft Technology Licensing, LLC
number: 09338309
owner_city: Redmond
owner_country: US
publication_date: 20140627
---
This application is a Continuation of and claims benefit from U.S. patent application Ser. No. 13 844 932 that was filed on Mar. 16 2013 and that is a Continuation of U.S. application Ser. No. 12 972 230 that was filed on Dec. 17 2010 and that is incorporated herein by reference in its entirety.

Many computing devices have connections to mobile networks that supply data services. Cellular telephones have evolved into smart phones that run applications many of which send and receive data through a mobile data network. Concurrently computing devices have evolved to take on form factors that make them easy for a user to carry. These computing devices also run application that send and receive data through a mobile data network.

As applications executing on mobile computing devices have gotten more powerful and more diverse the bandwidth on mobile data networks consumed by these applications use has grown. In addition to increases in the number of mobile devices connected to mobile networks and increases in the number of applications available for execution on these mobile devices data usage has also increased as a result of changes in the way these applications use data. Applications may now consume network bandwidth engaging in functions such as sending and receiving e mail streaming music or video to a mobile device or accessing data over the Internet.

In response to the growing usage of network bandwidth mobile network operators have begun to revisit their policies for charging for network data usage. While in prior years it was common for unrestricted data usage to be available for a fixed monthly fee it is now more prevalent for data networks to be metered. In metered networks charges are imposed based on usage. Though various charging policies have been proposed.

For example in a variable charging policy a charge may be imposed for each unit of data transmitted or received by a mobile device. A variation of a variable charging policy may cap the total fee per month such that once usage exceeds a threshold additional charges are not incurred. In a fixed charging policy a service plan may have a monthly usage cap. Usage up to the cap may be covered by the fixed price but usage above the cap may be charged as in a variable policy. In a variation on the fixed charging policy there may be no additional charge for usage one the cap is exceeded but the network may throttle data transmissions above the cap such that a user who exceeds the cap may experience reduced service.

To enhance an experience for a user of a mobile computing device current network information indicating a current basis for usage charges may be made available to an application or other user mode component executing on the mobile computing device. The application may then selectively execute network operations which may include determining whether the network operations should be performed either with or without modification based on an impact of the operation on charges the user may incur for data usage. In making this determination the application may have available information on the importance of completing the operation or completing the operation in a timely way. Accordingly a cost aware user mode component may trade off cost and importance.

Information on the current basis for usage charges may be made available through an application programming interface presented by a service executing on the mobile computing device. The service may obtain information on a policy for charging for data usage from a mobile network operator. The service may also obtain information on data usage from the mobile network operator along with values of other parameters that may be used by the application in determining how to selectively execute the network operation. Though in some embodiments usage information may be obtained in other ways such as monitoring network traffic.

The service may obtain information from a server provided by an operator of the mobile network. Such a server may supply information to a mobile computing device including for example a value defining the mobile network operator s policy for charging for data usage and a value indicating an amount of data used by the mobile computing device.

The Inventors have recognized and appreciated that the onset of new types of charging policies for mobile data usage may be a burden on users of mobile computing devices. Users may misjudge the amount of their accumulated usage over a billing period and inadvertently incur charges for over cap usage or have their data transmissions throttled. In either event the user s experience may be degraded either because of surprise charges or because on unexpectedly poor performance of the computing device when attempting operations that entail data transmissions.

Moreover as mobile applications become more powerful more applications may autonomously initiate actions that consume network bandwidth. Such operations may be performed in a background mode of operation of the computing device such that a user may not even be aware that those operations are occurring and consuming network bandwidth. Applications that synchronize with data stores on a network for example may periodically exchange data over the network with those data stores. Such applications may include e mail servers or software update services. Exchanges of information by these applications may occur in background mode without express user input.

To avoid detracting from an experience for a user of a mobile computing device an operating system may be provided to facilitate cost aware applications. The operating system may provide a service from which applications and other user mode components may obtain current network information including information that identifies a basis by which usage charges for the network may be computed. This information for example may allow an application to determine an impact of a contemplated operation and selectively execute or modify the operation based on the determined impact.

The impact for example may be computed as a charge incurred for the specific operation if performed. Though other types of impact alternatively or additionally may be computed. These impacts may include an amount of usage as a percentage of a usage cap or percentage of the amount remaining until the cap is reached that will be consumed by the operation.

Regardless of the specific format in which the impact is determined a cost aware application may use this information to determine whether and how network operations that will consume bandwidth will be performed. The application for example may determine that the operation is to be immediately executed over a metered network. Alternatively the application may determine that the operation is to be performed at a later time or deferred until an un metered or lower cost network is detected. In making such determinations the cost aware application may take advantage of information that may be available to the application such as information about the importance of completing the operation or a cost associated with deferring completion.

A service may obtain information from any of a number of sources in order to be able to supply it to a user mode component. In some embodiments the information may be obtained from a mobile network operator. The mobile network operator may operate a server for this purpose that makes information available to the service on the mobile computing device. Such information may include for example information that identifies a charging policy applicable to the mobile computing device that the mobile network operator uses to compute data charges. Alternatively or additionally the information may specify prior usage by the computing device. Administrative information may also be available such as a date on which a measure of cumulative usage toward a cap is reset.

The service may also gather some or all of the information such as by obtaining usage information through monitoring. For this purpose the service may incorporate a monitoring component that interfaces to portions of the operating system that manages network communications. The monitoring component for example may interface to a network stack. Through such an interface the monitoring component may obtain usage information relevant to a specific network over which data is transmitted.

Additionally the monitoring component may obtain information about a user mode entity associated with data communicated over the network. The monitoring component may record this information in association with any suitable user mode entity or category of user mode entities that may be useful in monitoring network usage. For example the monitoring component may record usage information associated with a specific application or service user account or type of application.

Alternatively or additionally a service of a cost aware operating system may determine and enforce a policy related to data usage based on cost related criteria. Such a policy may specify criteria that when apply indicate whether a network operation is to be performed modified or canceled. These criteria may be based on one or more factors such as charges that would be incurred by performing an operation a tag attached to data for transmission by an applicant generating the data or usage limits specified by a user.

Such policy information may be obtained in any suitable way. In some embodiments the service may provide a user interface through which a user may specify usage limits or other aspects of a data usage policy for specific applications or classes of applications.

To enforce decisions on data usage one or more enforcement mechanisms may be incorporated in the operating system. Such an enforcement mechanism may be incorporated into a component that establishes network connections at the application level. Such a component may be used to block the creation of a connection or to break down a connection when a user mode component using that connection violates a data usage policy. Alternatively enforcement may be through a firewall or similar component which can be set to block or throttle data packets to or from a user mode component that is operating outside of a data usage policy applied to that component.

In the example of computing device includes one or more radios that support communication over multiple access networks through which computing device may access the Internet . Through the Internet computing device may further access any of a number of sources of data such as websites corporate networks or any other networks connected to Internet . For simplicity those sources of data are not expressly indicated in .

In the example of computing device is equipped to access Internet through a mobile broadband network. Such a network may be operated for example by a cellular carrier or other mobile network operator. In this example the mobile network operator maintains access network . Access network may be accessed by mobile computing devices through base stations of which base station is illustrated in . Access network and base station may be implemented using conventional components or in any other suitable way.

Base station may include a transmitter receiver to support communications with mobile computing device . This transmitter receiver is coupled to access network through which communications may be routed to and from Internet . In this way mobile computing device may exchange data with any device or other network reachable through Internet through access network .

The mobile network operator that operates access network may impose a charge for using access network . The charging policy applied to data transmissions sent from or destined for computing device may depend on any of a number of factors. Those factors may include a specific subscription plan elected by user . Other factors may include amounts of data previously communicated through access network for computing device during an applicable charging interval. For example the charging policy may impose different charges for data usage that exceeds a predetermined threshold during a monthly billing cycle. Though it should be appreciated that many factors alternatively or additionally may be used to determine specific charges that will be incurred for data usage in performing an operation involving transmission of data through access network . Different mobile network operators may have different charging policies that weight these factors differently. Some mobile network operators may have different charging policies for different users based on a subscription agreement with those users.

To facilitate control over the operation of computing device in a way that is cost aware computing device includes a cost aware operating system. Such a cost aware operating system may receive information on a charging policy imposed by the mobile network operator.

The cost aware operating system may obtain information related to the charging policy of the mobile network operator and network data usage in any of a number of ways. In some embodiments some or all of this and possibly other data cost information used by a cost aware operating system within computing device may come from the mobile network operator. In the embodiment of the mobile operator maintains a server that is configured to supply such information to mobile computing device .

Some or all of the data cost information for example may be communicated to computing device over a control channel for the mobile broadband network. As a specific example such information may be communicated over an SMS channel or other suitable control channel. Alternatively or additionally server may be coupled directly to Internet . Such a connection may allow mobile computing device to obtain data cost information through any other connection mobile computing device may form to Internet . For example user may from time to time connect mobile computing device to a wired network through which Internet may be accessed. In such a scenario some or all of the data cost information may be accessed through that wired connection.

Accordingly it should be appreciated that the timing and manner in which mobile computing device obtains data cost information is not critical to the invention and any suitable mechanism or combination of mechanisms for obtaining that information may be employed. As a specific example mobile computing device may obtain charging policy information and information on prior usage in different ways. Policy information for example may be loaded into mobile computing device when the device is initially configured to use a mobile broadband network. The charging policy information may be updated from time to time when mobile computing device has ready access to Internet . Though information on prior data usage which may change frequently may be communicated wirelessly through access network . Communication of such dynamically changing information may be initiated by server or by mobile computing device .

Regardless of the timing and manner in which data cost information is communicated the information may be communicated in any suitable format. For example a mobile network operator may define a format for data cost information records. A cost aware operating system within mobile computing device may be programmed to recognize the format and associate values with specific parameters of the data cost information. Alternatively or additionally the information may be associated with tags or other identifiers allowing a cost aware operating system to associate values with specific parameters of data cost information based on the tags associated with the individual values. Accordingly it should be appreciated that the format in which data cost information is communicated to mobile computing device is not critical to the invention.

Server for example may be coupled to access network such that data cost information may be communicated wirelessly to computing device through base station in a format similar to a format used to communicate other types of data to computing device . Though the specific mechanism by which data cost information is communicated to computing device is not a requirement of the invention.

Server may obtain the data cost information in any suitable way. Information on a data charging policy for example may be established by the mobile network operator as part of one or more subscription plans offered to subscribers of the mobile network. The mobile network operator may associate a specific plan with mobile computing device when user enters into a subscription with the mobile network operator. The terms of such a subscription may determine the data charging policy applicable to computing device . Accordingly server may obtain data charging policy information from other components not expressly illustrated in used in administering the mobile network.

Server may obtain information on past data usage by mobile computing device in any suitable way. Server may monitor data traffic associated with mobile computing device as that data traffic passes through access network . Though information relating to past data usage may be tracked by billing components or other conventional components within a mobile network. Accordingly server may obtain information on past data usage associated with computing device from other components not shown of the mobile network.

Regardless of how data cost information is obtained a cost aware operating system may use this information in any of a number of ways. The operating system may for example use this information to enforce data usage policies applicable to applications or other user mode components executing on computing device . Alternatively or additionally the cost aware operating system may provide cost related information on data usage to cost aware applications or other user mode components. The applications or other user mode components may then use such information for determining whether and how to perform network operations. Such that network operations are selectively performed based on cost.

One way in which a cost aware application may selectively perform a network operation is to defer the operation until a later time when the operation can be performed at a lower cost. In embodiments in which a charging policy imposes different charges based on data usage at different times of the day deferring the operation until a lower cost time of day may be appropriate. Alternatively mobile computing device may be configured to connect to different types of networks. A cost aware operating system may maintain data cost information for each network and may use this data cost information to identify a lower cost network for performing a specific network operation. Accordingly deferring a network operation may entail delaying execution of the operation until mobile computing device is connected to a lower cost network and then performing the operation over the lower cost network.

In the example of mobile computing device is configured to perform operations involving exchanges of data through a mobile broadband network. It is also configured for connecting wirelessly to a local area network that may in turn be coupled to Internet . Such a capability for example may be provided by equipping mobile computing device with a Wi Fi capable network interface card. Though in contrast to a mobile broadband network such a local area network connection is inherently location dependent.

Turning to an example of an architecture of a mobile computing device that incorporates a cost aware operating system and cost aware user mode components is provided. shows that mobile computing device is configured to interface to multiple networks. In this example a network interface card and a network interface card are illustrated. Each network interface card may support connections to a different network. For example network interface card may be a Wi Fi network interface card as is known in the art. Such a network interface card may support a connection to a local area network such as the connection through access point illustrated in .

Network interface card may be configured for communication over a mobile broadband network such as a connection through base station illustrated in . Network interface cards and may be implemented using techniques as are known in the art.

Each of network interface cards and may be controlled through software illustrated as driver and driver . Each of drivers and may be configured to control specific operations of its associated network interface card. Those operations may include transmitting and receiving data. Such control may be performed using techniques as are known in the art. Though the specific mechanism by which transmission and reception occurs is not critical to the invention and any suitable techniques may be used.

In operation drivers and interface with components of an operating system of mobile computing device . The operating system serves as an intermediary between the drivers and one or more user mode components that generate or use the data exchanged through network interface cards or . In this example user mode components are indicated as applications A B and C. Though it should be recognized that any number of applications that send or receive data may execute on mobile computing device . Additionally operating system services or other user mode components within the operating system may similarly send or receive data. Accordingly applications A B and C are exemplary and not limiting of the types of user mode components that may send or receive data.

In the example of the operating system of mobile computing device is shown to include stack to pass data for transmission from applications A B or C to one of the network interface cards or . In reverse data received at network interface cards or may be processed within stack and made available to one of the applications A B or C. In the embodiment illustrated stack may be implemented using conventional techniques.

Stack may perform operations such as receiving data for transmission from one of the applications A B or C partitioning that data into packets and attaching appropriate headers to the packets. Stack may then transfer such packets to one of the drivers or for transmission through an associated network interface card or respectively. The specific format of each packet and the driver to which the packets are applied may be determined by stack . For example an application may request that stack establish a connection to a remote device. Stack may form such a connection by exchanging communications with that remote device over a network to which one of the network interface cards or is connected. The format of the packets may then be determined by characteristics of the network. In some instances the network interface card selected by stack for forming the connection may be selected based on the networks over which the remote device is accessible. Though when the remote device is accessible through multiple networks the network through which the connection is established may depend on user preferences or relative performance of the networks over which the remote device may be reached. Such selection techniques are known in the art. In embodiments in which the operating system of computing device is cost aware the relative cost of communicating over each network may also be a factor in selecting a network for establishing such a connection.

Regardless of the specific approach used to select the network used for a connection once that connection is established the application may provide stack with data for transmission through that connection. In providing data for transmission over a connection an application need not specify a network over which that data will be communicated. Rather stack may process the data and format it as appropriate for transmission over the network associated with the connection.

Similarly for connectionless protocols such as UDP a user mode component may request transmission to an end point. Stack may then apply known techniques to select a network and appropriate format for communication with that end point.

Stack may perform such processing in stages. A first stage which may be performed in upper stack portion may be independent of the specific network over which the data is to be transmitted. Any processing that depends on the network over which the data is to be transmitted may be performed in lower stack portion . Processing in lower stock portion for example may include selecting an appropriate driver to which packets for transmission are routed. Though any other suitable processing may alternatively or additionally be performed in lower stack portion .

Data received over networks to which network interface cards and are connected may also be processed through stack . For received data stack processes the data and makes it available to an appropriate one of the applications A . . . C. That processing may entail network specific processing which may be performed in lower stack portion and network independent processing which may be performed in upper stack portion . In each case though the processing in each stack portion may be performed using techniques as are known in the art.

Data store may contain information on data usage. The information in data store may be organized in any suitable way. In some embodiments data store may contain aggregate usage information for one or more networks to which computing device can connect. In other embodiments the data usage information in data store may be stored only for networks for which there is a corresponding charging policy in data store . Though other criteria including express user input may be used to determine networks for which data usage information may be stored.

Instead of or in addition to storing aggregate data usage over a network data store may store information on data usage by user mode components. This information may be stored to record data usage by individual user mode components such as applications A B or C. Alternatively or additionally information in data store may be organized to show data usage by classes of user mode components. For example all of the components of an operating system may be treated as a class and information about data usage by operating system components may be stored in a single record in data store .

Storing data usage information in connection with user mode components may allow a cost aware operating system and or cost aware applications to manage network operations based on data usage and data usage policies applicable to specific user mode components. To support such behavior the cost aware operating system may include a further data store . Data store may contain data usage policies applicable to one or more user mode components. In some embodiments data usage policies may be provided for individual user mode components or classes of user mode components. Such data usage policies may be obtained in any suitable way. In some embodiments information and data store may be downloaded into data store by and administrator of mobile computing device . Though in other embodiments data usage policies may be obtained by cost service through user interface . Through user interface cost service may obtain policy information from a user of mobile computing device .

Regardless of the mechanism by which cost service obtains the information in data stores and cost service may use this information to facilitate cost aware operation of mobile computing device .

As described above in connection with data cost information of the type maintained in data stores and may be obtained from mobile network operators. Such information may be obtained through data transmission received through either network interface card or and passed through stack to cost service . In such an operation cost service may receive such data cost information using communication techniques appropriate for any other user mode component. Regardless of how cost service receives the information it may store the data cost information in data stores and in any suitable format.

In some embodiments information from usage monitor may be used in conjunction with information obtained from a mobile network operator. For example cost service may obtain data usage information from a mobile network operator at relatively long intervals. Between those intervals data usage information generated by usage monitor may be used to provide more up to date information. Alternatively data usage information collected by usage monitor may be the predominant source of information on data usage. However from time to time data usage as recorded by usage monitor may be compared to data usage as reported by a mobile network operator. Discrepancies between the two techniques for measuring data usage may be resolved. For example information in data store acquired by usage monitor may be updated such that data usage as measured by usage monitor tracks data usage as reported by a mobile network operator.

In some embodiments usage monitor may acquire information about data usage that is not available to a mobile network operator. As one example usage monitor may have access to information both about a network over which data is transmitted or received and a user mode entity that is transmitting or receiving that data. Though a mobile network operator may have access to information about data usage the mobile network operator may not necessarily be able to associate data transmitted through access network with a specific user mode entity within computing device . To obtain such information usage monitor may be coupled to one or more locations in stack where network information and user mode component information is available.

In the embodiment illustrated in usage monitor is coupled to upper stack portion through extensibility point . In upper stack portion information about a user mode entity such as an application or other user mode component that has requested data transmission or is the destination for data received over a network is available. The user mode component may be identified in any suitable way such as the full path of the executable component that implements that user mode component or a digital signature associated with the executable. Regardless of how the user mode component is identified the identification provides a mechanism for usage monitor to associate information on data transmitted over a network with a specific user mode component.

In some embodiments upper stack portion may perform processing that is independent of a network over which data is to be transmitted or has been received. Accordingly usage monitor may also be coupled to lower stack portion where information about the network may be available. In this example usage monitor is coupled through extensibility point to lower stack portion . Usage monitor may correlate information received from lower stack portion about a network with information received from upper stack portion about a user mode component to enable usage monitor to generate data usage information on an application by application basis.

Any suitable technique may be used to implement extensibility points within stack . Though extensibility points may be implemented using techniques that are known in the art. Extensibility points such as extensibility points and may be incorporated into a stack in other contexts such as to allow anti virus software to interface with stack . Through such extensibility points stack may provide information about packets being processed for transmission or upon receipt over a network. Additionally through such extensibility points external components may provide commands to stack which may influence processing of received packets or packets to be transmitted. In the case of usage monitor extensibility points and may be used only to acquire information. Though other aspects of a cost aware operating system may use extensibility points or to control operation of stack based on data cost information.

Regardless of the manner in which information is loaded into data stores and cost service may use this information in one or more ways. Cost service for example may access data stores and to provide information to cost aware applications which then may alter the way in which they perform network operations based on cost information. Alternatively cost service may use the information in data stores and to directly control the performance of network operations.

To support provision of cost information to cost aware applications or other user mode components cost service may have an application programming interface . A cost aware application may prior to performing a network operation place a call through application programming interface to obtain cost information. In response to such a call cost service may provide to the cost aware application any information from any of the data stores and .

Alternatively or additionally cost service may compute values of cost parameters applicable to the specific application making the call through application programming interface . As one example a cost aware application making a call through application programming interface may identify a network adapter and specify an amount of data to be transmitted through that network adapter. Based on information maintained by the operating system cost service may identify a network currently associated with the network adapter. Cost service may access data store to obtain the data charging policy for that network. Because the policy may specify different approaches to computing a charge for data transfer based on whether usage of that network is above or below a cap cost service may access data store to determine prior data usage over that network. By combining this information cost service may determine the basis for which a charge will be imposed for the data to be transmitted. The basis for computing the charge may be communicated to the cost aware application in response to a call through application programming interface .

Though this charging basis information may be presented in other formats. In some embodiments a call through application programming interface may include information about an amount of data to be transmitted. In that scenario information about the basis for computing a charge may be reflected in a computation of the incremental charge that will be incurred by transmitting the specified amount of data over the network. As yet another possibility application programming interface may return information defining a charging policy and prior data usage.

Though it should be appreciated that any suitable data cost information may be made available through application programming interface and that information need not be provided directly in response to call on the interface. As an example of one possible variation application programming interface may support a registration of user mode components to receive notifications when networks of specified cost characteristics are available. For example as described above in connection with an action that a cost aware application may take is deferring transmission of data until a low or no cost network is available. Accordingly application programming interface may support a registration by which a user mode component specifies desired network cost characteristics. A user mode component may specify for example a no cost network. Cost service may monitor the available networks to which mobile computing device is connected. Using the information in data stores and cost service may determine for each network the cost characteristics of that network. Upon detecting a network meeting the desired cost characteristics specified by the registered user mode component cost service may notify the user mode component of the availability of a network meeting the desired cost characteristics. In this way a cost aware application may defer certain operations that it determines would cost too much if performed over a current network until such time as a lower priced network is identified.

In addition to using the information in data stores and to provide information to cost aware user mode components cost service may control the manner in which operations involving communication of data over a network are performed based on data cost information. In the embodiment of cost service has access to data store that contains data usage policies. Each policy may specify conditions under which data is to be transmitted or received. Data usage policies may also specify such policy information generically as applicable to all components. Alternating or additionally usage policies may be specified for individual user mode components or classes of user mode components. Such notices may specify conditions under which data is to be transmitted or received subject to one or more constraints such as constraints on time of transmission cost of network for transmission or data rate used for such a transmission. Accordingly cost service may access data store to obtain a data use policy for one or more user mode components and determine whether to allow block or restrict data transmissions from or to the user mode components. To the extent any such policy depends on a current charging basis for a network service may access data usage information from data store and determine for one or more networks to which mobile computing device is connected a current basis for computing charges for incremental amounts of data transferred over that network.

In embodiments in which cost service determined the manner in which data may be transmitted or received cost service may interface with one or more enforcement components to implement such a determination. In the example of those enforcement components are within mobile computing device . As one example firewall is shown.

Firewall may be a component as is known in the art that can block the transmission or reception of packets. Firewall may be configured to block or restrict the transmission of data on a user mode component by component basis. In scenarios in which cost service determines that allowing an application component for example to further transmit data over a network cost service may configure firewall to block transmissions from that application. In some scenarios firewall may be configurable to allow transmissions from identified user mode components but to restrict the data rate for those transmissions such that the transmissions are throttled. Accordingly firewall is an example of an enforcement mechanism that cost service may employ to enforce a data usage policy for a specific user mode component or class of user mode components.

Other enforcement mechanisms may alternatively or additionally be included. As an example of one possible alternative cost service may interface with stack to enforce a data usage policy. Cost service may interface with stack for example through extensibility points such as extensibility points and . Through such extensibility points cost service may obtain information about data being transmitted or received. Cost service may in response to such information provide commands to stack through extensibility points or . Those commands may indicate whether a data packet is to be passed by stack . In this way transmission of data over a network may be blocked or throttled. Alternatively or additionally commands provided by cost service may control stack to change the network over which one or more data packets is to be transmitted. For example though an application component A . . . C specifies transmission through a network adapter associated with a metered network when cost service determines that transmission over that metered network would violate a data usage policy associated with the application generating the data cost service may generate commands to stack causing the data packets from that application component to be transmitted over an alternative non metered network.

Through extensibility points cost service may also impact the amount of data sent to computing device which may also incur data usage charges. As one example of an enforcement mechanism that may be employed to reduce the amount of data sent to mobile computing device cost service may generate a command to stack to break down a network connection. Breaking down the connection may block transmission of data by an external device directed to a user mode component executing on mobile computing device .

In addition to obtaining data usage policy information from data store cost service may obtain data usage policy information in other ways. As one example data usage policy information may be transferred from a user mode component to cost service . provides an example of a mechanism by which such a transfer of data usage policy information may be transferred from a user mode component to cost service . In this example that information is transferred based on the value of a tag generated by the user mode component. As shown a user mode component such as applications A . . . C may access stack through interface to initiate transmission or receipt of data over a network. Interface may accept a tag associated with a request for data transfer or a request to establish a connection. The value of tag may specify a priority associated with data to be sent or received to the application component. Cost service may use this value to determine a specific action for processing network operations associated with the transmission or receipt of data for the application component.

As a more specific example if the value of tag indicates that data transmission is of high priority cost service may establish or maintain the connection for transfer of data to or from that application component even if there is an incremental cost associated with transmission of such data. Alternatively if the value of tag indicates a relatively low priority cost service may break down a connection involving that application component to block transmission of data from that application component and further receipt of data directed to that application component over a network for which further transmissions will incur data usage charges. As yet another example a value of tag may indicate a medium priority associated with data transmission for an application component. Accordingly cost service may allow such transmissions to continue so long as the incremental cost associated with the data transfer is below a threshold. However when the incremental cost for further transmission exceeds a threshold cost service may block further transmissions.

In this example three priority values for tag were described. It should be appreciated though that tag may take on any number of values and cost service may be programmed to respond to each such possible value differently.

Also it should be recognized that though illustrates that processing associated with network costs may be performed in a separate component cost service need not have any special form. For example functions of cost service may be integrated with network stack or other components within an operating system.

Turning to an example of information that may be provided through application programming interface is illustrated. In the example of application programming interface contains multiple fields each containing information returned to a user mode component making a request for data cost information through application programming interface . In the embodiment illustrated the information in each of the fields may be tailored to the current operating state of mobile computing device as it relates to a specific network for which information may have been requested. Accordingly a portion of the information returned through application programming interface may indicate a current basis for the identified network to compute a charge for incremental data usage. In this example the information indicating a current basis for computing a charge is reflected by a combination of the information in fields and .

In this example field includes information about a charging policy for the network. A value in field may indicate for example that the identified network is unrestricted meaning that the mobile network operator does not impose an additional charge for incremental data usage. Alternatively a value in field may indicate that the charging policy of the network is a fixed type charging policy meaning that there is no additional charge for data usage up to a specified cap but there may be an incremental charge for data usage above the cap. As a further example a value in field may indicate a variable charging policy for the identified network meaning that the mobile network operator imposes a charge for each unit of data transmitted over the network.

In addition field may contain a value of a flag indicating a current charge state for the identified network based on prior data usage. Field may take on different values depending on the charging policy indicated in field . The value of the flag in field may indicate that an amount of prior data usage has occurred such that a usage cap for the identified network has been exceeded and a mobile network operator may be imposing a charge per unit of data transmitted. Such a value may be appropriate for a network using a fixed type charging policy.

As another example a value in field may indicate that the identified network is being throttled. Such a value may be appropriate for a network using a fixed type charging policy in which upon exceeding a cap data transmissions are throttled.

As yet another example a value in field may indicate that mobile computing device is in a roaming mode. Such a value may indicate that computing device is outside of the home service area for the mobile network operator with which a user of mobile computing device has a subscription. In a roaming mode information on network data usage or other elements of data cost information may be unavailable from the mobile network operator with which the user has a subscription. A cost aware user mode component may treat such information as indicating that the identified network is imposing a charge for each increment of data transmitted and that this charge is imposed at a high rate. Cost aware user mode components may use this information to determine that network transmissions of all but the highest priority information should be blocked or routed to an alternative network.

In the example of attributes A . . . N are illustrated. Any number of attributes may be provided through application programming interface . An example of an attribute that may be passed through the interface is an attribute indicating prior data usage. Such an attribute may indicate the amount of data previously transmitted over a network during a current billing cycle for a subscription to the identified network. Such information may be obtained from data store or any suitable source. The attribute may indicate total data usage for the identified network. Alternatively or additionally an attribute may indicate only data usage by the user mode component requesting information through application programming interface or aggregated usage by user mode components in the same category as the user mode component requesting information through application programming interface .

Another attribute that may be included among attributes is a cap threshold. For a network with a fixed type charging policy the value of this attribute may indicate a threshold above which a per unit charge is imposed the transmission rate is throttled or some other characteristic of network charging or operation changes.

A further attribute may be a time stamp. A value of the time stamp attribute may indicate when values for the information conveyed through application programming interface were obtained. In scenarios in which the information provided through application programming interface is derived from a mobile network operator the time stamp may indicate the time at which the last update of information from the mobile network operator was received.

As yet another example of an attribute that may be provided through application programming interface a plan reset date may be included. For networks that have charging policies that are based on usage during an interval such as a month or billing cycle a plan reset date attribute may indicate the date on which a new interval begins such that accumulated usage is effectively reset to zero on that date.

A further attribute may indicate the effective connected speed for mobile computing device . This attribute may indicate the effective link speed for mobile computing device . Such information may indicate conditions on the network. Alternatively or additionally in embodiments in which the network employs a charging policy that includes throttling data transfers that exceed a cap the information in this attribute may indicate a mode in which the network is currently operating.

It should be appreciated that represents an example of information that may be provided to a cost aware user mode component through application programming interface . Different or additional information may be provided in some embodiments and cost aware user mode components may use some or all of the information provided to control the performance of network operations that involve data transfer.

Table I illustrates examples of possible combinations of values that may be provided in fields and A . . . N. In the example provided by Table I values representing charging policies such as may be represented by a value in field are listed in a column of Table I under the heading Cost Value. A column under the heading Flags indicates possible values for flag field . Other columns in Table I provide examples of the attributes that may be passed through application programming interface in connection with other data cost information. Possible values for an attribute that identifies prior data usage are indicated in Table I under the column heading Data Usage. Possible values for an attribute representing a threshold used to define a cap appear in a column of Table I under the heading Cap Threshold. Possible values of a time stamp indicating a time at which the data cost information provided to a user mode component through application programming interface was acquired from a mobile network operator. Possible values of a further attribute representing a date on which tracking of cumulative data usage resets in accordance with a subscription with a mobile network operator are indicated in the column under the heading of Plan Reset Date. Though not illustrated in Table I other attributes may be provided such as an effective data rate for communication over the network.

Table I illustrates a plurality of possible cost states that have been defined for a network. Possible cost states are identified in a column under the heading Cost States. Accordingly each row in Table I indicates possible values in each of the fields provided through application programming interface in a specific cost state. For example the row of Table I corresponding to a cost state indicated as Connection is unrestricted of cap or usage charges identifies possible values for fields A . . . N for that cost state.

Specifically in this example because the connection is unrestricted field contains a value indicating that the network charging policy corresponds to an unrestricted policy. Similarly because there is no cap associated with the unrestricted charging policy no flag will be set in this cost state to indicate usage relative to a cap.

For attributes some may not be applicable for an indicated cost state. In the specific example of an unrestricted charging policy an attribute corresponding to a cap threshold is not applicable as indicated in Table I. Other attributes may take on numeric values. For example an attribute indicating data usage may have any value representing an amount of prior data usage. An attribute indicating a time stamp may have any value indicating a time. An attribute indicating a plan reset date may also have any value indicating a date.

In other cost states the fields and A . . . N may have different allowed values. For example as indicated in the next row of Table I when the cost states is Connection is a cap plan and is operating below the cap threshold field may take on a value indicating that the charging policy is a fixed type charging policy. Though a cap may exist for this cost state as indicated in the column for Cap Threshold because the mobile computing device is operating below the cap threshold no flag is set in field in this cost state.

Other attributes also may take on values in a cost state corresponding to a plan with a cap and operation below the cap threshold. For example attributes representing data usage cap threshold time stamp or plan reset date may take on any value in this state.

As yet a further example in a cost state indicating that Connection is charged on a per byte basis field may take on a value as indicated in the column entitled Cost Value representing a variable type charging policy. In this state as indicated by the column entitled Flags the value in field may indicate that no flags are set. In this cost state a value for a cap threshold is inapplicable but other attributes such as data usage a time stamp and a plan reset date may have any suitable value of the appropriate type.

Other rows of Table I indicate further possible cost states and acceptable values passed through application programming interface in those states. Specifically in this example Table I illustrates a further cost state of Connection is approaching over cap Connection has reached over cap and is now being charged overage charges in bytes Connection has reached over cap and is now being throttled Connection is being throttled by the mobile network operator and Connection is roaming outside of the mobile network operator s network. Table I indicates possible values for each fields indicated in . For example the charging policy reflected in field may take on a value of unrestricted fixed or variable in the example illustrated in Table I. The flags represented by information in field in the example illustrated by Table I may be not set or may indicate an over cap condition or a throttled condition or a roaming condition.

The cost state reported through application programming interface in response to a request for data cost information may be determined in any suitable way. The cost state for example may be reported by the mobile network operator. Alternatively or additionally the cost state may be determined by cost service or other component executing on mobile computing device . In the example represented by Table I any of the cost states except roaming outside of the mobile network operator s network may be determined by the mobile network operator. The roaming state may not be indicated by the mobile network operator because the mobile network operator may not have a suitable means of communication with the mobile computing device while it is roaming. Though the specific mechanism by which the cost state and corresponding attribute values are determined is not critical to the invention.

Regardless of the manner in which the information passed through application programming interface is generated and the specific values in specific fields that information may be used by a cost aware user mode component to selectively perform network operations taking into account the data cost information. illustrates a process by which a mobile computing device configured with a cost aware operating system to support execution by cost aware user mode components is illustrated.

The process of begins at block . At block a component of mobile computing device may receive a usage policy. The usage policy received at block may be associated with a user mode entity which may be an application or operating system service. Though in some embodiments the usage policy received at block may relate to a user account or other suitable user mode entity.

In some embodiments the usage policy received at block may be received based on user input through user interface . In such an embodiment cost service may store the usage policy in data store . Though data store may be populated with data usage policies in any suitable way including using techniques as described above.

Moreover it is not a requirement that the processing at block be performed by cost service . In embodiments in which sub process is performed within a cost aware user mode component the usage policy received at block may be received by that cost aware user mode component. Accordingly it is not a requirement that the processing at block occur dynamically. Rather the usage policy received at block may be encoded into the cost aware user mode component at any time prior to its execution. Though in other embodiments the usage policy received at block may be dynamically associated with a user mode component during operation of mobile computing device in any suitable way. Examples of ways in which a usage policy may be dynamically associated with a user mode component are through the use of a plug in that encodes the logic of the usage policy or by configuration settings that are adjusted by user input.

Regardless of the manner in which a usage policy is received at block processing may proceed to block . At block a network charging policy may be received. In the embodiment illustrated in the network charging policy may be received by cost service and stored in data store . Any suitable mechanism may be used to receive a network charging policy at block . The charging policy for example may be received from a mobile network operator or other source in any suitable way including using the techniques as described above.

The process of also includes receiving network data usage information at block . In some embodiments this information may also be received from a mobile network operator. Though in other embodiments the information received at block may be received from usage monitor . Though the data usage information may be received in any suitable way including using the techniques described above.

Regardless of the manner in which the charging policy and data usage information is obtained this information may be used at block to compute a current charging basis. Processing at block for example may result in identification of a cost state represented by a cost value and a setting for flags as indicated in one of the rows of Table I. This processing may be performed by cost service . Though the specific mechanism by which the current charging basis is identified at block and the manner in which this computation is represented is not critical to the invention and any suitable technique may be used.

In the example of the computation of the current charging basis is performed within cost service and then supplied to the cost aware user mode component which in this example is an application component. Accordingly the process of includes at block notifying the application. Processing at block may include passing through application programming interface information in the format indicated in . Though it should be appreciated that the specific format of the information provided is not critical to the invention and any suitable information may be provided as part of the processing at block .

Based on this information a cost aware application receiving the information at block may perform sub process . In this example sub process represents conditional processing of a network operation. The network operation may involve transmission of data over a network for which data cost information was obtained at block .

In the example of the processing within sub process branches at decision block based on whether the cost state indicates that mobile computing device is in an over cap state. In the example represented by Table I this state may be identified based on a value in field . Though the cost state of the network connection may be identified in any suitable way.

Regardless of the manner in which the cost state is identified if usage has not exceeded the threshold associated with a cap the process may branch to sub process . At sub process the network operation may proceed as requested. In this example in which the network operation involves transmission of data sub process involves transmitting the data over the network. Though it should be appreciated that transmission of data is an example only of possible network operations. Operations that trigger data being sent by an external device to mobile computing device is another example of a network operation that may be conditionally processed within sub process . Moreover operations that involve a combination of transmission and reception of data similarly may be conditionally processed. Accordingly the specific operation that is conditionally processed is not a requirement of the invention.

Conversely if processing at decision block determines that mobile computing device is in an over cap cost state processing may branch from decision block to sub process . Sub process may entail processing the network operation in a way that entails less data usage than performing the network operation through sub process . Any suitable alternative processing may be performed at sub process to result in less data usage. The network operation for example may be canceled delayed or performed in an alternative way that results in less data transferred over the network for which mobile computing device is in an over cap cost state. Accordingly processing at sub process may entail data compression techniques. Such techniques may increase the delay in performing the network operation or may have other undesirable affects such as reducing the resolution of graphics presented on user interface of computing device . Though a cost aware application component may apply a usage policy reflecting such trade offs between cost and performance or other attributes affecting operation of mobile computing device .

In the example of the alternative processing performed in sub process entails selecting an alternative network. The alternative network may be a wired or wireless network. In the example illustrated in the alternative network selected may be a local area network rather than a mobile brand band network. That network may be immediately available such that sub process may be performed without delay. Though in some embodiments selecting an alternative network as part of sub process may entail delaying the selection until an alternative lower cost network is identified.

Upon completion of either sub process or sub process the sub process may end with conditional processing of the network operation being completed. The process of may then continue to block . At block whatever data was conveyed over a network may be recorded. In embodiments in which mobile computing device includes a usage monitor processing at block may be performed by usage monitor . Though in other embodiments the usage may be monitored by a mobile network operator. Accordingly processing at block may entail receiving an update of data usage information from the mobile network operator. Such an update may be received immediately following transmission of the data as part of sub process or may occur at any suitable time thereafter.

Sub process may continue until execution of application functions results in a network operation being required. At block such a network operation may be encountered. A network operation may be any operation that requires the transmission of data over a network or triggers the likely reception of data over the network.

Upon encountering a network operation as part of the cost aware application processing may proceed to block . At block the cost aware application may obtain a current basis for usage charges for data communicated over a network. Processing at block may entail placing a call on application programming interface .

In the example of the cost aware application computes the cost of the network operation as sub process . Sub process may entail computing the cost in terms of dollars or other unit of currency. Though qualitative measures of costs may alternatively or additionally be used. For example the computation in sub process may entail multiplying an expected number of bytes to be transmitted in order to complete the network operation encountered at block by a current incremental cost of transmitting a byte of data. Such a computation may be based on the data charging policy for the mobile network operator as applicable to mobile computing device . That information may be acquired by cost service in any suitable way including using the techniques described above. In embodiments in which the data charging policy for the mobile network operator depends on prior data usage information about prior data usage may also be obtained at block . With this information the cost of the network operation may then be computed.

At decision block sub process may branch depending on the computed cost of completing the network operation. In this example processing at block involves comparing the computed cost to a threshold. The threshold used at decision block may be based on a data usage policy applicable to mobile computing device or in some embodiments applicable to the cost aware application performing sub process . Regardless of the manner in which that threshold value is obtained if the cost of the network operation is below the threshold processing may branch to sub process . At sub process the network operation may be performed.

Conversely if based on processing at decision block it is determined that the cost of the network operation will exceed the threshold the sub process branches to sub process . Processing at sub process entails modifying the network operation to reduce the amount of data exchanged over the network. In this example modifying the operation may entail foregoing transmitting or requesting certain types of data. Alternatively or additionally sub process may entail compressing data to be transmitted using lossless or lossy compression techniques or applying another suitable technique to reduce the amount of data transmitted.

Upon completion of sub process or sub process the processing illustrated in may end. Though it should be appreciated that such processing may be performed repeatedly during operation of a mobile computing device with one or more cost aware user mode components.

Turning now to a further alternative sub process that may be performed by a cost aware user mode component is illustrated. In this example sub process is performed by an update service within the operating system of mobile computing device .

Sub process begins with sub process . In this example the update service identifies an available update for one or more software components of mobile computing device . Processing as part of sub process to identify an available update may be performed in any suitable way including using techniques as are known in the art. Processing at sub process in addition to identifying an available update may entail identifying a networked server from which the update may be obtained and a size in terms of bytes of data that would be downloaded in performing the update.

Processing may then proceed to block where the update service obtains the current basis for data usage charges on a network over which the update server can be accessed. Such information may be obtained by placing a call on application programming interface or in any other suitable way. The data obtained at block in some embodiments may indicate a network charging policy and a current cost state for the network such that a cost aware update service may compute the cost of performing the identified update at block . Alternatively the processing represented by blocks and may be performed within cost service . In that scenario for example a call on application programming interface may entail providing to cost service an amount of data to be transmitted as part of the update.

Regardless of the specific component that computes the cost of the operation processing may proceed to decision block where the process may branch depending on the cost. If the cost does not exceed a threshold processing may proceed to sub process . The threshold employed at block may be determined based on a charging policy. That charging policy may be specified for computing device or some other entity or classification of entities. For example the charging policy may be specified specifically for the cost aware update service. Though in some embodiments the usage policy may be specified for operating system components in the aggregate.

Regardless of the manner in which the threshold is obtained if the computed cost for the update is less than the threshold processing may branch to sub process where the update is obtained. Conversely if the cost exceeds the threshold processing may branch to decision block .

At decision block sub process may again branch depending on criteria relating to the importance or priority of a network operation to be performed. In this example the criteria applied at decision block relate to the severity of the update identified in sub process . In this example processing branches to sub process when the update is classified as being of high severity. In that scenario processing continues at sub process where the update is obtained. Conversely if the severity of the update is low the process branches to sub process .

At sub process the update service waits to find a lower cost network. Such processing may be implemented in any suitable way. For example processing within sub process may entail placing a call through application programming interface to register with cost service for a notification when a lower cost network is identified. Alternatively or additionally processing as part of sub process may entail canceling the update. In embodiments in which the cost aware update service periodically checks for available updates canceling the update based on cost criteria when only high cost networks are available may achieve the affect of deferring the operation until a time for a periodic update coincides with availability of a lower cost network.

Upon completion of sub process resulting in the identified update being completed or completion of sub process resulting in a deferral of the update operation the processing illustrated in may end. Though the processing may be repeated at any suitable time.

Processing at block may be performed in any suitable operating system component. As one example with the architecture of data from an application may be received at stack through interface .

At block cost service may apply a data usage policy based on a user mode entity associated with the application initiating a data transfer operation at block . The user mode entity may be the application itself. Though in other embodiments the user mode entity may be a user account or other suitable entity that a cost aware operating system may associate with the operation at block .

Processing at block may be performed by cost service obtaining information from stack such as through extensibility points within stack . Based on such information cost service may access data stores and or . Though in some embodiments processing at block may entail accessing a priority tag passed through interface from the application requesting an operation involving data transfer at block . Processing may then entail balancing the priority attached by the application to the cost state associated with the network or other indicator of incremental cost for transferring the required data over the network.

Regardless of how information about the policy is determined based on the accessed information cost service may determine whether the operation indicated by the received data at block is consistent with the data usage policy for the identified user mode entity.

The process of may branch at decision block depending on whether the operation indicated at block is consistent with the data usage policy. If not the process may branch to block . At block a connection over which data received at block absent cost considerations would have been transmitted is broken down. The connection may be broken down by deleting data structures describing the connection or performing other operations as are known in the art. In scenarios in which processing at block entails receiving a request to establish a connection processing at block may be completed by omitting any actions to establish that connection.

Upon completion of the processing at block the process of ends without the data being transmitted. In this scenario an application requesting data transfer at block may receive a notification using a mechanism as is known in the art that the requested operation was not completed. The application may execute exception handlers or other processing as is known in the art to respond to an unavailability of a network connection for the operation. In this way handling of an exception condition resulting from an application attempting to perform a network operation outside of a data usage policy may be returned to the application. Though a cost aware operating system may respond to such an attempt by an application to exceed a data usage policy in any suitable way.

Conversely if as a result of processing at decision block the connection is not disallowed processing may proceed from decision block to block . At block the data for transmission may be associated with the user mode entity associated with the application component requesting the data transmission at block . Any suitable mechanism may be used at block to associate data with a user mode entity such as writing an identifier into a field associated with a buffer in memory holding the data.

Regardless of the manner in which the data is associated with a user mode entity processing may proceed to sub process . At sub process a transport for the data may be selected. Sub process may be performed using techniques as are known in the art. Processing in sub process may result in an identification of a network over which the data is to be transmitted. Such an identification may be made in any suitable way including by applying criteria as are known in the art to select a network that maximizes criteria indicative of performance. Though in the illustrated embodiment the selection at sub process may be based at least in part on cost of each network.

Following sub process processing may be network specific. Accordingly the process steps including those at block and decision block may be based on a specific network and may be performed within lower stack portion . In contrast processing at decision block and block may be network independent and may be performed in upper stack portion . Associating a user mode entity with data to be transmitted at block allows the processing in lower stack portion though network specific to also account for different policies applicable to different user mode entities. Accordingly at block the usage policy for the user mode entity may be applied in conjunction with data cost information for a specific network to determine whether transmission of the data complies with the usage policy for the user mode entity.

At decision block the process of may branch depending on whether transmission of the data is consistent with the policy applicable to the user mode entity. If so the process may branch from decision block to sub process where the data may be transmitted over the selected network.

Though if transmission is inconsistent with the usage policy for the user mode entity processing may branch from decision block to block . At block processing to reduce data usage may be performed. In this example the processing to reduce data usage involves throttling the data to reduce the rate at which the data is transmitted. The data may be throttled in any suitable way including buffering the data within stack or adjusting settings on firewall . Though throttling the data may not reduce the amount of data transmitted for a single network operation throttling the data may reduce the rate at which network operations are performed thereby lowering the total amount of data communicated over a network over time.

The process may then proceed to sub process where the data as throttled is transmitted. Regardless of whether sub process entails transmitting the data with or without throttling from sub process processing may proceed to block . At block the amount of data transmitted may be recorded. Recording transmitted data at block may entail updating data store or taking any other suitable action.

Thereafter processing at may end. Though it should be appreciated that the processing represented by may be repeated as further applications request operations that entail data transfer over a network.

Turning to an example of a technique for obtaining data usage policies is provided. As noted in cost service may be associated with a user interface through which policy information may be provided by a user. represents an example of a graphical user interface that may be presented to obtain a portion of the information that may make up a data usage policies for user mode entities. In this example the user mode entities are applications. In particular the applications are shown by category. In this example which is illustrative only categories are shown for email applications browser applications games and multi media applications.

Each display area provides a mechanism by which a user may input values indicating a threshold amount of data usage below which the application will be permitted to perform operations that trigger data usage. Additionally each display area contains controls through which a user may specify conditional processing to be performed when that threshold is exceeded. In this example the threshold is specified as a percentage of a data usage cap for a network. The cap is illustrated graphically in graphical user interface by indicator . Each of the display areas of which display area D is representative includes a slider . Slider is an example of a graphical user interface control as is known in the art. A user may specify a value by interacting with graphical user interface using a mouse or other suitable human interface device to indicate a position of slider .

In the scenario illustrated in a user has positioned slider to be in excess of the data usage cap for the network. Specifically in this example slider is positioned to indicate a threshold of 150 of the cap. A threshold indicating a value greater than the cap indicates that multi media applications which are associated with display area D may be permitted to continue to perform network operations even after the data usage cap is exceeded and incremental charges for data usage are being incurred.

Moreover display area D includes controls such as controls and through which a user may specify conditional processing once the specified threshold is exceeded. In this example controls and are check boxes. In the specific scenario illustrated in control has been activated indicating user input that multi media applications should be throttled after the threshold is exceeded. Though not activated in display area D control provides an alternative input that allows a user to specify that transmissions associated with multi media applications are blocked once the specified threshold is exceeded.

Other display areas A B and C associated with email applications browser applications and games respectively similarly have sliders and controls allowing a user to specify thresholds and conditional processing once the threshold is exceeded for those other types of applications. For example display area A indicates that the user has selected a threshold of 50 of the cap for the network for e mail applications. Display area A also indicates that a user has selected that once data usage exceeds the specified threshold of 50 email applications are blocked from initiating operations that require data transmission.

Display B indicates similar settings for browser applications. Though in this case the threshold is set at 90 of the cap and the conditional processing entails throttling transmissions once the threshold is exceeded.

For games as indicated in display area C the user has set the threshold at 60 of the cap and network operations requiring data transmissions associated with games are block once that threshold is exceeded.

In this example graphical user interface includes a control through which a user may select a network for which the settings entered through graphical user interface apply. In this example control is formatted as a drop down list box which may be rendered using techniques as are known in the art. In the operating state illustrated in a user has selected through control Network . Accordingly the settings input through display areas A B C and D apply to Network . Through manipulation of control a user may select a different network and may enter different values creating different policies for other networks.

Graphical user interface shows that a user may select multiple ways in which to input values forming a policy for user mode components. In this example multiple tabs are illustrated with different tabs associated with different classes of applications. Tab A has been selected allowing a user to specify values for applications on a category by category basis. Other tabs such as tabs B C D and E are also available. Through these tabs a user may access other display areas through which a user may specify policy information for user mode entities in other ways. For example accessing tab B may allow a user to access email applications individually and establish values of parameters of a usage policy for each application separately. Likewise tabs C D and E may allow a user to access display areas corresponding to browser applications games and multi media applications respectively and provide values defining policies for applications of these types individually. Accordingly it should be appreciated at represents just one example of a mechanism by which a user may specify policy values applicable to usage policies for user mode entities.

The above described techniques may be implemented in any suitable computing device. illustrates an example of a suitable computing system environment on which the invention may be implemented. The computing system environment is only one example of a suitable computing environment and is not intended to suggest any limitation as to the scope of use or functionality of the invention. Neither should the computing environment be interpreted as having any dependency or requirement relating to any one or combination of components illustrated in the exemplary operating environment .

The invention is operational with numerous other general purpose or special purpose computing system environments or configurations. Examples of well known computing systems environments and or configurations that may be suitable for use with the invention include but are not limited to personal computers server computers hand held or laptop devices multiprocessor systems microprocessor based systems set top boxes programmable consumer electronics network PCs minicomputers mainframe computers distributed computing environments that include any of the above systems or devices and the like.

The computing environment may execute computer executable instructions such as program modules. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. The invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules may be located in both local and remote computer storage media including memory storage devices.

With reference to an exemplary system for implementing the invention includes a general purpose computing device in the form of a computer . Components of computer may include but are not limited to a processing unit a system memory and a system bus that couples various system components including the system memory to the processing unit . The system bus may be any of several types of bus structures including a memory bus or memory controller a peripheral bus and a local bus using any of a variety of bus architectures. By way of example and not limitation such architectures include Industry Standard Architecture ISA bus Micro Channel Architecture MCA bus Enhanced ISA EISA bus Video Electronics Standards Association VESA local bus and Peripheral Component Interconnect PCI bus also known as Mezzanine bus.

Computer typically includes a variety of computer readable media. Computer readable media can be any available media that can be accessed by computer and includes both volatile and nonvolatile media removable and non removable media. By way of example and not limitation computer readable media may comprise computer storage media and communication media. Computer storage media includes both volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical disk storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can accessed by computer . Communication media typically embodies computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media includes wired media such as a wired network or direct wired connection and wireless media such as acoustic RF infrared and other wireless media. Combinations of the any of the above should also be included within the scope of computer readable media.

The system memory includes computer storage media in the form of volatile and or nonvolatile memory such as read only memory ROM and random access memory RAM . A basic input output system BIOS containing the basic routines that help to transfer information between elements within computer such as during start up is typically stored in ROM . RAM typically contains data and or program modules that are immediately accessible to and or presently being operated on by processing unit . By way of example and not limitation illustrates operating system application programs other program modules and program data .

The computer may also include other removable non removable volatile nonvolatile computer storage media. By way of example only illustrates a hard disk drive that reads from or writes to non removable nonvolatile magnetic media a magnetic disk drive that reads from or writes to a removable nonvolatile magnetic disk and an optical disk drive that reads from or writes to a removable nonvolatile optical disk such as a CD ROM or other optical media. Other removable non removable volatile nonvolatile computer storage media that can be used in the exemplary operating environment include but are not limited to magnetic tape cassettes flash memory cards digital versatile disks digital video tape solid state RAM solid state ROM and the like. The hard disk drive is typically connected to the system bus through a non removable memory interface such as interface and magnetic disk drive and optical disk drive are typically connected to the system bus by a removable memory interface such as interface .

The drives and their associated computer storage media discussed above and illustrated in provide storage of computer readable instructions data structures program modules and other data for the computer . In for example hard disk drive is illustrated as storing operating system application programs other program modules and program data . Note that these components can either be the same as or different from operating system application programs other program modules and program data . Operating system application programs other program modules and program data are given different numbers here to illustrate that at a minimum they are different copies. A user may enter commands and information into the computer through input devices such as a keyboard and pointing device commonly referred to as a mouse trackball or touch pad. Other input devices not shown may include a microphone joystick game pad satellite dish scanner or the like. These and other input devices are often connected to the processing unit through a user input interface that is coupled to the system bus but may be connected by other interface and bus structures such as a parallel port game port or a universal serial bus USB . A monitor or other type of display device is also connected to the system bus via an interface such as a video interface . In addition to the monitor computers may also include other peripheral output devices such as speakers and printer which may be connected through an output peripheral interface .

The computer may operate in a networked environment using logical connections to one or more remote computers such as a remote computer . The remote computer may be a personal computer a server a router a network PC a peer device or other common network node and typically includes many or all of the elements described above relative to the computer although only a memory storage device has been illustrated in . The logical connections depicted in include a local area network LAN and a wide area network WAN but may also include other networks. Such networking environments are commonplace in offices enterprise wide computer networks intranets and the Internet.

When used in a LAN networking environment the computer is connected to the LAN through a network interface or adapter . When used in a WAN networking environment the computer typically includes a modem or other means for establishing communications over the WAN such as the Internet. The modem which may be internal or external may be connected to the system bus via the user input interface or other appropriate mechanism. In a networked environment program modules depicted relative to the computer or portions thereof may be stored in the remote memory storage device. By way of example and not limitation illustrates remote application programs as residing on memory device . It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used.

Having thus described several aspects of at least one embodiment of this invention it is to be appreciated that various alterations modifications and improvements will readily occur to those skilled in the art.

For example it is described that applications may access an API maintained by an operating system to obtain current network information that includes a current basis for computing usage charges. This information may be presented as a cost per unit of data which allows the application to compute a cost of a contemplated operation. Alternatively or additionally this information may be presented directly as a cost of performing a contemplated operation.

Also operation of a cost aware application has been described. It should be appreciated that an application is an example of a user mode component. Other user mode components such as services executing in the operating system may access cost information and selectively perform operations involving data transmissions over a network based on that cost information.

Also though automated techniques are described by which a service that uses cost information related to data usage may obtain that information manual or semi automated techniques may be used. For example a user can expressly input cost information. Alternatively a network interface card may be configured with such information or a data file containing such information may be loaded onto the computing device when the data service is activated or at other times.

Further examples are provided in which management of network operations is performed based on user mode entities. However it should be appreciated that usage information may be collected for any suitable entity and that management of network operations may similarly may be performed on any suitable entities including kernel mode or other components of an operating system.

Such alterations modifications and improvements are intended to be part of this disclosure and are intended to be within the spirit and scope of the invention. Accordingly the foregoing description and drawings are by way of example only.

The above described embodiments of the present invention can be implemented in any of numerous ways. For example the embodiments may be implemented using hardware software or a combination thereof. When implemented in software the software code can be executed on any suitable processor or collection of processors whether provided in a single computer or distributed among multiple computers. Such processors may be implemented as integrated circuits with one or more processors in an integrated circuit component. Though a processor may be implemented using circuitry in any suitable format.

Further it should be appreciated that a computer may be embodied in any of a number of forms such as a rack mounted computer a desktop computer a laptop computer or a tablet computer. Additionally a computer may be embedded in a device not generally regarded as a computer but with suitable processing capabilities including a Personal Digital Assistant PDA a smart phone or any other suitable portable or fixed electronic device.

Also a computer may have one or more input and output devices. These devices can be used among other things to present a user interface. Examples of output devices that can be used to provide a user interface include printers or display screens for visual presentation of output and speakers or other sound generating devices for audible presentation of output. Examples of input devices that can be used for a user interface include keyboards and pointing devices such as mice touch pads and digitizing tablets. As another example a computer may receive input information through speech recognition or in other audible format.

Such computers may be interconnected by one or more networks in any suitable form including as a local area network or a wide area network such as an enterprise network or the Internet. Such networks may be based on any suitable technology and may operate according to any suitable protocol and may include wireless networks wired networks or fiber optic networks.

Also the various methods or processes outlined herein may be coded as software that is executable on one or more processors that employ any one of a variety of operating systems or platforms. Additionally such software may be written using any of a number of suitable programming languages and or programming or scripting tools and also may be compiled as executable machine language code or intermediate code that is executed on a framework or virtual machine.

In this respect the invention may be embodied as a computer readable storage medium or multiple computer readable media e.g. a computer memory one or more floppy discs compact discs CD optical discs digital video disks DVD magnetic tapes flash memories circuit configurations in Field Programmable Gate Arrays or other semiconductor devices or other non transitory tangible computer storage medium encoded with one or more programs that when executed on one or more computers or other processors perform methods that implement the various embodiments of the invention discussed above. The computer readable storage medium or media can be transportable such that the program or programs stored thereon can be loaded onto one or more different computers or other processors to implement various aspects of the present invention as discussed above. As used herein the term non transitory computer readable storage medium encompasses only a computer readable medium that can be considered to be a manufacture i.e. article of manufacture or a machine. Alternatively or additionally the invention may be embodied as a computer readable medium other than a computer readable storage medium such as a propagating signal.

The terms program or software are used herein in a generic sense to refer to any type of computer code or set of computer executable instructions that can be employed to program a computer or other processor to implement various aspects of the present invention as discussed above. Additionally it should be appreciated that according to one aspect of this embodiment one or more computer programs that when executed perform methods of the present invention need not reside on a single computer or processor but may be distributed in a modular fashion amongst a number of different computers or processors to implement various aspects of the present invention.

Computer executable instructions may be in many forms such as program modules executed by one or more computers or other devices. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. Typically the functionality of the program modules may be combined or distributed as desired in various embodiments.

Also data structures may be stored in computer readable media in any suitable form. For simplicity of illustration data structures may be shown to have fields that are related through location in the data structure. Such relationships may likewise be achieved by assigning storage for the fields with locations in a computer readable medium that conveys relationship between the fields. However any suitable mechanism may be used to establish a relationship between information in fields of a data structure including through the use of pointers tags or other mechanisms that establish relationship between data elements.

Various aspects of the present invention may be used alone in combination or in a variety of arrangements not specifically discussed in the embodiments described in the foregoing and is therefore not limited in its application to the details and arrangement of components set forth in the foregoing description or illustrated in the drawings. For example aspects described in one embodiment may be combined in any manner with aspects described in other embodiments.

Also the invention may be embodied as a method of which an example has been provided. The acts performed as part of the method may be ordered in any suitable way. Accordingly embodiments may be constructed in which acts are performed in an order different than illustrated which may include performing some acts simultaneously even though shown as sequential acts in illustrative embodiments.

Use of ordinal terms such as first second third etc. in the claims to modify a claim element does not by itself connote any priority precedence or order of one claim element over another or the temporal order in which acts of a method are performed but are used merely as labels to distinguish one claim element having a certain name from another element having a same name but for use of the ordinal term to distinguish the claim elements.

Also the phraseology and terminology used herein is for the purpose of description and should not be regarded as limiting. The use of including comprising or having containing involving and variations thereof herein is meant to encompass the items listed thereafter and equivalents thereof as well as additional items.

