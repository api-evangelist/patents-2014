---

title: Noise based interest point density pruning
abstract: Systems and methods for noise based interest point density pruning are disclosed herein. The systems include determining an amount of noise in an audio sample and adjusting the amount of interest points within an audio sample fingerprint based on the amount of noise. Samples containing high amounts of noise correspondingly generate fingerprints with more interest points. The disclosed systems and methods allow reference fingerprints to be reduced in size while increasing the size of sample fingerprints. The benefits in scalability do not compromise the accuracy of an audio matching system using noise based interest point density pruning.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09411884&OS=09411884&RS=09411884
owner: Google Inc.
number: 09411884
owner_city: Mountain View
owner_country: US
publication_date: 20140707
---
This application is a continuation of U.S. patent application Ser. No. 13 276 318 filed Oct. 18 2011 and entitled NOISE BASED INTEREST POINT DENSITY PRUNING the entirety of which is incorporated herein by reference.

This application relates to audio matching and more particularly to noise based interest point density pruning for fingerprinting.

Audio samples can be recorded by many commercially available electronic devices such as smart phones tablets e readers computers personal digital assistants personal media players etc. Audio matching provides for identification of a recorded audio sample by comparing the audio sample to a set of reference samples. To make the comparison an audio sample can be transformed to a time frequency representation of the sample by using for example a short time Fourier transform STFT . Using the time frequency representation interest points that characterize time and frequency locations of peaks or other distinct patterns of the spectrogram can then be extracted from the audio sample. Fingerprints or descriptors can be computed as functions of sets of interest points. Fingerprints of the audio sample can then be compared to fingerprints of reference samples to determine identity of the audio sample.

When comparing the fingerprint of an audio sample to fingerprints of reference samples it is desirable to have a database containing enough reference samples to make the comparison. The audio sample could come from any of a large number of sources and be of any of a variety of content types e.g. from music from a movie or from a television show . Consequently a database of reference samples that contains sufficient music samples movie samples and television samples to afford for accurate matching could contain millions of samples.

As reference fingerprints are computed as functions of sets of interest points the more interest points present in an individual reference fingerprint the larger the fingerprint becomes. Thus a database of a plurality of reference sample fingerprints consisting of large amounts of interest points negatively affects scalability in terms of storage and index size for an audio matching system.

The following presents a simplified summary of the specification in order to provide a basic understanding of some aspects of the specification. This summary is not an extensive overview of the specification. It is intended to neither identify key or critical elements of the specification nor delineate the scope of any particular embodiments of the specification or any scope of the claims. Its sole purpose is to present some concepts of the specification in a simplified form as a prelude to the more detailed description that is presented in this disclosure.

Systems and methods disclosed herein relate to audio matching. A noise detection component can determine a noise level in an audio sample. An interest point detection component can generate a set of interest points for the audio sample. A density component can generate subsets of interest points based on the set of interest points. A fingerprint component can generate a set of fingerprints based on the subsets of interest points and the noise level.

The following description and the drawings set forth certain illustrative aspects of the specification. These aspects are indicative however of but a few of the various ways in which the principles of the specification may be employed. Other advantages and novel features of the specification will become apparent from the following detailed description of the specification when considered in conjunction with the drawings.

The innovation is now described with reference to the drawings wherein like reference numerals are used to refer to like elements throughout. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of this innovation. It may be evident however that the innovation can be practiced without these specific details. In other instances well known structures and devices are shown in block diagram form in order to facilitate describing the innovation.

Audio matching in general involves analyzing an audio sample for unique characteristics that can be used in comparison to unique characteristics of reference samples to identify the audio sample. One manner to identify unique characteristics of an audio sample is through use of a spectrogram. A spectrogram represents an audio sample by plotting time on one axis and frequency on another axis. Additionally amplitude or intensity of a certain frequency at a certain time can also be incorporated into the spectrogram by using color or a third dimension.

There are several different techniques for creating a spectrogram. One technique involves using a series of band pass filters that can filter an audio sample at a specific frequency and measure amplitude of the audio sample at that specific frequency over time. The audio sample can be run through additional filters to individually isolate a set of frequencies to measure the amplitude of the set over time. A spectrogram can be created by combining all the measurements over time on the frequency axis to generate a spectrogram image of frequency amplitudes over time.

A second technique involves using short time Fourier transform STFT to break down an audio sample into time windows where each window is Fourier transformed to calculate a magnitude of the frequency spectrum for the duration of each window. Combining a plurality of windows side by side on the time axis of the spectrogram creates an image of frequency amplitudes over time. Other techniques such as wavelet transforms can also be used to construct a spectrogram.

Creating and storing in a database an entire spectrogram for a plurality of reference samples can require large amounts of storage space and affect scalability of an audio matching system. Therefore it is desirable to instead calculate and store compact descriptors fingerprints of reference samples versus an entire spectrogram. One method of calculating fingerprints is to first determine individual interest points that identify unique characteristics of local features of the time frequency representation of the reference sample. Fingerprints can then be computed as functions of sets of interest points.

Calculating interest points involves identifying unique characteristics of the spectrogram. For example an interest point could be a spectral peak of a specific frequency over a specific window of time. As another non limiting example an interest point could also include timing of onset of a note. It is to be appreciated that conceivably any suitable spectral event over a specific duration of time could constitute an interest point.

An audio matching system that includes reference fingerprints with many interest points is generally more accurate in identifying an audio sample. For example the more interest points in a reference sample fingerprint the more likely an interest point from a fingerprint of an audio sample will match an interest point from the reference sample fingerprint. However adding additional interest points to each reference sample fingerprint can limit scalability of the system. For example because fingerprints are calculated as functions of sets of interest points the size of a fingerprint can be dependent on the number of interest points contained in the fingerprint.

While the size of reference fingerprints can limit scalability of an audio matching system the size of an audio sample fingerprint does not similarly limit scalability. This is because audio sample fingerprints are not permanently stored in the reference fingerprint database rather audio sample fingerprints are used to match the sample and then can be discarded. Accordingly audio sample fingerprints containing large amounts of interest points can involve additional lookups against the reference fingerprint database but not necessarily additional data storage. It can be appreciated that additional lookups may also require additional computational power to process the extra results.

Therefore one means of increasing scalability of an audio matching system would be to limit the amount of interest points in reference sample fingerprints while increasing the amount of interest points in audio sample fingerprints.

For samples suffering from noise or distortion including additional interest points in sample fingerprints can be beneficial in matching the sample fingerprint to a reference fingerprint as some interest points in the sample fingerprint may suffer from effects of noise or distortion making those interest points unmatchable to the interest points in the reference fingerprint. In addition the sample may contain types of noise which cause new interest points to be created. For example someone talking over an audio sample can create sample fingerprints with both irrelevant interest points generated based on the talking along with relevant interest points generated based on the underlying audio sample. In this example including additional interest points in the sample fingerprint can offer better performance as the more relevant interest points within the sample fingerprint the more efficiently an audio matching system can match the sample fingerprint to reference fingerprints.

For samples that have little noise or distortion including additional interest points in the sample fingerprint may be unnecessary as clean samples are generally more easily matched to reference samples. While including additional interest points in clean sample fingerprints may negligibly increase matching accuracy it also increases computational demands in processing additional lookups against the reference fingerprint database. Therefore it is advantageous to limit including additional interest points in sample fingerprints when the sample contains little noise or distortion.

Systems and methods herein provide for including greater amounts of interest points in sample fingerprints than in reference fingerprints. The amount of interest points to include in sample fingerprints can be based on the amount of noise in the sample. Noisier samples can include more interest points in the sample fingerprint. Thus the system can reduce the storage footprint required for reference sample fingerprints while still maintaining accurate identification of audio sample.

As discussed in greater detail below various implementations provide for using noise based interest point density pruning methods to improve both audio matching performance and scalability. In one implementation interest points can be pruned by selecting a subset of interest points from a set of interest points. In addition in a high noise environment subsets with a higher density of interest points or the entire set of interest points can be selected to increase audio matching accuracy.

Referring initially to there is illustrated a graphical example of noise based interest point pruning. An audio sample not shown can be run through a plurality of interest point detection methods not shown to generate an entire set of interest points . If high amounts of noise are detected in the audio sample the audio matching system can use the entire set of interest points in an attempt to match the audio sample with reference samples.

Set represents a subset of the entire set of interest points . For example when medium amounts of noise is detected in the audio sample a subset of the entire set of interest points can be used in an attempt to match the audio sample.

Set represents a subset of set and respectively. In a low noise environment it is more likely that any interest point from the audio sample will match a corresponding interest point in a reference sample. Accordingly in a low noise environment even less than the subset of the entire set of interest points can be used to effectively match the audio sample.

It can be further appreciated that sets and are to illustrate aspects of the subject disclosure and do not limit the amount of possible sets used to distinguish various noisy environments. For example N subsets of N is an integer can be used to distinguish varying levels of interest points used in matching the audio sample to reference samples. Additionally the relative size of compared to compared to in is illustrative only.

In one implementation a noise level can be determined based upon source of the audio sample. For example audio samples originating from a device expected to have recorded the audio sample e.g. a phone personal digital assistant or a tablet device can be indicative of noisier environments. Audio samples from a device expected to primarily deliver or transmit audio from storage e.g. from a server personal computer or media player can be indicative of a noise free environment.

To provide for or aid in the numerous inferences described herein components described herein can examine the entirety or a subset of data available and can provide for reasoning about or infer states of a system environment and or client from a set of observations as captured via events and or data. Inference can be employed to identify a specific context or action or can generate a probability distribution over states for example. The inference can be probabilistic that is the computation of a probability distribution over states of interest based upon a consideration of data and events. Inference can also refer to techniques employed for composing higher level events from a set of events and or data.

Such inference can result in the construction of new events or actions from a set of observed events and or stored event data whether or not the events are correlated in close temporal proximity and whether the events and data come from one or several event and data sources. Various classification explicitly and or implicitly trained schemes and or systems e.g. support vector machines neural networks expert systems Bayesian belief networks fuzzy logic data fusion engines . . . can be employed in connection with performing automatic and or inferred action in connection with the claimed subject matter.

A classifier can be a function that maps an input attribute vector x x1 x2 x3 x4 xn to a confidence that the input belongs to a class that is f x confidence class . Such classification can employ a probabilistic and or statistical based analysis e.g. factoring into the analysis utilities and costs to prognose or infer an action that a user desires to be automatically performed. A support vector machine SVM is an example of a classifier that can be employed. The SVM operates by finding a hyper surface in the space of possible inputs where the hyper surface attempts to split the triggering criteria from the non triggering events. Intuitively this makes the classification correct for testing data that is near but not identical to training data. Other directed and undirected model classification approaches include e.g. na ve Bayes Bayesian networks decision trees neural networks fuzzy logic models and probabilistic classification models providing different patterns of independence can be employed. Classification as used herein also is inclusive of statistical regression that is utilized to develop models of priority.

Interest point detection component can generate a plurality of sets of interest points based upon audio sample . It can be appreciated that sets of interest points corresponding to different types of spectral events can be generated to maximize the diversity of interest points included in the set of interest points generated by interest point detection component .

Density component can generate subsets of interest points based on the set of interest points. It can be appreciated that subsets of interest points can be based on interest point detection methods random selection or using a trained classifier. For example density component can generate a subset of interest points based on interest point detection methods most robust to pitch shift distortion. In another example density component can generate a subset of interest points based on interest point detection methods most robust to noise introduced by compression techniques.

It can be further appreciated as discussed in greater detail below with regard to fingerprint component that using subsets of interest points to generate a fingerprint can prune interest points from the entire set of interest points generated by interest point detection component .

Fingerprint component can generate a set of fingerprints based on the subsets of interest points and the noise level. In one implementation fingerprint component increases the amount of interest points in the set of fingerprints as the noise level increases. It yet another implementation the amount of interest points in the set of fingerprints can be determined by a trained classifier. For example if the noise level is indicative of pitch shift distortion fingerprint component can generate a set of fingerprints based on a subset of interest points most robust to pitch shift distortion. In another example if the noise level is indicative of pitch shift distortion and noise introduced by compression techniques fingerprint component can generate a set of fingerprints based on a subset of interest points most robust to pitch shift distortion and noise introduced by compression techniques.

Referring now to illustrated is a high level functional block diagram of an example audio matching system including reference sample component that can determine amount of interest points included within the fingerprints of reference samples stored in memory . It can be appreciated that a plurality of fingerprints for a plurality of reference samples can be stored in memory for access by system components.

In one implementation fingerprint component generates a set of fingerprints based on the amount of interest points within fingerprints of reference samples . The amount of interest points in the set of fingerprints generated by fingerprint component can be greater than the amount of interest points within fingerprints of reference samples .

Referring now to illustrated is a high level functional block diagram of an example audio matching system including matching component that can identify the audio sample based upon comparing the set of fingerprints generated by fingerprint component for audio sample to reference sample fingerprints .

In one implementation the failure by matching component to identify identity of audio sample can result in increasing the amount of interest points in the set of fingerprints of audio sample generated by fingerprint component . It can be appreciated that after increasing the amount of interest points in the set of fingerprints matching component can reattempt to identify audio sample .

Moreover various acts have been described in detail above in connection with respective system diagrams. It is to be appreciated that the detailed description of such acts in the prior figures can be and are intended to be implementable in accordance with the following methodologies.

At a set of interest points is generated e.g. by an interest point detection component for the audio sample. At a plurality of subsets interest points are generated e.g. by a density component based on the set of interest points for the audio sample. For example the method can provide for generating a subset of interest points based on interest point detection methods most robust to pitch shift distortion. In another example the method can provide for generating a subset of interest points based on interest point detection methods most robust to noise introduced by compression techniques. It can be appreciated that the plurality of subsets of interest points generated at can be based on interest point detection methods random selection or using a trained classifier.

At a set of fingerprints is generated e.g. by a fingerprint component containing an amount of interest points based upon the subset of interest points and the noise level e.g. pruned based on the noise level . In one implementation the amount of interest points in the set of fingerprints can be determined based upon comparing the set of fingerprints with reference fingerprints. In one implementation a high noise level can be assumed and the amount of interest points in the set of fingerprints can be a constant large e.g. high density subset of interest points. In one implementation the amount of interest points in the set of fingerprints increases as noise level increases. In one implementation the amount of interest points in the set of fingerprints is determined based upon a trained classifier.

Reference throughout this specification to one implementation or an implementation means that a particular feature structure or characteristic described in connection with the implementation is included in at least one implementation. Thus the appearances of the phrase in one implementation or in an implementation in various places throughout this specification can but are not necessarily referring to the same implementation depending on the circumstances. Furthermore the particular features structures or characteristics may be combined in any suitable manner in one or more implementations.

To the extent that the terms includes including has contains variants thereof and other similar words are used in either the detailed description or the claims these terms are intended to be inclusive in a manner similar to the term comprising as an open transition word without precluding any additional or other elements.

As used in this application the terms component module system or the like are generally intended to refer to a computer related entity either hardware e.g. a circuit a combination of hardware and software or an entity related to an operational machine with one or more specific functionalities. For example a component may be but is not limited to being a process running on a processor e.g. digital signal processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a controller and the controller can be a component. One or more components may reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers. Further a device can come in the form of specially designed hardware generalized hardware made specialized by the execution of software thereon that enables hardware to perform specific functions e.g. generating interest points and or fingerprints software on a computer readable medium or a combination thereof.

The aforementioned systems circuits modules and so on have been described with respect to interaction between several components and or blocks. It can be appreciated that such systems circuits components blocks and so forth can include those components or specified sub components some of the specified components or sub components and or additional components and according to various permutations and combinations of the foregoing. Sub components can also be implemented as components communicatively coupled to other components rather than included within parent components hierarchical . Additionally it should be noted that one or more components may be combined into a single component providing aggregate functionality or divided into several separate sub components and any one or more middle layers such as a management layer may be provided to communicatively couple to such sub components in order to provide integrated functionality. Any components described herein may also interact with one or more other components not specifically described herein but known by those of skill in the art.

Moreover the words example or exemplary are used herein to mean serving as an example instance or illustration. Any aspect or design described herein as exemplary is not necessarily to be construed as preferred or advantageous over other aspects or designs. Rather use of the words example or exemplary is intended to present concepts in a concrete fashion. As used in this application the term or is intended to mean an inclusive or rather than an exclusive or . That is unless specified otherwise or clear from context X employs A or B is intended to mean any of the natural inclusive permutations. That is if X employs A X employs B or X employs both A and B then X employs A or B is satisfied under any of the foregoing instances. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from context to be directed to a singular form.

With reference to a suitable environment for implementing various aspects of the claimed subject matter includes a computer . The computer includes a processing unit a system memory a codec and a system bus . The system bus couples system components including but not limited to the system memory to the processing unit . The processing unit can be any of various available processors. Dual microprocessors and other multiprocessor architectures also can be employed as the processing unit .

The system bus can be any of several types of bus structure s including the memory bus or memory controller a peripheral bus or external bus and or a local bus using any variety of available bus architectures including but not limited to Industrial Standard Architecture ISA Micro Channel Architecture MSA Extended ISA EISA Intelligent Drive Electronics IDE VESA Local Bus VLB Peripheral Component Interconnect PCI Card Bus Universal Serial Bus USB Advanced Graphics Port AGP Personal Computer Memory Card International Association bus PCMCIA Firewire IEEE 1394 and Small Computer Systems Interface SCSI .

The system memory includes volatile memory and non volatile memory . The basic input output system BIOS containing the basic routines to transfer information between elements within the computer such as during start up is stored in non volatile memory . By way of illustration and not limitation non volatile memory can include read only memory ROM programmable ROM PROM electrically programmable ROM EPROM electrically erasable programmable ROM EEPROM or flash memory. Volatile memory includes random access memory RAM which acts as external cache memory. According to present aspects the volatile memory may store the write operation retry logic not shown in and the like. By way of illustration and not limitation RAM is available in many forms such as static RAM SRAM dynamic RAM DRAM synchronous DRAM SDRAM double data rate SDRAM DDR SDRAM enhanced SDRAM ESDRAM .

Computer may also include removable non removable volatile non volatile computer storage media. illustrates for example a disk storage . Disk storage includes but is not limited to devices like a magnetic disk drive solid state disk SSD floppy disk drive tape drive Jaz drive Zip drive LS 100 drive flash memory card or memory stick. In addition disk storage can include storage media separately or in combination with other storage media including but not limited to an optical disk drive such as a compact disk ROM device CD ROM CD recordable drive CD R Drive CD rewritable drive CD RW Drive or a digital versatile disk ROM drive DVD ROM . To facilitate connection of the disk storage devices to the system bus a removable or non removable interface is typically used such as interface .

It is to be appreciated that describes software that acts as an intermediary between users and the basic computer resources described in the suitable operating environment . Such software includes an operating system . Operating system which can be stored on disk storage acts to control and allocate resources of the computer system . Applications take advantage of the management of resources by operating system through program modules and program data such as the boot shutdown transaction table and the like stored either in system memory or on disk storage . It is to be appreciated that the claimed subject matter can be implemented with various operating systems or combinations of operating systems.

A user enters commands or information into the computer through input device s . Input devices include but are not limited to a pointing device such as a mouse trackball stylus touch pad keyboard microphone joystick game pad satellite dish scanner TV tuner card digital camera digital video camera web camera and the like. These and other input devices connect to the processing unit through the system bus via interface port s . Interface port s include for example a serial port a parallel port a game port and a universal serial bus USB . Output device s use some of the same type of ports as input device s . Thus for example a USB port may be used to provide input to computer and to output information from computer to an output device . Output adapter is provided to illustrate that there are some output devices like monitors speakers and printers among other output devices which require special adapters. The output adapters include by way of illustration and not limitation video and sound cards that provide a means of connection between the output device and the system bus . It should be noted that other devices and or systems of devices provide both input and output capabilities such as remote computer s .

Computer can operate in a networked environment using logical connections to one or more remote computers such as remote computer s . The remote computer s can be a personal computer a server a router a network PC a workstation a microprocessor based appliance a peer device a smart phone a tablet or other network node and typically includes many of the elements described relative to computer . For purposes of brevity only a memory storage device is illustrated with remote computer s . Remote computer s is logically connected to computer through a network interface and then connected via communication connection s . Network interface encompasses wire and or wireless communication networks such as local area networks LAN and wide area networks WAN and cellular networks. LAN technologies include Fiber Distributed Data Interface FDDI Copper Distributed Data Interface CDDI Ethernet Token Ring and the like. WAN technologies include but are not limited to point to point links circuit switching networks like Integrated Services Digital Networks ISDN and variations thereon packet switching networks and Digital Subscriber Lines DSL .

Communication connection s refers to the hardware software employed to connect the network interface to the bus . While communication connection is shown for illustrative clarity inside computer it can also be external to computer . The hardware software necessary for connection to the network interface includes for exemplary purposes only internal and external technologies such as modems including regular telephone grade modems cable modems and DSL modems ISDN adapters and wired and wireless Ethernet cards hubs and routers.

Referring now to there is illustrated a schematic block diagram of a computing environment in accordance with the subject specification. The system includes one or more client s which can include an application or a system that accesses a service on the server . The client s can be hardware and or software e.g. threads processes computing devices . The client s can house cookie s metadata and or associated contextual information by employing the specification for example.

The system also includes one or more server s . The server s can also be hardware or hardware in combination with software e.g. threads processes computing devices . The servers can house threads to perform for example interest point detection density pruning fingerprint generation fingerprint matching or fingerprint comparisons in accordance with the subject disclosure. One possible communication between a client and a server can be in the form of a data packet adapted to be transmitted between two or more computer processes where the data packet contains for example an audio sample. The data packet can include a cookie and or associated contextual information for example. The system includes a communication framework e.g. a global communication network such as the Internet that can be employed to facilitate communications between the client s and the server s .

Communications can be facilitated via a wired including optical fiber and or wireless technology. The client s are operatively connected to one or more client data store s that can be employed to store information local to the client s e.g. cookie s and or associated contextual information . Similarly the server s are operatively connected to one or more server data store s that can be employed to store information local to the servers .

The illustrated aspects of the disclosure may also be practiced in distributed computing environments where certain tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules can be located in both local and remote memory storage devices.

The systems and processes described below can be embodied within hardware such as a single integrated circuit IC chip multiple ICs an application specific integrated circuit ASIC or the like. Further the order in which some or all of the process blocks appear in each process should not be deemed limiting. Rather it should be understood that some of the process blocks can be executed in a variety of orders that are not all of which may be explicitly illustrated herein.

What has been described above includes examples of the implementations of the present invention. It is of course not possible to describe every conceivable combination of components or methodologies for purposes of describing the claimed subject matter but many further combinations and permutations of the subject innovation are possible. Accordingly the claimed subject matter is intended to embrace all such alterations modifications and variations that fall within the spirit and scope of the appended claims. Moreover the above description of illustrated implementations of this disclosure including what is described in the Abstract is not intended to be exhaustive or to limit the disclosed implementations to the precise forms disclosed. While specific implementations and examples are described herein for illustrative purposes various modifications are possible that are considered within the scope of such implementations and examples as those skilled in the relevant art can recognize.

In particular and in regard to the various functions performed by the above described components devices circuits systems and the like the terms used to describe such components are intended to correspond unless otherwise indicated to any component which performs the specified function of the described component e.g. a functional equivalent even though not structurally equivalent to the disclosed structure which performs the function in the herein illustrated exemplary aspects of the claimed subject matter. In this regard it will also be recognized that the innovation includes a system as well as a computer readable storage medium having computer executable instructions for performing the acts and or events of the various methods of the claimed subject matter.

