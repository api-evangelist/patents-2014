---

title: Determining the location of a point of interest in a media stream that includes caption data
abstract: A method and computing device for determining the location of a point of interest in a media stream. The method receives an order of duplication for a media stream and a sequence of caption data strings associated with the media stream. The method computes a hash value for a selected string in the sequence. The hash value representing the selected string, and a number of strings in the sequence that immediately precede the selected string, where the order of duplication determines the number of strings. The method receives a media stream time for the selected string based on the hash value, and determines a time at a point of interest in the media stream relative to the media stream time for the selected string.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09215496&OS=09215496&RS=09215496
owner: GOOGLE TECHNOLOGY HOLDINGS LLC
number: 09215496
owner_city: Mountain View
owner_country: US
publication_date: 20140716
---
This application is a continuation of U.S. patent application Ser. No. 13 534 145 filed Jun. 27 2012 and entitled DETERMINING THE LOCATION OF A POINT OF INTEREST IN A MEDIA STREAM THAT INCLUDES CAPTION DATA the entirety of which is incorporated herein by reference.

Television for long has been a known conversation starter. People love to watch television and movies and enjoy discussing at length their favorite shows. The advent of social media has given a new dimension to these conversations that were previously restricted to the dinner table or office. The recent phenomena of tweeting and updating status via Facebook have taken television oriented conversations as well as all other conversations to a new level. Conversationalists enjoy talking about a television show or movie not only after the event but also while watching it. This preference continues whether the conversationalists are located in same house or networked across great distances. All corporations that want to participate in this idea are coming up with new socializing strategies in such scenarios. One such strategy uses a dedicated server that connects group of viewers on a network and allows each viewer to update the content that the user is currently viewing on a television connected to a set top box. Other strategies use social media products that allow each viewer to tag content via the set top box or even comment on the content via the set top box at various points during a live or recorded media stream.

Although some conventional solutions allow a viewer to post social media comments on the content e.g. movie or television show via a computing device other than a set top box these solutions associate the viewer s comments with the entire content. There is a need for a system that allows the viewer to instantly post and later read comments or updates of the currently viewed content via social media based on a specific scene in the content. Such a system would allow the viewer to provide instant viewer comments or updates during the viewing of a live or recorded media stream.

Nevertheless some conventional solutions do not provide the capability of determining absolute content position from the start of content while the consumer is watching it. In other words to enable a viewer to post a comment based on a scene in the content a system needs to be able to determine the exact location position and time from the start of the content of any particular scene in the content. If a system can determine the exact location of a scene relative to the start of content then it would be possible to capture and store the viewer s comment and then later present those scene specific social media updates and tags to their social network. In addition if such exact location is detectable then it opens the door for introducing other opportunities such as scene specific or comment based targeted advertisement that are accurately targeted to a viewer based on the scene viewed and comment introduced by that viewer.

When a customer s set top box is decoding a media stream the current metadata for the media stream does not indicate at what point of the original stream it is currently playing out the content. If the set top box tunes to the content from the start of the program it may be possible at the set top box to determine how far the content has played from the start. However if the set top box tunes to the content at some time after the start of the program then it is impossible for the set top box to determine how far the current point of content is from the start of the content. In other words it is only possible to know the current position of the content with respect to the tuned point of content and not with respect to the beginning of the content. Furthermore from a service operator s point of view it would be of great interest to know the current point of the content that is playing at the customer s set top box assuming the customer tunes and plays out or requests to perform a trick play of the content during the playing of the content. and described below depict embodiments of this scenario and illustrate examples of why the time elapsed from the start of the content is not always useful for determining the location of a point of interest.

Extraneous content is any type of content that is not part of the original unadulterated media. The term extraneous content includes content such as advertisements commentary on the original content and the like. The presence of extraneous content will lengthen the original content and push a POI after the extraneous content farther away from the start of program. Thus a POI after the extraneous content now appears at a time that is lengthened by the length of the extraneous content. In addition the length and manner that extraneous content is added to an original content may vary from one service provider to another.

If the content streamed by a multi service operator MSO did not have any extraneous content such as advertisements introduced in the original content then it would be possible to approximate the time of content by taking the difference between current time and the program start time included in the electronic program guide. However the MSO may edit the original content before broadcast. In one embodiment the MSO may edit the original content because of ratings consideration of a region. In such cases a simple difference between current time and clock based program start time is not sufficient to determine the absolute position of the content.

The identification of an absolute content position becomes even more challenging when the play out of the content is from a local digital video recorder DVR with no program start time. In addition when the customer requests a trick play during the play out of the content it becomes impossible to predict the current content position based on program start time available in the program guide.

Currently set top boxes and media players on devices such as mobile phones tablets notebooks and desktop computers cannot detect unambiguously and uniquely the exact position of the playback of content. This problem is further exacerbated when the media stream is edited before delivery or includes extraneous content. The content may be streamed from any source such as a live media stream delivered on terrestrial cable or satellite delivered via the Internet as IP packets or delivered from a local media storage device such as a DVR. Moreover there is no guarantee that the media stream played is an exact replica of the original content. Consequently it is difficult to detect the exact content location based on metadata alone or simple observation points such as time since start of play.

Captioning is the process of converting the audio content of a television broadcast webcast film video CD ROM DVD live event or other productions into caption data and displaying the text component of the caption data on a screen monitor or other visual display system. Captions not only display words as the textual equivalent of spoken dialogue or narration but also include speaker identification sound effects and music description. Closed captions i.e. closed caption data are captions that are encoded or embedded into the video and cannot be seen unless turned on using your television or set top box menu. Open captions i.e. open caption data are always visible and cannot be turned off because they are burned directly into the video and are a part of the picture. Subtitling is the process of making the soundtrack of a video recognizable to viewers who do not understand the language of the spoken dialogue or viewers unable to hear the audio. Subtitles i.e. subtitle data may appear as translations to foreign languages from the spoken language or straight transcripts of the spoken language. Generally captions are not distinguishable from subtitles. However in the United States and Canada the aim of subtitles is to describe to a viewer who can hear but cannot understand the language or accent of the dialogue and some on screen text whereas the aim of captions is to describe to the deaf and hard of hearing all significant spoken dialogue non speech information music or sound effects. The Electronic Industries Alliance EIA 608 standard describes the encoding of closed captions also known as line 21 captions for National Television System Committee NTSC analog television broadcasts in the United States and Canada. The Electronic Industries Alliance CEA 708 standard describes the encoding of closed captions for Advanced Television Systems Committee ATSC digital television broadcasts in the United States and Canada. Accordingly the use herein of the terms caption captioning subtitle and subtitling are synonymous at least in some respects and are not limiting to the teachings herein.

Some conventional solutions use closed caption tags that include commands and control information that the set top box processes. Other conventional solutions use enhanced metadata in a searchable index to identify content segments and corresponding timing information. All of these conventional solutions add data to the media stream and require the MSO to install additional hardware and software or do not accommodate media streams that are edited by the MSO or include extraneous content.

The MSO cable headend includes a video server digital access controller DAC system and closed caption data server . The video server is a general purpose server computer that receives the original content and serves the original content to a client device such as a set top box at a customer location via the DAC system . The closed caption data server is general purpose server computer that receives and stores the closed caption data and receives set top box user information and the paired companion device information via the digital access controller system . As described above the closed caption data is input to the closed caption data server as a file that contains all the captioning data for the original content and that is stored separately in an interchangeable file format. The closed caption data server includes programming to receive and store the closed caption data and calculate and store the order of duplication data and hash values for the closed caption data in a hash table.

The set top box shown in is a client device that communicates with the closed caption data server to obtain the previously determined order of duplication OD value and in return constantly updates the content position related information or hash codes as described herein to the closed caption data server regarding the original content played at the set top box . The companion device shown in is a client device such as a mobile telephone tablet personal computer or another set top box that is processing or consuming the media stream time.

The processor of the closed caption data server performs the disclosed methods by executing sequences of operational instructions that comprise each computer program resident in or operative on the memory . The reader should understand that the memory may include operating system administrative and database programs that support the programs disclosed in this application. In one embodiment the configuration of the memory of the closed caption data server includes an order of duplication program and media stream time program . The order of duplication program and media stream time program performs the method disclosed in the exemplary embodiments depicted in and . When the processor performs the disclosed method it stores intermediate results in the memory or data storage device . In another embodiment the processor may swap these programs or portions thereof in and out of the memory as needed and thus may include fewer than all of these programs at any one time.

The processor of the set top box performs the disclosed methods by executing sequences of operational instructions that comprise each computer program resident in or operative on the memory . The reader should understand that the memory may include operating system administrative and database programs that support the programs disclosed in this application. In one embodiment the configuration of the memory of the set top box includes a media stream time program . The media stream time program performs the method disclosed in the exemplary embodiments depicted in and . When the processor performs the disclosed method it stores intermediate results in the memory or data storage device . In another embodiment the processor may swap these programs or portions thereof in and out of the memory as needed and thus may include fewer than all of these programs at any one time.

In one embodiment the closed caption data server receives and stores the closed caption data and determines the order of duplication of the original content . When one or more caption data strings repeat in a media stream the order of duplication OD is defined as the number of caption data strings that appear before the current caption data string that need to be included to uniquely identify the current caption data string. The order of duplication is any positive non zero integer value. For example consider a media stream that includes two appearances of the caption data string X . If the caption data string A immediately precedes the first appearance of X and the caption data string B immediately precedes the second appearance of X then the order of duplication is 2. However if the caption data string A immediately precedes both appearances of the data string X and the caption data string C immediately precedes the first appearance of A followed immediately by X and the caption data string D immediately precedes the second appearance of A followed by X then the order of duplication is 3.

If the closed caption file does not include any repeated caption data strings then the order of duplication is 1 and the closed caption data server uses only the current caption data string to generate a hash value. If the closed caption file includes repeated caption data strings then the order of duplication is greater than 1 and the closed caption data server uses the current caption data string n and one less than the order of duplication OD 1 immediately preceding caption data strings to generate a hash value. The only exception when the order of duplication is greater than 1 is for dealing with the first caption data string of the content. Since there are no immediately preceding caption data strings the closed caption data server uses the null string to generate the hash value. In one embodiment the closed caption data server only performs this two pass method as for this example however typically a multi pass method once during the lifetime of the media stream stored in the closed caption data server .

The hash values generated for each entry in the closed caption file are useful when comparing the incoming hash value from the client devices in order to unambiguously and uniquely identify the current location of the media stream. When a client device reports a hash value then the closed caption data server would search the database for the hash value and determine the media stream time for the corresponding location of the content. The closed caption data server can then publish this media stream time to a companion device for other purposes such as targeted advertising to the original user viewing the content on the set top box or companion device for identifying comments i.e. tags position to use in social networking with other users.

In one embodiment the system illustrated in includes two components. The first component operates in a server computer such as the closed caption data server . The first component computes the order of duplication and hash table values for caption data associated with a media stream. The second component operates in customer premises equipment such as the set top box . The second component receives an order of duplication for a media stream from the first component and computes a hash value for a point of interest in the media stream using the order of duplication and live caption data received by the set top box . The second component sends the computed hash value to the first component. The first component compares the computed hash value to the hash table values to obtain a media stream time for the point of interest and returns the media stream time to the second component.

Although the disclosed embodiments describe a fully functioning method and computing device for determining the location of a point of interest in a media stream the reader should understand that other equivalent embodiments exist. Since numerous modifications and variations will occur to those reviewing this disclosure the method and computing device for determining the location of a point of interest in a media stream is not limited to the exact construction and operation illustrated and disclosed. Accordingly this disclosure intends all suitable modifications and equivalents to fall within the scope of the claims.

