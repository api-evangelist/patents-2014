---

title: Selectively employing dynamic traffic shaping
abstract: In one embodiment, a device in a network identifies a set of one or more destination addresses for which traffic shaping is to be performed by controlling the data rate at which traffic is sent to the one or more destination addresses. The device sends the traffic to one of the destination addresses along a communication path in the network and at a particular data rate. The device identifies a change in a performance characteristic for the communication path. The device adjusts the data rate at which the traffic is sent along the communication path, in response to identifying the change in the performance characteristic for the communication path.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09553813&OS=09553813&RS=09553813
owner: Cisco Technology, Inc.
number: 09553813
owner_city: San Jose
owner_country: US
publication_date: 20140723
---
The present disclosure relates generally to computer networks and more particularly to selectively employing dynamic traffic shaping.

Enterprise networks are carrying a very fast growing volume of both business and non business critical traffics. Often business applications such as video collaboration cloud applications etc. use the same hypertext transfer protocol HTTP and or HTTP secure HTTPS techniques that are used by non business critical web traffic. This complicates the task of optimizing network performance for specific applications as many applications use the same protocols thus making it difficult to distinguish and select traffic flows for optimization.

As the number of business and non business critical applications increases so too are the number and variety of service level agreements SLAs that may be in use by a network. In general an SLA refers to a target or threshold level of performance guaranteed by the network and may be associated with a particular type of traffic. For example many real time business applications are very bandwidth demanding and having corresponding SLAs that are used to ensure that a certain amount of network bandwidth is available for a particular flow of traffic.

Traditionally reactive techniques have been used to enforce network performance criteria such as SLAs. First the network itself is engineered by defining the application SLAs quality of service QoS parameters security settings etc. Next the performance criteria are monitored in view of the network s performance. If the performance criteria are not met adjustments may then be made to the network in a reactive manner. However such a reactive approach may also by its very nature mean that the network experiences periods of reduced performance before corrective measures are taken.

According to one or more embodiments of the disclosure a device in a network identifies a set of one or more destination addresses for which traffic shaping is to be performed by controlling the data rate at which traffic is sent to the one or more destination addresses. The device sends the traffic to one of the destination addresses along a communication path in the network and at a particular data rate. The device identifies a change in a performance characteristic for the communication path. The device adjusts the data rate at which the traffic is sent along the communication path in response to identifying the change in the performance characteristic for the communication path.

A computer network is a geographically distributed collection of nodes interconnected by communication links and segments for transporting data between end nodes such as personal computers and workstations. Many types of networks are available with the types ranging from local area networks LANs to wide area networks WANs . LANs typically connect the nodes over dedicated private communications links located in the same general physical location such as a building or campus. WANs on the other hand typically connect geographically dispersed nodes over long distance communications links such as common carrier telephone lines optical lightpaths synchronous optical networks SONET or synchronous digital hierarchy SDH links. The Internet is an example of a WAN that connects disparate networks throughout the world providing global communication between nodes on various networks. The nodes typically communicate over the network by exchanging discrete frames or packets of data according to predefined protocols such as the Transmission Control Protocol Internet Protocol TCP IP . In this context a protocol consists of a set of rules defining how the nodes interact with each other. Computer networks may be further interconnected by an intermediate network node such as a router to extend the effective size of each network.

In some implementations a router or a set of routers may be connected to a private network e.g. dedicated leased lines an optical network etc. or a virtual private network VPN such as an MPLS VPN thanks to a carrier network via one or more links exhibiting very different network and SLA characteristics. For the sake of illustration a given customer site may fall under any of the following categories 

1. Site Type A a site connected to the network e.g. via a private or VPN link using a single CE router and a single link with potentially a backup link e.g. a 3G 4G LTE backup connection . For example a particular CE router shown in network may support a given customer site potentially also with a backup link such as a wireless connection.

2. Site Type B a site connected to the network using two MPLS VPN links e.g. from different Service Providers with potentially a backup link e.g. a 3G 4G LTE connection . A site of type B may itself be of different types 

2a. Site Type B1 a site connected to the network using two MPLS VPN links e.g. from different Service Providers with potentially a backup link e.g. a 3G 4G LTE connection .

2b. Site Type B2 a site connected to the network using one MPLS VPN link and one link connected to the public Internet with potentially a backup link e.g. a 3G 4G LTE connection . For example a particular customer site may be connected to network via PE and via a separate Internet connection potentially also with a wireless backup link.

2c. Site Type B3 a site connected to the network using two links connected to the public Internet with potential a backup link e.g. a 3G 4G LTE connection .

Notably MPLS VPN links are usually tied to a committed SLA whereas Internet links may either have no SLA at all or a loose SLA e.g. a Gold Package Internet service connection that guarantees a certain level of performance to a customer site .

4. Site Type C a site of type B e.g. types B1 B2 or B3 but with more than one CE router e.g. a first CE router connected to one link while a second CE router is connected to the other link and potentially a backup link e.g. a wireless 3G 4G LTE backup link . For example a particular customer site may include a first CE router connected to PE and a second CE router connected to PE .

As will be appreciated the above topologies are illustrative only and the techniques herein may be used in any other form of computer network. For example the techniques herein may be adapted for use in a mesh network such as an Internet of Things network. Loosely the term Internet of Things or IoT refers to uniquely identifiable objects things and their virtual representations in a network based architecture. In particular the next frontier in the evolution of the Internet is the ability to connect more than just computers and communications devices but rather the ability to connect objects in general such as lights appliances vehicles HVAC heating ventilating and air conditioning windows and window shades and blinds doors locks etc. The Internet of Things thus generally refers to the interconnection of objects e.g. smart objects such as sensors and actuators over a computer network e.g. IP which may be the public Internet or a private network.

The memory comprises a plurality of storage locations that are addressable by the processor s and the network interfaces for storing software programs and data structures associated with the embodiments described herein. The processor may comprise necessary elements or logic adapted to execute the software programs and manipulate the data structures . An operating system e.g. the Internetworking Operating System or IOS of Cisco Systems Inc. another operating system etc. portions of which are typically resident in memory and executed by the processor s functionally organizes the node by inter alia invoking network operations in support of software processors and or services executing on the device. These software processors and or services may comprise routing process e.g. routing services and illustratively a network analyzer module NAM a path characteristics analyzer PCAN and or a traffic shaping module as described herein any of which may alternatively be located within individual network interfaces.

It will be apparent to those skilled in the art that other processor and memory types including various computer readable media may be used to store and execute program instructions pertaining to the techniques described herein. Also while the description illustrates various processors it is expressly contemplated that various processors may be embodied as modules configured to operate in accordance with the techniques herein e.g. according to the functionality of a similar process . Further while processors may be shown and or described separately those skilled in the art will appreciate that processors may be routines or modules within other processors.

Routing process services include computer executable instructions executed by processor to perform functions provided by one or more routing protocols such as the Interior Gateway Protocol IGP e.g. Open Shortest Path First OSPF and Intermediate System to Intermediate System IS IS the Border Gateway Protocol BGP etc. as will be understood by those skilled in the art. These functions may be configured to manage a forwarding information database including e.g. data used to make forwarding decisions. In particular changes in the network topology may be communicated among routers using routing protocols such as the conventional OSPF and IS IS link state protocols e.g. to converge to an identical view of the network topology .

Notably routing process may also perform functions related to virtual routing protocols such as maintaining VRF instance or tunneling protocols such as for MPLS generalized MPLS GMPLS etc. each as will be understood by those skilled in the art. Also EVPN e.g. as described in the IETF Internet Draft entitled BGP MPLS Based Ethernet VPN introduce a solution for multipoint L2VPN services with advanced multi homing capabilities using BGP for distributing customer client media access control MAC address reach ability information over the core MPLS IP network.

In some implementations routing services may include a distributed application policy infrastructure controller dAPIC that operates to enforce application specific policies on the local device. For example the dAPIC may receive application specific SLAs from a network controller via application programming interface API calls. Such information may be used in some cases to make routing decisions based on the type and priority of an application as well as the performance of the various network links available to the device. In other words the dAPIC in routing services may be part of an application centric infrastructure ACI that operates to centralize network automation and facilitate the use of policy driven application profiles throughout the network.

NAM includes computer executable instructions executed by processor to predict future network conditions based on a history of network conditions. According to various embodiments NAM may employ machine learning to predict the future network conditions. In general machine learning is concerned with the design and the development of techniques that take as input empirical data such as network statistics and performance indicators and recognize complex patterns in these data. One very common pattern among machine learning techniques is the use of an underlying model M whose parameters are optimized for minimizing the cost function associated to M given the input data. For instance in the context of classification the model M may be a straight line that separates the data into two classes e.g. labels such that M a x b y c and the cost function would be the number of misclassified points. The learning process then operates by adjusting the parameters a b c such that the number of misclassified points is minimal. After this optimization phase or learning phase the model M can be used very easily to classify new data points. Often M is a statistical model and the cost function is inversely proportional to the likelihood of M given the input data.

In general learning machines such as those that may be used by NAM are computational entities that rely on one or more machine learning processes for performing a task for which they have not been explicitly programmed to perform. In particular learning machines are capable of adjusting their behavior to their environment. For example a learning machine may dynamically make future predictions based on current or prior network measurements may make control decisions based on the effects of prior control commands etc.

The learning machine s of NAM may employ any number of different machine learning techniques. For example artificial neural networks ANNs are a type of machine learning technique whose underlying mathematical models were developed inspired by the hypothesis that mental activity consists primarily of electrochemical activity between interconnected neurons. ANNs are sets of computational units neurons connected by directed weighted links. By combining the operations performed by neurons and the weights applied by the links ANNs are able to perform highly non linear operations to input data. The interesting aspect of ANNs though is not that they can produce highly non linear outputs of the input but that they can learn to reproduce a predefined behavior through a training process. Other forms of machine learning techniques that may be employed by NAM may include but are not limited to support vector machines SVMs Bayesian networks regression techniques e.g. logistic regression linear regression non linear regression etc. combinations thereof or any other form of machine learning.

Traffic shaping module includes computer executable instructions executed by processor to manage how flows of traffic are conveyed within a network. In general traffic shaping attempts to shape the data rate at which traffic is sent from a network device to another network device. For example traffic shaping module may make use of any number of queues e.g. data structures to shape a traffic rate by delaying when the device sends certain packets. In some embodiments traffic shaping module may apply different shaping rates to different classes of traffic e.g. video traffic web traffic etc. . Such classes may be distinguished for example by colors e.g. data bits set in the headers of packets thereby allowing a device to identify the traffic class and apply a traffic policing policy to the packet accordingly.

PCAN includes computer executable instructions executed by processor to analyze the one or more characteristics of a network path e.g. delay jitter etc. . According to various embodiments and described further below PCAN may operate in conjunction with traffic shaping module and or NMS to trigger the dynamic adjustment of a traffic shaping data rate by traffic shaping module based on the path characteristics. In some cases PCAN may analyze the path characteristics using a clustering technique. In general clustering refers to a family of techniques whose objective is to group objects according to some usually predefined notion of similarity. Example clustering techniques that may be employed by PCAN include but are not limited to k means density based spatial clustering of applications with noise DBSCAN or Mean Shift approaches.

As noted above traffic and network characteristics may be highly dynamic making WAN optimization challenging. In addition the variety of access links that may be involved e.g. cable A V DSL links over private or public networks etc. potentially with guaranteed SLAs or semi guaranteed SLAs further complicates the task of network optimization. In some cases customer sites may also be connected to backup links e.g. 3G 4G LTE wireless links that provide highly varying performance in terms of connectivity and bandwidth.

One technique that may be used to achieve a desired quality of service QoS is traffic shaping. In general traffic shaping involves regulating the data rate s at which traffic is sent. For example certain traffic e.g. video traffic may be sent at a higher data rate than other types of less critical traffic and in accordance with the overall data rate guaranteed by the service provider. Thus far traffic shaping has been used mostly as part of a virtual circuit paradigm such as frame relay with an associated bandwidth guarantee e.g. a committed information rate CIR other parameters etc. or asynchronous transfer mode ATM switching with permanent virtual circuits PVCs or switched virtual circuits SVCs where certain performance guarantees e.g. bandwidth delay etc. are provided along a given path.

The techniques herein provide mechanisms whereby traffic shaping may be adjusted dynamically and automatically on a per destination and per class of service basis. In some aspects the set of destinations classes of service of interest and or a set of rules used by a remote device to determine the set of destinations may be provided to a network device. In another aspect a path characteristic analyzer e.g. PCAN may determine the variability of a path to one or more destinations of interest based on a set of monitored variables that can be either predicted or observed. Using these variables the path characteristic analyzer may determine when traffic shaping rate adjustments are required. In a further aspect dynamic traffic shaping may be activated or deactivated according to the characteristics of the destination the path variability used by the destination and also the local states tracked by the analyzer that reflects the effect of shaping as part of a control loop mechanism.

Specifically according to one or more embodiments of the disclosure as described in detail below a device in a network identifies a set of one or more destination addresses for which traffic shaping is to be performed by controlling the data rate at which traffic is sent to the one or more destination addresses. The device sends the traffic to one of the destination addresses along a communication path in the network and at a particular data rate. The device identifies a change in a performance characteristic for the communication path. The device adjusts the data rate at which the traffic is sent along the communication path in response to identifying the change in the performance characteristic for the communication path.

Illustratively the techniques described herein may be performed by hardware software and or firmware such as in accordance with processes and which may contain computer executable instructions executed by the processor or independent processor of interfaces to perform functions relating to the techniques described herein. For example the techniques herein may be treated as extensions to conventional protocols such as the various networking protocols or wireless communication protocols and as such may be processed by similar components understood in the art that execute those protocols accordingly.

Operationally a network may have radically different sets of path characteristics due to any number of factors. For example the characteristics of a path may depend on the type of access links along the path e.g. DSL cable fiber optic etc. the path size e.g. the size of the network backbone the number of traversed autonomous systems etc. and or the set of QoS policies used along these paths e.g. input shaping rate limiters policy of traffic in excess use of random early discard mechanisms link traffic engineering etc. . Accordingly path characteristics may be highly heterogeneous in a network according to the destination.

Referring now to an example view is shown of a network device performing dynamic traffic shaping on a per destination basis according to various embodiments. As shown in assume that a particular CE router CE sends traffic to a plurality of destinations e.g. CE CE etc. along a number of different network paths e.g. P P etc. in computer system . Overseeing operation of system may also be a centralized networking device such as an NMS network controller or the like.

In some embodiments a custom message referred to as crit dest may be sent by an NMS network controller or other centralized network device to an end node e.g. a CE router such as in a branch office a field area router in the IoT etc. . The crit dest message may indicate a white list of destinations for which per destination traffic shaping is required. For example as shown in NMS may send a destination list as part of a crit dest message to CE that indicates the addresses or other identifiers for the corresponding destinations. Destination list may be specified in the form of IP addresses blocks of IP addresses prefix mask combinations hostnames e.g. to be resolved via DNS or any other way to indicate the destinations for which traffic shaping is to be performed by CE. Notably destination list may indicate a single network destination by CE a subset of the total number of network destinations used by CE or may even include entries for each destination used by CE.

In some cases a crit dest message may be extended to further associate a particular destination with a traffic class traffic coloring e.g. values of the IPv4 Type of Service TOS field the IPv6 DSCP or Flow Label Field etc. or a period of time during which traffic shaping to the destination is to be performed. For example destination list may indicate that CE is to perform dynamic traffic shaping only on a certain traffic class destined for CE and at a certain time of day. In response to receiving such a message the receiving device may then automatically configure a traffic shaping mechanism for the identified combinations of destinations traffic classes traffic colorings and or shaping time periods. In other words the crit dest may indicate a rule set of parameters that control when and how CE is to perform traffic shaping. In further embodiments the rule may indicate that traffic shaping is to be performed for the top n number of destinations in terms of traffic volume and optionally for a particular traffic class or time period.

In further implementations the rule specified by the crit dest message may be conditioned on local network state tracking. For example NMS may specify to CE that CE is to activate a traffic shaper for each destination in destination list having a specific traffic profile e.g. volume of traffic traffic class etc. only if specific conditions take place in the network. Such conditions may include for example an increase in the number of observed packet drops e.g. which may be indicative of a potential network bottleneck requiring activation of traffic shaping at CE to discriminate which QoS parameters should be provided to which traffic. Observed network conditions that may trigger dynamic traffic shaping may be received via an application and visibility control AVC mechanism via an explicit network notification such as an explicit congestion notification ECN an RSVP path error notification etc.

In various embodiments traffic shaping may be performed by a network device e.g. by traffic shaping module according to the observed and or predicted characteristic s of a communication path to a particular destination e.g. by PCAN . In general traffic shaping is typically only one component of a QoS toolbox but is still an important tool to adapt the sending rate to the available network resource. Notably traffic shaping is also typically performed as a static process whereby a user manually sets a shaping rate and that rate is used in all cases going forward e.g. path characteristics and other factors are not used to condition the triggering of dynamic traffic shaping . According to various embodiments such dynamic shaping may be triggered by PCAN that monitors the path characteristics for a set of destinations. Such a set may be specified in a crit dest message or in some cases the device itself may employ its own rules to determine the destination list. For example as shown in CE may assess the characteristics of a path to a destination in destination list e.g. path P identify a change in the characteristics of the path and in response adjust the traffic shaping rate used to reach destination CE via path P.

As shown in a closed loop control mechanism may be used by a device to continually adjust a traffic shaping rate to a destination based on monitored effects of the shaping. In some cases once the path characteristics become favorable again and fall below one or more thresholds dynamic traffic shaping may be stopped again until a triggering condition is again present. In one embodiment the times at which dynamic traffic shaping is employed may be recorded for future time series prediction purposes. In another embodiment the traffic shaping configuration may be recorded to be quickly applied proactively when the thresholds are approached again in the future.

As shown in a report may be sent by CE a field area router etc. to report on its traffic shaping decisions. For example report may include the list of the top n number of destinations of the device e.g. on a per traffic class basis the rate adjustments according to the predicted and or observed path characteristics the local state tracking results from the dynamic shaping rate adjustment strategy or the like.

1. Delay Information In some cases path data includes delay measurements along a given network path and or link.

2. Bandwidth Information Path data may also include bandwidth information associated with a given network path and or link. For example bandwidth information may include data regarding the total bandwidth usage of the path or link the per application bandwidth usage of the path or link available bandwidth along the path or link etc.

3. Jitter Information Path data may further include jitter information associated with a given path and or link. For example the total amount or application specific jitter measurements along a path or link may be included in path data .

4. Packet Loss Information In some cases path data may include packet loss information such as a measured packet loss rate along a given path and or link.

5. Routing Information Associated with any of data may be information regarding a given network path e.g. the link or set of links for which the measurements of data were determined .

In some cases PCAN may measure the degree of variability along a path P denoted DV P herein that has a destination in destination list . Notably destination list may be received as part of a crit dest message or may be determined dynamically by PCAN in various cases. For example PCAN may determine destination list based on the top n number of destinations of the device. In some cases the characteristic of the path may be represented as a vector v where each coordinate specifies a different path metric e.g. delay bandwidth jitter packet loss etc. . PCAN may then compute DV P using any number of different techniques. For example if the corresponding vector space has a dimension of size n then PCAN may use clustering to determine the distance of DV P to the clusters of values of v over time to tell whether the path characteristics from path data have changed significantly e.g. exceed a deviation threshold which itself may be dynamic or static for a path to a given destination. In another example PCAN may detect a change in the probability distribution function PDF of the characteristic. If PCAN detects a characteristic deviation it may notify traffic shaping module thereby triggering a data rate adjustment by traffic shaping module for the corresponding destination.

In some embodiments PCAN may also identify a predicted path characteristic change thereby triggering traffic shaping by traffic shaping module . For example as shown NAM may provide path predictions to path characteristic analyzer to determine whether a path characteristic is predicted to deviate from the expected characteristic at some point in the future e.g. by calculating DV P using predictions . Notably NAM may use path data as inputs to a learning machine that continually tracks path data e.g. as a time series model to characterize these attributes. In other words NAM may use a predictive model to predict future performance metrics based on path data thereby generating characteristic predictions .

NAM may use the principle of data fusion to model the path characteristics. This principle generally functions by integrating multiple data sources and knowledge about a real world process in this case the underlying network into an accurate representation of the functioning of the network. For example bandwidth data along a given path may be available from any of the following source 1 SLA processors may yield data about the delay jitter and packet loss along a path which can in some circumstance be used to estimate the available bandwidth via a regression model such as variational Bayesian least squares VBLS regression model 2 actual bandwidth measurements can be taken occasionally but with care as they affect the network performance or 3 time series models such as autoregressive moving average ARMA models Hidden Markov Models Gaussian Processors can be used to predict the performance evolution.

Path data available from various sources of information can be fused by NAM in real time in a mathematically principled way by using a Kalman filter or graphical models whereby the intrinsic uncertainty of each source of information is accounted for in the estimation of the data e.g. available bandwidth etc. . For example if one makes a direct measurement of the actual bandwidth at time t the uncertainty on this measure is very small and it should therefore have a very strong impact on the estimation process at time t. However as t increases the uncertainty also increases as the actual bandwidth may drift away from the initial measurement. This drift may then be captured via a time series model and complemented by indirect measurements e.g. based on delay jitter etc. measurements . As long as both sources agree there is no reason to perform any further direct measurement which may be very expensive but if the prediction of the time series model and the regression diverges this may trigger another direct measurement. In some embodiments NAM may determine whether a direct measurement of any of path data is needed based on a measure of confidence associated with a model used by its learning machine.

In some embodiments PCAN may couple the variation of DV P with the observed local state. In some cases it may be necessary to adapt the shaping for a given destination D along a path P according to the predicted and or observed path characteristics but also the local state observations. For example PCAN may decide to slow down the rate of shaping for a top N destination following a path P with a high value of DV p if PCAN observes that the effect of such a shaping rate change is very high e.g. if the rate of packet drops varies very significantly .

Also as shown architecture may form a control loop whereby path data is monitored after traffic shaping module adjusts a data rate for a particular destination. In such a case further adjustments may even be made until PCAN determines that DV P no longer exceeds a threshold amount based on the observed path characteristic e.g. one or more of the metrics and or on a predicted path characteristic in predictions . PCAN may also record and report on an initiated traffic shaping to another device e.g. NMS etc. .

At step the device sends traffic to the destination along a communication path and at a first data rate as detailed above. In some embodiments the data rate may be determined by a static traffic shaping mechanism e.g. the rate is capped or fixed until dynamic shaping for the traffic is enabled . In other embodiments the data rate may be determined by a dynamic traffic shaping mechanism according to the destination traffic type time of day etc.

At step the device identifies a path characteristic change for the communication path used in step . The path characteristic may be or may be based on the amount of delay jitter congestion packet loss combinations thereof or the like for the path. For example in some cases the characteristic may be an n dimensional vector that any or all of these metrics. In one embodiment the path characteristic change may be an actual change observed along the path. For example the path characteristic may be monitored to detect a change. In another embodiment the path characteristic change may be a predicted change. For example a learning machine may be trained to predict when a path characteristic change may occur in the future. In various embodiments the path characteristic change may be identified by calculating a degree of variability for the path characteristic. For example a degree of variability may be calculated by clustering a history of the path characteristics and determining the difference between the predicted or observed characteristic from the clusters. In another example the degree of variability may be calculated by analyzing changes in the PDF of the delay experienced along the path the statistical moment of the jitter PDF the degree of elasticity of the traffic sent to the destination or using any other form of statistical analysis.

At step as detailed above the device adjusts the data rate at which the traffic is sent in response to identifying the path characteristic change. In various embodiments the data rate may be adjusted based on the changed path characteristic. For example the device may decrease the data rate for the traffic if the amount of packet loss along the path increases or is predicted to increase. Notably the data rate adjustment may only be performed on a per destination basis and may be specific to certain traffic flows and or performed only at certain times. In one embodiment steps may also be repeated any number of times as part of a control loop thereby adjusting the data rate until a desired path characteristic is satisfied e.g. the amount of dropped packets may decrease with the data rate etc. . Procedure then ends at step .

At step the device receives a new path characteristic as detailed above. In one embodiment the new path characteristic may be a newly observed characteristic of the path e.g. as part of a reactive traffic shaping mechanism . In another embodiment the new path characteristic may be a predicted path characteristic e.g. as part of a predictive traffic shaping mechanism . For example a machine learning process may model a history of characteristics for the path to predict a future characteristic of the path.

At step the device determines a degree of variability between the new path characteristic and the history of path characteristics as described in greater detail above. For example if the new path characteristic is a vector v having a dimensionality of n e.g. a vector of n number of path metrics the degree of variability in the characteristic may be computed as the distance between the vector v and the clusters from step e.g. the distance to the nearest cluster the distance to the nearest cluster centroid etc. . Notably the degree of variability may be compared to a threshold value to determine whether dynamic traffic shaping should be used for traffic along the path. Procedure then ends at step .

It should be noted that while certain steps within procedures may be optional as described above the steps shown in are merely examples for illustration and certain other steps may be included or excluded as desired. Further while a particular order of the steps is shown this ordering is merely illustrative and any suitable arrangement of the steps may be utilized without departing from the scope of the embodiments herein. Moreover while procedures are described separately certain steps from each procedure may be incorporated into each other procedure and the procedures are not meant to be mutually exclusive.

The techniques described herein therefore provide for dynamic traffic shaping that may be performed on a per destination basis and may be based in some cases on a predicted path characteristic change to one of the destinations. Such techniques may be fully automated thereby allowing the traffic shaping to be applied on a large scale within a network.

While there have been shown and described illustrative embodiments that provide for dynamic traffic shaping it is to be understood that various other adaptations and modifications may be made within the spirit and scope of the embodiments herein. For example the embodiments have been shown and described herein with relation to certain network configurations. However the embodiments in their broader sense are not as limited and may in fact be used with other types of networks and or protocols e.g. wireless . In addition while certain protocols are shown other suitable protocols may be used accordingly.

The foregoing description has been directed to specific embodiments. It will be apparent however that other variations and modifications may be made to the described embodiments with the attainment of some or all of their advantages. For instance it is expressly contemplated that the components and or elements described herein can be implemented as software being stored on a tangible non transitory computer readable medium e.g. disks CDs RAM EEPROM etc. having program instructions executing on a computer hardware firmware or a combination thereof. Accordingly this description is to be taken only by way of example and not to otherwise limit the scope of the embodiments herein. Therefore it is the object of the appended claims to cover all such variations and modifications as come within the true spirit and scope of the embodiments herein.

