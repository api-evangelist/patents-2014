---

title: IGMP/MLD leave upon client disassociation or user idle timer expiry
abstract: According to one embodiment, a non-transitory computer readable medium comprising instructions which, when executed by one or more hardware processors, causes performance of operation comprising: determining that a client device, in a first Internet Protocol (IP) subnet, is subscribed to a multicast group; determining that the client device is no longer in the first IP subnet; responsive to determining that the client device is no longer in the first IP subnet, transmitting a message on behalf of the client device to unsubscribe the client device from the multicast group is shown.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09455902&OS=09455902&RS=09455902
owner: Aruba Networks, Inc.
number: 09455902
owner_city: Sunnyvale
owner_country: US
publication_date: 20141031
---
Embodiments of the disclosure relate to improving the handling of multicast stream subscriptions of client devices within a communication network.

In recent years Wireless Local Area Network WLAN technologies have emerged as a fast growing market. Among the various WLAN technologies Institute of Electrical and Electronics Engineers IEEE 802.11 standard is the dominating technology and is frequently used for WLANs.

Client devices within WLANs communicate with access points in order to obtain access to one or more network resources. An access point referred to as an AP is a digital device that operates as a gateway for a client device to establish a connection e.g. a communicative coupling with one or more networks e.g. the Internet an intranet etc. . For example an AP may be implemented as a wireless AP which is configured to communicate wirelessly with one or more client devices as well as communicate with a networked device associated with the one or more networks such as a controller for example through a wired connection.

With respect to enterprise networks and other types of expansive multiple controller based networks conventional WLAN architectures do not manage the multicast stream subscriptions of client devices connected to the WLAN efficiently. For instance a client device may communicatively couple to a first AP that is associated with a first controller located in a first Internet Protocol IP subnet and or a first Virtual Local Area Network VLAN . The client device may then subscribe to a multicast stream. Subsequently the client device may roam to a second AP associated with a second controller due to a change in location of the client device failure of the first AP greater signal strength for the second AP or for a number of other reasons.

The second controller may be located in the first IP subnet or located in a second IP subnet. When the client device fails to unsubscribe to the multicast stream prior to roaming to the second AP and associating with the second controller the multicast rooter may send unnecessary multicast transmissions. When the client device roams to a second controller that is located within a second IP subnet the multicast router will continue to send the multicast stream to which the client device subscribed to the first IP subnet. When no other client devices are associated to a controller in the first IP subnet the transmission of the multicast stream to the first IP subnet is unnecessary. The unnecessary transmission wastes network bandwidth between the multicast router and the one or more controllers located in the first IP subnet.

Currently a multicast router will prune list of recipients of a multicast stream after the expiry of a particular amount of time. However this amount of time may be in the order of minutes. Therefore when a client device subscribing to a multicast stream roams without unsubscribing from the multicast stream and associates with a controller located in a second IP subnet network bandwidth will be wasted until the multicast router prunes the list of recipients.

Various embodiments of the disclosure relate to the configuration of controllers in first IP subnet and or a first VLAN within a WLAN to unsubscribe from a multicast stream on behalf of a client device when the client device leaves the first IP subnet VLAN. As the WLAN may be configured such that one or more controllers may be located within different IP subnets wherein the IP subnets may be implemented using VLANs the term IP subnet as used herein should be interpreted as meaning either an IP subnet or a VLAN. Although multiple controllers may be located within the same IP subnet within a WLAN a first controller does not necessarily share information regarding the multicast subscriptions of client devices with a second controller in the same IP subnet.

Each controller may snoop the data transmitted by the one or more client devices associated with the controller. For example a controller may snoop Internet Group Management Protocol IGMP packets transmitted by client devices associated with the controller. Each controller can maintain a multicast stream subscription table that stores the multicast subscriptions of each client device associated with the controller.

When a controller determines that a client device has roamed e.g. disassociated from the controller the controller will remove the client device multicast subscription pairings stored in the controllers multicast stream subscription table. In addition when the controller determines that the client device has roamed out of the IP subnet within which the controller is located the controller may unsubscribe from the multicast subscriptions of the client device on behalf of the client device.

Although the controller typically acts in a passive manner by merely forwarding packets to the multicast router after snooping the packets the controller may act on behalf of the client device when the client device leaves the IP subnet of the controller. By unsubscribing to the multicast subscriptions of the client device the controller can prompt the multicast router to prune its list of recipients prior to the expiration of the amount of time the multicast router would typically wait prior to pruning its list of recipients. When no other client devices in the IP subnet of the controller are subscribed to a multicast stream the multicast router may remove the IP subnet of the controller from its list of recipients for that multicast stream thereby improving the efficiency of the network bandwidth usage.

Herein certain terminology is used to describe features within embodiments of the invention. For example the term network device generally refers to electronic equipment that may be configured with an antenna system that enables transmission and or receipt of wireless messages over a wireless network. Hence the network device is further adapted with circuitry to support wireless connectivity with other network devices being part of the wireless network. Different types of network devices may include but are not limited or restricted to 1 a client device and 2 an edge device.

Herein the term client device may refer to a stationary network device e.g. desktop computer television set top box video gaming console etc. or a mobile network device capable of connecting to one or more wireless networks. Illustrative examples of mobile network devices may include among others a tablet laptop netbook barcode scanner a digital camera and or a mobile handset such as a smartphone or a personal digital assistant PDA. Likewise the term access point of AP is a network device a type of edge device in particular that controls access to a network where the AP may be deployed as a wired access point that features wired connectivity with one or more client devices or as a wireless access point that features wireless connectivity with one or more client devices. Of course the AP also may represent other types of edge devices such as a wireless base station a cellular base station or any device figured as a hot spot or gateway for network connectivity.

It is contemplated that a network device includes hardware logic such as one or more of the following i processing circuitry ii one or more communication interfaces such as a radio e.g. component that handles the wireless data transmission and or reception and or a physical connector to support wired connectivity and or iii memory in the form of a non transitory computer readable storage medium e.g. a programmable circuit a semiconductor memory such as a volatile memory such as random access memory RAM or non volatile memory such as read only memory power backed RAM flash memory phase change memory or the like a hard disk drive an optical disc drive etc. or any connector for receiving a portable memory device such as a Universal Serial Bus USB flash drive portable hard disk drive or the like.

Herein the term logic is generally defined as hardware and or software. For example as hardware logic may include processing circuitry e.g. a microcontroller any type of processor a programmable gate array an application specific integrated circuit etc. semiconductor memory combinatorial logic or the like. As software logic may be one or more software modules such as executable code in the form of an executable application an application programming interface API a subroutine a function a procedure an object method implementation an applet a servlet a routine a source code an object code a shared library dynamic load library or one or more instructions. These software modules may be stored in any type of a suitable non transitory storage medium described above or transitory computer readable transmission media e.g. electrical optical acoustical or other form of propagated signals such as carrier waves infrared signals digital signals .

The term link is a physical or logical communication path between two or more network devices. Examples of a link may include a wireless link that supports the transfer of wireless messages over certain radio frequency RF channels and or bands or cellular frequency channels and or bands as well as the logic associated therewith.

The term message generally refers to information transmitted as information in a prescribed format where each message may be in the form of a packet a frame an IEEE 802.11 frame or any other series of bits having the prescribed format.

The term control scope refers to the network serviced by a cluster of controllers. For instance the control scope of a cluster of controllers may comprise all access points APs and client devices serviced by the cluster of controllers.

The term table refers to an arrangement of data according to a selected organization. Examples of a table may include but are not limited or restricted to a collection of one or more rows and columns a bucket map a linked list a hash table or any other data structure that maintains correspondence of data. A table may store a plurality of data.

Lastly the terms or and and or as used herein are to be interpreted as an inclusive or meaning any one or any combination. Therefore A B or C or A B and or C mean any of the following A B C A and B A and C B and C A B and C. An exception to this definition will occur only when a combination of elements functions steps or acts are in some way inherently mutually exclusive.

As this invention is susceptible to embodiments of many different forms it is intended that the present disclosure is to be considered as an example of the principles of the invention and not intended to limit the invention to the specific embodiments shown and described.

Referring to a diagram of an exemplary network system including a multicast router is shown. The communication network includes a multicast router the controllers and the APs and and the client devices and . Each of the controllers and are communicatively coupled to the multicast rooter .

The client devices are associated with the AP which is associated with the controller . The client device is associated with the AP which is associated with the controller . The client device is associated with the AP which is associated with the controller .

The communication network also includes an Internet Protocol IP subnet and an IP subnet . The controllers and are located within the IP subnet while the controllers and are located within the IP subnet .

In the embodiment illustrated in one or more of the client devices and or may desire to subscribe to a multicast stream from the multicast router e.g. join a multicast group . One or more of the client devices and or may send a transmission to the multicast router subscribing to one or more multicast streams. For example the client device may send a transmission to the multicast router via the AP and the controller subscribing to one or more multicast streams the client device serving as the source of the subscription e.g. providing the multicast router with its media access control MAC address . When the client device sends a transmission to the multicast router subscribing to one or more multicast streams the controller may snoop the transmission prior to forwarding the transmission to the multicast router .

The transmission sent by the client device requesting to join one or more multicast groups may be in the form of any protocol or component therein used for communicating using the internet layer of the Open System Interconnection OSI model. Examples of Internet layer protocols include but are not limited or restricted to the Internet Group Message Protocol IGMP and or the Internet Control Message Protocol ICMP . For example the client device may transmit a request to join a multicast group via an IGMP Report message to the multicast router subscribing to one or more multicast streams when the Internet Protocol version 4 IPv4 is used. Alternatively when the Internet Protocol version 6 IPv6 is used a Multicast Listener Discovery MLD Report may be transmitted in order to join a multicast group. The term IGMP join message will be used herein to represent a request to join a multicast group but should not be limited to only the IGMP format.

In the above example the controller snoops the transmission subscribing to one or more multicast streams but does not intervene or act as the source of the subscription. However the controller adds an entry to a multicast stream subscription table storing i the client device and ii the multicast stream to which the client device subscribed. The multicast stream subscription table allows the controller to maintain a recording of each multicast subscription of each client device associated with the controller e.g. via the AP .

Each controller maintains its own multicast stream subscription table and is therefore able to limit the flooding of multicast streams to the controller. For example when only the client device has subscribed to a first multicast stream MC stream A the controller will obtain knowledge of this subscription by snooping the transmissions sent to the multicast router from the client devices . In order to prevent unnecessary transmissions of MC stream A to the controller upon the disassociation of the client device the controller may use its knowledge of the multicast stream subscriptions and send an IGMP Leave for MC stream A to the multicast router on behalf of the client device . In turn the multicast router will cease the transmission of MC stream A to the controller . Therefore the efficiency of the communication network may be improved due to reduced network bandwidth usage.

Similarly to the discussion above regarding an IGMP join message a transmission to leave a multicast group may be in the form of any protocol or component therein used for communicating using the Internet layer of the OSI model. The term IGMP Leave message will be used herein to represent a request to leave a multicast group but should not be limited to the IGMP format.

The multicast stream subscription table of the controller may allow the controller to improve the efficiency of the network bandwidth usage between the controller and the one or more APs associated with the controller . In one embodiment in which a plurality of APs are associated with the controller the controller may use the multicast stream subscription table to transmit one or more multicast streams to only the APs with which a subscribing client device is associated. Therefore the controller does not have to flood each AP with all multicast streams but may selectively forward only the multicast streams to which client devices associated with the AP are subscribed.

Referring to a diagram of the exemplary network system of illustrating a roaming client device is shown. illustrates the communication network where the client device has roamed from the AP to the AP . In this example while still associated with the controller the client device subscribed to a multicast stream MC stream A . Subsequently the client device disassociated with the controller and associated via the AP with the controller .

The client device may provide the controller with an explicit disassociation via the AP or simply roam out of the range of the AP and into the range of a second AP e.g. the AP that is associated with a second controller e.g. the controller . Both scenarios will be discussed below.

In one instance the client device explicitly disassociates from the controller . For example the client device may transmit a disassociation message to the AP . Upon disassociation from the controller by the client device notifying the multicast router of the disassociation may be advantageous to the controller and the communication network .

In the embodiment in which the client device sends an IGMP Leave message to the multicast router for MC stream A the controller observes the IGMP Leave message while snooping the IGMP packets transmitted by the client device . As discussed above the controller maintains a multicast stream subscription table to keep track of each subscription of each client device associated with the controller . Therefore upon observing the IGMP Leave message transmitted by the client device the controller cleans up its multicast stream subscription table by removing the client device MC stream A entry. The controller does not have to take any further action as it is not acting as the source of the multicast subscription and the multicast router knows to remove the client device MC stream A entry from its own multicast stream subscription table e.g. prune the list of recipients of MC stream A .

In the embodiment in which the client device explicitly disassociates with the controller but does not send an IGMP Leave message to the multicast router for MC stream A the controller may in some embodiments send an IGMP Leave message to the multicast router on behalf of the client device .

In the embodiment illustrated in the client device has associated with the controller after disassociating with the controller . When the client device disassociates without sending an explicit disassociation the controller may learn of the association between the client device and the controller through an Address Resolution Protocol ARP message transmitted by the controller or through snooping an IGMP Query transmitted by the multicast router . The controller may obtain knowledge of the association between the client and the controller through an ARP message because the controllers and are located in the same IP subnet. In other words ARP messages are transmitted among network devices operating on the same Layer 2 data link layer of the OSI model. Being located within the same IP subnet the controllers and are within the same Layer 2 e.g. are Layer 2 connected and therefore can communicate via ARP messages.

Upon receiving an explicit disassociation from the client device the controller will wait for a predetermined amount of time to determine whether the client device associates with another controller within the IP subnet e.g. the controller . When the controller learns of an association between the client device and the controller prior to the expiration of the predetermined amount of time the controller will clean up Its multicast stream subscription table by removing the Client device MC stream A entry. The controller does not send an IGMP Leave message to the multicast router because the client device has not left the IP subnet in which the controller is located. The multicast router transmits the multicast stream MC stream A to the controllers within the IP subnet to be forwarded to the client device by one of the controllers within the IP subnet . The controller does not send an IGMP Leave message to the multicast router because the multicast router would then no longer transmit MC stream A to the IP subnet assuming no other client devices within the IP subnet were subscribed to MC stream A .

In a second instance the client device may roam out of the range of the AP and disassociate from the controller as no other APs are associated with the controller . In addition the roaming by client device may occur without the client device explicitly disassociating from the AP . As mentioned above notifying the multicast router that the client device has disassociated from the controller may be advantageous for the controller and the multicast router in assisting in keeping multicast stream subscription tables up to date and using network bandwidth efficiently. In particular the multicast router should be notified when the client device leaves the IP subnet .

The embodiment in which the client device sends an IGMP Leave message to the multicast router for MC stream A is the same regardless of whether the client device explicitly disassociates from the controller . When an IGMP Leave message is transmitted by the client device the controller observes the IGMP Leave message while snooping the IGMP packets. As discussed above the controller maintains a multicast stream subscription table to keep track of each subscription of each client device associated with the controller . Therefore upon observing the IGMP Leave message transmitted by the client device the controller cleans up its multicast stream subscription table by removing the client device MC stream A entry. The controller does not have to take any further action as it is not acting as the source of the multicast subscription and the multicast router knows to remove the client device MC stream A entry from its own multicast stream subscription table.

In the embodiment in which the client device does not send an IGMP Leave message to the multicast router for MC stream A prior and does not explicitly disassociate from the controller the controller may send an IGMP Leave message to the multicast router on behalf of the client device . When no explicit disassociation from the client device is received the controller may learn of the disassociation of the client device from the AP .

In one embodiment a predefined amount of time is allocated during which the AP should receive a transmission from the client device e.g. an idle timer is predefined during which the AP should receive a transmission . For example the AP may restart an idle timer after each received transmission from the client device . Examples of transmissions from the client device may include but are not limited or restricted to a heartbeat acknowledgement a data packet to be forwarded by the AP and or an IGMP transmission. When the idle timer expires without the AP receiving a transmission from the client device the AP determines that the client device has disassociated from the AP and alerts the controller . In one embodiment the length of time comprising the idle timer may be longer than the predetermined amount of time the controller may wait before sending an IGMP Leave message after receiving an explicit disassociation as discussed above.

In the embodiment illustrated in the client device has associated with the controller . As discussed above the controller is located within the same IP subnet as the controller . The controller learns of the association of the client device with the controller through for example an ARP message and or an IGMP Query and does not send an IGMP Leave message for MC stream A on behalf of the client device . Therefore the controller does not send an IGMP Leave message to the multicast router for MC stream A on behalf of the client device . The controller cleans up its multicast stream subscription table while the controller forwards MC stream A to the AP which to turn forwards the multicast stream to the client device .

Similarly to the discussion above the client device may provide the controller with an explicit disassociation via the AP or simply roam out of the range of the AP and into the range of a second AP e.g. the AP that is associated with a second controller e.g. the controller . Both scenarios will be discussed below.

In one instance the client device explicitly disassociates from the controller . For example the client device may transmit a disassociation message to the AP . Upon disassociation from the controller it may be desirable to notify the multicast router . In particular when the client device leaves the IP subnet it is desirable for an IGMP Leave message to be sent to the multicast router so that the multicast router may keep its subscription stream table up to date and avoid sending unnecessary multicast transmissions.

As discussed above a client device may transmit an IGMP Leave message to the multicast router. When the client device sends an IGMP Leave message to the multicast router for MC stream A the controller observes the IGMP Leave message while snooping the IGMP packets. Upon observing the IGMP Leave message transmitted by the client device the controller cleans up its multicast stream subscription table by removing the client device MC stream A entry. The controller does not have to take any further action as it is not acting as the source of the multicast subscription and the multicast router knows to remove the client device MC stream A entry from its own multicast stream subscription table.

In the embodiment in which the client device explicitly disassociates from the controller but does not send an IGMP Leave message to the multicast router for MC stream A prior to disassociating with the controller the controller may send an IGMP Leave message to the multicast router on behalf of the client device .

In the embodiment Illustrated in the client device has associated with the controller after disassociating with the controller . Unlike the embodiment illustrated in when the client device disassociates without sending an explicit disassociation the controller will not learn of the association between the client device and the controller through an ARP message transmitted by the controller e.g. a gratuitous ARP message or through snooping an IGMP Query transmitted by the multicast router . The controllers and cannot communicate through an ARP message because the controllers and are located on separate IP subnets. In other words because ARP messages are transmitted among network devices operating within the same IP subnet and the controllers and are located on separate IP subnets ARP messages are not transmitted between the two.

In the embodiment illustrated in the client device has not associated with a controller within the same IP subnet as the controller . Therefore upon receiving the explicit disassociation from the client device the controller will wait for a predetermined amount of time to ensure that the client device does not associate with another controller within the IP subnet e.g. the controller . When the predetermined amount of time expires and the client device has not yet associated with a controller in the IP subnet the controller will transmit an IGMP Leave message for MC stream A to the multicast router on behalf of the client device . The IGMP Leave message will notify the multicast router that the client device is no longer located within the IP subnet in addition the controller will clean up its multicast stream subscription table by removing the Client device MC stream A entry. By sending an IGMP Leave message on behalf of the client device the efficiency of the use of network bandwidth is improved.

In a second instance the client device may roam out of the range of the AP into the range of the AP and therefore disassociate from the controller . In addition the roaming by the client device may occur without the client device explicitly disassociating from the AP . As mentioned above it may be desirable for the multicast router to be notified that the client device has disassociated from the controller . In particular the multicast router should be notified when the client device leaves the IP subnet .

The embodiment in which the client device sends an IGMP Leave message to the multicast router for MC stream A is the same regardless of whether the client device explicitly disassociates. In addition the controller takes the same action when the client device transmits an IGMP Leave message to the multicast router and roams to a second IP subnet as when the roam log occurs within the same IP subnet.

As discussed above when an IGMP Leave message is transmitted by the client device the controller observes the IGMP Leave message while snooping the IGMP packets. Subsequently the controller cleans up its multicast stream subscription table by removing the client device MC stream A entry. Regardless of the fact that the client device roamed from the IP subnet to the IP subnet the controller does not have to take any further action as it is not acting as the source of the multicast subscription and the multicast router knows to remove the client device MC stream A entry from its own multicast stream subscription table.

In the embodiment in which the client device does not send an IGMP Leave message to the multicast router for MC stream A prior and does not explicitly disassociate from the controller the controller may send an IGMP Leave message to the multicast router on behalf of the client device . As discussed above an idle timer may be predefined during which the AP should receive a transmission from each of the associated client devices. When the idle timer expires without the AP receiving a transmission from the client device the AP determines that the client device has disassociated from the AP and alerts the controller .

In the embodiment illustrated in the client device has associated with the controller which is located in a separate IP subnet as the controller . Therefore the controller will not learn of the association of the client device with the controller through either an ARP message and or an IGMP Query. However the controller may determine that the client device has been assigned a new IP address through snooping dynamic host configuration protocol DHCP packets. The fact that the client device has a new IP address indicates that client device has left the IP subnet and associated with a controller in a separate IP subnet. As a result the controller will transmit an IGMP Leave message for MC stream A to the multicast router on behalf of the client device . In addition the controller cleans up its multicast stream subscription table by removing the Client device MC stream A entry from the table.

By sending the IGMP Leave message on behalf of the client device the controller enables to the multicast router to prune the multicast subscription tree for the multicast MC stream A by removing the IP subnet when no other client devices within the IP subnet are also subscribed to MC stream A. Therefore by sending the IGMP Leave message the efficiency of the communication network is improved. In particular the amount of bandwidth used by the multicast router may be reduced.

Referring to a diagram of the exemplary network system of illustrating a client device leaving the communication network is shown. illustrates the communication network where the client device left the communication network by for example entering an inactive state. In this example while still associated with the controller the client device subscribed to a multicast stream MC stream A . Subsequently the client device entered an inactive state thereby disassociating with the controller . The client device is illustrated as being in an inactive state e.g. taken offline placed in a suspended state placed in a disabled state etc. with a shaded box.

The procedure followed by the controller for determining whether to transmit an IGMP Leave message to the multicast router when the client device enters an inactive state is the same as when the client device disassociates from the controller and associates with a controller in a separate IP subnet e.g. the controller as shown in . As discussed above the following three situations may arise when the client device leaves the communication network 1 the client device sends an IGMP Leave message to the multicast router 2 the client device does not send an IGMP Leave message to the multicast router but sends an explicit disassociation to the AP and 3 the client device sends neither an IGMP Leave message to the multicast router nor an explicit disassociation to the AP .

In the first situation when the client device sends an IGMP Leave message to the multicast router the controller snoops the IGMP Leave message and cleans up its multicast stream subscription table by removing the Client device MC stream A entry.

In the second situation when the client device does not send an IGMP Leave message to the multicast router but sends an explicit disassociation to the AP the controller sends van IGMP Leave message for MC stream A on behalf of the client device to the multicast router because the client device has not associated with a controller within the same IP subnet. In addition the controller cleans up its multicast stream subscription table by removing the Client device MC stream A entry.

In the third situation when the client device sends neither an IGMP Leave message to the multicast router nor an explicit disassociation to the AP the controller is alerted to the disassociation of the client device after the expiration of an idle timer and sends an IGMP Leave message for MC stream A on behalf of the client device to the multicast router because the client device has not associated with a controller within the same IP subnet. In addition the controller cleans up its multicast stream subscription table by removing the Client device MC stream A entry.

Referring to a flowchart illustrating an exemplary method for detecting triggering events that prompt a network device to end a multicast subscription of a client device is shown. Each block in represents an operation performed in the exemplary method for detecting triggering events. In operation a client device in a first IP subnet subscribes to a multicast stream as the source. For example the client device may subscribe to the multicast stream by transmitting an IGMP Report message to the multicast router. In operation the controller with which the client device is associated snoops the IGMP Report message transmitted by the client device as the controller forwards the IGMP Report message to the multicast router. The controller subsequently adds the client device and the multicast stream to which the client device subscribed to a multicast stream subscription table that records each client device multicast subscription pairing transmitted through the controller.

In operation as Song as the client device remains associated with the controller the controller continues to forward the multicast stream to which the client device subscribed yes at operation . Alternatively when the client device disassociates from the controller no at operation the controller determines whether the client device unsubscribed from the multicast stream operation . The client device may unsubscribe via for example an IGMP Leave message. When the client device transmits an IGMP Leave message yes at box the controller removes the client device multicast subscription pairing from its multicast stream subscription table box . When the client device did not unsubscribe from the multicast stream no at box the controller determines whether the client device explicitly disassociated by sending a disassociation message from the controller box .

When the client device explicitly disassociated from the controller yes at box the controller waits for a predetermined amount of time to determine whether the client device after disassociating with the controller associates with a second controller within the first IP subnet box . When the predetermined amount of time has expired box the controller determines whether the client device has associated with a second controller within the first IP subnet box .

When the client device associated with a second controller within the first IP subnet within the predetermined amount of time yes at box the controller removes the client device multicast subscription pairing from its multicast stream subscription table box . When the client device has not associated with a second controller within the first IP subnet within the predetermined amount of time no at box the controller transmits an IGMP Leave message for the multicast stream to the multicast router on behalf of the client device and removes the client device multicast subscription pairing from its multicast stream subscription table box .

Alternatively when the controller does not receive an explicit disassociation from the client device no at box the controller waits for the expiration of an idle timer e.g. the client device times out box . Without receiving an explicit disassociation the controller will learn of the disassociation of the client device when the client device times out and is no longer transmitting any data to the controller e.g. via an AP also associated with the controller . When the idle timer expires box the controller determines whether the client device has associated with a second controller within the first IP subnet box . As stated above when the client device associates with a second controller within the first IP subnet while the controller waits for the client device to time out yes at box the controller removes the client device multicast subscription pairing from its multicast stream subscription table box . When the client device has not associated with a second controller within the first IP subnet while the controller waited for the client device to time out no at box the controller transmits an IGMP Leave message for the multicast stream to the multicast router on behalf of the client device and removes the client device multicast subscription pairing from its multicast stream subscription table box .

Any combination of the above features and functionalities may be used in accordance with one or more embodiments hi the foregoing specification embodiments have been described with reference to numerous specific details that may vary from implementation to implementation. The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. The sole and exclusive indicator of the scope of the invention and what is Intended by the applicants to be the scope of the invention is the literal and equivalent scope of the set of claims that issue from this application in the specific form in which such claims issue including any subsequent correction.

