---

title: Methods, systems, and related architectures for managing network connected thermostats
abstract: A thermostat management system facilitates an automatic pairing of a thermostat with a thermostat communication account. The thermostat management system receives a public network address associated with a computer device on a private network accessing the thermostat management account. The system retrieves the thermostat metadata including a public network address associated with a registration of the thermostat with the thermostat management system. The public network address registered with the thermostat metadata is provided by a router on the private network and therefore should match the public network address used by computer devices on the private network. The thermostat management account is paired with the thermostat if the thermostat has the same public network address as the computer device accessing the thermostat management account. Pairing the thermostat management account to the thermostat allows the thermostat management account to communicate with the thermostat over the public network through the thermostat management system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09279595&OS=09279595&RS=09279595
owner: Google Inc.
number: 09279595
owner_city: Mountain View
owner_country: US
publication_date: 20140826
---
This patent application is a continuation of U.S. Ser. No. 13 275 311 filed Oct. 17 2011 Ref. No. NES0129 US which is hereby incorporated by reference in its entirety for all purposes. The subject matter of this patent specification relates to the subject matter of the following commonly assigned applications U.S. Ser. No. 12 881 430 filed Sep. 14 2010 U.S. Ser. No. 12 881 463 filed Sep. 14 2010 U.S. Ser. No. 61 415 771 filed Nov. 19 2010 U.S. Ser. No. 61 429 093 filed Dec. 31 2010 U.S. Ser. No. 12 984 602 filed Jan. 4 2011 U.S. Ser. No. 12 987 257 filed Jan. 10 2011 U.S. Ser. No. 13 033 573 filed Feb. 23 2011 U.S. Ser. No. 29 386 021 filed Feb. 23 2011 U.S. Ser. No. 13 034 666 U.S. Ser. No. 13 034 674 and U.S. Ser. No. 13 034 678 filed Feb. 24 2011 U.S. Ser. No. 13 038 191 filed Mar. 1 2011 U.S. Ser. No. 13 038 206 filed Mar. 1 2011 U.S. Ser. No. 29 399 609 filed Aug. 16 2011 U.S. Ser. No. 29 399 614 filed Aug. 16 2011 U.S. Ser. No. 29 399 617 filed Aug. 16 2011 U.S. Ser. No. 29 399 618 filed Aug. 16 2011 U.S. Ser. No. 29 399 621 filed Aug. 16 2011 U.S. Ser. No. 29 399 623 filed Aug. 16 2011 U.S. Ser. No. 29 399 625 filed Aug. 16 2011 U.S. Ser. No. 29 399 627 filed Aug. 16 2011 U.S. Ser. No. 29 399 630 filed Aug. 16 2011 U.S. Ser. No. 29 399 632 filed Aug. 16 2011 U.S. Ser. No. 29 399 633 filed Aug. 16 2011 U.S. Ser. No. 29 399 636 filed Aug. 16 2011 U.S. Ser. No. 29 399 637 filed Aug. 16 2011 U.S. Ser. No. 13 199 108 filed Aug. 17 2011 U.S. Ser. No. 13 267 871 filed Oct. 6 2011 U.S. Ser. No. 13 267 877 filed Oct. 6 2011 U.S. Ser. No. 13 269 501 filed Oct. 7 2011 U.S. Ser. No. 29 404 096 filed Oct. 14 2011 U.S. Ser. No. 29 404 097 filed Oct. 14 2011 U.S. Ser. No. 29 404 098 filed Oct. 14 2011 U.S. Ser. No. 29 404 099 filed Oct. 14 2011 U.S. Ser. No. 29 404 101 filed Oct. 14 2011 U.S. Ser. No. 29 404 103 filed Oct. 14 2011 U.S. Ser. No. 29 404 104 filed Oct. 14 2011 U.S. Ser. No. 29 404 105 filed Oct. 14 2011 U.S. Ser. No. 13 275 311 filed Oct. 17 2011 and U.S. Ser. No. 13 275 307 filed Oct. 17 2011. Each of the above referenced patent applications is incorporated by reference herein. The above referenced patent applications are collectively referenced hereinbelow as the commonly assigned incorporated applications. 

This patent specification relates to system monitoring and control such as the monitoring and control of heating ventilation and air conditioning HVAC systems. More particularly this patent specification relates to methods systems and related computer program products for provisioning supporting maintaining and or remotely controlling one or more network connected thermostats.

Substantial effort and attention continues toward the development of newer and more sustainable energy supplies. The conservation of energy by increased energy efficiency remains crucial to the world s energy future. According to an October 2010 report from the U.S. Department of Energy heating and cooling account for 56 of the energy use in a typical U.S. home making it the largest energy expense for most homes. Along with improvements in the physical plant associated with home heating and cooling e.g. improved insulation higher efficiency furnaces substantial increases in energy efficiency can be achieved by better control and regulation of home heating and cooling equipment. By activating heating ventilation and air conditioning HVAC equipment for judiciously selected time intervals and carefully chosen operating levels substantial energy can be saved while at the same time keeping the living space suitably comfortable for its occupants.

It would be beneficial at both a societal level and on a per home basis for a large number of homes to have their existing older thermostats replaced by newer microprocessor controlled intelligent thermostats having more advanced HVAC control capabilities that can save energy while also keeping the occupants comfortable. To do this these thermostats will need more information from the occupants as well as the environments where the thermostats are located. Preferably these thermostats will also be capable of connection to computer networks including both local area networks or other private networks and wide area networks such as the Internet or other public networks in order to obtain current and forecasted outside weather data cooperate in so called demand response programs e.g. automatic conformance with power alerts that may be issued by utility companies during periods of extreme weather enable users to have remote access and or control thereof through their network connected device e.g. smartphone tablet computer PC based web browser and other advanced functionalities that may require network connectivity.

Among other requirements the successful implementation of intelligent network connected thermostats into widespread practical everyday use in a large number of homes and business requires the deployment of computers networks software systems and other network infrastructure capable of providing the necessary provisioning data management and support. Data communications methods between the intelligent thermostats and centrally provided management servers which can also be termed cloud based management servers needs to be responsive robust and scalable. At the same time the hardware and methodologies employed need to be compatible with and workable in view of a large installed base of conventional routers and network services that are already in homes and business such that widespread adoption of the network connected intelligent thermostats be commercially feasible.

One further issue that needs to be addressed in promoting the adoption of intelligent network connected thermostats relates to the level of sophistication and effort required to install configure and manage such thermostats. As the benefits of these intelligent thermostats are realized a broad range of individuals and businesses will inevitably be interested in their adoption. People calculating the reduced costs and energy savings might be ready to purchase such a device yet may hesitate when it comes to installation configuration and management. Some may wonder whether they will be able to follow the instructions provided in the installation and user manual provided with the thermostat. Adding a network connection to the thermostat device can further complicate matters if the users are not adept in computers and networking.

To overcome these and other associated issues it is important that the intelligent thermostat is easily installed configured and managed. Complex installation instructions with numerous steps should be avoided as they might be confusing to a large number of users and prevent the intelligent thermostat from being installed or set up correctly. Installation problems may also arise if the installation requires a user to enter numerous codes and network addresses on the intelligent thermostat and or other pieces of equipment. Instead the intelligent thermostat installation and configuration should be achievable even by a user with limited experience and knowledge in tech .

One further issue that needs to be addressed in promoting the adoption of intelligent network connected thermostats relates to the human machine interface the will be experienced by the user when interacting with such thermostats. It would be desirable to provide intelligent network connected thermostat and an associated cloud based provisioning management and control system therefor that not only saves energy but that also provides a user friendly intuitive pleasant and appealing experience for the user. In addition to providing such positive and compelling experiences directly at the user interface of the physical thermostat itself i.e. the walk up user interface it would be desirable to provide such positive and compelling user experiences when the user is interacting remotely with their network connected thermostat over a computer network using their computer web browser smartphone tablet computer or other remote access device.

It is to be appreciated that although exemplary embodiments are presented herein for the particular context of HVAC system control there are a wide variety of other resource usage contexts for which the embodiments are readily applicable including but not limited to water usage air usage the usage of other natural resources and the usage of other i.e. non HVAC related forms of energy as would be apparent to the skilled artisan in view of the present disclosure. Therefore such application of the embodiments in such other resource usage contexts is not outside the scope of the present teachings.

Aspects of the present invention provide methods systems and related architectures for facilitating the provisioning installation configuration control and or management of a network connected thermostat. In one preferred embodiment there is provided a method for secure automated association or pairing of a wirelessly communicating thermostat with a user account on a cloud based thermostat management system in a manner that reduces or minimizes an amount of user effort involved. Upon first installation and power up of the thermostat or subsequently thereto such as for a re installation or factory reset the thermostat automatically instantiates wireless connection to an integrated router associated with a local area network private network router that serves the home business or other structure enclosure in which the thermostat is installed the thermostat walking the user through wireless network selection if multiple wireless networks are present and wireless network security password entry if required by virtue of an intuitive user interface on the thermostat that includes an electronic display. The thermostat which is located on a private network served by the private network router is configured and programmed to then instantiate communication with the cloud based thermostat management system which is located on a public network such as the Internet. The cloud based thermostat management system maintains a unique account identifier such as an e mail address for each user account that has been created and a unique thermostat identifier such as a MAC address for each thermostat unit that has been manufactured. In a method directed to pairing the newly installed thermostat with an associated user account with reduced or minimal user effort the cloud based thermostat management server keeps track for each user account of a public network address from which that user most recently accessed their user account on the cloud based thermostat management server such tracking being applicable for both previously established user accounts and newly established user accounts. Upon instantiation of communication with the cloud based thermostat management system the newly installed but as yet unpaired thermostat pairing candidate thermostat transmits thermostat metadata information associated therewith including its unique thermostat identifier to the cloud based thermostat management server this information being appended with the public network address of the private network router on its way out to the cloud based thermostat management server. The cloud based thermostat management server then makes a determination whether the pairing candidate thermostat can be automatically associated with a user account identifier based on a comparison of i the public network address of the pairing candidate thermostat s private network router and ii the tracked public network addresses from which user accounts have recently been accessed. In the event there is a match between the public network address of the pairing candidate thermostat s private network router the public network address from which one user account has recently been accessed than an automatic association is established between the unique thermostat identifier for that thermostat and the unique account identifier for that user account. In the event that there is no such match or in the event that any of a plurality of predetermined safeguard methods or criteria are not met then the user is prompted on the thermostat user interface display to manually assist in the pairing process. For the manual assistance process the thermostat is provided with an easy to remember passcode from the cloud based thermostat management server and then displays that easy to remember pass code to the user on the thermostat display along with a request for the user to log into their user account on the cloud based management server or to establish their user account if one is not yet established and then enter that passcode when so prompted. According to some embodiments the predetermined safeguard methods or criteria include displaying the user account identifier e.g. the user s e mail address on the thermostat display screen and requesting an affirmative confirmation input from the user into the thermostat.

Thus in one scenario that is expected to be relatively common a user will drive home with their new thermostat log into the cloud based management server to establish an account e.g. tomsmith3 mailhost.com from a computing device in their home which connects to the Internet using the same wireless capable router that the thermostat will be using and then install and power up their thermostat. In this case there will be a match between the public network address of their thermostat s private network router and the tracked public network addresses from which they established their user account and so there will be an automated association or pairing of their new thermostat s unique thermostat identifier and their user account identifier on the cloud based management server. During the initial setup process the user will simply encounter a safeguard message on the thermostat display such as Connect to tomsmith3 mailhost.com and will readily provide a confirmatory input since they are familiar with their own e mail address and the pairing process will be complete. Advantageously however even in some less common or complex scenarios for which such automated pairing may not result in a match or for which the predetermined safeguard methods or criteria are not met the user will still be provided with a relatively simple manual assistance process to establish the pairing at the cloud based management server as described above. According to some embodiments the predetermined safeguard methods or criteria further include canceling any pairing associations i.e. requiring manual assistance in any of the following cases i two different user accounts have been logged into from the same public network address now being used by the thermostat s private network router within the past 24 hours or other suitable time window and ii there are two different pairing candidate thermostats simultaneously accessing the cloud based thermostat management server from the same public network address. Other heuristics or testing methods directed to detecting particular cases of ambiguity mistake or likely mismatch can optionally be applied as additional safeguards without departing from the scope of the present teachings.

According to another preferred embodiment a method of configuring a thermostat for communication with a computer device over a network connection is provided. To connect the thermostat on the network a user configures a wireless network interface controller associated with the thermostat connecting the thermostat to a private network e.g. by entering a wireless passcode selecting from plural available networks etc. . A router on the private network provides connectivity from the thermostat to a public network where a thermostat management system is located. Once the thermostat is connected to its private network the thermostat sends thermostat metadata to be registered with a thermostat identifier in a thermostat registration pool on the thermostat management system the thermostat metadata being appended with the public network address of the router on its way to the thermostat management server. The public network address associated with the thermostat is shared by the router with other computer devices and thermostats located on the same private network. The thermostat management system pairs the thermostat registered in the thermostat registration pool to a thermostat management account on the thermostat management system when it is determined that the thermostat is on a same private network as a computer device that has recently accessed the thermostat management account. The pairing operation allows the thermostat to be accessed by the thermostat management account over the public network through the thermostat management system.

Another aspect of the present invention includes creating a thermostat management account on a thermostat management system to be used to communicate with a thermostat having network connectivity. In one embodiment a thermostat access client running on a computer device on a private network accesses a thermostat management system on a public network. The thermostat access client requests the thermostat management system to provision a thermostat management account using an account name. The thermostat management account will be used to communicate with at least one thermostat registered on the thermostat management system. As part of the provisioning operation the thermostat management system associates the public network address used by the computer device to access the thermostat management system from the private network. This public network address is used to identify thermostats on the same private network as the computer device and therefore suitable for pairing with the thermostat management account. As previously described the same public network address is shared by the router with computer devices and thermostats located on the same private network. Once it is created the thermostat management account on the thermostat management system may be paired to a thermostat on the same private network when the corresponding public network addresses match. Once again the pairing operation allows the newly created thermostat management account to access and communicate with the thermostat through the thermostat management system.

Yet another aspect of the invention includes uses logic on the thermostat management system to automatically facilitate a pairing of the thermostat with the thermostat communication account. In one embodiment the thermostat management system detects that a computer device on a private network has established or otherwise accessed a thermostat management account on the thermostat management system. For example this may occur if a computer device executes a thermostat access client that accesses the thermostat management account. The thermostat management system receives a public network address associated with the computer device accessing the thermostat management account. Next the thermostat management system retrieves thermostat metadata from the thermostat which communication will include a public network address provided by a router on the private network associated the thermostat. An automated association or pairing between the thermostat management account and the thermostat is established if the public network address registered with the thermostat metadata matches the public network address used by other the computer device to access the thermostat management account. Accordingly the thermostat management account is paired with the thermostat if a comparison indicates that the thermostat has the same public network address as the computer device accessing the thermostat management account. Pairing the thermostat management account to the thermostat allows the thermostat management account to communicate with the thermostat over the public network through the thermostat management system.

In the following detailed description for purposes of explanation numerous specific details are set forth to provide a thorough understanding of the various embodiments of the present invention. Those of ordinary skill in the art will realize that these various embodiments of the present invention are illustrative only and are not intended to be limiting in any way. Other embodiments of the present invention will readily suggest themselves to such skilled persons having the benefit of this disclosure.

In addition for clarity purposes not all of the routine features of the embodiments described herein are shown or described. One of ordinary skill in the art would readily appreciate that in the development of any such actual embodiment numerous embodiment specific decisions may be required to achieve specific design objectives. These design objectives will vary from one embodiment to another and from one developer to another. Moreover it will be appreciated that such a development effort might be complex and time consuming but would nevertheless be a routine engineering undertaking for those of ordinary skill in the art having the benefit of this disclosure.

It is to be appreciated that while one or more embodiments are described further herein in the context of typical HVAC system used in a residential home such as single family residential home the scope of the present teachings is not so limited. More generally thermostats according to one or more of the preferred embodiments are applicable for a wide variety of enclosures having one or more HVAC systems including without limitation duplexes townhomes multi unit apartment buildings hotels retail stores office buildings and industrial buildings. Further it is to be appreciated that while the terms user customer installer homeowner occupant guest tenant landlord repair person and the like may be used to refer to the person or persons who are interacting with the thermostat or other device or user interface in the context of one or more scenarios described herein these references are by no means to be considered as limiting the scope of the present teachings with respect to the person or persons who are performing such actions.

Some embodiments of thermostat in incorporate one or more sensors to gather data from the environment associated with enclosure . Sensors incorporated in thermostat may detect occupancy temperature light and other environmental conditions and influence the control and operation of HVAC system . Sensors incorporated within thermostat do not protrude from the surface of the thermostat thereby providing a sleek and elegant design that does not draw attention from the occupants in a house or other enclosure. As a result thermostat and readily fits with almost any d cor while adding to the overall appeal of the interior design.

As used herein a learning thermostat refers to a thermostat or one of plural communicating thermostats in a multi thermostat network having an ability to automatically establish and or modify at least one future setpoint in a heating and or cooling schedule based on at least one automatically sensed event and or at least one past or current user input. As used herein a primary thermostat refers to a thermostat that is electrically connected to actuate all or part of an HVAC system such as by virtue of electrical connection to HVAC control wires e.g. W G Y etc. leading to the HVAC system. As used herein an auxiliary thermostat refers to a thermostat that is not electrically connected to actuate an HVAC system but that otherwise contains at least one sensor and influences or facilitates primary thermostat control of an HVAC system by virtue of data communications with the primary thermostat. In one particularly useful scenario the thermostat is a primary learning thermostat and is wall mounted and connected to all of the HVAC control wires while the remote thermostat is an auxiliary learning thermostat positioned on a nightstand or dresser the auxiliary learning thermostat being similar in appearance and user interface features as the primary learning thermostat the auxiliary learning thermostat further having similar sensing capabilities e.g. temperature humidity motion ambient light proximity as the primary learning thermostat but the auxiliary learning thermostat not being connected to any of the HVAC wires. Although it is not connected to any HVAC wires the auxiliary learning thermostat wirelessly communicates with and cooperates with the primary learning thermostat for improved control of the HVAC system such as by providing additional temperature data at its respective location in the enclosure providing additional occupancy information providing an additional user interface for the user and so forth.

It is to be appreciated that while certain embodiments are particularly advantageous where the thermostat is a primary learning thermostat and the remote thermostat is an auxiliary learning thermostat the scope of the present teachings is not so limited. Thus for example while certain initial provisioning methods that automatically pair associate a network connected thermostat with an online user account are particularly advantageous where the thermostat is a primary learning thermostat the methods are more generally applicable to scenarios involving primary non learning thermostats auxiliary learning thermostats auxiliary non learning thermostats or other types of network connected thermostats and or network connected sensors. By way of further example while certain graphical user interfaces for remote control of a thermostat may be particularly advantageous where the thermostat is a primary learning thermostat the methods are more generally applicable to scenarios involving primary non learning thermostats auxiliary learning thermostats auxiliary non learning thermostats or other types of network connected thermostats and or network connected sensors. By way of even further example while certain methods for cooperative battery conserving information polling of a thermostat by a remote cloud based management server may be particularly advantageous where the thermostat is a primary learning thermostat the methods are more generally applicable to scenarios involving primary non learning thermostats auxiliary learning thermostats auxiliary non learning thermostats or other types of network connected thermostats and or network connected sensors.

Enclosure further includes a private network accessible both wirelessly and through wired connections and may also be referred to as a Local Area Network or LAN. Network devices on the private network include a computer thermostat and remote thermostat in accordance with some embodiments of the present invention. In one embodiment the private network is implemented using an integrated router that provides routing wireless access point functionality firewall and multiple wired connection ports for connecting to various wired network devices such as computer . Other embodiments may instead use multiple discrete switches routers and other devices not shown to perform networking functions equivalent to or in addition to those provided by integrated router .

Integrated router further provides network devices access to a public network such as the Internet provided enclosure has a connection to the public network generally through a cable modem DSL modem and a service provider of the Internet or other public network. The Internet and other public networks are sometimes referred to as a Wide Area Network or WAN. In one embodiment integrated router may direct communications to other devices on these networks using a network protocol such as TCP IP. If the communications is directed to a device or service outside the private network integrated router may route the communications outside the private network to the public network such as the Internet.

In some embodiments thermostat may wirelessly communicate with remote thermostat over the private network or through an ad hoc network formed directly with remote thermostat . During communication with remote thermostat thermostat may gather information remotely from the user and from the environment detectable by the remote thermostat . For example remote thermostat may wirelessly communicate with the thermostat providing user input from the remote location of remote thermostat or may be used to display information to a user or both. Like thermostat embodiments of remote thermostat may also include sensors to gather data related to occupancy temperature light and other environmental conditions. In an alternate embodiment remote thermostat may also be located outside of the enclosure .

In accordance with some embodiments a computer device in enclosure may remotely control thermostat by accessing a thermostat management account through a thermostat management system not shown in located on a public network such as the Internet. The thermostat management system passes control information over the network back to thermostat provided the thermostat is also associated or paired to the thermostat management account on the thermostat management system. Data collected by thermostat also passes from the private network associated with enclosure through integrated router and to the thermostat management system over the public network. Other computer devices not in enclosure such as Smartphones laptops and tablet computers not shown in may also control thermostat provided they have access to the public network and both the thermostat management system and thermostat management account. Further details on accessing the public network such as the Internet and a thermostat like thermostat in accordance with embodiments of the present invention is described in further detail later herein.

In heating heating coils or elements within air handler provide a source of heat using electricity or gas via line . Cool air is drawn from the enclosure via return air duct through filter using fan and is heated through heating coils or elements . The heated air flows back into the enclosure at one or more locations via supply air duct system and supply air registers such as register . In cooling an outside compressor passes a gas such as Freon through a set of heat exchanger coils to cool the gas. The gas then goes through line to the cooling coils in the air handler where it expands cools and cools the air being circulated via fan . A humidifier may optionally be included in various embodiments that returns moisture to the air before it passes through duct system . Although not shown in alternate embodiments of HVAC system may have other functionality such as venting air to and from the outside one or more dampers to control airflow within the duct system and an emergency heating unit. Overall operation of HVAC system is selectively actuated by control electronics communicating with thermostat over control wires .

In the embodiment illustrated thermostat is enclosed by housing with a forward facing surface including a cover and a grille member . The grille member is designed to compliment the sleek simple uncluttered and elegant design of thermostat to while facilitating the integration and operation of sensors located within housing of the thermostat. Notably included in the thermostat according to some preferred embodiments is passive infrared PIR occupancy sensors and temperature sensors behind grille member . Additional sensors may also include an ambient light sensor not shown and an active proximity sensor not shown positioned near the top of the thermostat just behind the cover . Some embodiments of housing include a backplate and a head unit . Housing provides an attractive and durable configuration for one or more integrated sensors used by thermostat and contained therein.

A central display area of cover allows information related to the operation of the thermostat to be displayed while an outer area of cover may be made opaque using a paint or smoke finish. For example central display area may be used to display a current temperature as illustrated in with the numerals 75 indicating 75 degrees. Central display area may also be used to display wireless networks available within enclosure and present a user interface for configuring thermostat to select access and use one of the wireless networks.

Embodiments of thermostat are circular in shape and have an outer ring for receiving user input. Side view of thermostat in further highlights this curved spherical shape of cover and grille member gently arcing outward matching the corresponding surface portion of outer ring . In some embodiments the curvature of cover may tend to magnify information displayed in central display area thus making information easier to read by users. The shape of thermostat not only provides a visually appealing accent when it is mounted on the wall but a natural shape for users to touch and adjust with their hands. Accordingly the diameter of thermostat may be approximately 80 mm or another diameter that readily fits the hand. In various embodiments rotating outer ring allows the user to make adjustments such as selecting a new target temperature. For example the target temperature may be increased by rotating the outer ring clockwise and decreased by rotating the outer ring counter clockwise.

Head unit of thermostat slides onto backplate not shown and further includes head unit front and head unit frame . The head unit front includes outer ring central display area and outer area of cover and grille member designed in accordance with embodiments of the present invention.

According to some embodiments for the combined purposes of inspiring user confidence and further promoting visual and functional elegance the thermostat is controlled by only two types of user input the first being a rotation of the outer ring as illustrated in also referred to as a rotate ring and the second being an inward push on the head unit front until an audible and or tactile click occurs as illustrated in . According to some embodiments the inward push illustrated in only causes the outer ring to move forward while in other embodiments the entire head unit front moves inwardly together when pushed. In some embodiments cover and grille member do not rotate with outer ring .

According to some embodiments multiple types of user input may be generated depending on the way a pushing inward of head unit front is effectuated. In some embodiments a single brief push inward of head unit front until the audible and or tactile click occurs followed by a release single click can be interpreted as one type of user input also referred to as an inward click . In other embodiments pushing the head unit front in and holding with an the inward pressure for an amount of time such as 1 3 seconds can be interpreted as another type of user input also referred to as a press and hold . According to some further embodiments other types of user input can be effectuated by a user such as double and or multiple clicks and pressing and holding for longer and or shorter periods of time. According to other embodiments speed sensitive or acceleration sensitive rotational inputs may also be implemented to create further types of user inputs e.g. a very large and fast leftward rotation specifies an Away occupancy state while a very large and fast rightward rotation specifies an Occupied occupancy state .

The embodiments described herein are advantageously configured to be compatible with a large variety of conventional integrated routers that service a large population of homes and businesses. Thus by way of example only and not by way of limitation the router not shown that services the private network of can be for example a D Link DIR 655 Extreme N Wireless Router a Netgear WNDR3700 RangeMax Dual Band Wireless USB Gigabit Router a Buffalo Technology Nfiniti WZR HP G300NH Wireless N Router an Asus RT N16 Wireless Router Cisco Linksys E4200 Dual Band Wireless Router or a Cisco Linksys E4200 Dual Band Wireless Router. Without loss of generality some descriptions further hereinbelow will refer to an exemplary scenario in which the thermostats are used in a home environment. However it is to be appreciated that the described embodiments are not so limited and are applicable to use of such thermostat s in any of a variety of enclosures including residential homes business vacation homes hotels hotel rooms industrial facilities and generally anywhere there is an HVAC system to be controlled.

Thermostat access client is a client application designed in accordance with aspects of the present invention to access the thermostat management system over public network which is a wide area network such as the Internet. Because thermostat access client is designed to execute on different devices multiple client applications may be developed using different technologies based on the requirements of the underlying device platform or operating system. In some cases thermostat access client may be implemented using a markup language such as HTML and related technologies displayed inside of a web browser technology such as SAFARI FIREFOX or INTERNET EXPLORER . In some embodiments computer may run thermostat access client by navigating to a particular URL on the Internet and displaying web pages delivered from a web server hosted by thermostat management system .

In yet another embodiment thermostat access client may be a stand alone application or app designed to be downloaded and run on a specific device such as smartphone or a tablet device running the Apple iOS operating system. Android operating system or others. Developers create these stand alone applications using a set of application programming interfaces APIs and libraries provided by the device manufacturer packaged in software development toolkit or SDK. Once completed the app is made available for download to the respective device through an application store or app store curated by the app store owners to promote quality usability and customer satisfaction.

In one embodiment thermostat management system illustrated in may be accessed over public network by computer devices on private network running thermostat access client . Thermostat access client accesses a thermostat management account not illustrated provisioned by thermostat management system on behalf of the computer devices in order to access or control thermostat or remote thermostat . In addition a computer device on private network such as computer may use the thermostat access client and thermostat management account on to gather data from thermostat and remote thermostat .

Thermostat and remote thermostat may be accessed remotely from numerous different locations on the private network or public network . As will be described in further detail hereinbelow upon installation a thermostat such as thermostat first registers with the thermostat management system and then requests the thermostat management system create a pairing between the thermostat and a corresponding thermostat management account. Thereafter a device such as a tablet may be connected to public network directly or through a series of other private networks not shown yet still access these thermostats while outside the private network where they are located by way of thermostat management system . In one embodiment a tablet running the Apple iOS operating system may remotely access to these thermostats through the thermostat management system and thermostat management account using an iOS app version of thermostat access client . Pairing thermostats with the thermostat management account allows tablet and other computer devices to remotely control gather data and generally interact with thermostats such as thermostat and remote thermostat .

In one embodiment thermostat management system distributes the task of communication and control with the thermostats to one or more thermostat management servers . These thermostat management servers may coordinate communication manage access process data and analyze results using data produced by thermostats such as thermostat and remote thermostat . Intermediate and final results from computations on these servers as well as raw data may be stored temporarily or archived on thermostat databases for future reference and use. Thermostat management servers may also send a portion of the data along with control information and more generally any of a variety of different kinds of information back to thermostat and remote thermostat . Results from the thermostat management servers may also be stored in one or more thermostat databases for subsequent access by a device such as tablet running thermostat access client .

These thermostat management servers each may perform one or several discrete functions may serve as redundant fail over servers for these different discrete functions or may share performance of certain discrete functions in tandem or in a cluster as well as other combinations performing more complex operations in parallel or distributed over one or more dusters of computers. In some embodiments one of the thermostat management servers may correspond directly to a physical computer or computing device while in other embodiments the thermostat management servers may be virtualized servers running on one or more physical computers under the control of a virtual machine computing environment such as provided by VMWARE of Palo Alto Calif. or any other virtual machine provider. In yet another embodiment the thermostat management servers and thermostat databases are provisioned from a cloud computing and storage environment such as the Elastic Compute Cloud or EC2 offering from Amazon.com of Seattle Wash. In an EC2 solution for example the thermostat management servers may be allocated according to processor cycles and storage requirements rather than according to a number of computers either real or virtual thought to be required for the task at hand.

In some embodiments the thermostat management servers making up this thermostat management system may manage thermostats located in multiple enclosures across various geographic locations and time zones. Each enclosure may use one or several thermostats in accordance with embodiments of the present invention to control one or several HVAC systems such as HVAC system in . In some cases there may be an increased need from the thermostat management system for certain functions and therefore more servers to deliver these functional capabilities. It may be appreciated that the design of thermostat management system and use of the thermostat management servers may be scaled to meet these demands on the system and efficiently track and organize the data from these multiple enclosures and thermostats for processing analysis control and machine learning purposes.

One embodiment of registration server provides a number of services related to registering a thermostat on the thermostat management system and preparing it for pairing with a thermostat management account. In operation the registration server may be first accessed by a thermostat when the thermostat is wired to the HVAC of an enclosure and then connected to the Internet through a private network. To make the thermostat known on system the thermostat sends thermostat metadata from the private network to the public network such as the Internet and then onto processing by registration server . Preferably the thermostat metadata includes a unique thermostat identifier such as one that is assigned at the time of manufacturing. As the communication that sends the thermostat metadata passes through the network address translator NAT of the router not shown that serves private network it is appended with the public network address of that router which is thus the public address that is used by the thermostat to communicate over the public network. The thermostat identifier is used to identify the thermostat from other thermostats being registered by registration server and may be based in part or in whole on a media access control MAC address assigned to the NIC of the thermostat. As one security measure against registering unauthorized devices registration server may compare the MAC address in the thermostat metadata against a list of valid MAC addresses provided by the manufacturer of the thermostat or NIC component. In accordance with one embodiment the thermostat registration is complete when the registration server provisions an entry in a thermostat registration pool and marks the thermostat entry ready to be paired with a thermostat management account. Entries in the thermostat registration pool may be referenced by their unique thermostat identifier the public network address that they used or more particularly the public address of the private network router through which they connect to the Internet and optionally other relevant metadata associated with the thermostat.

In some embodiments update server attempts to update software firmware and configuration updates to each of the thermostats registered in the thermostat registration pool. If metadata from entries in the registration pool exclude versioning information update server may need to further query each thermostat for current versions installed. Update server may access entries in the registration pool and then use corresponding network addresses in each entry to connect to the associated thermostat over the public network or private network or both.

If newer software versions exist than currently used on a thermostat update server proceeds to send software updates to the thermostat over the public network. For example update server may use file transfer protocols such as ftp file transfer protocol tftp trivial file transfer protocol or more secure transfer protocols when uploading the new software. Once uploaded installation and update of the software on the thermostat may occur immediately through an auto update option on the thermostat or manually through the interface of the thermostat as requested by a user.

One embodiment of pairing server facilitates the association or pairing of a thermostat with a thermostat management account on thermostat management account server . The term thermostat management account can be used interchangeably with user account herein unless specified otherwise. Once the thermostat is paired with a user account a rich variety of network enabled capabilities are enabled as described further herein and in one or more of the commonly assigned incorporated applications supra. For example once pairing has been achieved a person with access to the thermostat management account may access the thermostat through the thermostat management system using the thermostat access client for a variety of purposes such as seeing the current temperature of the home changing the current setpoint changing the mode of the thermostat between home and away and so forth. Moreover the thermostat management system can then start tracking the various information provided by the thermostat which in turn enables a rich variety of cloud based data aggregation and analysis that can be used to provide relevant reports summaries updates and recommendations to the user either through the thermostat display itself through the thermostat access client or both. A variety of other capabilities such as demand response actions in which the thermostat management server sends an energy alert and or sends energy saving setpoint commands to the thermostats of users who have enrolled in such programs can be carried out.

In view of the importance of establishing a pairing between the thermostat and a thermostat management account there is provided an ability for a fallback method of pairing which can be termed a manually assisted method of pairing that can take effect and be carried out in the event that the convenient auto pairing methods described further hereinbelow cannot be securely and reliably carried out for a particular installation. The manually assisted method which is described further in relation to infra pairing server may use an alphanumeric passcode to pair the thermostat to the thermostat management account. Typically the passcode is sent to the thermostat over a public network like the Internet and displayed on the display area of the thermostat. Authorization to access the thermostat is provided if the user obtaining the passcode from the display on the thermostat then enters it into a pairing dialog presented when the user logs into their thermostat management account. Pairing server pairs the thermostat with the user s thermostat management account if the user enters that same passcode that was displayed on their thermostat display.

According to a preferred auto pairing method the pairing server may automatically pair or auto pair a thermostat management account to a thermostat if both are located on the same private network. If the thermostat and thermostat management account are associated with the same private network embodiments of the present invention presume the thermostat is at the user s home office or other area where the user should also have control of the device. To make this determination automatically the pairing server compares the public network address that was used to register the thermostat over the Internet with the public network address used by the computer device that has most recently been used to access the thermostat management account. Since the thermostat and computer device only have private network addresses the router on the private network they share inserts the same public network address into their packets thus allowing the two devices to access servers services and other devices on the Internet. Auto pairing takes advantage of this fact and automatically pairs devices sharing the same public network address. This is particularly advantageous from a user standpoint in that the user is not bothered with the need to enter a passcode or other alphanumerical identifier in order to achieve the pairing process and avoids the concern that a user may inadvertently enter incorrect codes or identifiers into the system. Details on auto pairing and manually assisted pairing are described in further detail later herein.

Thermostat front end user interface UI server facilitates the generation and presentation of intuitive user friendly graphical user interfaces that allow users to remotely access configure interact with and control one or more of their network connected thermostats from a computer web browser smartphone tablet or other computing device. The user friendly graphical user interfaces can also provide useful tools and interfaces that do not necessarily require real time connectivity with the thermostats with examples including for some embodiments providing user interfaces for displaying historical energy usage historical sensor readings and or occupancy patterns allowing the user to learn about and or enroll in demand response programs provide social networking forums that allow users to interact with each other in informative competitive fun ways that promote energy savings provide access to local information including weather public safety information neighborhood calendar events and local blogs and more generally provide services and information associated with a comprehensive energy portal functionality. Examples of intuitive user friendly graphical user interfaces provided by the UI server according to one or more preferred embodiments are described further infra with respect to .

In some embodiments a thermostat access client user interface displays an image of a house representing a primary enclosure paired to the thermostat management account in the thermostat management system. Thermostat front end UI server may further instruct the thermostat access client such as thermostat access client in to display images visually representative of one or more thermostats inside the primary enclosure. By default each of the one or more thermostat images may also display a current temperature measurement in the enclosure. In some embodiments the user interface may also further display an image of an additional house or houses representing a secondary enclosure having additional thermostats that are also paired to the thermostat management account. The image of the additional house may appear smaller out of focus or generally deemphasized visually in relationship to the image of the house representing the primary enclosure. Additional enclosures beyond the secondary enclosure can also be displayed in the user interface and should also appear visually deemphasized compared with the image displayed for the primary enclosure. Further information on the thermostat access client and user interface are described in more detail hereinbelow.

Thermostat backend server manages the storage of data used by various thermostat management servers in the thermostat management system . In some embodiments thermostat backend server may manage storage of the thermostat registration pool data used by the registration server or may organize and store new software updates and releases for the update server . In another embodiment thermostat backend server may also store heating and cooling related data i.e. date and time HVAC system was in either heating or cooling mode within the enclosure sensor information battery level data alarms etc. associated with an enclosure that was sent to the thermostat management system by thermostats registered therewith and in some embodiments and provide pre computed heating and cooling schedules applications and other data for download over the public network for use by the thermostats.

In some embodiments thermostat management account server is used to create new accounts and update existing accounts on thermostat management system . To access their thermostat over a thermostat access client and enjoy the benefits of thermostat connectedness the user is first required to create of a thermostat management account user account on thermostat management account server using their thermostat access client . Accordingly users execute the thermostat access client on a computer or other computer device to access the thermostat management account server . The thermostat management account server should receive at least the zip code and or city and state for the enclosure in which the thermostat is or will be installed such that weather information provided by a weather service can be accessed and downloaded to the thermostat which can be used as part of its optimal enclosure characterization and HVAC control algorithms. Optionally a variety of other information including a user s contact information enclosure street addresses and so forth can also be received. Primary options associated with the thermostat management account server include pairing one or more thermostats to the correct thermostat management account through pairing operations provided by pairing server . However even if the account is not yet paired with a thermostat the user may use the thermostat management account to access local information including weather public safety information neighborhood calendar events local blogs and more information based upon the user s contact information locale and other interests.

With network connectivity available step Yes a user may first need to configure a network connection preferably wireless between the NIC associated with the thermostat and the private network in the enclosure step . In some implementations the thermostat may automatically suggest joining a wireless network with the strongest wireless signal as the signal strength is likely strongest from a network within the enclosure. For example the thermostat may suggest joining the wireless network with the highest received signal strength indicator RSSI . A user may confirm that the thermostat join the wireless network on the interface to the thermostat. In other implementations the thermostat may display the SSIDs from nearby wireless networks on a display such as in display in and allow the user to twist outer ring to scroll to the correct wireless network and then push on the head unit front to select and attempt to join the network. If a password to the wireless network is requested the series of characters making up the password are provided by twisting outer ring to scroll through an alphabet of characters and then selecting the character by pushing the entire head front unit . Further description of preferred thermostat user interfaces that facilitate connection to a wireless network are provided in the commonly assigned U.S. Ser. No. 13 269 501 supra. In yet another implementation a wireless computer or wireless device may form an ad hoc network directly with the thermostat to access a built in web server and web interface then configuring the connection between the wireless NIC and the private network using the computer device and a browser. This latter approach may be useful if the display on the thermostat cannot be easily seen or reached for configuring purposes or to run certain diagnostics.

Once connected to the private network the thermostat transmits thermostat metadata information associated therewith including its unique thermostat identifier to the thermostat management system this information being appended with the public network address of the private network router on its way therethrough and out to the thermostat management system step . Registration is carried out that makes information related to the thermostat available on the thermostat management system and is a precursor to pairing the thermostat with a thermostat management account. To complete the registration a server associated with the thermostat management system such as registration server may create a new entry in a thermostat registration pool with the aforementioned data and metadata associated with the thermostat held for later processing. Depending on the implementation the thermostat may be able to receive software and firmware updates from the thermostat management system once it is registered with the system.

The cloud based thermostat management system maintains a unique account identifier such as an e mail address for each user account that has been created and a unique thermostat identifier such as a MAC address for each thermostat unit that has been manufactured. The cloud based thermostat management server keeps track for each user account of a public network address from which that user most recently accessed their user account on the cloud based thermostat management server such tracking being applicable for both previously established user accounts and newly established user accounts.

In some embodiments a thermostat may have already been paired to a thermostat management account step Yes which can be detected based on the unique thermostat identifier sent at step and thus the pairing is already established step . In some embodiments the thermostat identifier the MAC address assigned to the NIC for example may be used to find an entry for the thermostat in the thermostat registration pool and then cross referenced with a list of thermostat management accounts. Unless the initial pairing is deleted or removed a thermostat paired with one account may not be available for pairing with another account. On the other hand it is to be appreciated that a single thermostat management account can be paired with multiple different thermostat.

If the thermostat has not already been paired to a thermostat management account step No i.e. is a pairing candidate thermostat then at step the thermostat management server makes a determination whether the pairing candidate thermostat can be automatically associated with a thermostat management account based on a comparison of i the public network address of the thermostat s private network router and ii the tracked public network addresses from which thermostat management account have recently been accessed. In the event there is such a match step Yes between the public network address of the pairing candidate thermostat s private network router the public network address from which one user account has recently been accessed than an automatic association is established at least tentatively between the unique thermostat identifier for that thermostat and the unique account identifier for that thermostat management account. Upon such positive match however it is preferable that at least one safeguard test be made in which the thermostat management account identifier e.g. the user s e mail address on the thermostat display screen see and requesting an affirmative confirmation input from the user into the thermostat. Further safeguards are also carried out and if all are satisfied then the pairing is affirmatively established step .

However if no match is found at step or if any of the safeguard tests are not satisfied then it is required that a manually assisted pairing process take place step in order to have the pairing affirmatively established step . Optionally if no match is found at step the user may be invited to establish and or log into their thermostat management account whereupon the steps are then repeated to see if a match occurs.

For manually assisted pairing the thermostat may receive from pairing server a seven character alphanumeric passcode sequence to be displayed on the thermostat display with one example being shown in . A user in the vicinity of the thermostat seeing the passcode may enter the alphanumeric sequence into their thermostat management account. If the alphanumeric sequence is entered into the thermostat management correctly the pairing server will pair the thermostat with the user s thermostat management account.

According to some embodiments the predetermined safeguards carried out at step can comprise the cancellation of any tentative pairing associations i.e. requiring manual assistance in any of the following cases I two different user accounts have been logged into from the same public network address now being used by the thermostat s private network router within the past 24 hours or other suitable time window and ii there are two different pairing candidate thermostats simultaneously accessing the cloud based thermostat management server from the same public network address.

The pairing server may receive a confirmation passcode from a thermostat management account requesting a pairing be made with the respective thermostat displaying the passcode. If the server confirms a passcode match between the thermostat and the thermostat management account Yes the system pairs the thermostat to the thermostat management account. If there is not a passcode match some embodiments may submit a notification to the thermostat management account that the passcode provided does not match the registered thermostat in the thermostat management system. For example this might occur if the passcode has been entered into the account incorrectly. It may also occur if the passcode has been displayed on the thermostat display beyond a predetermined time interval such as 3 hours and has timed out or been removed from the system.

As illustrated in this schematic thermostat registration pool includes a list of all currently registered thermostats in the system having thermostat identifiers 18 84 30 01 63 E1 18 B4 30 01 63 E7 18 B4 30 01 63 E3 and 18 B4 30 01 63 E9 and corresponding public network addresses or public addresses 75.52.8.12 75.22.4.21 68.21.4.12 and 68.21.4.15. A confirm field in the thermostat registration pool with a Yes entry indicates that thermostats 18 84 30 01 63 E1 18 84 30 01 63 E7 and 18 B4 30 01 63 E3 have been affirmatively paired with accounts bob123 gmail.com and matt gunn.com respectively from thermostat management accounts 912 these pairings being indicated by the arrowed lines between the tables and in . Notably bob123 gmail.com is paired with two thermostats 18 B4 30 01 63 E1 and 18 B4 30 01 63 E7 and matt gunn.com is paired with one thermostat 18 B4 30 01 63 E3. In comparison thermostat management accounts jeff533 mac.com and sue324 yahoo.com are not paired with any thermostats and the thermostat associated with thermostat identifier 18 B4 30 01 63 E1 remains unpaired with an account.

In thermostat has been connected wirelessly to the private network and assigned a private network address of 192.168.1.108 by the router. The router has also created an entry for thermostat in a NAT table identified by NAT port allowing thermostat to access pairing server at destination address 107.20.224.12 and destination port on the public network. Packets from thermostat sent to pairing server have a public network address 76.21.3.203 1022 corresponding to the public network address of the router and the NAT port identifier in NAT table . Consequently thermostat metadata having a public network address and port of 76.21.3.203 and thermostat ID 18 B4 30 01 63 E4 is used to register thermostat in the thermostat registration pool with thermostat registration pool entry as indicated.

The schematic in further illustrates a user with account name bill11 sbc.com wirelessly connecting computer device through private network . The router on private network assigns a private network address 192.168.1.110 to computer device and an entry in the NAT table identified by NAT port which allows computer device to also access pairing server on the public network. Packets from computer device sent to pairing server have a public network address and port of 76.21.3.203 1044 thus corresponding to the public network address of the router and the NAT port in NAT table . Thermostat access client metadata having a public network address of 76.21.3.203 and an account name of bill11 sbc.com is then used in the thermostat management account table to provision a thermostat management account entry as highlighted. In accordance with further embodiments pairing server may then initiate an automatic pairing or auto pairing between thermostat registration pool entry and thermostat management account entry as they have a matching public network address of 76.21.3.203. In this particular example auto pairing creates an association as illustrated between thermostat registration pool entry and thermostat management account entry .

To help ensure the thermostat is paired with the right account some embodiments may include one or several additional confirmation operations for safeguarding purposes. In some embodiments a thermostat frontend UI server see displays dialog in to a user accessing their thermostat management account on a computer device running a thermostat access client. Dialog notifies a user that the autopairing routine has located a thermostat for pairing is going to automatically add or pair it to the particular thermostat management account. If the user does not want to pair the thermostat to the thermostat management account a rejection dialog allows the user to request DO NOT ADD the thermostat and the pairing will be cancelled.

If the user does not cancel the pairing one embodiment as illustrated in the dialog in further notifies the user A new thermostat has been detected and then suggests to the user to Please go to the thermostat to add it to your account . In one embodiment the thermostat frontend UI server delivers a thermostat image facsimile with a confirmation dialog to assist the user in finding the thermostat. The user may then locate thermostat as illustrated in with an account name in this example bsmister nestlabs.com and confirmation dialog to confirm the pairing with the account. The user may operate the outer ring of thermostat and either confirm i.e. select YES or reject i.e. select NO pairing the thermostat with thermostat management account . If the user confirms the YES NO dialog an entry in the CONFIRM column in thermostat registration pool receives a Yes entry and the thermostat is paired.

In some embodiments confirmation dialog helps ensure pairing server does not automatically pair a thermostat to a thermostat management account until a user authorizes it. In other embodiments the confirmation may also be used to limit accidentally autopairing a thermostat to the wrong thermostat management account if multiple users are on the same private network. For example a retail store or coffee shop may try to pair a thermostat using a shread private network with multiple customers who are also accessing their thermostat management accounts. If this latter condition occurs the thermostat management table such as thermostat management table in will have multiple entries with the same public network address not shown and the autopairing server may be unable to determine which account should be paired with the thermostat. To avoid this conflict the confirmation dialog may optionally serially step through a list of possible accounts and allow a user to select which account should be paired with the thermostat. In yet another embodiment if multiples entries of the same public network address and thermostat management table cannot be disambiguated then some embodiments of the present invention may opt out of autopairing and use another type of pairing such as passcode pairing describe herein below.

Embodiments of the present invention further receive a public network address associated with the thermostat management account provided by a router on a private network. As previously described devices on a private network generally share a public network address with the router providing the private network with access to the public network such as the Internet. The router device on the private network use the NAT table entries to bridge between addresses used on private and public networks. One embodiment stores the public network address associated with the computer device accessing the thermostat management account in a thermostat management account table in . Autopairing performed by pairing server depends on devices and services on one private network sharing a single public network address to make the pairing determination.

In another embodiment the pairing server retrieves thermostat metadata including a public network address from a registration of the thermostat with the thermostat management system. In some embodiments a thermostat attached to a private network initially requests access and registration on the thermostat management system to obtain data updates and eventually pairing with a thermostat management account. During the registration the thermostat may provides thermostat metadata information to be entered in a thermostat registration pool such as thermostat registration pool . This thermostat metadata information includes a public network address and thermostat identifier in one embodiment. At the time of registration the public network address is provided by the router on the private network where the thermostat is located. In one embodiment autopairing relies on the same public network address used by the thermostat being shared by the router with computer devices thermostats and other services on the private network.

Embodiments of the present invention determines whether the public network address associated with the thermostat management account is the same as the public network address associated with the thermostat. As previously described the public network addresses should match if the computer device that accessed the thermostat management account is on the same private network as the thermostat. However if the public network address for the thermostat and thermostat management account are different No an alternate approach to pairing the thermostat management account with a thermostat may be necessary. 

Embodiments of the present invention presume that the thermostat management account is accessed from the same private network where the thermostat is located. As an added measure of authorization one embodiment requests a confirmation to pair the thermostat and thermostat management account through a dialog displayed on the thermostat. The confirmation may request a user setting up the thermostat to operate the interface on the thermostat and confirm a pairing with a particular thermostat management account. As an example the thermostat in includes a confirmation dialog used to confirm adding a thermostat to an account. If the confirmation is not provided No then an alternate approach to pairing the thermostat management account and thermostat may be taken. If the thermostat management system receives a confirmation back from the thermostat to proceed Yes embodiments of the invention will pair the thermostat to the thermostat management account. Pairing provides the thermostat access to data and also grants access to the thermostat through the thermostat management account as previously described. 

In combining these elements together embodiments of the present invention provide an inviting and intuitive interface for accessing programming and controlling one or more thermostats associated with and installed in one or several enclosures. Additionally the elements of the user interface further provide access to related information of weather data local community information energy saving information emergency response information and other data as it relates to each of one or more enclosures associated with a user s thermostat management account. In some embodiments account name provides the name of the thermostat management account currently using the thermostat access client as illustrated in . For example the account name may be an email address however it may also be any identifier the system may recognize and associate with the thermostat management account currently in use. Upon providing an account name and proper associated authorization one embodiment of the user interface identifies a primary enclosure from account name as a default primary enclosure to be initially used in the user interface. In some embodiments the default primary enclosure may be specified during a configuration of account name or it may be the enclosure used when the thermostat management account with account name was last accessed. In this example the default primary enclosure taken from account name may be a residential home identified as Home and associated with primary enclosure selection while a secondary enclosure may be a vacation home identified as Vacation Home and associated with secondary enclosure selection . As displayed in the user interface primary enclosure selection labeled Home is emphasized in the foreground area and appears to be larger in size and in front of the smaller secondary enclosure selection labeled Vacation Home . Focus indicator operates to further help identify and direct a user s attention to one main element in the user interface currently being accessed and or operated upon in the user interface. In this example focus indicator identifies primary enclosure selection as the main element and one source of information driving other portions of the user interface. While not shown in focus indicator may identify other elements such as thermostat selection as the main element in the user interface rather than primary enclosure selection .

Since primary enclosure selection is identified by focus indicator background area of the user interface displays a primary visual weather representing a current weather in the vicinity of the primary enclosure associated with primary enclosure selection . Some embodiments of primary visual weather may animate various weather image elements representing clouds rain snow and other weather conditions to further emphasize the weather pattern at the primary enclosure. Time of day may also be reflected by the lightness or darkness of images in primary visual weather depending on the time zone associated with the location of the primary enclosure which in this case appears to be daytime as reflected in primary visual weather in . Other elements on the user interface associated with primary enclosure selection include a temperature location indicating a current temperature and temperature at the primary enclosure location and weather selection that when selected provides a forecast of weather also related to the primary enclosure. House settings selection displays information when selected related to the address zip code and location of the primary enclosure associated with primary enclosure selection .

An away indicator appears as different colors in a window of the house image of primary enclosure selection and in the width of the outline of the inverted U shaped door like image along the front of the house image. For example a color in the window and door appearing as a golden yellow color may indicate that someone is presently occupying the house or office but if the color turns dark or black then it shows that the house or office is unoccupied.

In some embodiments the primary enclosure selection also displays a thermostat selection for each of the thermostats used within the actual primary enclosure. It appears that the primary enclosure selection with the label HOME in this example represents a primary residence or home having only one thermostat as represented by thermostat selection displayed in the foreground area . Upon selecting thermostat selection in some embodiments focus indicator slides under thermostat selection and the user interface presents another portion of the interface for setting up heating and cooling setpoints according to a schedule.

Once a primary enclosure is selected the user interface of the thermostat access client displays the primary enclosure selection and associated thermostat selections . In some embodiments the individual thermostat selection may show a corresponding temperature inside or near the primary enclosure. Both the primary enclosure selection and corresponding thermostat selections appear in a foreground area of the user interface as it is displayed on a display device. For example the primary enclosure selection may appear as an image of a house as illustrated by primary enclosure selection appearing in foreground area in and . Similarly thermostat selections on the user interface may appear as the round thermostats installed in the enclosures and illustrated for example as thermostat selection in and thermostat selections and in . In some embodiments thermostat selection represents a first thermostat associated with the current primary enclosure and the thermostat selection represents a second thermostat associated with the primary enclosure.

The user interface of the thermostat access client further displays a primary visual weather and an approximate time of day at a geographic location of the primary enclosure. In one embodiment this primary visual weather may be displayed like primary visual weather in . For example the primary visual weather may include images and or animated images of weather conditions such as rain snow hail and others in the background area of the user interface in the thermostat access client. These images generally reflect the current weather condition in the geographic region of the primary enclosure and an approximate time of day.

If just one enclosure is paired to the thermostat management account No the user interface continues to display the just primary enclosure selection as previously described. In alternate embodiments a secondary enclosure paired to the thermostat management account Yes is displayed as a secondary enclosure selection in accordance with further embodiments of the user interface. The secondary enclosure selection is visually deemphasized and appears smaller when compared with the primary enclosure selection. To further deemphasize the secondary enclosure selection may also be placed in the foreground area but appear behind the primary enclosure selection. Like the primary enclosure selection secondary enclosure selection may look like a house such as depicted by secondary enclosure selection appearing in foreground area in .

When no selections are made No embodiments of the user interface continues to display the same primary enclosure selection as previously described . In alternate embodiments the user interface may receive a selection of the secondary enclosure selection thereby causing a change in the primary and secondary enclosures represented by the user interface. Yes For example a user s selection of the secondary enclosure selection causes the secondary enclosure to assume the role of the primary enclosure and then become displayed as the primary enclosure selection on the user interface. In turn the previous primary enclosure assumes the role of the secondary enclosure and is displayed as the second enclosure selection visually deemphasized on the user interface. To illustrate an example of this user interface interaction FIG. A displays the primary enclosure selection identified as HOME before receiving a user s selection. The secondary enclosure selection in identified as VACATION HOME receives a user s selection and becomes the primary enclosure selection as illustrated in . As a result the previous primary enclosure selection identified as HOME becomes the secondary enclosure selection in .

In accordance with the present invention illustrate setting options and obtaining weather forecasts in the user interface for an enclosure. In one embodiment the options for an enclosure are displayed by selecting the primary enclosure selection and associated settings on the user interface of the thermostat access client. In this embodiment options may include providing an address for the primary enclosure selection and indicating if the home is occupied or unoccupied. In some embodiments setting the presence field in options to AWAY Indicates the house is unoccupied and makes it appear the lights are off or dark in the house image used as primary enclosure selection . Setting the presence field to away may also cause the thermostat to turn off the HVAC system or put the HVAC in an away state with temperature staying in a predetermined range designated for the away state of the thermostat. In other embodiments setting the presence field in options to occupied not shown in makes it appear that the lights are on in the house image used as the primary enclosure selection and also may turn on the HVAC system and begin a predetermined heating or cooling program.

In accordance with other embodiments thermostat dialog available under settings in provides status on thermostats and allows them to be readily added and removed. For example thermostat dialog indicates one thermostat identified as HALL is paired with the thermostat account and is ONLINE . In some embodiments selecting the add another thermostat selection in thermostat dialog may urge the thermostat management system to pair with additional thermostats using the automatic pairing functions as previously described. Alternatively selecting the add another thermostat may allow a user to pair an additional thermostat by entering a passcode from the thermostat into the system. illustrates another embodiment of the user interface with weather forecast available under settings . In this example the weather forecast is provided as weekly forecast for the geographic area that the primary enclosure selection is located in this case Palo Alto.

Example setpoints and added to the selectable horizontal bar can be readily understood thereby simplifying the overall scheduling of the thermostat. For example a cooling setpoint of 79 degrees placed at the 8 00 location on the selectable horizontal bar should cause the HVAC to turn on the air conditioner and cool if the temperature exceeds the 79 degree temperature after 8 00 . The subsequent cooling setpoint of 80 degrees at 9 00 should cause the HVAC to turn on the air conditioner and cool only if the temperature then exceeds 80 degrees after 9 00 .

In accordance with another embodiment illustrates a user interface for scheduling a thermostat for a week. Thermostat selection and schedule selection on user interface provides a user access to the weekly schedule . The weekly schedule for the thermostat works similar to the daily schedule illustrated in except there are 7 different selectable horizontal bars in the interface one horizontal bar for each day of the week Monday through Sunday. In the example illustrated in weekly schedule has cooling setpoints at 79 degrees set everyday at 8 clock. A single heating setpoint at 73 degrees is set at 11 00 on Mondays thus making sure the temperature does not get cooler than 73 degrees.

Based on the identified enclosure one embodiment may then display a heating and cooling schedule for the thermostat on the user interface of the computer device as one or more vertically stacked horizontal bars corresponding to one or more days in the heating and cooling schedule for the thermostat. Each horizontal bar includes a range of time in one day measured along a horizontal direction of each horizontal bar in the schedule. For example a horizontal bar at the left most range may start a day at 12 00 midnight or 00 00 on a 24 hour schedule and run to the right until the schedule ends at 11 59 pm or 23 59.

The interface also displays a setpoint selection as a geometric shape located on one of the one or more vertically stacked horizontal bars . In embodiment the setpoint selection has at least one temperature threshold indicated by a value displayed in the center of the geometric shape. Preferably the geometric shape is a round circle or concentric circles however other shapes may also be used. For example a single value such as 70 may indicate a 70 degree threshold while two values such as 62 76 indicates a range associated with the setpoint selection. Depending on the color or colors one embodiment of the setpoint selection indicates a thermal preference for operating an HVAC system. For example a red colored geometric shape may indicate to heat until the temperature threshold associated with the setpoint selection is reached. Two colors such as red and black coupled with two threshold levels such as 62 76 may indicate to heat until a lower threshold of 62 is met and then cool if an upper threshold amount 76 is exceeded.

In a further aspect of the user interface the schedule for heating and cooling may receive a selection on one of the several horizontal bar to interact with one or more setpoint selections at a particular time interval. For example the selection may be from a mouse or other pointing device indicating a selection on the screen of a computer running a thermostat access client and user interface in accordance with the present invention. One embodiment determines if the time interval selected on the horizontal bar already has a setpoint selection. If no setpoint selection exists at the time interval No the selection by the pointing device may indicate to add a setpoint at the time interval of the one horizontal bar. The setpoint selection added may indicate either heating cooling or both and may also specify one or two thresholds for operating the setpoint. A thermal preference for cooling may be indicated by making the geometric shape blue while a thermal preference for heating may be indicated with a geometric shape that is red .

Alternatively if a setpoint exists at the time interval Yes the selection by the pointing device may further indicate to delete the setpoint through an additional indication. Yes For example a right click or double click of a mouse within the thermostat access client in the user interface could indicate that a particular existing setpoint at a time interval on one horizontal bar should be deleted. However if the pointing device does not indicate to delete the setpoint No the selection by the pointing device may instead be used to modify the setpoint along the horizontal bar. For example the user interface may be used to modify the temperature threshold time interval or thermal preference for the set point at the particular time interval and day in the schedule. 

Accordingly various modifications may be made without departing from the spirit and scope of the invention. Indeed various user interfaces for operating thermostats HVACSs and other devices have been provided yet the designs are meant to be illustrative and not limiting as to the scope of the overall invention. While methods and systems have been described for pairing thermostats using autopairing and passcode pairing it is contemplated that these methods and system may be applied to any device on a private network attempting to pair with an account. For example embodiments of the present invention are not limited to network attached thermostats but any device connected to a network such as set top boxes streaming server devices streaming service applications computers mobile phones voice over IP phones or anything that might benefit from an autopairing function in accordance with embodiments of the present invention. In the case of user interfaces numerous flowcharts have been provided representing the operation of these user interfaces yet it is contemplated that the steps presented in association with these interfaces may be interchanged reordered and mixed and remain within the scope of aspects of the present invention. It is to be further appreciated that the term thermostat as used hereinabove and hereinbelow can include thermostats having direct control wires to an HVAC system and can further include thermostats that do not connect directly with the HVAC system but that sense an ambient temperature at one location in an enclosure and cooperatively communicate by wired or wireless data connections with a separate thermostat unit located elsewhere in the enclosure wherein the separate thermostat unit does have direct control wires to the HVAC system. Accordingly the invention is not limited to the above described embodiments but instead is defined by the appended claims in light of their full scope of equivalents.

