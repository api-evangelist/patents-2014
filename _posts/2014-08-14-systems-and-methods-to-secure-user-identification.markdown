---

title: Systems and methods to secure user identification
abstract: A computing apparatus configured to verify a digital signature applied on a set of data received from a user device, including a user ID assigned by a partner system to uniquely identify a user of the user device among customers of the partner system, and a user device identifier identifying the user device. The digital signature is generated via applying a cryptographic one-way hash function on a combination of the set of data and a secret, shared between the computing apparatus and the partner system via a secure communication channel separate from a channel used to receive the set of data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09490985&OS=09490985&RS=09490985
owner: VISA INTERNATIONAL SERVICE ASSOCIATION
number: 09490985
owner_city: San Francisco
owner_country: US
publication_date: 20140814
---
The present application is a continuation application of U.S. patent application Ser. No. 13 623 784 filed Sep. 20 2012 and entitled Systems and Methods to Secure User Identification which claims the benefit of the filing date of Prov. U.S. Pat. App. Ser. No. 61 537 552 filed Sep. 21 2011 and entitled Systems and Methods to Secure User Identification the entire disclosures of which applications hereby are incorporated herein by reference.

At least some embodiments of the present disclosure relate to data communications security in general and more specifically but not limited to secure referral of a user from one computing apparatus to another.

Digital signatures have been used to show the authenticity of a digital message transmitted from one computing device to another computing device. For example digital signatures can be used to detect forgery or tampering in software distribution to ensure that the software is from the true provider of the software and the software has not been modified during the transmission from the software provider to the software user.

In one embodiment a digital signature is generated based on the content of the communication such as the software to be distributed such that if the content of the communication is modified the digital signature generated from the original content of the communication would not match with the content of the modified communication. The digital signature is also generated based on a secret without which it is very difficult or computationally infeasible to generate a proper digital signature for a given communication. Thus a properly verified digital signature indicates that the communication has not been modified and the communication is from the entity that is in possession of the secret.

In one embodiment a communication system is configured to allow a user device to communicate with at least two server apparatuses separately. The user device may communicate with a first server apparatus to identify information about the user of the user device e.g. enroll the user in a program in the first server . The first server apparatus may verify and or validate the information about the user and then refer the user to a second server apparatus for related services. The user device is configured to transmit the information about the user to the second apparatus to receive the related services.

In one embodiment the communication system is configured to ensure that when user information received from the user device is same as the user information known to the first server apparatus e.g. having been verified and or validated by the first server apparatus the user information has not been tempered with in providing to the second server apparatus and the user of the user device is a known user of the first server apparatus.

In a user device is configured to communicate with a server A and a server B separately. After communicating with the user device to identify the user information the server A is configured to assign a user ID to represent the user of the user device and the user information of the user. The user ID allows the user device to access services provided on the server A in relation with the user information .

For example the user information may identify an account of the user a communication reference of the user an identifier of the user device etc. The server A may authenticate the user verify and or validate at least some of the user information before enrolling the user for the services provided by the server A . The user ID represents the user as enrolled in the services of the server A . The server A is configured to assign different user IDs e.g. to uniquely identify different users enrolled for the services provided by the server A . In one embodiment the server A associates different user IDs e.g. with different sets of user information such that a user ID uniquely identify a set of user information corresponding to a user enrolled for the services provided by the server A .

In one embodiment after the user device is assigned the user ID the user device may visit the server B which is separate from the server A for services related to those provided by server A . The user device is configured to provide the user information to the server B to obtain the related services from the server B .

For example the server A is configured in one embodiment to instruct the user device to obtain a service from the server B .

For example the user device is configured in one embodiment to visit the server B for a related service when certain pre determined conditions are satisfied.

For example the user device is configured in one embodiment as a mobile computing device such as a mobile phone a smart phone a personal media player a personal digital assistant a tablet computer a notebook computer etc. In one embodiment the user device is configured via an application running inside the user device to access services provided by the servers and . To receive the services the user of the user device is prompted to enroll with the server A and the server B is configured to provide services to users who have completed enrollment with the server A .

In one embodiment prior to the user device visiting the server B e.g. transmitting a request to the server B for a service the user device is configured to request a user identifier from the server A to represent the user of the user device . In response the server A is configured to generate a digital signature on a dataset including the user information and the user ID and combine the digital signature with the user ID to generate the user identifier in response to the request from the user device . The user device then receives the user identifier as the response to the request .

In one embodiment the user device is configured to separately store at least a portion of the user information previously communicated to and or from the server A . Thus the user device does not have to receive the user information back from the server A together with the user identifier in the response to the request .

In one embodiment the user information optionally includes a portion that is assigned and or provided by the server A and provided to the user device prior to the server A assigning the user ID to the user of the user device . Examples of such information include an account number a nick name an identifier of service s enrolled etc.

In one embodiment the user information optionally includes a portion that is explicitly submitted by the user of the user device to the server A to identify the user. Examples of such information include a street address a residence address a mailing address a communication reference for receiving communications on the user device such as a mobile phone number an email address etc.

In one embodiment the user information optionally includes a portion that can be automatically detected from communications received from the user device such as an internet protocol IP address of the user device a Media Access Control address MAC address of the user device an hardware identifier of the user device etc.

In the user device is configured to visit the server B e.g. by sending an HTTP request or a request in other communications protocols using the user identifier and the user information to identify the user of the user device . The server B is configured to determine whether the visit is to be allowed or rejected based on the user identifier .

In one embodiment the server B is configured to recover from the user identifier the user ID assigned by the server A and the digital signature signed by the server A on the dataset in possession of the server A about the user and or the user device including the user ID and the user information . The server B is configured to validate the user ID recovered from the user identifier and the user information received from the user device in the visit against the digital signature recovered from the user identifier .

In one embodiment if the validation of the user ID and the user information against the digital signature is successful the visit from the user device is accepted otherwise the visit is rejected.

The successful validation of the user ID and the user information indicates that 1 the user of the user device is one of enrolled users of server A uniquely identified by the user ID 2 the user ID is associated with the user information 3 there is no data tempering in identifying the association between the user ID and the user information and 4 the user ID and the user information as a whole received from the user device are the same as what is known to the server A without any modification.

In one embodiment if the validation of the user ID and the user information against the digital signature is successful the server B is configured to provide services to the user device based on the user ID and or the user information .

In one embodiment the server A is configured to digitally sign the dataset including the user information and the user ID using the secret .

In one embodiment the secret is used in a symmetric key encryption scheme to generate the digital signature . The secret is shared between the server A and the server B for the verification of the digital signature .

For example in one embodiment the server A is configured to generate the dataset by combining at least the user information the user ID and the secret in a predetermined format and a cryptographic one way hash function such as that based on SHA 256 designed by the National Security Agency NSA and published in 2001 by the National Institute of Standards and Technology NIST as a U.S. Federal Information Processing Standard can be applied to the dataset to generate the digital signature . To verify the digital signature the server B is configured to re create the digital signature based on the user information and the user ID received at the server B and compare the re created digital signature with the digital signature recovered from the user identifier for verification.

For example the secret may be included as a portion of the dataset to generate the hash of the dataset that is based at least in part on the secret .

For example the secret may be used as an encryption key to encrypt a set of data including the user information and the user ID to generate the encrypted dataset on which the one way hash function is applied to generate the digital signature . To verify the digital signature the server B is configured to reconstruct a corresponding set of data including the user information received from the user device and the user ID recovered from the user identifier encrypt the reconstructed set of data using the same secret shared between the server A and the server B and apply the same one way hash function to generate a reconstructed digital signature . The server B is configured to compare the reconstructed digital signature with the digital signature recovered from the user identifier for verification.

In one embodiment the dataset including the user information and the user ID is hashed using a cryptographic one way hash function and the secret is used as an encryption key to encrypt the hash result to generate the digital signature . To verify the digital signature the server B is configured to recreate the digital signature using the same secret in a symmetric key encryption scheme for verification or to decrypt the digital signature recovered from the user identifier to determine the decrypted hash for comparison with a corresponding hash generated from the corresponding received set of data including the user information received from the user device and the user ID recovered from the user identifier . The encryption and decryption of the digital signature can be implemented with a symmetric key encryption scheme using the same secret shared between the server A and the server B or using an asymmetric key encryption scheme that uses a private key and a public key. In the asymmetric key encryption scheme the secret is used as a private key in performing encryption on the hash generated by the server A and the server B is configured to use a public key corresponding to the private key to decrypt the digital signature recovered from the user identifier for comparison with a corresponding hash generated by the server B from at least the user information received from the user device and the user ID recovered from the user identifier . When the asymmetric key encryption scheme is used the server A does not have to reveal the secret to the server B .

In one embodiment the user ID and the digital signature generated by the server A are combined as a single unit of data representing the user identifier . Alternatively the user device may receive the user ID and the digital signature as two separate units of data from the server A and provide the two separate units of data to the server B to equivalently present the user identifier . In one embodiment the user device is is configured to receive the user ID and the digital signature as two separate units of data from the server A and combine the user ID and the digital signature in a predetermined format to generate the user identifier as a single unit of data provided in the visit .

In one embodiment the digital signature is valid for a limited time period. For example the server A is configured to include an indication of the current time in the dataset for which the digital signature is created. After recovering the user ID and the digital signature the server B is configured to identify based on the time limit one or more possible values for the time indicator used by the server A in generating the digital signature and verify the digital signature based on the one or more possible values for the time indicator. If one of the possible values leads to a successful verification the visit can be accepted. If none of the possible values leads to a successful verification the visit can be rejected.

In one embodiment each of the user device the server A and the server B is implemented as a computing device having at least one processor and memory storing instructions configured to instruct the at least one processors to perform the operations described herein. In one embodiment the computing device can be implemented using one or more data processing systems illustrated in .

In one embodiment a computing apparatus is configured to use a hash of a combination of a user identifier a secret information identifying a user device and or other information to verify the integrity of a request from a user redirected from a partner system such as a merchant aggregator configured to enroll merchants and users for services that are based on transaction data of the enrolled merchants and users. Details and examples in one embodiment regarding securing user identification are provided in the section entitled USER IDENTIFICATION. 

In one embodiment a portal e.g. shown in has a mobile enrollment web page that can be accessed with an inbound query string received from the mobile device of a user e.g. shown in for enrollment in connection with a merchant aggregator e.g. shown in or other partner systems .

In one embodiment the query string is configured to allow the portal unambiguously verify that the request associated with the inbound query string is originated from the specific partner e.g. merchant aggregator and to prevent unauthorized use of the mobile enrollment web page that is designed for activities associated with the respective partner e.g. the merchant aggregator .

In one embodiment the partner system e.g. the merchant aggregator is configured to provide certain information about the user using a query string via redirecting the point of interaction of the user to visit the portal using the query string. Information provided by the partner system can be used to pre fill some fields in a page provided by the portal saving effort for the user in using the page e.g. for enrolling in a program to receive messages delivered in real time with the processing of the transactions by the transaction handler .

For example the query string technique can be designed for use by a user who is accessing the enrollment site from within the corresponding site of the merchant aggregator in one embodiment. Prior to redirecting the user to the portal the merchant aggregator authenticates the user for a session the merchant aggregator collects information about the user and when the merchant aggregator has the appropriate permission to share the previously collected information with the portal the merchant aggregator provides the portal with the information about the user previously collected by the merchant aggregator .

In one embodiment the portal requires that the mobile enrollment web page s be accessed from a mobile cellular phone. When the inbound web page request e.g. an HTTP request visiting the mobile enrollment web page is from an individual cellular phone the incoming request will show many different originating IP addresses due to the proxy coverage of cell phones by the cell carrier. Further it is possible to generate the web page request via other devices in the web at large. As a result it is difficult to know whether the access to the mobile enrollment web page designed for the partner system e.g. the merchant aggregator is actually coming from one of the customers of the partner system in which case access should be granted or coming from an unauthorized source in which case access should be denied .

In one embodiment a digital signature technique is used to check the inbound query string to the mobile enrollment page to verify that 1 the inbound request is from a specific customer of the partner system e.g. the merchant aggregator 2 the customer is known to the partner system e.g. the merchant aggregator beforehand and 3 that the inbound request is NOT from an unauthorized source.

In one embodiment prior to issuing an HTTPS request directed to the mobile enrollment page with the query string attached the partner system e.g. the merchant aggregator is configured to obtain an Enrollee User ID EUID and used as one of the fields in the query string. The query string is created via combining multiple fields and digitally signing the combined fields using a cryptographic hash function e.g. SHA 256 designed by the National Security Agency NSA and published in 2001 by the National Institute of Standards and Technology NIST as a U.S. Federal Information Processing Standard and a shared passphrase known to the partner system e.g. the merchant aggregator and the portal . The digital signature is combined with the ID used in the partner system e.g. the merchant aggregator to uniquely identify the user among users of the partner system. The combined ID and digital signature are used in the inbound query string for the mobile enrollment page. When the portal receives the inbound query string embedded in the web request to visit the mobile enrollment page the portal is configured to recreate the digital signature e.g. using the same cryptographic hash function and passphrase and check if the recreated digital signature matches the digital signature received in the query string. If the digital signatures match with each other the query string is accepted otherwise the query string is rejected. Thus the Enrollee User ID EUID including the ID used in the partner system e.g. the merchant aggregator to uniquely identify the user among users of the partner system and the digital signature for the plurality of fields provides strong validation of 

iii. the specific user in question is a bona fide customer of the partner system e.g. the merchant aggregator .

In one embodiment the Enrollee User ID EUID is created via a passphrase that is a secret shared between the merchant aggregator and the portal . For example the operator of the portal may provide the passphrase via an out of band channel to the operation of the merchant aggregator prior to initiating of the generation of EUIDs. In one embodiment the passphrase is kept secure and available only to the server software installed on the merchant aggregator and the portal which are configured to generate and verify the digital signatures . From time to time a new passphrase is generated and delivered to replace the old passphrase. In one embodiment the passphrase is a one time code e.g. used only once for the generation of one EUID .

In one embodiment a mobile application installed on the mobile phone of the user is configured to request the EUID from the server software running on the merchant aggregator as part of preparing the query string used to pre populate the enrollment form. The request for the EUID transmitted from the mobile application to the merchant aggregator includes the user ID assigned by the merchant aggregator and used by the mobile application to uniquely identify the user of the mobile application among customers of the merchant aggregator . In one embodiment the request for the EUID further identifies the phone number of the mobile phone of the user on which the mobile application resides. Alternatively or in combination the request for the EUID can include any other fields from the query string that are to be securely verified by the portal . In one embodiment EUID constructed in real time in response to the request to account for changes in the source data attributes that can occur at any time.

In one embodiment in response to the request for the EUID from the mobile application the merchant aggregator is configured e.g. via cryptographic software and or hardware to combine the user ID the mobile phone number and the passphrase in a predetermined order and format into a single contiguous string then calculate a one way hash of string using a cryptographic hash function e.g. SHA 256 . In one embodiment the result of the one way hash is a 256 bit 32 byte integer value that is converted to a string and appended to the user ID and returned to the mobile application as the EUID being requested.

In one embodiment the mobile application is configured to insert the received EUID into the query string at the appropriate location specified by the query string interface for the EUID. In one embodiment the query string includes the mobile phone number per the query string specification and is sent to the portal as part of the inbound https request to the mobile enrollment form.

In one embodiment after the portal receives the inbound query string containing the EUID the portal is configured to reconstruct the EUID by obtaining the user ID and mobile phone number from the query string combine the user ID with the mobile phone number the mobile phone number obtained from the query string with the shared secret that was transmitted out of band in relation with the query string according to the same predetermined order and format into a single contiguous string then calculate a one way hash of string using the same cryptographic hash function e.g. SHA 256 as used by the merchant aggregator . The resulting digital signature is compared with the corresponding digital signature obtained from the EUID received via the query string. If the two digital signatures match with each other the EUID and the query string is accepted.

In one embodiment the EUID is generated on the merchant aggregator not on the mobile application running on the mobile device of a user which device is not fully under the control of the merchant aggregator .

In one embodiment the portal includes a passphrase generator that provides the passphrase to the merchant aggregator using a secure communication channel separate from the channel used to receive the query string from the mobile application.

In one embodiment the passphrase is stored in a secure database of the portal and a secure server environment on the merchant aggregator and available only to authorized personnel.

In the user ID and the hash is combined in a predetermined format to generate the user identifier . The user ID and the hash can be individually identified from the user identifier . The user identifier is provided from the merchant aggregator to the user device that is identified by the user device ID to access the portal .

For example in one embodiment the user device is a mobile phone and the user device ID is a mobile phone number of the mobile phone.

In the portal is configured to use the user identifier to verify that the request is originated from the merchant aggregator . After receiving the user identifier from the user device in the request the portal extracts the user ID and the hash embedded in the user identifier determine other corresponding information such as the user device ID the secret etc. and combine the corresponding set of data in the same predetermined format as used by the merchant aggregator to form a string and apply a cryptographic one way hash function to re generate the hash based on received information e.g. user ID user device ID and the secret . If the regenerated hash is the same as the hash provided in the user identifier the request and or the user identifier is accepted otherwise the request and or the user identifier is rejected.

In a third party e.g. the user device any unauthorized persons does not have the secret that is shared by the merchant aggregator and the portal via out of band communication. Thus a third party is able to provide the hash that can be recreated by the portal and therefore a match hash recreated by the portal indicates that the user identifier is from the merchant aggregator .

Further in the use of the cryptographic one way hash function prevents any tempering with the user ID . If the data such as the user ID user device ID and or other data fields used to create the hash is modified upon arrival at the portal the hash recreated with the modified data would not match the hash provided in the user identifier and without the secret the third party cannot modify the hash in the user identifier to cause the portal to recreate the same hash from the modified data.

Thus the system illustrated in allows a secure redirecting of a user from the merchant aggregator to the portal .

In one embodiment the user device ID is transmitted from the merchant aggregator to the portal via the request redirected to the portal . The data used to create the hash may include other information to be passed from the merchant aggregator to the portal such as the email residence and or mailing address of the user .

In one embodiment the user device ID is not directly transmitted from the merchant aggregator to the portal . For example the query string may not include the phone number of the mobile phone and the portal is configured to determine the phone number based on the origin of the request. Thus when the request is not received from the mobile phone at the corresponding phone number the regenerated hash does not the hash extracted from the user identifier .

In one embodiment the computing apparatus has at least one microprocessor and a memory storing instructions configured to instruct the at least one microprocessor to perform operations. The computing apparatus system includes at least one of the portal the merchant aggregator the user device the server A the server B the data warehouse the media controller the message broker and the transaction handler each of which can be implemented using one or more data processing systems as illustrated in . In one embodiment the user device includes a point of interaction as discussed in the section entitled POINT OF INTERACTION .

Some details about the system in one embodiment are provided in the sections entitled SYSTEM CENTRALIZED DATA WAREHOUSE and HARDWARE. 

In one embodiment transaction data such as records of transactions made via credit accounts debit accounts prepaid accounts bank accounts stored value accounts and the like is processed to provide information for various services such as reporting benchmarking advertising content or offer selection customization personalization prioritization etc. In one embodiment users are required to enroll in a service program and provide consent to allow the system to use related transaction data and or other data for the related services. The system is configured to provide the services while protecting the privacy of the users in accordance with the enrollment agreement and user consent.

In one embodiment an advertising network is provided based on a transaction handler to present personalized or targeted advertisements offers on behalf of advertisers. A computing apparatus of or associated with the transaction handler uses the transaction data and or other data such as account data merchant data search data social networking data web data etc. to develop intelligence information about individual customers or certain types or groups of customers. The intelligence information can be used to select identify generate adjust prioritize and or personalize advertisements offers to the customers. In one embodiment the transaction handler is further automated to process the advertisement fees charged to the advertisers using the accounts of the advertisers in response to the advertising activities.

In one embodiment the computing apparatus is to generate trigger records for a transaction handler to identify authorization requests that satisfy the conditions specified in the trigger records identify communication references of the users associated with the identified authorization requests and use the communication references to target real time messages at the users in parallel with the transaction handler providing responses to the respective authorization requests. Details in one embodiment regarding the generation and delivery of messages in real time with the processing of transactions are provided in the section entitled REAL TIME MESSAGES. 

In one embodiment the computing apparatus is configured to provide transaction information about transactions between enrolled merchants and enrolled account holders to a merchant aggregator which enrolls the merchants and account holders for enhanced communications with merchants and account holders. The transaction information is provided in real time or concurrently with the processing of the respective transaction requests at the transaction handler. Details and examples in one embodiment regarding the communication via the merchant aggregator are provided in the section entitled MERCHANT AGGREGATOR. 

In one embodiment the computing apparatus correlates transactions with activities that occurred outside the context of the transaction such as online advertisements presented to the customers that at least in part cause offline transactions. The correlation data can be used to demonstrate the success of the advertisements and or to improve intelligence information about how individual customers and or various types or groups of customers respond to the advertisements.

In one embodiment the computing apparatus correlates or provides information to facilitate the correlation of transactions with online activities of the customers such as searching web browsing social networking and consuming advertisements with other activities such as watching television programs and or with events such as meetings announcements natural disasters accidents news announcements etc.

In one embodiment the correlation results are used in predictive models to predict transactions and or spending patterns based on activities or events to predict activities or events based on transactions or spending patterns to provide alerts or reports etc.

In one embodiment a single entity operating the transaction handler performs various operations in the services provided based on the transaction data. For example in the presentation of the personalized or targeted advertisements the single entity may perform the operations such as generating the intelligence information selecting relevant intelligence information for a given audience selecting identifying adjusting prioritizing personalizing and or generating advertisements based on selected relevant intelligence information and facilitating the delivery of personalized or targeted advertisements etc. Alternatively the entity operating the transaction handler cooperates with one or more other entities by providing information to these entities to allow these entities to perform at least some of the operations for presentation of the personalized or targeted advertisements.

In one embodiment the system further includes a correlator to correlate user specific advertisement data with transactions resulting from the user specific advertisement data . The correlation results can be used by the profile generator to improve the transaction profiles .

In one embodiment the transaction profiles are generated from the transaction data in a way as illustrated in . For example in an aggregated spending profile is generated via the factor analysis and cluster analysis to summarize the spending patterns behaviors reflected in the transaction records .

In one embodiment a data warehouse as illustrated in is coupled with the transaction handler to store the transaction data and other data such as account data transaction profiles and correlation results . In a portal is coupled with the data warehouse to provide data or information derived from the transaction data in response to a query request from a third party or as an alert or notification message.

In the transaction handler is coupled between an issuer processor in control of a consumer account and an acquirer processor in control of a merchant account . An account identification device is configured to carry the account information that identifies the consumer account with the issuer processor and provide the account information to the transaction terminal of a merchant to initiate a transaction between the user and the merchant.

In one embodiment the transaction data relates to financial transactions processed by the transaction handler and the account data relates to information about the account holders involved in the transactions. Further data such as merchant data that relates to the location business products and or services of the merchants that receive payments from account holders for their purchases can be used in the generation of the transaction profiles .

In one embodiment the financial transactions are made via an account identification device such as financial transaction cards e.g. credit cards debit cards banking cards etc. the financial transaction cards may be embodied in various devices such as plastic cards chips radio frequency identification RFID devices mobile phones personal digital assistants PDAs etc. and the financial transaction cards may be represented by account identifiers e.g. account numbers or aliases . In one embodiment the financial transactions are made via directly using the account information without physically presenting the account identification device .

In one embodiment the transaction handler maintains a centralized data warehouse organized around the transaction data . For example the centralized data warehouse may include and or support the determination of spending band distribution transaction count and amount merchant categories merchant by state cardholder segmentation by velocity scores and spending within merchant target competitive set and cross section.

In one embodiment the centralized data warehouse provides centralized management but allows decentralized execution. For example a third party strategic marketing analyst statistician marketer promoter business leader etc. may access the centralized data warehouse to analyze customer and shopper data to provide follow up analyses of customer contributions to develop propensity models for increased conversion of marketing campaigns to develop segmentation models for marketing etc. The centralized data warehouse can be used to manage advertisement campaigns and analyze response profitability.

In one embodiment the centralized data warehouse includes merchant data e.g. data about sellers customer business data e.g. data about buyers and transaction records between sellers and buyers over time. The centralized data warehouse can be used to support corporate sales forecasting fraud analysis reporting sales customer relationship management CRM business intelligence credit risk prediction and analysis advanced authorization reporting merchant benchmarking business intelligence for small business rewards etc.

In one embodiment the transaction data is combined with external data such as surveys benchmarks search engine statistics demographics competition information emails etc. to flag key events and data values to set customer merchant data or event triggers and to drive new transactions and new customer contacts.

In the profile generator generates transaction profiles based on the transaction data the account data and or other data such as non transactional data wish lists merchant provided information address information information from social network websites information from credit bureaus information from search engines and other examples discussed in U.S. patent application Ser. No. 12 614 603 filed Nov. 9 2009 published as U.S. Pat. App. Pub. No. 2011 0054981 and entitled Analyzing Local Non Transactional Data with Transactional Data in Predictive Models the disclosure of which is hereby incorporated herein by reference.

In one embodiment the transaction profiles provide intelligence information on the behavior pattern preference propensity tendency frequency trend and budget of the user in making purchases. In one embodiment the transaction profiles include information about what the user owns such as points miles or other rewards currency available credit and received offers such as coupons loaded into the accounts of the user . In one embodiment the transaction profiles include information based on past offer coupon redemption patterns. In one embodiment the transaction profiles include information on shopping patterns in retail stores as well as online including frequency of shopping amount spent in each shopping trip distance of merchant location retail from the address of the account holder s etc.

In one embodiment the transaction handler provides at least part of the intelligence for the prioritization generation selection customization and or adjustment of an advertisement for delivery within a transaction process involving the transaction handler . For example the advertisement may be presented to a customer in response to the customer making a payment via the transaction handler .

Some of the transaction profiles are specific to the user or to an account of the user or to a group of users of which the user is a member such as a household family company neighborhood city or group identified by certain characteristics related to online activities offline purchase activities merchant propensity etc.

In one embodiment the profile generator generates and updates the transaction profiles in batch mode periodically. In other embodiments the profile generator generates the transaction profiles in real time or just in time in response to a request received in the portal for such profiles.

In one embodiment the transaction profiles include the values for a set of parameters. Computing the values of the parameters may involve counting transactions that meet one or more criteria and or building a statistically based model in which one or more calculated values or transformed values are put into a statistical algorithm that weights each value to optimize its collective predictiveness for various predetermined purposes.

Further details and examples about the transaction profiles in one embodiment are provided in the section entitled AGGREGATED SPENDING PROFILE. 

In one embodiment the transaction data is analyzed in connection with non transactional data to generate transaction profiles and or to make predictive models.

In one embodiment transactions are correlated with non transactional events such as news conferences shows announcements market changes natural disasters etc. to establish cause and effect relationships to predict future transactions or spending patterns. For example non transactional data may include the geographic location of a news event the date of an event from an events calendar the name of a performer for an upcoming concert etc. The non transactional data can be obtained from various sources such as newspapers websites blogs social networking sites etc.

In one embodiment when the cause and effect relationships between the transactions and non transactional events are known e.g. based on prior research results domain knowledge expertise the relationships can be used in predictive models to predict future transactions or spending patterns based on events that occurred recently or are happening in real time.

In one embodiment the non transactional data relates to events that happened in a geographical area local to the user that performed the respective transactions. In one embodiment a geographical area is local to the user when the distance from the user to locations in the geographical area is within a convenient range for daily or regular travel such as 20 50 or 100 miles from an address of the user or within the same city or zip code area of an address of the user . Examples of analyses of local non transactional data in connection with transaction data in one embodiment are provided in U.S. patent application Ser. No. 12 614 603 filed Nov. 9 2009 published as U.S. Pat. App. Pub. No. 2011 0054981 and entitled Analyzing Local Non Transactional Data with Transactional Data in Predictive Models the disclosure of which is hereby incorporated herein by reference.

In one embodiment the non transactional data is not limited to local non transactional data. For example national non transactional data can also be used.

In one embodiment the transaction records are analyzed in frequency domain to identify periodic features in spending events. The periodic features in the past transaction records can be used to predict the probability of a time window in which a similar transaction will occur. For example the analysis of the transaction data can be used to predict when a next transaction having the periodic feature will occur with which merchant the probability of a repeated transaction with a certain amount the probability of exception the opportunity to provide an advertisement or offer such as a coupon etc. In one embodiment the periodic features are detected through counting the number of occurrences of pairs of transactions that occurred within a set of predetermined time intervals and separating the transaction pairs based on the time intervals. Some examples and techniques for the prediction of future transactions based on the detection of periodic features in one embodiment are provided in U.S. Pat. App. Pub. No. 2010 0280882 entitled Frequency Based Transaction Prediction and Processing the disclosure of which is hereby incorporated herein by reference.

Techniques and details of predictive modeling in one embodiment are provided in U.S. Pat. Nos. 6 119 103 6 018 723 6 658 393 6 598 030 and 7 227 950 the disclosures of which are hereby incorporated herein by reference.

In one embodiment offers are based on the point of service to offeree distance to allow the user to obtain in person services. In one embodiment the offers are selected based on transaction history and shopping patterns in the transaction data and or the distance between the user and the merchant. In one embodiment offers are provided in response to a request from the user or in response to a detection of the location of the user . Examples and details of at least one embodiment are provided in U.S. Pat. App. Pub. No. 2008 0319843 entitled Supply of Requested Offer Based on Point of Service to Offeree Distance U.S. Pat. App. Pub. No. 2008 0300973 entitled Supply of Requested Offer Based on Offeree Transaction History U.S. Pat. App. Pub. No. 2009 0076896 entitled Merchant Supplied Offer to a Consumer within a Predetermined Distance U.S. Pat. App. Pub. No. 2009 0076925 entitled Offeree Requested Offer Based on Point of Service to Offeree Distance and U.S. Pat. App. Pub. No. 2010 0274627 entitled Receiving an Announcement Triggered by Location Data the disclosures of which applications are hereby incorporated herein by reference.

In an advertisement selector prioritizes generates selects adjusts and or customizes the available advertisement data to provide user specific advertisement data based at least in part on the user specific profile . The advertisement selector uses the user specific profile as a filter and or a set of criteria to generate identify select and or prioritize advertisement data for the user . A media controller delivers the user specific advertisement data to the point of interaction for presentation to the user as the targeted and or personalized advertisement.

In one embodiment the user data includes the characterization of the context at the point of interaction . Thus the use of the user specific profile selected using the user data includes the consideration of the context at the point of interaction in selecting the user specific advertisement data .

In one embodiment in selecting the user specific advertisement data the advertisement selector uses not only the user specific profile but also information regarding the context at the point of interaction . For example in one embodiment the user data includes information regarding the context at the point of interaction and the advertisement selector explicitly uses the context information in the generation or selection of the user specific advertisement data .

In one embodiment the advertisement selector may query for specific information regarding the user before providing the user specific advertisement data . The queries may be communicated to the operator of the transaction handler and in particular to the transaction handler or the profile generator . For example the queries from the advertisement selector may be transmitted and received in accordance with an application programming interface or other query interface of the transaction handler the profile generator or the portal of the transaction handler .

In one embodiment the queries communicated from the advertisement selector may request intelligence information regarding the user at any level of specificity e.g. segment level individual level . For example the queries may include a request for a certain field or type of information in a cardholder s aggregated spending profile . As another example the queries may include a request for the spending level of the user in a certain merchant category over a prior time period e.g. six months .

In one embodiment the advertisement selector is operated by an entity that is separate from the entity that operates the transaction handler . For example the advertisement selector may be operated by a search engine a publisher an advertiser an ad network or an online merchant. The user specific profile is provided to the advertisement selector to assist in the customization of the user specific advertisement data .

In one embodiment advertising is targeted based on shopping patterns in a merchant category e.g. as represented by a Merchant Category Code MCC that has high correlation of spending propensity with other merchant categories e.g. other MCCs . For example in the context of a first MCC for a targeted audience a profile identifying second MCCs that have high correlation of spending propensity with the first MCC can be used to select advertisements for the targeted audience.

In one embodiment the aggregated spending profile is used to provide intelligence information about the spending patterns preferences and or trends of the user . For example a predictive model can be established based on the aggregated spending profile to estimate the needs of the user . For example the factor values and or the cluster ID in the aggregated spending profile can be used to determine the spending preferences of the user . For example the channel distribution in the aggregated spending profile can be used to provide a customized offer targeted for a particular channel based on the spending patterns of the user .

In one embodiment mobile advertisements such as offers and coupons are generated and disseminated based on aspects of prior purchases such as timing location and nature of the purchases etc. In one embodiment the size of the benefit of the offer or coupon is based on purchase volume or spending amount of the prior purchase and or the subsequent purchase that may qualify for the redemption of the offer. Further details and examples of one embodiment are provided in U.S. Pat. App. Pub. No. 2008 0201226 entitled Mobile Coupon Method and Portable Consumer Device for Utilizing same the disclosure of which is hereby incorporated herein by reference.

In one embodiment conditional rewards are provided to the user and the transaction handler monitors the transactions of the user to identify redeemable rewards that have satisfied the respective conditions. In one embodiment the conditional rewards are selected based on transaction data . Further details and examples of one embodiment are provided in U.S. Pat. App. Pub. No. 2008 0082418 entitled Consumer Specific Conditional Rewards the disclosure of which is hereby incorporated herein by reference. The techniques to detect the satisfied conditions of conditional rewards can also be used to detect the transactions that satisfy the conditions specified to locate the transactions that result from online activities such as online advertisements searches etc. to correlate the transactions with the respective online activities.

Further details about targeted offer delivery in one embodiment are provided in U.S. Pat. App. Pub. No. 2010 0030644 entitled Targeted Advertising by Payment Processor History of Cashless Acquired Merchant Transaction on Issued Consumer Account and in U.S. Pat. App. Pub. No. 2011 0035280 entitled Systems and Methods for Targeted Advertisement Delivery the disclosures of which applications are hereby incorporated herein by reference.

In one embodiment the transaction handler uses the account data to store information for third party loyalty programs. The transaction handler processes payment transactions made via financial transaction cards such as credit cards debit cards banking cards etc. and the financial transaction cards can be used as loyalty cards for the respective third party loyalty programs. Since the third party loyalty programs are hosted on the transaction handler the consumers do not have to carry multiple separate loyalty cards e.g. one for each merchant that offers a loyalty program and the merchants do not have to incur a large setup and investment fee to establish the loyalty program. The loyalty programs hosted on the transaction handler can provide flexible awards for consumers retailers manufacturers issuers and other types of business entities involved in the loyalty programs. The integration of the loyalty programs into the accounts of the customers on the transaction handler allows new offerings such as merchant cross offerings or bundling of loyalty offerings.

In one embodiment an entity operating the transaction handler hosts loyalty programs for third parties using the account data of the users e.g. 101 . A third party such as a merchant retailer manufacturer issuer or other entity that is interested in promoting certain activities and or behaviors may offer loyalty rewards on existing accounts of consumers. The incentives delivered by the loyalty programs can drive behavior changes without the hassle of loyalty card creation. In one embodiment the loyalty programs hosted via the accounts of the users e.g. 101 of the transaction handler allow the consumers to carry fewer cards and may provide more data to the merchants than traditional loyalty programs.

The loyalty programs integrated with the accounts of the users e.g. 101 of the transaction handler can provide tools to enable nimble programs that are better aligned for driving changes in consumer behaviors across transaction channels e.g. online offline via mobile devices . The loyalty programs can be ongoing programs that accumulate benefits for customers e.g. points miles cash back and or programs that provide one time benefits or limited time benefits e.g. rewards discounts incentives .

In one embodiment a third party loyalty program of the loyalty benefit offeror provides the user identified by the account identifier with benefits such as discounts rewards incentives cash back gifts coupons and or privileges.

In one embodiment the association between the account identifier and the loyalty benefit offeror in the account data indicates that the user having the account identifier is a member of the loyalty program. Thus the user may use the account identifier to access privileges afforded to the members of the loyalty program such as rights to access a member only area facility store product or service discounts extended only to members or opportunities to participate in certain events buy certain items or receive certain services reserved for members.

In one embodiment the transaction handler is configured to provide offers from merchants to the user via the payment system making accessing and redeeming the offers convenient for the user . The offers may be triggered by and or tailored to a previous transaction and may be valid only for a limited period of time starting from the date of the previous transaction. If the transaction handler determines that a subsequent transaction processed by the transaction handler meets the conditions for the redemption of an offer the transaction handler may credit the consumer account for the redemption of the offer and or provide a notification message to the user . Further details and examples of one embodiment are provided in U.S. Pat. App. Pub. No. 2010 0114686 entitled Real Time Statement Credits and Notifications the disclosure of which is hereby incorporated herein by reference.

Details on loyalty programs in one embodiment are provided in U.S. Pat. App. Pub. No. 2011 0087530 entitled Systems and Methods to Provide Loyalty Programs the disclosure of which is hereby incorporated herein by reference.

In one embodiment merchants generate stock keeping unit SKU or other specific information that identifies the particular goods and services purchased by the user or customer. The SKU information may be provided to the operator of the transaction handler that processed the purchases. The operator of the transaction handler may store the SKU information as part of transaction data and reflect the SKU information for a particular transaction in a transaction profile or associated with the person involved in the transaction.

When a user shops at a traditional retail store or browses a website of an online merchant an SKU level profile associated specifically with the user may be provided to select an advertisement appropriately targeted to the user e.g. via mobile phones POS terminals web browsers etc. . The SKU level profile for the user may include an identification of the goods and services historically purchased by the user . In addition the SKU level profile for the user may identify goods and services that the user may purchase in the future. The identification may be based on historical purchases reflected in SKU level profiles of other individuals or groups that are determined to be similar to the user . Accordingly the return on investment for advertisers and merchants can be greatly improved.

In one embodiment the user specific profile is an aggregated spending profile that is generated using the SKU level information. For example in one embodiment the factor values correspond to factor definitions that are generated based on aggregating spending in different categories of products and or services. A typical merchant offers products and or services in many different categories.

Details on SKU level profile in one embodiment are provided in U.S. Pat. App. Pat. App. Pub. No. 2011 0093335 entitled Systems and Methods for Advertising Services Based on an SKU Level Profile the disclosure of which is hereby incorporated herein by reference.

In one embodiment the transaction handler is configured to cooperate with the media controller to facilitate real time interaction with the user when the payment of the user is being processed by the transaction handler . The real time interaction provides the opportunity to impact the user experience during the purchase e.g. at the time of card swipe through delivering messages in real time to a point of interaction such as a mobile phone a personal digital assistant a portable computer etc. The real time message can be delivered via short message service SMS email instant messaging or other communications protocols.

In one embodiment the real time message is provided without requiring modifications to existing systems used by the merchants and or issuers.

In one embodiment the media controller is to provide the message to the point of interaction in parallel with the transaction handler providing the response to the authorization request.

In one embodiment the point of interaction receives the message from the media controller in real time with the transaction handler processing the authorization request. In one embodiment the message is to arrive at the point of interaction in the context of the response provided from the transaction handler to the transaction terminal . For example the message is to arrive at the point of interaction substantially at the same time as the response to the authorization request arrives at the transaction terminal or with a delay not long enough to cause the user to have the impression that the message is in response to an action other than the payment transaction. For example the message is to arrive at the point of interaction prior to the user completing the transaction and leaving the transaction terminal or prior to the user leaving the retail location of the merchant operating the transaction terminal .

For example in one embodiment the portal allows the user to register the communication reference in association with the account data such as the account information of the consumer account and the media controller is to use the communication reference to deliver the message to the point of interaction . Examples of the communication reference include a mobile phone number an email address a user identifier of an instant messaging system an IP address etc.

In one embodiment the portal allows merchants and or other parties to define rules to provide offers as real time responses to authorization requests and based on the offer rules the message broker is to generate or instruct the media controller to generate the real time message to provide the offers to the user . For example the offer may include a discount incentive reward rebate gift or other benefit which can be redeemed upon the satisfaction of certain conditions required by the offer rules . In one embodiment based on the offer rules the message broker configures a message by selecting the appropriate message template from an existing message s template s and inserts any relevant data e.g. the communication reference into the selected template then passes the configured message to the media controller which delivers the message to the point of interaction . In one embodiment the message broker or a subsystem is used to manage message templates along with the rules for selecting the appropriate message template from among several potential choices.

In one embodiment the offer rules include offer details targeting rules advertisement campaign details profile mapping creative mapping qualification rules award notify fulfillment rules approvals etc. Creative elements for offers include text images channels approvals etc.

In one embodiment when the offer rules are activated by the merchant or advertiser via the portal the message broker is to generate trigger records for the transaction handler . The transaction handler is to monitor the incoming authorization requests to identify requests that satisfy the conditions specified in the trigger records during the process of the authorization requests and to provide the information about the identified requests to the message broker for the transmission of an appropriate real time message in accordance with the offer rules .

In one embodiment the generation of the trigger records for the transaction handler is in real time with the merchant or advertiser activating the offer rules . Thus the offer rules can be activated and used for the detection of the new authorization requests in real time while the transaction handler continues to process the incoming authorization requests.

In one embodiment the portal provides information about the spending behaviors reflected in the transaction data to assist the merchants or advertisers to target offers or advertisements. For example in one embodiment the portal allows merchants to target the offers based on transaction profiles . For example the offer rules are partially based on the values in a transaction profile such as an aggregated spending profile . In one embodiment the offer rules are partially based on the information about the last purchase of the user from the merchant operating the transaction terminal or another merchant and or the information about the location of the user such as the location determined based on the location of the transaction terminal and or the location of the merchant operating the transaction terminal .

In one embodiment the portal provides transaction based statistics such as merchant benchmarking statistics industry market segmentation etc. to assist merchants and advertisers to identify customers.

Thus the real time messages can be used to influence customer behaviors while the customers are in the purchase mode.

In one embodiment the benefit of the offers can be redeemed via the transaction handler . The redemption of the offer may or may not require the purchase details e.g. SKU level purchase details . Details in one embodiment about redeeming offers via the transaction handler are provided in U.S. Pat. App. Pub. No. 2011 0288918 entitled Systems and Methods for Redemption of Offers the disclosure of which is hereby incorporated herein by reference.

In one embodiment when the authorization request for a purchase indicates that the purchase qualifies the offer for redemption if the purchase corresponding to the authorization request is completed the message broker is to construct a message and use the media controller to deliver the message in real time with the processing of the authorization request to the point of interaction . The message informs the user that when the purchase is completed the transaction handler and or the issuer processor is to provide the benefit of the offer to the user via statement credit or some other settlement value for example points in a registered loyalty program or credit at the point of sale using a digital coupon delivered to the purchaser via mobile phone.

In one embodiment the settlement of the payment transaction corresponding to the authorization request does not occur in real time with the processing of the authorization request. For example the merchant may submit the complete purchases for settlement at the end of the day or in accordance with a predetermined schedule. The settlement may occur one or more days after the processing of the authorization request.

In one embodiment when transactions are settled the settled transactions are matched to the authorization requests to identify offers that are redeemable in view of the settlement. When the offer is confirmed to be redeemable based on a record of successful settlement the message broker is to use the media controller to provide a message to the point of interaction of the user such as the mobile phone of the user . In one embodiment the message is to inform the user of the benefit to be provided as statement credits and or to provide additional offers. In one embodiment the message to confirm the statement credits is transmitted in real time with the completion of the transaction settlement.

In one embodiment the message broker is to determine the identity of the merchant based on the information included in the authorization request transmitted from the transaction terminal to the transaction handler . In one embodiment the identity of the merchant is normalized to allow the application of the offer rules that are merchant specific.

In one embodiment the portal is to provide data insight to merchants and or advertisers. For example the portal can provide the transaction profile of the user audience segmentation information etc.

In one embodiment the portal is to allow the merchants and or advertisers to define and manage offers for their creation fulfillment and or delivery in messages.

In one embodiment the portal allows the merchants and or advertisers to test run and or monitor the offers for their creation fulfillment and or delivery in messages.

In one embodiment the portal provides operation facilities such as onboarding contact management certification file management workflow assistance etc. to assist the merchants and or advertisers to complete the tasks related to the offers .

In one embodiment the portal allows the user to opt in or opt out of the real time message delivery service.

In one embodiment an advertiser or merchant can select an offer fulfillment method from a list of options such as statement credits points gift cards e certificates third party fulfillment etc.

In one embodiment the merchant or advertiser is to use the off the rack transaction profiles available in the data warehouse . In one embodiment the merchant or advertiser can further edit parameters to customize the generation of the transaction profiles and or develop custom transaction profiles from scratch using the portal .

In one embodiment the portal provides a visualization tool to allow the user to see clusters of data based on GeoCodes proximity transaction volumes spending patterns zip codes customers stores etc.

In one embodiment the portal allows the merchant or advertiser to define cells for targeting the customers in the cells based on date time profile attributes map to offer channel creative condition testing etc.

In one embodiment the portal allows the merchant or advertiser to monitor the system health such as the condition of servers files received or sent errors status etc. the throughput by date or range by program by campaign or by global view and aspects of current programs offers campaigns such as offer details package audit reports etc. In one embodiment reporting includes analytics and metrics such as lift conversion category differentials e.g. spending patterns transaction volumes peer groups and reporting by program campaign cell GeoCode proximity ad hoc auditing etc.

In one embodiment the computing apparatus includes at least one of a transaction handler a message broker a media controller a portal and a data warehouse .

In one embodiment real time information about transactions is communicated to a remote computing device such as a merchant aggregator which has a plurality of merchants as clients. The computing device is connected to the portal of the transaction handler a communication network e.g. Internet a wide area network or a dedicate network to receive the real time information and provide services to the merchants and their customers.

In one embodiment the remote computing device such as the merchant aggregator is configured to provide offers to customers e.g. user on behalf of the merchants service loyalty programs on behalf of the merchants and or provide rewards to customers e.g. user for their interaction with the merchants etc. The real time information about the transactions between the merchants and the customers allows the remote computing device to provide new services and improve existing services.

In one embodiment the computing device remotely connected to the portal such as a merchant aggregator is configured to enroll merchants and or customers e.g. user to provide services based on the real time information about transactions between the merchants and the customers e.g. user . However the identifiers used by the portal to identify the enrolled merchants are generally different from merchant identifies used by the transaction handler in processing transactions initiated using the transaction terminals e.g. of the merchants. Thus the identifiers used by the portal to identify the enrolled merchants may not be sufficient to identify the transactions between the enrolled merchants and the enrolled customers.

In one embodiment the portal of the transaction handler is configured to match the identities of the merchants as known to the remote computing device such as the merchant aggregator with the identities of the merchants as known to the transaction handler to facilitate the monitoring of transactions of the merchants and to generate the real time information about the transactions between the respective merchants and enrolled customers e.g. user .

In one embodiment the portal is configured to link a merchant identifier of a merchant as known to the remote computing device to a merchant identifier of the merchant as known to the transaction handler via a transaction made using a transaction terminal of the merchant. Information about the transaction is communicated between the portal and the remote computing device in association with the merchant identifier of the merchant as known to the remote computing device to identify the transaction from the transactions processed the transaction handler and thus link the merchant identifier of the merchant as known to the remote computing device to the merchant identifier used in the identified transaction.

Alternatively or in combination the portal is configured to link the merchant identifier of the merchant as known to the remote computing device to the merchant identifier of the merchant as known to the transaction handler based at least in part on marching attributes of the merchant such as name address business category etc.

For example when a merchant enrolls or registers with the remote computing device to receive the services of the remote computing device the remote computing device is configured to collect information about the merchant such as the business name of the merchant the street address of the merchant the business category of the merchant etc. Such information about the merchant can be matched with the respective merchant information in the data warehouse stored for the merchants as known to the transaction handler . Different data fields such as name address business field may provide partial match for a given merchant identifier of the merchant as known to the remote computing device and a rule engine is configured in one embodiment to rank the degree of match and select one or more top ranked candidate merchant identifiers as used in transactions processed by the transaction handler .

In one embodiment a transaction is initiated on a transaction terminal of a merchant as part of the process to register or enroll the merchant for the services of the remote computing device. The transaction is identified as part of information about the merchant in association with the merchant identifier of the merchant as known to the remote computing device. The merchant identifier used in the transaction is thus linked to the merchant identifier of the merchant as known to the remote computing device. Thus transactions of the merchant can be monitored using the merchant identifier used in the transaction formed as part of the process to register or enroll the merchant.

In one embodiment the transaction formed as part of the process to register or enroll the merchant is performed in a predetermined account. The information about the transaction is provided to the portal to allow the portal to identify a transaction record for the transaction based on attributes such as the date and or time of the transaction the transaction amount an authorization code for the transaction and a message e.g. a pseudo promotional code transmitted to the transaction handler in an authorization request for the transaction etc. The portal is configured to identify the transaction record e.g. of the transaction based on matching the attributes as identified in the information transmitted from the remote computing device to the portal .

In one embodiment the portal is configured to communicate with the remote computing device to determine one or more parameters of the transaction performed on the transaction terminal of a merchant to enroll or register the merchant. Examples of the parameters that can be configured to uniquely identify merchants to be enrolled include transaction amounts pseudo promotional code etc. After one or more parameters are determined to uniquely identify the merchant among a set of merchants currently in the process of being enrolled or registered the transaction terminal is used to initiate the transaction according to the one or more parameters and the transaction handler is configured to monitor transactions being processed to detect the transaction initiate the transaction according to the one or more parameters. In response to the detection of authorization request initiated on the transaction terminal of the merchant for the transaction made according to the one or more parameters the merchant identifier used in the authorization request is extracted and linked to the merchant as registered and or enrolled.

In one embodiment enrollment communication between the portal and the remote computing device includes not only the identification information about the merchant but also the identification information of the transaction terminal used to initiate the transaction designed to register the merchant and or the transaction terminal . In one embodiment information about the transaction terminal includes an identifier of the transaction terminal e.g. a serial number a location of the transaction terminal e.g. a street address of a retail store in which the transaction terminal is deployed a GPS position of the transaction terminal a description of the location of the transaction terminal within a retail store in which a plurality of transaction terminals e.g. of the merchant are located .

In one embodiment multiple transactions are performed to individually identify the transaction terminals of the merchant. Thus the transaction handler can monitor the transactions made using specific transaction terminals of the merchant and or provide information about the transaction terminals on which the monitored transactions are initiated.

In one embodiment when an authorization request for a transaction made using the one or more parameters assigned to uniquely identify the merchant and or the transaction terminal of the merchant is detected the transaction handler is configured to communicate with the portal to provide a response to indicate the detection of the transaction. For example in one embodiment the transaction handler is configured to provide an indication via the authorization response to indicate the recognition of the merchant and or the transaction terminal . For example in one embodiment the portal is configured to provide a message to the remote computing device to indicate the successful detection of transaction associated with the merchant and or the transaction terminal and completion of the registration or enrollment process.

In one embodiment when the merchant aggregator enrolls a new merchant the merchant aggregator provides merchant information to the portal of the transaction handler to request the portal and or the transaction handler to monitor the transactions of the respective merchant .

In one embodiment the merchant information used by the merchant aggregator to identify the merchant may include the business data e.g. corporation data corporation name consumer facing name doing business as names names of affiliates and or subsidiaries addresses and store locations etc. of the merchant . In one embodiment the merchant information further includes information about the acquirer representing the merchant merchant category and or other relevant information that is helpful in identifying the merchant in the transaction processing network having the transaction handler interconnecting acquirer processors e.g. operated by acquirers representing respective merchants and issuer processors e.g. operated by issuers representing respective users of consumer accounts .

For example in one embodiment the merchant aggregator provides the merchant information via a spreadsheet identifying a list of merchants . In the spreadsheet each merchant is identified via the corporate name of the merchant and the consumer facing name of the merchant. For less well known merchants e.g. small businesses the spreadsheet further identifies the name of the acquiring bank that represents the merchant in processing transactions to be processed via the transaction handler . In one embodiment the spreadsheet further includes the desired starting date of monitoring the transactions of the merchants identified in the spreadsheet and the expected ending date of monitoring the transactions of the merchant for the merchant aggregator .

In one embodiment the portal is configured to provide a user interface that allows the merchant aggregator to specify data for the creation of the trigger records associated with an offer campaign. For example the user interface in one embodiment allows the merchant aggregator to create an offer campaign associated with one of the merchants identified in the spreadsheet provided to identify the merchants . To support the offer campaign the user interface is configured to allow the merchant aggregator to specify rules to monitor the transactions of the respect merchant . For example the rules may identify a date to start testing of the monitoring of the transactions of the merchant a date to send the monitoring of the transactions of the merchant for the purpose of the offer campaign a request for a notification of transactions provided in real time as the processing of the authorization requests of the respective transactions of the merchant and or a request for a notification of transactions provided in real time as the processing of the settlement requests of the respective transactions of the merchant . In one embodiment the user interface further allows the merchant aggregator to specify other requirements to select transactions to be monitored such as requirements based on transaction amount transaction time characteristics of the user purchasing from the merchant etc. In one embodiment the user interface further allows the merchant aggregator to specify messages to be transmitted in a way as illustrated in to the respective user transacting with the merchant in response to the transactions detected according to the offer rules.

In one embodiment the portal is configured to correctly identify transactions associated with the enrolled merchant based on the merchant information and calculate the location of the transactions to enable location based services associated with the offer of the merchant .

In one embodiment based on the merchant information the portal is configured to identify one or more merchant IDs that are configured to be used in authorization requests for transactions of the merchant identified by the merchant information . The identified merchant ID is used to generate the trigger records for monitoring the transactions of the merchant identified by the merchant information provided by the merchant aggregator .

In one embodiment the account holders e.g. user are required to enroll with the system to provide the consent for the media controller to send the transaction information of the account holders e.g. user to the merchant aggregator and for the media controller and or the merchant aggregator to send messages to the point of interaction of the user based on the transaction information.

In after user enrollment the user of the consumer account is identified to be associated with a user ID used by the merchant aggregator to identify the user . The user may further provide the communication reference to the merchant aggregator to receive offers rewards notifications alerts etc. The transaction handler is configured to use the trigger records containing the account number of the user to detect the transactions of the user e.g. the transactions between the user between one or more the enrolled merchants e.g. .

To associate the account number with the user ID in one embodiment the account number of the consumer account of the user is identified to the portal during the user enrollment and stored in the data warehouse in association with the user ID .

For example during the user enrollment process the point of interaction e.g. a web browser a mobile phone of the user interacting with the merchant aggregator is redirected in one embodiment from the merchant aggregator to the portal with a reference to the user ID and in response the portal provides a user interface to the point of interaction of the user to specify the account number . After the account number specified by the user is validated and or authenticated e.g. via security code person identification number security questions security devices etc. the account number is associated with the user ID in the data warehouse of the transaction handler .

In one embodiment more than one account number of the consumer accounts of the user can be associated with the single user ID used by the merchant aggregator to represent the user .

In one embodiment the user ID is assigned to the user by the merchant aggregator during the enrollment process. Alternatively the portal may generate and assign the user ID for the user during the enrollment process and provide the user ID to the merchant aggregator to complete the enrollment of the user .

In one embodiment during the enrollment process the user provides the account number to the merchant aggregator which indicates the association between the account number and the user ID to the portal of the transaction handler and the user ID is subsequently used to identify the user is messages to the merchant aggregator . Alternatively the account number may be used directly to identify the user when the real time message from the media controller to the merchant aggregator is transmitted over a secure communication channel.

In one embodiment the trigger record is generated based at least in part on the account number and the merchant ID to monitor the transactions between the user and the merchant . When the authorization request from the transaction terminal of the merchant identifies the account number and the merchant ID as required by the trigger record and satisfies other requirements of the trigger record such as requirements related to the date and time of the transaction the amount of the transaction etc. the transaction handler causes the message broker to generate a message and transmit the message to the merchant aggregator in real time with the processing of the transaction to inform the merchant aggregator of the transaction.

In one embodiment the data warehouse stores the merchant location for the merchant ID associated with the transaction terminal .

In one embodiment in response to the authorization request from the transaction terminal the merchant location of the transaction terminal is determined and included in the real time message generated by the message broker and provided to the merchant aggregator in a generic machine readable format e.g. XML . Based on the information provided in the real time message the merchant aggregator may use the communication reference to communicate offers rewards messages notifications alerts etc. to the point of interaction of the user such as via messages to a mobile phone identified by the communication reference and or a mobile application running on the mobile phone of the user .

In the merchant aggregator is configured to communicate with the point of interaction of the user in response to the real time message from the media controller . Alternatively or in combination the data warehouse may store the communication reference which is used by the media controller to provide one or more separate real time messages related to location based offers to the point of interaction of the user without going through the merchant aggregator .

In one embodiment a merchant may have a number of subsidiaries with different names and locations. In response to the merchant information merchant data related to merchant accounts are searched to identify a set of possible matches to the merchant information which may be further communicated to the merchant aggregator for confirmation. For example in one embodiment each matched merchant ID is augmented with the respective address of the transaction terminals operated by the respective merchant entity and the merchant may further confirm the enrollment of the respective merchant entity. In one embodiment the names and addresses of the merchant information are matched with the names and addresses of the merchant data for merchant accounts to identify the merchant entity that is enrolled via the merchant information .

In one embodiment a plurality of merchant IDs may match the merchant information specified by the merchant aggregator and one or more merchant locations corresponding to the locations of the transaction terminals may associate with a merchant ID in the data warehouse . When the trigger record matches a transaction the merchant location corresponding to the transaction terminal from which the authorization request is received is used for the location based service provided by the merchant aggregator and or the message broker .

In when the merchant enrolls with the merchant aggregator the merchant enrollment data including the merchant information is generated to identify the names and locations of the enrolled merchant . The merchant aggregator uses the merchant identifier to represent the enrolled merchant .

In one embodiment to correlate the merchant identifier with a merchant ID associated with the merchant account the transaction terminal at the enrolled location of the merchant is used to initiate a transaction using a predetermined account number . After the transaction is initiated the acquirer processor connected to the transaction terminal provides the authorization request to the transaction handler which stores the transaction record that includes the predetermined account number the merchant ID the date of the transaction the amount of the transaction the authorization code provided by the transaction handler through the acquirer processor to the transaction terminal for the transaction etc.

In one embodiment the merchant aggregator stores a separate transaction record including certain information about the transaction as identified by the enrolling merchant such as the predetermined account number the date or the time period in which transaction is performed the amount and the authorization code received by the transaction terminal through the acquirer processor and the transaction handler for the transaction etc.

In the portal is configured to match the transaction records and to link the merchant ID to the merchant identifier using one or more sets of corresponding fields of the transaction records and .

For example during the enrollment period the portal is configured to retrieve transactions records for the predetermined account number from the data warehouse and the merchant aggregator is configured to provide its transaction record with the merchant identifier to the portal . The portal is configured to match the transaction records and based on the account number the transaction date and or the transaction amount . When a match is detected the merchant ID and the identifier of the transaction terminal from the transaction record generated by the transaction handler is linked to the merchant identifier associated with the transaction record stored by the merchant aggregator .

Using the system of the merchant can selectively enroll certain transaction terminals operated under certain names and or at certain locations. Thus the merchant may enroll a portion of the transaction terminals under the control of the merchant but not another portion of the transaction terminals under the control of the merchant . Different transaction terminals e.g. of a merchant may have different merchant ID and or transaction terminal IDs. Through transactions initiated using the different transaction terminals of the merchant the merchant identifier representing an enrolled merchant is linked to the different merchant ID and or transaction terminal IDs as used in authorization request for the transactions made using respective transaction terminals of the corresponding enrolled merchant.

In one embodiment the transaction record further includes the location information of the transaction terminal which can be used for location based services. For example in reporting the transaction initiated via using the predetermined account number at the transaction terminal the merchant may specify the location of the transaction terminal via a mobile device a mobile application a map application or a street address. Thus the location of the transaction terminal is associated with the merchant ID and or the transaction terminal .

In one embodiment the data warehouse stores location information of transaction terminal e.g. as reported by the acquirer processor and provides the location information to the merchant aggregator after the merchant ID is linked to the merchant identifier via the transaction record for the transaction initiated on the transaction terminal .

In one embodiment during the enrollment process the merchant aggregator instructs the merchant to perform the transaction according to the data stored in the transaction record and provides the transaction record to the portal . In response the portal generates a trigger record to detect the transaction that is subsequently initiated by the merchant at the transaction terminal . In one embodiment the trigger record is configured to cause the portal to link the merchant ID from the transaction record of the identified transaction with the merchant identifier associated with the transaction record used to generate the trigger record .

In one embodiment during the enrollment process the merchant aggregator is configured to request the portal to generate a set of transaction parameters to temporarily identify a transaction terminal of a merchant . The portal is configured to transmit the parameters to the merchant aggregator as part of the transaction record for initiation of the transaction. Examples of the parameters include the transaction amount a pseudo promotional code to be transmitted in an authorization request initiated in the transaction terminal . After the parameters are transmitted to the merchant aggregator the transaction handler is configured to monitor transactions to detect the transaction made in the predetermined account using the parameters provided to the merchant aggregator . Thus as soon as the authorization request for the expected transaction reaches the transaction handler the portal can identify the merchant ID and or the transaction terminal ID of the respective transaction terminal from the received authorization request for association with the transaction terminal of the merchant to be enrolled.

In one embodiment the transaction handler is configured to monitor and detect a plurality of transactions initiated to enroll a plurality of different merchants and or different transaction terminals of the enrolled merchants. To separately identify the merchants and or the transaction terminals the portal and or the merchant aggregator are configured to select the transaction parameters e.g. transaction amounts as temporary unique identifiers of the merchants and or transaction terminals. A data warehouse e.g. is configured to store data associating the temporary unique identifiers with the merchants and or transaction terminals. After a transaction is performed and detected the temporary association between the corresponding transaction parameters with the merchants and or transaction terminals can be removed and or reused for the identification of further merchants and or transaction terminals.

In one embodiment the transaction parameters configured as temporary identifiers of the enrolled merchants and or transaction terminals are used to create trigger records to detect the subsequent authorization requests initiated from the corresponding transaction terminals of the enrolled merchants.

In one embodiment the computing apparatus is configured to receive first data including a first merchant identifier of a merchant determine using the first data a second merchant identifier different from the first merchant identifier and configured to identify the merchant in authorization requests for transactions of the merchant submitted to a transaction handler monitor using the second merchant identifier transactions of the merchant to detect a subset of the transactions and in response to detecting a transaction in the subset transmit a message in real time as the transaction handler processes the transaction where the message contains information about the transaction and identifies the merchant using the first merchant identifier .

In one embodiment the computing apparatus is configured to store second data associating the first merchant identifier and the second merchant identifier and determine using the second data the first merchant identifier for the transaction after the detecting of the transaction in the subset.

In one embodiment the message containing information about the detected transaction in the subset is communicated via a communication channel separate from a communication channel used to process authorization of the transaction.

In one embodiment the message is communicated to a computing device e.g. merchant aggregator not involved in authorization of the transaction and where the computing device e.g. merchant aggregator receiving the message is configured to identify the merchant using the first merchant identifier after the merchant is enrolled in a program hosted on the computing device.

In one embodiment the receiving of the first data identifying the merchant includes receiving a request associated with the merchant and computing a transaction amount configured to uniquely identify the merchant among a plurality of merchants in transactions to be made in a predetermined account and providing the transaction amount as a response to the request. In one embodiment the request includes the first merchant identifier of the merchant.

In one embodiment after the providing of the transaction amount as the response to the request the computing apparatus is configured to monitor transactions in the predetermined account to detect a first transaction in the predetermined account by matching a transaction amount of the first transaction with the transaction amount provided as a response to the request and determine the second merchant identifier based on the first transaction where the first transaction is made in the predetermined account in accordance with the transaction amount that is provided as a response to the request.

In one embodiment the computing apparatus is configured to store a trigger record for the predetermined account to monitor transactions in the predetermined account in real time as authorization requests for transactions in the predetermined account are processed by the transaction handler.

In one embodiment the computing apparatus is configured to store third data identifying transaction amounts that have been assigned to represent different merchant identifiers including the first merchant identifier where each of the transaction amounts uniquely identifies a respective one of the different merchant identifiers of the plurality of merchants and after the detection of the first transaction the computing apparatus removes from the third data association between the first merchant identifier and the transaction amount that is provided as a response to the request.

In one embodiment the computing apparatus is configured to enroll a plurality of account holders to detect the transactions in the subset based at least in part on account numbers of the account holders.

In one embodiment the determining of the second merchant identifier includes identifying a transaction record of the first transaction based on matching data contained in the transaction record with the information about the first transaction provided in the first data e.g. a date of the first transaction a time of the first transaction a transaction amount of the first transaction a location of the merchant and determining the second merchant identifier based on the transaction record.

In one embodiment the computing apparatus having at least one processor and memory storing instructions configured to instruct the at least one processor to perform operations. The computing apparatus includes a portal configured to communicate with a remote computing device e.g. merchant aggregator over a communication network to receive first data including a first merchant identifier of the merchant and a transaction handler configured to use a second merchant identifier to identify the merchant in authorization requests for transactions of the merchant submitted from the transaction terminal of the merchant to the transaction handler via the acquirer processor associated with the merchant account of the merchant where the portal is coupled with the transaction handler to determine using the first data the second merchant identifier different from the first merchant identifier . The computing apparatus further includes a data warehouse configured to store transaction data recording transactions processed by the transaction handler and store second data associating the first merchant identifier and the second merchant identifier . The transaction handler is configured via trigger records to monitor using the second merchant identifier transactions of the merchant to detect the subset of the transactions.

In one embodiment the computing apparatus further includes a media controller configured to transmit in response to detecting a transaction in the subset a message to the remote computing device e.g. merchant aggregator in real time as the transaction handler processes the transaction to inform the remote computing device e.g. merchant aggregator of the transaction.

In one embodiment the data warehouse is configured to store third data associating a plurality of suggested transaction amounts with a plurality of different merchant identifiers respectively where each of the plurality of suggested transaction amounts uniquely identifies a corresponding merchant identifier in the plurality of different merchant identifiers.

In one embodiment the portal is configured to provide to the remote computing device in response to the first data a suggested transaction amount configured to uniquely identify the first merchant identifier in the plurality of different merchant identifiers in the third data. After the portal provides the suggested transaction amount to the remote computing device the transaction handler is configured to detect an authorization request for the first transaction made according to the suggested transaction amount in a predetermined account using a transaction terminal of the merchant where the second merchant identifier is determined from the authorization request.

In one embodiment the computing apparatus system includes at least one of the portal the data warehouse the transaction handler the medial controller and the message broker each of which may be implemented using a data processing system illustrated in with more or less components.

Some embodiments use more or fewer components than those illustrated in . For example in one embodiment the user specific profile is used by a search engine to prioritize search results. In one embodiment the correlator is to correlate transactions with online activities such as searching web browsing and social networking instead of or in addition to the user specific advertisement data . In one embodiment the correlator is to correlate transactions and or spending patterns with news announcements market changes events natural disasters etc. In one embodiment the data to be correlated by the correlator with the transaction data may not be personalized via the user specific profile and may not be user specific. In one embodiment multiple different devices are used at the point of interaction for interaction with the user and some of the devices may not be capable of receiving input from the user . In one embodiment there are transaction terminals to initiate transactions for a plurality of users with a plurality of different merchants. In one embodiment the account information is provided to the transaction terminal directly e.g. via phone or Internet without the use of the account identification device .

In one embodiment at least some of the profile generator correlator profile selector and advertisement selector are controlled by the entity that operates the transaction handler . In another embodiment at least some of the profile generator correlator profile selector and advertisement selector are not controlled by the entity that operates the transaction handler .

For example in one embodiment the entity operating the transaction handler provides the intelligence e.g. transaction profiles or the user specific profile for the selection of the advertisement and a third party e.g. a web search engine a publisher or a retailer may present the advertisement in a context outside a transaction involving the transaction handler before the advertisement results in a purchase.

For example in one embodiment the customer may interact with the third party at the point of interaction and the entity controlling the transaction handler may allow the third party to query for intelligence information e.g. transaction profiles or the user specific profile about the customer using the user data thus informing the third party of the intelligence information for targeting the advertisements which can be more useful effective and compelling to the user . For example the entity operating the transaction handler may provide the intelligence information without generating identifying or selecting advertisements and the third party receiving the intelligence information may identify select and or present advertisements.

Through the use of the transaction data account data correlation results the context at the point of interaction and or other data relevant and compelling messages or advertisements can be selected for the customer at the points of interaction e.g. for targeted advertising. The messages or advertisements are thus delivered at the optimal time for influencing or reinforcing brand perceptions and revenue generating behavior. The customers receive the advertisements in the media channels that they like and or use most frequently.

In one embodiment the transaction data includes transaction amounts the identities of the payees e.g. merchants and the date and time of the transactions. The identities of the payees can be correlated to the businesses services products and or locations of the payees. For example the transaction handler maintains a database of merchant data including the merchant locations businesses services products etc. Thus the transaction data can be used to determine the purchase behavior pattern preference tendency frequency trend budget and or propensity of the customers in relation to various types of businesses services and or products and in relation to time.

In one embodiment the products and or services purchased by the user are also identified by the information transmitted from the merchants or service providers. Thus the transaction data may include identification of the individual products and or services which allows the profile generator to generate transaction profiles with fine granularity or resolution. In one embodiment the granularity or resolution may be at a level of distinct products and services that can be purchased e.g. stock keeping unit SKU level or category or type of products or services or vendor of products or services etc.

The profile generator may consolidate transaction data for a person having multiple accounts to derive intelligence information about the person to generate a profile for the person e.g. transaction profiles or the user specific profile .

The profile generator may consolidate transaction data for a family having multiple accounts held by family members to derive intelligence information about the family to generate a profile for the family e.g. transaction profiles or the user specific profile .

Similarly the profile generator may consolidate transaction data for a group of persons after the group is identified by certain characteristics such as gender income level geographical location or region preference characteristics of past purchases e.g. merchant categories purchase types cluster propensity demographics social networking characteristics e.g. relationships preferences activities on social networking websites etc. The consolidated transaction data can be used to derive intelligence information about the group to generate a profile for the group e.g. transaction profiles or the user specific profile .

In one embodiment the profile generator may consolidate transaction data according to the user data to generate a profile specific to the user data .

Since the transaction data are records and history of past purchases the profile generator can derive intelligence information about a customer using an account a customer using multiple accounts a family a company or other groups of customers about what the targeted audience is likely to purchase in the future how frequently and their likely budgets for such future purchases. Intelligence information is useful in selecting the advertisements that are most useful effective and compelling to the customer thus increasing the efficiency and effectiveness of the advertising process.

In one embodiment the transaction data are enhanced with correlation results correlating past advertisements and purchases that result at least in part from the advertisements. Thus the intelligence information can be more accurate in assisting with the selection of the advertisements. The intelligence information may not only indicate what the audience is likely to purchase but also how likely the audience is to be influenced by advertisements for certain purchases and the relative effectiveness of different forms of advertisements for the audience. Thus the advertisement selector can select the advertisements to best use the opportunity to communicate with the audience. Further the transaction data can be enhanced via other data elements such as program enrollment affinity programs redemption of reward points or other types of offers online activities such as web searches and web browsing social networking information etc. based on the account data and or other data such as non transactional data discussed in U.S. patent application Ser. No. 12 614 603 filed Nov. 9 2009 assigned Pub. No. 2011 0054981 and entitled Analyzing Local Non Transactional Data with Transactional Data in Predictive Models the disclosure of which is hereby incorporated herein by reference.

In one embodiment the entity operating the transaction handler provides the intelligence information in real time as the request for the intelligence information occurs. In other embodiments the entity operating the transaction handler may provide the intelligence information in batch mode. The intelligence information can be delivered via online communications e.g. via an application programming interface API on a website or other information server or via physical transportation of a computer readable media that stores the data representing the intelligence information.

In one embodiment the intelligence information is communicated to various entities in the system in a way similar to and or in parallel with the information flow in the transaction system to move money. The transaction handler routes the information in the same way it routes the currency involved in the transactions.

In one embodiment the portal provides a user interface to allow the user to select items offered on different merchant websites and store the selected items in a wish list for comparison reviewing purchasing tracking etc. The information collected via the wish list can be used to improve the transaction profiles and derive intelligence on the needs of the user and targeted advertisements can be delivered to the user via the wish list user interface provided by the portal . Examples of user interface systems to manage wish lists are provided in U.S. Pat. App. Pub. No. 2010 0174623 entitled System and Method for Managing Items of Interest Selected from Online Merchants the disclosure of which is hereby incorporated herein by reference.

In one embodiment the characteristics of transaction patterns of customers are profiled via clusters factors and or categories of purchases. The transaction data may include transaction records and in one embodiment an aggregated spending profile is generated from the transaction records in a way illustrated in to summarize the spending behavior reflected in the transaction records .

When there is voluminous data representing the transaction records the spending patterns reflected in the transaction records can be difficult to recognize by an ordinary person.

In one embodiment the voluminous transaction records are summarized into aggregated spending profiles e.g. to concisely present the statistical spending characteristics reflected in the transaction records . The aggregated spending profile uses values derived from statistical analysis to present the statistical characteristics of transaction records of an entity in a way easy to understand by an ordinary person.

In the transaction records are summarized via factor analysis to condense the variables e.g. and via cluster analysis to segregate entities by spending patterns.

In a set of variables e.g. are defined based on the parameters recorded in the transaction records . The variables e.g. and are defined in a way to have meanings easily understood by an ordinary person. For example variables measure the aggregated spending in super categories variables measure the spending frequencies in various areas and variables measure the spending amounts in various areas. In one embodiment each of the areas is identified by a merchant category e.g. as represented by a merchant category code MCC a North American Industry Classification System NAICS code or a similarly standardized category code . In other embodiments an area may be identified by a product category a SKU number etc.

In one embodiment a variable of a same category e.g. frequency or amount is defined to be aggregated over a set of mutually exclusive areas. A transaction is classified in only one of the mutually exclusive areas. For example in one embodiment the spending frequency variables are defined for a set of mutually exclusive merchants or merchant categories. Transactions falling with the same category are aggregated.

Examples of the spending frequency variables and spending amount variables defined for various merchant categories e.g. in one embodiment are provided in U.S. Pat. App. Pat. App. Pub. No. 2010 0306029 entitled Cardholder Clusters and in U.S. Pat. App. Pub. No. 2010 0306032 entitled Systems and Methods to Summarize Transaction Data the disclosures of which applications are hereby incorporated herein by reference.

In one embodiment super categories are defined to group the categories e.g. used in transaction records . The super categories can be mutually exclusive. For example each merchant category is classified under only one super merchant category but not any other super merchant categories. Since the generation of the list of super categories typically requires deep domain knowledge about the businesses of the merchants in various categories super categories are not used in one embodiment.

In one embodiment the aggregation includes the application of the definitions for these variables e.g. and to the transaction records to generate the variable values . The transaction records are aggregated to generate aggregated measurements e.g. variable values that are not specific to a particular transaction such as frequencies of purchases made with different merchants or different groups of merchants the amounts spent with different merchants or different groups of merchants and the number of unique purchases across different merchants or different groups of merchants etc. The aggregation can be performed for a particular time period and for entities at various levels.

In one embodiment the transaction records are aggregated according to a buying entity. The aggregation can be performed at account level person level family level company level neighborhood level city level region level etc. to analyze the spending patterns across various areas e.g. sellers products or services for the respective aggregated buying entity. For example the transaction records for a particular account e.g. presented by the account number can be aggregated for an account level analysis. To aggregate the transaction records in account level the transactions with a specific merchant or merchants in a specific category are counted according to the variable definitions for a particular account to generate a frequency measure e.g. for the account relative to the specific merchant or merchant category and the transaction amounts e.g. with the specific merchant or the specific category of merchants are summed for the particular account to generate an average spending amount for the account relative to the specific merchant or merchant category. For example the transaction records for a particular person having multiple accounts can be aggregated for a person level analysis the transaction records aggregated for a particular family for a family level analysis and the transaction records for a particular business aggregated for a business level analysis.

The aggregation can be performed for a predetermined time period such as for the transactions occurring in the past month in the past three months in the past twelve months etc.

In another embodiment the transaction records are aggregated according to a selling entity. The spending patterns at the selling entity across various buyers products or services can be analyzed. For example the transaction records for a particular merchant having transactions with multiple accounts can be aggregated for a merchant level analysis. For example the transaction records for a particular merchant group can be aggregated for a merchant group level analysis.

In one embodiment the aggregation is formed separately for different types of transactions such as transactions made online offline via phone and or card present transactions vs. card not present transactions which can be used to identify the spending pattern differences among different types of transactions.

In one embodiment the variable values e.g. . . . associated with an entity ID are considered the random samples of the respective variables e.g. sampled for the instance of an entity represented by the entity ID . Statistical analyses e.g. factor analysis and cluster analysis are performed to identify the patterns and correlations in the random samples.

For example a cluster analysis can identify a set of clusters and thus cluster definitions e.g. the locations of the centroids of the clusters . In one embodiment each entity ID is represented as a point in a mathematical space defined by the set of variables and the variable values . . . of the entity ID determine the coordinates of the point in the space and thus the location of the point in the space. Various points may be concentrated in various regions and the cluster analysis is configured to formulate the positioning of the points to drive the clustering of the points. In other embodiments the cluster analysis can also be performed using the techniques of Self Organizing Maps SOM which can identify and show clusters of multi dimensional data using a representation on a two dimensional map.

Once the cluster definitions are obtained from the cluster analysis the identity of the cluster e.g. cluster ID that contains the entity ID can be used to characterize spending behavior of the entity represented by the entity ID . The entities in the same cluster are considered to have similar spending behaviors.

Similarities and differences among the entities such as accounts individuals families etc. as represented by the entity ID e.g. and characterized by the variable values e.g. . . . can be identified via the cluster analysis . In one embodiment after a number of clusters of entity IDs are identified based on the patterns of the aggregated measurements a set of profiles can be generated for the clusters to represent the characteristics of the clusters. Once the clusters are identified each of the entity IDs e.g. corresponding to an account individual family can be assigned to one cluster and the profile for the corresponding cluster may be used to represent at least in part the entity e.g. account individual family . Alternatively the relationship between an entity e.g. an account individual family and one or more clusters can be determined e.g. based on a measurement of closeness to each cluster . Thus the cluster related data can be used in a transaction profile or to provide information about the behavior of the entity e.g. an account an individual a family .

In one embodiment more than one set of cluster definitions is generated from cluster analyses . For example cluster analyses may generate different sets of cluster solutions corresponding to different numbers of identified clusters. A set of cluster IDs e.g. can be used to summarize the spending behavior of the entity represented by the entity ID based on the typical spending behavior of the respective clusters. In one example two cluster solutions are obtained one of the cluster solutions has 17 clusters which classify the entities in a relatively coarse manner and the other cluster solution has 55 clusters which classify the entities in a relative fine manner. A cardholder can be identified by the spending behavior of one of the 17 clusters and one of the 55 clusters in which the cardholder is located. Thus the set of cluster IDs corresponding to the set of cluster solutions provides a hierarchical identification of an entity among clusters of different levels of resolution. The spending behavior of the clusters is represented by the cluster definitions such as the parameters e.g. variable values that define the centroids of the clusters.

In one embodiment the random variables e.g. and as defined by the definitions have certain degrees of correlation and are not independent from each other. For example merchants of different merchant categories e.g. may have overlapping business or have certain business relationships. For example certain products and or services of certain merchants have cause and effect relationships. For example certain products and or services of certain merchants are mutually exclusive to a certain degree e.g. a purchase from one merchant may have a level of probability to exclude the user from making a purchase from another merchant . Such relationships may be complex and difficult to quantify by merely inspecting the categories. Further such relationships may shift over time as the economy changes.

In one embodiment a factor analysis is performed to reduce the redundancy and or correlation among the variables e.g. . The factor analysis identifies the definitions for factors each of which represents a combination of the variables e.g. .

In one embodiment a factor is a linear combination of a plurality of the aggregated measurements e.g. variables determined for various areas e.g. merchants or merchant categories products or product categories . Once the relationship between the factors and the aggregated measurements is determined via factor analysis the values for the factors can be determined from the linear combinations of the aggregated measurements and be used in a transaction profile or to provide information on the behavior of the entity represented by the entity ID e.g. an account an individual a family .

Once the factor definitions are obtained from the factor analysis the factor definitions can be applied to the variable values to determine factor values for the aggregated spending profile . Since redundancy and correlation are reduced in the factors the number of factors is typically much smaller than the number of the original variables e.g. . Thus the factor values represent the concise summary of the original variables e.g. .

For example there may be thousands of variables on spending frequency and amount for different merchant categories and the factor analysis can reduce the factor number to less than one hundred and even less than twenty . In one example a twelve factor solution is obtained which allows the use of twelve factors to combine the thousands of the original variables and thus the spending behavior in thousands of merchant categories can be summarized via twelve factor values . In one embodiment each factor is combination of at least four variables and a typical variable has contributions to more than one factor.

In one example hundreds or thousands of transaction records of a cardholder are converted into hundreds or thousands of variable values for various merchant categories which are summarized via the factor definitions and cluster definitions into twelve factor values and one or two cluster IDs e.g. . The summarized data can be readily interpreted by a human to ascertain the spending behavior of the cardholder. A user may easily specify a spending behavior requirement formulated based on the factor values and the cluster IDs e.g. to query for a segment of customers or to request the targeting of a segment of customers . The reduced size of the summarized data reduces the need for data communication bandwidth for communicating the spending behavior of the cardholder over a network connection and allows simplified processing and utilization of the data representing the spending behavior of the cardholder.

In one embodiment the behavior and characteristics of the clusters are studied to identify a description of a type of representative entities that are found in each of the clusters. The clusters can be named based on the type of representative entities to allow an ordinary person to easily understand the typical behavior of the clusters.

In one embodiment the behavior and characteristics of the factors are also studied to identify dominant aspects of each factor. The clusters can be named based on the dominant aspects to allow an ordinary person to easily understand the meaning of a factor value.

In an aggregated spending profile for an entity represented by an entity ID e.g. includes the cluster ID and factor values determined based on the cluster definitions and the factor definitions . The aggregated spending profile may further include other statistical parameters such as diversity index channel distribution category distribution zip code etc. as further discussed below.

In one embodiment the diversity index may include an entropy value and or a Gini coefficient to represent the diversity of the spending by the entity represented by the entity ID across different areas e.g. different merchant categories e.g. . When the diversity index indicates that the diversity of the spending data is under a predetermined threshold level the variable values e.g. . . . for the corresponding entity ID may be excluded from the cluster analysis and or the factor analysis due to the lack of diversity. When the diversity index of the aggregated spending profile is lower than a predetermined threshold the factor values and the cluster ID may not accurately represent the spending behavior of the corresponding entity.

In one embodiment the channel distribution includes a set of percentage values that indicate the percentages of amounts spent in different purchase channels such as online via phone in a retail store etc.

In one embodiment the category distribution includes a set of percentage values that indicate the percentages of spending amounts in different super categories . In one embodiment thousands of different merchant categories e.g. are represented by Merchant Category Codes MCC or North American Industry Classification System NAICS codes in transaction records . These merchant categories e.g. are classified or combined into less than one hundred super categories or less than twenty . In one example fourteen super categories are defined based on domain knowledge.

In one embodiment the aggregated spending profile includes the aggregated measurements e.g. frequency average spending amount determined for a set of predefined mutually exclusive merchant categories e.g. super categories . Each of the super merchant categories represents a type of products or services a customer may purchase. A transaction profile or may include the aggregated measurements for each of the set of mutually exclusive merchant categories. The aggregated measurements determined for the predefined mutually exclusive merchant categories can be used in transaction profiles or to provide information on the behavior of a respective entity e.g. an account an individual or a family .

In one embodiment the zip code in the aggregated spending profile represents the dominant geographic area in which the spending associated with the entity ID occurred. Alternatively or in combination the aggregated spending profile may include a distribution of transaction amounts over a set of zip codes that account for a majority of the transactions or transaction amounts e.g. 90 .

In one embodiment the factor analysis and cluster analysis are used to summarize the spending behavior across various areas such as different merchants characterized by merchant category different products and or services different consumers etc. The aggregated spending profile may include more or fewer fields than those illustrated in . For example in one embodiment the aggregated spending profile further includes an aggregated spending amount for a period of time e.g. the past twelve months in another embodiment the aggregated spending profile does not include the category distribution and in a further embodiment the aggregated spending profile may include a set of distance measures to the centroids of the clusters. The distance measures may be defined based on the variable values . . . or based on the factor values . The factor values of the centroids of the clusters may be estimated based on the entity ID e.g. that is closest to the centroid in the respective cluster.

Other variables can be used in place of or in additional to the variables illustrated in . For example the aggregated spending profile can be generated using variables measuring shopping radius distance from the primary address of the account holder to the merchant site for offline purchases. When such variables are used the transaction patterns can be identified based at least in part on clustering according to shopping radius distance and geographic regions. Similarly the factor definition may include the consideration of the shopping radius distance. For example the transaction records may be aggregated based on the ranges of shopping radius distance and or geographic regions. For example the factor analysis can be used to determine factors that naturally combine geographical areas based on the correlations in the spending patterns in various geographical areas.

In one embodiment the aggregation may involve the determination of a deviation from a trend or pattern. For example an account makes a certain number of purchases a week at a merchant over the past 6 months. However in the past 2 weeks the number of purchases is less than the average number per week. A measurement of the deviation from the trend or pattern can be used e.g. in a transaction profile or as a parameter or in variable definitions for the factor analysis and or the cluster analysis to define the behavior of an account an individual a family etc.

In data from related accounts are combined . For example when an account number change has occurred for a cardholder in the time period under analysis the transaction records under the different account numbers of the same cardholder are combined under one account number that represents the cardholder. For example when the analysis is performed at a person level or family level business level social group level city level or region level the transaction records in different accounts of the person or family business social group city or region can be combined under one entity ID that represents the person or family business social group city or region .

In one embodiment recurrent installment transactions are combined . For example multiple monthly payments may be combined and considered as one single purchase.

In account data are selected according to a set of criteria related to activity consistency diversity etc.

For example when a cardholder uses a credit card solely to purchase gas the diversity of the transactions by the cardholder is low. In such a case the transactions in the account of the cardholder may not be statistically meaningful to represent the spending pattern of the cardholder in various merchant categories. Thus in one embodiment if the diversity of the transactions associated with an entity ID is below a threshold the variable values e.g. . . . corresponding to the entity ID are not used in the cluster analysis and or the factor analysis . The diversity can be examined based on the diversity index e.g. entropy or Gini coefficient or based on counting the different merchant categories in the transactions associated with the entity ID and when the count of different merchant categories is fewer than a threshold e.g. the transactions associated with the entity ID are not used in the cluster analysis and or the factor analysis due to the lack of diversity.

For example when a cardholder uses a credit card only sporadically e.g. when running out of cash the limited transactions by the cardholder may not be statistically meaningful in representing the spending behavior of the cardholder. Thus in one embodiment when the numbers of transactions associated with an entity ID is below a threshold the variable values e.g. . . . corresponding to the entity ID are not used in the cluster analysis and or the factor analysis .

For example when a cardholder has only used a credit card during a portion of the time period under analysis the transaction records during the time period may not reflect the consistent behavior of the cardholder for the entire time period. Consistency can be checked in various ways. In one example if the total number of transactions during the first and last months of the time period under analysis is zero the transactions associated with the entity ID are inconsistent in the time period and thus are not used in the cluster analysis and or the factor analysis . Other criteria can be formulated to detect inconsistency in the transactions.

In the computation models e.g. as represented by the variable definitions are applied to the remaining account data e.g. transaction records to obtain data samples for the variables. The data points associated with the entities other than those whose transactions fail to meet the minimum requirements for activity consistency diversity etc. are used in factor analysis and cluster analysis .

In the data samples e.g. variable values are used to perform factor analysis to identify factor solutions e.g. factor definitions . The factor solutions can be adjusted to improve similarity in factor values of different sets of transaction data . For example factor definitions can be applied to the transactions in the time period under analysis e.g. the past twelve months and be applied separately to the transactions in a prior time period e.g. the twelve months before the past twelve months to obtain two sets of factor values. The factor definitions can be adjusted to improve the correlation between the two set of factor values.

The data samples can also be used to perform cluster analysis to identify cluster solutions e.g. cluster definitions . The cluster solutions can be adjusted to improve similarity in cluster identifications based on different sets of transaction data . For example cluster definitions can be applied to the transactions in the time period under analysis e.g. the past twelve months and be applied separately to the transactions in a prior time period e.g. the twelve months before the past twelve months to obtain two sets of cluster identifications for various entities. The cluster definitions can be adjusted to improve the correlation between the two set of cluster identifications.

In one embodiment the number of clusters is determined from clustering analysis. For example a set of cluster seeds can be initially identified and used to run a known clustering algorithm. The sizes of data points in the clusters are then examined. When a cluster contains less than a predetermined number of data points the cluster may be eliminated to rerun the clustering analysis.

In one embodiment human understandable characteristics of the factors and clusters are identified to name the factors and clusters. For example when the spending behavior of a cluster appears to be the behavior of an internet loyalist the cluster can be named internet loyalist such that if a cardholder is found to be in the internet loyalist cluster the spending preferences and patterns of the cardholder can be easily perceived.

In one embodiment the factor analysis and the cluster analysis are performed periodically e.g. once a year or six months to update the factor definitions and the cluster definitions which may change as the economy and the society change over time.

In transaction data are summarized using the factor solutions and cluster solutions to generate the aggregated spending profile . The aggregated spending profile can be updated more frequently than the factor solutions and cluster solutions when the new transaction data becomes available. For example the aggregated spending profile may be updated quarterly or monthly.

Various tweaks and adjustments can be made for the variables e.g. used for the factor analysis and the cluster analysis . For example the transaction records may be filtered weighted or constrained according to different rules to improve the capabilities of the aggregated measurements in indicating certain aspects of the spending behavior of the customers.

In the transaction terminal initiates the transaction for a user e.g. a customer for processing by a transaction handler . The transaction handler processes the transaction and stores transaction data about the transaction in connection with account data such as the account profile of an account of the user . The account data may further include data about the user collected from issuers or merchants and or other sources such as social networks credit bureaus merchant provided information address information etc. In one embodiment a transaction may be initiated by a server e.g. based on a stored schedule for recurrent payments .

Over a period of time the transaction handler accumulates the transaction data from transactions initiated at different transaction terminals e.g. for different users e.g. . The transaction data thus includes information on purchases made by various users e.g. at various times via different purchases options e.g. online purchase offline purchase from a retail store mail order order via phone etc. 

In one embodiment the accumulated transaction data and the corresponding account data are used to generate intelligence information about the purchase behavior pattern preference tendency frequency trend amount and or propensity of the users e.g. as individuals or as a member of a group. The intelligence information can then be used to generate identify and or select targeted advertisements for presentation to the user on the point of interaction during a transaction after a transaction or when other opportunities arise.

In one embodiment the portal is configured to receive queries identifying search criteria from the profile selector the advertisement selector and or third parties and in response to provide transaction based intelligence requested by the queries.

In one embodiment the portal is configured to register certain users for various programs such as a loyalty program to provide rewards and or offers to the users .

In one embodiment the portal is to register the interest of users or to obtain permissions from the users to gather further information about the users such as data capturing purchase details online activities etc.

In one embodiment the user may register via the issuer and the registration data in the consumer account may propagate to the data warehouse upon approval from the user .

In one embodiment the portal is to register merchants and provide services and or information to merchants.

In one embodiment the portal is to receive information from third parties such as search engines merchants websites etc. The third party data can be correlated with the transaction data to identify the relationships between purchases and other events such as searches news announcements conferences meetings etc. and improve the prediction capability and accuracy.

In the consumer account is under the control of the issuer processor . The consumer account may be owned by an individual or an organization such as a business a school etc. The consumer account may be a credit account a debit account or a stored value account. The issuer may provide the consumer e.g. user an account identification device to identify the consumer account using the account information . The respective consumer of the account can be called an account holder or a cardholder even when the consumer is not physically issued a card or the account identification device in one embodiment. The issuer processor is to charge the consumer account to pay for purchases.

In one embodiment the account identification device is a plastic card having a magnetic strip storing account information identifying the consumer account and or the issuer processor . Alternatively the account identification device is a smartcard having an integrated circuit chip storing at least the account information . In one embodiment the account identification device includes a mobile phone having an integrated smartcard.

In one embodiment the account information is printed or embossed on the account identification device . The account information may be printed as a bar code to allow the transaction terminal to read the information via an optical scanner. The account information may be stored in a memory of the account identification device and configured to be read via wireless contactless communications such as near field communications via magnetic field coupling infrared communications or radio frequency communications. Alternatively the transaction terminal may require contact with the account identification device to read the account information e.g. by reading the magnetic strip of a card with a magnetic strip reader .

In one embodiment the transaction terminal is configured to transmit an authorization request message to the acquirer processor . The authorization request includes the account information an amount of payment and information about the merchant e.g. an indication of the merchant account . The acquirer processor requests the transaction handler to process the authorization request based on the account information received in the transaction terminal . The transaction handler routes the authorization request to the issuer processor and may process and respond to the authorization request when the issuer processor is not available. The issuer processor determines whether to authorize the transaction based at least in part on a balance of the consumer account .

In one embodiment the transaction handler the issuer processor and the acquirer processor may each include a subsystem to identify the risk in the transaction and may reject the transaction based on the risk assessment.

In one embodiment the account identification device includes security features to prevent unauthorized uses of the consumer account such as a logo to show the authenticity of the account identification device encryption to protect the account information etc.

In one embodiment the transaction terminal is configured to interact with the account identification device to obtain the account information that identifies the consumer account and or the issuer processor . The transaction terminal communicates with the acquirer processor that controls the merchant account of a merchant. The transaction terminal may communicate with the acquirer processor via a data communication connection such as a telephone connection an Internet connection etc. The acquirer processor is to collect payments into the merchant account on behalf of the merchant.

In one embodiment the transaction terminal is a POS terminal at a traditional offline brick and mortar retail store. In another embodiment the transaction terminal is an online server that receives account information of the consumer account from the user through a web connection. In one embodiment the user may provide account information through a telephone call via verbal communications with a representative of the merchant and the representative enters the account information into the transaction terminal to initiate the transaction.

In one embodiment the account information can be entered directly into the transaction terminal to make payment from the consumer account without having to physically present the account identification device . When a transaction is initiated without physically presenting an account identification device the transaction is classified as a card not present CNP transaction.

In one embodiment the issuer processor may control more than one consumer account the acquirer processor may control more than one merchant account and the transaction handler is connected between a plurality of issuer processors e.g. and a plurality of acquirer processors e.g. . An entity e.g. bank may operate both an issuer processor and an acquirer processor .

In one embodiment the transaction handler the issuer processor the acquirer processor the transaction terminal the portal and other devices and or services accessing the portal are connected via communications networks such as local area networks cellular telecommunications networks wireless wide area networks wireless local area networks an intranet and Internet. In one embodiment dedicated communication channels are used between the transaction handler and the issuer processor between the transaction handler and the acquirer processor and or between the portal and the transaction handler .

In one embodiment the transaction handler uses the data warehouse to store the records about the transactions such as the transaction records or transaction data . In one embodiment the transaction handler includes a powerful computer or cluster of computers functioning as a unit controlled by instructions stored on a computer readable medium.

In one embodiment the transaction handler is configured to support and deliver authorization services exception file services and clearing and settlement services. In one embodiment the transaction handler has a subsystem to process authorization requests and another subsystem to perform clearing and settlement services.

In one embodiment the transaction handler is configured to process different types of transactions such credit card transactions debit card transactions prepaid card transactions and other types of commercial transactions.

In one embodiment the transaction handler facilitates the communications between the issuer processor and the acquirer processor .

In one embodiment the transaction handler is coupled to the portal and or the profile selector the advertisement selector the media controller to charge the fees for the services of providing the transaction based intelligence information and or advertisement.

For example in one embodiment the system illustrated in is configured to deliver advertisements to the point of interaction of the user based on the transaction based intelligence information and the transaction handler is configured to charge the advertisement fees to the account of the advertiser in communication with the issuer processor in control of the account of the advertiser. The advertisement fees may be charged in response to the presentation of the advertisement or in response to the completion of a pre determined number of presentations or in response to a transaction resulted from the presentation of the advertisement. In one embodiment the transaction handler is configured to a periodic fee e.g. monthly fee annual fee to the account of the advertiser in communication with the respective issuer processor that is similar to the issuer processor of the consumer account .

For example in one embodiment the portal is configured to provide transaction based intelligence information in response to the queries received in the portal . The portal is to identify the requesters e.g. via an authentication or the address of the requesters and instruct the transaction handler to charge the consumer accounts e.g. of the respective requesters for the transaction based intelligence information. In one embodiment the accounts of the requesters are charged in response to the delivery of the intelligence information via the portal . In one embodiment the accounts of the requesters are charged a periodic subscription fee for the access to the query capability of the portal .

In one embodiment the information service provided by the system illustrated in includes multiple parties such as one entity operating the transaction handler one entity operating the advertisement data one entity operating the user tracker one entity operating the media controller etc. The transaction handler is used to generate transactions to settle the fees charges and or divide revenues using the accounts of the respective parties. In one embodiment the account information of the parties is stored in the data warehouse coupled to the transaction handler . In some embodiments a separate billing engine is used to generate the transactions to settle the fees charges and or divide revenues.

In one embodiment the transaction terminal is configured to submit the authorized transactions to the acquirer processor for settlement. The amount for the settlement may be different from the amount specified in the authorization request. The transaction handler is coupled between the issuer processor and the acquirer processor to facilitate the clearing and settling of the transaction. Clearing includes the exchange of financial information between the issuer processor and the acquirer processor and settlement includes the exchange of funds.

In one embodiment the issuer processor is to provide funds to make payments on behalf of the consumer account . The acquirer processor is to receive the funds on behalf of the merchant account . The issuer processor and the acquirer processor communicate with the transaction handler to coordinate the transfer of funds for the transaction. In one embodiment the funds are transferred electronically.

In one embodiment the transaction terminal may submit a transaction directly for settlement without having to separately submit an authorization request.

In one embodiment the portal provides a user interface to allow the user to organize the transactions in one or more consumer accounts of the user with one or more issuers. The user may organize the transactions using information and or categories identified in the transaction records such as merchant category transaction date amount etc. Examples and techniques in one embodiment are provided in U.S. Pat. App. Pub. No. 2007 0055597 entitled Method and System for Manipulating Purchase Information the disclosure of which is hereby incorporated herein by reference.

In one embodiment the portal provides transaction based statistics such as indicators for retail spending monitoring indicators for merchant benchmarking industry market segmentation indicators of spending patterns etc. Further examples can be found in U.S. Pat. App. Pub. No. 2009 0048884 entitled Merchant Benchmarking Tool the disclosure of which application is hereby incorporated herein by reference.

In one embodiment the transaction terminal includes a memory coupled to the processor which controls the operations of a reader an input device an output device and a network interface . The memory may store instructions for the processor and or data such as an identification that is associated with the merchant account .

In one embodiment the reader includes a magnetic strip reader. In another embodiment the reader includes a contactless reader such as a radio frequency identification RFID reader a near field communications NFC device configured to read data via magnetic field coupling in accordance with ISO standard 14443 NFC a Bluetooth transceiver a WiFi transceiver an infrared transceiver a laser scanner etc.

In one embodiment the input device includes key buttons that can be used to enter the account information directly into the transaction terminal without the physical presence of the account identification device . The input device can be configured to provide further information to initiate a transaction such as a personal identification number PIN password zip code etc. that may be used to access the account identification device or in combination with the account information obtained from the account identification device .

In one embodiment the output device may include a display a speaker and or a printer to present information such as the result of an authorization request a receipt for the transaction an advertisement etc.

In one embodiment the network interface is configured to communicate with the acquirer processor via a telephone connection an Internet connection or a dedicated data communication channel.

In one embodiment the instructions stored in the memory are configured at least to cause the transaction terminal to send an authorization request message to the acquirer processor to initiate a transaction. The transaction terminal may or may not send a separate request for the clearing and settling of the transaction. The instructions stored in the memory are also configured to cause the transaction terminal to perform other types of functions discussed in this description.

In one embodiment a transaction terminal may have fewer components than those illustrated in . For example in one embodiment the transaction terminal is configured for card not present transactions and the transaction terminal does not have a reader .

In one embodiment a transaction terminal may have more components than those illustrated in . For example in one embodiment the transaction terminal is an ATM machine which includes components to dispense cash under certain conditions.

In one embodiment the account identification device includes a memory coupled to the processor which controls the operations of a communication device an input device an audio device and a display device . The memory may store instructions for the processor and or data such as the account information associated with the consumer account .

In one embodiment the account information includes an identifier identifying the issuer and thus the issuer processor among a plurality of issuers and an identifier identifying the consumer account among a plurality of consumer accounts controlled by the issuer processor . The account information may include an expiration date of the account identification device the name of the consumer holding the consumer account and or an identifier identifying the account identification device among a plurality of account identification devices associated with the consumer account .

In one embodiment the account information may further include a loyalty program account number accumulated rewards of the consumer in the loyalty program an address of the consumer a balance of the consumer account transit information e.g. a subway or train pass access information e.g. access badges and or consumer information e.g. name date of birth etc.

In one embodiment the memory includes a nonvolatile memory such as magnetic strip a memory chip a flash memory a Read Only Memory ROM etc. to store the account information .

In one embodiment the information stored in the memory of the account identification device may also be in the form of data tracks that are traditionally associated with credits cards. Such tracks include Track 1 and Track 2. Track 1 International Air Transport Association stores more information than Track 2 and contains the cardholder s name as well as the account number and other discretionary data. Track 1 is sometimes used by airlines when securing reservations with a credit card. Track 2 American Banking Association is currently most commonly used and is read by ATMs and credit card checkers. The ABA American Banking Association designed the specifications of Track 1 and banks abide by it. It contains the cardholder s account number encrypted PIN and other discretionary data.

In one embodiment the communication device includes a semiconductor chip to implement a transceiver for communication with the reader and an antenna to provide and or receive wireless signals.

In one embodiment the communication device is configured to communicate with the reader . The communication device may include a transmitter to transmit the account information via wireless transmissions such as radio frequency signals magnetic coupling or infrared Bluetooth or WiFi signals etc.

In one embodiment the account identification device is in the form of a mobile phone personal digital assistant PDA etc. The input device can be used to provide input to the processor to control the operation of the account identification device and the audio device and the display device may present status information and or other information such as advertisements or offers. The account identification device may include further components that are not shown in such as a cellular communications subsystem.

In one embodiment the communication device may access the account information stored on the memory without going through the processor .

In one embodiment the account identification device has fewer components than those illustrated in . For example an account identification device does not have the input device the audio device and the display device in one embodiment and in another embodiment an account identification device does not have components .

For example in one embodiment an account identification device is in the form of a debit card a credit card a smartcard or a consumer device that has optional features such as magnetic strips or smartcards.

An example of an account identification device is a magnetic strip attached to a plastic substrate in the form of a card. The magnetic strip is used as the memory of the account identification device to provide the account information . Consumer information such as account number expiration date and consumer name may be printed or embossed on the card. A semiconductor chip implementing the memory and the communication device may also be embedded in the plastic card to provide account information in one embodiment. In one embodiment the account identification device has the semiconductor chip but not the magnetic strip.

In one embodiment the account identification device is integrated with a security device such as an access card a radio frequency identification RFID tag a security card a transponder etc.

In one embodiment the account identification device is a handheld and compact device. In one embodiment the account identification device has a size suitable to be placed in a wallet or pocket of the consumer.

Some examples of an account identification device include a credit card a debit card a stored value device a payment card a gift card a smartcard a smart media card a payroll card a health care card a wrist band a keychain device a supermarket discount card a transponder and a machine readable medium containing account information .

In one embodiment the point of interaction is to provide an advertisement to the user or to provide information derived from the transaction data to the user .

In one embodiment an advertisement is a marketing interaction which may include an announcement and or an offer of a benefit such as a discount incentive reward coupon gift cash back or opportunity e.g. special ticket admission . An advertisement may include an offer of a product or service an announcement of a product or service or a presentation of a brand of products or services or a notice of events facts opinions etc. The advertisements can be presented in text graphics audio video or animation and as printed matter web content interactive media etc. An advertisement may be presented in response to the presence of a financial transaction card or in response to a financial transaction card being used to make a financial transaction or in response to other user activities such as browsing a web page submitting a search request communicating online entering a wireless communication zone etc. In one embodiment the presentation of advertisements may be not a result of a user action.

In one embodiment the point of interaction can be one of various endpoints of the transaction network such as point of sale POS terminals automated teller machines ATMs electronic kiosks or computer kiosks or interactive kiosks self assist checkout terminals vending machines gas pumps websites of banks e.g. issuer banks or acquirer banks of credit cards bank statements e.g. credit card statements websites of the transaction handler websites of merchants checkout websites or web pages for online purchases etc.

In one embodiment the point of interaction may be the same as the transaction terminal such as a point of sale POS terminal an automated teller machine ATM a mobile phone a computer of the user for an online transaction etc. In one embodiment the point of interaction may be co located with or near the transaction terminal e.g. a video monitor or display a digital sign or produced by the transaction terminal e.g. a receipt produced by the transaction terminal . In one embodiment the point of interaction may be separate from and not co located with the transaction terminal such as a mobile phone a personal digital assistant a personal computer of the user a voice mail box of the user an email inbox of the user a digital sign etc.

For example the advertisements can be presented on a portion of media for a transaction with the customer which portion might otherwise be unused and thus referred to as a white space herein. A white space can be on a printed matter e.g. a receipt printed for the transaction or a printed credit card statement on a video display e.g. a display monitor of a POS terminal for a retail transaction an ATM for cash withdrawal or money transfer a personal computer of the customer for online purchases or on an audio channel e.g. an interactive voice response IVR system for a transaction over a telephonic device .

In one embodiment the white space is part of a media channel available to present a message from the transaction handler in connection with the processing of a transaction of the user . In one embodiment the white space is in a media channel that is used to report information about a transaction of the user such as an authorization status a confirmation message a verification message a user interface to verify a password for the online use of the account information a monthly statement an alert or a report or a web page provided by the portal to access a loyalty program associated with the consumer account or a registration program.

In other embodiments the advertisements can also be presented via other media channels which may not involve a transaction processed by the transaction handler . For example the advertisements can be presented on publications or announcements e.g. newspapers magazines books directories radio broadcasts television digital signage etc. which may be in an electronic form or in a printed or painted form . The advertisements may be presented on paper on websites on billboards on digital signs or on audio portals.

In one embodiment the transaction handler purchases the rights to use the media channels from the owner or operators of the media channels and uses the media channels as advertisement spaces. For example white spaces at a point of interaction e.g. with customers for transactions processed by the transaction handler can be used to deliver advertisements relevant to the customers conducting the transactions and the advertisement can be selected based at least in part on the intelligence information derived from the accumulated transaction data and or the context at the point of interaction and or the transaction terminal .

In general a point of interaction e.g. may or may not be capable of receiving inputs from the customers and may or may not co located with a transaction terminal e.g. that initiates the transactions. The white spaces for presenting the advertisement on the point of interaction may be on a portion of a geographical display space e.g. on a screen or on a temporal space e.g. in an audio stream .

In one embodiment the point of interaction may be used to primarily to access services not provided by the transaction handler such as services provided by a search engine a social networking website an online marketplace a blog a news site a television program provider a radio station a satellite a publisher etc.

In one embodiment a consumer device is used as the point of interaction which may be a non portable consumer device or a portable computing device. The consumer device is to provide media content to the user and may receive input from the user .

Examples of non portable consumer devices include a computer terminal a television set a personal computer a set top box or the like. Examples of portable consumer devices include a portable computer a cellular phone a personal digital assistant PDA a pager a security card a wireless terminal or the like. The consumer device may be implemented as a data processing system as illustrated in with more or fewer components.

In one embodiment the consumer device includes an account identification device . For example a smart card used as an account identification device is integrated with a mobile phone or a personal digital assistant PDA .

In one embodiment the point of interaction is integrated with a transaction terminal . For example a self service checkout terminal includes a touch pad to interact with the user and an ATM machine includes a user interface subsystem to interact with the user .

In one embodiment a computing apparatus is configured to include some of the modules or components illustrated in such as the transaction handler the profile generator the media controller the portal the profile selector the advertisement selector the user tracker the correlator and their associated storage devices such as the data warehouse .

In one embodiment at least some of the modules or components illustrated in such as the transaction handler the transaction terminal the point of interaction the user tracker the media controller the correlator the profile generator the profile selector the advertisement selector the portal the issuer processor the acquirer processor and the account identification device can be implemented as a computer system such as a data processing system illustrated in with more or fewer components. Some of the modules may share hardware or be combined on a computer system. In one embodiment a network of computers can be used to implement one or more of the modules.

Further the data illustrated in such as transaction data account data transaction profiles and advertisement data can be stored in storage devices of one or more computers accessible to the corresponding modules illustrated in . For example the transaction data can be stored in the data warehouse that can be implemented as a data processing system illustrated in with more or fewer components.

In one embodiment the transaction handler is a payment processing system or a payment card processor such as a card processor for credit cards debit cards etc.

In the data processing system includes an inter connect e.g. bus and system core logic which interconnects a microprocessor s and memory . The microprocessor is coupled to cache memory in the example of .

In one embodiment the inter connect interconnects the microprocessor s and the memory together and also interconnects them to input output I O device s via I O controller s . I O devices may include a display device and or peripheral devices such as mice keyboards modems network interfaces printers scanners video cameras and other devices known in the art. In one embodiment when the data processing system is a server system some of the I O devices such as printers scanners mice and or keyboards are optional.

In one embodiment the inter connect includes one or more buses connected to one another through various bridges controllers and or adapters. In one embodiment the I O controllers include a USB Universal Serial Bus adapter for controlling USB peripherals and or an IEEE 1394 bus adapter for controlling IEEE 1394 peripherals.

In one embodiment the memory includes one or more of ROM Read Only Memory volatile RAM Random Access Memory and non volatile memory such as hard drive flash memory etc.

Volatile RAM is typically implemented as dynamic RAM DRAM which requires power continually in order to refresh or maintain the data in the memory. Non volatile memory is typically a magnetic hard drive a magnetic optical drive an optical drive e.g. a DVD RAM or other type of memory system which maintains data even after power is removed from the system. The non volatile memory may also be a random access memory.

The non volatile memory can be a local device coupled directly to the rest of the components in the data processing system. A non volatile memory that is remote from the system such as a network storage device coupled to the data processing system through a network interface such as a modem or Ethernet interface can also be used.

In this description some functions and operations are described as being performed by or caused by software code to simplify description. However such expressions are also used to specify that the functions result from execution of the code instructions by a processor such as a microprocessor.

Alternatively or in combination the functions and operations as described here can be implemented using special purpose circuitry with or without software instructions such as using Application Specific Integrated Circuit ASIC or Field Programmable Gate Array FPGA . Embodiments can be implemented using hardwired circuitry without software instructions or in combination with software instructions. Thus the techniques are limited neither to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

While one embodiment can be implemented in fully functioning computers and computer systems various embodiments are capable of being distributed as a computing product in a variety of forms and are capable of being applied regardless of the particular type of machine or computer readable media used to actually effect the distribution.

At least some aspects disclosed can be embodied at least in part in software. That is the techniques may be carried out in a computer system or other data processing system in response to its processor such as a microprocessor executing sequences of instructions contained in a memory such as ROM volatile RAM non volatile memory cache or a remote storage device.

Routines executed to implement the embodiments may be implemented as part of an operating system or a specific application component program object module or sequence of instructions referred to as computer programs. The computer programs typically include one or more instructions set at various times in various memory and storage devices in a computer and that when read and executed by one or more processors in a computer cause the computer to perform operations necessary to execute elements involving the various aspects.

A machine readable medium can be used to store software and data which when executed by a data processing system causes the system to perform various methods. The executable software and data may be stored in various places including for example ROM volatile RAM non volatile memory and or cache. Portions of this software and or data may be stored in any one of these storage devices. Further the data and instructions can be obtained from centralized servers or peer to peer networks. Different portions of the data and instructions can be obtained from different centralized servers and or peer to peer networks at different times and in different communication sessions or in a same communication session. The data and instructions can be obtained in entirety prior to the execution of the applications. Alternatively portions of the data and instructions can be obtained dynamically just in time when needed for execution. Thus it is not required that the data and instructions be on a machine readable medium in entirety at a particular instance of time.

Examples of computer readable media include but are not limited to recordable and non recordable type media such as volatile and non volatile memory devices read only memory ROM random access memory RAM flash memory devices floppy and other removable disks magnetic disk storage media optical storage media e.g. Compact Disk Read Only Memory CD ROMS Digital Versatile Disks DVDs etc. among others. The computer readable media may store the instructions.

The instructions may also be embodied in digital and analog communication links for electrical optical acoustical or other forms of propagated signals such as carrier waves infrared signals digital signals etc. However propagated signals such as carrier waves infrared signals digital signals etc. are not tangible machine readable medium and are not configured to store instructions.

In general a machine readable medium includes any mechanism that provides i.e. stores and or transmits information in a form accessible by a machine e.g. a computer network device personal digital assistant manufacturing tool any device with a set of one or more processors etc. .

In various embodiments hardwired circuitry may be used in combination with software instructions to implement the techniques. Thus the techniques are neither limited to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

The description and drawings are illustrative and are not to be construed as limiting. The present disclosure is illustrative of inventive features to enable a person skilled in the art to make and use the techniques. Various features as described herein should be used in compliance with all current and future rules laws and regulations related to privacy security permission consent authorization and others. Numerous specific details are described to provide a thorough understanding. However in certain instances well known or conventional details are not described in order to avoid obscuring the description. References to one or an embodiment in the present disclosure are not necessarily references to the same embodiment and such references mean at least one.

The use of headings herein is merely provided for ease of reference and shall not be interpreted in any way to limit this disclosure or the following claims.

Reference to one embodiment or an embodiment means that a particular feature structure or characteristic described in connection with the embodiment is included in at least one embodiment of the disclosure. The appearances of the phrase in one embodiment in various places in the specification are not necessarily all referring to the same embodiment and are not necessarily all referring to separate or alternative embodiments mutually exclusive of other embodiments. Moreover various features are described which may be exhibited by one embodiment and not by others. Similarly various requirements are described which may be requirements for one embodiment but not other embodiments. Unless excluded by explicit description and or apparent incompatibility any combination of various features described in this description is also included here. For example the features described above in connection with in one embodiment or in some embodiments can be all optionally included in one implementation except where the dependency of certain features on other features as apparent from the description may limit the options of excluding selected features from the implementation and incompatibility of certain features with other features as apparent from the description may limit the options of including selected features together in the implementation.

In the foregoing specification the disclosure has been described with reference to specific exemplary embodiments thereof. It will be evident that various modifications may be made thereto without departing from the broader spirit and scope as set forth in the following claims. The specification and drawings are accordingly to be regarded in an illustrative sense rather than a restrictive sense.

