---

title: Apparatus, method and computer program product for error correction in variably reliable and/or hierarchical networks
abstract: A file is multicast from an error-correcting multicast apparatus to a plurality of endpoints forming a first multicast group, over a network segmented into at least second and third multicast groups. The second and third multicast groups are subsets of the first multicast group. Given ones of the endpoints are assigned to the second and third multicast groups based on likelihood of experiencing similar errors. At the error-correcting multicast apparatus, over the network, a retransmission request is obtained from a first one of the endpoints, based on at least one of loss and corruption of a portion of the file during the multicasting of the file to the first one of the endpoints. The portion of the file is retransmitted, via multicasting, over the network, to one of the second and third multicast groups.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09621934&OS=09621934&RS=09621934
owner: TIME WARNER CABLE ENTERPRISES LLC
number: 09621934
owner_city: New York
owner_country: US
publication_date: 20140820
---
The present invention relates generally to communications systems and methods and more particularly to error correction in communications networks and the like.

Communication networks are subject to errors being introduced during transmission from the source to a receiver for example due to noise or a failure of the transmission cable. Error detection techniques allow detecting these errors while error correction seeks to permit reconstruction of the original data.

One non limiting example of a network which is potentially subject to errors is a cable television network.

Principles of the present invention provide error correction in variably reliable and or hierarchical networks. In one aspect an exemplary method includes the step of multicasting a file from an error correcting multicast apparatus to a plurality of endpoints including a first multicast group over a network segmented into at least second and third multicast groups. The second and third multicast groups are subsets of the first multicast group. Given ones of the endpoints are assigned to the second and third multicast groups based on likelihood of experiencing similar errors. Further steps include obtaining at the error correcting multicast apparatus over the network a retransmission request from a first one of the endpoints based on at least one of loss and corruption of a portion of the file during the multicasting of the file to the first one of the endpoints and retransmitting the portion of the file via multicasting over the network to one of the second and third multicast groups.

In another aspect an error correcting multicast apparatus includes a memory at least one processor coupled to the memory and a non transitory persistent storage medium which contains instructions which when loaded into the memory configure the at least one processor to be operative to perform the method steps just described.

In still another aspect another exemplary method includes receiving a multicast of a file from an error correcting multicast apparatus to a first multicast group. The multicast is received at one of a plurality of endpoints forming the first multicast group over a network segmented into at least second and third multicast groups. The second and third multicast groups are subsets of the first multicast group and given ones of the endpoints are assigned to the second and third multicast groups based on likelihood of experiencing similar errors. Further steps include dispatching to the error correcting multicast apparatus over the network a retransmission request from the one of the endpoints based on at least one of loss and corruption of a portion of the file during the multicasting of the file to the one of the endpoints and receiving at the one of the endpoints a retransmission of the portion of the file via multicasting from the error correcting multicast apparatus over the network to one of the second and third multicast groups.

In a further aspect a multicast network endpoint is provided for use as one of a plurality of endpoints including a first multicast group within a network segmented into at least second and third multicast groups. The second and third multicast groups are subsets of the first multicast group and given ones of the endpoints are assigned to the second and third multicast groups based on likelihood of experiencing similar errors. The multicast network endpoint includes a memory at least one processor coupled to the memory and a non transitory persistent storage medium which contains instructions which when loaded into the memory configure the at least one processor to be operative to perform the method steps just described.

As used herein facilitating an action includes performing the action making the action easier helping to carry the action out or causing the action to be performed. Thus by way of example and not limitation instructions executing on one processor might facilitate an action carried out by instructions executing on a remote processor by sending appropriate data or commands to cause or aid the action to be performed. For the avoidance of doubt where an actor facilitates an action by other than performing the action the action is nevertheless performed by some entity or combination of entities.

At least a portion of one or more embodiments of the invention or elements thereof can be implemented in the form of an article of manufacture including a machine readable medium that contains one or more programs which when executed implement one or more method steps set forth herein that is to say a computer program product including a tangible computer readable recordable storage medium or multiple such media with computer usable program code for performing the method steps indicated. Furthermore at least a portion of one or more embodiments of the invention or elements thereof can be implemented in the form of an apparatus including a memory and at least one processor that is coupled to the memory and operative to perform or facilitate performance of exemplary method steps. Yet further in another aspect at least a portion of one or more embodiments of the invention or elements thereof can be implemented in the form of means for carrying out one or more of the method steps described herein the means can include i specialized hardware module s ii software module s stored in a tangible computer readable recordable storage medium or multiple such media and implemented on a hardware processor or iii a combination of i and ii any of i iii implement the specific techniques set forth herein. The means do not include a transmission medium per se or a disembodied signal per se.

Techniques of the present invention can provide substantial beneficial technical effects. For example one or more embodiments provide one or more of 

These and other features and advantages of the present invention will become apparent from the following detailed description of illustrative embodiments thereof which is to be read in connection with the accompanying drawings.

Many different kinds of networks can benefit from error correction. Internet Protocol IP services such as data services may be provided over a variety of networks. Purely by way of example and not limitation some embodiments will be shown in the context of a cable multi service operator MSO providing data services as well as entertainment services. shows an exemplary system according to an aspect of the invention. System includes a regional data center RDC and one or more divisions represented by division head ends . RDC and head ends are interconnected by a network by way of example and not limitation a dense wavelength division multiplex DWDM network. Elements on network may be operated for example by or on behalf of a cable MSO and may be interconnected with a global system of interconnected computer networks that use the standardized Internet Protocol Suite TCP IP transfer control protocol Internet protocol commonly called the Internet for example via router . In one or more non limiting exemplary embodiments router is a point of presence POP router for example of the kind available from Juniper Networks Inc. Sunnyvale Calif. USA.

Head ends may each include a head end router HER which interfaces with network . Head end routers are omitted from figures below to avoid clutter.

RDC may include one or more provisioning servers PS one or more Video Servers VS one or more content servers CS and one or more e mail servers ES . The same may be interconnected to one or more RDC routers RR by one or more multi layer switches MLS . RDC routers interconnect with network .

A national data center NDC is provided in some instances for example between router and Internet . In one or more embodiments such an NDC may consolidate at least some functionality from head ends and or regional data centers. For example such an NDC might include one or more VOD servers switched digital video SDV functionality gateways to obtain content e.g. program content from various sources including cable feeds and or satellite and so on.

Furthermore there may be multiple e.g. two national data centers and many regional data centers only one of each is shown to avoid cluttering the drawings.

The data application origination point comprises any medium that allows data and or applications such as a VOD based or Watch TV application to be transferred to a distribution server for example over network . This can include for example a third party data source application vendor website compact disk read only memory CD ROM external network interface mass storage device e.g. Redundant Arrays of Inexpensive Disks RAID system etc. Such transference may be automatic initiated upon the occurrence of one or more specified events such as the receipt of a request packet or acknowledgement ACK performed manually or accomplished in any number of other modes readily recognized by those of ordinary skill given the teachings herein. For example in one or more embodiments network may correspond to network of and the data and application origination point may be for example within NDC RDC or on the Internet . Head end HFC network and CPEs thus represent the divisions which were represented by division head ends in .

The application distribution server comprises a computer system where such applications can enter the network system. Distribution servers per se are well known in the networking arts and accordingly not described further herein.

The VOD server comprises a computer system where on demand content can be received from one or more of the aforementioned data sources and enter the network system. These servers may generate the content locally or alternatively act as a gateway or intermediary from a distant source.

The CPE includes any equipment in the customers premises or other appropriate locations that can be accessed by a distribution server or a cable modem termination system discussed below with regard to . Non limiting examples of CPE are set top boxes and high speed cable modems for providing high bandwidth Internet access in premises such as homes and businesses.

Also included for example in head end is a dynamic bandwidth allocation device DBWAD such as a global session resource manager which is itself a non limiting example of a session resource manager.

It will be appreciated that while a bar or bus LAN topology is illustrated any number of other arrangements e.g. ring star etc. may be used consistent with the invention. It will also be appreciated that the head end configuration depicted in is high level conceptual architecture and that each multi service operator MSO may have multiple head ends deployed using custom architectures.

The architecture of further includes a multiplexer encrypter modulator MEM coupled to the HFC network adapted to condition content for transmission over the network. The distribution servers are coupled to the LAN which provides access to the MEM and network via one or more file servers . The VOD servers are coupled to the LAN although other architectures may be employed such as for example where the VOD servers are associated with a core switching device such as an 802.3z Gigabit Ethernet device or the VOD servers could be coupled to LAN . Since information is typically carried across multiple channels the head end should be adapted to acquire the information for the carried channels from various sources. Typically the channels being delivered from the head end to the CPE downstream are multiplexed together in the head end and sent to neighborhood hubs refer to description of via a variety of interposed network components.

Content e.g. audio video etc. is provided in each downstream in band channel associated with the relevant service group. Note that in the context of data communications internet data is passed both downstream and upstream. To communicate with the head end or intermediary node e.g. hub server the CPE may use the out of band OOB or DOCSIS Data Over Cable Service Interface Specification channels registered mark of Cable Television Laboratories Inc. 400 Centennial Parkway Louisville Colo. 80027 USA and associated protocols e.g. DOCSIS 1.x 2.0 3.0 or 3.1 . The OpenCable Application Platform OCAP 1.0 2.0 3.0 and subsequent specification Cable Television laboratories Inc. provides for exemplary networking protocols both downstream and upstream although the invention is in no way limited to these approaches. All versions of the DOCSIS and OCAP specifications are expressly incorporated herein by reference in their entireties for all purposes.

Furthermore in this regard DOCSIS is an international telecommunications standard that permits the addition of high speed data transfer to an existing cable TV CATV system. It is employed by many cable television operators to provide Internet access cable Internet over their existing hybrid fiber coaxial HFC infrastructure.

It will also be recognized that multiple servers broadcast VOD or otherwise can be used and disposed at two or more different locations if desired such as being part of different server farms . These multiple servers can be used to feed one service group or alternatively different service groups. In a simple architecture a single server is used to feed one or more service groups. In another variant multiple servers located at the same location are used to feed one or more service groups. In yet another variant multiple servers disposed at different location are used to feed one or more service groups.

In some instances material may also be obtained from a satellite feed such material is demodulated and decrypted in block and fed to block . Conditional access system may be provided for access control purposes. Network management system may provide appropriate management functions. Note also that signals from MEM and upstream signals from network that have been demodulated and split in block are fed to CMTS and OOB system .

Also included in are a global session resource manager GSRM a Mystro Application Server A and a business management system all of which are coupled to LAN . GSRM is one specific form of a DBWAD and is a non limiting example of a session resource manager.

An ISP DNS server could be located in the head end as shown at but it can also be located in a variety of other places. One or more DHCP server s can also be located where shown or in different locations.

As shown in the network of comprises a fiber coax arrangement wherein the output of the MEM of is transferred to the optical domain such as via an optical transceiver at the head end or further downstream . The optical domain signals are then distributed over a fiber network to a fiber node which further distributes the signals over a distribution network typically coax to a plurality of local servicing nodes . This provides an effective 1 to N expansion of the network at the local service end. Each node services a number of CPEs . Further reference may be had to US Patent Publication 2007 0217436 of Markley et al. entitled Methods and apparatus for centralized content and data delivery the complete disclosure of which is expressly incorporated herein by reference in its entirety for all purposes. In one or more embodiments the CPE includes a cable modem such as a DOCSIS compliant cable modem DCCM . Please note that the number of CPE per node may be different than the number of nodes .

A video or other content network that also delivers data is but one non limiting example of a context where one or more embodiments could be implemented. US Patent Publication 2003 0056217 of Paul D. Brooks entitled Technique for Effectively Providing Program Material in a Cable Television System the complete disclosure of which is expressly incorporated herein by reference for all purposes describes one exemplary broadcast switched digital architecture although it will be recognized by those of ordinary skill that other approaches and architectures may be substituted. In a cable television system in accordance with the Brooks invention program materials are made available to subscribers in a neighborhood on an as needed basis. Specifically when a subscriber at a set top terminal selects a program channel to watch the selection request is transmitted to a head end of the system. In response to such a request a controller in the head end determines whether the material of the selected program channel has been made available to the neighborhood. If it has been made available the controller identifies to the set top terminal the carrier which is carrying the requested program material and to which the set top terminal tunes to obtain the requested program material. Otherwise the controller assigns an unused carrier to carry the requested program material and informs the set top terminal of the identity of the newly assigned carrier. The controller also retires those carriers assigned for the program channels which are no longer watched by the subscribers in the neighborhood. Note that reference is made herein for brevity to features of the Brooks invention it should be understood that no inference should be drawn that such features are necessarily present in all claimed embodiments of Brooks. The Brooks invention is directed to a technique for utilizing limited network bandwidth to distribute program materials to subscribers in a community access television CATV system. In accordance with the Brooks invention the CATV system makes available to subscribers selected program channels as opposed to all of the program channels furnished by the system as in prior art. In the Brooks CATV system the program channels are provided on an as needed basis and are selected to serve the subscribers in the same neighborhood requesting those channels.

US Patent Publication 2010 0313236 of Albert Straub entitled TECHNIQUES FOR UPGRADING SOFTWARE IN A VIDEO CONTENT NETWORK the complete disclosure of which is expressly incorporated herein by reference for all purposes provides additional details on the aforementioned dynamic bandwidth allocation device .

US Patent Publication 2009 0248794 of William L. Helms entitled SYSTEM AND METHOD FOR CONTENT SHARING the complete disclosure of which is expressly incorporated herein by reference for all purposes provides additional details on CPE in the form of a converged premises gateway device. Related aspects are also disclosed in US Patent Publication 2007 0217436 of Markley et al entitled METHODS AND APPARATUS FOR CENTRALIZED CONTENT AND DATA DELIVERY the complete disclosure of which is expressly incorporated herein by reference for all purposes.

It is worth noting that until fairly recently the cable network was predominantly a vehicle for delivering entertainment. With the advent of the Internet and the rise in demand for broadband two way access the cable industry began to seek new ways of utilizing its existing plant. Pure coaxial coax cable networks were replaced with hybrid fiber networks HFNs using optical fiber from the head end to the demarcation with the subscriber coax usually at a fiber node . Currently a content based network a non limiting example of which is a cable television network may afford access to a variety of services besides television for example broadband Internet access telephone service and the like.

One significant issue for a cable operator desiring to provide digital service is the configuration of its network. Designed for one way delivery of broadcast signals the existing cable network topology was optimized for downstream only i.e. towards the subscriber service. New equipment had to be added to the network to provide two way communication. To reduce the cost of this equipment and to simplify the upgrade of the broadcast cable for two way digital traffic standards were developed for a variety of new cable based services. The first of these standards the aforementioned Data Over Cable System Interface Standard DOCSIS standard was released in 1998. DOCSIS establishes standards for cable modems and supporting equipment. DOCSIS Data Over Cable Service Interface Specification is a registered mark of Cable Television Laboratories Inc. 400 Centennial Parkway Louisville Colo. 80027 USA and may be referred to in this application in capital letters without the symbol for convenience.

Reference should now be had to which presents a block diagram of a premises network interfacing with a head end of an MSO or the like providing Internet access. An exemplary advanced wireless gateway comprising CPE is depicted as well. It is to be emphasized that the specific form of CPE shown in is exemplary and non limiting and shows a number of optional features. Many other types of CPE can be employed for example a DOCSIS cable modem with or without the other functionality depicted in DSL modem plain vanilla set top terminal and the like.

Exemplary CPE includes an advanced wireless gateway which connects to a head end or other hub of a network such as a video content network of an MSO or the like. The head end is coupled also to an internet e.g. the Internet which is located external to the head end such as via an Internet IP backbone or gateway not shown .

The head end is in the illustrated embodiment coupled to multiple households or other premises including the exemplary illustrated household . In particular the head end for example a cable modem termination system thereof is coupled via the aforementioned HFC network and local coaxial cable or fiber drop to the premises including the consumer premises equipment CPE . The exemplary CPE is in signal communication with any number of different devices including e.g. a wired telephony unit a Wi Fi or other wireless enabled phone a Wi Fi or other wireless enabled laptop a session initiation protocol SIP phone an H.323 terminal or gateway etc. Additionally the CPE is also coupled to a digital video recorder DVR e.g. over coax in turn coupled to television via a wired or wireless interface e.g. cabling PAN or 802.15 UWB micro net etc. . CPE is also in communication with a network here an Ethernet network compliant with IEEE Std. 802.3 although any number of other network protocols and topologies could be used on which is a personal computer PC .

Other non limiting exemplary devices that CPE may communicate with include a printer for example over a universal plug and play UPnP interface and or a game console for example over a multimedia over coax alliance MoCA interface.

In some instances CPE is also in signal communication with one or more roaming devices generally represented by block .

A home LAN HLAN is created in the exemplary embodiment which may include for example the network formed over the installed coaxial cabling in the premises the Wi Fi network and so forth.

During operation the CPE exchanges signals with the head end over the interposed coax and or other e.g. fiber bearer medium. The signals include e.g. Internet traffic IPv4 or IPv6 digital programming and other digital signaling or content such as digital packet based e.g. VoIP telephone service. The CPE then exchanges this digital information after demodulation and any decryption and any demultiplexing to the particular system s to which it is directed or addressed. For example in some cases a MAC address or IP address can be used as the basis of directing traffic within the client side environment .

Any number of different data flows may occur within the network depicted in . For example the CPE may exchange digital telephone signals from the head end which are further exchanged with the telephone unit the Wi Fi phone or one or more roaming devices . The digital telephone signals may be IP based such as Voice over IP VoIP or may utilize another protocol or transport mechanism. The well known session initiation protocol SIP may be used for example in the context of a SIP phone for making multi media calls. The network may also interface with a cellular or other wireless system such as for example a 3G IMS IP multimedia subsystem system in order to provide multimedia calls between a user or consumer in the household domain e.g. using a SIP phone or H.323 terminal and a mobile 3G telephone or personal media device PMD user via that user s radio access network RAN .

The CPE may also exchange Internet traffic e.g. TCP IP and other packets with the head end which is further exchanged with the Wi Fi laptop the PC one or more roaming devices or other device. CPE may also receive digital programming that is forwarded to the DVR or to the television . Programming requests and other control information may be received by the CPE and forwarded to the head end as well for appropriate handling.

The illustrated CPE can assume literally any discrete form factor including those adapted for desktop floor standing or wall mounted use or alternatively may be integrated in whole or part e.g. on a common functional basis with other devices if desired.

Again it is to be emphasized that every embodiment need not necessarily have all the elements shown in as noted the specific form of CPE shown in is exemplary and non limiting and shows a number of optional features. Yet again many other types of CPE can be employed for example a cable modem DSL modem and the like.

It will be recognized that while a linear or centralized bus architecture is shown as the basis of the exemplary embodiment of other bus architectures and topologies may be used. For example a distributed or multi stage bus architecture may be employed. Similarly a fabric or other mechanism e.g. crossbar switch RAPIDIO interface non blocking matrix TDMA or multiplexed system etc. may be used as the basis of at least some of the internal bus communications within the device. Furthermore many if not all of the foregoing functions may be integrated into one or more integrated circuit IC devices in the form of an ASIC application specific integrated circuit FPGA field programmable gate array or system on a chip SoC . Myriad other architectures well known to those in the data processing and computer arts may accordingly be employed.

Yet again it will also be recognized that the CPE configuration shown is essentially for illustrative purposes and various other configurations of the CPE are possible. For example the CPE in may not include all of the elements shown and or may include additional elements and interfaces such as for example an interface for the HomePlug A V standard which transmits digital data over power lines a PAN e.g. 802.15 Bluetooth or other short range wireless interface for localized data communication etc.

A suitable number of standard 10 100 1000 Base T Ethernet ports for the purpose of a Home LAN connection are provided in the exemplary device of however it will be appreciated that other rates e.g. Gigabit Ethernet or 10 Gig E and local networking protocols e.g. MoCA USB etc. may be used. These interfaces may be serviced via a WLAN interface wired RJ 45 ports or otherwise. The CPE can also include a plurality of RJ 11 ports for telephony interface as well as a plurality of USB e.g. USB 2.0 ports and IEEE 1394 Firewire ports. S video and other signal interfaces may also be provided if desired.

During operation of the CPE software located in the storage unit is run on the microprocessor using the memory unit e.g. a program memory within or external to the microprocessor . The software controls the operation of the other components of the system and provides various other functions within the CPE. Other system software firmware may also be externally reprogrammed such as using a download and reprogramming of the contents of the flash memory replacement of files on the storage device or within other non volatile storage etc. This allows for remote reprogramming or reconfiguration of the CPE by the MSO or other network agent.

The RF front end of the exemplary embodiment comprises a cable modem of the type known in the art. In some cases the CPE just includes the cable modem and omits one or more of the other features. Content or data normally streamed over the cable modem can be received and distributed by the CPE such as for example packetized video e.g. IPTV . The digital data exchanged using RF front end includes IP or other packetized protocol traffic that provides access to internet service. As is well known in cable modem technology such data may be streamed over one or more dedicated QAMs resident on the HFC bearer medium or even multiplexed or otherwise combined with QAMs allocated for content delivery etc. The packetized e.g. IP traffic received by the CPE may then be exchanged with other digital systems in the local environment or outside this environment by way of a gateway or portal via e.g. the Wi Fi interface Ethernet interface or plug and play PnP interface .

Additionally the RF front end modulates encrypts multiplexes as required and transmits digital information for receipt by upstream entities such as the CMTS or a network server. Digital data transmitted via the RF front end may include for example MPEG 2 encoded programming data that is forwarded to a television monitor via the video interface . Programming data may also be stored on the CPE storage unit for later distribution by way of the video interface or using the Wi Fi interface Ethernet interface Firewire IEEE Std 1394 USB USB2 or any number of other such options.

Other devices such as portable music players e.g. MP3 audio players may be coupled to the CPE via any number of different interfaces and music and other media files downloaded for portable use and viewing.

In some instances the CPE includes a DOCSIS cable modem for delivery of traditional broadband Internet services. This connection can be shared by all Internet devices in the premises e.g. Internet protocol television IPTV devices PCs laptops etc. as well as by roaming devices . In addition the CPE can be remotely managed such as from the head end or another remote network agent to support appropriate IP services.

In some instances the CPE also creates a home Local Area Network LAN utilizing the existing coaxial cable in the home. For example an Ethernet over coax based technology allows services to be delivered to other devices in the home utilizing a frequency outside e.g. above the traditional cable service delivery frequencies. For example frequencies on the order of 1150 MHz could be used to deliver data and applications to other devices in the home such as PCs PMDs media extenders and set top boxes. The coaxial network is merely the bearer devices on the network utilize Ethernet or other comparable networking protocols over this bearer.

The exemplary CPE shown in acts as a Wi Fi access point AP thereby allowing Wi Fi enabled devices to connect to the home network and access Internet media and other resources on the network. This functionality can be omitted in one or more embodiments.

In one embodiment Wi Fi interface comprises a single wireless access point WAP running multiple m service set identifiers SSIDs . One or more SSIDs can be set aside for the home network while one or more SSIDs can be set aside for roaming devices .

A premises gateway software management package application is also provided to control configure monitor and provision the CPE from the cable head end or other remote network node via the cable modem DOCSIS interface. This control allows a remote user to configure and monitor the CPE and home network.

The MoCA interface can be configured for example in accordance with the MoCA 1.0 1.1 or 2.0 specifications.

As discussed above the optional Wi Fi wireless interface is in some instances also configured to provide a plurality of unique service set identifiers SSIDs simultaneously. These SSIDs are configurable locally or remotely such as via a web page.

In addition to broadcast content e.g. video programming the systems of also deliver Internet data services using the Internet protocol IP although other protocols and transport mechanisms of the type well known in the digital communication art may be substituted. The IP packets are typically transmitted on RF channels that are different that the RF channels used for the broadcast video and audio programming although this is not a requirement. The CPE are each configured to monitor the particular assigned RF channel such as via a port or socket ID address or other such mechanism for IP packets intended for the subscriber premises address that they serve.

One or more embodiments provide error correction in variably reliable networks and or hierarchical. For example one or more embodiments relate to correcting errors in a multicast network wherein the reliability is variable across the network from source to destination and or where the network exhibits a hierarchical topology.

Current research for delivery of video to next generation set top boxes is centered around multicast transmission of H.264 video specifically as a time series of pre segmented files for ultimate consumption by devices that want HLS HTTP Live Streaming video. HLS documented in IETF Internet Draft HTTP Live Streaming which is expressly incorporated herein by reference in its entirety for all purposes sets forth techniques for delivery of a transport stream that is chunked into files each of which contains several seconds of encoded video.

Normal delivery of HLS is over hypertext transfer protocol HTTP from end to end which implies reliable delivery guaranteed by Transmission Control Protocol TCP . When sending over multicast however these files are a sequence of User Datagram Protocol UDP packets UDP supports the one to many model implied by multicast without the guaranteed delivery assurances offered by TCP. When examined by the receiver pieces of the file may be found to have been damaged corrupted or lost in transit. H.264 decoders are much less tolerant of missing or corrupt data than existing MPEG 2 QAM motion picture expert group 2 quadrature amplitude modulation digital set top boxes and generally require a greater degree of assurance that the data being delivered is complete and correct.

One or more embodiments are particularly useful i where the likelihood of data loss is not a constant throughout the network variable reliability and or ii where when one endpoint has an error an inference can be drawn that one or more other endpoints are also likely to have suffered the same error e.g. due to hierarchical nature of the network . For example in a non hierarchical network with variable reliability if a retransmit request was received from an endpoint in one of the relatively low reliability regions an initial response might be to send the retransmission only to endpoints within that same relatively low reliability region. Such a non hierarchical network might have less concern with bandwidth wastage than in a hierarchical network.

Consider by way of a non limiting example above which exhibits both a hierarchical structure and variable reliability. The backbone e.g. is designed to tolerate failures without traffic impact and great care is taken to avoid packet loss in routine operation. Nevertheless in a fiber cut scenario there will be packet loss for a very short period of time until the network re converges. In regional and market networks reliability is similar to the backbone e.g. networks downstream from RDCs but still utilizing fiber optic technology .

The HFC edge may typically have lower reliability however particularly in the coax component electrical noise imperfect connections and the nature of RF transmission result in a bit error rate that is sufficiently high that all layer 1 layer 2 protocols that operate in this environment see International Telecommunication Union J.83 Digital multi programme systems for television sound and data services for cable distribution QAM and DOCSIS specifications incorporate Forward Error Correction FEC to mitigate the problem. Unfortunately FEC is not 100 perfect and errors and or data loss still happen periodically.

ITU T J.83 12 2007 Digital multi programme systems for television sound and data services for cable distribution is expressly incorporated herein by reference in its entirety for all purposes.

As discussed further below in the section entitled Hierarchical Nature of Exemplary HFC Network because of the hierarchical nature of the exemplary HFC network an error happening in one place can affect everything downstream of that point. Advantageously one or more embodiments benefit from assuming that when one retransmit request is received it should be sent to all hosts within a given scope of the network.

Because problems in the network of are significantly more likely to happen on the edge network they are likely to impact a relatively small group of users geographically and topologically proximate to each other. One or more embodiments provide a technique to re send lost or corrupted data in a way that leverages multicast efficiencies while avoiding the waste of bandwidth that would result if the corrections were sent to the comparatively huge user population that does not need them. Furthermore with regard to leveraging multicast efficiencies the skilled artisan will appreciate that multicast allows for a single stream of data to be replicated to multiple downstream users within the network rather than at the sender. In multicast one to many or many to many distribution information is addressed to a group of destination endpoints simultaneously. In contrast unicast transmission is the sending of messages to a single network destination identified by a unique address.

Now continuing in if an error occurs at fiber node then all devices e.g. CPE serviced by local service nodes 1 through n numbered will experience that error and request a retransmit. If an error occurs at local service node 1 then all CPE serviced by local service node 1 will experience that error but CPE serviced by local service nodes 2 through n will not. Generally a failure at one point will impact downstream points but not upstream or parallel components.

It is worth noting that current practice in MPEG 2 QAM based video systems is to simply accept that data periodically gets lost or corrupted. Indeed J.83 defines a term of art Quasi Error Free QEF that states an acceptable error rate of approximately one uncorrected error event per transmission hour.

IETF protocols such as Internet Engineering Task Force IETF RFC 6968 FCAST Object Delivery for the Asynchronous Layered Coding ALC and NACK Oriented Reliable Multicast NORM Protocols expressly incorporated herein by reference in its entirety for all purposes center on either FEC based approaches NACK based approaches or a combination of the two with an understanding that corrections when transmitted via multicast will be sent on the same multicast group as the main bearer traffic. This approach does not scale well when the receivers exhibit different loss characteristics. It should be noted at this point that ACK is short for acknowledgement while NACK refers to Negative ACKnowledgment. NACK based approaches operate on the assumption that all data has been received without explicit acknowledgement of each packet expecting a negative acknowledgment of any packets which were not received or were found to be corrupted. Forward Error Correction FEC based approaches assume that the amount of error correction overhead present is enough to reconstruct all but the most severe errors using traditional Forward Error Correction methods and thus additional error correction methods are not necessary.

The aforementioned FEC based approaches include RFC 5775 Asynchronous Layered Coding ALC Protocol Instantiation RFC 5651 Layered Coding Transport LET Building Block and RFC 6363 Forward Error Correction FEC Framework all of which are expressly incorporated herein by reference in their entireties for all purposes. The aforementioned NACK based approaches include NORM RFC 5740 NACK Oriented Reliable Multicast NORM Transport Protocol expressly incorporated herein by reference in its entirety for all purposes.

Other possibilities include unicast fills of partial or full files delivered over traditional unicast TCP methods as noted above unicast transmission is the sending of messages to a single network destination identified by a unique address. .

It is worth noting that although one or more embodiments are of particular interest in an HFC environment and thus to MSOs worldwide this is not a limitation and other embodiments can be applied in other similar multicast content delivery networks or other networks in which the clients suffer loss characteristics that can be grouped together based upon network topology or similar criteria.

In one or more embodiments a simple multicast file transfer protocol is enhanced by adding hash checksums in a non limiting exemplary embodiment SHA 256 of chunks or byte spans of the file such that when data is missing or has been corrupted in transport a particular block that needs to be filled can be identified. The skilled artisan will appreciate that hashing permits a rapid check for file segment integrity and eliminates the need for a bit for bit comparison which in any event is not possible where the source material is not already available at the endpoint . In a hashing scheme a hash is sent as well as the data and then the receiver independently calculates the hash on the received data. If this receiver calculated hash matches the hash sent from the transmitter it can be assumed that the data has been received correctly. One or more embodiments are directed to how to respond to retransmission requests regardless of how it has been determined that an error has occurred thus resulting in the retransmission request . One or more embodiments are directed to use with an un reliable transfer protocol e.g. multicast using UDP that lacks the built in capability to implement retransmission e.g. as is present in TCP . When using such an un reliable transfer protocol hashing to check for loss or corruption of data can be carried out for example above the protocol level at the level of the application that is waiting on the data application layer . Given the teachings herein the skilled artisan will be able to implement hashing or other techniques to detect errors resulting in retransmission requests that can be handled in accordance with aspects of the invention.

Now continuing in one or more embodiments as part of multicast receiver registration a second multicast group is joined that provides locally scoped e.g. one service group or one CMTS corrections for a plurality or perhaps all channels currently being received by that set of receivers regardless of the original multicast group upon which they were transmitted. This second multicast group may be referred to as a failure domain fill group. Furthermore in this regard during multicast receiver registration a multicast receiver joins a first multicast group for receiving multicast transmissions. The second multicast group that is joined is for purposes of receiving error corrections. By way of a non limiting example consider . One or more CPE serviced by local service node 1 one or more CPE serviced by local service node 2 and one or more CPE serviced by local service node n may all be part of the first multicast group say Group A for receiving multicast transmissions. The one or more CPE serviced by local service node 1 that are in Group A may join as their second multicast group Group B. The one or more CPE serviced by local service node 2 that are in Group A may join as their second multicast group Group C. The one or more CPE serviced by local service node n that are in Group A may join as their second multicast group Group D. 

Also as part of multicast receiver registration an address which may or may not be the Source specific multicast SSM source of the second stream i.e. the corrections fills is provided to which requests for fills and or corrections may be sent. One or more requests for fills from receivers that are part of the same failure domain fill group results in transmission of a single copy of the requested content on the second multicast group where it can be received by all affected receivers but not the whole world. For example suppose there are three CPE serviced by local service node 1 that are in Group A they have joined as their second multicast group Group B. If one of these three CPE sends a fill request the same will be transmitted to all three members of Group B but not to Group C or Group D.

When a multicast file receiver detects that a segment of a file is missing it communicates the request for retransmission to a retransmission arbiter device in the network this device can be on the server from which the multicast files originate or can be separate see discussion of below more generally the request for retransmission is directed to an error correcting multicast apparatus . By way of example and not limitation this request could travel by unicast UDP an HTTP REST connection sending on an upstream multicast group or any other standard way of sending a small message across an IP network either reliably or unreliably.

When the multicast transmitter receives a request for a retransmission it can process that request in a several ways. In the simplest model any retransmission can follow the multicast model described above. That is to say one retransmission request triggers an immediate and or automatic rebroadcast via multicast on the assumption that one retransmission request means that at least some other hosts have been affected but have not sent a retransmission request yet basically a preemptive approach. In another approach a specified number of unicast re transmit requests must be received before the multicast rebroadcast goes out. In this way an implementer can tune the solution to be optimized either for limiting bandwidth or for limiting the impact of corrupted data on end devices.

In some instances the retransmission arbiter device consolidates multiple identical overlapping or non identical requests for retransmission because multiple receivers detected the same error into one retransmission action. It is worth noting at this point that the retransmission arbiter device discussed further below is a logic machine to determine how to respond to retransmission requests. It can but need not be located on the same device that originated the content content server discussed below and has the logic to decide whether retransmissions should be immediate or delayed as well as which scope if more than one is available should be used to get the retransmission to the correct subset of devices.

In some cases the above described mechanism is replicated hierarchically. In this aspect wider area errors are appropriately handled on a second wide area multicast fill group by collaboration between a plurality of retransmission arbiter devices. Furthermore in this aspect in addition to the original content source one or more retransmission sources are also provided. For example each RDC can be provided with a regional retransmission source RRS each head end can be provided with a local retransmission source LRS . LRS can be located in a non limiting example on LAN in head end . Note that content server is in the general case different than content server . Note also that RRS could be located on the same physical and or virtual machine as content server or one of the other servers in RDC if desired.

Now continuing by way of example the n second multicast groups of local service nodes 1 to n serviced by fiber node may be joined into a superset and if the same error is noted from service nodes 1 and 2 retransmission may be to the superset i.e. all n local service nodes serviced by fiber node . Retransmission to all local service nodes serviced by the same fiber node or by the same CMTS may come from LRS in the corresponding head end . Retransmission of a broader scope may come from RRS . In general where retransmission sources are provided retransmission should preferably happen as locally to the error as possible to avoid over retransmission but far enough up in the hierarchy so that multiple devices don t have to carry out the same retransmission. It is also worth noting that some embodiments might not include RRS due to the high network reliability at the RDC level. On the other hand some embodiments will include RRS since even though an error is unlikely it would impact a large number of end users. Device discussed further below may also include logic to determine which retransmission source should undertake the retransmission.

One or more embodiments are of use for example where multicast techniques are employed for file distribution. The skilled artisan will appreciate that in this context multicast is used for streaming video not in the manner that HTTP is used to stream to an individual tablet or similar device but in essence as an alternative to distribute video around a network when the video is primarily linear. It is worth noting that in one or more embodiments although the distribution method is linear the video is consumed by multiple users at the same time not time shifted or on demand. Multicast distribution is typically not beneficial for time shifted video because of the statistical unlikelihood that multiple users are consuming a given piece of video content simultaneously and synchronously in other words watching the same point in the same content at the same time .

In using multicast one benefit of undertaking replication as the network is traversed is bandwidth savings. However when considering multicast techniques for less traditional file distribution applications for example use of multicast to distribute HLS video a number of challenges are encountered. One significant challenge in this context is error handling. In many current cases the protocol is designed to tolerate a certain amount of errors. For example the video CODEC can handle a certain number of lost frames before visual artifacts are noted. In other current cases additional overhead is added in the form of error correction to compensate for the lost data. However it is typically not possible with something like streaming video to go back and send corrections later because unless deep buffering is being carried out the moment when the lost data is needed passes by rapidly.

One non limiting exemplary application of one or more embodiments is to spray files non linearly. For example consider a CDN Content Distribution Network where it is required to pre load a number of files so as to be able to serve them out later when customers start requesting them.

A CDN is a group of devices in the network that undertake local service of content for example a server with a copy of a number of interesting files a specific definition of CDN is provided elsewhere herein . When a user requests the files typically through DNS or the like the CDN redirects the user to the closest server to the user so that this closest server serves the content to the user over the shortest distance. This typically results in the use of the least amount of network resources taking advantage of the proximity to provide a good customer experience. A CDN also allows for scaling up of distribution because it is not necessary to have huge centralized server farms to provide large amounts of the same content to multiple users. CDNs are used extensively in video distribution but are also used for other content for example localizing web page delivery and the like.

Currently the above discussed pre load of a number of files via a CDN is typically carried out via unicast. These kinds of files must be complete when transferred. Therefore if pieces are lost or corrupted in transit the end host will have to ask for retransmission. In current multicast solutions most existing systems either use i a unicast backchannel to request retransmission and then the server re sends the missing or corrupted portions as unicast not multicast or ii a unicast backchannel to request retransmission and then the server multicasts the missing or corrupted portions to everybody i.e. all members of the original multicast group .

In contrast one or more embodiments leverage the network construction and topology to address the issue more intelligently.

Consider an average cable network. There are different places where there is a greater likelihood of error s and there are different places where error s are more likely to be shared among multiple devices. As the network is traversed from head to tail consider that many parts of the network are all fiber and thus the likelihood of error s is lower than for coaxial portions. However if error s do occur in these fiber portions they will impact a much larger subset of end destinations because the fiber regions are prior to much of the replication that takes place in the network. When travelling further down into the network on an individual head end or node there are places where the network is still fiber so there is also less risk of packet loss to occur because of the reliability of fiber. When transferring to the copper e.g. transfer from fiber to coaxial at node in transmissions are much more susceptible to interference or other problems and there may be a local subset of customers with significant errors. For example these could be customers serviced by the same local node fiber node or CMTS .

When a request for retransmission is obtained from one of those customers one or more embodiments assume that devices on the same wire e.g. same local node fiber node or CMTS will need a re transmission. In response one or more embodiments carry out a locally scoped re transmission. In one or more embodiments instead of prior art unicasts at different times which waste bandwidth another multicast group is added. Suppose there are three multicast groups representing Local Node 1 Local Node 2 and Local Node n. Local Node 1 has an error while Local Node 2 and Local Node n do not. One or more embodiments only undertake the re transmission to the multicast group associated with Node A so that all the devices likely to have been impacted by that error will obtain a re transmission. If the re transmission is not needed in a particular case it can be dropped. For example suppose for Local Service Node 1 only CPE 1 and CPE n experienced the error CPE 2 did not. CPE 2 can drop the re transmission. The process just described allows advantage to be taken of the statistical likelihood that more than just the one host e.g. CPE or receiver that requested the retransmission was affected.

In case of a situation where Local Node 1 and Local Node 2 both had the same error it is possible to re transmit to both of the corresponding multicast groups different groups can be defined for different hierarchies within the network. Hierarchical boundaries can be identified where re transmission will or will not be undertaken based on the assumption that some number of users in that hierarchical boundary have experienced the error and therefore need the re transmission. For example in the case just described wherein Local Node 1 and Local Node 2 both had the same error rather than merely retransmitting to just Local Node 1 and Local Node 2 it may be appropriate to retransmit to Local Nodes 1 to n since it may be likely that the error experienced by both Local Node 1 and Local Node 2 is at the level of fiber node .

Thus it will be appreciated that logical groupings for multicasting re transmissions responsive to errors include from smallest to largest 

In one or more embodiments the next highest logical grouping at the NDC level is provided if the content is originated at a level of hierarchy above the NDC level otherwise the NDC level is in essence an all receivers case because the error occurred at the source.

Thus advantageously one or more embodiments provide a more granular error correction approach than the brute force method of multicasting the re transmission to the entire original group while realizing efficiency and bandwidth savings via granular use of multicast.

It will be appreciated that the lower numbered groups form subsets of the higher numbered groups. For example an RDC includes all nodes CMTS es and head ends in the region. When retransmission is made to the multicast group associated with the RDC it is made to everything below. In working down the hierarchy re transmissions are progressively smaller and more granular regarding the number of hosts for which the re transmission is being undertaken.

Consider how to determine what to include in each multicast group for re transmission. In one or more embodiments observe a level of correlation on re transmit requests and determine what actions to take based on the network hierarchy. In one non limiting exemplary embodiment to determine which multicast group s to send the corrections to initially respond only to the smallest possible multicast group for example all the devices that are served by a certain local service node. Then if another error of that type is obtained from a different local service node within the same fiber node send the correction s to all devices serviced by that fiber node. Then if another error of that type is obtained from a different fiber node serviced by the same CMTS send the correction s to all devices serviced by that CMTS. Then if another error of that type is obtained from a different CMTS in the same head end send the correction s to all devices serviced by that head end. This non limiting exemplary embodiment will typically be carried out as to retransmission scope without reference to a clock simply look at retransmission requests for the same data and where they originate from.

In another non limiting exemplary embodiment wait to carry out the re transmission for an arbitrary but short length of time to determine whether additional requests for correction are obtained. Then make a decision about where to re transmit based on information available at end of that time period. For example wait 150 milliseconds 150 milliseconds is an exemplary non limiting value and other values can be used in other embodiments comments on how to select a suitable value are provided elsewhere herein and if another retransmission request is received in that time take it into account in determining how wide the scope of the retransmission multicast should be. For example if you wait 150 milliseconds and another retransmission request is not received just send the retransmission to all the devices that are served by the local service node from which the first retransmission request was received. On the other hand if within the 150 milliseconds 

The difference between the first embodiment and the second a configurable time limit allows the implementer to trade off bandwidth savings and better correlation against more immediate pre emptive response.

Accordingly it will be appreciated that in one or more embodiments logic is provided for example on the apparatus optionally including server and or arbiter device thereof the logic is programmed to wait a certain time after receiving the first request for retransmission. If no other requests come in before the predetermined time expires assume that only the smallest multicast group associated with the error needs the re transmission if other requests for re transmission come in evaluate which multicast group s should receive the re transmission. This dynamic allocation of the size of the group to receive the correction is significant in one or more embodiments it is possible to size up or down as needed.

As discussed above some embodiments use hashes to identify when data has been corrupted or lost. Alternate approaches use forward error correction.

One or more embodiments are useful in a variety of applications where files are to be distributed via multicast but where errors cannot be tolerated. One non limiting example includes pre segmented files for ultimate consumption by devices that are to consume HLS video. Consider pre loading files onto a CDN for distribution. Such a CDN is not necessarily a traditional one residing somewhere inside the MSO network. In some instances multiple levels of CDN are involved. For example there may be a CDN at the head end and even a CDN in the customer s location. For example video files may be pre loaded onto a DVR for local consumption. Some embodiments are therefore of interest even down at the node or individual customer level. Furthermore one or more embodiments are not limited to distribution of video files although this is an advantageous application . One or more embodiments can be employed wherever reliable transport which need not be real time in nature is useful. Non limiting examples include sending new software new firmware or a new operating system to an STB or cable modem or router providing a software update for a PC or the like indeed wherever a large subset of the same devices are present in a network such that the same software or other files are to be distributed among them simultaneously wherever the inherent benefit of multicast rather than a large number e.g. hundreds of simultaneous unicast streams can be realized.

As used herein a CDN is defined as a large distributed system of servers deployed in multiple data centers across a network with the goal to serve content to end users with high availability and high performance from topologically proximate servers.

Furthermore in this regard the skilled artisan will appreciate that multicast is typically used where reliability is not needed gaps in the file can be tolerated or where additional unicast functionality is available to handle typical aspects of reliable transport such as over a TCP stream. TCP over multicast typically only works where there is some way to manage the acknowledgements ACKS and so a typical approach is to employ UDP over multicast and if data does not go through simply assume that the data was not important anyway. Here consider how to deal with transmission if it is desired to utilize a reliable protocol such as TCP. Sometimes the ACKS are ignored or they are not sent back at all. Most current reliable multicast implementations are focused on negative ACKS only. That is to say re transmits are requested only when an intended recipient did not receive something. These approaches typically rely on sequencing to know when they missed something. However rather than acknowledging every packet before the next one is sent one or more of these approaches assume it was received unless a request for retransmission is received. In contrast one or more embodiments assume that no ACKs or NACKs are employed because an unreliable transport protocol is being utilized the retransmission requests arise apart from the transport protocol see discussion of hashing at application level elsewhere herein . Thus one or more embodiments provide reliable multicasting using an unreliable transport protocol.

Again one or more embodiments are useful in a variety of contexts for example when it is desired to carry out reliable file distribution by multicast in any kind of a network HFC is a non limiting example where when a failure occurs some kind of logical inference can be made about some sub group of the original multi cast that has likely also had a failure. Then undertake a second multicast to a subset of the first multicast which has likely also had a failure to correct the error. In the non limiting example of an HFC plant observe that there are different likelihoods of error within the network. On the fiber part the statistical likelihood of error is typically about an order of magnitude lower than on the copper e.g. coaxial part. This observation is useful because it is possible to control the granularity scope of retransmission so as not to waste bandwidth by retransmitting to endpoints that are not likely to have seen the error.

As noted in some embodiments wait a predetermined time period Delta T after a first request for retransmission is received to determine how to proceed. The appropriate value for Delta T depends on the type of traffic or file being transferred. If the file receipt is not delay sensitive i.e. not being consumed in near real time it is appropriate to wait a relatively long time. However if near real time functionality is of interest only wait a short period of time especially where a buffer is being employed say 150 200 milliseconds otherwise the time window where the retransmit is useful will be exceeded. Consider HLS with a 1 2 second buffer to allow error correction and detection before play out. In such a case it may only be appropriate to wait 150 200 milliseconds. On the other hand if a software update is being undertaken where real time is not required it might be appropriate to wait a minute or more because waiting that long will not harm the file transfer. Furthermore in this regard software upgrades rather than being consumed in near real time in contrast to the 1 2 second play out buffer discussed just above are typically of the form transfer must complete before X date Y time and thus delays in retransmission and file completion on the order of minutes or even hours are not a problem as long as the transfer protocols are configured not to time out and declare the transfer failed before that retransmission request is completed.

One or more embodiments are implemented at least in part in software on one or more servers that are located where the main multicast stream originates in the non limiting example of the network of in NDC . In some cases CDN servers could also be more localized within a regional network served by RDC or even a local network. For example a CDN could be located at a head end fiber node or even a local service node in Austin Tex. or part of an NDC in Denver Colo. or Charlotte N.C. CDNs are typically implemented via commodity servers with additional software to help manage coordination of the content. Large numbers of high capacity fast disks are also typically employed. As noted in some embodiments a content server is located in the NDC and retransmission servers are located downstream.

Consider e.g. software SW distribution for software used on set top boxes routers cable modems and the like. On one or more embodiments modifications in accordance with aspects of the invention are made with respect to the client software responsible for pulling down the software updates. The client SW should be configured to accept a file over multicast and to be cognizant of the fact that when a retransmit request is sent a retransmit may not be received right away. Consider unmodified TCP a retransmit request is sent and if a timer expires after some fairly short period of time another retransmit request will be sent or the system will give up. In one or more embodiments client side software is modified to send a retransmit request and then be willing to wait for the predetermined Delta T as discussed above that the network device e.g. apparatus optionally with server and or device waits before it decides what to do. In one or more embodiments the client side software is also configured to know what to do when it receives a retransmit that it did not ask for e.g. to either discard the retransmit because the retransmit is not needed or to accept the retransmit because it that instance of the client side SW has the same problem.

Consider how long the client side software should wait before re sending the re transmission request. Some embodiments employ a failsafe timeout window wherein if the client side software does not hear from the server in a certain time the retransmit request is re sent. Alternatively a negotiated value can be employed based on what the content is. A value for live streaming will be lower than a value used when sending a software update. Thus one or more embodiments provide a suitable mechanism or logic in the SW to negotiate a value or a set it as you go approach can be employed.

Thus one or more embodiments include software at the server serving out the content and or in communication with same such as on device and or modifications to the client side SW e.g. stored in memory to enable it to participate.

It is worth noting that in one or more embodiments nodes which receive a retransmission for error correction but do not need the retransmitted data because they have received the original transmission intact will simply drop the duplicate data.

It is also worth noting that one or more embodiments provide retention and correlation of retransmission requests to aid in troubleshooting of the underlying error cause. In other words if from examining the system it is determined that a large number of retransmission requests are coming in from nodes in group B over some unit time it can be concluded that a potential problem localized to this area should be investigated further by those responsible for the underlying transport network. This information especially if combined with a timestamp is also useful in tuning the delay time if a delay timer is set to 150 ms and a retransmission request for the same packet is routinely received at 152 ms it may be worth increasing the timer to 160 ms. The reverse is also true e.g. suppose a retransmission request is never obtained that is further than 100 ms different from the first one this might allow the timer to be decreased. This approach can also be implemented algorithmically as a sliding window that is incremented or decremented based on the duration between the first and subsequent retransmission requests.

Given the discussion thus far it will be appreciated that in general terms an exemplary method according to an aspect of the invention includes the step of multicasting a file from an error correcting multicast apparatus e.g. in NDC to a plurality of endpoints e.g. CPE . The endpoints are the members of a first multicast group. The file is multicast over a network the HFC network of is a non limiting example segmented into at least second and third multicast groups e.g. failure domain fill groups as discussed above . The second and third multicast groups are subsets of the first multicast group. Given ones of the endpoints are assigned to the second and third multicast groups based on likelihood of experiencing similar errors e.g. due to variable reliability and or hierarchical topology as discussed elsewhere herein . For example the second multicast group could be all the CPE serviced by local service node 1 and the third multicast group could be all the CPE serviced by local service node 2 in . Given the teachings herein the skilled artisan will be able to assign endpoints to failure domain fill groups based on loss characteristics that can be grouped together given network topology or similar criteria. Thus one or more embodiments are useful in networks where some inference can be drawn regarding which other endpoints may have experienced the same error. In the exemplary and non limiting example of these were set forth at points 1 4 above.

Note that the file to be multicast can be any kind of file where reliable delivery is required a pre segmented file for HLS video is a non limiting example.

Another step includes obtaining at the error correcting multicast apparatus over the network a retransmission request from a first one of the endpoints. The retransmission request arises due to loss and or corruption of a portion of the file during the multicasting of the file to the first one of the endpoints. The retransmission request is sent by a software component on an endpoint e.g. CPE such as an STB and obtained by the apparatus typically the retransmission arbiter device non limiting examples of how to send the retransmission request have been given above.

A further step includes retransmitting the portion of the file via multicasting over the network to the second multicast group or the third multicast group. The retransmission may be from the server of the apparatus or from RRS or LRS .

As an aside it is worth noting that some prior art reliable multicast techniques assume that everything is received unless a NACK is received and do not require every packet to be acknowledged as in TCP. As noted one or more embodiments assume that no ACKs or NACKs are employed because an unreliable transport protocol is being utilized the retransmission requests arise apart from the transport protocol see discussion of hashing at application level elsewhere herein . Thus one or more embodiments provide reliable multicasting using an unreliable transport protocol.

In some cases the retransmitting is to that one of the second and third multicast groups which includes the first one of the endpoints from which the retransmission request came but not to the other of the second and third multicast groups i.e. not to the one from which the retransmission request did not come .

In some embodiments the network comprises a content distribution network such that the multicasting of the file includes multicasting the file over the content distribution network the obtaining of the retransmission request includes obtaining the retransmission request over the content distribution network and the retransmitting of the portion of the file includes retransmitting the portion of the file over the content distribution network.

In some instances the content distribution network comprises a hybrid fiber coaxial network such that the multicasting of the file includes multicasting the file over the hybrid fiber coaxial network the obtaining of the retransmission request includes obtaining the retransmission request over the hybrid fiber coaxial network and the retransmitting of the portion of the file includes retransmitting the portion of the file over the hybrid fiber coaxial network.

Again for the avoidance of doubt an HFC CDN is one non limiting use case there are many uses for reliable multicasting outside of a CDN environment.

As discussed above variability of reliability is one use case another is hierarchy. HFC networks have both. One or more embodiments are of interest in either or both cases.

As noted an HFC network is one non limiting example of a network that can benefit from aspects of the invention. Thus in some instances further steps include assigning a first subset of the endpoints to the second multicast group based on service by a first local service node e.g. local service node 1 in and assigning a second subset of the endpoints to the third multicast group based on service by a second local service node e.g. local service node 2 in .

As also noted a hierarchical approach is employed in one or more embodiments. Thus in some instances the network is further segmented into at least fourth and fifth multicast groups e.g. all endpoints connected to fiber node could be the fourth multicast group and all endpoints connected to another fiber node could be the fifth multicast group . The fourth and fifth multicast groups are subsets of the first multicast group. The second and third multicast groups are subsets of the fourth multicast group. Given ones of the endpoints are assigned to the fourth and fifth multicast groups based on likelihood of experiencing similar errors. In this aspect additional steps include assigning a third subset of the endpoints to the fourth multicast group based on service by a first fiber node e.g. node and assigning a fourth subset of the endpoints to the fifth multicast group based on service by a second fiber node not shown but would be similar to fiber node and connected to the fiber network in . Still further steps include obtaining at the error correcting multicast apparatus over the network a retransmission request from a second one of the endpoints based on loss and or corruption of a portion of the file during the multicasting of the file to the second one of the endpoints and retransmitting the portion of the file via multicasting over the network to that one of the fourth and fifth multicast groups which includes the second one of the endpoints but not to that one of the fourth and fifth multicast groups which does not include the second one of the endpoints.

In some instances the network is further segmented into at least sixth and seventh multicast groups. For example the sixth multicast group could correspond to all endpoints serviced by CMTS in including those served by the aforementioned fiber nodes and local nodes. The seventh multicast group could correspond to all endpoints serviced by another CMTS not shown in located in the same head end as CMTS . The sixth and seventh multicast groups are subsets of the first multicast group. The fourth and fifth multicast groups are subsets of the sixth multicast group. Given ones of the endpoints are assigned to the sixth and seventh multicast groups based on likelihood of experiencing similar errors. In this aspect additional steps include assigning a fifth subset of the endpoints to the sixth multicast group based on service by the first cable modem termination system and assigning a sixth subset of the endpoints to the seventh multicast group based on service by a second cable modem termination system e.g. another CMTS not shown in located in the same head end as CMTS as just discussed . Further steps include obtaining at the error correcting multicast apparatus over the network a retransmission request from a third one of the endpoints based on loss and or corruption of a portion of the file during the multicasting of the file to the third one of the endpoints and retransmitting the portion of the file via multicasting over the network to that one of the sixth and seventh multicast groups which includes the third one of the endpoints but not to that one of the sixth and seventh multicast groups which does not include the third one of the endpoints.

In some cases the network is even further segmented into at least eighth and ninth multicast groups. For example the eighth multicast group could correspond to all endpoints serviced by head end in including those served by the aforementioned cable modem termination systems fiber nodes and local nodes. The ninth multicast group could correspond to all endpoints serviced by another head end see located in the same region as head end in see the two head ends shown in . The eighth and ninth multicast groups are subsets of the first multicast group. The sixth and seventh multicast groups are subsets of the eighth multicast group. Given ones of the endpoints are assigned to the eighth and ninth multicast groups based on likelihood of experiencing similar errors. In this aspect additional steps include assigning a seventh subset of the endpoints to the eighth multicast group based on service by the first head end in assigning an eighth subset of the endpoints to the ninth multicast group based on service by a second head end e.g. as just discussed another head end see located in the same region as head end in see the two head ends shown in . Further steps include obtaining at the error correcting multicast apparatus over the network a retransmission request from a fourth one of the endpoints based on loss and or corruption of a portion of the file during the multicasting of the file to the fourth one of the endpoints and retransmitting the portion of the file via multicasting over the network to that one of the eighth and ninth multicast groups which includes the fourth one of the endpoints but not to the other of the eighth and ninth multicast groups which does not include the fourth one of the endpoints.

In some cases the network is yet further segmented into at least tenth and eleventh multicast groups. For example the tenth multicast group could correspond to all endpoints serviced by RDC in including those served by the aforementioned head ends cable modem termination systems fiber nodes and local nodes. The eleventh multicast group could correspond to all endpoints serviced by another RDC not shown in the figures but would be similar to RDC in . . The tenth and eleventh multicast groups are subsets of the first multicast group and the eighth and ninth multicast groups are subsets of the tenth multicast group. Given ones of the endpoints are assigned to the tenth and eleventh multicast groups based on likelihood of experiencing similar errors. In this aspect additional steps include assigning a ninth subset of the endpoints to the tenth multicast group based on service by the first regional data center assigning a tenth subset of the endpoints to the eleventh multicast group based on service by a second regional data center as discussed not shown obtaining at the error correcting multicast apparatus over the network a retransmission request from a fifth one of the endpoints based on loss and or corruption of a portion of the file during the multicasting of the file to the fifth one of the endpoints and retransmitting the portion of the file via multicasting over the network to that one of the tenth and eleventh multicast groups which includes the fifth one of the endpoints but not to the other of the tenth and eleventh multicast groups which does not include the fifth one of the endpoints.

Recall that the general exemplary method discussed above includes the step of multicasting a file from a content server e.g. a server in NDC to a plurality of endpoints e.g. CPE . The endpoints are the members of a first multicast group and the file is multicast over a network the network of is a non limiting example segmented into at least second and third multicast groups e.g. failure domain fill groups as discussed above . In some cases the network is further segmented into at least a fourth multicast group which is a subset of the first multicast group. Given ones of the endpoints are assigned to the fourth multicast group based on likelihood of experiencing similar errors. Further steps in some such cases include waiting a predetermined period of time after obtaining the retransmission request from the first one of the endpoints and obtaining a retransmission request from a second one of the endpoints. The retransmitting step is carried out after expiration of the predetermined period of time and further includes retransmitting the portion of the file via multicasting over the network to the fourth multicast group. The second one of the endpoints is in the fourth multicast group. For example as discussed above the second multicast group could be all the CPE serviced by local service node 1 and the third multicast group could be all the CPE serviced by local service node 2 in . The fourth multicast group could be for example all the CPE serviced by fiber node in .

In some circumstances a further step includes setting the predetermined period of time based on the content type of the file. For example base the time on the requirement as to when the application will experience a time out. In video streaming the retransmit should be received before running out of play out buffer otherwise the frame will be lost and result in a glitch. In a SW push since not consumption is not in real time or near real time it is possible to wait much longer before declaring a fail.

Thus in some circumstances e.g. when the file is not needed in near real time a further step includes setting the predetermined period of time as at least one minute. This value is exemplary and non limiting and other values could be used when the file is not needed in near real time or when the file is needed in near real time.

Further in some circumstances e.g. when the file is needed in near real time a further step includes setting the predetermined period of time as no more than 200 milliseconds. This value is exemplary and non limiting and other values could be used when the file is not needed in near real time or when the file is needed in near real time.

The value can be arbitrary or can be dependent on the play out buffer considering round trip time of any retransmission request and receipt of that retransmission.

Again recall that the general exemplary method discussed above includes the step of multicasting a file from a content server e.g. a server in NDC to a plurality of endpoints e.g. CPE . The endpoints are the members of a first multicast group and the file is multicast over a network the network of is a non limiting example segmented into at least second and third multicast groups e.g. failure domain fill groups as discussed above . In some cases a further step includes obtaining at the error correcting multicast apparatus over the network at least a second retransmission request from the first one of the endpoints again based on loss and or corruption of the portion of the file during the multicasting of the file to the first one of the endpoints . In this aspect the retransmitting step is only carried out after obtaining the at least second retransmission request.

Recall that the general exemplary method discussed above includes the step of multicasting a file from a content server e.g. a server in NDC to a plurality of endpoints e.g. CPE . The endpoints are the members of a first multicast group and the file is multicast over a network the network of is a non limiting example segmented into at least second and third multicast groups e.g. failure domain fill groups as discussed above . In some cases the network is further segmented into at least a fourth multicast group which is a subset of the first multicast group. Given ones of the endpoints are assigned to the fourth multicast group based on likelihood of experiencing similar errors. In some such cases the retransmission of the portion of the file to the one of the second and third multicast groups is carried out responsive to the obtaining of the retransmission request from the first one of the endpoints without further triggering and further steps include obtaining a retransmission request from a second one of the endpoints and responsive to the obtaining of the retransmission request from the second one of the endpoints retransmitting the portion of the file via multicasting over the network to the fourth multicast group. The second one of the endpoints is in the fourth multicast group.

Regarding the terminology responsive to and without further triggering in one or more embodiments meeting these limitations retransmission is with minimal delay as opposed to the defined delay in the alternative embodiment. Retransmission is carried out as soon as the request is received without requiring the expiration of a clock or other further trigger the only trigger is the initial retransmit request and action is taken action based solely on that trigger.

Thus the response to the retransmission request can be for example immediate delayed by a predetermined time after which an assessment is made as to what other retransmission requests have been received if any or only sent after a second retransmission request for the same material is received from the same endpoint. In general retransmission timing can be tuned to limit bandwidth or to limit impact to end devices.

In some instances a multicast receiver registration procedure is carried out. In such a case additional steps can include for example registering each of the endpoints into the first multicast group and one of the second and third multicast groups and providing each of the endpoints with an address to send retransmission requests to. The retransmission request from the first one of the endpoints is sent to the provided address e.g. retransmission arbiter device which may be same as or different than server . This address may or may not be the source of the retransmission.

In another aspect an exemplary error correcting multicast apparatus includes a memory at least one processor coupled to the memory and a non transitory persistent storage medium which contains instructions which when loaded into the memory configure the at least one processor to be operative to carry out or otherwise facilitate any one some or all of the method steps just described.

Given the discussion thus far it will be appreciated that in general terms another exemplary method according to another aspect of the invention includes the step of at one of a plurality of endpoints e.g. CPE comprising a first multicast group receiving a multicast of a file from an error correcting multicast apparatus to the first multicast group. The multicast of the file is received over a network segmented into at least second and third multicast groups e.g. failure domain fill groups as discussed above . The second and third multicast groups are subsets of the first multicast group. Given ones of the endpoints are assigned to the second and third multicast groups based on likelihood of experiencing similar errors. For example the second multicast group could be all the CPE serviced by local service node 1 and the third multicast group could be all the CPE serviced by local service node 2 in .

A further step includes dispatching to the error correcting multicast apparatus over the network a retransmission request from the endpoint under consideration the retransmission request is due to loss and or corruption of a portion of the file during the multicasting of the file to the endpoint under consideration . An even further step includes receiving at the endpoint under consideration a retransmission of the portion of the file via multicasting from the error correcting multicast apparatus over the network to one of the second and third multicast groups.

In some cases in the step of receiving the retransmission the retransmission is to that one of the second and third multicast groups which includes the endpoint from which the retransmission request came but not to the other of the second and third multicast groups i.e. not to the one from which the retransmission request did not come .

In some instances additional steps include receiving at the endpoint under consideration another retransmission not requested by the endpoint under consideration determining at the endpoint under consideration that this other retransmission is not applicable to the endpoint under consideration and responsive to the determining discarding the other retransmission.

In some instances additional steps include receiving at the endpoint under consideration another retransmission not requested by the endpoint under consideration determining at the one of the endpoints that this other retransmission is applicable to the endpoint under consideration and responsive to the determining using the other retransmission to repair the file.

In some cases if the retransmission of the portion of the file is not received at the endpoint under consideration within a predetermined failsafe timeout window a further step includes responsive to expiration of the predetermined failsafe timeout window re dispatching the retransmission request. The retransmission of the portion of the file is then received at the endpoint under consideration after the predetermined failsafe timeout window responsive to the re dispatched retransmission request.

In some instances a further step includes negotiating with the error correcting multicast apparatus a predetermined timeout window based on content type of the file e.g. short window for real time or near real time video with a small buffer long window for non real time computer program file distribution . In such a case if the retransmission of the portion of the file is not received at the endpoint under consideration within the predetermined timeout window a further step includes responsive to expiration of the predetermined timeout window re dispatching the retransmission request. The retransmission of the portion of the file is then received at the endpoint under consideration after the predetermined timeout window responsive to the re dispatched retransmission request.

In another aspect an exemplary multicast network endpoint e.g. or is provided for use as one of a plurality of endpoints comprising a first multicast group within a network e.g. that of segmented into at least second and third multicast groups. The second and third multicast groups are subsets of the first multicast group and given ones of the endpoints are assigned to the second and third multicast groups based on likelihood of experiencing similar errors. The multicast network endpoint includes a memory or at least one processor or coupled to the memory and a non transitory persistent storage medium e.g. which contains instructions which when loaded into the memory configure the at least one processor to be operative to carry out or otherwise facilitate any one some or all of the method steps just described.

The invention can employ hardware aspects or a combination of hardware and software aspects. Software includes but is not limited to firmware resident software microcode etc. At least a portion of one or more embodiments of the invention or elements thereof can be implemented in the form of an article of manufacture including a machine readable medium that contains one or more programs which when executed implement such step s that is to say a computer program product including a tangible computer readable recordable storage medium or multiple such media with computer usable program code configured to implement the method steps indicated when run on one or more processors. Furthermore at least a portion of one or more embodiments of the invention or elements thereof can be implemented in the form of an apparatus including a memory and at least one processor that is coupled to the memory and operative to perform or facilitate performance of exemplary method steps.

Yet further in another aspect at least a portion of one or more embodiments of the invention or elements thereof can be implemented in the form of means for carrying out one or more of the method steps described herein the means can include i specialized hardware module s ii software module s executing on one or more general purpose or specialized hardware processors or iii a combination of i and ii any of i iii implement the specific techniques set forth herein and the software modules are stored in a tangible computer readable recordable storage medium or multiple such media . The means do not include transmission media per se or disembodied signals per se. Appropriate interconnections via bus network and the like can also be included.

The memory could be implemented as an electrical magnetic or optical memory or any combination of these or other types of storage devices. It should be noted that if distributed processors are employed each distributed processor that makes up processor generally contains its own addressable memory space. It should also be noted that some or all of computer system can be incorporated into an application specific or general use integrated circuit. For example one or more method steps could be implemented in hardware in an application specific integrated circuit ASIC or field programmable gate array FPGA rather than using firmware. Display is representative of a variety of possible input output devices e.g. keyboards mice and the like . Every processor may not have a display keyboard mouse or the like associated with it.

As is known in the art at least a portion of one or more aspects of the methods and apparatus discussed herein may be distributed as an article of manufacture that itself includes a tangible computer readable recordable storage medium having computer readable code means embodied thereon. The computer readable program code means is operable in conjunction with a computer system including for example system processor of CPE or the like to carry out all or some of the steps to perform the methods or create the apparatuses discussed herein. A computer readable medium may in general be a recordable medium e.g. floppy disks hard drives compact disks EEPROMs or memory cards or may be a transmission medium e.g. a network including fiber optics the world wide web cables or a wireless channel using time division multiple access code division multiple access or other radio frequency channel . Any medium known or developed that can store information suitable for use with a computer system may be used. The computer readable code means is any mechanism for allowing a computer to read instructions and data such as magnetic variations on a magnetic media or height variations on the surface of a compact disk. The medium can be distributed on multiple physical devices or over multiple networks . As used herein a tangible computer readable recordable storage medium is defined to encompass a recordable medium examples of which are set forth above but is defined not to encompass a transmission medium or disembodied signal.

The computer systems and servers and other pertinent elements described herein each typically contain a memory that will configure associated processors to implement the methods steps and functions disclosed herein. The memories could be distributed or local and the processors could be distributed or singular. The memories could be implemented as an electrical magnetic or optical memory or any combination of these or other types of storage devices. Moreover the term memory should be construed broadly enough to encompass any information able to be read from or written to an address in the addressable space accessed by an associated processor. With this definition information on a network is still within a memory because the associated processor can retrieve the information from the network.

Accordingly it will be appreciated that at least a portion of one or more embodiments of the invention can include a computer program comprising computer program code means adapted to perform one or all of the steps of any methods or claims set forth herein when such program is run for example on a content server retransmission arbiter device error correcting multicast apparatus end point such as CPE and the like and that such program may be embodied on a tangible computer readable recordable storage medium. As used herein including the claims unless it is unambiguously apparent from the context that only server software is being referred to a server includes a physical data processing system for example system as shown in running one or more server programs. It will be understood that such a physical server may or may not include a display keyboard or other input output components. Furthermore as used herein including the claims a router includes a networking device with both software and hardware tailored to the tasks of routing and forwarding information.

Furthermore it should be noted that any of the methods described herein can include an additional step of providing a system comprising distinct software modules embodied on one or more tangible computer readable storage media. All the modules or any subset thereof can be on the same medium or each can be on a different medium for example. The modules can include any or all of the components shown in the figures e.g. content server retransmission arbiter device LRS RRS and or other components discussed herein. Multicasting can be carried out by the content server. Obtaining the retransmission request can be carried out by the retransmission arbiter device. Retransmission can be carried out by the content server LRS or RRS . On the client side at least some embodiments include a receiver checker module in storage which is loaded into memory to configure the processor to carry out the hash checking so as to determine that loss and or corruption has occurred to determine how long to wait to send another retransmission request when a response to a first retransmission request is not received to determine how to respond to a retransmission that was not requested as described elsewhere herein and to carry out other client side functions as described elsewhere herein. The receiver checker will create a manifest of needed retransmissions based on the hash checking. The method steps can then be carried out using the distinct software modules of the system as described above executing on one or more hardware processors. Further a computer program product can include a tangible computer readable recordable storage medium with code adapted to be executed to carry out one or more method steps described herein including the provision of the system with the distinct software modules.

Accordingly it will be appreciated that at least a portion of one or more embodiments of the invention can include a computer program including computer program code means adapted to perform one or all of the steps of any methods or claims set forth herein when such program is implemented on a processor and that such program may be embodied on a tangible computer readable recordable storage medium. Further at least a portion of one or more embodiments of the present invention can include a processor including code adapted to cause the processor to carry out one or more steps of methods or claims set forth herein together with one or more apparatus elements or features as depicted and described herein.

Although illustrative embodiments of the present invention have been described herein with reference to the accompanying drawings it is to be understood that the invention is not limited to those precise embodiments and that various other changes and modifications may be made by one skilled in the art without departing from the scope or spirit of the invention.

