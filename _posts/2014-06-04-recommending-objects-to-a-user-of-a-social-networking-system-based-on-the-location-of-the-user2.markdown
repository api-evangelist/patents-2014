---

title: Recommending objects to a user of a social networking system based on the location of the user
abstract: A social networking system recommends objects, such as pages, of the social networking system to users of the social networking system based on the location of the user. The social networking system obtains location information identifying the location of the user. Based on the location of the user, the social networking system identifies levels of geographical partitions encompassing the location of the user. For each level of geographical partitions, the social networking system accesses relevant objects of the social networking system with connections to users located within the level of geographical partitions. The social networking system may have determined a term frequency-inverse document frequency (tf-idf) value for each relevant object. Based on the number of connections and the tf-idf value associated with each relevant object, the social networking system merges the relevant objects accessed at each level into a set of relevant objects to recommend to the user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09563709&OS=09563709&RS=09563709
owner: Facebook, Inc.
number: 09563709
owner_city: Menlo Park
owner_country: US
publication_date: 20140604
---
This invention generally relates to social networking systems and more particularly to recommending objects or pages to new users of the social networking system.

A social networking system allows its users to connect to and interact with other social networking system users and with objects on the social networking system. As a user on a social networking system interacts with various objects e.g. pages for businesses content items posted on the social networking system profiles of users on the social networking system etc. the user develops a history of interacting with objects. This interaction history also provides information about a user including the user s interests. Based on these types of information associated with a user the social networking system may recommend objects or pages to the user encouraging the user to interact with the recommended objects. For example if a user has liked or become a fan of certain types of pages on the social networking system in the past the social networking system can recommend pages to that user that are similar to the ones the user has previously liked. 

However for users new to the social networking system or with little or no information regarding tastes preferences or connections the social networking system is often unable to generate accurate recommendations of objects to provide to the users. Modern recommender systems that are often used by social networking systems typically use three types of recommendation strategies user user item item and user item. Each of these systems requires a model of a user to derive recommendations. For user user recommender systems the model must provide a similarity measurement between users. And for both item item and user item the model must provide a set of previously rated entities for user. None of these foundations supports generating recommendations for a new users with little to no information stored in the social networking system. Hence users with little or no information stored with the social networking system provide a challenge for recommendation systems. This is sometimes referred to as the cold start problem.

The social networking system recommends objects such as pages e.g. pages representing businesses brands or organizations to which users can connect by for example liking the page of the social networking system to users of the social networking system based on the location of the user. This allows the social networking system to provide recommendations to new users or users for whom there is little or no information stored in the social networking system but for whom location information can be determined since the system can leverage geographic location of the user to recommend objects related to that location. The social networking system obtains location information identifying the location of a user from for example location information from a user profile from the user s client device among other sources. Based on the location of the user the social networking system identifies levels of geographical partitions encompassing the location of the user such as neighborhoods zip codes cities counties regions states countries etc. that encompass the user s primary residence to form a geographical hierarchy.

For each level of geographical partitions associated with the hierarchy the social networking system identifies or accesses already identified relevant objects of the social networking system with one or more connections to users located within the level of geographical partitions e.g. pages that have user fans that are in a particular zip code or city . In one embodiment the social networking system determines relevant objects in a geographical partition using a term frequency inverse document frequency tf idf value for each relevant object. In one example the tf idf algorithm applied to determine a tf idf value for an object locally relevant to a level of geographical partitions is modified to further bias towards identifying locally relevant objects by normalizing the term frequency against the expected value of connections for a level of geographic partitions for example. Based on the number of connections and the tf idf value associated with each relevant object the social networking system can rank each relevant object. The social networking system may use a variety of techniques to merge the relevant objects at each level of geographical partitions into a single set of relevant objects. For example the social networking system may select relevant objects having more than a threshold number of connections to users located with a level of geographical partitions to include in the set of relevant objects.

In another example the social networking system applies a machine learning algorithm to determine the relevant importance of each level of geographic partitions with respect to identifying and recommending relevant objects to a user. For example the social networking system applies a machine learning process to predict the probability of a user connecting with a relevant object e.g. fanning a page based on the demographic information associated with the relevant object and the user engagement information associated with the relevant object and or the demographic information associated with one or more levels of geographic partitions associated with the relevant object. Based on the probability of a user connecting with the relevant objects the social networking system may merge the relevant objects into a single set of relevant objects. The social networking system may then select one or more relevant objects from the merged set of relevant objects to recommend to the user.

The figures depict various embodiments of the present invention for purposes of illustration only. One skilled in the art will readily recognize from the following discussion that alternative embodiments of the structures and methods illustrated herein may be employed without departing from the principles of the invention described herein.

The client devices are one or more computing devices capable of receiving user input as well as transmitting and or receiving data via the network . In one embodiment a client device is a conventional computer system such as a desktop or laptop computer. Alternatively a client device may be a device having computer functionality such as a personal digital assistant PDA a mobile telephone a smartphone or another suitable device. A client device is configured to communicate via the network . In one embodiment a client device executes an application allowing a user of the client device to interact with the social networking system . For example a client device executes a browser application to enable interaction between the client device and the social networking system via the network . In another embodiment a client device interacts with the social networking system through an application programming interface API running on a native operating system of the client device such as IOS or ANDROID .

The client devices are configured to communicate via the network which may comprise any combination of local area and or wide area networks using both wired and or wireless communication systems. In one embodiment the network uses standard communications technologies and or protocols. For example the network includes communication links using technologies such as Ethernet 802.11 worldwide interoperability for microwave access WiMAX 3G 4G code division multiple access CDMA digital subscriber line DSL etc. Examples of networking protocols used for communicating via the network include multiprotocol label switching MPLS transmission control protocol Internet protocol TCP IP hypertext transport protocol HTTP simple mail transfer protocol SMTP and file transfer protocol FTP . Data exchanged over the network may be represented using any suitable format such as hypertext markup language HTML or extensible markup language XML . In some embodiments all or some of the communication links of the network may be encrypted using any suitable technique or techniques.

One or more third party systems may be coupled to the network for communicating with the social networking system which is further described below in conjunction with . In one embodiment a third party system is an application provider communicating information describing applications for execution by a client device or communicating data to client devices for use by an application executing on the client device. In other embodiments a third party system provides content or other information for presentation via a client device . A third party website may also communicate information to the social networking system such as advertisements content or information about an application provided by the third party website .

Each user of the social networking system is associated with a user profile which is stored in the user profile store . A user profile includes declarative information about the user that was explicitly shared by the user and may also include profile information inferred by the social networking system . In one embodiment a user profile includes multiple data fields each describing one or more attributes of the corresponding user of the social networking system . Examples of information stored in a user profile include biographic demographic and other types of descriptive information such as work experience educational history gender hobbies or preferences location and the like. A user profile may also store other information provided by the user for example images or videos. In certain embodiments images of users may be tagged with identification information of users of the social networking system displayed in an image. A user profile in the user profile store may also maintain references to actions by the corresponding user performed on content items in the content store and stored in the action log .

In one example the user may provide to the social networking system location information for the social networking system to include in the user s user profile. The user may provide the social networking system with a home or work address associated with the user s residence or work place for example. In another example the user may allow the social networking system to ascertain location information associated with the user. For example the user may give the social networking system permission to retrieve location information associated with one or more devices used by the user. The social networking system on receiving permission may retrieve for example Global Positioning System GPS coordinates associated with a user s device. Based on the retrieved GPS coordinates the social networking system identifies the location associated with the user and associates the location with the user s user profile stored in the user profile store . In one example the social networking system identifies the GPS coordinate at which the user s user device occupies the most time or more than a threshold amount of time and associates the location information determined from the GPS coordinate with the user s user profile.

While user profiles in the user profile store are frequently associated with individuals allowing individuals to interact with each other via the social networking system user profiles may also be stored for entities such as businesses or organizations. This allows an entity to establish a presence on the social networking system for connecting and exchanging content with other social networking system users. The entity may post information about itself about its products or provide other information to users of the social networking system using a brand page associated with the entity s user profile. Other users of the social networking system may connect to the brand page to receive information posted to the brand page or to receive information from the brand page. A user profile associated with the brand page may include information about the entity itself providing users with background or informational data about the entity.

The content store stores objects that each represent various types of content. Examples of content represented by an object include a page post a status update a photograph a video a link a shared content item a gaming application achievement a check in event at a local business a brand page an event page or any other type of content. Thus the brand page described above can be an object within the social networking system. Social networking system users may create objects stored by the content store such as status updates photos tagged by users to be associated with other objects in the social networking system events groups applications or pages representing an individual group or business. In some embodiments objects are received from third party applications or third party applications separate from the social networking system . In one embodiment objects in the content store represent single pieces of content or content items. Hence users of the social networking system are encouraged to communicate with each other by posting text and content items of various types of media through various communication channels. This increases the amount of interaction of users with each other and increases the frequency with which users interact within the social networking system .

The content store may also store one or more recommendation units. The social networking system provides recommendation units to its users to increase user interaction with the social networking system. A recommendation unit suggests one or more actions to a user viewing the recommendation unit a viewing user to increase the viewing user s interaction with the social networking system. For example a recommendation unit provides a suggestion for the viewing user to establish a connection with another user as well as a link enabling the user to do so. In other examples a recommendation unit encourages the viewing user to invite a friend to an event identify a friend in a photo interact or view an object such as a page representing a local business or perform another suitable action with the social networking system. Thus a recommendation unit can provide a suggestion to a user to for example like a brand page for a business. Each recommendation unit is associated with a score based on a value of the viewing user interacting with the recommendation unit i.e. converting the recommendation unit by performing the recommended action and or on the likelihood that the viewing user will convert the recommendation unit. The score may be based on prior interaction with recommendation units by the viewing user other users to whom the viewing user is connected a probability of the viewing user interacting with the recommendation unit or other criteria. Determination of a score for a recommendation unit is further described in U.S. patent application Ser. No. 13 549 080 filed on Jul. 13 2012 which is hereby incorporated by reference in its entirety. The social networking system selects one or more recommendation units to send to a user based at least in part on this score.

The action logger receives communications about user actions internal to and or external to the social networking system populating the action log with information about user actions. Examples of actions include adding a connection to another user sending a message to another user uploading an image reading a message from another user viewing content associated with another user attending an event posted by another user among others. In addition a number of actions may involve an object and one or more particular users so these actions are associated with those users as well and stored in the action log .

The action log may be used by the social networking system to track user actions on the social networking system as well as actions on third party systems that communicate information to the social networking system . Users may interact with various objects on the social networking system and information describing these interactions are stored in the action log . Examples of interactions with objects include commenting on posts sharing links and checking in to physical locations via a mobile device accessing content items showing interest in pages by fanning or liking the pages and any other interactions. Additional examples of interactions with objects on the social networking system that are included in the action log include commenting on a photo album communicating with a user establishing a connection with an object joining an event to a calendar joining a group creating an event authorizing an application using an application expressing a preference for an object liking the object and engaging in a transaction. Additionally the action log may record a user s interactions with advertisements on the social networking system as well as with other applications operating on the social networking system . In some embodiments data from the action log is used to infer interests or preferences of a user augmenting the interests included in the user s user profile and allowing a more complete understanding of user preferences.

The action log may also store user actions taken on a third party system such as an external website and communicated to the social networking system . For example an e commerce website that primarily sells sporting equipment at bargain prices may recognize a user of a social networking system through a social plug in enabling the e commerce website to identify the user of the social networking system . Because users of the social networking system are uniquely identifiable e commerce websites such as this sporting equipment retailer may communicate information about a user s actions outside of the social networking system to the social networking system for association with the user. Hence the action log may record information about actions users perform on a third party system including webpage viewing histories advertisements that were engaged purchases made and other patterns from shopping and buying.

In one embodiment an edge store stores information describing connections between users and other objects on the social networking system as edges. Some edges may be defined by users allowing users to specify their relationships with other users. For example users may generate edges with other users that parallel the users real life relationships such as friends co workers partners and so forth. Other edges are generated when users interact with objects in the social networking system such as expressing interest in a page on the social networking system sharing a link with other users of the social networking system and commenting on posts made by other users of the social networking system.

In one embodiment an edge may include various features each representing characteristics of interactions between users interactions between users and object or interactions between objects. For example features included in an edge describe rate of interaction between two users how recently two users have interacted with each other the rate or amount of information retrieved by one user about an object or the number and types of comments posted by a user about an object. The features may also represent information describing a particular object or user. For example a feature may represent the level of interest that a user has in a particular topic the rate at which the user logs into the social networking system or information describing demographic information about a user. Each feature may be associated with a source object or user a target object or user and a feature value. A feature may be specified as an expression based on values describing the source object or user the target object or user or interactions between the source object or user and target object or user hence an edge may be represented as one or more feature expressions.

The edge store also stores information about edges such as affinity scores for objects interests and other users. Affinity scores or affinities may be computed by the social networking system over time to approximate a user s affinity for an object interest and other users in the social networking system based on the actions performed by the user. A user s affinity may be computed by the social networking system over time to approximate a user s affinity for an object interest and other users in the social networking system based on the actions performed by the user. Computation of affinity is further described in U.S. patent application Ser. No. 12 978 265 filed on Dec. 23 2010 U.S. patent application Ser. No. 13 690 254 filed on Nov. 30 2012 U.S. patent application Ser. No. 13 689 969 filed on Nov. 30 2012 and U.S. patent application Ser. No. 13 690 088 filed on Nov. 30 2012 each of which is hereby incorporated by reference in its entirety. Multiple interactions between a user and a specific object may be stored as a single edge in the edge store in one embodiment. Alternatively each interaction between a user and a specific object is stored as a separate edge. In some embodiments connections between users may be stored in the user profile store or the user profile store may access the edge store to determine connections between users.

Using data from the user profile store and the edge store the recommendation engine identifies one or more objects to recommend to a user of the social networking system . The recommendation engine identifies objects potentially relevant to a user or objects that a user may be interested in interacting with on the social networking system . In one embodiment the recommendation engine retrieves data included in a user profile associated with a user such as location information identifying the primary location occupied by a user and recommends one or more objects to the user via one or more recommendation units as further described below in conjunction with . In one embodiment the recommendation engine identifies objects stored in the content store that have explicit connections with one or more users as determined from data in the edge store located in geographical areas encompassing the location information associated with the user to whom the recommendation engine is recommending objects. The recommendation engine ranks the identified objects and selects one or more of the ranked objects to recommend to the user via recommendation units.

The web server links the social networking system via the network to the one or more client devices as well as to the one or more third party systems . The web server serves web pages as well as other web related content such as JAVA FLASH XML and so forth. The web server may receive and route messages between the social networking system and the client device for example instant messages queued messages e.g. email text messages short message service SMS messages or messages sent using any other suitable messaging technique. A user may send a request to the web server to upload information e.g. images or videos that are stored in the content store . Additionally the web server may provide application programming interface API functionality to send data directly to native client device operating systems such as IOS ANDROID WEBOS or RIM .

For each level of geographical partitions the social networking system identifies relevant objects such as pages. The relevant objects represent objects that one located within a geographical partition such as a zip code would find relevant or objects with which one would be interested in interacting. New users joining the social networking system who have not yet expressed an interest in a variety of objects within the social networking system may be interested in interacting with objects in which users of the social networking system located within or near the new user s location have shown an interest.

In one embodiment for each level of geographical partitions the social networking system identifies objects in the content store having location information within the geographical partition. For example the social networking system identifies objects in the content store having locations within a state as objects relevant to users within the state. A business page of a restaurant might be one example of an object that has location information within a geographical partition. Specifically the business restaurant in this example might be located within a particular zip code and hence has location information within that zip code.

In another embodiment for each level of geographical partitions the social networking system identifies objects in the content store that have explicit connections with one or more users of the social networking system and the one or more users are located within the level of geographical partitions. For example for an identified zip code level of geographical partitions the social networking system identifies objects that have explicit connections to one or more users located within the identified zip code such as users who have liked the object. Similarly for an identified state level of geographical partitions the social networking system identifies objects that have explicit connections to one or more users located within the state. For each level of geographical partitions the social networking system may identify objects having more than a threshold number of connections to users located in the level of geographical partitions as relevant objects. In addition to identifying relevant objects for each level of geographical partitions the social networking system may also associate the object with an identifier the identifier identifying the level of geographical partitions from which the relevant object was identified or determined.

Apart from identifying relevant objects associated with a geographic partition or a level of geographic partitions based on a threshold number of connections associated with an object the social networking system may use one or more algorithms to identify objects that are more relevant to the level of geographical partitions as opposed to globally. It is possible that objects with strong regional connections are more compelling connections to a new user than globally popular but not regionally relevant objects. For example objects may have connections to users located in a variety of locations in addition to users located within a geographical location. The social networking system may identify objects with a greater proportion of connections to users located within a geographical partition or a level of geographical partitions as objects relevant to the level of geographical partitions. In one example the social networking system applies the term frequency inverse document frequency tf idf algorithm to identify objects specifically relevant to a level of geographical partitions. The document frequency identifies how unique an object is to a level of geographical partitions for example objects that appear in a few locations within a level of geographical partitions are considered as unique .

For each level of geographic partitions the social networking system identifies objects having connections to users located within the level of geographic partitions e.g. pages that have been fanned within a given zip code . For each identified object the social networking system determines a term frequency and an inverse document frequency. The term frequency for an object is determined based on the number of connections between the object and users located within the level of geographic partitions e.g. the fan frequency for a page . The inverse document frequency is the number of locations within a level of geographical locations such as zip codes within a state or states within a country with at least one user that has a connection with the object e.g. the number of zip codes in which the page has been fanned . The tf idf value assigned to the document is the product of the term frequency and the inverse document frequency. For example for a zip code the social networking system identifies pages having connections to users located within the zip code. For each of the pages the social networking system determines a term frequency which is the number of connections between the page and users located within the zip code and an inverse document frequency which is the number of locations within the zip code with at least one user connected to the page. The tf idf value assigned to each page is then the product of the term frequency of the page and the inverse document frequency of the page.

The following equations outline an exemplary process for determining the tf idf value assigned to an object. The variables used in the equations are defined as tf refers to term frequency idf refers to the document frequency c refers to locations within a level of geographical locations u refers to the users p refers to objects and G refers to a level of geographical locations. The term frequency is determined using the following equation connections 1 The inverse document frequency is determined using the following equation 

In one embodiment the tf idf algorithm applied to identify objects locally relevant to a level of geographical partitions is modified to further bias towards identifying locally relevant objects by normalizing the term frequency against the expected value of connections for a level of geographic partitions. The modified term frequency identifies how locally popular an object is to the users within a level of geographical partitions while the document frequency identifies how unique an object is to a level of geographical partitions for example objects that appear in a few levels of geographical partitions are considered as unique . For example the term frequency for an object with respect to a particular zip code may be normalized by the expected number of connections for that zip code. The expected number of connections may be determined by dividing the total number of connections associated with an object by the number of zip codes including users connected to the object. Below is an example equation for determining the modified term frequency tf .

where F p refers to the total number of connections associated with an object across all levels of geographical partitions and locations within all the levels of geographical partitions. A modified tf idf value may then be calculated by determining the product of the modified term frequency value tf and the inverse document frequency idf associated with an object.

In one embodiment the social networking system identifies objects that are unique to a level of geographical partitions to recommend to users based on the locality associated with the object. For example the social networking system may identify thresholds associated with the local popularity LP of an object and a document frequency DF associated with the object. Based on the thresholds the social networking system filters out objects which do not meet the LP and DF thresholds. In one example the thresholds are determined empirically. The LP associated with an object may be determined by identifying the number of connections associated with an object from a level of geographical partitions. The document frequency characterizes how unique an object is to a level of geographical partitions. Below is an example equation to determine the document frequency associated with an object.

where c refers to locations within a level of geographical locations u refers to the users p refers to objects and G refers to a level of geographical locations. Based on the LP and DF thresholds the tf idf values associated with an object may be determined using the example function below 

In one embodiment the social networking system ranks the relevant objects associated with a level of geographical partitions. The social networking system may use a variety of ranking techniques to rank the relevant objects. In one embodiment the social networking system ranks the relevant objects within a level of geographical partitions based on the number of connections associated with a relevant object. For example within a zip code relevant objects with a larger number of connections to users located within the zip code are given a higher rank e.g. pages fanned by more users are ranked higher . In another embodiment the social networking system ranks the relevant objects within a level of geographical partitions based on the tf idf value associated with a relevant object. In one embodiment the social networking system stores an identifier identifying the rank and level of geographical partitions associated with a relevant object in the content store . In another embodiment the social networking system stores the ranked relevant objects for each level of geographical partitions in the content store .

Based on the location information identifying the location of a user the social networking system may identify one or more levels of geographical partitions associated with the user. In one example the location information associated with the user is an address to a residence including a zip code value. Based on the zip code value the social networking system identifies additional zip codes adjacent to the zip code as well as the county and state within which the zip code value is located. The social networking system may also identify counties and states adjacent to the identified county and state within which the zip code value is located.

For each level of geographical partitions associated with the user the social networking system identifies relevant objects such as pages to recommend to the user. The relevant objects represent objects that one located within a geographical partition such as a zip code would find relevant or objects with which one would be interested in interacting. In one embodiment the social networking system accesses or retrieves the pre ranked relevant objects for each level of geographical partitions encompassing the location of the user stored in the content store . In another embodiment the social networking system identifies relevant objects for each level of geographical partitions using the process described with respect to above. Thus the system can perform the ranking at the time of determining a recommendation for a user or can perform the ranking in advance and simply retrieve or accesses pre ranked objects for each level. In some embodiments the system re ranks the objects each time it provides a recommendation to the user to get the most up to date ranking.

The social networking system blends or merges the ranked relevant objects at each level of geographical partitions to generate a single set of relevant objects to recommend to the user. A number of techniques may be applied to blend or merge the relevant objects identified at each level of geographical partitions. For example the social networking system may merge a threshold number of relevant objects from each level of geographical partitions based on the rank associated with each relevant object. For instance the social networking system may merge the top 5 tf idf ranked relevant objects at each level of geographical partitions into a set of relevant objects to recommend to the user. In one example the social networking system may leverage a Bayesian process analyzing the recent historical performance of the ranked relevant objects at each level of geographical partitions or at locations within each level of geographical partitions e.g. user fanning history over the past 90 days to remove locally relevant objects which do not meet a certain threshold such as the number of connections associated with the relevant object. The social networking system may then blend or merge the remaining objects into a single set of relevant objects to recommend to the user.

In one embodiment the social networking system assigns the relevant objects with a weighted rank based on a weight assigned to a location within a level of geographical partitions. This results in the social networking system merging and ranking the various relevant objects associated with the different levels of geographical partitions by assigning a weight to locations associated with one or more users who are connected to the relevant objects. This approach has value for a number of reasons. First small regions have smaller samples and by the de Moivre equation this leads to high variance in the measured number of connections to objects. As the coarseness of the partitions increases the number of samples increase which leads to a decrease in the variance of the number of connections to an object. Thus it may be beneficial to blend the results from the different levels of geographical locations to reduce the deficiencies that occur due to either a high variance or low variance in the number of connections to an object. By associating a weight with a location within each level of geographical partitions locally relevant objects may be ranked higher than globally relevant objects during the blending of the relevant objects identified at each level of geographical partitions.

The following is one example of an equation used to determine a weighted rank for an identified relevant object. The variables are defined as r refers to the rank i refers to the level of geographical locations c refers to locations within the level of geographical locations u refers to the number of users p refers to objects w refers to the weight associated with any location within the level of geographical locations and P refers to the frequency distribution associated with a location within the level of geographical partitions. The rank is determined using the following equation 

Similarly a tf idf weighted rank may be assigned to an object based on the weight assigned to a location within a level of geographical partitions. Let wbe a weight associated with any location within the level of geographical location i for a recommendation identified by tf idf. The tf idf weighted rank for a relevant object may be calculated by using equation 6 by replacing wwith w.

In one embodiment the social networking system blends the relevant objects by ranking the relevant objects from the various levels of geographic partitions based on a combination of the number of connections associated with the relevant objects within a level of geographical partitions and the tf idf value associated with the relevant objects. In another embodiment the social networking system blends the relevant objects based on the paths between locations within levels of geographical partitions as defined by a hierarchical graph or tree. As the hierarchy is a tree there is a unique path between any two locations within a level of geographical partitions. One example method of ranking the relevant objects is discussed below. This path first ascends the hierarchy between locations referred to as s below in a sub path then it descends the hierarchy in a sub path between locations referred to as t below . Let abe defined as a constant weight value for ascending between partitions levels Gand G and let bbe a defined as a constant weight value for descending between partition levels Gand G. Then we have a graph distance d between any two locations c and c defined as 

where H is the hierarchy of levels of geographic partitions and P refers to the frequency distribution associated with a location within the level of geographical partitions. Similarly ranking or blending functions can be defined based on the tf idf values assigned to each relevant object.

In another embodiment the social networking system may perform a secondary ranking of the blended relevant objects based on information associated with the user profile the relevant object or the demographic with which the user is associated. For example the social networking system further ranks the blended relevant objects based on the marital status age or gender of the user and the demographic of the users connected to the relevant objects.

The social networking system may also use a machine learning algorithm to blend and rank the relevant objects. The machine learning algorithm may be trained using one or more data sets including ranked relevant objects for users located in different locations. For example the machine learning algorithm determines a probability of a user interacting with relevant objects for each level of geographic partitions based on the demographic information associated with the relevant object and the user engagement information associated with the relevant object the demographic information associated with one or more levels of geographic partitions associated with the relevant object or the number of connections associated with a relevant object within a given level of geographic partitions. Based on the probability determined the social networking system may rank the relevant objects and blends the relevant objects into a single set of relevant objects.

The social networking system then selects relevant objects to recommend to the user from the set of blended relevant objects to recommend to the user. In one embodiment the social networking system selects relevant objects based on the rank of the relevant objects in the blended set of relevant objects. For example the social networking system selects the top 20 ranked relevant objects in the set of blended relevant objects to recommend to the user. The social networking system recommends the selected relevant objects to the user via one or more recommendation units.

The selected relevant objects for a user can then be presented for display to a user in the social networking system . In one embodiment the system selects the highest ranked objects from the merged set of objects e.g. the top 20 or top 50 . The social networking system might provide a newsfeed to the user and somewhere on the page that includes the news feed e.g. in a side margin the system can provide a list of recommended objects for the user. For example the user s newsfeed page in the social networking system might include a Pages you Might Like section in a margin along the side of the page or as a newsfeed item within the news feed. This recommendations section can provide a list of all of the selected relevant objects or pages or a top few pages. In addition the social networking system might show a first few of the recommended pages and then when the user refreshes the page or navigates to a new page the system might show the next few of the recommended pages. If the social networking system has identified 50 total recommended pages for the user the system can continue to cycle through this list until all recommendations have been provided. The system can also occasionally re determine the top pages if a certain amount of time has passed or it is determined that a new ranking should be performed to get a new set of recommended pages.

For the zip code level the social networking system accesses relevant objects and from the content store . For the county level the social networking system accesses relevant objects and from the content store . For the state level the social networking system accesses relevant objects and from the content store . The social networking system then blends and ranks the relevant objects as described in conjunction with above. For example the social networking system may leverage a Bayesian process analyzing the recent historical performance of the ranked relevant objects at each level of geographical partitions to remove locally relevant objects which do not meet a certain threshold. The social networking system may then blend or merge the remaining objects into a single set of relevant objects to recommend to the user. In this example the social networking system merges and selects objects and to recommend to the user.

The foregoing description of the embodiments of the invention has been presented for the purpose of illustration it is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Persons skilled in the relevant art can appreciate that many modifications and variations are possible in light of the above disclosure.

Some portions of this description describe the embodiments of the invention in terms of algorithms and symbolic representations of operations on information. These algorithmic descriptions and representations are commonly used by those skilled in the data processing arts to convey the substance of their work effectively to others skilled in the art. These operations while described functionally computationally or logically are understood to be implemented by computer programs or equivalent electrical circuits microcode or the like. Furthermore it has also proven convenient at times to refer to these arrangements of operations as modules without loss of generality. The described operations and their associated modules may be embodied in software firmware hardware or any combinations thereof.

Any of the steps operations or processes described herein may be performed or implemented with one or more hardware or software modules alone or in combination with other devices. In one embodiment a software module is implemented with a computer program product comprising a computer readable medium containing computer program code which can be executed by a computer processor for performing any or all of the steps operations or processes described.

Embodiments of the invention may also relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes and or it may comprise a general purpose computing device selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a non transitory tangible computer readable storage medium or any type of media suitable for storing electronic instructions which may be coupled to a computer system bus. Furthermore any computing systems referred to in the specification may include a single processor or may be architectures employing multiple processor designs for increased computing capability.

Embodiments of the invention may also relate to a product that is produced by a computing process described herein. Such a product may comprise information resulting from a computing process where the information is stored on a non transitory tangible computer readable storage medium and may include any embodiment of a computer program product or other data combination described herein.

Finally the language used in the specification has been principally selected for readability and instructional purposes and it may not have been selected to delineate or circumscribe the inventive subject matter. It is therefore intended that the scope of the invention be limited not by this detailed description but rather by any claims that issue on an application based hereon. Accordingly the disclosure of the embodiments of the invention is intended to be illustrative but not limiting of the scope of the invention which is set forth in the following claims.

