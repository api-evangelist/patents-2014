---

title: System, method, and apparatus for data processing
abstract: A data process system including a unit receiving a mail data including an output data or a target output data via a network, a unit identifying a user-identification data to be associated with the output data based on an address data of a transmission source of the mail data by referring to first and second units, the first unit storing a first address data in correspondence with each user-identification data, the second unit storing a second address data in correspondence with each user-identification data, a unit storing data-identification data in correspondence with the output data in a unit in a case where the user-identification data is identified by referring to the second unit instead of by the first unit, a unit notifying the data-identification data via the network, and a unit transmitting the output data corresponding to the user-identification data or the data-identification data received via the network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09544262&OS=09544262&RS=09544262
owner: Ricoh Company, Ltd.
number: 09544262
owner_city: Tokyo
owner_country: JP
publication_date: 20140502
---
Conventionally in a case where a printing instruction is input from a user by way of for example a PC Personal Computer there is a system that associates print data in association with a user name of the user and stores the print data in a predetermined server or a storage device of an image forming apparatus instead of immediately printing the print data in response to the printing instruction. In this system when the user inputs a user name and password to the image forming apparatus via an operation panel the image forming apparatus performs an authentication process on the user name and the password. Among the print data stored in the storage device of the image forming apparatus print data associated to the user is displayed as a list on the operation panel by the image forming apparatus when the authentication is a success. When print data is selected from the list of print data the image forming apparatus obtains the selected print data from the storage device and prints the print data.

With this system printed material is output when the user is nearby the image forming apparatus. Therefore problems such as leaving the printed material on the image forming apparatus or inadvertently taking someone else s printed material can be prevented. As a result security of printed information can be ensured.

However with this system printing can only be performed for a user that already has an account for performing authentication. Therefore in a case where a customer or the like has no account there is an inconvenience of the customer requiring to ask someone having an account to print the print data. In this case a guest account that can be shared by customers may be prepared. However because the shared guest account is assigned to multiple customers one customer may be able to manipulate another customer s print data. This degrades the system s characteristic of ensuring security of printed data.

Although it is possible to install an image forming apparatus that can be used by guests this is not a satisfactory countermeasure because cost will increase and installation space of the image forming apparatus is required.

The present invention may provide a system a method and an apparatus for data processing that substantially obviates one or more of the problems caused by the limitations and disadvantages of the related art.

Features and advantages of the present invention are set forth in the description which follows and in part will become apparent from the description and the accompanying drawings or may be learned by practice of the invention according to the teachings provided in the description. Objects as well as other features and advantages of the present invention will be realized and attained by a system a method and an apparatus for data processing particularly pointed out in the specification in such full clear concise and exact terms as to enable a person having ordinary skill in the art to practice the invention.

To achieve these and other advantages and in accordance with the purpose of the invention as embodied and broadly described herein an embodiment of the present invention provides a data process system including one or more data process apparatuses the data process system including a reception unit configured to receive a mail data including an output data or a target output data via a network an identification unit configured to identify a user identification data to be associated with the output data based on an address data of a transmission source of the mail data by referring to first and second storage units the first storage unit storing a first address data in correspondence with each user identification data the second storage unit storing a second address data in correspondence with each user identification data a storage unit configured to store data identification data in correspondence with the output data in a data storage unit in a case where the user identification data is identified by referring to the second storage unit instead of by the first storage unit a notification unit configured to notify the data identification data via the network and a transmission unit configured to transmit the output data corresponding to the user identification data or the data identification data received via the network.

Other objects features and advantages of the present invention will become more apparent from the following detailed description when read in conjunction with the accompanying drawings.

Next embodiments of the present invention are described with reference to the accompanying drawings. is a schematic diagram illustrating a configuration of a printing system according to a first embodiment of the present invention. The printing system illustrated in includes for example one or more user terminals a mail server a management server an authentication server a storage server and one or more image forming apparatuses that are communicably connected to each other via a network N1 such as a LAN Local Area Network or the Internet. The network N1 may be partly or entirely constituted by a wireless communication network. Further a mobile communication network may be provided between the user terminal and the network N1. It is to be noted that the printing system is operated inside an organization such as a company. In the first embodiment the organization is referred to as company A .

The user terminal is a data processing apparatus on which the user of the printing system directly operates for inputting printing requests to the printing system . A PC Personal Computer a mobile phone a smartphone a table type terminal and a PDA Personal Digital Assistance are examples of the user terminal . In a case where the system includes multiple user terminals each of the user terminals may be different kinds of terminals.

In this embodiment the users of the printing system are categorized into a regular user qualified user and a guest user . The regular user is a user whose information data is registered in the printing system technically registered in the below described user data storage unit . That is the regular user is a user expected to be a user of the printing system . One example of the regular user is an employee of company A. The guest user is a user whose information is not registered in the printing system . That is the guest user is a user that does not initially have the authority to use the printing system . One example of the guest user is a person other than an employee of company A.

The mail server is a computer that transfers for example electronic mail transmitted from the user terminal or from the management server . For example the user terminal transmits electronic mail including a print request to the management server in response to an instruction from the user. Electronic data that is to be printed target print data is attached to the electronic mail including the print request. The data format of the electronic data is not limited to a particular format. The electronic mail that includes the print request and is transmitted from the user terminal may also be hereinafter referred to as print request mail .

The authentication server is a computer that manages data of each user of company A user data and performs various processes using the user data. For example the authentication server performs an authentication process in response to an authentication request including for example a designated user name and a designated password. Further the authentication server performs various processes corresponding to requests such as a request to confirm existence of an e mail address or a request to obtain a user name corresponding to an e mail address. That is the user data is associated to a user name and includes an e mail address of the user.

The management server is a computer that performs processes such as generation of print data pertaining to the electronic data included in the print request mail upon receiving the print request mail. The data format of the print data is a format that can be interpreted by the image forming apparatus . The management server associates the generated print data with respect to a user name of a user of a transmission source sender from which the print request mail is transmitted or with respect to an identifier generated in correspondence with each print request mail. Then the management server transmits the associated print data to the storage server . In a case where the authentication server manages addresses of transmission sources of print request mail in correspondence with user names print data are associated with user names. In a case where the authentication server does not manage addresses of transmission sources of print request mail in correspondence with user names print data are associated with identifiers generated in correspondence with each print request mail. The identifier may also be hereinafter referred to as a PIN Personal Identification Number code .

The image forming apparatus is an apparatus that performs a printing process on the print data associated with a user name or a PIN code input to the image forming apparatus by the user.

A program that implements the processes of the management server is provided from a recording medium such as a CD ROM. When the recording medium having the program recorded therein is set to the drive apparatus the program is installed from the recording medium to the auxiliary storage apparatus via the drive apparatus . However the program does not necessarily have to be installed from the recording medium . For example the program may be downloaded to another computer via a network. The auxiliary storage apparatus not only stores the installed program but also stores for example necessary files and data.

In a case where activation of the program is instructed the memory apparatus reads out the program from the auxiliary storage apparatus and stores the program therein. The CPU executes the functions of the management server in accordance with the program stored in the memory apparatus . The interface apparatus is used as an interface to be connected to a network.

The controller includes for example a CPU a RAM Random Access Memory a ROM Read Only Memory a HDD Hard Disk Drive and a NVRAM Non Volatile RAM . The ROM stores for example various programs and data used by the programs therein. The RAM may be used as a storage space to which programs are loaded or as a work space of the loaded programs. The CPU implements various functions by performing the processes of the programs loaded to the RAM . The HDD stores for example programs and data used by the programs therein. The NVRAM stores for example data pertaining to various settings.

The scanner is a hardware device for reading image data from a document image reading unit . The printer is a hardware device for printing print data to a print document printing unit . The modem is a hardware device for connecting to a telephone line. The modem is used for transmitting receiving image data by way of facsimile communications. The operation panel is a hardware device including for example an input unit for accepting input from the user or a display unit such as a liquid crystal panel. The liquid crystal panel may have a touch panel function. In this case the liquid crystal panel also provides the functions of an input unit. The network interface is a hardware device for connecting to a network by wireless cable or both such as a LAN Local Area Network . The SD Secure Digital card slot is used for reading a program stored in a SD card . That is not only is a program recorded in the ROM but also a program recorded in the SD card is loaded to the RAM so that processes of the program can be executed by the image forming apparatus . It is to be noted that the SD card may be replaced with other recording media e.g. CD ROM USB Universal Serial Bus memory . That is the type of recording media equivalent to the SD card is not to be limited in particular. In this case the SD card slot may be replaced with hardware corresponding to the type of recording medium that is used.

It is to be noted that the image forming apparatus may be provided without including the scanner and the modem . That is the image forming apparatus may be a printer instead of a multifunction peripheral.

The management server also includes a guest data storage unit . The functions of the guest data storage unit are implemented by using for example the auxiliary storage device or a storage device connected to the management server via a network.

The mail reception unit receives print request mail. The print request mail includes target print data desired to be printed by the user e.g. body text of electronic mail file attached electronic mail . For example the user transmits an electronic mail including the target print data from the user terminal to a mail address of a particular domain transmission destination . The mail reception unit recognizes that the electronic mail from the user terminal is a print request mail by confirming that the address of the electronic mail is set with the particular domain.

The address confirmation unit transmits a request to confirm existence of a transmission source address of the print request mail to the authentication server for determining whether the transmission source address is registered in the authentication server . In a case where the transmission source address is registered in the authentication server the address confirmation unit obtains a user name corresponding to the transmission source address from the authentication server . In a case where the transmission source address is not registered in the authentication server the PIN code generation unit generates a PIN code. The print information generation unit generates print information corresponding to the print request mail. The print information includes for example print data data pertaining to a print job of the print data the user name and or the PIN code.

The response mail generation unit generates an electronic mail in response to the print request mail hereinafter also referred to as response mail . The response mail includes for example identification data of a print data based on each print data. The response mail may also include for example a PIN code corresponding to a print request mail in the case where the PIN code is generated.

The mail reply unit transmits the response mail to the transmission source address of the print request mail. The print information transmission unit stores the print information in the storage server by transmitting the print information to the storage server .

The guest data storage unit stores data pertaining to a guest user. A guest user is a user that initially have authorization to use the printing system but is allowed to use the printing system as an exception.

The authentication server includes for example a request response unit and a user data storage unit . The user data storage unit stores user data with respect to each regular user. The request response unit performs various processes in response to for example an authentication request a request for confirming existence of a mail address and a request for obtaining a user name corresponding to a mail address.

It is to be noted that the functions of the request response unit are implemented by the processes executed by the CPU of the authentication server in accordance with the program installed in the authentication server . The functions of the user data storage unit are implemented by using for example an auxiliary storage device of the authentication server or a storage device connected to the authentication server via a network.

The storage server includes for example a print information reception unit a print information storage unit and a print information providing unit . The print information reception unit receives print information transmitted from the management server and stores saves the print information in the print information storage unit . The print information providing unit transmits returns print information stored saved in the print information storage unit to the image forming apparatus in response to a request to obtain print information from the image forming apparatus . The print information transmitted to the image forming apparatus is print information that includes a user name or a pin code designated in the print information obtain request.

It is to be noted that the functions of the print information reception unit and the print information providing unit are implemented by the processes executed by the CPU of the storage server in accordance with one or more programs installed in the storage server . The functions of the print information storage unit are implemented by using for example an auxiliary storage device of the storage server or a storage device connected to the storage server via a network.

The image forming apparatus includes for example an authentication control unit a print information obtaining unit and a print control unit . The functions of each of these units are implemented by the processes executed by the CPU in accordance with one or more programs installed in the image forming apparatus . The authentication control unit accepts a user name and a password input from the user. Alternatively the authentication control unit may also accept a PIN code input from the user. In a case where a user name and a password are input the authentication control unit requests the authentication server to authenticate the input user name and password. The print information obtaining unit transmits a request to obtain print information to the storage server . The request to obtain print information includes at least a user name or a PIN code designated accepted by way of the authentication control unit . The print control unit performs a printing process on print data obtained by the print information obtaining unit.

Next processes performed in the printing system according to the first embodiment of the present invention are described. is a sequence diagram for describing a sequence of processes for storing print data according to the first embodiment of the present invention.

In Step S the user terminal transmits a print request mail to a predetermined mail address in response to an instruction input by the user. Electronic data that is to be printed target print data is attached to the print request mail. The predetermined mail address is for example a mail address designated beforehand as a mail address of the management server .

The mail server transfers the print request mail to the management server according to a typical communication protocol used for transferring electronic mail Step S .

The print request mail is received by a mail reception unit of the management server . In response to the print request mail the management server designates a transmission source address of the print request mail and transmits a request to confirm the existence of the designated address existence confirmation request Step S . In response to the existence confirmation request the request response unit of the authentication server determines whether the designated address is stored in the user data storage unit to confirm existence of the designated address Step S .

In Step S the request response unit determines whether the mail address designated in the existence confirmation request is included in the mail addresses of the user information stored in the user data storage unit .

Then the request response unit transmits returns a response including a confirmation result to the management server Step S . The confirmation result is information indicating the existence of the designated mail address.

In response to the received confirmation result the management server generates print information pertaining to the print request mail Step S . Then the mail reply unit of the management server transmits a response mail in reply to the print request mail to the transmission source address of the print request mail Step S . The mail server transfers the response mail to the user terminal of the transmission source of the print request mail Step S . It is to be noted that the response mail is generated in the process of generating the print information.

After the response mail is transmitted the print information transmission unit of the management server transmits print information to the storage server Step S . The print information transmitted to the storage server includes for example print data generated in the print information generation process and other data associated to the print data.

When the print information reception unit of the storage server receives the print information from the management server the print information storage unit stores the received print information therein Step S .

The job name is identification data that corresponds to each print data or each print job executed for each print data. The user mode is data indicating whether the transmission source address of the print request mail is being managed in the user data storage unit . In this embodiment the user mode indicates whether the user of the source of the print request is a regular user or a guest user. In the letter U indicates a regular user and the letter G indicates a guest user. The user name indicates the name of the user that is responsible for a print job based on the print information. The user responsible for a print job is for example a user that is to pay for the costs incurred by a print job. It is however to be noted that a division of the user s company or the like may attend to the actual payment of the costs incurred by the print job . The PIN code indicates a PIN code assigned to the user in a case where the user is a guest user.

Next Step S is described in further detail below. is a flowchart for describing a sequence of processes for generating print information according to the first embodiment of the present invention.

In a case where the confirmation result received in Step S of indicates the existence of the transmission source address of the print request mail Yes in Step S the address confirmation unit obtains the user name corresponding to the transmission source address from the authentication server Step S . That is a user name corresponding to the transmission source address is obtained from the user data storage unit .

Then the print information generation unit generates print data of the body text of the print request mail and print data of the electronic data attached to the print request mail target print data Step S . Alternatively the target print data may be generated only from the electronic data attached to the print request mail. Further in a case where the electronic data attached to the print request mail includes multiple files and is compressed with an archive file format such as a zip format the print data generation unit uncompresses the electronic data and generates print data in correspondence with each uncompressed file. Therefore multiple print data print jobs may be generated from a single print request mail.

Then the print information generation unit generates print information for each print data Step S . That is the print information generation unit generates print information including a job name generated in correspondence with each print data. The letter U is set to the user mode in each print information. Further the user name obtained in Step S is set with respect to each print information. The print information generated by the print information generation unit is transmitted to the storage server in Step S of .

Then the response mail generation unit generates for example a response mail that includes a body text in which a job name of a corresponding print information is written Step S . In Steps S and S the response mail is transferred to the user terminal of the transmission source of the print request mail. The user that has received and browsed the response mail can identify the job name corresponding to each print data generated in correspondence with the print request mail transmitted from the user. It is however to be noted that the responses mail does not necessarily need to be transmitted to the user in a case where the transmission source address exists in the user data storage unit . This is because the user can recognize the content of print data corresponding to each job name during the below described procedure of operating on the image forming apparatus in a case where job names are generated based on file names or the like of electronic data.

In a case where the confirmation result received in Step S of indicates that the transmission source address of the print request mail does not exist No in Step S the address confirmation unit determines whether the transmission source address is a mail address of a guest user Step S . The determination is performed by referring to the guest data storage unit .

The guest mail address is a mail address of a transmission source that is used when the guest user transmits a print request mail. That is the guest mail address is a mail address that is different from the mail address stored in the user data storage unit . The regular user name is for example a user name of a user responsible for a print job to be performed for a guest user. The management code is for example identification data indicating a regular user s division department of a company to be charged for the costs incurred by the print job of the guest user. The PIN code is a code generated for a guest user in the below described Step S. Therefore in a case of a guest user that has never transmitted any print request mail in the past there is no registered PIN code corresponding to the guest user.

Each of the records of the guest data storage unit corresponding to guest mail address regular user name and management code may be registered by a single user e.g. administrator . Alternatively a regular user may register the records that are associated with the regular user name. For example in a case where records associated with the regular user name are registered by the regular user the regular user logs in to the management server . The management server may automatically register a user name of the regular user that has logged in to the management server in association with a regular user name corresponding to the records to be registered to the guest data storage unit by the regular user. By the automatic registration each regular user can avoid the possibility of being associated to an unintended guest user mail address.

In Step S it is determined whether a transmission source address of the print request mail is registered as a guest mail address among the records of the guest data storage unit .

In a case where the transmission source address is stored as a guest mail address in the guest data storage unit Yes in Step S the PIN code generation unit generates a PIN code S . In the following the guest user having its transmission source address registered as a guest mail in the guest data storage unit is referred to as target guest user . The PIN code generation unit stores the generated PIN code in correspondence with the transmission source address of the print request mail.

It is however to be noted that a PIN code need not be newly generated in a case where a PIN code is already stored in the guest data storage unit . In this case the stored PIN code need only be obtained from the guest data storage unit . Further the PIN code may be generated by using any method as long as the generated PIN code does not overlap with another guest user s PIN code stored in the guest data storage unit . It is however preferable for the PIN code to be constituted of letters that can be easily input by way of the operation panel of the image forming apparatus or a software keyboard displayed on the operation panel of the image forming apparatus .

Then in Step S the print information generation unit generates print data of a body text of the print request mail and print data of electronic data attached to the print request mail target print data . The process performed in Step S may be the same as the process performed in Step S.

Then the print information generation unit generates print information for each print data Step S . That is the print information generation unit generates print information including a job name generated in correspondence with each print data. The letter G is set to the user mode in each print information. Further the regular user name stored in correspondence with the transmission source of the print request mail in the guest data storage unit is set with respect to each print information. Further the PIN code generated in Step S is also set with respect to each print information. The print information generated by the print information generation unit is transmitted to the storage server in Step S of .

Then the response mail generation unit generates for example a response mail that includes a body text in which a job name and a PIN code of a corresponding print information is written Step S . In Steps S and S of the response mail is transferred to the user terminal of the transmission source of the print request mail. The user that has received and browsed the response mail can identify the PIN code that is required to be input to the image forming apparatus when printing the print data generated in response to the print request mail. Further the user can also identify the job name corresponding to each print data. It is however to be noted that the job name does not necessarily need to be included in the response mail.

It is to be noted that the response mail transmitted in Step S may also be transmitted to the regular user associated with the guest user having a destination address to which the response mail is transmitted in Step S. The user name of the regular user can be identified based on the guest data storage unit . The mail address corresponding to the user name of the regular user can be identified based on the user data storage unit . By transmitting the response mail to the regular user in addition to the guest user in response to the print request mail from the guest user the regular user can detects a print job that is registered with the regular user s name. Thereby the regular user can detect fraudulent registration of an unintended print job.

It is to be noted that in a case where the transmission source address of the print request mail is stored in neither of the user data storage unit and the guest data storage unit No in Step S the response mail generation unit generates for example a response mail including an error message hereinafter also referred to as error mail Step S . In this case the error mail is transmitted returned in response to the print request mail in Step S. Further in this case the print information generation part does not generate any print information. Therefore Steps S and S of are not executed. That is the user is unable to print with the image forming apparatus .

It is to be noted that the mail address used as the transmission source address of the print request mail may be registered as the guest mail address to be stored in the guest data storage unit . In this case it is determined whether the transmission source address of the print request mail is stored as a guest mail address among the records of the guest data storage unit in Step S.

In a case of storing the mail address of the transmission source as the guest mail address in the guest data storage unit the mail address of the guest user is in principle registered beforehand. Then the guest user transmits a print request mail having the guest user s mail address as the transmission source of the print request mail. This ensures uniqueness in which a single guest user can be identified by a single PIN code. Further there is also an advantage of being able to use the same PIN code for transmitting print request mail with the same mail address except for a case where multiple users are able to use a single mail address . It is however necessary to register personal information of the guest user such as a mail address in correspondence with each guest user.

On the other hand in a case where the guest mail address stored in the guest data storage unit is set as the mail address of a transmission destination one or more guest addresses are in principle distributed to and registered in correspondence with a single regular user. Then in a case where there is for example a visit of a guest the regular user can teach the guest address to the guest so that the guest can transmit a print request mail having the guest address as its transmission destination destination address . Thereby there is no need to register guest mail addresses equivalent to the number of guests that desire to transmit a print request mail and no need to register the mail addresses of the guest users. However in a case where a PIN code corresponding to a guest mail address is shared by multiple guest users print data of another guest user may be unintentionally printed in a case where multiple guest users use the same single guest mail address e.g. in a case where there are multiple visitors . Therefore in this case a unique PIN code corresponding to a single print request mail is to be generated or a unique PIN code corresponding to a transmission source address is to be generated and managed.

The mail address to be used as the guest mail address may be decided depending on how a company or user operates. It is preferable to manage the guest mail addresses of each record of the guest data storage unit by associating the guest mail addresses with identification data that indicate whether a guest mail address is a transmission source address or a transmission destination address. Thereby the degree of freedom of the determination in Step S can be increased determining whether a transmission source address or a transmission destination address is a mail address of the guest user based on identification data.

Then in a case where the user receives a response mail other than an error mail the user goes to the area where the image forming apparatus is installed placed and operates the image forming apparatus . Next a procedure of processes performed by the image forming apparatus in response to the operation of the user is described.

For example in response to a call for a printing function for printing print data stored in the storage server the authentication control unit displays a log in screen on the operation panel Step S .

In a case where the operator of the image forming apparatus is a regular user a user name and a password are input to the log in screen . On the other hand in a case where the operator of the image forming apparatus is a guest user a PIN code which is reported notified to the guest user by way of a response mail is input to the log in screen

It is to be noted that the PIN code may be input even in a case where the operator of the image forming apparatus is a regular user. For example in a case where the regular user transmits a print request mail from a mail address that is not stored in the user data storage unit e.g. a case where the regular user transmits a print request mail from a mail address of a user terminal personally used by the regular user a response mail transmitted to the user terminal in response to the print request mail includes a PIN code. On the other hand there is also a case where the regular user transmits a print request mail from another mail address that is stored in user data storage unit . In this case both print data associated with the PIN code and print data associated with the user name of the regular user are stored with respect to the regular user in the storage server . In order to enable printing of both print data by a single log in operation the PIN code may also be input at the same time of inputting the user name and the password of the regular user.

When at least one of a user name a password and a PIN code is input to the log in screen and the OK button is pressed the authentication control unit determines whether a user name or a password is input to the log in screen Step S . In a case where the user name and the password are input Yes in Step S the authentication control unit performs an authentication process S . More specifically the authentication control unit transmits an authentication request including a designated user name and password to the authentication server . The request response unit of the authentication server determines whether a set of the designated user name and the password included in the authentication request is stored in the user data storage unit . In a case where the set is stored in the user data storage unit the authentication process is a success. In a case where the set is not stored in the user data storage unit the authentication process is a failure. The request response unit transmits data indicating success failure of the authentication process to the authentication control part of the image forming apparatus in response to the authentication request transmitted from the authentication control part .

In a case where the authentication process is a success Yes in Step S the print information obtaining unit add the user name input to the log in screen to designation data Step S . It is to be noted that designation data is data that is designated in the below described Step S for obtaining a list of print information from the storage server . In a case where the authentication process is a failure No in Step S Step S is not performed.

In a case where a user name and a password are not input to the log in screen No in Step S a case where authentication based on the input user name and password is a failure No in Step S or a case where the process of Step S is completed the print information obtaining unit determines whether a PIN code is input to the log in screen Step S . In a case where a PIN code is input Yes in Step S the print information obtaining unit adds the PIN code to designation data S . In a case where a PIN code is not input No in Step S Step S is not performed.

Then the print information obtaining unit designates designation data and obtains a list of print information from the storage server Step S . More specifically the print information obtaining unit designates designation data and transmits a request to obtain a list of print information including the designated designation data to the storage server . In response to the request from the print information obtaining unit the print information providing unit of the storage server obtains print information including the designated designation data from the print information storage unit see . That is in a case where a user name and a password are input to the log in screen the obtained print information includes a user mode indicated as U and a user name matching the input user name. In a case where a PIN code is input to the log in screen the obtained print information includes a user mode indicates as G and a PIN code matching the input PIN code. It is to be noted that print information obtained in response to a print request mail from a guest user includes a user name of a regular user regular user name associated with the guest user. Therefore in a case where a user name and a password are input to the log in screen there is a case where the obtained print information includes a user mode indicated as G and a user name matching the input user name. As a result the regular user can instruct the image forming apparatus to perform a printing process on a print job based on a print request mail transmitted from a guest user. Thus for example even in a case where the image forming apparatus is installed in an area restricting entry of a guest user the regular user can substitute for the guest user for instructing a print job. However even in the case where a user name and a password are input to the log in screen it is possible to prohibit obtaining of print information including a user mode indicated as G and the user name matching an input user name if there is a priority for protecting confidential data included in a print request mail transmitted from a guest user.

If the authentication process is a success in a case where both the set of user name password and the PIN code are input to the log in screen both print information including a user mode U and the input user name and print information including a user mode G and the input PIN code are obtained. If the authentication process is a failure in a case where both the set of user name password and the PIN code are input to the log in screen print information including a user mode G and the input PIN code is obtained.

The print information providing unit transmits a list of the obtained print information to the image forming apparatus . It is to be noted that the transmitted print information does not need to contain print data.

Then the print information obtaining unit of the image forming apparatus displays for example a list of print jobs included in the transmitted print information on the operation panel Step S . The list includes candidates of data to be printed target print data . That is the user can input an instruction for performing a printing process based on the print information included in the list.

When one or more print jobs is selected from the list the print information obtaining unit obtains print data corresponding to the one or more selected print jobs from the storage server Step S . More particularly the print information obtaining unit transmits a request to obtain print data corresponding to a designated print job to the storage server . In response to the request the print information providing unit of the storage server transmits print data corresponding to the designated print job included in the request to the image forming apparatus . The print information corresponding to the designated print job may also be hereinafter referred to as target print information .

In a case where print information corresponding to a single print data is obtained according to the input user name or PIN code it is possible for the print information obtaining unit obtain print data without performing the process of Step S. Further the print information providing unit may transmit information data obtained according to the input user name or PIN code to the image forming apparatus instead of transmitting the list of print information to the image forming apparatus .

Then the print control unit controls execution of a print job pertaining to the print data Step S . As a result a sheet having the print data printed thereon is output. A log indicating the execution of the print job may include a user name included in the target print information. In this embodiment a user name is included even in a case where the user mode of the print information is indicated as G . That is in this embodiment the user name is included in both print information including the user mode U and print information including user mode G . Thus for example in a case where a billing destination that is to be billed i.e. entity for payment for the cost incurred by a print job is determined based on the user name the billing destination for the payment can be determined even for a print job indicated with a user mode G . It is to be noted that identification data of the billing destination and a corresponding user name may be stored in for example the HDD .

In Step S if the target print information is indicated with a user mode U i.e. a case where the operator of the image forming apparatus is a regular user the print control unit executes the print job within the range of authority print authority corresponding to the user name input during the log in operation. On the other hand if the target print information is indicated with a user mode G i.e. a case where the operator of the image forming apparatus is a guest user the print control unit executes the print job within the range of authority of the regular user associated with the guest user. Alternatively the print job may be executed within a range of authority corresponding to the guest user. It is to be noted that the authority of each user may be stored in the guest data storage unit . The authority of guest user may be shared by multiple guest users or different from one another.

According to the above described first embodiment even in a case where a guest user does not have its account e.g. user name password registered in the authentication server a print authority may be granted to the guest user. Therefore the necessity for the guest user to request the regular user to print data can be reduced. Further a PIN code is reported notified to a guest user in response to each print request mail from the guest user. Therefore a virtual temporary account can be provided to each guest user. Thus print data that can be operated by each of the guest users is limited to print data corresponding to a print request mail from each of the guest users. This prevents print data of a guest user from being easily operated by other guest users.

Further the necessity for installing an image forming apparatus dedicated to be used by a guest user is reduced.

Further in a case where a guest user is permitted to use the printing system as an exception the guest user may be stored in the guest data storage unit in correspondence with one of the regular users beforehand. As a result a regular user can be associated with respect to a print job requested by the guest user. Further the billing destination that is to pay for the cost incurred by the print job can be determined based on the association between the guest user and the corresponding regular user.

Further even in a case where the user is a regular user the regular user may transmit a print request mail from a mail address that is different from a mail address stored in correspondence with the regular user. However in this case the regular user can be prevented from being mistaken for a guest user. That is as long as a mail address designated as a transmission source address of a print request mail is stored as a guest mail address in correspondence with a name of a regular user in the guest data storage unit execution of a print job can be permitted in accordance with the print request mail. Further the billing destination of the cost incurred by the print job can be determined in accordance with the print request mail.

In a case where multiple print request mails are transmitted from the same guest user multiple response mails having respective PIN codes are transmitted to the user terminal of the guest user. Considering this situation the log in screen may be displayed to enable input of multiple PIN codes. The print information obtaining unit may obtain print information including any one of the multiple PIN codes from the storage server . By doing so a complicated process of having to repeat a log in operation or displaying of the list of print information with respect to each of the multiple PIN codes can be prevented.

Further the PIN code generation unit of the management server may store a generated PIN code in correspondence with a transmission source address of a print request mail in for example the auxiliary storage apparatus . In such case where a PIN code is stored in correspondence with a transmission source address of a print request mail in the auxiliary storage apparatus the PIN code generation unit may output the stored PIN code without having to generate a new PIN code. In this case a response mail including the stored PIN code is transmitted in response to the print request mail.

Thereby in a case where multiple print request mails are transmitted from the same guest user a single PIN code is assigned with respect to the guest user instead of assigning a PIN code to each print request mail.

Accordingly the guest user can instruct the image forming apparatus to display a list of print information corresponding to the multiple print request mails or print the print information by inputting the PIN code to the log in screen .

It is to be noted that the image forming apparatus may set a limitation in a case of printing print data corresponding to print information obtained by designation of a PIN code. For example the limitation may be for example an upper limit in the number of sheets that can be printed or a limitation preventing the performing of a color printing process. By doing so the guest user is prevented from performing a large amount of printing.

Further a validity date may be set to a PIN code. Thus a PIN code having an expired validity date may be invalidated.

Next a second embodiment of the present invention is described. In the following second embodiment aspects that are different from the first embodiment are described. Therefore aspects that are not mentioned in the second embodiment may be substantially the same as the above described aspects of the first embodiment.

The second embodiment is explained with an example in which the functions of the management server the authentication server and the storage server are provided by way of the Internet similar to that of a cloud service. Therefore in the second embodiment the Internet is provided between the user terminal the mail server and the management server and between the image forming apparatus the authentication server and the storage server .

Further the storage server includes a user device information storage unit . The user device information storage unit stores identification data hereinafter also referred to as device ID of each image forming apparatus installed in correspondence with each user company.

The sequence of processes for storing print data according to the second embodiment is substantially the same as the sequence illustrated in . However a part of the steps of the sequence of the second embodiment is different from the steps of the sequence of the first embodiment. More specifically in Step S the user terminal designates a predetermined mail address of the management server and transmits a print request mail to the predetermined mail address of the management server . In this embodiment the predetermined mail address of the management server is assigned to each user company to which a target image forming apparatus belongs i.e. image forming apparatus that is to perform printing . That is the predetermined mail address of the management server is assigned to each user company at which the target image forming is installed.

The mail reception unit of the management server determines which user company s image forming apparatus is designated to be the target image forming apparatus based on the mail address in which the print request mail has been received. That is the mail reception unit determines the target image forming apparatus based on the mail address designated to be the destination of the print request mail. The determination is performed by using the address correspondence data storage unit .

The company code is an identification data assigned to each user company. The reception address is a mail address destined for the management server and is assigned to each user company. From the standpoint of the management server the reception address is a mail address or a part of a mail address for receiving a print request mail from a corresponding user company.

The mail reception unit stores a company code corresponding to a mail address that has received a print request mail. The company code is stored in for example the memory apparatus . Accordingly in Step S print information including a company code is transmitted to the storage server . When the print information reception unit of the storage server receives the print information from the management server the print information storage unit stores the received print information therein Step S .

Then the user that has transmitted the print request mail goes to the area where the image forming apparatus is installed placed and operates the image forming apparatus . Next a procedure of processes performed by the image forming apparatus in response to the operation of the user is described.

It is to be noted that in Step S of the address confirmation unit determines whether a transmission source address of a received print request mail is a guest user mail address by referring to the guest data storage unit to search for a company code corresponding to a mail address matching the transmission source address of the print request mail.

The procedure of processes performed by the image forming apparatus in the second embodiment is basically the same as the procedure of processes illustrated in . However a part of the steps of the processes of the second embodiment is different from the steps of the processes of the first embodiment. More specifically in Step S the print data obtaining unit designates designation data including a company code and a device ID in addition to other designated data and transmits a request to obtain a list of print information including the designated designation data to the storage server . The device ID is a device ID of the image forming apparatus that is to perform printing. The device ID is stored in for example the ROM the NVRAM or the HDD of the image forming apparatus . The company code is a code of the company at which the image forming apparatus is installed. The company code is set to the image forming apparatus beforehand. The company code that is set to the image forming apparatus may be stored in for example the NVRAM or the HDD .

It is to be noted that the device ID may be stored in the form of a specific application installed in the image forming apparatus . In this case the image forming apparatus having the specific application installed therein may be identified based on the device ID. That is in this embodiment as long as the image forming apparatus can be determined as the image forming apparatus having the specific application installed therein an identifier or the like of the specific application may be used as the device ID.

The print information providing unit of the storage server determines whether a set of the company code and the device ID included in a designation data of a print information obtain request is stored in the user device data storage unit .

In a case where the set of the company code of the user company and the device ID is not stored in the user device data storage unit the print information providing unit does not transmit a list of print information. This is because the image forming apparatus transmission source that has transmitted the request to obtain print information is likely to lack validity. The validity of an image forming apparatus is an indication that the image forming apparatus is installed in an appropriate user company.

In a case where the set of the company code of the user company and the device ID is stored in the user device data storage unit the print information providing unit obtains print information including the designation data in the request to obtain print information from the print information storage unit see . That is in the second embodiment print information which also includes a company code matching the company code included in the designation data is obtained from the print information storage unit . Then the print information providing unit transmits a list of the obtained print information to the image forming apparatus .

It is to be noted that the company code need not be included in the designation data in the request to obtain a list of print information in a case where there is no need to inspect the validity of the image forming apparatus . The print information providing unit may refer to the device ID included in the designation data and identify the company code corresponding to the device ID based on the user device information storage unit and used the identified company code to obtain print information from the print information storage unit .

According to the above described second embodiment the mail addresses destined for the management server are different for each user company. Further a company code is identified with respect to a request to obtain a list of print information from the image forming apparatus . In response to the request from the image forming apparatus the list of print information including the company code is transmitted to the image forming apparatus . Accordingly even in a case where print request mails are transmitted from users having the same user name from different user companies print information requested from one company can be prevented from becoming a printing candidate in response to a print request mail from another company.

In a case where a mail address of a transmission source of a print request mail is a mail address of a regular user of one of the user companies a company code can be identified by managing the mail addresses of regular users in association with company codes. Further in a case where a mail address of a transmission source of a print request mail is a mail address of a guest user a company code can be identified based on the mail addresses of regular users associated with guest users. Therefore mail addresses destined for the management server does not necessarily need to be provided for each user company.

It is to be noted that a mail address of the management server may itself be used as a company code for each user company. In this case the user device data storage unit need not be provided. In this case the mail address of the management server is included in print information and stored in the storage server . Further the mail address of the management server is stored beforehand in the image forming apparatus . The image forming apparatus transmits a request to obtain a list of print information including a device ID and a designated mail address of the management server to the storage server . The storage server transmits a list of print information including the mail address of the management server designated in the request.

Next a third embodiment of the present invention is described. In the following second embodiment aspects that are different from the first embodiment are described. Therefore aspects that are not mentioned in the second embodiment may be substantially the same the above described aspects of the first and second embodiments.

The third embodiment is explained with an modified example of processes performed during user authentication with the image forming apparatus .

In the first embodiment a user name a password or a PIN code are input to the log in screen . In this case the user is to input the user name the password or PIN code by using a keyboard or the like. In order to reduce operation load of the user the image forming apparatus of the third embodiment is provided with a non contact type card reader. The user terminal used by the user is a portable type terminal including the same IC chip as an IC chip of an IC card. For example a user name and a password of a user are stored in a storage unit of the user terminal . The user terminal includes an application that is to be transmitted to the image forming apparatus via the card reader of the image forming apparatus in a case where the user name and the password are read out from the storage unit of the user terminal when the user terminal is placed over the card reader of the image forming apparatus . The authentication control unit of the image forming apparatus performs an authentication process by using the user name and the password received by the card reader.

Even with this configuration of the modified example authentication of the regular user can be performed by placing the regular user s user terminal over the image forming apparatus .

In a case where the user of the user terminal is a guest user a response mail including a PIN code is transmitted in response to a print request mail transmitted from the user terminal . Then the response mail is stored in a storage unit of the user terminal . Accordingly the above described application included in the user terminal may be implemented to search for an electronic mail i.e. response mail having a predetermined mail address as the transmission source address in the user terminal when the user terminal is placed over the card reader of the image forming apparatus . In a case where the electronic mail having a predetermined mail address is found in the user terminal the PIN code included in the electronic mail may be transmitted to the image forming apparatus via the card reader. The print information obtaining unit of the image forming apparatus may designate the PIN code received from the card reader and obtain print information.

With the above described configuration the guest user can browse a list of print information associated with a PIN code assigned to the guest user by placing the guest user s user terminal over the image forming apparatus .

Further in a case where a user name a password and a PIN code are stored in the user terminal the image forming apparatus may obtain the user name the password and the PIN code and obtain print information corresponding to the user name as well as print information corresponding to the PIN code.

It is to be noted that although the above described embodiments describe outputting data by printing with the image forming apparatus the present invention is not limited to printing. For example the present invention may be applied to a case of projecting image data from a projector. That is the present invention may also be applied to a case where target print data is replaced with target output data that is output by way of displaying with a terminal or projecting with a projector.

Although the above described embodiments are described with examples where target print data are transmitted by way of electronic mail the target print data may be transmitted to the management server by using other methods of communications. In this case the management server receives target print data and data pertaining to a user name of a regular user or target print data and data pertaining to a mail address of a guest user from the user terminal . In case where the mail address of the guest user is stored in correspondence with a user name of a regular user in the guest data storage unit the management server generates a PIN code and transmits the generated PIN code to the user terminal .

In a case where company codes are managed as described in the second embodiment the management server receives data pertaining to a company code from the user terminal in addition to receiving target print data along with data pertaining to a user name of a regular user or receiving target print data along with data pertaining to a mail address of a guest user.

Further in a case where the management server does not receive a company code or a case where the management server is unable to find a company code that matches a received company code the management server transmits a notice to the user terminal indicating that printing of target print data is denied. In a case where there is a matching company code and a mail address of a guest user is stored in the guest data storage unit in correspondence with a user name of a regular user the management server generates a PIN code and transmits the generated PIN code to the user terminal .

It is to be noted that a single computer may be used to serve as both the management server and the storage server in the above described embodiments of the present invention. Alternatively a single computer may be used to serve as the management server the storage server and the authentication server . Alternatively the functions of the management server the storage server and the authentication server may be provided in the image forming apparatus .

On the other hand multiple computers may be used for each of the management server the storage server and the authentication server .

Further although the above described embodiments are described with an example where print data are generated by the management server the generation of print data pertaining to the electronic data attached to the print request mail may be implemented by one or more of the user terminal the management server the storage server and the image forming apparatus .

Next a fourth embodiment of the present invention is described. The fourth embodiment is a modified example of the second embodiment.

The service providing system is a computer system that provides a cloud service via a network. It is be noted that although this embodiment is described using an example of a cloud service this embodiment may also be applied to various other services provided via a network such as a service provided by a ASP Application Service Provider or a Web service.

The service providing system includes for example an access control apparatus a print service providing apparatus a service A providing apparatus a service B providing apparatus a common service providing apparatus and a database apparatus . Each of the apparatuses included in the service providing system may be implemented by a single computer.

The access control apparatus controls access to computers inside the service providing system . The access control apparatus also scatters decentralizes the workload of the computer inside the service providing system .

The print service providing apparatus includes one or more computers that control the processes for providing a cloud printing service. The cloud printing service is a service that allows print data to be uploaded to a cloud environment in this embodiment the service providing system and printed by the image forming apparatus according to necessity.

The service A providing apparatus and the service B providing apparatus are examples of computers that provide services other than the cloud printing service.

The common service providing apparatus includes one or more computers providing functions shared by apparatuses e.g. print service providing apparatus service A providing apparatus service B providing apparatus that directly provide a particular service via a network. The one or more computers of the common service providing apparatus may also provide functions used by multiple apparatuses.

The database apparatus includes one or more computers or storage devices that function as various storage units.

The user environment E1 is a system environment of an organization e.g. user company which is a user of the service providing system . The user environment E1 illustrated in includes for example an image forming apparatus an image projection apparatus a portable terminal other output apparatuses and the user terminal . The apparatuses and terminals included in the user environment E1 are connected to each other by a network wireless or wired such as LAN Local Area Network .

The image forming apparatus is substantially the same as the image forming apparatus of the second embodiment.

The image projection apparatus is for example a projector that projects image data. The portable terminal is for example a PDA Personal Digital Assistant a tablet type terminal a smartphone or a mobile phone. The other output apparatus are output apparatus other than those described above.

The user environment E1 also includes a firewall F1. The firewall F1 may be the same as a typically used firewall. For example the firewall F1 blocks request from outside the user environment E1.

The service providing system may be accessed from environments other than the user environment E1. For example the portable terminal or the PC may access the service providing system via the Internet. The portable terminal and the PC may be used inside the user environment E1.

The application layer L is a layer installed with applications used by a server for cooperating with other devices such as the image forming apparatus hereinafter also referred to as server application . The application layer L of includes for example a print service application a service A application and a service B application

The print service application is a server application pertaining to a cloud printing service. In this embodiment the print service application is installed in the print service providing apparatus . The service A application and the service B application are examples of other server applications. The service A application and the service B application are installed in the service A providing apparatus and the service B providing apparatus respectively.

The common service layer L is a layer including for example functions shared by multiple server applications or basic functions used by multiple server applications. The functions of the common service layer L can be called via a platform API Application Programming Interface . The platform API is basically called from the service applications installed in the application layer L. It is to be noted that the platform API may be publicized with respect to for example a third vendor other than an administrator of the service providing system . In this case server applications may be installed by the third vendor. That is service applications may be developed and added by using the platform API .

The common service layer L of includes for example a user authentication unit a device authentication unit a management data obtaining unit a mail obtaining unit a device communication unit a PIN code issue unit a PIN code management unit and a data conversion unit .

The user authentication unit authenticates a user. The device authentication unit authenticates a corresponding relationship between the image forming apparatus a user and an organization. The term organization may include for example a company of the above described embodiments and other organizations. It is to be noted that identification data corresponding to company code in the second embodiment is referred to as organization code in the fourth embodiment. Therefore the authentication of the corresponding relationship between the user and the organization includes a process of determining inspecting whether the user and the image forming apparatus belong to a corresponding organization.

The management data obtaining unit obtains for example data stored in the database layer L in response to a request from the application layer L. The mail obtaining unit obtains receives electronic mail stored in the mail server in accordance with POP Post Office Protocol or the like. The device communication unit performs communications between various devices. The PIN code issue unit issues generates PIN codes. The PIN code management unit manages PIN codes in correspondence with organization codes. The data conversion unit converts data formats. In this embodiment the data conversion unit generates print data based on target print data.

It is to be noted that one or more programs which are installed in the computers constituting the service providing system cause the computers to execute various processes to thereby implement each of the server applications of the application layer L and the components of the common service layer L.

The database layer L is a layer including a database storage unit that stores various data therein. The database layer L is implemented by using the database apparatus . The database layer L of includes for example an address correspondence data storage unit a user device data storage unit a user data storage unit a print data storage unit and a guest data storage unit .

The address correspondence data storage unit has substantially the same configuration as the configuration of the address correspondence data storage unit see . The user device data storage unit has substantially the same configuration as the configuration of the user device data storage unit see . The user data storage unit has a similar configuration as the user data storage unit see . The difference between the user data storage unit and the user data storage unit is described below. The print data storage unit has substantially the same configuration as the configuration of the print data storage unit see . The guest data storage unit has substantially the same configuration as the configuration of the guest data storage unit see . However unlike the guest data storage unit the guest data storage unit is provided for each organization code.

It is to be noted that the categorization of each of the applications software and storage units illustrated in is merely one example. Each of the applications software and storage units of the service providing system does not necessarily need not be categorized into layers as illustrated in for implementing the fourth embodiment of the present invention. That is the layer relationship or the like of the applications software and storage units of the service providing system are not to be limited in particular as long as the procedure of processes of the fourth embodiment can be executed.

A Web browser is a typical Web browser. A mail transmission unit transmits electronic mail. In this embodiment the mail transmission unit transmits a print request mail. It is to be noted that the mail transmission unit is implemented by causing the user terminal to execute processes of a program referred to as a mailer .

The print service application includes for example a mail analysis unit an organization code identification unit a user name identification unit a print information generation unit a response mail generation unit a mail reply unit and a print information providing unit .

The mail analysis unit analyzes a print request mail and extracts data e.g. target print data from the print request mail. The organization code identification unit identifies an organization code corresponding to a transmission source address of a print request mail. The user name identification unit identifies a user name corresponding to a transmission source address of a print request mail. The functions of the print information generation unit the response mail generation unit the mail reply unit and the print information providing unit are substantially the same as the functions of the print information generation unit the response mail generation unit the mail reply unit and the print information providing unit of .

Next a procedure of processes performed according to the fourth embodiment of the present invention is described. First an outline of the procedure of processes of the fourth embodiment is described by using a flowchart.

In Step S the mail transmission unit of the user terminal transmits a print request mail in accordance with an instruction input by a user. The print request mail is transmitted to an mail address assigned to an organization to which the user belongs. The contents of the print request mail is the same as those of the above described embodiments of the present invention.

Then the mail obtaining unit of the service providing system obtains the print request mail from the mail server Step S . Then the mail analysis unit of the print service application extracts a target print data from the print request mail Step S . Then the organization code identification unit of the print service application identifies an organization code corresponding to the print request mail based on the destination address of the print request mail and the address correspondence data storage unit Step S . That is the organization code identification unit obtains a corresponding organization code from the address correspondence data storage unit that stores organization codes in association with destination addresses. It is to be noted that in the fourth embodiment the configuration of the address correspondence data storage unit may be substantially the same as the configuration of the address correspondence data storage unit see . It is however to be noted that company code of the address correspondence data storage unit is to be replaced with organization code in the fourth embodiment.

Then the user name identification unit of the print service application determines whether it is possible to identify a user name of a regular user corresponding to the transmission source address of the print request mail by referring to the user data storage unit Step S . More specifically the user name identification unit determines whether the transmission source address of the print request mail corresponding to the organization code identified in Step S hereinafter also referred to as target organization code is stored in the user data storage unit .

The data item role is data for distinguishing whether each user is an administrator or a user. An administrator is an administrator of devices e.g. image forming apparatus that coordinate with the service providing system . The administrator performs operations for coordinating the service providing system with devices such as the image forming apparatus . The user is a user that uses the services provided by the service providing system .

In Step S it is determined whether user data including the target organization code and the transmission source address exists among the user data stored in the user data storage unit . In a case where such user data exists the user name included in the user data hereinafter also referred to as target user name is identified.

In a case where the target user name is identified Yes in Step S the data conversion unit of the service providing system generates print data pertaining to the target print data Step S . It is to be noted that in a case where the target print data has a format that allows the target print data to be printed without data conversion the process of generating print data may be omitted.

Then the print data generation unit generates print information Step S . The generated print information includes for example a job name a target organization code a target user name and print data. The print information generation unit stores the generated print information in the print information storage unit .

Then the response mail generation unit of the print service application generates a response mail Step S . The response mail includes for example a job name. Then the mail reply unit transmits the response mail to the transmission source address of the print request mail Step S .

On the other hand in a case where the user name of the regular user corresponding to the transmission source address cannot be identified by using the user data storage unit No in Step S the user name identification unit determines whether the user name of the regular user corresponding to the transmission source address can be identified by using the guest data storage unit Step S . More specifically the user name identification unit determines whether a record having the transmission source address as its guest mail address is included in the guest data storage unit . In a case where a corresponding record is stored in the guest data storage unit the user name of the regular user corresponding to the record is identified as the target user name.

In a case where the target user name is identified Yes in Step S the PIN code issue unit of the service providing system generates a PIN code Step S . The processes performed in and after Step S are substantially the same the processes performed on and after Step S. It is to be noted that the print information generated in Step S includes for example a job name an organization code a target user name a PIN code and print data. Further in Step S a response mail including a PIN code and a job name is generated.

In a case where the user name of the regular user cannot be identified even by using the guest data storage unit No in Step S the response mail generation unit generates a response mail including an error message hereinafter also referred to as error mail Step S . Then in this case the generated error mail is transmitted in Step S. Further in this case print information is not generated. Therefore the processes performed in Steps S and S of are not performed. That is the user is unable to perform printing.

Next a case registering print information by using the Web browser of the user terminal is described. That is in the fourth embodiment print information may be registered with a method other than transmitting a print request mail.

In this embodiment there are two patterns methods for logging in. The first pattern is to designate an organization code a user name and a password pattern 1 . The second pattern is to designate an organization code and a PIN code pattern 2 . In the case of pattern 2 a PIN code is to be issued to the user beforehand. The PIN issue button is to be pressed for having a PIN code issued to the user. The procedure of processes performed when the PIN issue button is pressed is described below.

In a case where the OK button of the log in screen is pressed the Web browser determines whether an organization code a user name and a password have been input to the log in screen Step S . It is to be noted that the processes performed by the Web browser are based on definitions of a Web page e.g. HTML HyperText Markup Language of the log in screen displayed by the Web browser .

In a case where an organization code a user name and a password are input to the log in screen Yes in Step S the Web browser receives authentication by the service providing system based on the input organization code user name and password S . More specifically the input organization code user name and password are transmitted to the user authentication unit . Then the user authentication unit performs authentication by determining whether the set of the input organization code user name and password is stored in the user data storage unit .

In a case where the authentication is a success and log in is permitted Yes in Step S the Web browser displays a data input screen S . The data input screen is a screen for allowing the user to select a file to be printed from the files stored in the user terminal . When a file is selected by the user via the data input screen data stored in the selected file is transferred from the Web browser to the service providing system Step S .

When the service providing system receives the data the same processes as the processes performed in Steps S and S of are performed Step S S . As a result print information including print data that is based on the received data is stored in the print data storage unit .

On the other hand in a case where an organization code a user name and a password are not input to the log in screen No in Step S the Web browser determines whether data input to the log in screen are an organization code and a PIN code Step S . In a case where the data input to the log in screen are an organization code and a PIN code Yes in Step S the Web browser receives authentication by the service providing system based on the input organization code and PIN code S . More specifically authentication is performed by determining whether the set of the input organization code and PIN code is stored in the service providing system .

In a case where the authentication is a success and log in is permitted Yes in Step S the processes performed on and after Step S are performed. As a result print information including the input organization code the input PIN code and a user name of a regular user corresponding to the input PIN code are stored in the print data storage unit . The user name of the regular user corresponding to the PIN code is identified by using the below described PIN code management table.

It is to be noted that in a case where the input pattern performed on the log in screen is neither the first pattern nor the second pattern No in Step S or a case where log in is a failure No in Step S the Web browser displays an error screen Step S . In this case print information is not registered.

Next a process of issuing a PIN code via a Web interface is described. The process of issuing a PIN code is performed before the authentication process based on the organization code and the PIN code.

In Step S the Web browser accepts receives a request for issuance of a PIN code PIN code issue request . The PIN code issue request is accepted after the user inputs an organization code to the log in screen and presses the PIN issue button . It is to be noted that the Web browser may display a response destination address designation screen see in response to the pressing of the PIN issue button .

The response destination address input area is for inputting a mail address of a destination transmission destination for receiving electronic mail including an issued PIN code response destination address . The check button is for indicating whether an issued PIN code is desired to be notified by electronic mail. In a case where the check button is checked data can be input to the response destination address input area.

When the OK button is pressed the Web browser transmits a PIN code issue request to the service providing system . The PIN code issue request includes the organization code and the guest mail address input via the log in screen . In a case where a response destination address is input to the response destination address designation screen the input response destination address is also included in the PIN code issue request.

Then the PIN code issue unit of the service providing system determines whether the guest mail address included in the PIN code issue request is stored in the guest data storage unit Step S . In a case where the guest mail address included in the PIN code issue request is not stored in the guest data storage unit No in Step S the PIN code issue unit does not issue a PIN code. In this case the service providing system may for example transmit an electronic mail indicating an error or return a Web page to Web browser .

In a case where the guest mail address included in the PIN code issue request is stored in the guest data storage unit Yes in Step S the PIN code issue unit generates a PIN code Step S . The PIN code is associated with the organization code included in the PIN code issue request and with the user name of the regular user corresponding to the guest mail address included in the PIN code issue request. The PIN code associated with the organization code and the user name of the regular user is managed by the PIN code management unit . The user name of the regular user corresponding to the guest mail address is a user name of a regular user stored in correspondence with the guest mail address in the guest data storage unit . The PIN code management unit uses for example the PIN code management table see to manage the organization code the PIN code and the user name of the regular user that are associated with each other.

Then the PIN code management unit determines whether there is a designated response destination address included in the PIN code issue request Step S . In a case where a response destination address is designated Yes in Step S the PIN code management unit transmits an electronic mail including a generated PIN code to the designated response destination address Step S . In a case where a response destination address is not designated No in Step S the PIN code management unit transmits a reply including data of a Web page to the Web browser in response to the PIN code issue request Step S . The data of the Web page is used for displaying the generated PIN code.

Regardless of the outcome of Step S the user can confirm the generated PIN code. Thereby the user can log in with the above described second pattern by using the generated PIN code.

It is to be noted that a set of a user name and a password or authentication data of a regular user may be input instead of inputting a guest mail address to the response destination address designation screen . In this case it is determined whether an input user name included in the PIN code issue request is stored in the user data storage unit . In a case where the input user name is stored in the user data storage unit a PIN code is issued.

In Step S the mail transmission unit of the user terminal transmits a print request mail to a mail address assigned to an organization to which the user belongs. The print request mail is transferred to the mail server by using for example SMTP Simple Mail Transfer Protocol .

The mail obtaining unit of the service providing system obtains the print request mail stored in the mail server by using for example POP Post Office Protocol Steps S S . Then the mail obtaining unit transfers the print request mail to the print service application S . The mail analysis unit of the print service application extracts a target print data from the print request mail Step S .

Then an organization code identification unit of the print service application requests the management data obtaining unit to obtain an organization code corresponding to a destination address of the print request mail Step S . The management data obtaining unit obtains an organization code stored in association with the destination address in the address correspondence data storage unit see Step S . Then the management data obtaining unit transmits the obtained organization code hereinafter also referred to as target organization code to the organization code identification unit Step S .

Then the user name identification unit of the print service application requests the management data obtaining unit to obtain a user name corresponding to a transmission source address of the print request mail from the user data storage unit Step S . Then the management data obtaining unit attempts to obtain a user name stored in correspondence with the transmission source address in the user data storage unit see Step S . In this example it is assumed that the management data obtaining unit is unable to obtain a corresponding user name. Accordingly the management data obtaining unit transmits a response to user name identification unit to report that there is no corresponding user name Step S .

In response to the response from the management data obtaining unit the user name identification unit requests the management data obtaining unit to obtain a user name corresponding to a user name corresponding to the transmission source address of the print request mail from the guest data storage unit Step S . The management data obtaining unit attempts to obtain a user name user name of regular user stored in correspondence with the transmission source address in the guest data storage unit see Step S . In this example it is assumed that the management data obtaining unit is able to obtain a corresponding user name. Accordingly the management data obtaining unit transmits a response to the user name identification unit to report that there is a corresponding user name Step S .

In response to the identification of the user name by referring to the guest data storage unit the user name identification unit designates a target organization code and the identified user name hereinafter also referred to as target user name and requests the PIN code issue unit to issue a PIN code Step S . Then the PIN code issue unit generates a PIN code Step S and transmits the generated PIN code together with the target organization code to the PIN code management unit Step S . Then the PIN code management unit associates the target organization code the PIN code and the target user name with each other and registers the associated target organization code PIN code and target user name in the PIN code management table see Step S . The PIN code issue unit also transmits a response including the PIN code to the user name unit Step S .

Then the print information generation unit requests the data conversion unit to convert the target print data into print data Step S . The data conversion unit generates print data based on the target print data and stores the generated print data in an auxiliary storage device Step S . It is to be noted that the data conversion unit assigns identification data data ID to the generated print data. In the fourth embodiment the data ID is a job name. Then the data conversion unit transmits a response to the print information generation unit Step S . The response transmitted to the print information generation unit includes a job name and a path name of a file having the print data stored therein.

The print information generation unit generates print information including a job name a target organization code a target user name a PIN code and a path name of a file having print data stored therein Step S . It is to be noted although print data is included in the print information in the above described example print data itself need not be included in the print information in a case where print information includes data that allows print data to be identified such as a path name of print data. Therefore a path name of print data may also be stored as an item of the print data illustrated in .

Then the response mail generation unit of the print service application generates a response mail including for example a job name and a PIN code Step S . Then the mail reply unit transmits the generated response mail to the transmission source address of the print request mail Step S .

In response to data input to for example the log in screen and the response destination address designation screen the Web browser of the user terminal designates an organization code target organization code and a guest mail address and transmits a PIN code issue request including the designated target organization code and the guest mail address to the service providing system Step S .

In response to the PIN code issue request the PIN code management unit obtains a substitute account from a substitute account management table Step S . The substitute account is an account to be used instead an actual account user name and password for a user. That is a user that has requested the issuing of a PIN code is likely to have no account. Thus the user authentication unit would be unable to perform authentication for such user without an account. This will result in the user being unable to log in to the service providing system . In view of this situation the substitute account can be used.

It is to be noted that a user name and password of an administrator of each organization may be used as a substitute account.

Then the PIN code management unit designates a target organization code and a user name and password of the substitute account and transmits an authentication request including the designated target organization code and designated user name password of the substitute account to the user authentication unit Step S . The user authentication unit performs an authentication process on the organization code the user name and the password by referring to the user data storage unit Step S . Then the user authentication unit transmits an authentication result to the PIN code management unit Step S .

In a case where the authentication is a success the PIN code management unit request the PIN code issue unit to issue a PIN code Step S . The PIN code issue unit generates a PIN code Step S and transmits the generated PIN code to the PIN code management unit Step S . The PIN code management unit associates a user name with the target organization code the generated PIN code and the guest mail address and registers the user name and associated data in the PIN code management table see Step S . Thus a user name corresponding to a guest mail address can be identified by referring to the guest data storage unit .

Then the PIN code management unit transmits a response including the PIN code to for example the user terminal Step S . The manner of reporting notifying the PIN code is not limited to the form of electronic mail. For example the PIN code may also be reported in the form of a Web Page. In a case where electronic mail is used to report the PIN code an electronic mail including the PIN code is transmitted to the response destination address designated in the PIN code issue request. Therefore a terminal other than the user terminal is able to receive the electronic mail including the PIN code.

A user which has obtained a PIN code can log in to the service providing system by using the PIN code. Accordingly the user inputs an organization code and the PIN code to the log in screen see displayed on the Web browser of the user terminal and presses the OK button . In response to the pressing of the OK button the Web browser transmits a log in request using the PIN code to the service providing system Step S . The log in request includes a designation of the organization code and PIN code input to the log in screen . In a case where uniqueness is ensured for PIN codes outside of an organization the designation may only be the PIN code input to the log in screen . In the below described processes data is identified by referring to a combination of an organization code and a PIN code. However in the case of designating only the PIN code input to the log in screen data may be identified by referring only to the PIN code in the below described processes.

The PIN code management unit of the service providing system performs an authentication process on the designated organization code and the PIN code included in the log in request Step S . More specifically the PIN code management unit determines whether a set of the designated organization code and the PIN code is stored in the PIN code management table. In a case where the set of the organization code and the PIN code is stored in the PIN code management table the authentication process is a success. In a case where the set of the organization code and the PIN code is not stored in the PIN code management table the authentication process is a failure.

In the case where the authentication of the PIN code is a success an authentication process using the substitute account is performed with a procedure of processes similar to the procedure performed from Steps S to S. In a case where the authentication process using the substitute account is a success log in is a success. Then the PIN code management unit reports notifies the successfully authenticated organization code the PIN code and the user name target user name associated with the organization code and PIN code are reported to the print service application Step S .

Then the print service application transmits a reply in response to the PIN code log in request to the user terminal Step S . The reply include data of a Web page for displaying a data input screen. The Web browser of the user terminal displays a data input screen base on the data of the Web page.

In a case where the user selects a file from the data input screen displayed on the user terminal the Web browser transmits data included the selected file to the print service application Step S . Then by performing the processes of Steps S to S of the print service application generates print data pertaining to the data included in the selected file. Then print information including a job name a target organization code a target user name a PIN code and a path name of the generated print data is stored in the print data storage unit Steps S S .

Steps S S of are processes performed in a case where a regular log in i.e. log in based on an organization code a device ID a user name and a password is performed from the image forming apparatus . On the other hand Steps S S of are processes performed in a case where a PIN code log in i.e. log in based on an organization code a device ID and a PIN code is performed from the image forming apparatus

In a case where the user inputs a user name and a password via the log in screen see displayed on the operation panel of the image forming apparatus and presses the OK button the authentication control unit transmits a log in request to the service providing system Step S . The log in request includes designations of an organization code a device ID a user name and a password. Alternatively the organization code and the device ID may be stored beforehand in the HDD of the image forming apparatus . Alternatively the organization code may be input via the log in screen . In this case of inputting the organization code the log in screen may include an input area for inputting the organization code.

In a case where the service providing system receives the log in request the device authentication unit performs an authentication process Step S . More specifically authentication is determined to be a success in a case where the following two conditions are satisfied. The first condition is that a set of the organization code and the device ID designated in the log in request is stored in the user device data storage unit see . The second condition is that a set of the organization code target organization code the user name target user name and the password designated in the log in request is stored in the user data storage unit see .

In a case where the authentication process is a success the device authentication unit designates the target organization code and the target user name and transmits a request to obtain a list of print information to the print service application Step S . The request transmitted from the device authentication unit includes for example an authentication result the target organization code and the target user name.

The print information providing unit of the print service application obtains a list of print information including the target organization code and the target user name Step S . It is to be noted that the actual data content of the print data does not necessarily need to be obtained. Then the print information obtaining unit transmits a reply including data indicating the success of the authentication and the list of the obtained print information to the image forming apparatus Step S .

The print information obtaining unit of the image forming apparatus displays for example a list of job names included in the obtained print information on the operation panel Step S . In a case where at least one job name is selected from the list displayed on the operation panel the print information obtaining unit transmits a request to obtain print data corresponding to the selected job name to the print service application Step S . The print information providing unit of the print service application obtains print data associated with the job name designated in the request from the print information obtaining unit Step S . In obtaining the print data the print information providing unit refers to the print information storage unit and obtains the print data stored in correspondence with the designated job name. Then the print information providing unit transmits the obtained print data to the image forming apparatus Step S .

The print control unit of the image forming apparatus controls execution of a print job pertaining to the print data Step S . As a result a sheet of paper having the print data printed thereon is output from the image forming apparatus . The billing destination that is to pay for the cost incurred by performing the print job may be identified based on for example the target user name.

In a case where the user inputs a PIN code via the log in screen see displayed on the operation panel of the image forming apparatus and presses the OK button the authentication control unit transmits a log in request to the service providing system Step S . The log in request includes designations of an organization code a device ID and a PIN code.

Then the same processes as those performed in Steps S S of are performed Step S S . Then the PIN code management unit transmits a request to obtain print data to the print service application Step S . The request transmitted to the print service application includes designations of the organization code and PIN code successfully authenticated in Step S along with a user name stored in correspondence with the organization code and the PIN code in the PIN code management table target user name .

Then the print information providing unit of the print service application obtains print data associated with the organization code and PIN code designated in the request from the print information obtaining unit Step S . In obtaining the print data the print information providing unit refers to the print information storage unit and obtains the print data stored in correspondence with the designated organization code and PIN code. Then the print information providing unit transmits the obtained print data to the image forming apparatus Step S .

The print control unit of the image forming apparatus controls execution of a print job pertaining to the print data Step S . As a result a sheet of paper having the print data printed thereon is output from the image forming apparatus . The billing destination that is to pay for the cost incurred by performing the print job may be identified based on for example the target user name.

In the above described case of performing PIN code log in of a list of print information is not provided to the image forming apparatus . This is because the user that has logged in by using the PIN code is likely to be a guest user temporarily using the image forming apparatus . Thus the amount of print data stored in correspondence with the organization code and PIN code designated by the guest user is likely to be small. In other words the guest user is likely to desire all of the stored print data to be printed. It is however to be noted that the processes performed on and after Step S may also be performed even in the case of performing the PIN code log in. In other words the user may select print data to be printed target print data from print data stored in correspondence with the PIN code designated in the PIN code log in request.

In the above described embodiments one or more of the management server the authentication server and the storage server is an example of a data process system. Further the service providing system is another example of a data process system. The print data is an example of output data. That is the above described embodiments may also be applied to a case where data other than print data is output from a device other than the image forming apparatus . One or more of the mail reception unit and the mail obtaining unit is an example of the reception unit output data reception unit . One or more of the address confirmation unit and the user name identification unit is an example of the identification unit. The user name is an example of a user identification data. The PIN code is an example of the data identification data. That is the PIN code is generated with respect to each print request. Therefore the PIN code also serves as data that identifies a target print data. One or more of the print information generation unit and the print information generation unit is an example of the storage unit. One or more of the mail reply unit the mail reply unit the PIN code management unit is an example of the notification unit. One or more of the print information providing unit and the print information providing unit is an example of the transmission unit. One or more of the user data storage unit and the user information storage unit is an example of the first storage unit. One or more of the guest data storage unit and the guest data storage unit is an example of the data storage unit. One or more of the print request mail or the target print data included in the print request mail is an example of the mail data. The PIN code management table is an example of the data identification data storage unit. The PIN code management unit is an example of the first and second reception units.

With the above described embodiments of the present invention output authorization can be provided even for a user having no account for outputting data.

The present invention is not limited to the specifically disclosed embodiments and variations and modifications may be made without departing from the scope of the present invention.

The present application is based on and claims the benefit of priority Japanese Priority Application No. 2013 099972 filed on May 10 2013 with the Japanese Patent Office the entire contents of which are hereby incorporated by reference.

