---

title: Methods and apparatus for automating service lifecycle management
abstract: Methods and apparatus to provide, in a cloud infrastructure environment having a compute layer, a network layer, a storage layer, and management layer, wherein the management layer has no knowledge of at least some of existing infrastructure services, selecting hosts containing host bus adapters and/or network adapters having unique identifiers, using the unique identifiers to analyze the storage layer for: storage groups having host initiators that match the unique identifiers of the host bus adaptors, and/or network file storage (NFS) exports exposed to the unique identifiers as client IP addresses.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09621423&OS=09621423&RS=09621423
owner: EMC IP HOLDING COMPANY LLC
number: 09621423
owner_city: Hopkinton
owner_country: US
publication_date: 20141106
---
The present application is a continuation of U.S. patent application Ser. No. 13 536 705 filed on Jun. 28 2012 which is incorporated herein by reference.

As is known in the art cloud computing infrastructure systems contain a varied collection of servers hosts storage systems storage arrays networking devices software modules and other components. Sets of hosts networking devices and storage arrays assembled in close proximity make up a unit of cloud infrastructure sometimes referred to as a pod pod of devices. The pod components are physically connected via Ethernet networks.

The logical configuration of pod components and networks creates platforms that are sold or leased as services from a menu of predefined configuration offerings service offerings for consumers of cloud computing. Offerings from vendors define the type quantity and quality of resources such as three servers with two network cards 16 gigabytes of memory four processors and 20 gigabytes of boot disk space each and a high performance 200 gigabyte storage volume shared between the servers. The instantiation of such an offering is considered an infrastructure service . Defining services in this manner enables the consumer to use a selected portion of the host and storage resources within a given cloud infrastructure pod.

The instantiation of a service offering typically includes selected physical resources of the compute storage and compute layers into the logical concept of an infrastructure service as discussed above. A separate management layer can also exist in the cloud infrastructure environment that engages in mediation with the physical cloud resource layers to instantiate and manage service offerings into cloud infrastructure services based on the desired resource types quantities and quality of resource.

In one aspect of the invention a method comprises in a cloud infrastructure environment having a compute layer a network layer a storage layer and management layer wherein the management layer has no knowledge of at least some of existing infrastructure services selecting hosts containing host bus adapters and or network adapters having unique identifiers using the unique identifiers to analyze the storage layer for storage groups having host initiators that match the unique identifiers of the host bus adaptors and or network file storage NFS exports exposed to the unique identifiers as client IP addresses.

The method can further include one or more of the following features the unique identifiers comprise world wide port names WWPNs and or Internet protocol IP network adapters configured with IP addresses using storage ports in the storage groups with unique identifiers for the hosts to identify potential zones in a fabric of the storage area network SAN wherein the presence as zone members of one or more of the storage ports and one of the HBAs identified by one of the WWPNs in one of the zones indicates the zone can be in use as a SAN path in a cloud infrastructure service through mediation with the compute layer determining which storage volume and storage group should be used to boot the selected host presence in the storage layer of an NFS export with a host IP address in a client list indicates the NFS export should be used as file storage in the cloud infrastructure service the storage volumes are potentially visible to and in use by other hosts in the cloud infrastructure environment wherein the occurrence of at least one of the storage volumes being visible to and in use by more than one of the hosts in the cloud infrastructure environment indicates that the hosts form a cluster of hosts the hosts identified as potential clusters of hosts are validated for adherence to business rules in the management layer including each host in the potential cluster recognizing the exact same shared storage volumes SAN based and or NFS based and each host in the environment having identical network configuration including the same number of host bus adapters with matching names the same number of network adapters with matching names and the same VLANs configured on each relative network adapter across hosts one or more discovered cloud infrastructure services are adapted for and adopted into a data model of the management layer for continued service lifecycle management and wherein any adopted cloud infrastructure service acts as if it had originally been fully configured and provisioned by the management layer into which it has been model adapted the adopted service is analyzed for compatibility with an existing service offering in the cloud environment management layer and if compatible associated with the existing service offering and or a new service template is extrapolated from the structure and quality of service requirements of the adopted service and created as a new service offering in the cloud management layer.

In another aspect of the invention an article comprises a computer readable medium containing non transitory stored instructions that enable a machine to perform in a cloud infrastructure environment having a compute layer a network layer a storage layer and management layer wherein the management layer has no knowledge of at least some of existing infrastructure services selecting hosts containing host bus adapters and or network adapters having unique identifiers and using the unique identifiers to analyze the storage layer for storage groups having host initiators that match the unique identifiers of the host bus adaptors and or network file storage NFS exports exposed to the unique identifiers as client IP addresses.

The article can further include one or more of the following features the unique identifiers comprise world wide port names WWPNs and or Internet protocol IP network adapters configured with IP addresses instructions for using storage ports in the storage groups with unique identifiers for the hosts to identify potential zones in a fabric of the storage area network SAN wherein the presence as zone members of one or more of the storage ports and one of the HBAs identified by one of the WWPNs in one of the zones indicates the zone can be in use as a SAN path in a cloud infrastructure service instructions through mediation with the compute layer for determining which storage volume and storage group should be used to boot the selected host presence in the storage layer of an NFS export with a host IP address in a client list indicates the NFS export should be used as file storage in the cloud infrastructure service the storage volumes are potentially visible to and in use by other hosts in the cloud infrastructure environment wherein the occurrence of at least one of the storage volumes being visible to and in use by more than one of the hosts in the cloud infrastructure environment indicates that the hosts form a cluster of hosts the hosts identified as potential clusters of hosts are validated for adherence to business rules in the management layer including each host in the potential cluster recognizing the exact same shared storage volumes SAN based and or NFS based and each host in the environment having identical network configuration including the same number of host bus adapters with matching names the same number of network adapters with matching names and the same VLANs configured on each relative network adapter across hosts one or more discovered cloud infrastructure services are adapted for and adopted into a data model of the management layer for continued service lifecycle management and wherein any adopted cloud infrastructure service acts as if it had originally been fully configured and provisioned by the management layer into which it has been model adapted and or the adopted service is analyzed for compatibility with an existing service offering in the cloud environment management layer and if compatible associated with the existing service offering.

In a further aspect of the invention a system comprises a processor and a memory coupled to the processor containing stored instructions to enable the system in a cloud infrastructure environment having a compute layer a network layer a storage layer and management layer wherein the management layer has no knowledge of at least some of existing infrastructure services to select hosts containing host bus adapters and or network adapters having unique identifiers use the unique identifiers to analyze the storage layer for storage groups having host initiators that match the unique identifiers of the host bus adaptors and or network file storage NFS exports exposed to the unique identifiers as client IP addresses.

Prior to describing exemplary embodiments of the invention some introductory information is provided. Service discovery and adoption is the process of discovering validating and adapting existing cloud infrastructure into the management layer for the purpose of automating infrastructure service lifecycle management.

1 discovering existing compute network and storage layer components present in a cloud infrastructure pod 

2 analyzing the pod component configurations for relationships network paths between the compute and storage layers in the storage area network SAN and network file system NFS configuration 

3 sorting selected parts of the environment into logical infrastructure services clusters of hosts based on shared storage volumes 

4 validating potential clusters of hosts for the business requirements of the cloud infrastructure management layer 

6 extrapolating from the adopted service a new service offering or associating it with a known service offering in the management layer.

The starting point of the service discovery and adoption methodology is identifying the unique compute layer networking component identifiers. The unique identifiers appear in the environment in the form of host bus adapters HBA world wide port names WWPNs for hosts configured with SAN storage or in the form of IP addresses for hosts configured with network attached storage. A host can be configured with either or both storage types.

The storage layer is analyzed to find host initiators in the storage array s storage group mapping configuration with WWPN identifiers matching those found at the compute layer. The term host initiator is analogous to the term HBA in the storage layer. Any combination of a host initiator WWPN and storage port WWPN in a storage mapping configuration container such as a storage group is considered to be a potential SAN Zone.

The resulting set of potential zones is used in analyzing the network layer SAN fabric zoning configuration. If a zone found on a SAN fabric switch contains both the host initiator WWPN and the storage port WWPN of a potential zone a true zone has been identified as in use by a potential infrastructure service in the environment. A cloud infrastructure service will typically have at least two zones configured per HBA one in each SAN fabric for a total of four zones per host.

If SAN based host booting is employed rather than local disk boot on the host the process can engage in mediation with the compute layer to determine which storage volume in the SAN is used for booting the host. The storage array storage group containing this storage volume is considered the boot storage group. 

In a similar manner the starting point of the service adoption methodology for NFS configuration is identifying the unique NFS network IP address for each host in the cloud infrastructure pod. The NFS exports in the network attached storage devices are examined to find those with a matching IP address in their access client lists. Any NFS export with a matching IP address in its client lists is considered a candidate for adoption into an infrastructure service.

Storage volumes visible for a given host are collected from any volumes present in storage groups visible to the host via SAN zoning and or from NFS exports visible to the host via IP routing as discovered during the SAN and NFS storage path discovery steps above.

After the storage volumes visible to each host have been identified the hosts can be sorted into sets of hosts clusters based on shared storage volumes. Any storage volume that is visible via SAN zoning or IP routing to more than one host is considered a potential shared data volume. These shared storage volumes are the fundamental criteria for determining clusters of hosts.

In order for a set of hosts to be identified safely as a valid cluster for continued lifecycle management the hosts should satisfy cross host validation criteria in the storage and compute layers. This validation is determined by the management layer and could include but is not limited to the following 

Once a set of hosts passes cluster validation the resulting assemblage of compute layer hosts network layer configuration and storage layer resources is the logical representation of a cloud infrastructure service cluster as extracted from an existing cloud infrastructure environment.

At this point the discovered service can be adapted into an existing cloud management layer domain model. If the components of the discovered service satisfy the configuration and quality of service requirements of an existing service offering in the management layer the discovered service can associated with an existing service offering. Otherwise a service offering can be extrapolated from the discovered service by templatizing the computer storage and network components.

Once the discovered service has been adapted to the management layer model it should be fully available for continued lifecycle management as if it were originally provisioned by the management layer.

The compute layer comprises components such as blade servers chassis and network interconnects that provide the computing power for the platform. The storage layer comprises the storage components for the platform. The network layer comprises the components that provide switching and routing between the compute and storage layers within and between platforms and to the client or customer network.

It is understood that a variety of other configurations having different interconnections and storage configuration can be provided to meet the needs of a particular application.

The management layer can include a number of applications to perform various functions for overall control configuration etc. of the various platform components. For example management applications can include a virtualization function such as vSphere vCenter by VMware of Palto Alto Calif. A further management application can be provided as part of the Unified Computing System UCS by Cisco. It is understood that the blade chassis and fabric interconnection can be considered part of the UCS. Another management application can includes a management interface such as EMC Unisphere to provide a flexible integrated experience for managing existing storage systems such as CLARIION and CELERRA storage devices from EMC. A further management application includes a platform element manager such as unified infrastructure manager UIM by EMC for managing the configuration provisioning and compliance of the platform.

It is understood that various vendor specific terminology product name jargon etc. may be used herein. It is further understood that such vendor specific information is used to facilitate an understanding of embodiments of the invention and should not limit the invention in any way. Any specific vendor information should be construed mean a generic product function or module.

The unified infrastructure manager further includes a change and configuration management module a policy based compliance and analysis module a unified infrastructure provisioning module a consolidation topology and event service module and an operational awareness module . The various modules interact with platform elements such as devices in compute network and storage layers and other management applications. The unified infrastructure manager performs platform deployment by abstracting the overall provisioning aspect of the platform s and offering granular access to platform components for trouble shooting and fault management.

APIs provide a native computer programming language binding that can be executed from the native computer programming language. Java is a widely used language in computer programming and many vendors provide java language libraries and examples to execute commands against the management interface of their devices.

Referring again to one or more hosts are associated with a service to fulfill the compute requirements of the service. One or more network adaptors are associated with a service to indicate the need for Ethernet connectivity to a network. A network profile is associated with each adaptor that indicates the VLAN and IP address required to fulfill the storage connectivity using the Ethernet. This network profile is associated to a storage profile to indicate that the host is to obtain storage from a network with this VLAN and IP network.

The service offering is used to hold the relationships and detailed description for the user to choose the offering from a menu of offerings. The storage profile is associated with the offering to indicate the class of storage and service settings for the storage to be configured such as features like de duplication write once read many auto extension maximum auto extensions thin provisioning etc. A volume profile is associated with the storage profile to indicate specific volume properties and characteristics such as size and quota limitations.

Processing then splits into discovery of block storage in the SAN fabrics and file storage paths in the NFS environment . The SAN discovery includes identifying block storage volumes discovering the existing zoning SAN paths and determining the boot volume . After SAN and NFS storage has been discovered the visible storage volumes are collected for each host in step .

Based on the presence of storage volumes block and or file shared across hosts one or more clusters of hosts can be identified in the cloud environment in step . In step the cluster is validated to meet the management layer s requirements e.g. size storage type QoS etc. for a manageable service to be adapted into the management layer s model in step . In step it is determined whether or not the service can be associated with a service offering that already exists in the management layer. If not in step a service offering can be extrapolated from the structure of the discovered service and provided to a user. If so in step the cluster is associated with existing service offerings.

In the middle of the page is shown existing zoning in first and second fabrics . In the illustrated embodiment the first fabric has six zones . Standard practice for SAN zoning is to have two zones existing per HBA in each fabric for a total of four possible paths between host and storage array. On the right side of the page is shown the storage array configuration . The array has eight storage ports and a number of storage groups containing host bus adapters storage ports a boot storage volume and some shared storage volumes as shown.

Processing is not limited to use with the hardware and software described herein and may find applicability in any computing or processing environment and with any type of machine or set of machines that is capable of running a computer program. Processing may be implemented in hardware software or a combination of the two. Processing may be implemented in computer programs executed on programmable computers machines that each includes a processor a storage medium or other article of manufacture that is readable by the processor including volatile and non volatile memory and or storage elements at least one input device and one or more output devices. Programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the programs may be implemented in assembly or machine language. The language may be a compiled or an interpreted language and it may be deployed in any form including as a stand alone program or as a module component subroutine or other unit suitable for use in a computing environment. A computer program may be deployed to be executed on one computer or on multiple computers at one site or distributed across multiple sites and interconnected by a communication network. A computer program may be stored on a storage medium or device e.g. CD ROM hard disk or magnetic diskette that is readable by a general or special purpose programmable computer for configuring and operating the computer when the storage medium or device is read by the computer to perform processing.

One skilled in the art will appreciate further features and advantages of the invention based on the above described embodiments. Accordingly the invention is not to be limited by what has been particularly shown and described except as indicated by the appended claims. All publications and references cited herein are expressly incorporated herein by reference in their entirety.

