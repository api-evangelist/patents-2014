---

title: Managing network bandwidth
abstract: A system for using one or more via sites to manage network bandwidth, according to one embodiment of the present invention comprises a first call manager at a source site receiving an offer message to connect a call. The offer message includes an endpoint media settings list. The first call manager determines a first filtered media preferences list based on a source media settings list and the endpoint media settings list. The first call manager and transmits an invite message to a second call manager at a first via site. The invite message includes the first filtered media preferences list. The first call manager receives from the second call manager a call settings list that includes a description of the call settings negotiated between the source site, the first via site and a destination site.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09313146&OS=09313146&RS=09313146
owner: ShoreTel, Inc.
number: 09313146
owner_city: Sunnyvale
owner_country: US
publication_date: 20140122
---
This application is a continuation of U.S. patent application Ser. No. 12 860 784 filed Aug. 20 2010 the entire contents of which are hereby incorporated by reference in their entirety for all purposes.

The present invention relates to telephony systems such as those using Voice over Internet Protocol VoIP . In particular the present invention relates to users with administrative rights defining new codecs to be supported by a telephony system and to negotiating a codec to place a call in the telephony system.

The prior art includes a variety of distributed telephony systems. Traditional switched network systems have given way to new telephony systems that use VoIP. These VoIP systems offer the same functionality as more traditional switched system such as the ability to transfer calls put calls on hold automated attendant functions hunt groups etc. VoIP systems use a codec during a call to convert analog signals to a compressed digital bit stream. The codecs allow VoIP systems to transmit encoded audio video or data across Internet Protocol networks. Each codec has an associated bandwidth which is a factor in determining the bandwidth allocated for a call along with other factors such as the bandwidth required for the network protocol headers and the packetization rate. For example if at the initiation of a call it is determined that codec PCMU 8000 with an associated bandwidth of 64 kbps will be used for the call then accordingly sufficient bandwidth is allocated.

New VoIP systems offer users the ability to make and receive not only voice calls but also video and data conferencing calls e.g. whiteboarding and screensharing . Video and data conferencing calls each have their own codecs. In addition to codecs VoIP system use settings such as frame rate and resolution to determine how best to connect these calls. Codecs frame rate and resolution are referred to collectively as call settings. Existing VoIP systems work one of two ways either they are programmed to support specific call settings and only allow endpoints e.g. IP phones software phones to use those call settings or they blindly pass through the call settings offered by the endpoints but do not attempt to account for bandwidth or do not provide administrative control over how the call settings should be managed.

The present invention overcomes the deficiencies and shortcomings of the prior art by providing a system and method for using a via site to manage network bandwidth. The system of the present invention is particularly advantageous because it allows end users to instruct a communication system on how to negotiate one or more codecs for calls involving one or more media types e.g. voice video and or data collaboration . The system is also advantageous because it provides a structure for managing use of codecs in an IP telephony system. In one embodiment the system of the present invention comprises a first call manager at a source site receiving an offer message to connect a call. The offer message includes an endpoint media settings list. The first call manager determines a first filtered media preferences list based on a source media settings list and the endpoint media settings list. The first call manager and transmits an invite message to a second call manager at a first via site. The invite message includes the first filtered media preferences list. The first call manager receives from the second call manager a call settings list that includes a description of the call settings negotiated between the source site the first via site and a destination site.

A system and method for managing network bandwidth is described. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the invention. It will be apparent however to one skilled in the art that the invention can be practiced without these specific details. In other instances structures and devices are shown in block diagram form in order to avoid obscuring the invention. For example the present invention is described in one embodiment below with reference to system operation and particular hardware. However the present invention applies to any type of computing device that can receive a data and commands and any peripheral devices providing services.

Reference in the specification to one embodiment or an embodiment means that a particular feature structure or characteristic described in connection with the embodiment is included in at least one embodiment of the invention. The appearances of the phrase in one embodiment in various places in the specification are not necessarily all referring to the same embodiment.

Some portions of the detailed descriptions that follow are presented in terms of algorithms and symbolic representations of operations on data bits within a non transitory computer readable memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated. It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion it is appreciated that throughout the description discussions utilizing terms such as processing or computing or calculating or determining or displaying or the like refer to the action and processes of a computer system or similar electronic computing device that manipulates and transforms data represented as physical electronic quantities within the computer system s registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage transmission or display devices.

The present invention also relates to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes or it may comprise a general purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a non transitory computer readable storage medium such as but is not limited to any type of disk including floppy disks optical disks CD ROMs and magnetic optical disks read only memories ROMs random access memories RAMs EPROMs EEPROMs magnetic or optical cards or any type of media suitable for storing electronic instructions each coupled to a computer system bus.

Finally the algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general purpose systems may be used with programs in accordance with the teachings herein or it may prove convenient to construct more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition the present invention is not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the invention as described herein.

Enterprises often have several offices or call centers that are located in a plurality of disparate locations. To interconnect all of these sites enterprise telephony systems have been developed. Enterprise telephony systems which comprise a distributed set of voice switches servers and one or more networks offer enterprise applications enabled by the integration of computer systems with telephony services that include among other things 1 voice calls 2 videophone videoconference and videopresence calls referred to collectively as video calls and 3 data conferencing calls that include voice video and additional data such as screen sharing whiteboarding and presentation sharing. These different types of calls are referred to collectively as different media types. Thus a media type is any conventional form of telephony communication such as voice calls video calls and data conferencing calls. A person having ordinary skill in the art will recognize that other media types are possible such as fax and modem calls.

In one embodiment of the present invention the network is a partially public or a wholly public network such as the Internet. The network can also be a private network or include one or more distinct or logical private networks e.g. virtual private networks Wide Area Networks WAN and or Local Area Networks LAN . Additionally the communication links to and from the network can be wireline or wireless i.e. terrestrial or satellite based transceivers . In one embodiment of the present invention the network is an IP based wide or metropolitan area network.

The software that supports the computer integrated functionality of providing the above described telephony services is generally implemented as a client server environment in which the participants or clients distributed telephony users communicate with a server. Computer integrated features rely not only on a server s application platform but also on the availability of the network bandwidth that connects the switches servers and application services. In one embodiment each site s bandwidth is divided into different pools. A pool is an amount of bandwidth allocated from a site s bandwidth that is set aside for providing a particular media type for a site. For example a voice pool is an amount of bandwidth that is set aside for providing voice calls for a site. Similarly a video pool is an amount of bandwidth that is set aside for providing video calls and a media conferencing pool is an amount of bandwidth set aside for providing media conferencing calls.

In one embodiment a distributed telephony system comprises multiple sites and every site is assigned one or more WANs. The different sites are communicatively coupled to one another via different WANs. This interconnectivity is discussed further with reference to . The WANs provide bandwidth to the sites they are assigned to and this bandwidth is divided into one or more pools. The switch at each site is configurable so that different pools can be allocated different amounts of bandwidth. For example a site has 20 megabytes per second MB S of bandwidth available from one or more associated WANs and the voice pool is allocated 15 MB S the video pool 2 MB S and the data conferencing pool 2 MB S for a total of 19 MB S allocated to the different pools. In this example the remaining 1 MB S is not managed and is reserved for asynchronous data use at the site. Asynchronous data use is bandwidth use that is not predictable and includes for example instant messaging IM presence electronic mail e mail and file transfers.

In one embodiment some media types have a higher priority than other media types and the switch is configurable so a user can assign a priority order to the different pools see . For example an administrator determines that the voice pool is a higher priority than the video pool and the video pool a higher priority than the data conferencing pool. In this embodiment if all the bandwidth for a higher priority media type is in use and a new call for that media type is requested the switch borrows unused bandwidth from the pool of a lower priority media type so that the call for the higher priority media type can occur. For example assume the voice pool is a higher priority than the video pool and the video pool a higher priority than the data conferencing pool. Further assume that an offer for a voice call is received at a time when all the bandwidth for the voice pool is in use. If the video pool has unused bandwidth the switch borrows bandwidth from the video pool so that the incoming voice call can be answered. Similarly if the video pool does not have unused bandwidth or if the bandwidth available in the video pool is by itself inadequate to answer the incoming voice call the switch borrows bandwidth from the video pool and or the data conferencing pool so that the incoming call can be answered. This process is referred to herein as cascading pools or the cascading pools feature since a higher priority pool can only borrow bandwidth from a lower priority pool.

The first site A includes a server a switch A three endpoints analog phone IP phone A and software phone and a storage device . The switch A represents a Voice over Internet Protocol VoIP device to which a number of endpoints can be coupled such as analog phones IP phones A and software phones softphones . In the illustrated embodiment the switch A is coupled to the network . The switch A is also coupled to the server via signal line and to the public switched telephone network PSTN trunk via an analog or digital trunk line e.g. a T1 or E1 interface or a session initiation protocol SIP trunk service provider. In the illustrated configuration the switch A provides an interface for calls originating from or terminating on the PSTN or SIP trunk . The PSTN is coupled to a plain old telephone phone service phone POTS phone and a mobile voice network coupled to any number of mobile phones represented by mobile phone . Thus POTS phone calls and mobile phone calls can originate on the switch A via the PSTN .

Although only a single switch A is shown in those skilled in the art will recognize that a particular site such as the first site A may include a plurality of switches. The switch will be described in more detail below with reference to .

An endpoint enables a user to carry on a phone call. Although in the illustrated embodiment the first site A has three endpoints one analog phone one IP phone A and one softphone in other embodiments the first site A has different numbers and types of endpoints. Examples of endpoints include a video conferencing device a Multipoint Control Unit MCU a conference bridge an Analog Terminal Adapter ATA and any other device that originates and or terminates a media stream. An endpoint is coupled to the switch the server or both. Each of the endpoints can also include a display device not shown that is used in conjunction with the phone of the endpoint.

In one embodiment an endpoint is a conference bridge adapted to have the functionality of a switch . For example the conference bridge includes hardware that provides the conference bridge with the functionality of a switch . Such hardware includes for example one or more electronic circuit boards one or more processors and or a non transitory storage device e.g. RAM hard drive etc. storing data and or software e.g. a call manager and these components are configured to work together with the other components of the conference bridge so that the conference bridge has the functionality of a switch . In another embodiment the conference bridge has among other things a processor and a non transitory storage device that stores a call manager that when executed by the processor causes the conference bridge to have the functionality of a switch . For example turning to in one embodiment Endpoint B is a conference bridge and the bandwidth manager B and the settings manager B are components of a call manager stored on a storage device that is comprised within the conference bridge.

In one embodiment an endpoint has a user interface to send data to and receive data from a user. The analog phone has for example a Telephone User Interface TUI that sends data through a speaker and receives data through a microphone and a keypad. The IP phone A has for example both a TUI and a Graphical User Interface GUI that sends data through a display device associated with the IP phone A. In one embodiment the IP phone s graphical user interface also receives data from a touch screen display device associated with the IP phone A. The softphone has for example a software application that runs on a computer and sends data through a display device and a speaker and receives data through a microphone a keyboard and a pointing device.

The server is configured to implement features or functions of the telephony system in accordance with the present invention. The server is coupled to the network and although not shown can also be coupled to one or more endpoints such as IP phone A and softphone . The server implements a server architecture according to one embodiment of the present invention. Server includes a processor. The processor can be a conventional processing device such as a general purpose microprocessor. Server also includes a non transitory computer readable memory. The memory includes program instructions or functional units that in one embodiment implement features of the present invention. Specifically the memory includes a Telephony Management Software TMS unit a Telephony Application Programming Interface TAPI unit and a directory unit. In one embodiment the memory also includes one or more application units that interact with the TMS unit and the TAPI unit to enable a specific computer integrated function. An application unit uses the TAPI unit to exchange data with the TMS unit. The TMS unit is able to communicate with and manage one or more switches . For example with reference to the TMS unit included in the server can manage the switches A B. Through the TAPI unit the TMS unit presents an application with Computer Telephony Integration CTI view of these switches A B. This allows the application to manage the switches A B. Such switches A B operate without an associated TMS unit if CTI features are not being used. The server has a user interface to send data to and receive data from a user. The user interface interacts with TMS in order to allow a user with administrative rights to manage the switches and change the configuration settings of the switches. The user can access the user interface at the server or at an endpoint e.g. soft phone .

In one embodiment the server includes an application unit and or a directory unit. The application unit assists the switch in providing one or more phones communicatively coupled to the switch with access to conventional PBX applications e.g. among others instant messaging collaboration tools sidebar conversations between two or more users during ongoing PBX calls chat sessions between two or more users and or APIs for integrating third party applications with the standard PBX functions provided by the switch . For example the application unit is data and routines stored on a non transitory computer readable medium comprised within the server . In one embodiment the server does not include the application unit and the switch can provides PBX functionality without assistance from the switch.

In general the directory unit enables a phone to access a directory and use the directory in conjunction with other phone functions. In one embodiment the directory unit is implemented as a service that interacts with TMS unit. Communication or data exchange is between the TMS unit and the directory unit. The directory unit can be distributed among computing devices as is known to one of skill in the art. For example the functionality enabled by directory unit can be implemented in a client server fashion by having the client user s local system such as a general purpose computer or endpoint perform some functions and having the server directory unit perform others. As another example some or all of the functionality enabled by the directory unit can be implemented by having a switch perform some or all functions.

The storage device contains directory information including directory entries and associations between directories and phones. In one embodiment the storage device also includes information regarding which users have administrative rights to access the server s user interface and make changes to the configuration settings of the switches. For example the storage device will include the user name and password of users with administrative rights. In one embodiment the storage includes data that is accessed by the switches in order to operate. In the illustrated embodiment the storage device is directly coupled to the server . In an alternate embodiment the storage device is coupled to the server via the network .

One skilled in the art will appreciate that additional networking devices not shown can be added to the first site A for example if needed to support additional endpoints servers switches or other systems. For example the first site A can include a second switch B and an edge router to couple the first site A to the network and to provide local area connectivity for the first and second switches A B. One skilled in the art will also recognize that numerous configurations of switches and communication links are contemplated. For example PSTN links can be coupled to multiple switches at several points within the topology and soft switches can also be used.

The second site B similarly includes an endpoint IP phone B and a switch B. The configuration of the second site B demonstrates that a server is not required for each site. Switch B of the second site B can be managed by server that is illustrated in the first site A. A call can involve more than one switch . For example a call that originates from the PSTN or SIP trunk and terminates on an endpoint that is communicatively coupled to switch B of the second site B involves two switches switch A of the first site A and switch B of the second site B. In addition each switch A B can be managed by a different server . In one embodiment one or more of the sites A B have one or more servers .

In one embodiment of the present invention the network is a partially public or a wholly public network such as the Internet. The network can also be a private network or include one or more distinct or logical private networks e.g. virtual private networks or wide area networks . Additionally the communication links to and from the network can be wire line or wireless i.e. terrestrial or satellite based transceivers . In one embodiment of the present invention the network is an IP based wide or metropolitan area network.

Turning now to depicted is a block diagram of a distributed telephony network system according to one embodiment of the present invention. In the illustrated embodiment the switch A is comprised within the server . Similarly depicts a block diagram of extruded telephony network system according to one embodiment present invention in which the switch A and the storage device are comprised in the server .

Referring now to an embodiment of the switch according to one embodiment of the present invention is shown. In this embodiment switch is configured to implement features or functions of the present invention. Switch includes one or more processors not shown . The processor can be a conventional processing device such as a general purpose microprocessor. Switch also includes a non transitory computer readable memory. The memory stores software and routines not shown conventionally used to operate a switch in a VoIP telephony system. For example the switch includes software routines for performing call monitoring transferring calls placing calls on hold establishing hunt groups automated attendant functions etc. The memory also stores program instructions or functional units that implement the features of the present invention. The switch also includes a configuration storage module and a call manager .

The configuration storage module is for storing preferences settings and other information utilized by the call manager to perform its functions. In one embodiment the configuration storage module is a portion of the memory of the switch . To enable the feature of determining call settings for a call the configuration storage module includes a supported codecs storage codec lists and administrator settings storage . The configuration storage module also includes a reservation storage module to enable the feature of reserving bandwidth for a call occurring at a future time.

In one embodiment the supported codecs storage is a storage unit that stores a description of the properties of each codec supported by switch . Supported codecs include different codecs that support different call types i.e. media types . For example the supported codecs include one or more conventional 1 audio codecs that support voice calls 2 video codecs that support videophone videoconference and videopresence calls referred to herein collectively as video calls and 3 data conferencing codecs that support one or more of screen sharing whiteboarding application sharing and presentation sharing. In another embodiment the supported codecs storage is a storage that includes a description of the properties of each codec supported by the telephony system . In one embodiment the description included in the supported codecs storage for each supported codec includes an identification string and the bandwidth to reserve for that codec. In one embodiment the identification string is comprised of the name and the sampling rate of the codec. A codec s bandwidth is used by the settings manager and the bandwidth manager to allocate bandwidth as calls are initiated.

In one embodiment the supported codecs storage includes one or more conventional fax codecs and or modem codecs.

In one embodiment telephony system is initially installed with descriptions of specific codecs stored in the supported codecs storage of the configuration storage module . Codecs for which a description is initially stored in the supported codecs storage are referred to as default codecs. The descriptions of codecs stored in the supported codecs storage can be modified or deleted by a user with administrative rights using the server s user interface at the server or at an endpoint e.g. softphone . In one embodiment descriptions of default codecs initially stored in the supported codecs storage cannot be modified or deleted. Additionally a user using the server s user interface can store a description of a new codec or modify and existing codec in the supported codecs storage .

The codec lists include an identification of one or more codecs supported by the switch . Supported codecs include one or more conventional audio codecs video codecs and or data conferencing codecs. A site is not required to support codecs for all available media types. In one embodiment an identification of a codec is the name of the codec or the identification string of the codec. In one embodiment the codec lists identifications for codecs that support inter site and intra site fax modem calls.

In one embodiment the configuration storage module stores different codec lists for different media types. For example the configuration storage module stores a first codec list for audio codecs a second codec list for video codecs and a third codec list for data conferencing codecs. A codec list is referenced by switch to negotiate call settings for a call.

In one embodiment instead of storing separate codec lists for each media type the configuration storage module stores a single codec lists for all the different media types. For example the configuration storage module stores a single codec list that contains information for two or more of the following audio codecs video codecs data conferencing codecs fax codecs and modem codecs.

The codecs that are part of each codec list are ranked in a priority order that is determined by user administrator preferences stored in the administrator settings storage . The different media types are also ranked in a priority order based on preferences stored in the administrator settings storage . The difference between a codec priority order and a media priority order is that the codec priority order ranks the codecs in a codec list against other codecs in the same codec list whereas the media priority order ranks the different bandwidth pools e.g. voice pool video pool and or data conferencing pool to determine the sequence for borrowing bandwidth for the purpose of cascading pools.

A codec list can be modified or deleted via an endpoint or server . Modifying a codec list includes one or more of adding or removing an identification of one or more codecs and changing the ranking of priority order for codecs in the codec list . In addition new codec lists can be created by a user with administrative rights at an endpoint or server . In one embodiment telephony system is initially installed with specific codec lists . In one embodiment codec lists initially installed with the telephony system cannot be deleted or modified.

The administrator settings storage includes general settings information for the site that are used to manage bandwidth for the site . Specifically the administrator settings storage includes a media preferences list for site . The media preferences list includes a list of the media priority order and one or more of the voice preferences list video preferences list and a data conferencing preferences list.

The media priority order ranks the different bandwidth pools e.g. voice pool video pool and or data conferencing pool to determine the sequence for borrowing bandwidth for the purpose of cascading pools.

The media preferences lists describe user administrator preferences for the different media types that are used by the settings manager and the bandwidth manager described below to determine how to negotiate call settings for a call. There is a media preferences list for each media type. The voice preferences list includes the preferred bandwidth settings for voice calls. The video preferences list includes the preferred bandwidth settings resolution settings and frame rate settings for video calls. The data conferencing preferences list includes the preferred bandwidth settings resolution settings frame rate settings and screen sharing formats.

The bandwidth settings indicate which codec list should be used for each type of call. In one embodiment there are three different types of calls intra site calls inter site calls and fax modem calls. Intra site calls are calls within site inter site calls are calls between two different sites and fax modem calls are calls that involve data transfer. Additionally bandwidth settings include the amount of bandwidth allocated for site . If a site is coupled to more than one WAN the administrator settings storage includes information as to which WANs the site is connected to and bandwidth settings for each WAN. For example if a first site is coupled to multiple WANs the administrator settings storage may include information that the first site is coupled to a second site by a first WAN and that the first site is coupled to a third site by a second WAN.

In one embodiment the bandwidth settings also include mapping data for one via site. According to this embodiment each site in a system is assigned one via site. A via site is the next site that call communications would have to flow through to get from a source site to a destination site . A source site is a site that originates a call offer and a destination site is the site having the endpoint for which the source site s call offer is addressed. Each of the above described features is discussed in further detail with reference to .

The resolution settings include information about the maximum minimum or a predetermined range of resolution values required by the site to connect a video or data conferencing call. In one embodiment the sites involved in connecting a video or data conferencing call i.e. the source site destination site and optional via sites are required to have a codec supporting a video resolution value less than the stored maximum resolution setting or more than the stored minimum resolution setting. If the media preferences list includes a range of acceptable resolution values all the sites involved in connecting the call are required to support a video resolution value equal to or less than the maximum resolution of the stored video resolution range and equal to or more than the minimum resolution of the stored video resolution range. In one embodiment the resolution settings includes information about what the switch should do if the resolution requirements for the source site cannot be met by one or more of the other sites involved in the call. For example if the destination site and or one of the via sites does not support the requirements of the source site s resolution settings the resolution settings includes an indication that the switch should connect the call using audio data only i.e. the call is connected as a voice call . The resolution settings can also include an indication that the call should not be connected and an error message is sent to the endpoint that originated the call offer.

In one embodiment the sites involved in connecting a video or data conferencing call i.e. the source site destination site and optional via sites are required to have 1 one or more codecs in common in their codec lists and 2 enough bandwidth available in the media pool s required by the call request to accommodate the combination of codec resolution and or frame rate required by the negotiated codec s .

The frame rate settings include information about the maximum minimum or a predetermined range of frame rate values required by the site to connect a video or data conferencing call. The screen sharing format settings include information about the different screen sharing formats required by the site to connect a data conferencing call. These features work similar to the resolution requirement discussed above and so that description will not be repeated here.

In one embodiment the resolutions settings frame rate and screen sharing formats are each assigned a priority order ranking to indicate which of these settings is more important to the administrator user and the call settings are determined based in part on this priority order. This is described in further detail with reference to .

In one embodiment the cascading pools feature is optional and is only implemented if a user provides an input to the switch to enable the cascading pools feature. This input is stored by the switch in the administrator settings storage . Additional settings information stored on the administrator settings storage includes for example the name of the site the location of the site or the bandwidth available for the site. The settings information stored in the administrator settings storage can be modified by a user with administrative rights using the server s user interface or an interface viewable on a display associated with an endpoint such as a phone e.g phones or .

The reservation storage includes information for reserving bandwidth for calls that are scheduled to occur in the future. The reservation information stored in reservation storage is added or modified using the server s user interface or an interface viewable on a display associated with an endpoint such as a phone e.g phones or . For example a user of phone desires to schedule a conference call at a future date and accesses an interface viewable on a display associated with phone A. The user inputs information to schedule the call that is stored in the reservation storage . The call manager accesses this information and reserves bandwidth for the conference call. The call manager also communicates this information to other sites involved in the call so that they reserve bandwidth for the call as well. This feature is described in further detail with references to .

The configuration storage module is coupled by a signal line to the server . The server uses the signal line to download information to the configuration storage module . The information downloaded by the server includes the information noted above to allow the call manager to perform its conventional functions. In accordance with the present invention the server also uses signal line to maintain and keep the supported codecs storage the codec lists the administrator settings storage and the reservation storage current. In other words anytime the server receives instructions from a user to add remove or modify descriptions of supported codecs codec lists administrator settings or reservation information via the user interface or an interface associated with a phone e.g phones or the server updates the information stored in the configuration storage module . In one embodiment anytime another call manager server or site adds removes or modifies descriptions of supported codecs codec lists administrator settings or reservation information the information is propagated to the server and the server in turn updates the information stored in the configuration storage module . The configuration storage module is also coupled by signal line to the call manager . The configuration storage module uses this coupling to provide stored information to the call manager .

A device such as the processor of the switch A runs the call manager software application and is coupled to and controls one or more endpoints A and with which it is associated. While shown as operational and as part of the switch in FIG. those skilled in the art will recognize that in other embodiments the call manager may be operational as a separate module in the first site A or as part of server of .

Although in the illustrated embodiment the first site A has only one call manager in switch A in other embodiments the first site A has a different number of call managers . Also more than one call manager can control the same endpoint. The association between a call manager and an endpoint that it controls is accessed through the server . Furthermore although not shown the second switch B includes its own call manager .

As shown in the call manager is coupled to the PSTN or SIP trunk and the network . The call manager comprises an extension module a trunk module a location service engine a settings manager a bandwidth manager and a media stream manager . In one embodiment the trunk is a SIP trunk and provides connectivity to SIP compatible devices. One having ordinary skill in the art will recognize that network also provides connectivity for SIP compatible devices.

The extension module communicates with endpoints coupled to the call manager in order to allow a user to perform call related functions on an endpoint. In addition the extension module is used to communicate with other call managers in the telephony system .

The trunk module is coupled to and controls the interaction between the endpoints A and and the PSTN or SIP trunk . In particular the call manager switch is often coupled to a trunk line. The trunk module of the call manager manages the usage of the trunk line by multiple endpoints A and optimizes the usage of the trunk line. The trunk module also manages trunk services such as caller identification direct inward dial etc.

The location service engine resolves the dialed numbers converts raw dialed digits into routable contacts and routes the call to the destination endpoint such a phone trunk hunt group auto attendant pickup group etc. In one embodiment the location service engine routes calls using the mapping information stored in the administrator settings storage .

The settings manager is coupled to the network and at the initiation of a call between two endpoints negotiates with the endpoints or with another call manager which call settings to use for the call i.e. depending on the call type which codecs frame rate resolution screen sharing format . The settings manager communicates with the bandwidth manager to negotiate call settings for calls based on the media type of the call information stored in codec lists and the administrator settings storage . The functionality of the settings manager is further described below with reference to .

The bandwidth manager is coupled to the network and allocates bandwidth necessary to support calls handled by the call manager . In one embodiment if cascading pools is enabled the bandwidth manger borrows bandwidth from lower priority pools in cases where there is not enough bandwidth available in a pool to connect a call. For example if voice media is a higher priority than video media and if there is not enough bandwidth in the voice pool to connect a voice call the bandwidth manager borrows bandwidth from the video pool to connect the voice call. In one embodiment the bandwidth manager tracks calls for which it has borrowed bandwidth receives an indication when those calls are terminated and then re allocates borrowed bandwidth to the lower priority pools after receiving an indication that the call is terminated. The functionality of the bandwidth manager is further described below with reference to .

The media manager creates and manages media streams. The media manager also handles call control and converting audio waveforms to and from Real time Transport Protocol RTP packets using the call settings negotiated for the call. The media manager is coupled for communication with the network and the endpoints A and . The media manager also performs encoding decoding in case of analog endpoints and physical trunks using the sampling rate of the codec negotiated for the call.

In one embodiment one or more of the above described components of the call manager i.e. the extension module trunk module location service engine settings manager bandwidth manager and media stream manager are a specialized hardware apparatus configured to perform the function of the particular components. For example one or more of the extension module trunk module location service engine settings manager bandwidth manager and media stream manager is a combination of one or more electronic circuits configured to provide the above described functionality for that component. In one embodiment the one or more electronic circuits that comprises the component includes one or more of 1 a processor 2 a non transitory computer readable memory e.g. RAM a hard drive a buffer a circular buffer etc. communicatively coupled to the processor and 3 processor executable firmware stored on the non transitory memory.

Referring now to depicted is diagram illustrating a method for managing bandwidth for a call between a source endpoint and a destination endpoint according to one embodiment of the present invention. The endpoint A is a communication device such as analog phone software phone or IP phone . Endpoint A transmits an offer message to a switch A at the source site A. The switch A receives the offer message and determines mapping information to transmit the offer to the destination site . The switch A transmits the transformed offer message to the switch B at the destination site B. The switch B at the destination site B receives the transformed offer message determines mapping information and transmits an answer message to switch A at the source site A. The switch A receives the answer message and transmits an answer signal to the endpoint A.

In one embodiment the switch acts as a gateway for devices such as the analog phone . For example in response to receiving signals from the analog phone or other devices which do not process codecs the switch generates offer messages for the phone . The switch also receives responses from other devices e.g. phones for the analog phone and handles these responses on behalf of the phone .

In one embodiment the switch acts as a gateway for devices such as POTS phone and mobile phone . For example in response to receiving signals from the phone the switch generates offers messages for the phone . The switch also receives responses from other devices e.g. phones for the phone and handles these responses on behalf of the phone .

Turning now to depicted is diagram illustrating a method for managing bandwidth for a call between a source endpoint and a destination endpoint according to one embodiment of the present invention. Portions of the description for are applicable to . features bandwidth allocation using pool bandwidth.

The endpoint A transmits an offer message to the settings manager A. The settings manager A receives the offer message . The offer message includes an endpoint A media settings list. The endpoint A media settings list includes an indication of the media type s being requested for the call the codecs supported by the endpoint audio video and or data conferencing the supported frame rates and the supported screen sharing formats and or resolutions. The settings manager A retrieves the codec list s and the media preferences list s applicable to the call type s and determines a source media settings list. The settings manager A determines the source media settings list based on the media type s of the requested call the prioritization of the source site s A applicable codec list s and the media preferences indicated in the source site s A media preference list s . The source media settings list includes a prioritized list of the codecs supported by the source site A that are relevant to the media type of the requested call. The source media settings list also includes depending on the requested media type the priority order of the requested media type and one or more of the voice preferences list video preferences list and a data conferencing preferences list. In one embodiment the source media settings lists are predetermined and stored in the administrator settings storage .

The settings manager A communicates signal with the bandwidth manager A to filter the source media settings list against the endpoint A media settings list. The result of this filtering resolves a first filtered media preferences list that includes an indication of the media type s being requested for the call a prioritized list of the codecs supported by both the site A and the endpoint A that are relevant to requested media type s a prioritized list of the frame rate settings supported by both the site A and the endpoint A a prioritized list of the screen sharing format supported by both the site A and the endpoint A and or a prioritized list of the resolution settings supported by both the site A and the endpoint A. The frame rates screen sharing formats and resolution settings are prioritized based on how closely they match the preferences indicated in the media preferences list s . In one embodiment the first filtered media preferences list also includes an indication of whether cascading pools is enabled for the source site A. In one embodiment for the purpose of clarity the first filtered media preferences list is referred to as a first call settings list. 

The settings manager A communicates with the bandwidth manager A to allocate bandwidth in the applicable media pools based on the first filtered media preferences list. Allocating bandwidth includes reserving bandwidth for the worst case scenario from each of the applicable media pools. In other words allocating bandwidth reserves bandwidth sufficient to satisfy the most bandwidth expensive codec s frame rate screen sharing format and resolution from the first filtered media preferences list. In one embodiment if 1 the required bandwidth for a given pool exceeds the bandwidth available for that pool and 2 the filtered media preferences list includes an indication that cascading pools are enabled the bandwidth manager borrows bandwidth from the pool of the media type having the next lowest media priority ranking in order to reserve enough bandwidth for the worst case scenario. In one embodiment instead of borrowing bandwidth from the pool of the media type having the next lowest media priority ranking bandwidth is borrowed from a pool having a lower media priority ranking in order to reserve enough bandwidth for the worst case scenario. Allocating bandwidth is described in further detail with reference to .

The settings manager A transmits an invite message to the settings manager B of the destination site B. The invite message includes the first filtered media preferences list. An invite message is a message used to establish communication of one or more media types between different communication agents e.g. one or more of an endpoint a call manager etc. . In one embodiment a single call manger manages bandwidth for two or more sites and an invite message is a signal internal to the components of the call manager used to build a call between two or more endpoints or between an endpoint and a conference bridge. It will be understood to persons having ordinary skill in the art that the term invite message is not intended to limit the scope of the disclosure to devices that use session initiation protocol SIP . Instead the communication agents can use SIP H.323 Media Gateway Control Protocol Simple Gateway Control Protocol and or protocols that are predecessors successors derivative and or similar to any of these protocols. For example in one embodiment the apparatuses and methods described herein use a proprietary protocol based on SIP i.e. a protocol that is a derivative of SIP . In another embodiment different communication agents use different protocols and the call manager includes conventional technology for translating communications between the different protocols.

The settings manager B receives and analyzes the invite message to determine the requested media type s for the call. The settings manager B determines the destination media preferences list similar to how the settings manager A determines the source media preferences list. In one embodiment the destination media preferences list is predetermined and stored in the administrator settings storage at the destination site B. The destination media preferences list includes information similar to the source media preferences list. The settings manager B communicates with the bandwidth manager B to filter the destination media preferences list against the first filtered media preferences list similar to the filtering occurring for communication . This filtering resolves a second filtered media preferences list. The second filtered media list includes an indication of the media type s being requested for the call a prioritized list of the codecs supported by site B site A and endpoint A that are relevant to requested media type s a prioritized list of the frame rate settings supported by site A site B and endpoint A a prioritized list of the screen sharing format supported by site A site B and endpoint A and or a prioritized list of the resolution settings supported by site A site B and endpoint A.

The settings manager B communicates with the bandwidth manager B to allocate bandwidth in the applicable media pool s . The allocation of bandwidth that occurs with communication is similar to the allocation that occurs with communication . The settings manager B communicates an offer message to the endpoint B. The offer message includes the second filtered media preferences list. The endpoint B receives the offer message and transmits an answer message to the settings manager B. The answer message includes an endpoint B media preferences list. The endpoint B media preferences list includes information similar to the endpoint A media preferences list. The settings manager B receives the endpoint B media preferences list and determines a call settings list that includes the actual media settings that will be used to connect the call. Specifically the call settings list includes a description of 1 the highest priority codec s supported by site A site B endpoint A and endpoint B that are relevant to requested media type s 2 the highest priority frame rate supported by site A site B endpoint A and endpoint B 3 the highest priority screen sharing format supported by site A site B endpoint A and endpoint B and or 4 the highest priority resolution setting supported by site A site B endpoint A and endpoint B. Accordingly in one embodiment the call settings list includes a description of the call settings negotiated among more than one site for connecting the call. In one embodiment the call settings list includes a description of the call settings negotiated among the source site destination site and any intervening via sites.

The settings manager B communicates with the bandwidth manager B to update the bandwidth pools based on the call settings list. Updating the bandwidth pools comprises adjusting the bandwidth reserved from the pool s so that they are sufficient to satisfy the requirements of the call settings list. In one embodiment updating the bandwidth pools includes releasing bandwidth back to the media pools since the call settings list may require less bandwidth than the worst case scenario accounted for in communication .

The settings manager B transmits an answer message to the settings manager A of the destination site A. The answer message includes the call settings list. The settings manager A receives the answer message . The settings manager A communicates with the bandwidth manager A to update the bandwidth pools similar to the updating done for communication . The settings manager A communicates an answer message to the endpoint A. The call is connected when endpoint A receives the answer message. In one embodiment the bandwidth manager A tracks the call connection and adjusts bandwidth allocated from the pools based on fluctuations in bandwidth requirements necessary to keep the call connected. Tracking the call connection also enables the bandwidth manager A to reallocate bandwidth to the bandwidth pools after the call is terminated.

After some duration of time the endpoint A communicates a termination message to the settings manager A. The settings manager A communicates an indication of the termination message to the bandwidth manager A and the bandwidth manager A reallocates bandwidth in the pools. In one embodiment reallocating bandwidth in the pools includes 1 releasing bandwidth used to connect the call and 2 redistributing this bandwidth to the lower priority pools. Reallocating bandwidth in the pools is described in further detail with reference to . The settings manager A transmits a termination message to the settings manager B. The settings manager B receives termination message . The settings manager B communicates with the bandwidth manager B to reallocate bandwidth in the pools as described for communication . The settings manager B transmits a termination signal to the endpoint B. The call ends when the endpoint B receives the termination message. A person having ordinary skill in the art will recognize that the termination signal can originate from endpoint B instead of endpoint A. In this scenario termination signals and go from the destination site B to the source site A and communication occurs before communication .

Turning now to depicted is a diagram illustrating a method for managing bandwidth for a call according to one embodiment of the present invention. includes features similar to and so descriptions for these features will not be repeated here. Like features have like reference numbers. The difference between and is that depicts a method for an embodiment having two via sites a first via site C and a second via site D and no bandwidth pools.

At communication the settings manager A filters the source media settings list against the endpoint A media settings list communicates with the bandwidth manager A to determine bandwidth requirements for the worst case scenario as described for and reserves bandwidth at the source site A accordingly. The settings manager A determines mapping information for the first via site C. The process for determining the mapping information is described in further detail with reference to step and B step . The settings manager A transmits an invite message to the settings manager C of the first via site C. The invite message includes the first filtered media preferences list described for .

The settings manager C receives and analyzes the invite message to determine the requested media type s for the call determine a first via preferences list and filter the list similar to the filtering for the destination site B described for . The first via preferences list includes information similar to the destination media preferences list. The list resolved as a result of the filtering done at communication is referred to as the third filtered media preferences list. The settings manager C determines mapping information for the second via site D. The settings manager C transmits an invite signal to the settings manager D of the second via site D. The settings manager D repeats the steps performed by the first via site C. In performing these steps the settings manager D determines a second via preferences list. The second via preferences list includes information similar to the first via preferences list. The list resolved as a result of the filtering done at communication is referred to as the fourth filtered media preferences list. The settings manager D transmits an invite message to the settings manager B of the destination site B.

The settings manager B for the destination site B transmits messages and performs steps similar to those described for e.g. signals and .

In this embodiment the second filtered media preferences list includes an indication of the media type s being requested for the call a prioritized list of the codecs supported by site A site B site C site D and endpoint A that are relevant to requested media type s a prioritized list of the frame rate settings supported by site A site B site C site D and endpoint A a prioritized list of the screen sharing format supported by site A site B site C site D and endpoint A and or a prioritized list of the resolution settings supported by site A site B site C site D and endpoint A.

Also in this embodiment the call settings list includes 1 the highest priority codec s supported by site A site B site C site D endpoint A and endpoint B that are relevant to requested media type s 2 the highest priority frame rate supported by site A site B site C site D endpoint A and endpoint B 3 the highest priority screen sharing format supported by site A site B site C site D endpoint A and endpoint B and or 4 the highest priority resolution setting supported by site A site B site C site D endpoint A and endpoint B.

The destination site sends an answer message to the settings manager D for the second via site D. The settings manager D receives the answer message and transmits an answer message to the settings manager C for the first via site C. The settings manager C receives the answer message and transmits an answer message to the settings manager A for the source site A. The settings manager A receives the answer message and transmits an answer message to the endpoint A. The call is connected when the endpoint A receives the answer message .

The above described process is referred to herein as propagating the answer message from the endpoint B to the endpoint A. In one embodiment propagating an answer message means to transmit an answer message from an endpoint that originated the answer message to the endpoint that is the intended recipient of the answer message. For example turning to communication is an example of one embodiment of propagating an answer message. In another embodiment propagating an answer message includes transmission of the answer message from the originating endpoint to one or more via sites prior to the receipt of the answer message by the endpoint that is the intended recipient of the answer message. For example turning to and communications are examples of propagating an answer message. In one embodiment propagating an answer message also includes for example in communications and since these steps are included in one embodiment in building a call between endpoints. In one embodiment a conference bridge with a call manager component originates the answer message. In another embodiment the conference bridge with a call manager component is the intended recipient of the answer message.

After a period of time the endpoint A transmits a termination message to the settings manager A. The settings manager A transmits a termination message to the settings manager C of the first via site C. The settings manager C receives the termination message and transmits a termination message to the settings manager D. of the second via site D. The settings manager D receives the termination message and transmits a termination message to the settings manager B of the destination site B. The settings manager B receives the termination message and transmits a termination message to the endpoint B. The call is terminated when endpoint B receives the termination message . The above described process is referred to herein as propagating the termination message from endpoint A to endpoint B. As with a person having ordinary skill in the art will recognize that the initial termination message can originate at endpoint B and propagate from endpoint B to endpoint A.

In one embodiment propagating a termination message means to transmit a termination message from an endpoint that originated the termination message to the endpoint that is the intended recipient of the termination message. For example turning to communication is an example of one embodiment of propagating a termination message. In another embodiment propagating a termination message includes transmission of the termination message from the originating endpoint to one or more via sites prior to the receipt of the termination message by the endpoint that is the intended recipient of the termination message. For example turning to and communications are examples of propagating a termination message. In one embodiment propagating a termination message also includes for example in communications and since these steps are included in one embodiment in breaking down a call between endpoints. In one embodiment a conference bridge with a call manager component originates the termination message. In another embodiment the conference bridge with a call manager component is the intended recipient of the termination message.

Turning now to depicted is a diagram illustrating a method for managing bandwidth for a call between an endpoint A and an endpoint B according to one embodiment of the present invention. includes features similar to and so descriptions for these features will not be repeated here. Like features have like reference numbers. The difference between and is that depicts a method for an embodiment having two via sites and bandwidth pools. Further differences are described below.

After the settings manager C communicates to generate the third filtered media preferences list the settings manager C communicates to allocate bandwidth in the via site C media pools. The allocation that occurs for communication is similar to the allocation that occurs for communication . After the settings manager D communicates to generate the fourth filtered media preferences list the settings manager D communicates to allocate bandwidth in the via site D media pools. The allocation that occurs for communication is similar to the allocation that occurs for communication . The second filtered media preferences list and the call settings list are as described for .

During the process of propagating the answer message from endpoint B to endpoint C the settings manager D communicates to update the bandwidth pools for the second via site D. The updates that occur for communications and are similar to the update that occurs for communication in .

Turning now to depicted is a diagram illustrating a method for terminating a call between an endpoint A and an endpoint B according to one embodiment of the present invention. includes features similar to and so descriptions for these features will not be repeated here. Like features have like reference numbers. is a continuation of the method depicted in . Specifically depicts termination of the call connected by the method depicted in .

Some period of time after the endpoint A receives the answer message the endpoint A transmits a termination message similar to the one described with reference to . This termination message is propagated to the endpoint B similar to the answer message. Message is as described with reference to . Messages and are as described with reference to . Messages and are similar to message described with reference to . Messages and are as described with reference to .

In one embodiment a site such as site does not have a switch and instead has a processor based device including a call manager and a configuration storage module that is used instead of the switch . For example a site includes a conference bridge that has a call manager and a configuration storage module comprised within the conference bridge.

In another embodiment a single switch manages bandwidth for two or more sites . One having ordinary skill in the art will recognize that a single switch can be communicatively coupled with two or more sites that may or may not be geographically disparate locations from one another and configured to provide the bandwidth management functionality described herein. For example site A is located in Chicago a site C is located in Seattle site D is located in Boise and site B is located in Melbourne Australia. The endpoint A is at the site A in Chicago and the endpoint B is at the site B in Melbourne. A single switch is communicatively coupled to each site A B C D. In other words the call manager for this one switch includes components as described for that are configured to manage bandwidth for more than one site . For example upon receiving an offer message from endpoint A requesting communications with endpoint B the switch does not communicate with a different call manager but instead handles all the above communications internally among the different components of the single call manager so that a call between endpoint A and endpoint B is connected similar to as described above for example as described above for . In one embodiment the sites A B C D have different pools for different media types and the call manager allocates bandwidth among different pools for the different sites A B C D similar to as described above for example as described above for and or .

Turning now to depicted is a diagram illustrating mapping coordinates for different sites in a distributed telephony system according to one embodiment of the present invention. More specifically depicts the mapping coordinates for system depicted in .

The mapping coordinates depicted in is stored in each site s own administrator settings storage and used by each site s own location service engine to determine how to route calls for a given destination site i.e. determine mapping information . More specifically if the location service engine is provided information describing the destination site for a given call the call manager can use the mapping coordinates stored in the site s storage to determine which via site to send the call signals to in order to connect the call to the destination site.

In some instances the via site will be the destination site. In these cases the location service engine of the via site receives the call signal and proceeds in taking steps necessary to connect the call. In other instances the via site is not the destination site. Each via site also has mapping coordinates stored in the site s administrator settings storage . Thus in cases where the via site is not the destination site the via site s call manager location service engine 1 receives the call signal 2 determines the destination site for the call 3 retrieves mapping coordinates 3 determines mapping information to communicate the call signal to the next via site based on the destination site for the call and the mapping coordinates and 4 sends an appropriate call signal to the next via site.

Chart includes mapping coordinates for site one . If the destination site for a call signal is site two then the next via site is site two . If the destination site for a call signal is site three then the next via site is site two . If the destination site for a call signal is site four then the next via site is site two .

Chart includes mapping coordinates for site two . If the destination site for a call signal is site one then the next via site is site one . If the destination site for a call signal is site three then the next via site is site three . If the destination site for a call signal is site four then the next via site is site three .

Chart includes mapping coordinates for site three . If the destination site for a call signal is site one then the next via site is site two . If the destination site for a call signal is site two then the next via site is site two . If the destination site for a call signal is site four then the next via site is site four .

Chart includes mapping coordinates for site four . If the destination site for a call signal is site one then the next via site is site three . If the destination site for a call signal is site two then the next via site is site three . If the destination site for a call signal is site three then the next via site is site three .

Turning now to depicted is a flowchart illustrating a method for managing bandwidth for a call using pooled bandwidth according to one embodiment of the present invention. The steps depicted in correlate to the method described for . For the purpose of clarity the switch at the source site is referred to as switch A and the switch at the destination site is referred to as switch B. The switch A receives an offer message communication . The switch A determines a first filtered media preferences list. The switch A retrieves mapping coordinates and determines mapping information for the destination site. The switch A sends a transformed offer to the destination site communication . The switch B at the destination site receives the transformed offer communication . The switch B retrieves mapping coordinates and determines mapping information for the source site. The switch B sends an answer message to the source site communication . The source site receives the answer from the destination site communication .

Turning now to depicted is a flowchart illustrating a method for managing bandwidth for a call between two endpoints according to one embodiment of the present invention. At step a description of administrator settings are added to the administrator settings storage . For example the description of the media preferences list priority rankings for the media preferences list or priority rankings for the media types are added to the administrator settings storage . A media preferences list is generated and a call is executed with the bandwidth managed by the call manager .

Turning now to depicted are flowcharts illustrating a method for editing administrator settings according to one embodiment of the present invention. The administrator settings are retrieved from the administrator settings storage . The administrator settings are displayed on an interface viewable by a user administrator. The user administrator provides input s to the interface 1 modifying a description of existing administrator settings 2 enabling or disenabling the cascading pools feature 3 defining a via site 4 describing preferred settings for video media 5 describing preferred settings for voice media 6 describing preferred settings for data conferencing media 7 defining a priority order for the media settings applicable to video calls 8 defining a priority order for the media settings applicable to voice calls 9 defining a priority order for the media settings for data conferencing calls and or 10 describing an alternative connection option for use in the event that a preferred media setting cannot be satisfied. For example the preferred resolution or frame rate for a media cannot be satisfied the switch can be configured to connect an audio only call i.e. a voice call . These inputs are received by the switch and stored in the administrator settings storage . In one embodiment the call settings list described in is determined based in part on the priority rankings described above for steps .

Referring now to depicted is a flowchart illustrating a method for generating a media preferences lists. Administrator setting inputs are received via an interface of the server as described for . The switch receives the inputs and stores them in the administrator settings storage . If existing administrator settings are modified these modifications are stored in the administrator settings storage . The switch generates media preferences lists for each media type based on the inputs in . The switch stores the media preferences lists in the administrator settings storage .

Referring to the method A depicted here corresponds to the method depicted in . For the purpose of clarity the switch at the source site is referred to as switch A and the switch at the destination site is referred to as switch B. The switch A receives an offer message from the endpoint A communication . The switch A determines and filters the source media preferences list communication . The switch A allocates bandwidth in the pools communication . The switch A determines mapping information and sends an invite to the destination site communication .

The destination site receives the invite. The switch B determines and filters the destination media preferences list communication . The switch B allocates bandwidth in the destination site s pools communication . The switch B sends an offer message to endpoint B communication . The switch B receives an answer message from endpoint B communication . The destination site updates the bandwidth in the pools and sends an answer message to the source site communications and . The answer message is propagated to the endpoint A and at a later time a termination message is propagated from one endpoint to the other.

In one embodiment the switch A determines mapping information for the next site before allocating bandwidth. For example the switch A determines mapping information for the next site prior to allocating bandwidth in the pools as described for steps and or .

Referring to the method B depicted here corresponds to the method depicted in . For the purpose of clarity the switch at the source site is referred to as switch A the switch at the destination site is referred to as switch B the switch at the first via site is referred to as switch C and the switch at the second via site is referred to as switch D. The switch A receives an offer message from an endpoint communication . The switch A determines and filters a source media preferences list communication . The switch A determines mapping information and sends an invite to the first via site communication .

The switch C for the first via site receives the invite determines the first via site media preferences list and filters the list communication . The switch C determines mapping information and sends an invite to the second via site communication . The switch D for the second via site receives the invite determines the second via site media preferences list and filters the list communication . The switch D determines mapping information and sends an invite to the destination site. The destination site receives the invite determines and filters the destination media preferences list communication . The destination site s switch B sends an offer message to the endpoint B communication and receives an answer message communication . The answer message is propagated to the endpoint A and at a later time a termination message is propagated from one endpoint to the other.

Referring to the method C depicted here corresponds to the method depicted in . For the purpose of clarity the switch at the source site is referred to as switch A the switch at the destination site is referred to as switch B the switch at the first via site is referred to as switch C and the switch at the second via site is referred to as switch D. The switch A receives an offer message from an endpoint communication . The switch A determines the source media preferences list. The switch A filters the source media preferences list using the endpoint A media preferences list received in the offer communication . The switch A determines the worst case call settings. The switch A determines if the network has enough bandwidth to support the worst case call settings. If enough bandwidth is not available the switch A removes the settings that require more bandwidth than is available and then repeats steps and until a suitable first filtered media preferences list is found. In one embodiment the switch A removes the settings that require more bandwidth than is available and then repeats steps and until a suitable first filtered media preferences list is found. If a suitable first filtered media preferences list cannot be found the switch A sends an error message to the endpoint A. The switch A allocates bandwidth in the pools communication . The switch determines mapping information and sends an invite to the first via site communication . The first via site receives the invite communication .

In one embodiment the switch A determines mapping information for the next site before allocating bandwidth. For example the switch A determines mapping information for the next site prior to allocating bandwidth in the pools as described for step .

Turning now to depicted is a flowchart illustrating a method for allocating pooled bandwidth at a source site according to one embodiment of the present invention. For example depicts allocating bandwidth in the pools as described above for communication communications and step . For the purpose of clarity since the switch is at the source site it is referred to as switch A. The switch A determines the most expensive bandwidth setting for all media types based on the first filtered media preferences list. The switch A determines a first media type and reserves bandwidth based on the determination of step . For the first media type the switch A determines whether enough bandwidth is available for the most expensive bandwidth settings. If enough bandwidth is available the switch A checks to see if there is an additional media type . If there is an additional media type the method proceeds to step . If there is not an additional media type the switch A sends the transformed offer to the destination site.

If enough bandwidth is not available the switch A checks information in the media preferences list to see if cascading pools are enabled. If cascading pools are not enabled the switch sends an error message to the endpoint. If cascading pools are enabled the switch A checks to see if a lower priority pool is available. If a lower priority pool is not enabled the switch sends an error message to the endpoint. If a lower priority pool is available the switch A reserves bandwidth from the next lower priority pool. The switch A checks to see if enough bandwidth is available. If enough bandwidth is not available the switch A repeats step . If enough bandwidth is available the method proceeds to step .

Turning now to depicted is a flowchart illustrating a method for allocating pooled bandwidth at a destination site or a via site according to one embodiment of the present invention. For example depicts allocating bandwidth in the pools as described above for communication communications step step and step . depicts steps substantially similar to those of and so that description will not be repeated here. The difference between and is for example at step the answer is sent to the source site or an intervening via site instead of the destination site.

In one embodiment step includes 1 sending the error message to the source endpoint by propagating the error message across one or more via sites and 2 the via sites and source site releasing bandwidth previously allocated for the call. For example refer to and assume that a video call includes a source site A a first via site C a second via site D and a destination site B. The destination site B determines that it has inadequate bandwidth to connect the call at communication . The destination site sends the error message described for step in to the settings manager D of the second via site D. The settings manager D releases the bandwidth previously allocated for the call at step . The settings manager D sends an error message to the settings manager C of the first via site C. The settings manager C releases the bandwidth previously allocated for the call at step and sends an error message to the settings manager A of the source site A. The settings manager A releases the bandwidth previously allocated for the call at step and sends an error message to the endpoint A. One having ordinary skill in the art will recognize how this process would work if one of the via sites C D determines that the site C and or D has inadequate bandwidth to complete a call and sends an error message described for step .

In one embodiment an administrator modifies the size of one or more of the pools while a call is ongoing and the switch borrows bandwidth during the ongoing call in order to account for the change in the pool size. For example a video pool is initially assigned a bandwidth of 3 MB S and a video call is ongoing that requires 2 MB S. The video media type is also assigned a higher media priority ranking than the data conferencing media type. An administrator enters input in an interface see changing the size of the video pool to 1 MB S. If the data conferencing pool has 1 MB S of bandwidth available the switch borrows bandwidth from the data conferencing pool since 1 the video pool now has a bandwidth deficiency 2 the data conferencing pool has unused bandwidth and 3 the video media type has a higher media priority ranking than the data conferencing media type.

In one embodiment bandwidth is measured in kilobytes per second KB S instead of megabytes per second MB S . For example in bandwidth is measured in KB S.

Turning now to depicted is a flowchart illustrating a method for reserving bandwidth according to one embodiment of the present invention. The switch receives a request to add a reservation to the reservation list stored in the reservation storage . In one embodiment the reservation includes the media type s for the call the number of users who are members of the reservation i.e. the users who will be using the bandwidth reserved by the reservation the names of the members of the reservation and or the extension numbers of the members of the reservation. The switch retrieves the reservation list from the reservation storage . The switch displays a reservation list on an interface for example the interface associated with the server . The switch receives an input to add a new reservation or modify existing reservation. The switch adds the reservation call i.e. the call set up by the reservation to the reservation list stored in the reservation storage . The switch reserves bandwidth adequate to meet the demands of the reservation call at the source site for example using the process outlined for . In one embodiment reserving bandwidth for a reservation call includes allocating bandwidth from pools and or cascading pools. The switch sends communications to all the other sites that will be used in the reservation call to reserve bandwidth sufficient to meet the demands of the call. The other sites then reserve actual bandwidth sufficient to meet the bandwidth demands of the call. In one embodiment if one or more of the sites does not have available bandwidth to meet the bandwidth demands of the call that site sends or propagates an error message to the source site s switch . Unlike other call reservations which do not actually reserve bandwidth for a future call method actually reserves bandwidth resources for the future call. By contrast other call reservation merely reserve resource on the bridge and do not reserve actual bandwidth resources for the call. In one embodiment sending communications to all the other sites that will be used in the reservation call as described above and with reference to is referred to as propagating a reservation request to the other sites that will be used in the reservation call or similar language.

The switch receives a call request. The switch determines whether or not the call request is a member of the call reservation. For example the switch asks the calling party to provide a code to indicate that the call request is from a member of the call reservations. In another example the switch looks at the source of the call request and determines based on this information whether or not the calling party is a member the call reservation. In one embodiment if the call request is not a member of the reservation the call is not allowed to use the bandwidth reserved for the call reservation.

One having ordinary skill in the art will recognize that the members of the reservation can be identified by a class of users or other conventional groupings not described above.

In one embodiment an administrator modifies the size of one or more of the pools while a reservation call is ongoing and the switch borrows bandwidth during the ongoing reservation call in order to account for the change in the pool size. For example a video pool is initially assigned a bandwidth of 3 MB S and a reservation call having a video media type is ongoing that requires 2 MB S. The video media type is also assigned a higher media priority ranking than the data conferencing media type. An administrator enters input in an interface see changing the size of the video pool to 1 MB S. If the data conferencing pool has 1 MB S of bandwidth available the switch borrows bandwidth from the data conferencing pool since 1 video pool now has a bandwidth deficiency 2 the data conferencing pool has unused bandwidth and 3 the video media type has a higher media priority ranking than the data conferencing media type.

Turning now to depicted is a flowchart illustrating a method for reserving bandwidth according to one embodiment of the present invention. The switch receives a call request. The switch determines whether there is enough non reserved bandwidth to connect the call. If there is enough non reserved bandwidth to make call at step the switch connects the call. If there is not enough non reserved bandwidth to connect the call at step the switch determines if the call request is a high priority. For example the switch prompts the calling party to provide a code indicating that the call is for an emergency or that the calling party is a member of a call group in which membership indicates that the call request is a high priority. In one embodiment the switch identifies the priority of the call based on the dialed number.

If the call request is not a high priority then the switch sends an error message and the method ends. If the call request is a high priority at step then the switch checks to see if pooled bandwidth is available. If pooled bandwidth is not available then the switch checks to see if enough reserve bandwidth is available to connect the call. If there is not enough reserved bandwidth available to connect the call then the switch sends an error message to the calling party. If there is enough reserve bandwidth to connect call then the switch allocates reserved bandwidth with other bandwidth if necessary to connect the call. The switch then connects the call.

If pooled bandwidth is available at step and the switch allocates pooled bandwidth with other bandwidth if necessary to connect the call. The switch checks to see if there is enough bandwidth to connect the call. If there is enough bandwidth to connect the call then the switch connects the call. If there is not enough bandwidth to connect the call at step then the method proceeds to step .

Turning now to depicted is a flowchart illustrating a method for reallocating bandwidth to lower priority pools after call termination according to one embodiment of the present invention. The switch connects the call. As the call is ongoing the switch tracks the call and the source of the bandwidth used during the call. For example the switch tracks the source of bandwidth used to connect the call i.e. from which pools the bandwidth was sourced from. In one embodiment the switch also tracks the source of bandwidth used to keep the call connected over the course of the call. For example the switch tracks as bandwidth requirements fluctuate and bandwidth is added or subtracted in order to keep the call connected and the source of this bandwidth. The switch receives a termination signal. The switch determines whether the call borrowed bandwidth from a lower priority pool over the course of the call. If the call did not borrow bandwidth from a lower priority pool then the method ends. If the call did borrow bandwidth from a lower priority pool then the switch releases and reallocates the bandwidth back to the lower priority pools.

In one embodiment the switch does not track bandwidth on a call by call basis as described above but instead 1 tracks whether bandwidth is borrowed for a particular media type 2 receives a termination signal indicating that a call is ending 3 determines whether the termination signal is for a call having a media type that borrowed bandwidth as described in the first step 4 if the ending call has a media type that borrowed bandwidth the switch releases the borrowed bandwidth and reallocates the borrowed bandwidth to the lower priority pools.

In one embodiment the site is coupled to multiple WANs the bandwidth for the site is the total bandwidth available across the each of these WANs and the switch tracks bandwidth for each WAN .

Turning now to depicted are bar graphs illustrating pooled bandwidth according to one embodiment of the present invention. In one embodiment the bandwidth for each site is pooled into a voice pool video pool and a data conferencing pool. The site also reserves an amount of bandwidth for asynchronous data. For example 20 percent of site bandwidth is assigned to the voice pool 30 percent is assigned to the video pool 40 percent is assigned to the data conferencing pool and 10 percent is reserved for asynchronous data. For the purpose of clarity assumes that bandwidth for asynchronous data is set to zero.

Referring to this graph shows a situation where no calls are ongoing at the site. The site bandwidth is the total bandwidth available at the site. In one embodiment the site is coupled to multiple WANs and the site bandwidth is the total bandwidth across these WANs. The voice pool is a portion of the site bandwidth allocated for voice calls. The video pool is a portion of the site bandwidth allocated to video calls. The data conferencing pool is a portion of the site bandwidth allocated to data conferencing calls.

The black bars indicate the bandwidth allocation measured megabytes per second MB S and the striped grey bars indicates bandwidth available for use as measured in MB S. In A E the priority order for the media types indicates that video is a higher priority than data conferencing and that voice is a higher priority than video i.e. voice video data conferencing .

Here for site bandwidth the black bar of the graph shows that the site has a total bandwidth of 10 megabytes per second and the striped grey bar shows that 10 MB S are available for use. For the voice pool the black bar of the graph shows that the voice pool is allocated 2 MB S and the striped grey bar shows that 2 MB S are available for use. For the video pool the black bar of the graph shows that the video pool is allocated 3 MB S and the striped grey bar shows that 3 MB S are available for use. For the data conferencing pool the black bar of the graph shows that the data conferencing pool is allocated 5 MB S and the striped grey bar shows that 5 MB S are available for use.

Referring to this graph shows an instance where a voice and video call are ongoing but not exceeding their bandwidth allocations. The solid grey bar indicates the current bandwidth demand for a specific media in MB S. Adding the values for the striped grey bar Bandwidth Available for Use and the solid grey bar Current Bandwidth Demand for Specific Media equals the value of the black bar Bandwidth Allocation .

For the site bandwidth the black bar of the graph shows that the site has a total bandwidth of 10 MB S the striped grey bar shows that 8 MB S are available for use and the solid grey bar shows that 2 MB S are currently in use 8 MB S 2 MB S 10 MB S .

For the voice pool the black bar of the graph shows that the voice pool is allocated 2 MB S the striped grey bar shows that 1 MB S is available for use and the sold grey bar shows that 1 MB S is currently in use. Since for the voice pool the value for the striped grey bar is 1 MB S less than the value for the black bar 2 MB S this indicates that 1 MB S of the voice pool bandwidth is in use at the time of the graph. This is confirmed by the solid grey bar for the voice pool which indicates that one or more voice calls are ongoing and that the current bandwidth demand for these calls is 1 MB S.

For the video pool the black bar of the graph shows that the video pool is allocated 3 MB S the striped grey bar shows that 2 MB S are available for use and the sold grey bar shows that 1 MB S is currently in use. Since for the video pool the value for the striped grey bar is 1 MB S less than the value for the black bar 3 MB S this indicates that 1 MB S of the video pool bandwidth is in use. This is confirmed by the solid grey bar for the video pool which indicates that one or more video calls are ongoing and that the current bandwidth demand for these calls is 1 MB S.

For the data conferencing pool the black bar of the graph shows that the data conferencing pool is allocated 5 MB S and the striped grey bar shows that 5 MB S are available for use. Since no grey bar is present for the data conferencing pool this indicates that there are no data conferencing calls occurring at the time of this graph.

If for either the pools the value for the solid grey bar had exceeded the value for the solid black bar this would indicate that the bandwidth requirements for these media types exceeded their bandwidth allocation and that borrowing from another bandwidth pool i.e. the cascading pools feature would be required to connect the call.

Referring to this figure is a continuation of . Specifically this graph shows an instance where the voice and video call are ongoing but additional voice calls are occurring so that the bandwidth requirements for the voice calls exceeds the bandwidth allocation for the voice pool. Thus the bandwidth manager must borrow bandwidth from a lower priority pool.

For the site bandwidth the black bar of the graph shows that the site has a total bandwidth of 10 MB S the striped grey bar shows that 5 MB S are available for use and the solid grey bar shows that 5 MB S are currently in use.

For the voice pool the black bar of the graph shows that the voice pool is allocated 2 MB S the absence of a striped grey bar indicates that 0 MB S are available for use and the solid grey bar shows that 4 MB S are currently in use. Since for the voice pool the value for the solid grey bar is 2 MB S more than the value for the black bar 2 MB S this indicates that 2 MB S of the voice pool bandwidth is in use and that 2 MB S are being borrowed from another pool in order to connect the voice calls. Since the next lowest priority media is a video then the switch will borrow bandwidth from the video pool if the video pool has available bandwidth.

For the video pool the black bar of the graph shows that the video pool is allocated 3 MB S the absence of a striped grey bar indicates that 0 MB S are available for use and the solid grey bar shows that 1 MB S is currently in use. Since the value for the solid black bar is 3 MB S and the value of the sold grey bar is only 1 MB S this indicates that 2 MB S are being borrowed from the video pool. Here these 2 MB S are being borrowed by the voice pool.

The values for the data conferencing pool are unchanged from and so that description will not be repeated here.

Referring to this figure is a continuation of the . The features of are similar to and so like descriptions will not be repeated. The difference here is that for the site bandwidth the striped grey bar indicates that 4 MB S are available for use and the solid grey bar indicates that 6 MB S are in use. In other words between 1 MB S more bandwidth is being used across the site.

For the video pool the solid grey bar shows that an additional 1 MB S is being used. Since in no bandwidth was available for use in making video calls as indicated by the absence of a striped grey bar for the video pool the video pool is borrowing bandwidth from a lower priority pool to connect the additional video calls. Here the next lower priority pool is the data conferencing pool.

For the data conferencing pool the value for the striped grey bar is 1 MB less than the value for the solid black bar 5 MB S and the absence of a sold grey bar indicates that no data conferencing calls are ongoing. This indicates that 1 MB S is being borrowed from the data conferencing pool in order to connect the additional video calls and make up the 1 MB S deficit in the video conferencing pool.

Referring to this figure is a continuation of the . The features of are similar to and so like descriptions will not be repeated. The difference here is that for voice calls all the voice calls occurring in and are terminated but the video calls occurring in are ongoing.

The bandwidth manager tracked the borrowing from pools that occurred in and reallocates the bandwidth upon termination of the calls. Specifically bandwidth borrowed from the video pool to connect the voice calls of is reallocated by the bandwidth manager to the video pool. Upon reallocation of the borrowed bandwidth to the video pool the video pool now has sufficient bandwidth to connect all the video calls without borrowing from the data conferencing pool. Since the video pool does not need to borrow bandwidth from the data conferencing pool the bandwidth manager reallocates the bandwidth that the video pool borrowed in to the data conferencing pool.

In one embodiment a processor based device e.g. a computer is communicatively coupled to the switch and the switch tracks real time allocation of bandwidth among the different sites involved in connecting a call. The switch includes a display module not pictured . The display module is codes and routines that are part of the call manager that causes the switch to track real time information about the allocation of bandwidth among the different sites store information describing the real time allocation of bandwidth in the configuration module and execute a display function. A display function is a function executed by the display module in which the display module generates and sends a display signal to the processor based device. The display signal is received by the processor based device and responsive to receiving and processing the display signal the processor based devices generates a second signal based on the display signal that causes a display device communicatively coupled with the processor based device e.g. a monitor to display the real time allocation of the bandwidth among the different sites .

In one embodiment the switch further includes a analysis module not pictured that can analyze historical bandwidth use based on the real time data stored in the configuration module and generate historical reports of how pools and via sites have been utilized. These reports can be displayed on a display device similar to the display function described above in the previous paragraph. In one embodiment the switch includes an alert module not pictured that tracks bandwidth usage in the different pools and generates alert signals when pools reach or approach shortages. These alerts can also be displayed on a display device similar to the display function described above in the previous paragraph.

Turning now to depicted is an example of the supported codecs panel . The name column has the identification strings of the codecs supported by the switch . In one embodiment each codec identification sting is comprised of the name and sampling rate of the codec. The bandwidth column identifies the bandwidth required by the codecs in the name column . The default column indicates whether the codec in the name column is a default codec. If the default column indicates Yes it signifies that the codec in the same row was initially installed with the telephony system . On the other hand if the default column indicates No it signifies that the codec in the same row was added by a user with administrative rights after the telephony system was installed. To delete the descriptions of one or more codecs the respective boxes in the first column are selected for those codecs and the delete button is pressed. Pressing the new button causes the new codec panel to appear.

Turning to depicted is an example of a site codecs panel according to one embodiment of the present invention. The site codecs panel comprises a group of bandwidth pool size fields and a group of codec drop down boxes . The bandwidth pool size fields provide an interface for specifying the amount of bandwidth allocated to each pool. The bandwidth pool size fields comprise a voice pool size filed a fax and modem pool size field the video pool size field and a data collaboration field . For each of the bandwidth pool size fields the user administrator can provide inputs to specify the size of the respective media field. These inputs are received by the switch and stored in the administrator settings storage .

The codec drop down boxes comprise a voice codec drop down box a fax and modem codec drop down box a video codec drop down box and a collaboration drop down box . For each of the codec drop down boxes a user can provide input providing preferred codecs for the particular media type. These inputs are received by the switch and stored in the administrator settings storage .

Turning now to depicted is an example of the edit codec list panel that allows a user to view or edit an existing codec list according to one embodiment of the present invention. For example this panel allows the user to view or the codec lists depicted in and described throughout this application including for example element in and elements and in . The name field has the name of the codec list that is being viewed or edited. The choose codecs region displays an identification string of each codec supported by call manager and that are not members of the codec list. Codec list members region displays an identification string of each codec that is part of the codec list. A codec can be added to the codec list by selecting an identification string of desired codec in the choose codecs region and then pressing add button . To remove a codec from the codec list an identification string of a desired codec in the codec list members region is selected and remove button is pressed. To change the ranking of a codec within the codec list members region an identification string of a desired codec is selected in the codec list members region and move up button or move down button is pressed. To save changes to the codec list save button is pressed. The new button is pressed to create a new codec list. To use the displayed codec list as a template for a new codec list copy button is pressed. Pressing delete button deletes the codec list that is being viewed. To revert the codec list to the last saved version reset button is pressed.

Turning now to depicted is an example of the edit site panel used by a user for viewing or editing settings e.g. media preferences included in the media preferences list for site according to one embodiment of the present invention. Section includes fields where the site s general information settings can be edited. Bandwidth section includes an admission control bandwidth field which is the amount of total inter site WAN bandwidth allocated to site . Intra site calls dropdown inter site calls dropdown and fax and modem calls dropdown each allows the user to set which codec list to use for each of those types of calls. It should be noted that if site was coupled to multiple WANs the edit site panel would include a bandwidth section and an inter site dropdown for each WAN. Section includes fields where SIP proxy settings can be edited.

To save changes to the site settings save button is pressed. New button is pressed to create a new set of site settings. To use the settings in the edit site panel as a template for creating a new set of site settings copy button is pressed. Delete button is pressed to erase the site codec settings being viewed on the edit site panel .

Turning now to depicted is an example of a bandwidth priority panel for prioritizing bandwidth pools according to one embodiment of the present invention. The bandwidth priority panel comprises a priority order field an up button a down button and a cascading pools checkbox . The priority order field lists all the media types for the site and the priority order for the media types. The up button and the down button receive input from the user administrator changing the priority order for the media types. For example a user can select the Fax and Modem media in field with a mouse click and then mouse click the move up button to assign modify the priority order so that Fax and Modem are the highest priority. The switch receives input that cascading pools in enabled and stores this input in the administrator settings storage . The cascading pools checkbox receives input indicating whether the cascading pools feature is enabled. For example if the user checks the cascading pools checkbox then the switch receives input that cascading pools in enabled and stores this input in the administrator settings storage .

Turning now to depicted is an example of a site via table panel for mapping via sites according to one embodiment of the present invention. The site via table comprises one or more site drop down boxes one or more via site drop down boxes and a hyperlink . In one embodiment each site is assigned one via site. The site drop down box receives an input indicating site and the via site drop down box receives an input indicating the via site for the site indicated in drop down box . Thus in this example the site is Sunnyvale and the via site for Sunnyvale is Chicago. The switch receives these inputs and stores them in the administrator settings storage . Hyperlink is configured to receive an input i.e. a user click and responsive to this input expose the site codecs panel depicted in . In one embodiment the last entry in this table is always All Others as depicted in the drop down box beneath Sydney to simplify configuration by not requiring the administrator to explicitly configure a via for every source destination pair. For example in the embodiment depicted in any sites other than Sunnyvale Chicago or Sydney will use Sydney as their via site since it is identified as the via site for any other sites in the system. In one embodiment a hyperlink such as hyperlink is not available for the via sites since the system uses the pool for the site it is via through.

Turning now to depicted is an example of a codec list panel according to one embodiment of the present invention. The codec list panel is for adding codecs to a codec list according to one embodiment of the present invention. Group lists different groups of codecs for different media types. For example one group of codecs is Collaboration Codecs High Bandwidth. The group of codecs includes one or more data conferencing codecs that are classified as having high bandwidth requirements. In one embodiment the default is to include all codecs included in group unless user input is received to delete a particular group of codecs. For example the checkbox receives an input indicating the user wants to delete the Collaboration Codecs High Bandwidth codec group. If a user checks box the switch receives an input and deletes the Collaboration Codecs High Bandwidth codec group from the media preferences list stored in administrator settings storage .

The foregoing description of the embodiments of the present invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the present invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the present invention be limited not by this detailed description but rather by the claims of this application. As will be understood by those familiar with the art the present invention may be embodied in other specific forms without departing from the spirit or essential characteristics thereof. Likewise the particular naming and division of the modules routines features attributes methodologies and other aspects are not mandatory or significant and the mechanisms that implement the present invention or its features may have different names divisions and or formats. Furthermore as will be apparent to one of ordinary skill in the relevant art the modules routines features attributes methodologies and other aspects of the present invention can be implemented as software hardware firmware or any combination of the three. Also wherever a component an example of which is a module of the present invention is implemented as software the component can be implemented as a standalone program as part of a larger program as a plurality of separate programs as a statically or dynamically linked library as a kernel loadable module as a device driver and or in every and any other way known now or in the future to those of ordinary skill in the art of computer programming. Additionally the present invention is in no way limited to implementation in any specific programming language or for any specific operating system or environment. Accordingly the disclosure of the present invention is intended to be illustrative but not limiting of the scope of the present invention which is set forth in the following claims.

