---

title: Provisioning wireless subscriptions using software-based subscriber identity modules
abstract: Provisioning of a cellular subscription to a mobile device is performed over a Wi-Fi network, wherein the mobile device may be configured to use a software-based subscriber identity module. A configuration file is stored in an electronic memory of the mobile device that includes information about at least one cellular technology and at least one frequency band supported by the mobile device. This configuration file may constitute a management object or may be linked to an existing management object of the device by extending a structure of the existing management object.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09479923&OS=09479923&RS=09479923
owner: Nokia Technologies Oy
number: 09479923
owner_city: Espoo
owner_country: FI
publication_date: 20140414
---
This application claims priority from U.S. Provisional Application No. 61 812 808 filed on Apr. 17 2013 and incorporated herein by reference in its entirety.

The exemplary and non limiting embodiments of this invention relate generally to wireless communication methods apparatuses and computer program products and more specifically to methods apparatuses and computer program products for provisioning wireless subscriptions using software based Subscriber Identity Modules SIMs .

This section is intended to provide a background or context to the invention that is recited in the claims. The description herein may include concepts that could be pursued but are not necessarily ones that have been previously conceived or pursued. Therefore unless otherwise indicated herein what is described in this section is not prior art to the description and claims in this application and is not admitted to be prior art by inclusion in this section.

Certain abbreviations that may be found in the description and or in the Figures are herewith defined as follows 

In many wireless communication networks a mobile equipment user is required to have a subscription in order to access the network. The mobile equipment may be any type of machine apparatus or device that is enabled to utilize a mobile network provided that the machine apparatus or device has sufficient access credentials. The subscription identifies among other things the mobile network in which the mobile equipment is to be used and the individual settings relating to the subscription. These setting can include a network operator setting and a subscriber identifier corresponding to the mobile equipment user. The user might be an individual user a corporation an organization or a group.

A Subscriber Identity Module SIM card is a physical hardware based integrated circuit card for securely storing subscription credentials associated with the mobile equipment user. The SIM card typically contains subscriber details security information and memory for a personal directory of numbers. The SIM card also stores data that identifies the caller to the network service provider. As used herein the terms subscription credentials SIM data and access credentials can be understood as referring not only to a cryptographic secret but also to related cryptographic data such as an algorithm as well as operator specific settings required for network access. The subscription data may be stored in an area of computer readable memory or encoded on a microcontroller operating as the processor unit for a device or both stored and encoded. These stored or encoded subscription credentials may be loaded into the mobile equipment being used. Some wireless communication standards such as GSM and UMTS use the SIM card to store a service subscriber key corresponding to the user of the mobile device. The SIM card may also be used to perform authentication procedures in connection with security sensitive tasks.

Although conventional SIM cards may be used to access UMTS networks a more advanced physical SIM card known as a Universal Subscriber Identity Module USIM card has been developed for use with UMTS networks. The USIM card includes a microcomputer which is configured to execute any of several mini applications. For example the USIM card may be programmed to implement an electronic purse for use on a public transportation system or to provide a local service portal that provides access to a utility bill. A UMTS handset equipped with a USIM card can be used to make video calls assuming that the calling party and the called party are both served by a third generation 3G network. Voice calls and data exchanges are encrypted by the USIM using one or more security keys that are computed by the USIM. The USIM security keys are stronger and more secure than those provided by conventional SIMs. The USIM card also provides for a much larger phone book than a conventional SIM card with the USIM being configured to store contact names email addresses primary telephone numbers and secondary telephone numbers for thousands of contacts. The USIM stores these contacts in an encrypted manner providing for an enhanced level of security relative to storing the contact information directly in phone memory.

SIM and USIM cards allow a user to change mobile devices by removing the SIM or USIM card from one mobile device and inserting it into another mobile device. The form factor of the SIM or USIM may be an embedded chip a platform mounted chip a logical unit on a larger processor a protected memory card or a smart card. The chip may hold one or more sets of subscriptions or applications.

At present a wireless communication network may use any one of several different over the air techniques or protocols to update a SIM or USIM card. For example the communication network may include or interface with a central database that backs up personal information for a plurality of SIM or USIM cards. The network device may transfer the stored back up information corresponding to a particular user from the database to the user s SIM or USIM card upon request. While such over the air transfer techniques provide some personal information they currently do not provide a complete or secure SIM or USIM subscription credential transfer. Thus conventional over the air information transfer techniques still require a physical SIM or USIM card in the target device to ensure the security and the integrity of the transfer.

While SIM and USIM cards may be appropriate for high end or complex mobile devices such as smart mobile telephones and tablet devices the costs associated with a SIM or USIM card may be prohibitively high for simple low cost mobile devices. Furthermore while some wireless communication standards may require the implementation of security functions that are now performed by conventional physical SIM or USIM cards such standards may not require an actual hardware implementation of a SIM or USIM in the form of a card. Thus there remains a need for SIM solutions that are alternatives to conventional physical SIM and USIM cards.

The SIM and USIM cards are not movable between devices without utilizing a manual process. Indeed a person owning multiple mobile devices has to manually move the SIM or USIM card containing subscriber identification information from one terminal to another. Typically this long and cumbersome process includes switching off the terminal removing the back cover of the device removing the battery removing the SIM USIM card replacing the battery replacing the cover opening the cover of the second terminal removing the battery of the second terminal putting the SIM USIM card into the second terminal replacing the battery of the second terminal replacing the cover of the second terminal and powering up the second terminal. This manual process of transferring a SIM USIM card from one device to another only works if both devices are available. Also if the device or terminal is lost or stolen the user also loses the SIM card. Heretofore there are no solutions that address these problems.

Another shortcoming of physical SIM and USIM cards is that they are not always provided or furnished with newly acquired mobile equipment. In this case a user will have to separately obtain the access credentials for the acquired mobile equipment before the equipment can be used on the wireless communication network. This can cause an inconvenience to the user at least for the reason that obtaining either the SIM USIM card or the SIM download may require that the user bring the mobile equipment to a dealer who is associated with a given wireless communication network. In addition for cost reasons design reasons or to reduce the risk of theft some mobile equipment may not be equipped with a slot for accommodating a SIM or USIM card. In this case in order to obtain access to the wireless communications network the required access credentials would need to be downloaded directly from the network or the mobile equipment would need to be carried to a dealer that is associated with the network.

Yet another shortcoming of SIM and USIM cards is that cellular carriers need to provide their subscribers with a physical card. Costs are incurred in manufacturing distributing and programming these cards. It would be desirable to eliminate these costs. Moreover once a SIM or USIM card is programmed it cannot be changed only replaced. Consequently when a wireless network operator offers new services or makes changes to its existing offerings the network operator needs to send a new SIM or USIM card to the subscriber.

According to a first set of exemplary embodiments of the invention a method includes storing a configuration file in an electronic memory of a mobile device the configuration file including information specifying at least one cellular technology and at least one frequency band supported by the mobile device and using the configuration file to perform provisioning of a cellular subscription to the mobile device over a Wi Fi network.

According to a second set of exemplary embodiments of the invention an apparatus comprises one or more processors and one or more memories including computer program code the one or more memories and the computer program code configured with the one or more processors to cause the apparatus to perform at least storing a configuration file in an electronic memory of a mobile device the configuration file including information specifying at least one cellular technology and at least one frequency band supported by the mobile device and using the configuration file to perform provisioning of a cellular subscription to the mobile device over a Wi Fi network.

According to a third set of exemplary embodiments of the invention a computer program product comprises a computer readable storage medium bearing computer program code embodied therein for use with a computer the computer program code comprising code for storing a configuration file in an electronic memory of a mobile device the configuration file including information specifying at least one cellular technology and at least one frequency band supported by the mobile device and using the configuration file to perform provisioning of a cellular subscription to the mobile device over a Wi Fi network.

Pursuant to a set of further embodiments of the present invention the mobile device detects during a Wi Fi scanning procedure a Wi Fi network that is capable of performing an online provisioning of a software based subscriber identity module to be used to access at least one type of a cellular network.

Pursuant to a set of still further embodiments of the present invention the Wi Fi signal is received in one or more of a beacon frame or a probe response frame.

Pursuant to a set of still further embodiments of the present invention in response to receipt of the advertising signal the mobile device may identify an icon a name and or a unique identifier of a provider of the software based subscriber identity module to be used for cellular network access.

Pursuant to another set of exemplary embodiments these embodiments may cover the case when the received signal only indicates to the mobile device that provisioning of a software based subscriber identity module is available at that Wi Fi network the mobile device may then query for more information which would allow the mobile device to identify an icon a name and or a unique identifier of a provider of the software based subscriber identity module to be used for cellular network access.

Pursuant to a set of further embodiments of the present invention the mobile device retrieves its cellular radio related capabilities from memory and sends these capabilities to a subscription server identified as per the HS2.0 procedures at the start of the software based subscriber identity module provisioning procedure over the WiFi network.

Pursuant to a set of still further embodiments of the present invention the cellular radio related capabilities of the mobile device may be stored as part of the DevInfo and or DevDetail management object residing on the mobile device.

Pursuant to a set of still further embodiments of the present invention the DevInfo and or DevDetail management objects may be part of a Hotspot2.0 Mobile device Management Tree Structure as defined in the WiFi Alliance Passpoint Certification program.

In addition for various example embodiments of the invention the following is applicable a method comprising facilitating a processing of and or processing 1 data and or 2 information and or 3 at least one signal the 1 data and or 2 information and or 3 at least one signal based at least in part on or derived at least in part from any one or any combination of methods or processes disclosed in this application as relevant to any embodiment of the invention.

For various example embodiments of the invention the following is also applicable a method comprising facilitating access to at least one interface configured to allow access to at least one service the at least one service configured to perform any one or any combination of network or service provider methods or processes disclosed in this application.

For various exemplary embodiments of the invention the following is also applicable a method comprising facilitating creating and or facilitating modifying 1 at least one device user interface element and or 2 at least one device user interface functionality the 1 at least one device user interface element and or 2 at least one device user interface functionality based at least in part on data and or information resulting from one or any combination of methods or processes disclosed in this application as relevant to any embodiment of the invention and or at least one signal resulting from one or any combination of methods or processes disclosed in this application as relevant to any embodiment of the invention.

For various example embodiments of the invention the following is also applicable a method comprising creating and or modifying 1 at least one device user interface element and or 2 at least one device user interface functionality the 1 at least one device user interface element and or 2 at least one device user interface functionality based at least in part on data and or information resulting from one or any combination of methods or processes disclosed in this application as relevant to any embodiment of the invention and or at least one signal resulting from one or any combination of methods or processes disclosed in this application as relevant to any embodiment of the invention.

In various example embodiments the methods or processes can be accomplished on the service provider side or on the mobile device side or in any shared way between service provider and mobile device with actions being performed on both sides. For various example embodiments the following is applicable An apparatus comprising means for performing the method of any of the originally filed method claims included herewith.

Still other aspects features technical effects and advantages of the invention are readily apparent from the following detailed description simply by illustrating a number of particular embodiments and implementations including the best mode contemplated for carrying out the invention. The invention is also capable of other and different embodiments and its several details can be modified in various obvious respects all without departing from the spirit and scope of the invention. Accordingly the drawings and description are to be regarded as illustrative in nature and not as restrictive.

Examples of methods and apparatuses for provisioning wireless subscriptions using software based Subscriber Identity Modules SIMs are disclosed. In the following description for the purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the embodiments of the invention. It is apparent however to one skilled in the art that the embodiments of the invention may be practiced without these specific details or with an equivalent arrangement. In other instances well known structures and devices are shown in block diagram form in order to avoid unnecessarily obscuring the embodiments of the invention.

Once found primarily in coffee shops and hotels public Wi Fi hotspots have recently become quite commonplace. Growth of Wi Fi in public spaces is expected to continue at a very strong pace. This explosive growth is driven by several factors including the ubiquity of Wi Fi in mobile devices such as laptops tablets and smartphones. Many end users have a strong appetite for free or low cost Wi Fi connectivity as an alternative or supplement to 3G and 4G data plans. Likewise many service providers support Wi Fi hotspots as a means to offload traffic from congested networks to improve the experience of end users.

An industry wide specification known as Wi Fi Alliance WFA HotSpot 2.0 promulgates standards based interoperable Wi Fi authentication and handoff. HotSpot 2.0 was developed to enable among other things online purchases of Wi Fi subscriptions without prior agreement between the user and the service provider. A Wi Fi connection is used to determine whether online sign up to a Wi Fi network is available and if so an icon a name and a domain name of a service provider are identified. The user may select the service provider based on the icon and or the name. Thus HotSpot 2.0 offers a secure way of provisioning Wi Fi credentials to a mobile phone. Seamless network access is provided wherein authentication no longer requires a browser based sign on and the subscriber is not required to enter a password. Devices are authenticated automatically using Extensible Authentication Protocols EAP based on a Subscriber Identity Module SIM card a username and password or certificate credentials. The Wi Fi connections are secured with an enhanced form of Wi Fi Protected Access WPA known as WPA2 Enterprise to provide a level of security comparable to that of cellular networks. Further details regarding WPA2 are set forth in the IEEE 802.11i 2004 and 802.11i standards which were amendments to the original IEEE 802.11 standard.

The existing HotSpot 2.0 standard is directed to the provisioning of Wi Fi services and not cellular subscriptions. In the context of cellular subscriptions a myriad of factors must be considered. For example what cellular technology and frequency band is supported by the mobile device Has the mobile device been certified to be used in these frequency bands by a regulatory body and if so what regulator identifier is associated with the regulatory body Is the mobile device data only or is the device equipped for both voice and data 

Pursuant to a set of illustrative embodiments of the present invention provisioning of a cellular subscription is provided to a mobile device over a Wi Fi network wherein the mobile device may be configured to use a software based SIM. As used herein the term cellular may but need not refer to any of 2G 2.5G 3G 3G HSPA 4G LTE or any combination thereof. A configuration file is stored in an electronic memory of the mobile device that includes information about at least one cellular technology and at least one frequency band supported by the mobile device. This configuration file may constitute a management object or may be linked to an existing management object of the device by extending a structure of the existing management object. Pursuant to a further set of embodiments of the present invention the existing management object structure is defined in the HotSpot 2.0 standard.

If the mobile equipment is configured for use with a software based SIM certain types of security information may be transferred to the mobile device in order to provide provisioning of the cellular subscription. In the case of LTE an LTE key K and a plurality of operator specific LTE key derivation functions may be transferred to the device purchasing the subscription. In the case of UMTS authentication the transfer of a shared secret key K and a set of algorithms used by an authentication procedure known as MILENAGE may be transferred to the mobile device purchasing a subscription. MILENAGE provides mutual authentication in the sense that the USIM is able to authenticate the network by using a process of symmetric encryption. Conventionally the MILENAGE key is pre provided on a USIM card before the card is issued to a user and the MILENAGE authentication procedure is implemented in an authentication center AuC of the network operator and in the USIM itself. A definition of the MILENAGE algorithm is set forth in 3GPP 35.206.

Illustratively the electronic device may but need not comprise a mobile handset a cellular phone a tablet device a personal digital assistant PDA a pager a tablet device a laptop computer a handheld personal computer PC a gaming device having wireless communication capabilities a music storage and playback appliance having wireless communication capabilities Internet appliances permitting wireless Internet access and browsing as well as portable units or terminals that incorporate combinations of such functions. For example the electronic device may be a mobile phone user terminal more generally referred to as a user equipment UE . The UE may be any portable radio device intended for an end user which accesses a wireless network such as a cellular or Wi Fi or WLAN network.

During or prior to the provisioning of a software based subscriber identity module SIM the electronic device may learn the address of a subscription provisioning server and optionally a device management DM server over a Wi Fi network . The electronic device has also capability to communicate with a cellular network using a cellular technology and operating in a frequency band supported by the mobile device . The cellular network includes a subscriber database with a back end connection to the subscription provisioning server . The cellular network may comprise one or more network access nodes including but not limited to a Node B base station an evolved Node B eNB a cellular base station a relay stations a remote radio head any other type of network node with wireless communication capability and which serves as an access portal enabling any of the above types of UEs to gain access to the wireless network of a specific type of radio access technology. The Wi Fi network may include one or more WLAN access points or one or more local area network access points. Although not illustrated in the Wi Fi network may also include other application servers such as for example a download server a diagnostics server a customer care server and a self care website portal.

The electronic device includes a processor a random access memory RAM and a non volatile memory NVM . For completeness the RAM and the NVM may each be implemented using any type of computer readable memory that is suitable to the local technical environment and using any suitable data storage technology. Examples of suitable data storage technologies include semiconductor based memory devices flash memory magnetic memory devices and systems optical memory devices and systems fixed memory removable memory or any of various combinations thereof. The processor may be of any type suitable to the local technical environment and may include one or more of general purpose computers special purpose computers microprocessors digital signal processors DSPs or processors based on a multicore processor architecture as non limiting examples.

Pursuant to a set of illustrative embodiments disclosed herein the NVM may comprise for example NAND or NOR type flash memory or other suitable type of NVM. The NVM may contain a number of software or firmware code components of the electronic device including for example application software a device management DM client the software based SIM a provisioning client a hand off module an operating system OS and firmware and an update agent . Additional software firmware code components or any of various combinations thereof may also be present in one or more of the RAM and the NVM .

The term code may be used herein to represent one or more of executable instructions operand data configuration parameters or other information stored in a memory of the electronic device . This memory may include one or more of the NVM or the RAM . One or more of the application software the DM client or the software based SIM of the NVM may include program instructions that when executed by the associated processor enable the electronic device to operate in accordance with the exemplary embodiments of this invention as detailed herein. That is the exemplary embodiments of this invention may be implemented at least in part by computer software executable by the processor of the electronic device or by hardware or by a combination of software and hardware and firmware.

Pursuant to a set of illustrative embodiment of the present invention the software based SIM comprises one or more of a software file or an information packet delivered by a remote server such as for example the subscription provisioning server . The software based SIM may be stored in the NVM as shown in . Alternatively or additionally the software based SIM could be stored in the RAM . In the case of UMTS authentication the software based SIM may include a shared secret key K and a set of algorithms belonging to the MILENAGE. In the case of LTE authentication the software based SIM may include an LTE key K and one or more operator specific LTE key derivation functions. The software based SIM may but need not include other types of information in addition to or in lieu of the foregoing information.

A provisioning client may process a set of executable instructions in conjunction with a configuration file to provision the electronic device for for access to the Wi Fi network or a cellular network or both the Wi Fi network and the cellular network . The electronic device may receive provisioning information from for example one or more of the device management server or the subscription provisioning server to fix configuration problems or reconfigure software and hardware.

Pursuant to a set of illustrative embodiments of the present invention provisioning of a cellular subscription for use on the cellular network is provided to a mobile device such as an electronic device over the Wi Fi network wherein the mobile device may be configured to use the software based SIM . A configuration file that includes one or more cellular network capability related parameters is stored in an electronic memory of the mobile device such as the NVM or the RAM . The configuration file includes information about at least one cellular technology and at least one frequency band supported by the mobile device. This configuration file may constitute a management object MO or may be linked to an existing MO of the device by extending a structure of the existing management object as will be described hereinafter with reference to . Pursuant to a further set of embodiments of the present invention the existing management object structure is defined in the HotSpot 2.0 standard. Provisioning of the software based SIM may but need not be performed using Open Mobile Alliance OMA device management DM procedures and or simple object access protocol SOAP extensible markup language XML procedures described in the HS 2.0 standard.

In addition to those elements described above the electronic device may comprise a downloaded diagnostic client not shown that facilitates remote diagnosis and a traps client not shown that facilitates the setting of traps and retrieving of collected information. The DM client of the electronic device may interact with the DM server the diagnostic client and the traps client to receive DM commands from the DM server and to implement them in the electronic device . A download server may be employed at the Wi Fi network or the cellular network to download firmware and software updates e.g. update information in the form of for example update packages . The download server may also be used to download new firmware software such as for example the diagnostics client mentioned above which may then be installed and activated in the electronic device .

In one set of illustrative embodiments of the present invention the device management server may be implemented as an OMA DM based application server that may be comprised of two parts an OMA DM based application and an OMA DM server. An OMA DM based application is configured to implement business processes logic and data processing whereas an OMA DM server is configured to implement the functionality required to support the OMA DM protocol by which the OMA DM based application manipulates OMA DM capable electronic devices such as the electronic device of .

An OMA DM common framework in accordance with a set of representative embodiments of the present invention is configured to support a set of application programming interfaces APIs and callback services such that one or more OMA DM based applications may be easily and effectively integrated with the DM server . The device management server or the subscription server or both may provide an API for issuing OMA DM commands and values to OMA DM capable electronic devices including the ability to explore a device management tree DM tree stored in the NVM of the electronic device . The DM tree includes a plurality of nodes that are interconnected to form a tree structure each node representing an available management object. Each of respective individual nodes may be addressed and accessed directly through a corresponding unique uniform resource identifier URI .

An OMA DM common framework in accordance with one set of representative embodiments of the present invention provides for the real time sharing of data by multiple OMA DM based applications and may include sharing of the data from the DM tree in an electronic device such as the electronic device of . In a representative embodiment of the present invention each OMA DM based application may access the data required to create OMA DM commands for the electronic device .

In practice the electronic device of may be manufactured sold or provided by any of a variety of different entities. Each of these entities may place electronic device setting parameters e.g. GPRS settings at a different or non standardized location within the DM tree of the electronic device . This may cause the node uniform resource identifier URI of a given parameter to be different for each electronic device make model and version.

Pursuant to a set of illustrative embodiments of the present invention a data store is provided for managing DM tree information. This data store may be implemented using the NVM . Alternatively or additionally the data store could be implemented using the RAM . Such a data store may hold single device information such as an international mobile equipment identity IMEI for the electronic device a password and a nonce to name only a few examples. Some data may be customized for each OMA DM based application including for example the type of authentication scheme to be used and bootstrap content. Some representative embodiments of the present invention allow a user of a customer care system to modify the bootstrap content to specify the security type and profile type for devices. The security type may for example be one or both of Networkpin and Userpin .

Returning to the illustrative MO such as DevDetail includes a plurality of nodes arranged in a tree structure each of which may be addressed using a unique URI as discussed previously. For example the URI of the root of the DevDetail MO is . DevDetail. This illustrative MO may be extended to include the configuration file by extending one or more of the nodes in the tree structure of . For example the node for the Wi Fi subscription MO may be extended by adding one or more child nodes to the Wi Fi subscription MO. Similarly the node for the Ext MO may be extended by adding one or more child nodes to the Ext MO.

These added child nodes may include details about the electronic device such as a device type identifier a regulatory certification details node a hardware and software version identifier and any restrictions of DM tree DMT URIs . The child nodes may also include information about a cellular technology and a frequency band that are supported by the electronic device such as a cellular technology identifier and a frequency band identifier . A voice and data data only identifier indicates whether the electronic device is data only versus voice and data. The voice and data data only identifier may be pre provisioned and linked into the MO tree structure. This information is important because for electronic devices that are voice and data devices there are regulatory requirements which are not applicable for data only devices such as the ability to place an E911 call.

By way of example the DM tree may but need not include an MO known as DevInfo. The subscription provisioning server may use the DevInfo MO to obtain specific identifying data about the electronic device . In general the DevInfo MO contains a device ID for the electronic device along with a manufacturer identifier a model number identifier and a language identifier. The basic components of the DevInfo management object may be configured through system properties.

The operational sequence of progresses to block where the electronic device receives a signal from the Wi Fi network indicating that the Wi Fi network provides support for cellular subscription provisioning and including at least one of an icon a name or a unique identifier for the cellular network providing the cellular subscription. The operational sequence advances to block where once a network indicating software based SIM provisioning capability is identified the electronic device associates to the Wi Fi network . The Wi Fi network may but need not be robust security network RSN enabled. If RSN enabled access requiring server side only authentication may be provided.

At block the electronic device identifies and verifies one or more of the icon the name and or the unique identifier for the cellular network providing the cellular subscription. For example the electronic device may follow the procedures described in the HotSpot 2.0 specification to verify the icon name and identity of the provider by using Wi Fi procedures before association. Such a Wi Fi network may allow mobile devices such as electronic device to access the subscription provisioning server either by employing an open no authorization required Wi Fi network or by providing server side only authentication possibilities for an RSN enabled network.

Next at block in response to the electronic device accepting a user input indicative of a request for an online cellular subscription purchase the electronic device sends the one or more cellular network capability related parameters to the subscription provisioning server . For example an extended MO may include parameters describing one or more radio network capabilities of the mobile device. Alternatively or additionally the extended MO may comprise an extended DevDetail MO. Illustratively a uniform resource locator URL for the subscription provisioning server is provided to the electronic device before the association of block .

At block the subscription provisioning server examines the one or more cellular network capability related parameters to ascertain whether or not cellular service may be offered to the electronic device . If cellular service can be offered the subscription provisioning server ascertains what types of technologies and frequency bands are supported by the electronic device . For example the supported technologies can be any of 2G 3G LTE or others. The frequency bands may include for example LTE bands 4 and 17.

At block in response to the cellular network having service in one or more frequency bands supported by the electronic device the subscription provisioning server sends one or more service choices and one or more pricing options to the electronic device during a subscription provisioning call flow. This subscription provisioning call flow is defined for example in the HS2.0 specification. At this time the subscription provisioning server ascertains whether a voice and data plan can be offered to the electronic device instead of or in addition to a data only plan or a voice only plan based upon the capabilities of the electronic device as specified in the configuration file.

At block in response to receiving an indication from the electronic device that the user wishes to purchase cellular service from the cellular network the subscription provisioning server provisions the electronic device with a cellular subscription in the form of a software based SIM. The software based SIM may but need not be an extension of a HotSpot 2.0 subscription MO. The subscription MO may be extended to carry information that is specific to the cellular network . For example the subscription MO may be extended by adding a new leaf node under a Credentials node wherein the new leaf node is called a soft SIM.

At block after the mobile device is provisioned with the soft SIM by the subscription provisioning server the subscription provisioning server updates the subscriber database in the cellular network . Thus the electronic device will be able to authenticate and gain access to the cellular network .

The soft SIM may but need not be provided in the form of a soft SIM leaf node that includes one or more the following items an integrated circuit card identifier ICCID an international mobile subscriber identity IMSI if voice service is included an authentication key shared secret a binary function which takes a rand as an input and generates a key K rand a technology identifier that specifies a technology to be used 2G 3G LTE a frequency band identifier that specifies possible bands of operation or a cellular key derivation function that is needed to derive an integrity key and a cipher key when connecting to the cellular network .

In practice the information in the soft SIM could be lost by a mobile device. This could occur for example during a reflash procedure or a crash. The HotSpot 2.0 procedures defined by the WiFi Alliance provide a way to remediate and reload a lost WiFI subscription by contacting a remediation server function which is expected to be available in networks that are equipped with the subscription provisioning server . It is proposed that operators providing cellular subscriptions also provide a cellular subscription remediation server accessible both over the WiFi network and the cellular network . A mobile device with a lost cellular subscription would follow the HotSpot 2.0 remediation procedures to recover its cellular subscription.

It is also suggested that during the cellular subscription provisioning procedure the subscription server creates a user account. This user account allows users to manage their own subscriptions online. The user account may be created by sending a link to an email address provided by the user during the subscription and awaiting the user to activate the link.

The ICCID identifies each SIM internationally. A full ICCID is 19 or 20 characters. It is possible to extract the ICCID by using an AT ICCID modem command. The format of the ICCID is MMCC IINN NNNN NNNN NN C x. MM Constant ISO 7812 Major Industry Identifier 89 for Telecommunications administrations and private operating agencies . CC Country Code i.e. 61 Australia 86 China II Issuer Identifier AAPT 14 EZI PhoneCard 88 Hutchison 06 Optus 02 12 21 23 Telstra 01 Telstra Business 00 61 62 Vodafone 03 N12 Account ID SIM number C Checksum calculated from the other 19 digits using an algorithm known as the Luhn algorithm. An extra 20th digit is returned by the AT ICCID command but this digit is not part of the ICCID.

The electronic device could be provisioned with one or more software based SIMs even if the electronic device already has a physical SIM card in which case the electronic device would become a multi SIM device. An electronic device with one or more soft SIM credentials would follow the policy in the device to search for a cellular network when switched on and authenticate with the selected cellular network by sending an attach request. The electronic device then calculates AUTN from the parameters received from the cellular network to compare the calculated AUTN with AUTN received from the network for authenticating the network.

The various steps summarized in may be viewed as method steps and or as operations that result from operation of computer program code embodied on a memory and executed by a processor and or as a plurality of coupled logic circuit elements constructed to carry out the associated function s .

Among the technical effects of these teachings provisioning of SIM credentials is performed over the air without prior agreement between the user and the cellular carrier over a Wi Fi communications link. Wi Fi is a different radio technology than cellular providing a provisioning solution which is different from current practice but which is workable as proved by the WiFi ecosystem where buying subscriptions online is a current practice worldwide. In a few jurisdictions voice subscriptions are currently used for E911 calls and also to track criminal activity so regulators may have some resistance to the foregoing approach. In these jurisdictions the over the air provisioning of SIM credentials may be limited to data plans.

Various modifications and adaptations to the foregoing exemplary embodiments of this invention may become apparent to those skilled in the relevant arts in view of the foregoing description. It will be further recognized that various blocks discussed above may be performed as steps but the order in which they are presented is not limiting and they may be performed in any appropriate order with or without additional intervening blocks or steps.

In general the various exemplary embodiments may be implemented in hardware or special purpose circuits software logic or any combination thereof. For example some aspects may be implemented in hardware while other aspects may be implemented in embodied firmware or software which may be executed by a controller microprocessor or other computing device although the invention is not limited thereto. While various aspects of the exemplary embodiments of this invention may be illustrated and described as block diagrams flow charts or using some other pictorial representation it is well understood that these blocks apparatus systems techniques or methods described herein may be implemented in as non limiting examples hardware embodied software and or firmware special purpose circuits or logic general purpose hardware or controller or other computing devices or some combination thereof where general purpose elements may be made special purpose by embodied executable software.

It should thus be appreciated that at least some aspects of the exemplary embodiments of the inventions may be practiced in various components such as integrated circuit chips and modules and that the exemplary embodiments of this invention may be realized in an apparatus that is embodied as an integrated circuit. The integrated circuit or circuits may comprise circuitry as well as possibly firmware for embodying at least one or more of a data processor or data processors a digital signal processor or processors baseband circuitry and radio frequency circuitry that are configurable so as to operate in accordance with the exemplary embodiments of this invention.

While various exemplary embodiments have been described it should be appreciated that the practice of the invention is not limited to the exemplary embodiments shown and discussed herein. For example while the exemplary embodiments have been described above in the context of UMTS LTE or GPRS electronic devices it should be appreciated that the exemplary embodiments of this invention are not limited for use with only these particular types of wireless communication systems. Furthermore some of the features of the various non limiting and exemplary embodiments of this invention may be used to advantage without the corresponding use of other features. As such the foregoing description should be considered as merely illustrative of the principles teachings and exemplary embodiments of this invention and not in limitation thereof.

