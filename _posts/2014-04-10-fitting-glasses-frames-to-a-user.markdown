---

title: Fitting glasses frames to a user
abstract: A system for fitting glasses frames to a user is disclosed. The system includes an interface for receiving images of a user's head at different angles. A processor compares user head measurements determined from the images with a database of glasses frame information that includes glasses frame measurements. One or more glasses frames are selected based on the comparison and the selected glasses frames are output.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09254081&OS=09254081&RS=09254081
owner: Ditto Technologies, Inc.
number: 09254081
owner_city: San Francisco
owner_country: US
publication_date: 20140410
---
This application is a continuation of U.S. patent application Ser. No. 13 361 835 entitled FITTING GLASSES FRAMES TO A USER filed Jan. 30 2012 which is incorporated herein by reference for all purposes.

A person seeking to buy glasses usually has to go in person to an optometrist or an eyewear store and try on several glasses frames to see if they fit them. Typically this requires a few hours of browsing through several rows of glasses frames and trying on many pairs of glasses frames most of the time without prior knowledge of whether a particular glasses frame fit or not. Although glasses frames are designed to fit most people not all heads are the same size and therefore not all glasses will fit a person. Additionally glasses frames not only have the functional purpose of correcting the wearer s vision but also an aesthetic purpose which adds other factors to the selection process. What is needed is a way to fit glasses frames to people more efficiently.

The invention can be implemented in numerous ways including as a process an apparatus a system a composition of matter a computer program product embodied on a computer readable storage medium and or a processor such as a processor configured to execute instructions stored on and or provided by a memory coupled to the processor. In this specification these implementations or any other form that the invention may take may be referred to as techniques. In general the order of the steps of disclosed processes may be altered within the scope of the invention. Unless stated otherwise a component such as a processor or a memory described as being configured to perform a task may be implemented as a general component that is temporarily configured to perform the task at a given time or a specific component that is manufactured to perform the task. As used herein the term processor refers to one or more devices circuits and or processing cores configured to process data such as computer program instructions.

A detailed description of one or more embodiments of the invention is provided below along with accompanying figures that illustrate the principles of the invention. The invention is described in connection with such embodiments but the invention is not limited to any embodiment. The scope of the invention is limited only by the claims and the invention encompasses numerous alternatives modifications and equivalents. Numerous specific details are set forth in the following description in order to provide a thorough understanding of the invention. These details are provided for the purpose of example and the invention may be practiced according to the claims without some or all of these specific details. For the purpose of clarity technical material that is known in the technical fields related to the invention has not been described in detail so that the invention is not unnecessarily obscured.

The 3D model generator determines the user s head measurements and a three dimensional 3D model from the video images received of the user s head at different angles. The 3D model may include one or more of the following images video frames of the user s head reference points on the user s head user head measurements and a set of rotation translation scaling matrices. In some embodiments the 3D model contains only reference points associated with the user s head. In some embodiments an initial 3D model is first obtained from a subset of the received video frames images. Then the initial 3D model can be adjusted into an adjusted 3D model using an iterative algorithm incorporating additional information from the received video frames images.

In some embodiments the images are captured at the client computer and sent over the internet to a server to process the images and create a 3D model of the user s head. In some embodiments the client computer can create the 3D model of the user s head and send the 3D model over the internet to select glasses that fit the user. Other embodiments with different tasks being executed by different processors or different locations are also included in the scope of this invention. In some embodiments a scaling reference is captured with the user s head when obtaining video and or images at step of . For example the user is instructed to hold a scaling reference to the user s head and an image is captured of the user with the scaling reference in order to properly scale the user s head measurements and fit glasses frames to the user. In some embodiments the scaling reference is a measurement in standard units of something in the video frame image for example a pupillary distance is entered by the user. In some embodiments the camera is calibrated using the video images captured of the user with the scaling reference.

Comparison engine compares the user head measurements from the 3D model to a database of glasses frame information . A penalty function for each of the measurements that factors in fit is used to compare the glasses frame and the user s head measurements. A detailed description of the penalty function is disclosed later in the specification. One or more glasses frames are selected based on a score computed from the penalty function and set thresholds of the score that comprise different levels of fit.

In some embodiments the outputting of glasses frame information at step of comprises displaying information associated with one or more glasses frames determined to match a user. In some embodiments after the user s head measurements are determined the selected glasses that fit the user are displayed to the user on display . In some embodiments the glasses frame information includes a fit score. In some embodiments the one or more glasses frames determined to match a user are displayed in a list or ordered list associated with the fit score and or one or more other attributes associated the user and or the glasses frames in the list. In some embodiments the at least one of the selected glasses is rendered on an image associated with the user. In some embodiments at least one of the selected glasses is rendered on a 3D interactive model of the user. This allows the user to visualize how the user looks with a selected pair of glasses. In some embodiments this allows the user to more easily decide to purchase a pair of glasses without having to visit a physical store.

The measurements of the glasses frames comprise a portion of the glasses frame information stored in a database. In some embodiments glasses frames are measured and the measurements are stored in a database. In some embodiments a 3D model of each glasses frame is stored in the database. In some embodiments the glasses frames are scanned with a 3D imager and are stored in the database. In some embodiments other glasses frame information is stored in the database including one or more of the following glasses frame measurements identifier name picture manufacturer model number description category type glasses frame material brand part number and price.

Additionally the short video or the image of the user with a scaling reference object is used at least in part to calibrate the camera. By detecting points on the scaling reference object with a known measurement and image characteristics a matrix representing camera intrinsic parameters is determined and used to calibrate the camera. The camera intrinsic parameters are found by correlating points on the scaling reference object between different video frames images of the user with the scaling reference object and calculating the matrix that represents the camera intrinsic parameters using a camera calibration algorithm.

Reference points are obtained from images video frames of the different orientations. In some embodiments a best image video frame for each of the orientations is selected to be used in determining reference points and user head measurements that can be at least in part used to generate the initial 3D model as shown in . For example the best image video frame out of the front orientation is the image video frame in the front facing orientation with the maximum distance between the endpoints of the eyes. For example the image video frame with the largest distance between the right eye and the right ear is determined as the best right profile. Other embodiments for the selection of the best image video frames include machine learning or various heuristics for certain models that best fit a certain orientation.

In some embodiments the initial 3D model comprises an average of reference points in 3D space from a set of users. Using a set of users instead of just the user s face a generic face is used as the initial 3D model. Instead of generating the initial 3D model from the reference points of the user s head the generic 3D model is used as a starting point and then adjusted. In some embodiments the generic 3D model does not include the user s reference points but is from previous users of the system and or a predetermined generic model. In some embodiments the reference points from the user s head are averaged with other users to at least in part generate an initial 3D model.

In some embodiments the penalty functions have a priority. For example the bridge length penalty may have a higher weight than the temple distance penalty or the lens distance penalty. In some embodiments the bridge distance penalty is greater than the temple distance penalty which is greater than the lens distance penalty. P P P

In some embodiments the scale of the y axis of the penalty function determines the weight of the penalty. In some embodiments the penalty functions can be normalized and then multiplied with a constant representing their relative weights. Other combinations of penalty function shapes and scaling can also be used to relatively weight the penalty functions.

For each glasses frame compared to the user s head measurements a score is then calculated using the penalty functions using a linear combination of weighted penalties. For example when evaluating one glasses frame with a 15 mm bridge length if the user s bridge distance is 27 mm then from the penalty function the penalty is high for example 8.5 because the bridge length is much less than the user s bridge distance. The bridge length penalty is then multiplied with its relative weight which is 1 for the bridge length. In this example the temple distance has a relative weight constant that is 0.75 and the lens diameter has a relative weight of 0.5. Likewise the temple distance and lens diameter of the glasses frame is evaluated to the user head measurements using a penalty function. Then each of the weighted penalties are added together to create a score. In some embodiments other distances are factored into the score e.g. lens height compared to eyebrows and cheekbone positions. In some embodiments other factors like feedback mechanisms and user reviews are also factored into the score of the glasses frame to the user. In some embodiments other preferences of the user that are designated by the user e.g. glasses frame material preferred or glasses frame weight are factored into the score and make a qualitative fit score for the user.

The scores for the glasses frames are then sorted or ranked in ascending or descending order. For example the penalties are sorted in ascending order and the glasses frame with the least penalty corresponds to the best fitting. In some embodiments a threshold is set of a score that indicates that the glasses frame does not fit the user. In some embodiments other thresholds are also set for example a threshold for glasses frames that ideally fit the user or a threshold for glasses that have a good fit. The thresholds can be set as a numerical constant or as a relative threshold for example taking the top 25 of results of glasses that represent a good fit. The scores can also be scaled to be more user intuitive like a scale of 1 to 10 to indicate a fit score. Using the scores and thresholds a set of glasses frames are selected into a results list. In some embodiments the results list comprises all glasses in the database that fit the user i.e. all glasses above the does not fit threshold . In some embodiments only the glasses frames that ideally fit the user are selected for the results list. In some embodiments all of the glasses frames are selected and are associated with a fit score for the user.

Although the foregoing embodiments have been described in some detail for purposes of clarity of understanding the invention is not limited to the details provided. There are many alternative ways of implementing the invention. The disclosed embodiments are illustrative and not restrictive.

