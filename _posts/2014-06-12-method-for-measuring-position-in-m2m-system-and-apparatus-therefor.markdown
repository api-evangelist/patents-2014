---

title: Method for measuring position in M2M system and apparatus therefor
abstract: The present invention relates to a method for enabling a machine-to-machine (M2M) gateway to measure the position of an M2M device, and an apparatus therefore, and the method includes the steps of: receiving a request for generating a first resource representing the way of obtaining positional information form a first M2M device; if the generation request contains the information for indicating commonly based positional measurement, determining the device closest to the first M2M device; and setting the positional information of the closest device as the positional information for the first m2M device, wherein if the M2M gateway does not have network topological information, or at least one M2M device connected to the m2M gateway does not have positional information, the M2M topological information, and the at least one M2M device connected to the M2M gateway has positional information, the device having the minimum number of hops from the first M2M device among the at least one M2M device is determined as the closest device, and the first resource represents a data structure capable of being uniquely addressed using address information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09392571&OS=09392571&RS=09392571
owner: LG ELECTRONICS INC.
number: 09392571
owner_city: Seoul
owner_country: KR
publication_date: 20140612
---
This application is the National Phase of PCT International Application No. PCT KR2014 005179 filed on Jun. 12 2014 which claims priority under 35 U.S.C. 119 e to U.S. Provisional Application No. 61 833 937 filed on Jun. 12 2013 U.S. Provisional Application No. 61 900 406 filed on Nov. 6 2013 and U.S. Provisional Application No. 61 926 399 filed on Jan. 13 2014 all of which are hereby expressly incorporated by reference into the present application.

The present invention relates to a Machine to Machine M2M system. More specifically the present invention relates to a method and apparatus for measuring a location of a M2M device in the M2M system.

Recently interest in M2M machine to machine communication is rising. The M2M communication corresponds to communication performed between machines without a human involvement. The M2M communication is also called MTC machine type communication or IoT internet of things communication. A terminal used for the M2M communication is called a M2M device. In general the M2M device has characteristics such as low mobility time tolerant or delay tolerant small data transmission and the like. The M2M device is used in a manner of being connected with a M2M server which stores and manages M2M communication information at the center. If a M2M device is connected according to a communication scheme different from each other the M2M device and the M2M server are connected with each other via a M2M gateway in a section where a communication scheme is changed. In doing so a whole M2M system can be constructed. Such a service as object tracking power metering automatic payment system healthcare service remote controlling and the like can be provided by the M2M system.

An object of the present invention is to provide a method and apparatus for efficiently measuring a location in a machine to machine M2M system.

Another object of the present invention is to provide a method and apparatus for efficiently measuring the location of a M2M device having no location information in a M2M system.

Another object of the present invention is to provide a method and apparatus for efficiently obtaining location information based on sharing in a M2M system.

It is to be understood that technical objects to be achieved by the present invention are not limited to the aforementioned technical objects and other technical objects which are not mentioned herein will be apparent from the following description to one of ordinary skill in the art to which the present invention pertains.

In an aspect of the present invention provided herein is a method for measuring location of a machine to machine M2M device by a M2M gateway the method comprising receiving a create request for a first resource indicating a scheme of obtaining location information from a first M2M device determining a device located closest to the first M2M device when the create request includes information indicating sharing based location measurement and setting location information of the closest device to location information for the first M2M device wherein if the M2M gateway does not have network topology information or if at least one M2M device connected to the M2M gateway does not have location information the M2M gateway is determined to be the closest device if the M2M gateway has the network topology information and the at least one M2M device connected to the M2M gateway has the location information a device having a minimum number of hops from the first M2M device from among the at least one M2M device is determined to be the closest device and the first resource indicates a data structure that is uniquely addressable using address information.

In another aspect of the present invention provided herein is a machine to machine M2M gateway for performing location measurement of a M2M device comprising a network interface unit and a processor wherein the processor controls the network interface unit to receive a create request for a first resource indicating a scheme of obtaining location information from a first M2M device determines a device located closest to the first M2M device when the create request includes indication information of sharing based location measurement and sets location information of the closest device to location information for the first M2M device wherein if the M2M gateway does not have network topology information or if at least one M2M device connected to the M2M gateway does not have location information the M2M gateway is determined to be the closest device if the M2M gateway has the network topology information and the at least one M2M device connected to the M2M gateway has the location information a device having a minimum number of hops spaced apart from the first M2M device from among the at least one M2M device is determined to be the closest device and the first resource indicates a data structure that is uniquely addressable using address information.

Preferably if there are at least two devices each of which has the minimum number of hops a device having the latest location information is determined to be a device located closest to the first M2M device.

Preferably the setting the location information includes storing location information of a device located closest to the first M2M device in a second resource for storing location information of the first M2M device.

Preferably the network topology information indicates not only a list of M2M devices connected to the M2M gateway but also physical connection between the M2M devices connected to the M2M gateway.

Preferably the first M2M device does not have positioning determination capability and network based positioning capability.

According to the present invention it is possible to efficiently measure the location of a M2M device having no location information in a M2M system.

According to the present invention it is possible to efficiently obtain location information based on sharing in a M2M system.

It will be appreciated by persons skilled in the art that the effects that can be achieved with the present invention are not limited to what has been particularly described hereinabove and other advantages of the present invention will be more clearly understood from the following detailed description taken in conjunction with the accompanying drawings.

Reference will now be made in detail to the preferred embodiments of the present invention examples of which are illustrated in the accompanying drawings. The detailed description which will be given below with reference to the accompanying drawings is intended to explain exemplary embodiments of the present invention rather than to show the only embodiments that can be implemented according to the present invention. The following detailed description includes specific details in order to provide a thorough understanding of the present invention. However it will be apparent to those skilled in the art that the present invention may be practiced without such specific details.

In some instances well known structures and devices are omitted in order to avoid obscuring the concepts of the present invention and important functions of the structures and devices are shown in block diagram form. The same reference numbers will be used throughout the drawings to refer to the same or like parts.

In the present invention a machine to machine M2M device refers to a device for M2M communication. The M2M device may be fixed or mobile. The M2M device may transmit and receive user data and or control information to from a M2M server and or a M2M gateway by communicating with the M2M server and or the M2M gateway. The M2M device may be referred to as terminal equipment Mobile Station MS Mobile Terminal MT User Terminal UT Subscriber Station SS wireless device Personal Digital Assistant PDA wireless modem handheld device etc. The M2M server refers to a server for M2M communication and may be implemented as a fixed station or a mobile station. The M2M server may communicate a M2M device and or another M2M server to exchange data and control information. A M2M gateway refers to an apparatus serving as a connection point entering one network to another network when a network to which a M2M device is attached and a network to which a M2M server is attached are different from each other. Further the M2M gateway may perform a function as a M2M device. In addition the M2M gateway may perform functions of aggregating messages message aggregation or receiving one message and forwarding the same message or changed message to M2M devices connected to the M2M gateway message fanout . The term M2M device may be used to refer to a M2M gateway or a M2M server and thus the M2M gateway or the M2M server may be referred to as a M2M device.

In addition in the present specification the term entity may refer to a hardware such as a M2M device a M2M gateway or a M2M server or the term entity may refer to a software component of M2M application layer or M2M common service layer as described below.

The present invention is hereinafter described focusing on a M2M system but the present invention is not limited to the M2M system. For example the present invention may be applied to a system in accordance with a client server or sender responder model in a same or similar manner.

The M2M system according to the ETSI TS defines a common M2M service framework for various M2M applications. A M2M application may indicate a software component implementing such a M2M service solution as e health city automation a connected consumer automotive and the like. The M2M system provides functions commonly necessary for implementing the various M2M applications and the commonly necessary functions can be called a M2M service or a M2M common service. If the M2M common service is used a M2M application can be easily implemented without configuring a basic service framework again for each M2M application.

The M2M service is provided in a form of service capability SC the M2M application approaches to the SC service capability or a set of service capabilities SCs via an open interface and may use a M2M service or function provided by the SC service capability . The SC may provide functions e.g. device management location discovery group management registration security etc constructing a M2M service. An SC entity service capability entity and an SC layer service capability layer may refer to a set of functions for a M2M service that may be used when a M2M application is provided on a service framework.

The SC service capability may be represented as xSC. In this case x can be represented by one of N G and D. The x indicates where the SC service capability exists among a network and or a server a gateway and a device. For instance NSC indicates SC service capability existing in a network and or a server and GSC indicates SC service capability existing in a gateway.

A M2M application may exist in a network a gateway or a device. The M2M application existing in the network or a server in a manner of being directly connected with the server can be called a M2M network application or can be simply called a NA network application . For instance the NA corresponds to software which is implemented in a manner of being directly connected with a server and may be able to perform a role of communicating with a M2M gateway or a M2M device and managing the M2M gateway and the M2M device. The M2M application existing in the device can be called a M2M device application or can be simply called a DA device application . For instance the DA corresponds to software which is implemented in a M2M device and may be able to deliver sensor information and the like to the NA. The M2M application existing in the gateway can be called a M2M gateway application or can be simply called a GA gateway application . For instance the GA may play a role of managing a M2M gateway and may be able to provide a M2M service or function e.g. SC service capability or SCs service capabilities to the DA. The M2M application is a common name for an application entity AE and an application layer.

Referring to a M2M system architecture can be divided into a network domain and a device and gateway domain. The network domain can include functions for M2M system management and functions for network management. The functions for the M2M system management can be performed by a M2M application managing devices existing in the device and gateway domain and M2M SCs service capabilities . The functions for the network management can be performed by a core network and an access network. Hence in the example shown in the core network and the access network provide connection between entities instead of performing a M2M function. M2M communication can be performed between M2M SCs service capabilities in the network domain and the device and gateway domain via the core network and the access network. A M2M application of each domain can give and take a signal or information via M2M SCs service capabilities of each domain.

The access network corresponds to an entity enabling the M2M device and gateway domain to communicate with the core network. Examples of the access network include xDSL digital subscriber line HFC hybrid fiber coax satellite GERAN UTRAN e UTRAN wireless LAN WiMAX and the like.

The core network corresponds to an entity providing such a function as IP internet protocol connection service and network control interconnection roaming and the like. The core network includes a 3GPP 3generation partnership project core network an ETSI TISPAN telecommunications and internet converged services and protocols for advanced networking core network a 3GPP2 core network and the like.

M2M SC service capability provides a M2M common service function CSF capable of being shared by various M2M network applications exposures a M2M service via an open interface and enables M2M applications to use the M2M service. A layer including such M2M SC entities or M2M common service functions may be referred to as a M2M SCL service capability layer .

A M2M application corresponds to an entity operating service logic and the entity capable of using M2M SCs service capabilities via an open interface. A M2M application layer indicates a layer including the M2M application and a related operational logic.

A M2M device corresponds to an entity operating a M2M device application via M2M SCs service capabilities . The M2M device can directly communicate with a M2M server of a network domain and can communicate with the M2M server of the network domain via a M2M gateway. In case of being connected via the M2M gateway the M2M gateway operates like a proxy. The M2M device can include a M2M application and or M2M SCs service capabilities .

A M2M area network provides connectivity between the M2M device and the M2M gateway. In this case a network between the M2M gateway and a M2M server and a network between the M2M device and the M2M gateway may be different from each other. For instance the M2M area network can be implemented using such a PAN personal area network technology as IEEE 802.15.1 Zigbee Bluetooth IETF ROLL ISA 100.11a and such a local network technology as PLC power line communication M BUS wireless M BUS KNX and the like. In a non limiting example the M2M area network may be in a form of physical network connections. In another example the M2M are network may be in a form of logical network connections.

The M2M gateway corresponds to an entity managing a M2M application via M2M SCs service capabilities and the entity providing a service to the M2M application. The M2M gateway performs a role of a proxy between a M2M device and a network domain and can perform a role of providing a service to an ETSI non compliant M2M device. The M2M gateway may correspond to an entity equipped with a function of a gateway among M2M devices. The M2M gateway can include a M2M application and or M2M SCs service capabilities .

The M2M architecture shown in is just an example and a name of each entity may vary. For instance M2M SC service capability may be called a M2M common service function CSF and an SCL service capability layer may be called a common service layer CSL or a common service entity CSE . A M2M application can be called an application entity AE and a M2M application layer may be simply called an application layer. Similarly a name of each domain may vary as well. For instance in one M2M system a network domain may be called an infrastructure domain and a device and gateway domain may be called a field domain.

As shown in a M2M system can be comprehended as a layered structure including a M2M application layer and a M2M SC service capability layer for M2M communication.

Referring to a M2M system can include an application layer a common service layer and an underlying network services layer . As mentioned in the foregoing description the application layer corresponds to a M2M application layer and the common service layer may correspond to a M2M SCL. The underlying network services layer provides such services as device management a location service and device triggering existing in a core network to the common service layer .

Referring to a Mca reference point designates a communication flow between the application entity AE and the common service entity CSE . The Mca reference point enables the AE to use a service provided by the CSE and enables the CSE to communicate with the AE . The Mca reference point may indicate an interface between a M2M application layer and a M2M common service layer or entity .

A Mcc reference point designates a communication flow between common service entities CSEs different from each other. The Mcc reference point enables the CSE to use a service of a different CSE when the CSE provides necessary functions. A service provided by the Mcc reference point may be dependent on the functions supported by the CSE . The Mcc reference point may indicate an interface between M2M common service layers.

A Mcn reference point designates a communication flow between the CSE and the underlying network service entity NSE . In order to make the CSE provide required functions the Mcn reference point enables the CSE to use a service provided by the NSE . The Mcn reference point may indicate an interface between the M2M common service layer and the M2M underlying network layer.

In the example shown in the CSE can provide various common service functions CSFs . For instance the CSE can include at least one selected from the group consisting of an application and service layer management function a communication management and delivery handling function a data management and repository function a device management function a group management function a discovery function a location function a network service exposure service execution and triggering function a registration function a security function a service charging and accounting function a service session management function and a subscription notification function. The CSE indicates an instance of the common service functions and provides a subset of the common service functions capable of being used and shared by M2M applications. The common service functions are schematically explained in the following.

Although an application dedicated node ADN includes at least one or more application entities AEs the application dedicated node ADN may indicate a node not including a common service entity CSE . The ADN can communicate with a middle node MN or an infrastructure node IN via a Mca. The ADN can be called a M2M device having a constrained capability. In this case the M2M device having a constrained capability may correspond to a M2M device not including a common service layer or a common service entity CSE . The M2M device having a constrained capability can be simply called a constrained M2M device.

An application service node ASN includes at least one or more common service entities CSEs and may indicate a node including at least one or more M2M application entities AEs . The ASN can communicate with one middle node or an infrastructure node via a Mcc. The ASN can be called a M2M device.

A middle node MN may indicate a node including one common service entity CSE and M2M application entity AE equal to or greater than 0. The MN can communicate with an infrastructure node IN or a different middle node MN via a Mcc. Or the MN can communicate with the IN MN ASN via the Mcc. Or the MN can communicate with the ADN via the Mca. The MN can be called a M2M gateway.

An infrastructure node IN includes a common service entity CSE and may indicate a node including an application entity AE equal to or greater than 0. The IN can communicate with at least one or more middle nodes MNs and or at least one or more ASNs. Or the IN can communicate with one or more ADNs via a Mca. The IN can be called a M2M server.

In the present specification a node may be referred to as a M2M device and ASN ADN MN IN may be referred to as a M2M device a constrained M2M device a M2M gateway a M2M server respectively.

Referring to case 1 shows an example of communication performed between ADN and IN . ADN may correspond to a M2M device having a constrained capability. In this case since ADN does not include a CSE or a common service layer the ADN can communicate with a CSE of IN via the Mca. In this case since ADN does not include a CSE or a common service layer the ADN is unable to store share data generated by an AE or an application layer to with another entity. Hence in case 1 the data generated by the AE or the application layer of ADN can be stored and shared in the CSE of IN .

Case 2 shows an example of communication performed between ADN and MN . ADN may also correspond to a M2M device having a constrained capability. Hence the ADN can operate similar to an operation of case 1 except a point that ADN is communicating with a CSE of MN . In particular ADN can communicate with the CSE of MN via the Mca. And since ADN does not include a CSE or a common service layer the ADN is unable to store data generated by an AE or an application layer. Hence the data generated by the AE or the application layer of ADN can be stored and shared in the CSE of IN .

Meanwhile in case 2 MN can communicate with IN via MN . In this case MN and MN can communicate with each other and MN and IN can communicate with each other via the Mcc. MN can communicate with IN without passing through MN .

Case 3 shows an example of communication performed between ASN and MN . Unlike case 1 or case 2 since ASN includes a CSE or a common service layer data generated by an AE or an application layer of ASN can be stored in the CSE or the common service layer of ASN . And the AE of ASN can communicate with a CSE of MN via the CSE of ASN .

Case 4 shows an example of communication performed between ASN and MN . Compared to case 3 a CSE of ASN can directly communicate with a CSE of IN without passing through the MN.

IN can be located at an infrastructure domain or a network domain and can include one CSE and an AE equal to or greater than 0. INs can communicate with each other via the Mcc.

In a M2M system an application entity AE a CSE data and the like may be represented as a resource. In the M2M system the resource indicates a uniquely addressable entity using a unique address e.g. URI universal resource identifier or uniform resource identifier . In the M2M system the resource may be represented as a specific data structure and resources may be logically connected with each other. The resource may be managed by and stored to a CSE or common service layer. Hence a M2M device a M2M gateway a CSE or a common service layer of a M2M server may include the resource. However an AE or an application layer of the M2M system is unable to have the resource. For example a resource may be represented as a tree structure. For example a type of a root resource may be denoted by or . A type of resource may be denoted by .

Various resources are defined in a M2M system. M2M applications can perform communication based on a resource which is an instantiation of a resource type. For instance the resources can be used for a M2M service such as registration of an application reading a sensor value and the like. When an instance of a resource type is created unique address information e.g. URI is given to each resource. Similar to a root resource each resource can include an attribute and a child resource. Each resource can be addressed using unique address information. A specific resource type defines child resources and attributes that a resource can have when the resource type is instantiated.

An attribute stores information on a resource itself and may not include a child resource. A child resource can include an attribute of the child resource and a child resource of its own. For instance a child resource includes a remote CSE resource an application entity resource an access control resource a container resource a group resource a subscription resource and the like.

Referring to a Request and Response Scheme may be used for AE to CSE connection or CSE to CSE connection. An originator may transmit a request message to a receiver so as to request the stored resources from the receiver and may receive a response message in response to the request message. Likewise the receiver may receive a request message for requesting resources from the originator and may transmit a response message to the originator upon receiving the request message. In this specification the request message may also be referred to as a request and the response may also be referred to as a response. The request messages to be transmitted from the originator to the receiver may have the following information.

If the corresponding request is successfully carried out the response message may include the following information. The response message may include at least one of the following information or may include only the result value rs .

In the present specification an originator may represent an originating device or CSE or AE in the originating device and a receiver may represent a receiving device or CSE or AE in the receiving device . A device or CSE in the device having a resource may be referred to as a hosting device or hosting CSE .

In an example an originator may use the scheme illustrated in to create a resource on a receiver. In this case the originator may transmit a resource create request message e.g. CREATE request to the receiver. The resource create request message may include the following information.

When the receiver receives the resource create request message the receiver checks whether the originator has been authenticated. Since information e.g. access rights or access control policy about the creation target resource is not yet known to the receiver the receiver may determine whether to create the resource by authenticating the originator. If the originator has been authenticated creation of the resource may be allowed. Further if the resource create request message includes identification information of the creation target resource the receiver verifies whether the identification information of the creation target resource already exists in the resource structure of the receiver. If valid identification information is not provided e.g. the identification information of the resource to be created is duplicated the receiver may allocate identification information of the creation target resource. Likewise if the resource create request message does include identification information of the creation target resource the receiver may allocate identification information of the creation target resource.

When the receiver has successfully created the creation target resource the receiver may transmit a response message including the following information to the originator.

In another example the originator may use the procedure shown in to retrieve information e.g. attribute information about a resource on the receiver. In this case the originator may transmit a retrieve request message e.g. RETRIEVE request to the receiver to retrieve the information e.g. attribute information about the resource on the receiver. The originator may retrieve all or part of attributes in the target resource of the receiver by using the retrieve request message. The retrieve request message may include the following information.

When the receiver receivers the retrieve request message from the originator the receiver verifies whether the retrieve target resource exists with reference to the URI of the retrieve target resource and checks whether the originator has permission for retrieving with respect to the retrieve target resource. If the retrieve target resource does not exist or if the originator does not have proper permission for retrieving the receiver may transmit an error through a response message. On the other hand if the retrieve target resource exists and if the originator has proper permission for retrieving the receiver may transmit a response message. The response message may include the following information.

In still another example the originator may use the procedure shown in to update attribute information in a specific resource on the receiver. In this case the originator may transmit an update request message e.g. UPDATE request to the receiver. The originator may update the attribute information of the specific resource to a new value on the receiver through the update request message. The update request message may include the following information.

When the receiver receives the update request message the receiver verifies whether the update target resource exists with reference to URI of the update target resource and checks whether the originator is authorized to perform modifying the target resource. If the update target resource exists and the originator has been properly authorized the receiver may update the update target resource by the information to be updated e.g. cn . If the target resource has been successfully updated the receiver may transmit a response message to the receiver. The response message may include the following information.

In still another example the originator may use the procedure shown in to delete a specific resource on the receiver. In this case the originator may transmit a delete request message e.g. DELETE request to the receiver. The delete request message may include the following information.

When the receiver receives the delete request message the receiver verifies whether the delete target resource exists with reference to URI of the delete target resource and checks whether the originator is authorized to delete the target resource. If the target resource does not exist or if the originator has not been authorized the receiver may transmit an error through a response message. On the other hand if the target resource exists and if the originator has properly authorized the receiver may transmit a response message including the following information.

Referring to AE application2 registered in a M2M server interoperates with AE application1 registered to a M2M device. For example the M2M device may include a sensor which is a physical device and may store information obtained from the sensor to CSE. The AE registered in IN may read a sensor value stored in the M2M device.

AE application1 on the M2M device may read a value from the sensor and store the read value in the form of a resource e.g. resource into a CSE dcse to which the AE application1 registered. To this end AE application1 on the M2M device must first register to the CSE on the M2M device. As shown in upon completion of registration information related to the registered M2M application may be stored in the form of dcse applications application1 resource. For example if a sensor value of the M2M device is stored by AE application1 in a Container resource under dcse applications application1 resource AE application2 having registered in the IN Infrastructure Node may access the corresponding value. In addition in order for the AE application2 to access the M2M device the AE application2 must register to the CSE ncse of the IN Infrastructure Node . In the same manner as the AE application1 registering to the CSE dsce information about AE application2 is stored in ncse applications application2 resource. In addition AE application1 may communicate through a CSE ncse and a CSE dcse in the middle instead of directly communicating with the AE application2 . For this purpose CSE ncse and CSE dcse must register to each other. If CSE dcse register to CSE ncse dsce related information e.g. link may be stored under ncse cses dcse resource. As a result AE application2 may obtain a path through which the AE application2 can access information of the AE application1 such that the AE application2 can read the sensor value through the corresponding path.

A M2M system e.g. one M2M may be composed of an overlay network structure. The overlay network may conceptually indicate a virtual network constructed on a physical network. A node within the overlay network structure may be connected with a virtual or logical link. For example as described above ADN ASN MN IN etc. may be mapped to the node or a M2M device constrained M2M device M2M gateway M2M server may be mapped to the node in oneM2M. Each link may pass through many physical links within the actual physical network and may not consider a physical link for communication or for actual operation.

For example referring to a network may be seen as a physically four hop connection in the physical network while the network may be seen as a physically two hop connection in the overlay network. The term hop may represent a node to node connection in a network. Information representing a connection or network structure between nodes as a list of nodes may be referred to as topology information.

The reason why the actual physical network node is different from the overlay network node i.e. overlay node is as follows.

1. A node may be selected due to a functional difference. For example a device configured to perform a special function in a physical network may be selected as an overlay node. Each device may be selected as a physical network node.

2. There may be a difference in upper nodes due to a difference in connected networks. For example referring to a physical network may be connected to Bluetooth Wi Fi or WAN Wide Area Network and there may be a gateway per each network. For example devices A B C may be physical nodes in underlying or physical network in case of a Bluetooth network devices C D E may be physical nodes in underlying or physical network in case of Wi Fi network and devices E F G may be physical nodes in underlying or physical network in case of WAN. However nodes B D F other than gateways may not be seen in the overlay network and gateways A C E G may be seen as nodes.

Meanwhile the M2M common service layer may retrieve location information through a location server or may retrieve location information through an application and store the retrieved location information. An entity that is present in a network of a network provider that owns a mobile communication network provides assistance information needed to calculate the location of a user equipment UE or directly participates in location calculation may refer to as a location server. The operation for retrieving location information through an application may indicate an operation by which when a node including an AE such as a M2M device ASN or constrained M2M device ADN obtains the location of the node using a scheme which is not standardized e.g. a scheme other than delivering information in Mcc Mca or Mcn Reference Point the node location is stored in a resource. For example location information internally obtained through a GPS module may be stored in a resource.

If the M2M device attempting to obtain the location information is a constrained M2M device having limited resource or constrained capabilities the following problems may occur.

Therefore if a specific device is not connected to the location server and if the specific device is unable to obtain the location information through the application the corresponding device may not obtain its own location information. For example it is assumed that there is a sphygmomanometer node for providing the healthcare service. In this case the corresponding sphygmomanometer need not be separately connected to the location server so as to reduce production costs and may not have a separate device such as GPS or logical algorithm for location acquisition. However assuming that the location information of the sphygmomanometer can be recognized the service extensibility can be provided in an emergency situation.

Therefore the present invention provides a method for determining the location information of a constrained M2M device when the M2M device of the M2M system cannot obtain its own location information.

First the present invention proposes a resource structure for obtaining the location information in the M2M system. The present invention proposes not only a resource for storing the scheme of obtaining location information of a target UE but also a resource for storing the location information of a target UE. The target UE may represent a node or a device which desires to obtain the location information.

The resource may represent the scheme for obtaining and managing geographical location information of the M2M device. The resource does not store the location information therein and may be used as a resource storing a scheme of storing and managing the location information. The actual location information may be stored in an resource which is a child resource of a resource. The resource may include attribute information e.g. locationID which contains URI of the resource as a linkage. The location common service function LOC CSF see may obtain the location information on the basis of attributes defined below the resource and may then store the location information in the target .

Table 1 exemplarily shows attributes associated with resource. In Table 1 R W may indicate read write R W permission of the corresponding attribute and may be one of READ WRITE RW READ ONLY RO and WRITE ONLY WO . In addition multiplicity of Table 1 may represent how many times the corresponding attribute can occur in the resource. Therefore if multiplicity is set to 1 only one attribute is mandatorily contained in the resource. If multiplicity is set to 1 . . . n one or more attributes are mandatorily contained in the resource. If multiplicity is set to 0 . . . 1 one or fewer attributes may be optionally included. If multiplicity is set to 0 . . . n one or more attributes may be optionally included. Table 1 is only exemplary and attributes of the resource attribute may be different from those of Table 1 as necessary.

The resource may be handled using the request response scheme described in . Therefore in order to create the resource in a hosting CSE the AE may transmit a create request message to the hosting CSE. In order to retrieve the resource the AE may transmit a retrieve request message to the hosting CSE. In order to update the resource the AE may transmit an update request message to the hosting CSE. In order to delete the resource the AE may transmit the delete request message to the hosting CSE.

A response message to the request for creating the resource may include representation of the created resource and attribute values shown in Table 1 are configured in the corresponding representation.

The resource may represent a container for a data instance. This resource may be used to share information between different entities and may also be used to track data. The container resource may include attribute information and a child resource.

Table 2 exemplarily shows attributes associated with the resource. In Table 2 R W may represent read write R W permission of the corresponding attribute and may be one of READ WRITE RW READ ONLY RO and WRITE ONLY WO . In addition multiplicity of Table 2 may represent how many times the corresponding attribute can occur in the resource. Table 2 is only exemplary and attributes of the resource may be different from those of Table 2 as necessary.

The resource may include specific information of a M2M device that may be used by other M2M operations. For example CMDH CSF may determine when the request message will be sent to a target CSE on the basis of the reachability schedule of the target CSE. The resource may include information such as network topology of several devices connected to the M2M gateway when the device represented by the reachability schedule context information e.g. memory and storage and the node resource is a M2M gateway. The resource may include information of a specific M2M device or node and may include additional information for supporting the M2M operation. Specific information of a node such as a memory and a storage unit may be obtained by a legacy device management technology e.g. Open Mobile Alliance OMA Device Management DM etc. or other methods e.g. Java Native Interface JNI .

The resource location may be changed according to a device type. For example the resource for a M2M device ASN may be located below a root e.g. of a local CSE. In addition for example the resource for a constrained M2M device ADN may be located below the resource of the hosting CSE. In addition for example the resource for a M2M gateway MN may be located below the root e.g. of the local CSE.

Table 3 exemplarily illustrates child resources that the resource may have. In Table 3 multiplicity of Table 3 may represent how many times the corresponding resource can occur in the resource. Table 3 is only exemplary and attributes of the resource may be different from those of Table 3 as necessary.

The resource is a child resource of the resource and may be defined when the device having the resource is a M2M gateway MN . The network topology information may represent a list of M2M devices ASN or ADN connected to the M2M gateway MN and may also describe a physical relation or underlying relation between nodes of the M2M area network. The network topology information may include configuration information of the physically connected M2M area network. The network topology information may be referred to as topology information. The resource may be used to store network topology information.

Referring to the relation between nodes is exemplarily shown in terms of an overlay network or a physical network. For example the overlay network may be a one M2M network and the physical network may be a ZigBee network. From the viewpoint of the overlay network respective ADNs e.g. ADN  to ADN  may be connected to a MN through the Mca reference point irrespective of the physical network structure. Therefore from the viewpoint of the overlay network each ADN and each MN may be interconnected through a single hop. In contrast from the viewpoint of the physical network respective ADNs e.g. ADN  to ADN  may be connected in the form of a mesh. Therefore from the viewpoint of the physical network ADN  may be connected to MN through 2 hops and ADN  may be connected to MN through 4 hops. The network topology information may include configuration information of the physical network and may represent a connection relationship between actual nodes. Therefore a resource may include information for describing the relationship between nodes in terms of the physical network.

The method for obtaining and managing location information of a M2M device in a M2M system will hereinafter be described.

The location common service function LOC CSF may allow a plurality of M2M AEs to obtain geographical location information of the M2M nodes e.g. ASN MN so as to implement the location based service. This location information may be requested by the M2M AEs present in a local node or a remote node. LOC CSF may obtain and manage geographical location information upon receiving a request from the M2M AEs present in the local node or the remote node. LOC CSF may interact with at least one of the location server of the underlying network the GPS module of the M2M device and information for inferring locations stored in other M2M nodes.

In order to update the location information the M2M AE may configure the resource attributes e.g. locationSource attribute or locationUpdatePeriod attribute stored in CSE. Based on the defined attributes LOC CSF may update the location information using one of the defined interactions. LOC CSF may request the M2M nodes to share report geographical location information of the M2M nodes or geographical location information of other M2M nodes with a plurality of M2M applications. In addition LOC CSF may provide means for protecting confidentiality of geographical location information.

The present invention proposes a method for obtaining the location information of a target UE by storing or changing information in a resource e.g. resource for storing a scheme for obtaining UE location information or in a resource e.g. resource for storing location information of the target UE. For example the present invention defines a method for obtaining the location information of a target UE by creating the resource so that the obtained location information is stored in the resource or resource which is a child resource of the resource of CSE according to the defined method for obtaining the UE location information.

If an AE desires to obtain location information of a target UE the AE may create the resource in a CSE connected to the AE. In order to create the resource the originator AE may request creating the resource including associated attributes and an address of a root resource e.g. of a hosting CSE See and the description related thereto . In addition for example the create request may include at least one of attributes shown in Table 1.

If the receiver e.g. the hosting CSE receives the create request the receiver may perform the following operations.

A method for more precisely determining the UE location on the basis of network topology information of a M2M area network the actual underlying network connected to a gateway according to the sharing based scheme will hereinafter be described in detail.

If an MN hosting CSE has the topology information of the underlying network in the MN the MN already knows the physical relationship or topology information between nodes connected to the MN. Therefore if the constrained M2M device ADN or other application requests creation of the resource and configures the locationSource attribute as the sharing based scheme MN may search for the closest node having the location information on the basis of topology information e.g. resource owned by the MN according to the above request and may configure the location of the detected node as the ADN location. The MN may determine which node has location information on the basis of information of resources owned by the MN.

In the sharing based scheme the closest node may be determined to be a node having a minimum number of hops from the originator location. When a new node is attached to a node of the existing network in a network having a tree structure it may be preferable that the new node be attached to the closest node or the stable node having superior capability from among plural nodes. For example it may be preferable that the new node be connected to a high RSS Received Signal Strength node. Therefore the network topology information may be preferably used as criteria for indicating proximity between nodes. Therefore the node having a minimum number of hops on the basis of topology information of the physical network may be determined to be the closest node.

Referring to ADN  may be physically registered as a child node of ADN  and ADN  may request location information according to the sharing based scheme. In this case the MN may find a node having a minimum number of hops from AND  on the basis of the network topology information of the resource allocated to the MN. Assuming that ADN  and ADN  are nodes each of which has location information ADN  may be spaced apart from ADN  by 3 hops and ADN  may be spaced apart from ADN  by 2 hops. Accordingly the closest node in this example may be set to ADN .

It may be impossible to find the closest node through a minimum number of hops. For example if the same two or more nodes having the same minimum number of hops are present it may be difficult to determine which one of two or more nodes is the closest node. In this case additional conditions other than a minimum number of hops may be required. In the present invention a node having the latest information may be selected as a node i.e. the closest node sharing the location information on the basis of a location information acquisition time allocated to the location information of the corresponding UE the corresponding location information may be allocated to a resource such as in the overlay region . Since the location information obtained on the basis of the sharing based scheme may not be correct location information of the corresponding UE and also the UE sharing the location information may have mobility it may be preferable to select the node having the latest location information.

Referring to ADN  and ADN  may have the same number of hops spaced apart from ADN  on the basis of a minimum number of hops. Accordingly the update time of the location information may be determined as the additional criteria for selecting the closest node. In it is assumed that ADN  has updated location information before 4800 seconds and ADN  has updated location information before 1200 seconds. Therefore ADN  having the latest location information may be determined to be the closest node and the location information of ADN  may be shared configured as the location information of ADN .

If the closest node is decided a URI including the location information of the closest node may be added as linkage information to the resource including location information of a target UE and the location information of the closest node may be directly used as the location information of the target UE. If it is impossible for a M2M gateway to find the closest node when the location information is updated the location information of the M2M gateway may be established as the location information of the target UE. Updating the location information may be carried out using the update operation.

Generally since a M2M gateway has a limited connection range the connected UE may have regional proximity. For example assuming that the connection range of the gateway is a maximum range of 30 m the UE is basically contained in the radius of 30 m from the gateway location. In this case it is assumed that the gateway can calculate its own location through the location server or the application.

If the gateway location is shared to a UE and used by the UE the location information including the above mentioned error range may be provided. In addition if the corresponding error range is provided by a service layer to an application the application may determine whether to use the corresponding information location information error range on the basis of the corresponding information. Since the location information accuracies required by the location based service application LBS application are different the corresponding function can be provided.

Schemes for sharing a location of a M2M gateway will hereinafter be described. It is assumed that a M2M device does not have the function for obtaining location information based on a location server or based on an application and it is also assumed that the M2M gateway has the function for obtaining location information. In addition it is assumed that the M2M gateway and the M2M device are present in the same area network or it is also assumed that two M2M devices are also present in the same area network when the location information is communicated between the M2M devices.

In this case since the location of the M2M gateway is unchanged the location of the M2M gateway is provisioned. The provisioning scheme may include a scheme of explicitly reporting location information of the M2M gateway or a scheme of providing a URI regarding location information of the M2M gateway.

In accordance with the scheme of explicitly reporting the location information the M2M gateway may provide location information for example in the form of latitude and longitude or 3D structure. In addition the following additional attribute may be provided along with the location information.

Through the corresponding information the M2M device may perform precise calculation on the basis of RSS Received Signal Strength from the M2M gateway.

If the M2M gateway is a mobile type the location of the M2M gateway may be changed and thus the location information URI of the M2M gateway may be linked to URI of a location information resource of the target device. In this case the location of the target device may be identical to the location of the M2M gateway. In addition if the M2M device is disconnected with the corresponding M2M gateway the M2M device may delete the corresponding location information.

For example assuming that the locationSource attribute of the resource is set to sharing based and an AE is disconnected with a MN CSE M2M device may request deletion of the resource. In this case the M2M device may transmit a request message for deleting the resource to the M2M gateway.

If the receiver e.g. M2M gateway receives the above request message the receiver may check whether the originator e.g. device has the DELETE authority for the resource. If the check has been successfully performed CSE may delete the resource from the repository and may transmit the appropriate response to the originator.

Since the location information of the closest node or gateway MN has already been stored in the resource the hosting CSE may store the resource URI in the resource.

The hosting CSE may check or investigate the locationUpdatePeriod attribute. If the locationUpdatePeriod attribute is higher than zero 0 the hosting CSE may perform the procedure according to defined attributes and store the execution result in the resource. However if the locationUpdatePeriod attribute is set to zero 0 or is not set the hosting CSE may perform the positioning procedure location measurement procedure only when the resource is retrieved at a later time.

Referring to if the M2M device requests location information from the M2M gateway the M2M gateway may determine the presence or absence of location information in the area network. Since there is no device having location information the M2M gateway may transmit its own location information to the M2M device. In this case the location information may be denoted by a combination of latitude longitude . In addition the location information may include uncertainty attribute information. In the location information of the M2M gateway may be denoted by and the coverage is 30 m such that the location information may be set to location uncertainty 30 and then transmitted to the M2M device.

Referring to after the M2M device receives the location information Location uncertainty 30 the M2M device may determine that the M2M device is located at the location of the M2M gateway. However the actual location of the M2M gateway may be different from the location information and this difference may be estimated through uncertainty information.

Referring to M2M gateway may perform the hosting CSE operations described with reference to the method for providing the location information acquisition scheme on the basis of the resource. M2M device may serve as the originator for requesting the location information.

In step S M2M gateway may perform the location acquisition procedure and may obtain the location information of M2M device . M2M gateway may store the location information of M2M device in the resource. The resource may have the structure exemplarily shown in or may have attributes shown in Table 2.

In step S M2M device may transmit a request to M2M gateway for creating the resource indicating the location information acquisition scheme. The above mentioned create request may include specific information for indicating the shared based positioning e.g. locationSource attribute configured as sharing based .

In step S M2M gateway may create the resource. The resource may have the structure exemplarily shown in and may include at least one of the attributes shown in Table 1.

In step S M2M gateway may create the resource and a child resource thereof. The resource may have the structure exemplarily shown in and may include at least one of the resources shown in Table 3.

In step S M2M gateway may construct the network topology information. M2M gateway may obtain a list of M2M devices connected to M2M gateway and may obtain information regarding the physical connection or the underlying connection between M2M devices in the M2M area network. The network topology information may indicate the list of M2M devices connected to M2M gateway or may indicate the physical connection or the physical connection relationship between M2M devices in the M2M area network. Step S and or Step S may also be performed before step S. The network topology information may be stored in the resource created in step S.

In step S M2M gateway may search for the M2M device located closest to M2M device on the basis of topology information and location information.

If M2M gateway does not have topology information or cannot find the closest M2M device the location information of M2M gateway may be stored as the location information of M2M device . In this case M2M gateway may store its own location information as the location information of M2M device .

In contrast if M2M gateway has topology information and can find a device having a minimum number of hops spaced apart from M2M device from among a plurality of devices having location information based on the topology information the device having a minimum number of hops may be determined to be the closest device. In this case M2M gateway may store the location information of the M2M device determined to be the closest device as the location information of M2M device . In addition assuming that several devices having the same minimum number of hops are decided the device having the latest location information may be determined to be the closest device.

The example of is only exemplary and some steps may be omitted or additional steps may be added according to the implementation example. In addition the embodiments proposed by the present invention are combined so that a new embodiment can be proposed and only some constituent elements of the embodiments are combined so that a new embodiment can be formed as necessary.

The transmitting device and the receiving device respectively include radio frequency RF units for transmitting and receiving radio signals carrying information data signals and or messages memories for storing information related to communication in a wireless communication system and processors operatively connected to the RF units and the memories and configured to control the memories and or the RF units so as to perform at least one of the above described embodiments of the present invention.

The memories may store programs for processing and control of the processors and may temporarily storing input output information. The memories may be used as buffers.

The processors control the overall operation of various modules in the transmitting device or the receiving device . The processors may perform various control functions to implement the present invention. The processors may be controllers microcontrollers microprocessors or microcomputers. The processors may be implemented by hardware firmware software or a combination thereof. In a hardware configuration Application Specific Integrated Circuits ASICs Digital Signal Processors DSPs Digital Signal Processing Devices DSPDs Programmable Logic Devices PLDs or Field Programmable Gate Arrays FPGAs may be included in the processors . If the present invention is implemented using firmware or software firmware or software may be configured to include modules procedures functions etc. performing the functions or operations of the present invention. Firmware or software configured to perform the present invention may be included in the processors or stored in the memories so as to be driven by the processors .

The processor of the transmitting device is scheduled from the processor or a scheduler connected to the processor and codes and modulates signals and or data to be transmitted to the outside. The coded and modulated signals and or data are transmitted to the RF unit . A signal processing process of the receiving device is the reverse of the signal processing process of the transmitting device . Under the control of the processor the RF unit of the receiving device receives RF signals transmitted by the transmitting device . The processor decodes and demodulates the radio signals received through the receive antennas and restores data that the transmitting device wishes to transmit.

The RF units include one or more antennas. An antenna performs a function of transmitting signals processed by the RF units to the exterior or receiving radio signals from the exterior to transfer the radio signals to the RF units . illustrates that the transmitting device and the receiving device communicate through RF units respectively but the present invention is not limited thereto. In the present invention the transmitting device and the receiving device may communicate through a wired network. In this case the RF unit may be replaced with a network interface unit NIU .

The embodiments of the present invention described above are combinations of elements and features of the present invention. The elements or features may be considered selective unless otherwise mentioned. Each element or feature may be practiced without being combined with other elements or features. Further an embodiment of the present invention may be constructed by combining parts of the elements and or features. Operation orders described in embodiments of the present invention may be rearranged. Some constructions of any one embodiment may be included in another embodiment and may be replaced with corresponding constructions of another embodiment. It is obvious to those skilled in the art that claims that are not explicitly cited in each other in the appended claims may be presented in combination as an embodiment of the present invention or included as a new claim by a subsequent amendment after the application is filed.

Specific operations to be conducted by the base station in the present invention may also be conducted by an upper node of the base station as necessary. In other words it will be obvious to those skilled in the art that various operations for enabling the base station to communicate with the terminal in a network composed of several network nodes including the base station will be conducted by the base station or other network nodes other than the base station. The base station may be referred to as a fixed station a node B NB an evolved node B eNB an access point AP etc. A terminal may be referred to as a user equipment UE a mobile station MS a mobile subscriber station MSS etc.

The embodiments of the present invention may be implemented by various means for example hardware firmware software or a combination thereof. In a hardware implementation an embodiment of the present invention may be implemented by one or more application specific integrated circuits ASICs digital signal processors DSPs digital signal processing devices DSDPs programmable logic devices PLDs field programmable gate arrays FPGAs processors controllers microcontrollers microprocessors etc.

In a firmware or software implementation an embodiment of the present invention may be implemented in the form of a module a procedure a function etc. Software code may be stored in a memory unit and executed by a processor. The memory unit is located at the interior or exterior of the processor and may transmit and receive data to and from the processor via various known means.

It will be apparent to those skilled in the art that various modifications and variations can be made in the present invention without departing from the spirit or scope of the invention. Thus it is intended that the present invention cover the modifications and variations of this invention provided they come within the scope of the appended claims and their equivalents.

The present invention is applicable to a communication apparatus such as a terminal a server a gateway etc.

