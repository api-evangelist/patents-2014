---

title: Registration of a roaming UE onto a preferred VPLMN using airplane mode of operation
abstract: Disclosed is a method in which a User Equipment will be able to register near instantly onto an available preferred roaming network, when the cellular radio of the UE is powered on. The method disclosed comprises of a roaming destination determined from a mobile boarding pass or input via User Interface of an Application installed on the Mobile Equipment or via UI on the Operating System of the ME, where the Application or OS compares the roaming destination with a PLMN list to obtain the preferred PLMN ID of that roaming destination which is selected and updated to specific files within the UICC. LTE and/or UMTS band information can also be obtained for the roaming destination and an MRU database updated to include the LTE and/or UMTS band information. A specific REFRESH command that is sent from the UICC to the ME prior to turning off the cellular radio of the UE, is used in the disclosed method to achieve near instant or instant registration onto the preferred visited PLMN when the cellular radio of the UE is turned on upon arrival at roaming destination. Alternatively, the ME can send a reset signal to the UICC when turning on the cellular radio of the UE upon arrival at the roaming destination.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09565547&OS=09565547&RS=09565547
owner: TELUS Communications Company
number: 09565547
owner_city: Edmonton
owner_country: CA
publication_date: 20140519
---
Network Selection Procedure of a Mobile Equipment through interaction via comparisons updates and signals to the UICC and commands from the UICC.

The majority of wireless networks around the world today are 3GPP standard based supporting GSM and or UMTS and or LTE Radio Access Technologies. A 3GPP based User Equipment which consists of a Mobile Equipment containing a UICC provisioned by the home Public Land Mobile Network operator is able to distinguish one PLMN operator from another based on the unique PLMN ID consisting solely of the MCCMNC broadcasted by each PLMN operator and will be able to register onto its home PLMN if available. If the User Equipment is no longer able to detect the home PLMN ID and is able to detect the PLMN ID of another PLMN operator the UE will be able to register successfully onto a visited PLMN provided a roaming agreement exists between the home PLMN operator and the VPLMN operator.

Many people typically travel by airplane from their home country to a foreign country and bring their UE in order to contact family friends or colleagues back home or in the foreign country they are travelling to upon arrival. Since almost all Airline operators require UEs to be turned off prior to takeoff many ME manufacturers build into their ME a feature called Airplane Mode which allows the cellular radio of the ME to be turned off when Airplane Mode is enabled turned on in order to comply with Airline rules and regulations. While Airplane Mode is enabled turned on the rest of the ME is still able to function as normal in order to allow the person travelling to enjoy listening to music watching videos reading eBooks or using any other functionality of their ME which does not require use of the cellular radio during their travel while in the airplane. Once the airplane has landed safely Airplane Mode is allowed to be disabled turned off which turns the cellular radio back on thus allowing the UE to attempt registration on the available VPLMN s .

In addition to Airplane Mode all ME manufacturers are required by 3GPP standard to implement both Automatic and Manual Network Selection modes on their MEs. MEs are typically set to Automatic Network Selection mode by default and the majority of users typically leave the ME set to this mode. Therefore when a roaming UE s cellular radio is turned on in a foreign country with multiple VPLMNs available for which registration is possible due to bilateral network agreements a UE in Automatic Network Selection mode follows the related Network Selection Procedures outlined in 3GPP TS 23.122 clause 4.4.3.1 and 4.4.3.3.

However as per 3GPP standard the UE is required to attempt registration on the last registered PLMN as indicated in the EF LOCI and EF EPSLOCI files in the UICC. Should the last registered PLMN not be available which is typically the case when travelling to a foreign country the UE in Automatic Network Selection mode must follow the related Network Selection Procedures outlined specified above.

Depending on how many VPLMNs are available how many Access Technologies are supported on the ME and on each VPLMNs as well as how many frequencies are supported on the ME and on each VPLMNs the time it takes for the UE to register onto a VPLMN can be significantly long where some UEs can take over 3 minutes thus potentially creating a poor user experience.

United States Pre Grant Publication No. 20100099403 the 403 application attempts to resolve the problem of long registration through two of its claims related to storing the PLMN ID in the LOCI of the SIM. However the inventor considers that the processes disclosed in the 403 application will still result in a relatively long register time for the ME.

Canadian Patent No. 2 724 871 also makes reference to updating EF LOCI in the USIM ADF of the UICC to provide instant registration. However the time it takes to for first time registration onto the non preferred VPLMN in Canadian Patent No. 2 724 871 can still be significantly long.

What is disclosed overcomes the limitations described above by using an unprecedented combination of techniques and procedures outlined in the disclosed claims to achieve instant first time registration within 30 seconds onto an available visited preferred PLMN when Airplane Mode is turned off.

In an embodiment there is disclosed a method of Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN comprising overwriting an entry in one or more elementary files containing location information in the UICC with identification for the preferred VPLMN network. The method may further comprise receiving a Mobile Country Code MCC comparing the received MCC with MCCs of PLMN IDs stored in a PLMN list and selecting the preferred VPLMN by selecting a highest priority PLMN ID in the PLMN list whose MCC is the first instance that matches the MCC received via the User Interface of the ME.

In various embodiments there may be provided one or more of the MCC is received via a user interface on the ME the MCC is received by obtaining a destination country or city from a mobile boarding pass and determining an MCC corresponding to the destination country or city obtaining LTE and or UMTS band information associated with the received MCC and updating an MRU database in the ME with the LTE and or UMTS band information the one or more elementary files comprise EF LOCI the one or more elementary files comprise EF EPSLOCI EF LOCI and EF EPSLOCI are updated by overwriting PLMN ID content of EF LOCI and EF EPSLOCI with the selected highest priority PLMN ID while keeping existing bytes intact and last byte set to updated the PLMN ID content of EF LOCI is bytes 5 6 and 7 of File ID 6F7E and the PLMN ID content of EF EPSLOCI is bytes 3 4 5 13 14 and 15 of File ID 6FE3 and setting the last byte to updated is setting the last byte to 00 the PLMN list is the EF OPLMNwAcT file or a file stored in the memory of the ME or Application installed on the ME REFRESH File Change Notification including the one or more elementary files in the REFRESH File List is sent from a UICC to the ME once updating the one or more elementary files is completed a reset signal comprising of either Activation and Warm Reset or Activation and Cold Reset as per ISO IEC 7816 3 is sent from the ME to the UICC whenever the cellular radio of the ME is turned on by toggling Airplane Mode OFF Registration onto a preferred VPLMN is accomplished by turning the cellular radio of the ME off by toggling Airplane Mode ON in the current registered PLMN then turning the cellular radio of the ME on by toggling Airplane Mode OFF in the roaming destination where the preferred VPLMN is available Registration onto the available preferred VPLMN occurs within 30 seconds measured from the time when Airplane Mode is turned OFF the method steps are carried out by an application installed on the ME or the OS of the ME.

There is further disclosed Mobile Equipment configured to carry out the method steps and a method of causing Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN comprising sending instructions from either the UICC to the ME or the ME to the UICC to cause the UE to carry out the method steps and non transitory memory medium containing software instructions which when carried out on a ME cause the UE to carry out the method steps.

Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN can be implemented using either an Application installed on the ME or by implementing the disclosed method within the OS of the ME itself.

For implementing the disclosed embodiments by use of an Application often referred to as an App this would typically be done by an App Developer. The majority of Apps today are developed primarily for Apple iOS Google Android BlackBerry OS and Windows Phone Platforms though Apps can also be developed for other less known OS Platforms. Once developed the App is hosted and distributed on a dedicated server for each OS Platform such as Apple App Store Google Play Store BlackBerry World or Windows Phone Store from which the user can download onto the ME. Once downloaded the App is then either automatically installed onto the ME or manually installed by the user onto the ME.

For implementing the disclosed embodiments within the OS of the ME itself this would typically be done by the manufacturer of the ME or the vendor who developed and supplied the OS of the ME to the manufacturer.

A UICC card a non transitory storage medium may also be configured to include software for carrying out the method and may be provided with the ME when the ME is provided to a customer. A non transitory medium containing the instructions for a UICC or ME to carry out Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN may include any computer memory including a computer storage device or devices managed or owned by an app vendor or distributor.

The UE could also download software over a telecommunications network that includes instructions to cause the ME to carry out Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN. The software could be delivered before or after the UE started roaming and then used while roaming.

In one embodiment of Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN is presented in a Flow Diagram where a MCC is selected using a User Interface and REFRESH File Change Notification is used which can be implemented on either an Application or within the OS of the ME itself.

In the Flow Diagram of Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN is typically started by launching the installed Application on the ME or by navigating within the Menu settings of the OS on the ME itself both of which would display a list of countries on their respective User Interface as depicted in Process Box A.

The list of countries presented in the UI is retrieved from a database which is either built into the Application or stored in the memory of the ME which contains the list of countries and their associated MCCs as depicted in Database Box B.

The user would then select one of the countries displayed in the UI as depicted in User Input Box C based on which country the user will be visiting.

Once a country is selected the Application or OS on the ME begins reading the PLMN IDs from the PLMN List in the UICC which is typically the EF OPLMNwAcT and parses each entry as depicted by Process Box D.

The Application or OS on the ME then checks for the first MNC instance from the parsed PLMN ID entries matching the selected MCC as depicted in the Process Box E.

The Application or OS on the ME then performs a decision procedure as depicted in Decision Box F based on whether a first matching MNC instance for the selected MCC was found in Process Box E.

If an MNC for the selected MCC is available then both EF LOCI and EF EPSLOCI values are read from the UICC and bytes 5 6 and 7 of EF LOCI and bytes 3 4 5 13 14 and 15 of EF EPSLOCI are updated with the PLMN ID containing the MCC of the selected country and first matching MNC instance for the selected MCC as depicted in Process Box G a.

It should be noted as part of Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN that all other bytes in the respective EFs shall remain intact as well the last byte shall remain in updated status i.e. 00 which is typically the case if UE was successfully last registered on their HPLMN prior to travelling. Keeping all other byte values intact and more importantly keeping last byte set to 00 is necessary for instant or near instant registration to occur.

Updating EF LOCI as disclosed allows for instant or near instant registration on available preferred VPLMNs supporting UMTS and GSM Radio Access Technologies while updating EF EPSLOCI using as disclosed allows for instant or near instant registration on available preferred VPLMNs supporting LTE Radio Access Technology. This is of course assuming that a roaming agreement between the HPLMN operator and VPLMN operator is in place for all supporting Radio Access Technologies and frequencies on both the ME and the VPLMN.

However if an MNC is not available then PLMN IDs are read from fallback PLMN List contained within the Application or the memory of the ME as depicted in Process Box G b.

Once a PLMN ID whose MCC matches the selected MCC is found then both EF LOCI and EF EPSLOCI values are read from the UICC and bytes 5 6 and 7 of EF LOCI and bytes 3 4 5 13 14 and 15 of EF EPSLOCI are updated with the PLMN ID from the fallback PLMN List.

In order to accomplish the above procedures in the method disclosed involving reading and updating EFs on the UICC the UICC must support GPSEAC or any other ACF supported by the OS on the ME. In addition the OS on the ME must have support to access the UICC or APIs to enable third party Applications to access the UICC for example SEEK for Android OpenMobile API though it may be possible for an OS developer to implement a proprietary solution to read and write to EFs on the UICC.

Once the update of EF LOCI and EF EPSLOCI with the preferred PLMN ID of the selected country is complete as depicted in Process Box H REFRESH File Change Notification containing EF LOCI and EF EPSLOCI in the REFRESH File List is sent from the UICC to the ME advising the ME that the contents of these respective EFs have been changed and that any image within the ME s internal memory needs to be refreshed meaning that previously stored LOCI and EPSLOCI data in the internal memory of the ME needs to be replaced with new LOCI and EPSLOCI data containing the preferred PLMN ID of the selected country. This is performed in accordance to ETSI TS 102 223.

The mechanism by which REFRESH File Change Notification is sent from the UICC to the ME can be accomplished using a SIM Toolkit App within the UICC. The SIM Toolkit App on the UICC monitors any update to a specific file in the EF performed by the Application on the ME or OS of the ME or waits for an APDU command sent by the Application on the ME or OS of the ME. Once an update occurs or an APDU command is received the SIM Toolkit App sends the REFRESH File Change Notification command with EF LOCI and EF EPSLOCI in the REFRESH File List to the ME from the UICC.

In User Input Box I the user then turns off the cellular radio by turning Airplane Mode ON while still in the current destination. Once the user arrives in the selected country user will then turn Airplane Mode OFF which turns the cellular radio back on.

In Process Box J once the cellular radio is turned on this triggers the ME to perform an Automatic Mode Network Selection procedure as defined in 3GPP TS 23.122. Since the LOCI and EPSLOCI data in the internal memory of the ME contains the preferred PLMN ID of the available preferred PLMN in the selected country in which the UE is roaming registration onto this preferred PLMN will occur within 30 seconds thus reducing the time that it would have taken to register for UEs which do not use what is disclosed here.

In another embodiment of Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN is presented in a Flow Diagram where a MCC is selected using a User Interface and a reset signal is used which can be implemented within the OS of the ME itself and possibly on an Application depending if APIs supporting the sending of a reset signal to the UICC are exposed for a particular OS Platform to the App Developer.

The difference for the embodiment shown in shows that after User Input Box H is performed which is similar to the description in I the ME sends a reset signal to the UICC as shown in process box I which can be in the form of either an Activation and Warm Reset or an Activation and Cold Reset as per ISO IEC 7816 3 as soon as the Airplane Mode is turned OFF which turns the cellular radio on. This reset signal sent to the UICC forces the updated values in EF LOCI and EF EPSLOCI to be read by the ME into the ME s internal memory for use in Automatic Network Selection Process in process box J which helps achieve Registration onto the visited available preferred PLMN within 30 seconds from the time that Airplane Mode is turned OFF in the selected roaming country.

In most mobile devices an MRU most recently used database within the baseband modem is used to store most recently used LTE and or UMTS Band Information which helps in speeding up network registration as the baseband modem will not have to spend additional time searching for Bands since it already has it in its MRU. In it is assumed that the LTE or UMTS Band info for the destination country is the same as the origination country. However in some cases this the Band info is different i.e. In North America cellular networks use UMTS Band II 1900 MHz and Band V 850 MHz while in Europe the cellular networks use UMTS Band I 2100 MHz . When travelling between US and Canada Instant or near Instant Registration can be achieved in the embodiments depicted in . However when travelling between North America and Europe unless UMTS Band I 2100 MHz is already populated in the MRU database within the baseband modem then Instant Registration may not be achieved. Accordingly in Process Box K an MRU table is updated within the baseband modem with the LTE and or UMTS Band Information associated to the Destination City or Country . The LTE and or UMTS band information can be retrieved from the list depicted in database box E. Alternatively the information could be retrieved from a separate list which could for example include the MCCs and corresponding LTE and UMTS band information without the countries or cities. Process box M of corresponds to Process Box J of but the updated MRU information is also available to the ME allowing Instant or near Instant Registration even if the LTE and or UMTS band information is different in the destination country and origination country.

It should be noted that while do not show the step of updating an MRU table in the ME with LTE and or UMTS band information for the selected MCC this step can also carried out in those embodiments using a list of MCCs and matching LTE and or UMTS band information to retrieve the LTE and or UMTS band information to use to update the MRU.

In another embodiment of Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN is presented in a Flow Diagram where a MCC is selected based on a mobile boarding pass and a reset signal is used. Elements A to J of correspond to elements A to I b and K of and the corresponding description can be applied to accordingly. Elements K to M of correspond to elements H to J of and the corresponding description can be applied to accordingly except that in process box M the updated MRU information is also available to the ME allowing Instant or near Instant Registration even if the LTE and or UMTS band information is different in the destination country and origination country.

In the schematic depicts the UE consisting of the ME connected to the UICC in a registered state on PLMN ID 302220. Typically the Network Name is displayed on the ME screen rather than its associated PLMN ID but for illustration of Instant or near Instant Registration of a roaming UE in Automatic Network Selection mode onto a preferred VPLMN 302220 is shown on the top left hand corner of the ME showing the PLMN ID in which the UE is current registered on. Also shown is the current registration info within the EF LOCI and EF EPSLOCI of the UICC as well as for simplicity of illustration the image of PLMN ID content from these EFs in the ME Internal Memory. In practicality the LOCI and EPSLOCI image in the ME Internal Memory would have the same content format as that in EF LOCI and EF EPSLOCI in the UICC. A list of sample countries presented via UI from an App installed on the ME or a UI on the OS on the ME is also shown in from which the user can select.

In the schematic shows that the user has selected USA to which MCC is associated as shown in Step . Based on this selection Step is performed in which the selected MCC is compared to the PLMN list in either the primary EF OPLMNwAcT as shown in Step or the fallback PLMN list within the App or OS of the ME as shown in Step . Once a first instance MCC match is successful in either Step or Step then the PLMN ID for the matching MCC is selected from the PLMN list and the MCCMNC contents in EF LOCI and EF EPSLOCI is overwritten with the selected PLMN ID as shown in Step . After the updating is complete in Step a REFRESH File Change Notification is sent from the UICC to the ME as shown in Step to indicated to the ME to refresh the image of LOCI and EPSLOCI in the internal memory with the new values that were updated in EF LOCI and EF EPSLOCI of the UICC as shown in Step .

In the schematic shows that the user has turned the cellular radio off by turning Airplane Mode ON as indicated by the airplane symbol at the top right hand corner of the ME s screen.

Embodiments of the disclosed methods achieve near instant or instant first time registration for example within thirty seconds onto an available visited preferred PLMN when Airplane Mode is turned off.

Immaterial modifications may be made to the embodiments described here without departing from what is covered by the claims. In the claims the word comprising is used in its inclusive sense and does not exclude other elements being present. The indefinite article a before a claim feature does not exclude more than one of the feature being present. Each one of the individual features described here may be used in one or more embodiments and is not by virtue only of being described here to be construed as essential to all embodiments as defined by the claims.

