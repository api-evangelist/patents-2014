---

title: N factorial dual data rate clock and data recovery
abstract: System, methods and apparatus are described that facilitate transmission of data over a multi-wire data communications link, particularly between two devices within an electronic apparatus. Each symbol in a sequence of symbols received from a plurality of signal wires is received in an odd transmission interval or an even transmission interval. A first clock signal is generated from transitions in signaling state of the wires occurring between each odd transmission interval and a consecutive even transmission interval. A second clock signal is generated from transitions in signaling state of the plurality of wires occurring between each even transmission interval and a consecutive odd transmission interval. The first and second clock signals are used to capture symbols received in even and odd transmission intervals, respectively.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09178690&OS=09178690&RS=09178690
owner: QUALCOMM Incorporated
number: 09178690
owner_city: San Diego
owner_country: US
publication_date: 20140414
---
The present application for patent claims priority to Provisional Application No. 61 886 567 entitled N Factorial Clock And Data Recovery With Negative Hold Time Sampling filed Oct. 3 2013 which is assigned to the assignee hereof which applications are hereby expressly incorporated by reference herein.

The present disclosure relates generally to an interface between a host processor and a peripheral device such as a camera and more particularly to improving clock generation for double data rate data transfer on an N wire communication interface.

Manufacturers of mobile devices such as cellular phones may obtain components of the mobile devices from various sources including different manufacturers. For example an application processor in a cellular phone may be obtained from a first manufacturer while the display for the cellular phone may be obtained from a second manufacturer. The application processor and a display or other device may be interconnected using a standards based or proprietary physical interface. For example a display may provide an interface that conforms to the Display System Interface DSI standard specified by the Mobile Industry Processor Interface Alliance MIPI .

In one example a multi signal data transfer system may employ multi wire differential signaling such as 3 phase or N factorial N low voltage differential signaling LVDS transcoding e.g. the digital to digital data conversion of one encoding type to another may be performed to embed symbol clock information by causing a symbol transition at every symbol cycle instead of sending clock information in separate data lanes differential transmission paths . Embedding clock information by transcoding is an effective way to minimize skew between clock and data signals as well as to eliminate the necessity of a phase locked loop PLL to recover the clock information from the data signals.

The capabilities and functionality of mobile devices continues to grow and there is a resultant demand for ever increasing bandwidth between components within mobile devices and the like. Accordingly there exists an ongoing need for optimized communications in general and improved reliability of data transfer on multi signal wire communication links.

Embodiments disclosed herein provide systems methods and apparatus related to multi wire interfaces. The systems methods and apparatus relate to the use of receiver circuits that can extract reliable clock signals for recovery of data transmitted using double data rate clocking.

In an aspect of the disclosure a method of data communications includes receiving a sequence of symbols from a plurality of signal wires each symbol in the sequence of symbols being received during one of an odd transmission interval or an even transmission interval generating a first clock signal from transitions in signaling state of the plurality of wires occurring between each odd transmission interval and a consecutive even transmission interval generating a second clock signal from transitions in signaling state of the plurality of wires occurring between each even transmission interval and a consecutive odd transmission interval using the first clock signal to capture a first set of symbols including symbols in the sequence of symbols that are received in even transmission intervals and using the second clock signal to capture a second set of symbols including symbols in the sequence of symbols that are received in odd transmission intervals.

In an aspect of the disclosure each odd transmission interval is immediately preceded by a first even transmission interval and immediately succeeded by a second even transmission interval.

In an aspect of the disclosure each pair of consecutive symbols received in the sequence of symbols includes one symbol received during in an odd transmission interval and one symbol received during an even transmission interval.

In an aspect of the disclosure timing of a first edge in the first clock signal is based on a first transition that occurs between a first symbol and a second symbol that is received immediately after the first symbol. Timing of a first edge in the second clock signal may be based on a second transition that occurs between the second symbol and a third symbol that is received immediately after the second symbol.

In an aspect of the disclosure timing of a second edge in the first clock signal is based on the timing of the first edge in the second clock signal Timing of a second edge in the second clock signal may be based on timing of a third edge in the first clock signal where the timing of the third edge in the first clock signal is based on a third transition that occurs between the third symbol and a fourth symbol that is received immediately after the third symbol.

In an aspect of the disclosure generating the first clock signal includes ignoring the second transition. Generating the second clock signal may include ignoring the first transition.

In an aspect of the disclosure each pair of consecutive symbols in the sequence of symbols includes two symbols that are associated with different signaling states on the plurality of signal wires.

In an aspect of the disclosure receiving the sequence of symbols from the plurality of signal wires includes receiving differential signals from all possible combinations of two signal wires in the plurality of signal wires. Each symbol in the sequence of symbols may be encoded in a combination of signaling states of the differential signals.

In an aspect of the disclosure receiving the sequence of symbols from the plurality of signal wires includes receiving a 3 phase signal from each of three signal wires where each of the three signal wires is in a different signaling state with respect to the other signal wires in each transmission interval. Each symbol in the sequence of symbols may be encoded in a combination of signaling states of the three signal wires.

In an aspect of the disclosure an apparatus includes means for receiving a sequence of symbols from a plurality of signal wires where each symbol in the sequence of symbols is received during one of an odd transmission interval or an even transmission interval means for generating a first clock signal from transitions in signaling state of the plurality of signal wires occurring between each odd transmission interval and a consecutive even transmission interval means for generating a second clock signal from transitions in signaling state of the plurality of signal wires occurring between each even transmission interval and a consecutive odd transmission interval means for using the first clock signal to capture a first set of symbols including symbols in the sequence of symbols that are received in even transmission intervals and means for using the second clock signal to capture a second set of symbols including symbols in the sequence of symbols that are received in odd transmission intervals.

In an aspect of the disclosure a receiver includes a plurality of line interface circuits configured to receive signals from a plurality of signal wires and a CDR circuit. The CDR circuit may be configured to receive a sequence of symbols from the plurality of signal wires where each symbol in the sequence of symbols is received during one of an odd transmission interval or an even transmission interval generate a first clock signal from transitions in signaling state of the plurality of signal wires occurring between each odd transmission interval and a consecutive even transmission interval generate a second clock signal from transitions in signaling state of the plurality of signal wires occurring between each even transmission interval and a consecutive odd transmission interval use the first clock signal to capture a first set of symbols including symbols in the sequence of symbols that are received in even transmission intervals and use the second clock signal to capture a second set of symbols including symbols in the sequence of symbols that are received in odd transmission intervals.

In an aspect of the disclosure a processor readable storage medium has one or more instructions stored thereon. The instructions may be executed by at least one processing circuit. The instructions may cause the at least one processing circuit to receive a sequence of symbols from a plurality of signal wires where each symbol in the sequence of symbols is received during one of an odd transmission interval or an even transmission interval generate a first clock signal from transitions in signaling state of the plurality of signal wires occurring between each odd transmission interval and a consecutive even transmission interval generate a second clock signal from transitions in signaling state of the plurality of signal wires occurring between each even transmission interval and a consecutive odd transmission interval use the first clock signal to capture a first set of symbols including symbols in the sequence of symbols that are received in even transmission intervals and use the second clock signal to capture a second set of symbols including symbols in the sequence of symbols that are received in odd transmission intervals.

Various aspects are now described with reference to the drawings. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of one or more aspects. It may be evident however that such aspect s may be practiced without these specific details.

As used in this application the terms component module system and the like are intended to include a computer related entity such as but not limited to hardware firmware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a computing device and the computing device can be a component. One or more components can reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers. In addition these components can execute from various computer readable media having various data structures stored thereon. The components may communicate by way of local and or remote processes such as in accordance with a signal having one or more data packets such as data from one component interacting with another component in a local system distributed system and or across a network such as the Internet with other systems by way of the signal.

Moreover the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from the context the phrase X employs A or B is intended to mean any of the natural inclusive permutations. That is the phrase X employs A or B is satisfied by any of the following instances X employs A X employs B or X employs both A and B. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from the context to be directed to a singular form.

Certain aspects of the invention may be applicable to communications links deployed between electronic devices that are subcomponents of a mobile apparatus such as a telephone a mobile computing device an appliance automobile electronics avionics systems etc. Examples of a mobile apparatus include a cellular phone a smart phone a session initiation protocol SIP phone a laptop a notebook a netbook a smartbook a personal digital assistant PDA a satellite radio a global positioning system GPS device a multimedia device a video device a digital audio player e.g. MP3 player a camera a game console a wearable computing device e.g. a smartwatch a health or fitness tracker etc. an appliance a sensor a vending machine or any other similar functioning device.

The communication link may provide multiple channels and . One or more channels may be bidirectional and may operate in half duplex and or full duplex modes. One or more channels and may be unidirectional. The communication link may be asymmetrical providing higher bandwidth in one direction. In one example described herein a first communications channel may be referred to as a forward link channel while a second communications channel may be referred to as a reverse link channel . The first IC device may be designated as a host system or transmitter while the second IC device may be designated as a client system or receiver even if both IC devices and are configured to transmit and receive on the forward communications link channel . In one example the forward link may operate at a higher data rate when communicating data from a first IC device to a second IC device while the reverse link channel may operate at a lower data rate when communicating data from the second IC device to the first IC device .

The IC devices and may each have a processor or other processing and or computing circuit or device . In one example the first IC device may perform core functions of the apparatus including maintaining wireless communications through a wireless transceiver and an antenna while the second IC device may support a user interface that manages or operates a display controller . In the example the second IC device may be adapted to control operations of a camera or video input device using a camera controller . Other features supported by one or more of the IC devices and may include a keyboard a voice recognition component and other input or output devices. The display controller may include circuits and software drivers that support displays such as a liquid crystal display LCD panel touch screen display indicators and so on. The storage media and may include transitory and or non transitory storage devices adapted to maintain instructions and data used by respective processors and and or other components of the IC devices and . Communication between each processor and its corresponding storage media and and other modules and circuits may be facilitated by one or more bus and respectively.

The reverse link may be operated in the same manner as the forward link and the forward link and reverse link may be capable of transmitting at comparable speeds or at different speeds where speed may be expressed as data transfer rate and or clocking rates. The forward and reverse data rates may be substantially the same or differ by orders of magnitude depending on the application. In some applications a single bidirectional link may support communications between the first IC device and the second IC device . The forward link and or reverse link may be configurable to operate in a bidirectional mode when for example the forward and reverse links and share the same physical connections and operate in a half duplex manner. In one example the communication link may be operated to communicate control command and other information between the first IC device and the second IC device in accordance with an industry or other standard.

In one example forward and reverse links and may be configured or adapted to support a wide video graphics array WVGA frames per second LCD driver IC without a frame buffer delivering pixel data at 810 Mbps for display refresh. In another example forward and reverse links and may be configured or adapted to enable communications between with dynamic random access memory DRAM such as double data rate synchronous dynamic random access memory SDRAM . Encoding devices and or can encode multiple bits per clock transition and multiple sets of wires can be used to transmit and receive data from the SDRAM control signals address signals and so on.

The forward and reverse links and may comply with or be compatible with application specific industry standards. In one example the MIPI standard defines physical layer interfaces between an application processor IC device and an IC device that supports the camera or display in a mobile device. The MIPI standard includes specifications that govern the operational characteristics of products that comply with MIPI specifications for mobile devices. The MIPI standard may define interfaces that employ complimentary metal oxide semiconductor CMOS parallel busses.

The communication link of may be implemented as a wired bus that includes a plurality of signal wires denoted as N wires . The N wires may be configured to carry data encoded in symbols where clock information is embedded in a sequence of the symbols transmitted over the plurality of wires. Examples of encoding techniques used with N wire interfaces include N factorial N encoding and N phase encoding.

A termination impedance typically resistive couples each of the N wires to a common center point in a termination network . It will be appreciated that the signaling state of the N wires reflects a combination of the currents in the termination network attributed to the differential drivers coupled to each wire. It will be further appreciated that the center point is a null point whereby the currents in the termination network cancel each other at the center point.

The N encoding scheme need not use a separate clock channel and or non return to zero decoding because at least one of the Csignals in the link transitions between consecutive symbols. Effectively each transcoder ensures that a transition occurs between each pair of symbols transmitted on the N wires by producing a sequence of symbols in which each symbol is different from its immediate predecessor symbol. In the example depicted in four wires are provided N 4 and the 4 wires can carry C 6 differential signals. The transcoder may employ a mapping scheme to generate raw symbols for transmission on the N wires . The transcoder may map data bits to a set of transition numbers. The transition numbers may be used to select raw symbols for transmission based on the value of the immediately preceding symbol such that the selected raw symbol is different from the preceding raw symbol. The raw symbols may be serialized by the serializer to obtain a sequence of symbols for transmission over the N wires . In one example a transition number may be used to lookup a data value corresponding to the second of the consecutive raw symbols with reference to the first of the consecutive raw symbols. At the receiver a transcoder may employ a mapping to determine a transition number that characterizes a difference between a pair of consecutive raw symbols in a lookup table for example. The transcoders operate on the basis that every consecutive pair of raw symbols includes two different symbols.

The transcoder at the transmitter may select between N 1 available signaling states at every symbol transition. In one example a 4 system provides 4 1 23 signaling states for the next symbol to be transmitted at each symbol transition. The bit rate may be calculated as log available states per transmit clock cycle.

According to certain aspects disclosed herein dual data rate DDR signaling may be employed to increase the interface bandwidth by transmitting two symbols in each period of the transmit clock . Symbol transitions occur at both the rising edge and falling edge of the transmit clock in a system using double data rate DDR clocking. The total available states in the transmit clock cycle is C 1 23 529 and the number of data bits that can transmitted per symbol may be calculated as log 529 9.047 bits.

A receiving device receives the sequence of symbols using a set of line receivers where each receiver in the set of line receivers determines differences in signaling states on one pair of the N wires . Accordingly Creceivers are used where N represents the number of wires. The Creceivers produce a corresponding number of raw symbols as outputs. In the depicted 4 wire example the signals received on the 4 wires are processed by 6 receivers C 6 to produce a raw symbol signal that is provided to a CDR and deserializer . The raw symbol signal is representative of the signaling state of the N wires and the CDR may process the raw symbol signal to generate a receive clock signal that can be used by the deserializer .

The receive clock signal may be a DDR clock signal that can be used by external circuitry to process received data provided by the transcoder . The transcoder decodes a block of received symbols from the deserializer by comparing each symbol to its immediate predecessor. The transcoder produces output data corresponding to the data provided to the transmitter .

Certain other multi wire interfaces use N phase encoding to transmit data over a plurality of wires. is a diagram illustrating an example of an M wire N phase polarity encoding transmitter configured for M 3 and N 3. The principles and techniques disclosed for 3 wire 3 phase encoders can be applied in other configurations of M wire N phase polarity encoders.

When N phase polarity encoding is used connectors such as signal wires and on an M wire bus may be undriven driven positive or driven negative. An undriven signal wire or may be in a high impedance state. An undriven signal wire or may be at least partially pulled or driven towards a voltage level that lies substantially halfway between the positive and negative voltage levels provided on driven signal wires. An undriven signal wire or may have no current flowing through it. In the example illustrated in a set of drivers may control the state of each signal wire and for each symbol transmission interval such that each signal wire and may be in one of three states denoted as 1 1 and 0 for a transmitted symbol. In one example drivers may include unit level current mode drivers. In another example drivers may drive opposite polarity voltages on two signals and while the third signal is at high impedance and or pulled to ground. For each symbol transmission interval at least one signal is in the undriven 0 state while the number of signals driven positive 1 state is equal to the number of signals driven negative 1 state such that the sum of current flowing to the receiver is always zero. For each pair of consecutive symbol transmission intervals at least one signal wire or has a different state in the two symbol transmission intervals.

In the example depicted in 16 bit data is input to a mapper which maps the input data to 7 symbols for transmitting sequentially over the signal wires and . The 7 symbols may be serialized using parallel to serial converters for example. A 3 wire 3 phase encoder receives 7 symbols produced by the mapper one symbol at a time and computes the state of each signal wire and for each symbol interval. The encoder selects the states of the signal wires and based on the input symbol and the previous states of signal wires and

The use of M wire N phase encoding permits a number of bits to be encoded in a plurality of symbols where the bits per symbol is not an integer. In the simple example of a 3 wire system there are 3 available combinations of 2 wires that may be driven simultaneously and 2 possible combinations of polarity on the pair of simultaneously driven wires yielding 6 possible states. Since each transition occurs from a current state 5 of the 6 states are available at every transition. The state of at least one wire is required to change at each transition. With 5 states log 5 2.32 bits may be encoded per symbol. Accordingly a mapper may accept a 16 bit word and convert it to 7 symbols because 7 symbols carrying 2.32 bits per symbol can encode 16.24 bits. In other words a combination of seven symbols that encodes five states has 5 78 125 permutations. Accordingly the 7 symbols may be used to encode the 2 65 536 permutations of 16 bits.

At any phase state in the illustrated three wire example exactly two of the conductors carry a signal which is effectively a differential signal for that phase state while the third conductor or is undriven. The phase state for each conductor may be determined by voltage difference between the conductor or and at least one other conductor and or or by the direction of current flow or lack of current flow in the conductor or . As shown in the state transition diagram three phase states S Sand S are defined. A signal may flow clockwise from phase state Sto phase state S phase state Sto phase state S and or phase state Sto phase state Sand the signal may flow counter clockwise from phase state Sto phase state S phase state Sto phase state S and or phase state Sto phase state S. For other values of N transitions between the N states may optionally be defined according to a corresponding state diagram to obtain circular rotation between state transitions.

In the example of a three wire three phase communications link clockwise rotations Sto S Sto S and or Sto S at a state transition may be used to encode a logic 1 while counter clockwise rotations Sto S Sto S and or Sto S at the state transition may be used to encode a logic 0. Accordingly a bit may be encoded at each transition by controlling whether the signal is rotating clockwise or counter clockwise. For example a logic 1 may be encoded when the three wires transition from phase state Sto phase state Sand a logic 0 may be encoded when the three wires transition from phase state Sto phase state S. In the simple three wire example depicted direction of rotation may be easily determined based on which of the three wires is undriven before and after the transition.

Information may also be encoded in the polarity of the driven conductors or direction of current flow between two conductors . Signals and illustrate voltage levels applied to conductors respectively at each phase state in a three wire three phase link. At any time a first conductor is coupled to a positive voltage V for example a second conductor is coupled to a negative voltage V for example while the third conductor may be open circuited or otherwise undriven. As such one polarity encoding state may be determined by the current flow between the first and second conductors or the voltage polarities of the first and second conductors . In some embodiments two bits of data may be encoded at each phase transition. A decoder may determine the direction of signal phase rotation to obtain the first bit and the second bit may be determined based on the polarity difference between two of the signals and . The decoder having determined direction of rotation can determine the current phase state and the polarity of the voltage applied between the two active connectors and or or the direction of current flow through the two active conductors and or

In the example of the three wire three phase link described herein one bit of data may be encoded in the rotation or phase change in the three wire three phase link and an additional bit may be encoded in the polarity of two driven wires. Certain embodiments encode more than two bits in each transition of a three wire three phase encoding system by allowing transition to any of the possible states from a current state. Given three rotational phases and two polarities for each phase 6 states are defined such that 5 states are available from any current state. Accordingly there may be log 5 2.32 bits per symbol transition and the mapper may accept a 16 bit word and convert it to 7 symbols.

Table 1 illustrates the operation of the differential receivers . In the example the wire states may be encoded in the voltage amplitude on the three wires and such that the 1 state of a wire is represented as a voltage V volts the 1 state of the wire is represented as 0 volts and the undriven state is represented or approximated as V 2 volts. In particular Table 1 illustrates the outputs of the differential receivers for each wire state in the 3 wire 3 Phase Polarity encoding system. A receiver decoder may be configured to output a code at the digital output of the receiver for each symbol decoded.

Certain N wire interfaces may be adapted to provide increased bandwidth through the use of DDR clocking whereby a new symbol is transmitted at both the rising and falling edges of a transmit clock. However conventional CDR circuits may be unable to respond to DDR clocking and or conventional CDR circuits may limit the maximum possible operation speed of an N wire or N phase interface.

In operation when a transition occurs between a current symbol S a next symbol S the state of the SI signal begins to change. The NE signal transitions high when the comparator first detects a difference between SI and S causing the set reset latch to be asynchronously set. Accordingly the NEFLT signal transitions high and this high state is maintained until the set reset latch is reset when SDRCLK becomes high. The SDRCLK transitions to a high state in delayed response to the rising of the NEFLT signal where the delay is attributable to the analog delay element .

As transitions between symbols occur one or more intermediate or indeterminate states may occur on the SI signal due to inter wire skew signal overshoot signal undershoot crosstalk and so on. The intermediate states on SI may be regarded as invalid data and these intermediate states may cause spikes in the NE signal as the output of the comparator returns towards a low state for short periods of time. The spikes typically do not affect NEFLT signal output by the set reset latch because the set reset latch effectively blocks and or filters out the spikes on the NE signal from the NEFLT signal .

The one shot circuit outputs a high state in the NE1SHOT signal after the rising edge of the NEFLT signal . The one shot circuit maintains the NE1SHOT signal at a high state for the delay P period before the NE1SHOT signal returns to the low state. The resultant pulse on the NE1SHOT signal propagates to the SDRCLK signal after the delay S period caused by the analog delay S element . The high state of the SDRCLK signal resets the set reset latch and the NEFLT signal transitions low. The high state of SDRCLK signal also enables the level latch and the value of the SI signal is output as the S signal .

The comparator detects when the S signal corresponding to the Ssymbol matches the symbol Ssymbol on the SI signal and the output of the comparator drives the NE signal low. The trailing edge of the pulse on the of NE1SHOT signal propagates to the SDRCLK signal after the delay S period caused by the analog delay S element . When a new symbol S is being received the SI signal begins its transition to the value corresponding to the symbol S after the trailing edge of the SDRCLK signal .

SDRCLK may be provided as an output to synchronize one or more functions of a receiving device. As discussed herein the SDRCLK includes a sequence of pulses that have a pulse width determined by the first delay element and the timing of the pulses with respect to transitions on the SI signal may be determined by the second delay element . In some instances additional circuits may be provided to improve operation of a receiver that uses the CDR circuit . In one example a negative delay circuit may be employed to provide an improved setup time for registers that capture a symbol from the SI signal .

In the negative delay circuit an Celements delay the data on the SI signals by a delay period or value H producing a delayed SI signal SIDEL signal . For a 4 wire link C C 6 delay elements may be used. The SIDEL signal is sampled by a sampling latch or register which provides a data output . The sampling latch is clocked by the rising edge of NEFLT which indicates for example that a transition between a first symbol S to a second symbol S has begun. Since the SIDEL signal lags the SI signal by the delay period or value the NEFLT signal causes the register to capture a delayed version of the first symbol S . The duration of the delay period or value H provided by the delay elements effectively provides a negative hold time and the delay period or value H may be configured to satisfy hold time or timing requirements specified for the register and or other components of the CDR or negative delay circuit .

In the example depicted in the CDR circuit is adapted to extract clock information from a sequence of symbols transmitted over N interface and to provide an X clock on the DDRX signal and a complementary Y clock on the DDRY signal . A rising edge of DDRX signal may be used by an external circuit to read or capture registered even symbols SX while a rising edge of DDRY signal may be used by an external circuit to read or capture registered odd symbols SY . The DDRX signal and the DDRY signal may be generated from transitions detected between consecutive raw symbols in the input signal SI . The clock information is encoded in the transitions at the end of the symbol periods which correspond to odd symbols and even symbols .

Output symbols in SX include registered copies of symbols transmitted in SI during the illustrated even transmission intervals . For example the Sand Ssymbols are captured by a set of latches or register devices from SI and provided in SX as registered Sand Ssymbols respectively. Output symbols in SY are registered copies of symbols transmitted in SI during odd transmission intervals including the illustrated odd transmission intervals . For example the Sand Ssymbols are captured by a set of latches or register devices from SI and provided in SY as registered Sand Ssymbols respectively. The register devices and provide a stabilized and delayed version of the symbols in SI .

The generation of the DDRX signal may be understood by considering the operation of certain circuitry of the CDR following a transition between an odd symbol S and a next even symbol S . The transition occurs at the beginning of a symbol transmission period when the symbol S may be unstable for a portion of the symbol transmission period due to differences in rise and fall times of the signal wires carrying the symbols in SI for example. Comparison logic detects a difference between S and a registered copy of S provided in the SY signal typically using a comparator coupled to the output of the comparator that receives the registered copy of S from the registers . The operation of the registers is controlled by the circuitry that generates the DDRY signal and these registers capture the odd symbols and provide registered symbols .

When the current symbol is different from the registered copy of S the NEX signal output by the comparison logic is in a logic high state. In the first symbol period for example the SY signal reflects the registered symbol S output by the registers and consequently the comparison logic that is used to generate DDRX compares the value of SI to the registered symbol S. At the beginning of the first symbol period the SI is in a transitional period as it changes from symbol S to S and the NEX signal output by the comparison logic may have some transitional spikes until SI achieves stability and reflects the true value of S such that the NEX signal output by the comparison logic is in a stable logic high state.

When the NEX signal is in the logic high state the reset condition is removed from a first set reset latch . However the output of the first set reset latch remains in a logic low state because the DDRX signal which controls the set input of the first set reset latch is in a logic low state at the start of the transition period . Since the output of the first set reset latch is in the logic low state the gating logic gate is enabled and therefore passes the NEX signal as the NEXG signal . The difference detected by comparison logic between consecutive symbols S and S causes a transition in the NEXG signal that sets a second set reset latch and resets a corresponding set reset latch in the circuitry that generates the DDRY signal . The comparison logic may detect a difference during the transition period between the consecutive symbols S and S. A corresponding NEYG signal controls the reset input of the second set reset latch and the NEYG signal is in the logic low state when the NEXG signal is in the logic high state. Accordingly the NEXFLT signal provided as the output of the second set reset latch is driven high.

The DDRX signal is a delayed version of the NEXFLT signal because of the delay introduced by a first delay element . The first delay element may be configured to provide a rising edge on the DDRX signal that occurs after the current symbol has been stable for a sufficient period of time to satisfy the minimum set up time specified for the registers . The transition from the logic low state to the logic high state on the DDRX signal triggers the registers that capture the raw symbol S from SI . The presence of the logic high state on the DDRX signal sets the first set reset latch thereby forcing the output of the gating logic to the logic low state. It will be appreciated that the output of the first set reset latch may be configured to prioritize the set input over the reset input. When the first set reset latch is set the NEXG signal goes low but the second set reset latch maintains its output in the logic high state until reset by the circuitry that generates the DDRY signal . As will be seen the reset of the second set reset latch occurs when the NEYG signal transitions to the logic high state after detection of a transition from an even symbol to an odd symbol . Accordingly the NEXFLT signal remains in the logic high state for a duration t equivalent to approximately one symbol transmission period.

The transition of the DDRX signal to the logic low state is delayed by the first delay element with respect to the corresponding transition of the NEXFLT signal . The DDRX signal remains in the logic high state for a duration t equivalent to approximately one symbol transmission period commencing at a point when S is stable and falling when S is stable. Accordingly the comparison logic detects no difference between its inputs when the set input of the first latch is released and the first latch is reset thereby enabling the gating logic and the detection of the transition between S and S.

The circuitry that generates the DDRX signal effectively ignores the transition between S and S but is enabled to respond to the transition between S and S after the NEXFLT signal and DDRX signal have been reset by the circuitry that generates the DDRY signal . As can be seen from the timing diagram the resulting DDRX signal has an approximate 50 duty cycle and the registered even symbols and can be sampled during a time period that is approximately equivalent to two symbol transmission periods t .

The DDRY signal is generated in a manner that mirrors the manner of generating the DDRX signal . DDRY signal generation commences following a transition between an even symbol S and a next odd symbol S. The transition occurs at the beginning of a symbol transmission period when the symbol S may be unstable for a portion of the symbol transmission period due to differences in rise and fall times of the signal wires carrying the symbols in SI for example. Comparison logic detects a difference between the S and a registered copy of S. The comparison logic may include a plurality of comparators that receive the registered copy of S from the registers . The operation of the registers is controlled by the circuitry that generates the DDRX signal and these registers capture the even symbols and and provide registered symbols and .

The comparison logic produces a NEY signal that is in the logic high state when S is different from the registered copy of the S. When the NEY signal is in the logic high state the reset condition is removed from a third set reset latch . However the output of the third set reset latch remains low because the DDRY signal that controls the set input of the third set reset latch is in a logic low state at the start of the transition period . The logic low output of the third set reset latch enables the gating logic which therefore passes the NEY signal as the NEYG signal . Thus the difference detected by comparison logic between consecutive symbols S and S causes a transition in the NEYG signal to a logic high level that sets a fourth set reset latch and resets the second set reset latch in the circuitry that generates the DDRX signal . The corresponding NEXG signal controls the reset input of the fourth set reset latch and the NEXG signal is in the logic low state when the NEYG signal is in the logic high state. Accordingly the NEYFLT signal provided as the output of the fourth set reset latch is driven to the logic high state.

The DDRY signal is a delayed version of the NEYFLT signal where the DDRY signal is delayed by the delay period introduced by second delay element . The second delay element may be configured to provide a rising edge on the DDRY signal that occurs after S has been stable for a sufficient period of time to satisfy the minimum set up time specified for the registers . The second delay element may be matched with the first delay element in the circuitry that generates the DDRX signal . The transition from the logic low state to the logic high state on the DDRY signal triggers the registers which captures S from SI . A logic high state on the DDRY signal sets the third set reset latch thereby forcing the output of the gating logic to the logic low state. It will be appreciated that the output of the third set reset latch may be configured to prioritize the set input over the reset input. When the third set reset latch is set the NEYG signal goes low but the fourth set reset latch maintains its output in the logic high state until reset by the circuitry that generates the DDRX signal . As described above the reset of the fourth set reset latch occurs when the NEXG signal transitions to the logic high state after detection of a transition from an odd symbol to an even symbol . Accordingly the NEYFLT signal remains in the logic high state for the duration of approximately one symbol transmission period t .

The transition of the DDRY signal to the logic low state is delayed by the second delay element with respect to the corresponding transition of the NEYFLT signal . The DDRY signal remains in the logic high state for the duration of approximately one symbol transmission period t commencing at a point when S is stable and falling when S is stable. Accordingly the circuitry that generates the DDRY signal effectively ignores the transition between S and S and responds to the next transition after the NEYFLT signal and DDRY signal have been reset by the circuitry that generates the DDRX signal . As can be seen from the timing diagram the resulting DDRY signal has an approximate 50 duty cycle and is approximately 180 out of phase with the DDRX signal and the registered odd symbols and are available for sampling for approximately two symbol transmission periods t .

After a system reset one or more of the registers and set reset latches may be initialized to ensure that the CDR circuit attains a steady state operating condition and produces reliable output clock signals and . In one example the CDR circuit may be initialized by controlling the startup condition of the second and fourth set reset latches and that produce that DDRX signal and DDRY signal respectively. A system reset may cause the first set reset latch to be held in a forced Reset condition for a period of time that exceeds the delay period Delay S provided by the first delay element while causing the second set reset latch to be held in a forced Set condition for a period of time that exceeds the delay period Delay S provided by the second delay element . At the point at which the system reset condition is removed the NEXFLT signal and the DDRX signal are in the logic low state while the NEYFLT signal and the DDRY signal are in the logic high state. For at least the duration of Delay S the output of the third set reset latch is forced to the logic high state causing the gate logic to block the NEY signal . The NEY signal is passed only after the fourth set reset latch is reset by the operation of the circuitry that generates the DDRX signal and the DDRY signal subsequently transitions low after the expiration of Delay S associated with the delay element . It will be appreciated that the NEYG signal is in the logic low state until the DDRY signal has transitioned to the logic low state and the comparison logic has detected a difference between the symbol value captured by the registers and the value of the current raw symbol in SI .

The DDRX signal is in the logic low state when the system reset is removed and remains in the logic low state for at least the delay period provided by the first delay element . Accordingly the output of the first set reset latch may be in the logic low state upon removal of the system reset because DDRX signal continues to hold the Set input of the first set reset latch in a low condition and the first set reset latch may have initialized with its output in the logic low state or because the comparison logic may have reset the first set reset latch during the time that system reset was applied. Even if the output of the first set reset latch is in the logic high state after system reset is removed the first detection of a difference between the value stored in the odd symbol registers and the current symbol in SI by the comparison logic resets the first set reset latch enabling the NEX signal to control the value of NEXG . When the comparison logic detects a difference between the value stored in the odd symbol registers and the current symbol in SI the second set reset latch is set and the fourth set reset latch is cleared thereby causing the DDRX signal to transition to the logic high state and the DDRY signal to transition to the logic low state after the Delay S period. The rising edge of the DDRX signal triggers the even symbol registers to capture the current symbol in SI . At this point the CDR proceeds as described for steady state operation.

It will be appreciated that the CDR may be configured to cause other pre configurations of initial conditions of the registers and or set reset latches in response to a system reset. For example a different start up strategy may be used if the first and second delay elements and provide substantially different delay periods if different duty cycles for the DDRX and DDRY signals are desired and or based on other requirements including requirements related to clock or control signals provided to external circuits and devices.

At step a first clock signal may be generated from transitions in signaling state of the plurality of signal wires occurring between each odd transmission interval and a consecutive even transmission interval.

At step a second clock signal is generated from transitions in signaling state of the plurality of signal wires occurring between each even transmission interval and a consecutive odd transmission interval.

At step the first clock signal may be used to capture a first set of symbols that includes symbols in the sequence of symbols received in even transmission intervals.

At step the second clock signal may be used to capture a second set of symbols that includes symbols in the sequence of symbols received in odd transmission intervals.

Each odd transmission interval may be immediately preceded by a first even transmission interval and immediately succeeded by a second even transmission interval.

Each pair of consecutive symbols received in the sequence of symbols may include one symbol received during in an odd transmission interval and one symbol received during an even transmission interval.

In some instances timing of a first edge in the first clock signal is based on a first transition that occurs between a first symbol and a second symbol that is received immediately after the first symbol Timing of a first edge in the second clock signal may be based on a second transition that occurs between the second symbol and a third symbol that is received immediately after the second symbol. Timing of a second edge in the first clock signal may be based on the timing of the first edge in the second clock signal. Timing of a second edge in the second clock signal may be based on timing of a third edge in the first clock signal. The timing of the third edge in the first clock signal may be based on a third transition that occurs between the third symbol and a fourth symbol that is received immediately after the third symbol.

In some examples generating the first clock signal includes ignoring the second transition. Generating the second clock signal may include ignoring the first transition.

In some instances each pair of consecutive symbols in the sequence of symbols includes two symbols that are associated with different signaling states on the plurality of signal wires.

In one example receiving the sequence of symbols from the plurality of signal wires includes receiving differential signals from all possible combinations of two signal wires in the plurality of signal wires. Each symbol in the sequence of symbols may be encoded in a combination of signaling states of the differential signals.

In another example receiving the sequence of symbols from the plurality of signal wires includes receiving a 3 phase signal from each of three signal wires. The 3 phase signal transmitted on each of the three signal wires may be phase shifted by 120 degrees with respect to the 3 phase signal transmitted on the other signal wires. Each symbol in the sequence of symbols may be encoded in a combination of signaling states of the three signal wires.

The processor is responsible for general processing including the execution of software stored on the computer readable storage medium . The software when executed by the processor causes the processing circuit to perform the various functions described supra for any particular apparatus. The computer readable storage medium may also be used for storing data that is manipulated by the processor when executing software including data decoded from symbols transmitted over the connectors . The processing circuit further includes at least one of the modules and . The modules and may be software modules running in the processor resident stored in the computer readable storage medium one or more hardware modules coupled to the processor or some combination thereof. The modules and or may include microcontroller instructions state machine configuration parameters or some combination thereof.

In one configuration the apparatus for wireless communication includes modules and or circuits configured to receive a sequence of symbols from a plurality of the signal wires each symbol in the sequence of symbols being received during one of an odd transmission interval or an even transmission interval modules and or circuits configured to generate a first clock signal from transitions in signaling state of the plurality of signal wires occurring between each odd transmission interval and a consecutive even transmission interval modules and or circuits configured to generate a second clock signal from transitions in signaling state of the plurality of signal wires occurring between each even transmission interval and a consecutive odd transmission interval and modules and or circuits configured to capture a first set of symbols including symbols in the sequence of symbols that are received in even transmission intervals using the first clock signal and further configured to capture a second set of symbols including symbols in the sequence of symbols that are received in odd transmission intervals using the second clock signal. In one example the circuits illustrated in and provide logic that may implement the various functions performed by the processing circuit .

It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplary approaches. Based upon design preferences it is understood that the specific order or hierarchy of steps in the processes may be rearranged. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but is to be accorded the full scope consistent with the language claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed as a means plus function unless the element is expressly recited using the phrase means for. 

