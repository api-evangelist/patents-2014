---

title: Service provision system, service provision method, and computer program product
abstract: A service provision system includes: a management information storage unit that stores management information for managing user identification information, device identification information, and service identification information in association with one another; an authentication information receiving unit that receives authentication information including user authentication information and device authentication information from a device connected via a network; a service specifying unit that specifies, when the authentication information is authenticated by an authentication unit, a service associated with the authentication information based on the authentication information and the management information; and a first execution unit that receives a use request of a mail distribution service from the first device connected via the network, composes a mail according to the use request of the mail distribution service received from the first device, and distributes the composed mail to a previously specified mail server connected to the service provision system via a network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09537849&OS=09537849&RS=09537849
owner: RICOH COMPANY, LIMITED
number: 09537849
owner_city: Tokyo
owner_country: JP
publication_date: 20140722
---
The present application claims priority to and incorporates by reference the entire contents of Japanese Patent Application No. 2013 159811 filed in Japan on Jul. 31 2013 Japanese Patent Application No. 2013 159818 filed in Japan on Jul. 31 2013 Japanese Patent Application No. 2013 159813 filed in Japan on Jul. 31 2013 and Japanese Patent Application No. 2013 159819 filed in Japan on Jul. 31 2013.

The present invention relates to a service provision system a service provision method and a computer program product.

Conventionally a function of distributing data to a specified distribution destination has a plurality of variations. For example a multifunction peripheral has a function of transmitting image data obtained by scanning by e mail. For example a multifunction peripheral also has a function of uploading image data obtained by scanning to a specific folder at a specified time. For example a multifunction peripheral further has a function of transmitting image data received by facsimile to a specific server or the like on a network. For example when data is stored in a specific folder of a specific server in an in house network system a technology for reading the data and distributing the read data to other server is known.

It is an object of the present invention to at least partially solve the problems in the conventional technology.

A service provision system includes one or more information processing devices and provides a service to a device connected thereto via a network. The service provision system includes a management information storage unit that stores management information for managing user identification information for identifying a user device identification information for identifying a first device and service identification information for identifying a service registered as a use object in association with one another an authentication information receiving unit that receives authentication information including user authentication information used for user authentication and device authentication information used for device authentication from the device connected via the network an authentication unit that executes authentication processing of the received authentication information a service specifying unit that specifies when the authentication information is authenticated a service associated with the authentication information based on the authentication information and the management information and a first execution unit that receives a use request of a mail distribution service from the first device connected via the network composes a mail according to the use request of the mail distribution service received from the first device and distributes the composed mail to a previously specified mail server connected to the service provision system via a network.

A service provision method is executed by a service provision system that includes one or more information processing devices and provides a service to a device connected thereto via a network. The method includes storing management information for managing user identification information for identifying a user device identification information for identifying a first device and service identification information for identifying a service registered as a use object in association with one another in a management information storage unit receiving authentication information including user authentication information used for user authentication and device authentication information used for device authentication from the device connected via the network executing authentication processing of the received authentication information specifying when the authentication information is authenticated a service associated with the authentication information based on the authentication information and the management information and executing including receiving a use request of a mail distribution service from the first device connected via the network composing a mail according to the use request of the mail distribution service received from the first device and distributing the composed mail to a previously specified mail server connected to the service provision system via a network.

A computer program product includes a non transitory computer readable medium containing an information processing program causing an information processing device to function as a service provision system that provides a service to a device connected thereto via a network. The program causing the information processing device to function as a management information storage unit that stores management information for managing user identification information for identifying a user device identification information for identifying a first device and service identification information for identifying a service registered as a use object in association with one another an authentication information receiving unit that receives authentication information including user authentication information used for user authentication and device authentication information used for device authentication from the device connected via the network an authentication unit that executes authentication processing of the received authentication information a service specifying unit that specifies when the authentication information is authenticated a service associated with the authentication information based on the authentication information and the management information and a first execution unit that receives a use request of a mail distribution service from the first device connected via the network composes a mail according to the use request of the mail distribution service received from the first device and distributes the composed mail to a previously specified mail server connected to the service provision system via a network.

The above and other objects features advantages and technical and industrial significance of this invention will be better understood by reading the following detailed description of presently preferred embodiments of the invention when considered in connection with the accompanying drawings.

The in house network system has a firewall . The firewall restricts unauthorized access from the outside to devices connected in the in house network system .

The service provision system has an access control device . The access control device controls an access from the outside to a device connected in the service provision system .

The in house network system includes but not limited to a terminal device an image forming device an authentication device and other devices . Each of the terminal device the image forming device the authentication device and the other devices has a wired or wireless communication unit and the devices are connected to each other via a private network provided inside the firewall .

The terminal device is implemented by an information processing device e.g. a computer system explained later with an ordinary operating system OS and the like. The terminal device is as an example a personal computer a tablet computer a notebook computer a smartphone or a mobile phone and may be any device that can be operated by a user.

The image forming device has an image forming function such as a multifunction peripheral a copy machine a scanner or a laser printer. The authentication device is implemented by an information processing device e.g. the computer system explained later with the ordinary OS for server and the like. The authentication device provides a user authentication function to the terminal device and the image forming device . The other devices are for example electronic apparatuses such as a projector and an electronic blackboard. The in house network system may include the terminal device the image forming device the authentication device and the other devices in plurality respectively.

The service provision system is a system for providing cloud services to devices and the like on the network. The service provision system may be a system for providing instead of the cloud services services provided by an application service provider ASP or providing Web services or the like to devices on the network.

Each of the devices in the service provision system is connected to the network such as the Internet via the access control device . The service provision system includes the access control device a print service provision device a distribution service provision device a portal service provision device an authentication device a data processing control device a data processing execution control device and a data processing device . These devices are connected to each other via the network within the service provision system .

Each of the devices in the service provision system is implemented by one or more information processing devices e.g. the computer system explained later . In other words the devices may be implemented by a single computer or may be implemented by being distributed to a plurality of computers. The devices in the service provision system may be implemented by being integrated into one device. Therefore the scope of the present invention is not limited by the number of information processing devices that form and implement the service provision system .

Part of or whole of the service provision system may be provided on a private network in the in house network system . In other words the system according to the present embodiment represents only a preferred example and therefore the scope of the present invention is not limited by whether the firewall is provided between the service provision system and each of the devices accessed in order to use the service provision system .

The service provision system has a device group service provision unit implementing a service provision function for providing various services and a device group platform implementing a common platform function capable of being commonly used when various services are to be used. The service provision unit includes but not limited to the print service provision device the distribution service provision device and the portal service provision device service specifying unit . The platform includes but not limited to the authentication device the data processing control device the data processing execution control device and the data processing device execution unit .

The service provision system can be roughly divided into the service provision unit and the platform . However the rough division is based on a conceptual way of division in order for easy explanation of the present invention and therefore the service provision system is not necessarily implemented by the devices configured in the above manner.

The service provision system is connected with the terminal device a mail server the online storage and the like via the network such as the Internet. The terminal device is implemented by an information processing device e.g. the computer system explained later with the ordinary OS and the like. The terminal device is an electronic apparatus operable by the user such as a personal computer PC a tablet computer a notebook computer a smartphone or a mobile phone. The mail server is implemented by one or more information processing devices. The mail server is a server for transmitting and receiving electronic mails. The online storage is implemented by one or more information processing devices. The online storage is a server for providing a service for providing a storage area of a storage storage device .

Hardware Configuration of Computer System is a diagram of a hardware configuration example of the computer system according to the present embodiment. The terminal device the authentication device and the devices in the service provision system illustrated in are implemented by for example the computer system with a hardware configuration illustrated in .

The computer system includes but not limited to an input device a display device an external interface I F a random access memory RAM a read only memory ROM a central processing unit CPU a communication I F and a hard disk drive HDD which are connected to each other via a bus.

The input device is a keyboard a mouse a touch panel and the like which are used by the user to input information. The display device is a display or so and displays a processing result obtained by the computer system .

The communication I F is an interface for connecting the computer system to the network. The computer system can perform data communication with other devices via the communication I F .

The HDD is a nonvolatile storage device for storing programs and data. The programs and data stored in the HDD include but not limited to the OS being basic software for controlling the entire computer system and application software for providing various functions on the OS. The HDD manages the stored programs and data by a predetermined file system or database DB or the like.

The external I F is an interface with an external device such as a recording medium. The computer system can read data from and write data to the recording medium via the external I F . The recording medium is for example a flexible disk a compact disk CD a digital versatile disk DVD a secure digital SD memory card and a universal serial bus USB memory.

The ROM is a nonvolatile semiconductor memory capable of storing programs and data even after power is turned off. The ROM stores therein programs and data required for a basic input output system BIOS OS setting and network setting which are executed when the computer system is started. The RAM is a volatile semiconductor memory for temporarily storing a program and data.

The CPU implements the overall control and functions of the computer system by loading a program and data to the RAM from the storage device such as the ROM or the HDD and executing processing. The terminal device the authentication device and the devices in the service provision system according to the present embodiment can implement various processings as explained later by the hardware configuration of the computer system .

The service provision unit has a function implemented by executing various service applications application programs for providing services . The service provision unit includes but not limited to a portal service application a print service application and a distribution service application .

The portal service application is implemented by the portal service provision device executing an application program for providing a portable service. The print service application is implemented by the print service provision device executing an application program for providing a print service. The distribution service application is implemented by the distribution service provision device executing an application program for providing a distribution service.

The portal service application provides processing for tenant registration service registration and registration of various pieces of management information and the like as preprocessing for service provision using various service applications. The print service application provides a print service that causes the image forming device to print print data.

The distribution service application provides services for distributing data to a server storage device on the network such as the online storage and the mail server . In this case the distribution service application may perform one or a plurality of data processings on the data and distribute the processed data to the server storage device on the network.

The service applications are not limited to these examples and may therefore provide for example a service for transmitting stored image data projection data to a projector and a service for transmitting stored image data projection data to an electronic blackboard device. That is the service application may be any application that provides some sort of service to a device used by the user.

The platform API is an interface used when a service application operates in cooperation with the platform . The platform API is as an example a previously defined interface provided in order that the platform may receive a request from a service application and includes functions and classes or so. When the service provision system is formed with a plurality of distributed information processing devices the platform API may be for example a WebAPI accessible via the network.

The platform includes a communication unit an access control unit a setting registration unit a mail transmission unit an authorization setting processing unit a license authenticating unit a user authenticating unit a user device authenticating unit an in house cooperation authenticating unit an external cooperation authenticating unit a data processing control unit a plurality of processing queues a plurality of data processing request units and a plurality of data processing units . The management data storage unit includes a management information storage unit management information storage unit workflow storage unit a data processing information storage unit and a data storage unit .

The communication unit is a function unit for communicating with each of the devices on the network and is provided in for example the access control device . The access control unit is a function unit for performing controls according to various accesses requested from the devices on the network to the service provision system and is provided in for example the access control device .

The setting registration unit is a function unit for registering various pieces of setting information stored in the management information storage unit and is provided in for example the authentication device . The mail transmission unit is a function unit for transmitting mails and is provided in for example the authentication device . The authorization setting processing unit is a function unit for performing authorization setting corresponding to an external service such as the online storage and is provided in for example the authentication device .

The license authenticating unit is a function unit for performing authentication on license based on the license information or the tenant information stored in the management information storage unit and is provided in for example the authentication device . The user authenticating unit is a function unit for performing user authentication based on a login request from a device such as the terminal device for which device authentication is not required and is provided in for example the authentication device . The user device authenticating unit is a function unit for performing user authentication based on a login request from a device such as the image forming device for which device authentication is required and is provided in for example the authentication device . The in house cooperation authenticating unit is a function unit for performing user authentication when the user information acquired from the authentication device is used to log in at a time of authentication performed by the authentication device of the in house network system in a device such as the image forming device and is provided in for example the authentication device . The external cooperation authenticating unit is a function unit for performing authentication processing for logging in to the online storage and is provided in for example the authentication device .

The data processing control unit is a function unit for controlling data processing executed based on a request from a service application and is provided in for example the data processing control device . Each of the processing queues is a message queue for storing execution request information message from a service application on data processing of a corresponding type. The data processing control unit registers a message to each of the processing queues . Each of the processing queues is provided in for example the data processing control device . The data processing request unit is a function unit for requesting when monitoring a processing queue allocated thereto and acquiring a message registered in the allocated processing queue execution of corresponding data processing to any one of the data processing units and is provided in for example the data processing execution control device .

Each of the data processing units is a function unit for performing data processing corresponding to a request and is provided in for example the data processing device . The data processing unit executes as examples division processing for data processing requested from a service application data format conversion processing of conversion of data format e.g. processing for conversion of a data format into a portable document format PDF or PDF processing optical character recognition OCR processing for performing OCR and processing for distributing uploading data to the online storage or the mail server . The data processing request units and the data processing units may be provided in the data processing execution control device according to the content of the data processing.

The management information storage unit stores therein management information such as license information tenant identification data ID information user information device information service information and registration information and is provided in for example the authentication device . The data processing information storage unit stores therein information on requested data processing and is provided in for example the data processing control device . The data storage unit stores therein application data print data and the like and the other data and is provided in for example the data processing control device .

The license type is information indicating a type of license. The type of license includes tenant print service distribution service and the like. The ID is ID of a license and is information used for license authentication. The registration code is information used for registration of a tenant. The registration status is information representing a status Registered or Unregistered as to whether the user completes license registration ID registration .

The tenant ID is information for identifying an organization and is registered through tenant registration performed by the user. The name is a name of a company or a name of an organization or the like and is set by the user e.g. a manager of the organization upon registration of the tenant ID.

The service ID is information for identifying a service usable by the user belonging to the organization and is set by the user e.g. a manager of the organization after the tenant registration. The service type is information for specifying a type of registered service. The validity period is a validity period during which the service is available and is set for example at a time point at which a start of use of the service is registered. The external service is information on an external service for providing a service in cooperation with the service provision system . The external service includes for example a data storage service provided by the online storage . The address information is a mail address of a manager of the organization and is set when the tenant is registered.

The tenant ID is information for identifying an organization to which the user belongs. The user ID and password for login are information for identifying and authorizing the user to log in to the service provision system . The user ID for login may be any information capable of identifying the user.

The user ID for in house authentication is information for identifying and authenticating the user in the authentication device of the in house network system . The user ID for in house authentication may be user identification information capable of identifying the user in the authentication device of the in house network system and may therefore be a card ID of an integrated circuit IC card or a terminal ID of a mobile terminal or so carried by the user.

The account and password for the online storage are identification and authentication information for logging in to the online storage . The authorization token is information for using the online storage within a scope of specific authority. The scope is information for specifying a scope of using the online storage . The account may be any one of the user ID the user name and the address for the online storage and may be any authentication information used for authentication when the user is to log in to a target online storage . The address information is a user mail address.

The online storage is an example of external services. The information such as Account Password Authorization Token and Scope is an example of information used when an external service is used. The authorization token represents a scope of usage authority upon the usage of services as to which service is to be used or as to which resource is allowed to be accessed when the user uses a service and can set the authorization by using for example standard technology of API authorization called OAuth. When usage of an external service such as the online storage is viewed from the service provision system the external service functions as a service provider of OAuth and the service provision system functions as a consumer of OAuth.

The tenant ID is information for identifying an organization in which the device is used. The device ID is information for identifying the device and is used for device authentication. The device ID is as an example a machine number of the device. The service ID and the service type are identification information and contents of services with which the device can be provided. The start date of use is a date on which the provision of the service to the device is started. The end date of use is a date on which the provision of the service to the device is ended.

The device registered in the device information can use services of the registered service ID during a period from the start date of use of the service ID to the end date of use. The validity period may not be limited there is substantially no restriction to the period depending on the type of service or the type of license. Even if the device is not registered in the device information the device can use services functions provided by the service provision system . However some of the functions provided by the service cannot be used unless the device authentication is performed on the device.

In the present embodiment the terminal device is exemplified as an example of the device for which registration of the device information is not required and the image forming device is exemplified as an example of the device for which registration is required. As an example of functions usable in the terminal device registration of various pieces of management information and entry or deletion of data for an object to be printed are exemplified while as an example of functions usable in the image forming device acquisition of print data and transmission of distribution data are exemplified. A provider side for providing services may determine whether the device authentication is required depending on which of the functions is used and there may be any service without requiring the device authentication.

The external service ID is information for specifying identifying an external service. The service name is a name of the external service. The client ID is information issued by the external service and used by the external service to identify the service provision system . The client secret is secret information for guaranteeing the personal identification of a client ID and is information functioning as a password. The product name is information for specifying a service application. The scope is information for specifying a scope of using the external service. The authorization destination URL is a URL of an authorization system provided in the external service e.g. a URL for an authorization server provided in the external service . The redirect destination URL is a URL of the service provision system redirected from the external service e.g. a URL of a function as an authorized client of the authorization setting processing unit .

The service name is a name representing an outline of service contents. The service ID is information for identifying a service. The options indicate a list of data processings capable of being added to main data processing of the service. For example in the example of as options of the distribution service the user can add data processing such as optical character recognition OCR processing conversion of a file format e.g. PDF processing image correction barcode reading and extraction of document information. For example as an option of the print service the user can add Upper limit management processing processing for managing an upper limit of the possible number of prints for each user to the options.

The service provision system manages such service information and it is thereby possible to provide the service with other data processings added to the main data processing thereof.

The tenant ID is information for identifying an organization capable of using the registered service. The service name is a name of the registered service. The service ID is information for identifying the registered service.

The available options represent a list of data processings of available options together with the main data processing of the registered service. For the available options the user selects data processing from among the data processings illustrated in the options of when a service is registered. As illustrated in the main data processing distribution processing A is represented on the top line in a box of Available Options and data processings OCR processing B PDF processing C Barcode processing D and Image correction processing E etc. are represented as options on the second and subsequent lines. As illustrated in the box of Available Options on a second row in Folder distribution B for distributing data to a specified folder may be included as optional data processing.

The workflow is information representing an execution sequence of data processings selected as available options. The workflow is created by the user manager for example at a time of registering a service by combining the data processings indicated in Available Options of .

As understood from the explanation above the tenant ID is the information for identifying an organization group company school etc to which the user belongs. The tenant ID is information that the service provision system manages users devices and services by each organization associated with the service provided by the service provision system the user using the service and with the device that uses the service. In addition the tenant ID is information use object specification information for specifying a use object in such a manner that which service among the services that the service provision system can provide is provided to which user and to which device.

First of all a user e.g. a manager of a company or of an organization wishing to register a tenant ID previously acquires a tenant ID first service identification information and a registration code information for registration from a service provider e.g. a person in charge who provides and sells services of the service provision system . As an acquisition method a method of directly acquiring data from a service provider or a method in which the terminal device of the user accesses a dedicated site managed by the service provider to acquire data is exemplified. Thereafter the user accesses the portal site of the service provision system from the terminal device Step S .

The access control unit of the service provision system allows an access because of the access to the portal site and causes the terminal device to access the portal service application first service . The portal service application causes the display device of the terminal device to display a top screen. The user operates the input device of the terminal device and can select whether to request login or to request new tenant registration from the top screen. The explanation is provided herein assuming that the new tenant registration is requested. In the case of the user manager or other user registered in the user information of the management information storage unit the login can be made by inputting the tenant ID the user ID and the password.

When the new tenant registration is requested registration request the portal service application of the service provision system displays an input screen for performing temporary registration of the tenant ID on the display device of the terminal device . The user operates the input device of the terminal device to perform an input for temporary registration of the tenant ID and then makes a request for the temporary registration Step S .

Information to be input in the input screen is information which may also be called usage area information on a country or on a region where services are used information indicating agreement to terms of use provisions displayed according to a country or a region where services are used a tenant ID a registration code a mail address a use language and the like. Therefore the service provision system stores the terms of use provisions information according to the country or the region where it is used performs a display control to display the terms of use on the input screen according to the usage area information selected and input by the user and causes the user to select whether he she agrees to the terms of use.

When the temporary registration is requested from the terminal device of the user the portal service application requests the license authenticating unit license authenticating unit to perform verification processing for validity of the input tenant ID and registration code. The license authenticating unit having received the request executes the license authentication processing and determines verifies whether the input tenant ID and registration code are stored in the license information stored by the management information storage unit license information storage unit . When the input tenant ID and registration code are stored therein and if the registration status of the tenant ID is Unregistered then the license authenticating unit determines that the input tenant ID and registration code are valid information the input tenant ID license is authenticated .

The license authenticating unit notifies the portal service application of a result of license authentication. When the tenant ID and the registration code are valid the portal service application requests the setting registration unit registration unit to register the tenant ID the mail address and the usage area information. The setting registration unit registers stores the tenant ID the mail address and the usage area information in the tenant information of the management information storage unit according to the request from the portal service application . When the setting registration unit performs the registration then the portal service application generates a URL for formal registration as an access destination in order to display a screen for formal registration composes a mail describing the URL for formal registration and requests the mail transmission unit to transmit the mail.

The mail transmission unit transmits the mail using the mail address as the destination input by the user in the terminal device . When the mail is transmitted by the mail transmission unit the portal service application causes the display device of the terminal device to display a notification screen indicating the transmission of the mail. The generated URL for formal registration is managed based on the validity period elapsed since the generation e.g. one hour . It is assumed that at least either one of the tenant ID and the registration code is not written in the mail.

Subsequently the user accesses the URL for formal registration written in the mail received by the terminal device . The terminal device used for the access in this case is not necessarily the same terminal device as that used for the temporary registration. The access control unit causes the terminal device to access the portal service application portal service provision device . The portal service application checks whether the access to the URL for formal registration is valid whether the access is made to the generated URL for formal registration and is within the validity period . When the access is valid then the portal service application causes the display device of the terminal device to display a formal registration screen. The user operates the input device of the terminal device to perform an input for formal registration of the tenant ID and then makes a request for the formal registration Step S .

The information to be input in the formal registration screen includes the tenant information such as the tenant ID the name and the registration code and the user information such as the user ID and password for login and the mail address. The portal service application may display the formal registration screen in a state of previously inputting either one of the tenant ID and the registration code having been already input by the user upon the temporary registration. However at least either one of the information to be input by the user of the tenant ID and the registration code is assumed not to be written in the mail to the URL for formal registration.

When the formal registration is requested from the terminal device of the user the portal service application requests the license authenticating unit to perform validation processing formal registration processing of the license based on the input tenant ID and registration code. The license authenticating unit having received the request executes the license authentication processing. Specifically the license authenticating unit determines whether the input tenant ID and registration code are stored in the license information stored by the management information storage unit . When the tenant ID and the registration code are stored therein and if the registration status of the corresponding tenant ID is Unregistered the license authenticating unit determines that the input tenant ID and registration code are valid information. When it is determined that the tenant ID and the registration code are valid then the license authenticating unit requests the status change of the license information to the setting registration unit .

The setting registration unit changes the value of status information associated with the valid tenant ID and registration code to Registered in the license information stored by the management information storage unit . After the completion of the validation processing the portal service application requests the setting registration unit to register the name and the user information input by the user in the terminal device . The setting registration unit registers the name in the tenant information stored by the management information storage unit and registers the tenant ID the user ID and password for login the mail address and the like in the user information.

When the setting registration unit completes the registration of settings of various pieces of information the portal service application composes a mail with a completion notification of organization registration and requests the mail transmission unit to transmit the mail. The mail transmission unit transmits the mail with the completion notification of organization registration to the mail address input by the user in the terminal device . The user then checks a completion screen of organization registration displayed on the display device of the terminal device . In this way the completion of registration of the tenant ID the user ID and the password enables the user to log in to the top screen of the portal site next time and to perform registration processing of the tenant information the user information and the device information associated with the tenant ID after the login.

The user manager operates the input device of the terminal device to input the tenant ID the user ID and the password from the top screen of the portal site and requests login. The portal service application having received the request requests the user authentication to the user authenticating unit . The user authenticating unit determines verifies whether the tenant ID the user ID and the password received from the terminal device are stored in the user information of the management information storage unit and authenticates the user when the received information is stored therein. When the user authenticating unit authenticates the user then the portal service application allows the login.

Then the login user performs service registration of the service desired to be used Step S . In the case of performing the service registration the user operates the input device of the terminal device to input the service ID from a service registration screen displayed on the display device of the terminal device and requests the service registration.

When the service registration is requested from the terminal device of the user the portal service application acquires a license type service type associated with the license ID that coincides with the received service ID from the license information of the management information storage unit . Furthermore the portal service application acquires the usage area information associated with the tenant ID from the tenant information. The portal service application then displays the terms of use provisions according to the license type and the usage area information on the display device of the terminal device and causes the user to select whether he she agrees to the terms of use. In other words the service provision system holds terms of use provisions information according to countries or regions where it is used for each service license type and performs display control so as to display the terms of use according to the usage area information selected and input by the user.

When the user operates the input device of the terminal device to input the selection so as to agree to the terms of use the portal service application requests the license authenticating unit to perform service registration processing based on the tenant ID and the service ID received from the terminal device . The license authenticating unit checks verifies whether the service ID license ID received from the terminal device is stored in the license information of the management information storage unit . When the service ID is stored therein then the license authenticating unit determines that the service ID is valid the service ID is authenticated .

When it is determined that the service ID is valid the license authenticating unit requests the registration of the service ID to the setting registration unit . The setting registration unit registers the service ID associated with the tenant ID received from the terminal device in the tenant information stored by the management information storage unit .

Subsequently the user performs device registration of the service ID Step S . The user operates the input device of the terminal device to input the service ID and the device ID of a device allowed to use the service by the input service ID from a device registration screen on the display device of the terminal device and requests the device registration of the service ID.

When the device registration of the service ID is requested from the terminal device of the user the portal service application requests the license authenticating unit to perform device registration processing of the service ID based on the tenant ID the service ID and the device ID received from the terminal device . The license authenticating unit determines verifies whether the tenant ID and the service ID received from the terminal device are stored in the tenant information of the management information storage unit . When the tenant ID and the service ID are stored therein then the license authenticating unit determines whether the registration status of the service ID license ID received from the terminal device is Unregistered in the license information.

When the registration status is Unregistered when the device registration of the service ID is not performed the license authenticating unit requests the device registration of the service ID to the setting registration unit . The setting registration unit registers the tenant ID the device ID and the service ID which are received from the terminal device and also the license information based on these IDs and information such as a service type a start date of use and an end date of use which are identified from the tenant information in the device information of the management information storage unit .

Stored in the start date of use is for example a date on which the device registration is performed. Stored in the end date of use is a final date of a license period included in contract information when the start date of use of this record is set as starting point. However the start date of use can be specified when the start of use of the license is requested. In this case the start date of use specified when the start of use of the license is requested may be stored in the start date of use of this record.

When the device registration of the service ID is completed the setting registration unit further changes the registration status in the license information of the service ID for which device registration is performed to Registered . Thereafter the user operates the input device of the terminal device and enables registration of an available option in the registered service.

In the service provision system the processing of executing various data processings will be explained below the data processings being requested from the service applications to the data processing control unit data processing control unit the processing queues execution request storage units the data processing request units and the data processing units data processing units which are provided in the platform . The processing queues form a message queue .

Each of the service applications includes a processing request unit . First of all the processing request unit of the service application records processing target data data to be processed such as application data and image data in the data storage unit and transmits a data transmission request may be called request being the execution request information to the data processing control unit Step S . The request includes processing contents of data processing and information of the storage device as a recording destination of the processing target data e.g. URI .

The data processing control unit analyzes the received request registers the message in the processing queue according to the processing content in the message queue and also registers the request in the data processing information storage unit Step S . The request includes a recording destination of data a processing content of the data processing and a status of the request. The status of the request includes reception in execution completion and the like. The status of the request represents a status indicating a processing status of data processing. The status of the request is a status of reception when the data processing control unit registers the request.

Each of the data processing request units is assigned with one processing queue or with a plurality of processing queues . Each of the data processing request units monitors the assigned processing queue and acquires a message registered in the processing queue Step S .

In the example of a first data processing request unit monitors a first processing queue and a second processing queue . A second data processing request unit monitors the first processing queue the second processing queue and a third processing queue . An M th M 2 or more integer data processing request unit M monitors an N th N 2 or more integer processing queue N . How to be assigned can be set or changed as necessary.

Each of the data processing units executes data processing. Each of the data processing units may execute data processing different from that of the other data processing units or may execute the same data processing. Each of the data processing request units acquires a request from the data processing information storage unit based on the message acquired from the assigned processing queue . Each of the data processing request units causes the data processing unit corresponding to the data processing indicated in the request to execute the requested processing Step S . For example each of the data processing request units causes any one of the first to an L th L 2 or more integer data processing units to L to execute the data processing.

Subsequently each of the data processing request units receives an execution result of the processing executed by the data processing unit . Each of the data processing request units updates the request from the execution result such that the executed processing is deleted from the request and the status is changed if the status of the request is changed and registers the updated request in the data processing information storage unit . Each of the data processing request units registers the message in the corresponding processing queue if there is any data processing to be executed next Step S .

When the data processing is performed on the acquired processing target data and the processing target data between before and after the processing are thereby changed from each other the data processing unit records the processing target data after the processing in the data storage unit and contains the recording destination of the processing target data after the processing in the request.

Some specific examples of the data processing executed by each of the data processing units will be exemplified herein. The contents of the data processing are not limited to the specific examples.

The data processing unit executes distribution processing for transmitting data to the online storage . The data processing unit also executes reception processing for receiving data from the online storage . Furthermore the data processing unit executes distribution processing for transmitting a mail to the mail server . The data processing unit also executes reception processing for receiving a mail from the mail server .

The data processing unit executes processing OCR processing for recognizing characters in image data to generate text data. The data processing unit executes conversion processing for converting image data into another data format e.g. PDF processing for converting data into PDF data . The data processing unit executes conversion processing for converting document data to page description language PDL data. The data processing unit executes correction processing of image data. The correction processing includes as examples tilt correction removal of noise punch hole and the like top and bottom identification resolution conversion and removal of white paper. The data processing unit executes recognition processing of barcode included in the image data and processing of dividing a document into parts using a form with barcode as a divider. The data processing unit executes archiver processing for compressing image data to for example a Zip format. The data processing unit executes flow branching processing for branching processing subsequently performed or a distribution destination depending on conditions. The data processing unit executes image conversion for converting between image formats of image data. The data processing unit executes document information replacement for replacing between bibliographic information according to conditions. The data processing unit executes table replacement for replacing between tables included in the bibliographic information according to conditions. The data processing unit executes session specification input processing for selecting and distributing an only arbitrary page. The data processing unit executes style sheet transformation for transforming an output format of the bibliographic information from an Extensible Markup Language XML to an Extensible Stylesheet Language XSL .

The data processing unit executes mail composition processing. The data processing unit executes storage processing for storing data in a predetermined storage area. The data processing unit executes monitoring processing for monitoring whether the data is stored in a predetermined folder of the online storage .

The data processing unit executes deletion processing for deleting the request indicating deletion of the messages registered in the processing queues . The data processing unit executes priority processing for causing a corresponding data processing unit to preferentially process the request indicating priority of the requests registered in the processing queues . The data processing unit executes error processing when the data processing performed on the request fails.

When the user is to perform authentication from the terminal device the terminal device displays an input screen to which the tenant ID and the user ID and password for login to the service provision system are input and receives the login information Step S . When the user inputs the login information the tenant ID and the user ID and password for login and requests login to the service provision system the terminal device transmits an authentication request of the input login information request for user device authentication to the service provision system Step S . The access control unit of the service provision system receives the login information from the terminal device and requests the authentication to the user authenticating unit .

The user authenticating unit checks whether a combination of the tenant ID and the user ID and password for login which are received from the terminal device is included in the user information stored by the management information storage unit . When the combination is included therein then the user authenticating unit determines that the user authentication is successful Step S . When the combination is not included therein then the user authenticating unit determines that the user authentication fails. When the user authentication is successful the user authenticating unit allows the login to the service provision system login for using the service . The access control unit sends back a login response indicating the authentication result to the terminal device Step S .

The image forming device stores setting as to whether to use the user ID first user identification information and password first user authentication information for login or to use the user ID for in house authentication second user identification information in order for login to the service provision system . The manager or the like can change the setting as necessary. The image forming device stores the tenant ID organization authentication information and the device ID device identification information in its own storage area.

When the user is to perform authentication from the image forming device and if the setting is made to use the user ID first user identification information and password first user authentication information for login then the image forming device displays an input screen to which the user ID and password for login to the service provision system are input and receives the login information Step S . When the user inputs the login information the user ID and password for login and requests login to the service provision system the image forming device transmits an authentication request request for user device authentication of the input login information and the stored tenant ID and device ID device authentication information to the service provision system Step S . The access control unit authentication information receiving unit of the service provision system receives these pieces of information from the image forming device and requests the authentication to the user device authenticating unit authentication unit .

The user device authenticating unit checks whether a combination of the tenant. ID and the device ID which are received from the image forming device is included in the device information stored by the management information storage unit . When the combination is included therein then the user device authenticating unit determines that the device authentication is successful Step S . When the combination of the tenant ID and the device ID is not included therein then the user device authenticating unit determines that the device authentication fails. The user device authenticating unit further checks whether a combination of the tenant ID and the user ID and password for login which are received from the image forming device is included in the user information stored by the management information storage unit . When the combination is included therein then the user device authenticating unit determines that the user authentication is successful. When the combination of the tenant ID and the user ID and password for login is not included therein then the user device authenticating unit determines that the user authentication fails. When the device authentication and the user authentication are successful then the user device authenticating unit allows the login to the service provision system login for using services . The access control unit then sends back a login response indicating the authentication result to the image forming device Step S .

When the user is to perform authentication from the image forming device and if the setting is made to use the user ID for in house authentication second user identification information then the user executes the user authentication in the image forming device . The user authentication is executed to use the image forming device or to use a specific function of the image forming device . An example in which the authentication device performs user authentication using a card ID carried by the user is explained herein.

First of all the user causes a card reader connected to the image forming device to read the card ID Step S . At this time the user may also input the password second user authentication information . The image forming device transmits the card ID read by the card reader to the authentication device and requests user authentication Step S . The authentication device previously stores the user authentication information associated with the card ID and the user ID in the storage area and checks whether the user ID and password associated with the received card ID can be identified. When the user ID can be identified the authentication device determines that the user authentication is successful Step S . The authentication device transmits the identified user ID with the authentication result indicating successful authentication to the image forming device Step S .

Subsequently when the user requests a login to the service provision system e.g. the user selects login to the service provision system from the display screen the image forming device transmits an authentication request request for in house cooperation authentication of the identified user ID and the stored tenant ID and device ID device authentication information to the service provision system Step S . The access control unit authentication information receiving unit receives these pieces of information from the image forming device and requests authentication to the in house cooperation authenticating unit authentication unit .

The in house cooperation authenticating unit checks whether a combination of the tenant ID and the device ID which are received from the image forming device is included in the device information stored by the management information storage unit . When the combination is included therein then the in house cooperation authenticating unit determines that the device authentication is successful Step S . When the combination of the tenant ID and the device ID is not included therein then the in house cooperation authenticating unit. determines that the device authentication fails. The in house cooperation authenticating unit further checks whether a combination of the tenant ID and the user ID for in house authentication which are received from the image forming device is included in the user information stored by the management information storage unit . When the combination is included therein then the in house cooperation authenticating unit determines that the user authentication is successful. When the combination of the tenant ID and the user ID for in house authentication is not included therein then the in house cooperation authenticating unit determines that the user authentication fails. When the device authentication and the user authentication are successful then the in house cooperation authenticating unit allows the login to the service provision system login for using services . The access control unit then sends back a login response indicating the authentication result to the image forming device Step S .

When the in house cooperation authenticating unit determines that the device authentication is successful but the user authentication is unsuccessful the service provision system may transmit screen information of a screen to which the user ID and password for login are input to the image forming device and cause the image forming device to display the input screen. In this case when the user inputs the user ID and password for login and requests the login again then the image forming device transmits the input user ID and password for login to the user device authenticating unit of the service provision system and requests login. The user device authenticating unit checks whether the combination of the tenant ID and the user ID and password for login which are received from the image forming device is included in the user information stored by the management information storage unit . When the combination is included therein then the user device authenticating unit determines that the user authentication is successful and allows the login to the service provision system . Moreover the setting registration unit registers the user ID for in house authentication received from the image forming device in association with the tenant ID and the user ID and password for login which are received from the image forming device included in the user information stored by the management information storage unit as a result of the successful login. By thus doing when the user is to log in from the image forming device next time the user can log in using the user ID for in house authentication.

The manager user operates the input device of the terminal device to log in to the service provision system and selects a desired online storage external service from a list of external services stored in the external service information of the management information storage unit on the registration screen of the external services displayed on the display device of the terminal device . When the user selects any one of online storages the terminal device requests registration of the selected online storage to the in house cooperation authenticating unit .

The portal service application having received the registration request requests the registration of the selected online storage to the setting registration unit . The setting registration unit registers the selected online storage associated with the tenant ID of the manager in the tenant information of the management information storage unit Step S .

The manager selects an user ID of the user to which authorization setting is desired to be applied an external service ID for performing the authorization setting or a service name of an external service and a scope to be set to the user on an authorization setting screen of the portal site. These pieces of information are selected and the terminal device thereby requests registration of the authorization setting to the service provision system . The portal service application receives the request of the authorization setting Step S .

The portal service application having received the request of the authorization setting requests the authorization setting to the authorization setting processing unit . The authorization setting processing unit acquires a parameter required for the authorization setting from the external service information of the management information storage unit Step S . The parameter required for authorization setting includes a client ID associated with the selected external service ID a redirect destination URL and an arbitrary session key to maintain a session in addition to the user ID the external service ID and the scope selected by the manager.

The authorization setting processing unit having acquired the parameter required for the authorization setting acquires an authorization destination URL associated with the selected external service ID from the external service information of the management information storage unit . The authorization setting processing unit redirects the request including the parameter required for setting request in which the parameter required for setting is the query of a GET request from the terminal device to the authorization destination URL Step S .

By redirecting the request the authorization setting is performed between the terminal device and the online storage . After the authorization setting the request is further redirected from the online storage to the authorization setting processing unit . This causes the session at hypertext transfer protocol HTTP level to be discontinued between the terminal device and the online storage . Therefore the terminal device and the online storage use session keys in order to maintain the same session.

The redirected online storage displays the login screen on the terminal device . The manager requests a login to the online storage from the login screen of the terminal device . When the login is successful the online storage displays an authorization screen on the terminal device . The manager checks the authorization screen and operates the terminal device when authorization is to be performed to request authorization e.g. depresses an authorize button displayed on the authorization screen . The online storage having received the request of the authorization setting registers the authorization and redirects an authorization code indicating that the authorization is allowed and a session key from the terminal device to a redirect destination URL. Through this redirect the authorization setting processing unit of the service provision system receives the authorization code Step S . When the manager has already logged in at the time of redirect to the online storage the display of the login screen is omitted.

The authorization setting processing unit having received the authorization code acquires a parameter required for acquiring an authorization token from the external service information of the management information storage unit Step S . The parameter required for acquiring an authorization token is a received authorization code. The required parameter includes as examples a client ID and client secret associated with the external service ID of the online storage that transmits the authorization code.

Subsequently the authorization setting processing unit transmits the acquired client ID and client secret and the received authorization code to the online storage and requests acquisition of the authorization token Step S . The online storage verifies the received authorization token and transmits the authorization token to the authorization setting processing unit of the service provision system . The authorization setting processing unit having received the authorization token requests registration of the authorization token to the setting registration unit Step S . The setting registration unit registers the authorization token and the scope for the selected user in the user information of the management information storage unit . When the registration of the authorization token is completed the authorization setting processing unit notifies the portal service application of the registration completion. The portal service application displays the screen indicating the setting result of the authorization setting on the terminal device .

The online storage may also transmit when transmitting the authorization token to the service provision system the validity period of the authorization token along with a refresh token in order to reissue an authorization token in the case of expiration of the validity period.

Cooperation processing with an external service online storage or so will further be explained next. When the user logs in to the service provision system and requests a cooperation processing with the external service using the service provision system through the terminal device or the image forming device the external cooperation authenticating unit performs the login processing to the external service.

When receiving the login request to a specified external service online storage from for example the data processing request unit or the data processing unit the external cooperation authenticating unit acquires information third user authentication information required for the login processing to the specified external service online storage associated with the user having logged in to the service provision system specifically associated with the tenant ID and the user ID and password for login of the user having logged in . For example if the login is made to Online Storage A illustrated in the external cooperation authenticating unit acquires an account and password of the online storage A and acquires if the login is made to Online Storage B an account and an authorization token of the online storage B.

When the cooperating external service is an external service for which authorization setting is not performed as is the online storage A illustrated in and that performs only the login processing the external cooperation authenticating unit transmits a login request with the acquired account and password authentication information for the external service to the online storage A. The online storage A receives the login request and performs authentication on the received account and password. The online storage A having received the login request transmits a response indicating that the login is permitted when the authentication is successful and transmits a response indicating that the login is not permitted when the authentication fails to the external cooperation authenticating unit .

The external cooperation authenticating unit receives the response indicating the permission of the login from the online storage A and this enables the service provision system to upload store the data to for example the online storage A or to download acquire the data from the online storage A.

When the cooperating external service is an external service for which authorization setting is performed as is the online storage B illustrated in the external cooperation authenticating unit transmits the login request with the acquired account authentication information for the external service to the online storage B. The online storage B receives the login request and performs authentication on the received account and password transmits a response indicating that the login is permitted when the authentication is successful and transmits a response indicating that the login is not permitted when the authentication fails to the external cooperation authenticating unit .

The external cooperation authenticating unit receives the response indicating the permission of the login from the online storage B and this enables the service provision system to request the processing to the online storage B using the authorization token within an authorized and set scope of the usage scope of authority .

The terminal device displays the service registration screen after the completion of the login to the service provision system and receives an operation of starting registration of the service from the user manager Step S . When the user instructs to start the registration of service on the service registration screen the terminal device transmits a registration request to the service provision system Step S .

When receiving the registration request from the terminal device the portal service application transmits the screen which displays a list of available services stored in the management information storage unit associated with the tenant ID of the organization to which the user belongs to the terminal device Step S . The terminal device displays the screen displaying the list of the received services and receives an operation of selecting a service sent from the user Step S . When the user selects any one of the services on the screen displaying the list of the services the terminal device transmits selection information of the service to the service provision system Step S .

Subsequently the portal service application transmits a screen displaying a list of data processings capable of addition stored in association with the selected service in the management information storage unit to the terminal device Step S . The terminal device displays the list of the received data processings and receives a user operation of creating a workflow Step S . The data processing capable of addition includes processing such as optical character recognition OCR processing conversion of file format e.g. PDF processing image correction and barcode reading.

The user operates the terminal device to create a workflow that defines an execution sequence of data processing. Upon completion of creation of the workflow the terminal device transmits the setting information of the workflow to the service provision system Step S . When receiving the setting information of the workflow the portal service application registers the setting information of the workflow associated with the service in the management information storage unit Step S .

When receiving for example the image data captured by the image forming device the service provision system executes for example the OCR processing as a first processing. This enables the service provision system to generate text data from the image data.

Subsequently the service provision system performs the PDF processing as a second processing. This enables the service provision system to convert the image data to PDF data. Then the service provision system distributes the PDF data and the text data to the previously registered online storage as a third processing.

The service provision system can collectively execute a plurality of data processings in the above manner thus improving work efficiency.

The service provision system activates a service application specified by the selection information. The distribution service application is activated herein. The distribution service application transmits a setting screen for various pieces of information required for execution of the data processing included in the selected workflow to the image forming device and causes the image forming device to display the setting screen Step S . For example the distribution service application causes the image forming device to display the setting screen for setting a URL of the online storage as a data distribution destination.

Subsequently the user inputs required information to the setting screen Step S . Then the image forming device transmits the setting information input by the user e.g. a URL of the online storage to the service provision system Step S . When receiving the setting information the distribution service application transmits a response screen to the image forming device and causes the image forming device to display the response screen Step S .

The user then presses a scan start button or so to cause the image forming device to scan Step S . The image forming device executes scan and transmits image data acquired by the scan and a service use request to the service provision system Step S .

For example when the workflow illustrated in is selected the distribution service application transmits a request of OCR processing to the data processing control unit Step S . When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S . The message registered in the processing queue is temporarily stored. When the data processing unit in charge of the OCR processing becomes capable of processing the data processing request unit in charge of the OCR processing acquires the message registered in the corresponding processing queue Step s . The data processing request unit in charge of the OCR processing instructs the data processing unit in charge of the OCR processing to execute the OCR processing indicated in the acquired message Step S . When receiving the instruction of the execution the data processing unit in charge of the OCR processing executes the OCR processing Step S . After the completion of the processing the data processing unit in charge of the OCR processing sends back an execution result to the data processing request unit in charge of the OCR processing Step . The data processing request unit in charge of the OCR processing then sends back a response message to the distribution service application Step S .

Subsequently the distribution service application transmits a request of the PDF processing to the data processing control unit Step S . When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S . The message registered in the processing queue is temporarily stored. When the data processing unit in charge of the PDF processing becomes capable of processing the data processing request unit in charge of the PDF processing acquires a message registered in the corresponding processing queue Step . The data processing request unit in charge of the PDF processing instructs the data processing unit in charge of the PDF processing to execute the PDF processing indicated in the acquired message Step S . When receiving the instruction of the execution the data processing unit in charge of the PDF processing executes the PDF processing Step S . After the completion of the processing the data processing unit in charge of the PDF processing sends back an execution result to the data processing request unit in charge of the PDF processing Step S . The data processing request unit in charge of the PDF processing then sends back a response message to the distribution service application Step S .

Subsequently the distribution service application transmits a request of distribution processing to the data processing control unit Step S . When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S . The message registered in the processing queue is temporarily stored. When the data processing unit in charge of the distribution processing becomes capable of processing the data processing request unit in charge of the distribution processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the distribution processing instructs the data processing unit in charge of the distribution processing to execute the distribution processing indicated in the acquired message Step S . When receiving the instruction of the execution the data processing unit in charge of the distribution processing executes the distribution processing to the online storage of a set URL Step S . After the completion of the processing the data processing unit in charge of the distribution processing sends back an execution result to the data processing request unit in charge of the distribution processing Step S . Then the data processing request unit in charge of the distribution processing sends back a response message to the distribution service application Step S .

As explained above according to the service provision system the service for performing data processing according to the workflow can be provided to the device such as the image forming device via the network under an environment used by a large number of unspecified users such as cloud services.

First of all the user operates the display screen of the image forming device to select a service Step S . The mail distribution service is selected herein. When the user selects the service the image forming device transmits selection information indicating the selected service to the service provision system Step S .

The service provision system activates a service application corresponding to the selection information. The distribution service application is activated herein. The distribution service application transmits a setting screen for various pieces of information required for executing the selected service to the image forming device and causes the image forming device to display the setting screen Step S .

In the present example the distribution service application causes the image forming device to display the setting screen for setting a mail address. In this case the distribution service application causes the image forming device to display a list of previously registered mail addresses and display the setting screen so as to prompt the user to select a mail address as a destination from the list. Instead of this sequence the distribution service application may cause the image forming device to display the setting screen so as to prompt the user to directly input a mail address in text.

The user then inputs required information to the setting screen Step S . In the present example the user either selects the mail address from the list or directly inputs the mail address.

Subsequently the image forming device transmits the setting information input by the user to the service provision system Step S . When receiving the setting information the distribution service application transmits a setting completion screen to the image forming device and causes the image forming device to display the setting completion screen Step S .

When the setting completion screen is displayed the user then presses the scan start button and causes the image forming device to perform scanning Step S . The image forming device performs the scanning and transmits a service use request to the service provision system Step S . At this time the image forming device also transmits the image data obtained by scanning to the service provision system .

When receiving the service use request from the image forming device Step S of the distribution service application determines whether the mail address is directly input by the user Step S . When the mail address is not directly input that is when the mail address is selected from the list No at Step S then the distribution service application transmits a request of distribution processing to the data processing control unit Step S . At this time the distribution service application includes the mail address in the request.

When the mail address is directly input Yes at Step S the distribution service application determines whether a domain of the input address is an authorized domain Step S . In this case the distribution service application may determine whether the domain of the input mail address is a prohibited domain.

When the domain of the input mail address is not an authorized domain or is a prohibited domain NG at Step S the distribution service application causes the image forming device to execute error processing Step S . When the domain of the input mail address is an authorized domain or is not a prohibited domain OK at Step S the distribution service application transmits a request of distribution processing to the data processing control unit Step S . At this time the distribution service application includes the mail address in the request.

When receiving the request Steps S S the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S . The message registered in the processing queue is temporarily stored. When a data processing unit in charge of mail processing becomes capable of processing a data processing request unit in charge of mail processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the mail processing instructs the data processing unit in charge of the mail processing to execute the mail processing indicated in the acquired message Step S .

When receiving the instruction of the execution the data processing unit in charge of the mail processing composes electronic mail e mail including the image data obtained by scanning Step S . At this time the data processing unit in charge of the mail processing sets a destination of the e mail in the mail address input or selected by the user. The data processing unit in charge of the mail processing then transmits the composed e mail to the mail server Step S .

As explained above according to the service provision system the mail distribution service can be provided to any device on the network under the environment used by a large number of unspecified users such as cloud services. When the service for distributing e mail is to be provided the service provision system may execute a plurality of data processings set in the workflow and then perform the distribution of e mail. When the mail distribution service is to be provided the service provision system may execute distribution processing of the e mail at a specified time. When the mail distribution service is to be provided the service provision system may distribute e mail including data stored in a specified folder or data received by facsimile instead of distributing scanned image data.

First of all the user operates the display screen of the image forming device to select a service Step S . The distribution service is selected herein. When the user selects the service the image forming device transmits selection information indicating the selected service to the service provision system Step S .

The service provision system activates a service application corresponding to the selection information. The distribution service application is activated herein. The distribution service application transmits the setting screen for various pieces of information required for executing the selected service to the image forming device and causes the image forming device to display the setting screen Step S . In the present example the distribution service application causes the image forming device to display the setting screen including an item for setting a distribution time and an item for setting a URL of the online storage as a distribution destination of the data.

Subsequently the user inputs required information to the setting screen Step S . In the present example the user inputs a distribution time a URL of the online storage and the like. An input method of the distribution time may be a method of directly inputting a specified time or may be a method of using a format for selecting a distribution time from among a plurality of preset candidates.

Subsequently the image forming device transmits the setting information input by the user to the service provision system Step S . When receiving the setting information the distribution service application transmits a setting completion screen to the image forming device and causes the image forming device to display the setting completion screen Step S .

When the setting completion screen is displayed then the user presses the scan start button and causes the image forming device to perform scanning Step S . The image forming device performs the scanning and transmits a service use request to the service provision system Step S . At this time the image forming device also transmits the image data obtained by scanning to the service provision system .

When receiving the service use request from the image forming device Step S of then the distribution service application determines whether a distribution time is specified Step S . When the distribution time is not specified No at Step S then the distribution service application transmits a request of distribution processing to the data processing control unit Step S . When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue . The message registered in the processing queue is temporarily stored.

When the data processing unit in charge of the distribution processing becomes capable of processing the data processing request unit in charge of the distribution processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the distribution processing instructs the data processing unit in charge of the distribution processing to execute the distribution processing indicated in the acquired message Step S . When receiving the instruction of the execution the data processing unit in charge of the distribution processing distributes the image data obtained by scanning to the specified online storage Step S .

When the distribution time is specified Yes at Step S the distribution service application transmits a request of storage processing to the data processing control unit Step S . When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S .

When a data processing unit in charge of the storage processing becomes capable of processing a data processing request unit in charge of the storage processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the storage processing instructs the data processing unit in charge of the storage processing to execute the storage processing indicated in the acquired message Step S . When receiving the instruction of the execution the data processing unit in charge of the storage processing temporarily stores image data obtained by scanning in the data storage unit Step S . The data processing unit in charge of the storage processing sends back an address of the stored image data to the data processing request unit in charge of the storage processing Step S . The data processing request unit in charge of the storage processing then transmits a response including the acquired address to the distribution service application Step S .

Subsequently the distribution service application counts time until the time reaches the specified distribution time Step S . When it reaches the specified distribution time the distribution service application transmits the request of distribution processing to the data processing control unit Step S . In this case the distribution service application includes the address of the stored image data in the request. When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S .

When the data processing unit in charge of the distribution processing becomes capable of processing the data processing request unit in charge of the distribution processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the distribution processing instructs the data processing unit in charge of the distribution processing to execute the distribution processing indicated in the acquired message Step S .

When receiving the instruction of the execution the data processing unit in charge of the distribution processing accesses the data storage unit to read the image data from the address included in the instruction of the execution Steps S . The data processing unit in charge of the distribution processing then distributes the image data obtained by scanning to the specified online storage Step S .

As explained above according to the service provision system the service for distributing data to a specified storage device at a specified time can be provided to any device on the network under the environment used by a large number of unspecified users such as cloud services. When the service for distributing data at a specified time is to be provided the service provision system may execute a plurality of data processings set in the workflow and then perform the distribution processing.

After the completion of the login to the service provision system the terminal device displays the service registration screen and receives a start operation of the service registration from the user manager Step S . When the user instructs the start of the registration the terminal device transmits a registration start request to the service provision system Step S .

When receiving the registration start request from the terminal device the portal service application transmits a screen which displays a list of services available by an organization stored in the management information storage unit in association with the tenant ID of the organization to which the user belongs to the terminal device Step . The terminal device displays the screen displaying the received list of the services and receives a selection operation of a service from the user Step S . The user selects the distribution service of facsimile received data herein. When the user selects the distribution service of facsimile received data the terminal device transmits the selection information for the service to the service provision system Step S .

Subsequently the portal service application transmits a setting screen for various pieces of information required for providing the distribution service of facsimile received data to the terminal device and causes the terminal device to display the setting screen Step S . The portal service application causes the terminal device to display the setting screen including for example items for setting a UIRL of the online storage as a distribution destination of the facsimile received data.

For example the portal service application causes the terminal device to display the setting screen including the items for setting the device ID and the like of the image forming device which is provided with the distribution service of the facsimile received data. In this case the portal service application may cause the terminal device to display a setting screen capable of collectively setting a plurality of image forming devices . For example when the distribution service of facsimile received data is provided to all the image forming devices installed in a division of a certain company the portal service application may cause the terminal device to display a setting screen including items for selecting a division name and the like.

Subsequently the user inputs required information to the setting screen Step S . Then the terminal device transmits the setting information e.g. URL of the online storage as the distribution destination device ID input by the user to the service provision system Step S . When receiving the setting information the portal service application registers the setting information the tenant ID and the selected service distribution service of facsimile received data in the management information storage unit in association with one another Step S .

Subsequently the user moves to the image forming device to be provided with the distribution service of the facsimile received data and logs in from the image forming device to the service provision system Step S . At this time the user inputs the user ID of the user himself herself as login information to cause the image forming device to log in to the service provision system .

When the login is made through the image forming device and it is determined that the authentication is successful the portal service application accesses the management information storage unit to read the setting information stored in association with the device ID of the logged in image forming device and the tenant ID Steps S S . The portal service application transmits the read setting information to the image forming device and registers the setting information in the image forming device Step S . Thereby the image forming device can log in to the service provision system before the reception of data by facsimile and use the subsequent distribution service of the facsimile received data.

When receiving the facsimile Step S the image forming device transmits a use request of distribution service of facsimile received data to the service provision system Step S . At this time the image forming device also transmits the image data received by facsimile to the service provision system .

When receiving the use request of distribution service of facsimile received data from the image forming device the distribution service application transmits a request of distribution processing to the data processing control unit Step S . When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S . The message registered in the processing queue is temporarily stored. When the data processing unit in charge of the distribution processing becomes capable of processing the data processing request unit in charge of the distribution processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the distribution processing instructs the data processing unit in charge of the distribution processing to execute the distribution processing indicated in the acquired message Step S . When receiving the instruction of the execution the data processing unit in charge of the distribution processing distributes the image data received by facsimile to the online storage of the specified URL Step S .

As explained above according to the service provision system the service for distributing facsimile received data to a specified storage device can be provided to the image forming device on the network under the environment used by a large number of unspecified users such as cloud services. When the distribution service of the facsimile received data is to be provided the service provision system may execute a plurality of data processings set in the workflow and then perform the distribution processing. Moreover when the distribution service of the facsimile received data is to be provided the service provision system may perform the distribution processing at a specified time.

After the completion of the login to the service provision system the terminal device displays the service registration screen and receives a start operation of the service registration from the user manager Step S . When the user instructs the start of the registration the terminal device transmits a registration start request to the service provision system Step S .

When receiving the registration start request from the terminal device the portal service application transmits a screen which displays a list of services available by an organization stored in the management information storage unit in association with the tenant ID of the organization to which the user belongs to the terminal device Step S . The terminal device displays the screen displaying the received list of the services and receives a selection operation of a service from the user Step S . The user selects the folder monitoring service herein. When the user selects the folder monitoring service the terminal device transmits the selection information for the service to the service provision system Step S .

Subsequently the portal service application transmits a setting screen for various pieces of information required for providing the folder monitoring service to the terminal device and causes the terminal device to display the setting screen Step S . The portal service application causes the terminal device to display the setting screen including for example items for setting a URL of the online storage as a monitoring destination of a folder and a URL of the online storage as a distribution destination of data.

Subsequently the user inputs required information to the setting screen Step S . Then the terminal device transmits the setting information e.g. a URL of the online storage as a monitoring destination of a folder and a URL of the online storage as a distribution destination input by the user to the service provision system Step S . When receiving the setting information the portal service application registers the received setting information in the management information storage unit Step S . This enables the terminal device to use the folder monitoring service.

The terminal device accesses the portal site of the service provision system and transmits a use request of the folder monitoring service to the service provision system Step S . When receiving the use request of the folder monitoring service the service provision system activates the distribution service application .

The distribution service application transmits a request of monitoring processing to the data processing control unit according to the use request received from the terminal device Step S . When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S . The message registered in the processing queue is temporarily stored. When a data processing unit in charge of the monitoring processing becomes capable of processing a data processing request unit in charge of the monitoring processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the monitoring processing instructs the data processing unit in charge of the monitoring processing to execute the monitoring processing indicated in the acquired message Step S . When receiving the instruction of the execution the data processing unit in charge of the monitoring processing starts monitoring whether any data is stored in the online storage of the URL specified as the monitoring destination Step S .

When some data is stored in the online storage as the monitoring destination Step S the data processing unit in charge of the monitoring processing acquires the stored data and temporarily stores the acquired data in the data storage unit Step S . The data processing unit in charge of the monitoring processing transmits response information indicating the acquisition of the data together with an address of the stored data to the data processing request unit in charge of the monitoring processing Step S . The data processing request unit in charge of the monitoring processing then transmits the response information together with the address to the distribution service application Step S .

Subsequently when receiving the response from the data processing request unit in charge of the monitoring processing the distribution service application transmits a request of distribution processing to the data processing control unit Step S . In this case the distribution service application includes the address where the data is stored in the request.

When receiving the request the data processing control unit analyzes the request and registers a message in a corresponding processing queue Step S . The message registered in the processing queue is temporarily stored. When the data processing unit in charge of the distribution processing becomes capable of processing the data processing request unit in charge of the distribution processing acquires the message registered in the corresponding processing queue Step S . The data processing request unit in charge of the distribution processing instructs the data processing unit in charge of the distribution processing to execute the distribution processing indicated in the acquired message Step S .

When receiving the instruction of the execution the data processing unit in charge of the distribution processing accesses the data storage unit to read the data from the address included in the address. The data processing unit in charge of the distribution processing distributes the acquired data to the online storage specified as the distribution destination Step S .

As explained above according to the service provision system the folder monitoring service can be provided to any device on the network under the environment used by a large number of unspecified users such as cloud services. When the folder monitoring service is to be provided the service provision system may execute a plurality of data processings set in the workflow and then perform the distribution processing. Moreover when the folder monitoring service is to be provided the service provision system may perform the distribution processing at a specified time.

The programs executed by the service provision system according to the present embodiment are recorded in a computer readable recording medium such as a compact disk read only memory CD ROM flexible disk FD a compact disk recordable CD R and a digital versatile disc DVD in an installable or executable file format.

The programs executed by the service provision system according to the present embodiment may be configured so as to be provided by being stored on a computer connected to a network such as the Internet and being downloaded via the network. Moreover the programs executed by the service provision system according to the present embodiment may be configured so as to be provided or distributed via a network such as the Internet.

The programs executed by the service provision system according to the present embodiment are module configurations including part of or all of the units the service provision unit the platform API and the platform . Actual hardware is configured so that the CPU processor reads a program from the recording medium and executes it the units are thereby loaded onto a main storage device and part of or all of the service provision unit the platform API and the platform are generated on the main storage device.

According to an embodiment the mail distribution service can be provided to any device connected via a network under the environment used by a large number of unspecified users.

The present invention can be implemented in any convenient form for example using dedicated hardware or a mixture of dedicated hardware and software. The present invention may be implemented as computer software implemented by one or more network processing apparatus. The network can comprise any conventional terrestrial or wireless communications network such as the Internet. The processing apparatus can compromise any suitably programmed apparatuses such as a general purpose computer personal digital assistant mobile telephone such as a WAP or 3G compliant phone and so on. Since the present invention can be implemented as software each and every aspect of the present invention thus encompasses computer software implemental on a programmable device. The computer software can be provided to the programmable device using any storage medium for storing processor readable code such as a floppy disk hard disk CD ROM magnetic tape device or solid state memory device.

The hardware platform includes any desired kind of hardware resources including for example a central processing unit CPU a random access memory RAM and a hard disk drive HDD . The CPU may be implemented by any desired kind of any desired number of processor. The RAM may be implemented by any desired kind of volatile or non volatile memory. The HDD may be implemented by any desired kind of non volatile memory capable of storing a large amount of data. The hardware resources may additionally include an input device an output device or a network device depending on the type of the apparatus. Alternatively the HDD may be provided outside of the apparatus as long as the HDD is accessible. In this example the CPU such as a cache memory of the CPU and the RAM may function as a physical memory or a primary memory of the apparatus while the HDD may function as a secondary memory of the apparatus.

Although the invention has been described with respect to specific embodiments for a complete and clear disclosure the appended claims are not to be thus limited but are to be construed as embodying all modifications and alternative constructions that may occur to one skilled in the art that fairly fall within the basic teaching herein set forth.

