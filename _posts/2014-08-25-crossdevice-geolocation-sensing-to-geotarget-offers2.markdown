---

title: Cross-device geolocation sensing to geotarget offers
abstract: Provided is a process of distributing offers to non-location-sensing devices based on a geolocation sensed by another device, the process comprising: obtaining a geolocation of a user from a mobile device of the user; associating the geolocation of the user with an identifier of the user in an offers engine; receiving a request for an offer from another computing device of the user, the request including or prompting obtaining data from the other computing device sufficient to identify the user; retrieving the geolocation of the user obtained from the mobile device by identifying the user with the data from the other computing device sufficient to identify the user account; selecting, with the offers engine, a responsive offer based on the geolocation of the user obtained from the mobile device; and sending the responsive offer to the other computing device of the user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09595049&OS=09595049&RS=09595049
owner: RetailMeNot, Inc.
number: 09595049
owner_city: Austin
owner_country: US
publication_date: 20140825
---
The present application claims the benefit of U.S. Provisional Patent Application 62 016 295 filed 24 Jun. 2014. The present application is also a continuation in part of U.S. patent application Ser. No. 14 060 550 filed 22 Oct. 2013 which is a continuation in part of PCT Patent Application PCT US13 45186 filed 11 Jun. 2013 which claims the benefit of U.S. Provisional Patent Application 61 658 387 filed 11 Jun. 2012. Each of these parent patent applications is incorporated by reference in its entirety for all purposes.

The present invention relates generally to merchant offers and more specifically to offer discovery systems.

Offer discovery systems provide a service by which merchants inform customers of offers for example deals e.g. discounts favorable shipping terms or rebates or coupons e.g. printable coupons for in store use or coupon codes for use online . Typically these systems store information about offers from a relatively large number of merchants and provide an interface by which customers can identify offers in which the customer is likely to be interested. Merchants have found the offer discovery systems to be a relatively effective form of marketing as cost sensitive consumers are drawn to such systems due to their relatively comprehensive listings of offers and as a result the number of offers listed on such systems has increased in recent years. One consequence of this increase is that users e.g. prospective customers of the merchants face an increasingly complex task of identifying relevant offers on offer discovery systems and recalling information about the offer when making a purchase. Moreover such tasks are especially challenging for in store offers that may depend on a user s proximity to a merchant s facility for relevancy and use.

A related problem faced by consumers is remembering to use offers that they or others have identified in the past whether redeemable online or in store. For example often a consumer will browse or search for offers using their cell phone or other mobile device when the user has a few free minutes for instance while waiting for an appointment. The user may identify offers that they or others might find useful but often the user does not wish to redeem the offer at that time on their mobile device typically for any of a number of reasons. It is frequently easier to redeem offers on devices with larger display screens and in some cases physical keyboards relative to the ease with which offers can be redeemed on mobile devices. Or an offer may have geographic use restrictions or be an in store only offers redeemable at a merchant s physical site.

Frequently however users forget to redeem offers when at the store or near their home or work desktop or laptop computer. Moreover the challenge of remembering offers is expected to increase as consumers add more and different types of devices to the lives upon which they may discover offers in other locations and as merchants issue increasing numbers of offers with increasingly complex sets of redemption constraints.

Another issue faced by operators of offer discovery systems is that as such entities continue the newly developing trend to increase their base of local and location relevant content e.g. offers for local stores such as stores within a threshold distance like within 25 or 50 miles for users that are likely driving or within one mile for users that are likely walking it is becoming more important to get relatively fine grained location information e.g. within 100 meters approximately of their location when providing offers to which the user might walk about where a consumer is located. In a mobile application that signal can be received through GPS WiFi Bluetooth beacon identifiers associated in memory with a geolocations e.g. in a key value store that can be queried and other techniques. However for users of desktop or other non mobile user interfaces location data is often much more difficult to get at a sufficiently granular level. In some cases operators are forced to rely on less reliable signals like IP address which often only provide low resolution geolocation information e.g. at the level of zip code or city .

The following is a non exhaustive listing of some aspects of the present techniques. These and other aspects are described in the following disclosure.

In some embodiments a computer implemented method for determining relevant offers for a geofenced geographic area is provided. The method includes receiving over a network from a mobile user device a request for offers the request comprising a geofence identifier associated with a geofence the geofence defining a perimeter around a geographic area comprising one or more retail stores and identifying via a processor one or more merchants associated with the geofence. Additionally the method includes identifying via a processor one or more candidate offers associated with the one or more merchants and ranking via a processor the one or more candidate offers based on ranking criteria. The method also includes transmitting via a processor the one or more ranked candidate offers to the mobile user device.

Some embodiments provide a computer implemented process of distributing coupons or other offers to non location sensing devices based on a geolocation sensed by another device the process including obtaining a geolocation of a user from a mobile device of the user the geolocation being sensed with the mobile device of the user associating the geolocation of the user with an identifier of the user in an offers engine the user having a user account in the offers engine associated with the identifier of the user receiving a request for an offer from another computing device of the user the other computing device of the user being a different device from the mobile device of the user the request including or prompting obtaining data from the other computing device sufficient to identify the user account retrieving the geolocation of the user obtained from the mobile device by identifying the user account with the data from the other computing device sufficient to identify the user account selecting with the offers engine a responsive offer based on the geolocation of the user obtained from the mobile device and sending the responsive offer to the other computing device of the user.

Some aspects include a tangible non transitory machine readable medium storing instructions that when executed by a data processing apparatus effectuate the above processes.

Some aspects include a system including one or more processors and memory storing instructions that when executed by at least some of the processors effectuate the above processes.

While the invention is susceptible to various modifications and alternative forms specific embodiments thereof are shown by way of example in the drawings and will herein be described in detail. The drawings may not be to scale. It should be understood however that the drawings and detailed description thereto are not intended to limit the invention to the particular form disclosed but to the contrary the intention is to cover all modifications equivalents and alternatives falling within the spirit and scope of the present invention as defined by the appended claims.

These and other benefits are described in greater detail below after introducing the components of the system and describing their operation. To mitigate the problems described herein the applicants had to both invent solutions and in some cases just as importantly recognize problems overlooked or not yet foreseen by others in the field. Indeed applicants wish to emphasize the difficulty of recognizing those problems that are nascent and will become much more apparent in the future should trends in the affiliate networking industry continue as applicants expect. Further because multiple problems are addressed it should be understood that some embodiments are problem specific and not all embodiments address every problem with traditional systems described herein or provide every benefit described herein. That said solutions to many of these problems are described with reference to .

In the illustrated embodiment the offers engine includes a control module an application program interface API server a web server an ingest module an administration module a data store and a cache server . These components in some embodiments communicate with one another in order to provide the functionality of the offers engine described herein. As described in greater detail below in some embodiments the data store may store data about offers and users interactions with those offers the cache server may expedite access to this data by storing likely relevant data in relatively high speed memory for example in random access memory or a solid state drive the web server may serve webpages having offers interfaces by which users discover relevant offers the API server may serve data to various applications that process data related to offers the ingest module may facilitate the intake of data related to offers from affiliate networks users administrators and merchants and the administration module may facilitate curation of offers presented by the API server and the web server . The operation of these components and may be coordinated by the control module which may bidirectionally communicate with each of these components or direct the components to communicate with one another. Communication may occur by transmitting data between separate computing devices e.g. via transmission control protocol internet protocol TCP IP communication over a network by transmitting data between separate applications or processes on one computing device or by passing values to and from functions modules or objects within an application or process e.g. by reference or by value.

Among other operations the offers engine of this embodiment presents offers to users receives data from users about their interaction with the offers for example the user s favorite offers or offer attributes statistics about the offers the user has identified accepted or otherwise provided data about or the identity of other users with whom the user communicates about offers and the content of those communications provided that users opt to have such data obtained customizes the presentation of offers based on this received data and facilitates the processing of compensation from merchants either directly or through affiliate networks as a result of users accepting or taking a specific action like clicking or viewing in some embodiments or use cases offers. This interaction with users may occur via a website viewed on a desktop computer tablet or a laptop of the user. And in some cases such interaction occurs via a mobile website viewed on a smart phone tablet or other mobile user device or via a special purpose native application executing on a smart phone tablet or other mobile user device. Presenting and facilitating interaction with offers across a variety of devices is expected to make it easier for users to identify and recall relevant offers at the time the user is interested in those offers which is often different from the time at which the user first discovers the offers. In particular some embodiments allow users to store data indicative of offers relevant to that user using one device such as a desktop computer in the user s home and then view those offers at a later time such as on a native mobile application when in a retail store.

To illustrate an example of the environment in which the offers engine operates the illustrated embodiment of includes a number of components with which the offers engine communicates mobile user devices and a desk top user device a third party server an administrator device merchant servers and and affiliate network servers and . Each of these devices communicates with the offers engine via a network such as the Internet or the Internet in combination with various other networks like local area networks cellular networks or personal area networks.

The mobile user devices and may be smart phones tablets gaming devices or other hand held networked computing devices having a display a user input device e.g. buttons keys voice recognition or a single or multi touch touchscreen memory such as a tangible machine readable non transitory memory a network interface a portable energy source e.g. a battery and a processor a term which as used herein includes one or more processors coupled to each of these components. The memory of the mobile user devices and may store instructions that when executed by the associated processor provide an operating system and various applications including a web browser or a native mobile application . The native application in some embodiments is operative to provide an offers interface that communicates with the offers engine and facilitates user interaction with data from the offers engine . Similarly the web browser may be configured to receive a website from the offers engine having data related to deals and instructions for example instructions expressed in JavaScript that when executed by the browser which is executed by the processor cause the mobile user device to communicate with the offers engine and facilitate user interaction with data from the offers engine . The native application and the web browser upon rendering a webpage from the offers engine may generally be referred to as client applications of the offers engine which in some embodiments may be referred to as a server. Embodiments however are not limited to client server architectures and the offers engine as illustrated may include a variety of components other than those functioning primarily as a server.

The desk top user device may also include a web browser that serves the same or similar role as the web browser in the mobile user device . In addition the desk top user device may include a monitor a keyboard a mouse memory a processor and a tangible non transitory machine readable memory storing instructions that when executed by the processor provide an operating system and the web browser.

Third party offer server may be configured to embed data from the offers engine in websites or other services provided by the third party offer server . For example third party offer server may be a server of a social networking service upon which users post comments or statistics about offers with which the user has interacted or the users may use the offer server to recommend offers to others or identify offers to avoid. In another example third party offer server may include various services for publishing content to the Web such as blogs tweets likes dislikes ratings and the like. In another example third party offer server provides services by which third parties curate offers hosted by the offers engine .

Merchant servers and host websites or other user accessible content interfaces by which users can accept offers hosted by the offers engine . In some embodiments and in some use cases the merchant servers and host retail websites that present a plurality of items for sale by the merchant a subset of which may include items to which offers apply thereby generally making the item for sale more desirable to cost sensitive consumers than under the terms presented by the merchant in the absence of the offer. For example the offers may include free or discounted shipping a discounted price a bulk discount a rebate a referral award or a coupon such as a coupon acceptable by presenting a coupon code during checkout on the merchant website or a printable or displayable coupon e.g. on the screen of a mobile device for in store use the printable or otherwise displayable coupon having in some cases a machine readable code e.g. a bar code or QR code for display and scanning or a code passed via near field communication or Bluetooth . In some embodiments the merchant website includes a checkout webpage having an interface for the user to enter payment information and a coupon code and the merchant website either with logic on the client side or the server side may validate the coupon code entered by the user and upon determining that the coupon code is valid adjust the terms presented to the user for acceptance in accordance with the offer.

Some merchants may limit the number of uses of a given coupon limit the duration over which the coupon is valid or apply other conditions to use of the coupon each of which may add to the burden faced by users seeking to find valid coupons applicable to an item the user wishes to purchase. As noted above some embodiments of the offers engine are expected to mitigate this burden.

Further in some embodiments the merchant servers and provide data about offers to the offers engine or i.e. and or as used herein unless otherwise indicated data about transactions involving offers. In use cases in which the operator of the offers engine has a direct affiliate marketing relationship with one of the merchants of the merchant servers or the transaction data may provide the basis for payments by the merchant directly to the operator of the offers engine . For example payments may be based on a percentage of transactions to which offers were applied a number of sales to which offers were applied or a number of users who viewed or selected or otherwise interacted with an offer by the merchant.

Affiliate network servers and in some embodiments and some use cases are engaged when the entity operating the offers engine does not have a direct affiliate marketing relationship with the merchant making a given offer. In many affiliate marketing programs merchants compensate outside entities such as third party publishers for certain activities related to sales by that merchant and spurred by the outside entity. For example in some affiliate marketing programs merchants compensate an affiliate such as the entity operating the offers engine in cases in which it can be shown that the affiliate provided a given coupon code to a given user who then used that coupon code in a transaction with the merchant. Demonstrating this connection to the merchant is one of the functions of the affiliate networks.

Affiliate networks are used in some use cases because many coupon codes are not affiliate specific and are shared across multiple affiliates as the merchant often desires the widest distribution of a relatively easily remembered coupon code. Accordingly in some use cases the merchant affiliate network and affiliate cooperate to use client side storage to indicate the identity of the affiliate that provided a given coupon code to a user. To this end in some embodiments when a webpage offers interface is presented by the offers engine in the web browsers or that webpage is configured by the offers engine to include instructions to engage the affiliate network server or when a user selects an offer for example by clicking on touching or otherwise registering a selection of an offer. The website provided by the offers engine responds to such a selection by in some embodiments transmitting a request to the appropriate affiliate network server or as identified by for example an associated uniform resource locator URL in the webpage for a webpage or portion of a webpage e.g. browser executable content . The request to the affiliate network server may include e.g. as parameters of the URL an identifier of the affiliate the offer and the merchant and the returned content from the affiliate network server may include instructions for the web browser or to store in memory e.g. in a cookie or other form of browser accessible memory such as a SQLite database or in a localStorage object via a localStorage.setItem command an identifier of the affiliate that provided the offer that was selected.

The webpage from the offers engine or the content returned by the affiliate network server or may further include browser instructions to navigate to the website served by the merchant server or of the merchant associated with the offer selected by the user and in some cases to the webpage of the item or service associated with the offer selected by the user. When a user applies the offer for example by purchasing the item or service or purchasing the item or service with the coupon code the merchant server or may transmit to the user device upon which the item was purchased browser instructions to request content from the affiliate network server or and this requested content may retrieve from the client side memory the identifier of the affiliate such as the operator of the offers engine who provided the information about the offer to the user. The affiliate network may then report to the merchant the identity of the affiliate who should be credited with the transaction and the merchant may compensate the affiliate or the affiliate network may bill the merchant and the affiliate network may compensate the affiliate such as the operator of the offers engine . Thus the affiliate network in this example acts as an intermediary potentially avoiding the need for cross domain access to browser memory on the client device a feature which is generally not supported by web browsers for security reasons. Some embodiments may however store in client side browser accessible memory an identifier of the affiliate upon user selection of the offer with this value designated as being accessible via the merchant s domain and provide the value to the merchant upon a merchant request following acceptance of the offer without passing the identifier through an affiliate network using a browser plug in for providing cross domain access to browser memory or a browser otherwise configured to provide such access. 

A similar mechanism may be used by the native application for obtaining compensation from merchants. In some embodiments the native application includes or is capable of instantiating a web browser like the web browser in response to a user selecting an offer presented by the native application . The web browser instantiated by the native application may be initialized by submitting the above mentioned request for content to the affiliate network server or thereby storing an identifier of the affiliate i.e. the entity operating the offers engine in this example in client side storage e.g. in a cookie localStorage object or a database of the mobile user device and thereby navigating that browser to the merchant website. In other use cases the operator of the offers engine has a direct relationship with the merchant issuing the offer and the selection of an offer within the native application or the desktop or mobile website of the offers engine generally referred to herein as examples of an offer interface may cause the user device to request a website from the associated merchant with an identifier of the affiliate included in the request for example as a parameter of a URL transmitted in a GET request to the merchant server or for the merchant s website.

Administrator device may be a special purpose application or a web based application operable to administer operation of the offers engine e.g. during use by employees or agents of the entity operating the offers engine . In some embodiments the administration module may communicate with the administrator device to present an administration interface at the administrator device by which an administrator may configure offers interfaces presented to users by the offers engine . In some embodiments the administrator may enter offers into the offers engine delete offers from the offers engine identify offers for prominent placement within the offers interface e.g. for initial presentation prior to user interaction moderate comments on offers view statistics on offers merchants or users add content to enhance the presentation of offers or categorize offers.

Thus the offers engine in some embodiments operates in the illustrated environment by communicating with a number of different devices and transmitting instructions to various devices to communicate with one another. The number of illustrated merchant servers affiliate network servers third party servers user devices and administrator devices is selected for explanatory purposes only and embodiments are not limited to the specific number of any such devices illustrated by .

The offers engine of some embodiments includes a number of components introduced above that facilitate the discovery of offers by users. For example the illustrated API server may be configured to communicate data about offers via an offers protocol such as a representational state transfer REST based API protocol over hypertext transfer protocol HTTP . Examples of services that may be exposed by the API server include requests to modify add or retrieve portions or all of user profiles offers or comments about offers. API requests may identify which data is to be modified added or retrieved by specifying criteria for identifying records such as queries for retrieving or processing information about particular categories of offers offers from particular merchants or data about particular users. In some embodiments the API server communicates with the native application of the mobile user device or the third party offer server .

The illustrated web server may be configured to receive requests for offers interfaces encoded in a webpage e.g. a collection of resources to be rendered by the browser and associated plug ins including execution of scripts such as JavaScript invoked by the webpage . In some embodiments the offers interface may include inputs by which the user may request additional data such as clickable or touchable display regions or display regions for text input. Such inputs may prompt the browser to request additional data from the web server or transmit data to the web server and the web server may respond to such requests by obtaining the requested data and returning it to the user device or acting upon the transmitted data e.g. storing posted data or executing posted commands . In some embodiments the requests are for a new webpage or for data upon which client side scripts will base changes in the webpage such as XMLHttpRequest requests for data in a serialized format e.g. JavaScript object notation JSON or extensible markup language XML . The web server may communicate with web browsers such as the web browser or executed by user devices or . In some embodiments the webpage is modified by the web server based on the type of user device e.g. with a mobile webpage having fewer and smaller images and a narrower width being presented to the mobile user device and a larger more content rich webpage being presented to the desk top user device . An identifier of the type of user device either mobile or non mobile for example may be encoded in the request for the webpage by the web browser e.g. as a user agent type in an HTTP header associated with a GET request and the web server may select the appropriate offers interface based on this embedded identifier thereby providing an offers interface appropriately configured for the specific user device in use.

The illustrated ingest module may be configured to receive data about new offers e.g. offers that are potentially not presently stored in the data store such as data feeds from the affiliate network servers and identifications of offers from user devices or offers identified by third party offer server offers identified by merchant servers or or offers entered by an administrator via the administrator device . In some embodiments the ingest module may respond to receipt of a record identifying a potentially new offer by querying the data store to determine whether the offer is presently stored. Upon determining that the offer is not presently stored by the data store the ingest module may transmit a request to the data store to store the record. In some cases the data about new offers may be an affiliate data feed from an affiliate network containing a plurality of offer records e.g. more than 100 each record identifying offer terms a merchant a URL of the merchant associated with the offer a product description and an offer identifier. The ingest module may periodically query such data feeds from the affiliate network servers or parse the data feeds and iterate through or map each entry to one of a plurality of processes operating in parallel the records in the data feeds. Bulk automated processing of such data feeds is expected to lower operating costs of the offers engine .

The administration module may provide an interface by which an administrator operating the administrator device curates and contextualizes offers. For example the administration module may receive instructions from administrator that identify offers to be presented in the offer interface prior to user interaction with the offer interface or offers to be presented in this initialized offers interface for certain categories of users such as users having certain attributes within their user profile. Further in some embodiments the administration module may receive data descriptive of offers from the administrator such as URLs of images relevant to the offer categorizations of the offer normalized data about the offer and the like.

The illustrated data store in some embodiments stores data about offers and user interactions with those offers. The data store may include various types of data stores including relational or non relational databases document collections hierarchical key value pairs or memory images for example. In this embodiment the data store includes a user data store a session data store an offers data store and an analytics data store . These data stores and may be stored in a single database document or the like or may be stored in separate data structures.

In this embodiment the illustrated user data store includes a plurality of records each record being a user profile and having a user identifier a list of offers e.g. identifiers of offers identified by the user as favorites a list of categories of offers identified by the user as favorites a list of merchants identified by the user as favorites account information for interfacing with other services to which the user subscribes e.g. a plurality of access records each record including an identifier of a service a URL of the service a user identifier for the service an OAuth access token credential issued by the service at the user s request and an expiration time of the credential a user password for the offers engine a location of the user device or the user e.g. a zip code of the user and a gender of the user. In some embodiments each user profile includes a list of other users identified by the user of the user profile as being people in whose commentary on or curation of offers the user is interested thereby forming an offers interest graph. In some embodiments users have control of their data including what is stored and who can view the data and can choose to opt in to the collection and storage of such user data to improve their experience with the offers engine .

In this embodiment the session data store stores a plurality of session records each record including information about a session a given user is having or has had with the offers engine . The session records may specify a session identifier a user identifier and state data about the session including which requests have been received from the user and what data has been transmitted to the user. Session records may also indicate the IP address of the user device timestamps of exchanges with the user device and a location of the user device e.g. retail store or aisle in a retail store in which the user device is located .

The illustrated offers data store in some embodiments includes a plurality of offer records each offer record may identify a merchant offers by that merchant and attributes of the relationship with the merchant e.g. whether there is a direct relationship with the merchant by which the merchant directly compensates the operator of the offers engine or whether the merchant compensates the operator of the offers engine via an affiliate network and which affiliate network. The offers by each merchant may be stored in a plurality of merchant offer records each merchant offer record may specify applicable terms and conditions of the offer e.g. whether the offer is a discount includes free or discounted shipping requires purchase of a certain number of items is a rebate or is a coupon which is not to suggest that these designations are mutually exclusive . In records in which the offer is a coupon the record may further indicate whether the coupon is for in store use e.g. whether the coupon is associated with a printable image for presentation at a point of sale terminal a mobile device displayable image or other mediums or whether the coupon is for online use and has a coupon code in which case the coupon code is also part of the merchant offer record. The merchant offer records may also include an expiration date of the offer comments on the offer rankings of the offer by users a time at which the offer was first issued or entered into the offers engine and values e.g. binary values indicating whether users found the offer to be effective with each value or ranking being associated with a timestamp in some embodiments. The values and rankings may be used to calculate statistics indicative of the desirability of the offer and likely success of accepting the offer. The timestamps associated with the values rankings and time of issuance or entry into the offers engine may also be used to weight rankings of the offer with older values being assigned less weight than newer values and older offers being ranked lower than newer offers all other things being equal as many offers expire or have a limited number of uses.

The illustrated analytics data store may store a plurality of records about historical interactions with the offers engine such as aggregate statistics about the performance of various offers. In some embodiments the analytics data store stores a plurality of transaction records each transaction record identifying an offer that was accepted by a user at a merchant the merchant the time of presentation of the offer to the user and an indicator of whether the merchant has compensated the entity operating the offers engine for presentation of the offer to the user. Storing and auditing these transaction records is expected to facilitate relatively accurate collection of payments owed by merchants and identification of future offers likely to lead to a relatively high rates of compensation for prominent presentation based on past performance of offers having similar attributes.

The cache server stores a subset of the data in the data store that is among the more likely data to be accessed in the near future. To facilitate relatively fast access the cache server may store cached data in relatively high speed memory such as random access memory or a solid state drive. The cached data may include offers entered into the offers engine within a threshold period of time such as offers that are newer than one day. In another example the cache data may include offers that are accessed with greater than a threshold frequency such as offers that are accessed more than once a day or offers accessed within the threshold such as offers accessed within the previous day. Caching such offer data is expected to facilitate faster access to offer data than systems that do not cache offer data.

The illustrated control module in some embodiments controls the operation of the other components of the offers engine receiving requests for data or requests to add or modify data from the API server the web server the ingest module and the administration module and instructing the data store to modify retrieve or add data in accordance with the request. The control module may further instruct the cache server to modify data mirrored in the cache server . In some embodiments the cache server may be updated hourly and inconsistent data may potentially be maintained in the cache server in order to conserve computing resources.

The illustrated components of the offers engine are depicted as discrete functional blocks but embodiments are not limited to systems in which the functionality described herein is organized as illustrated by . The functionality provided by each of the components of the offers engine may be provided by software or hardware modules that are differently organized than is presently depicted for example such software or hardware may be intermingled broken up distributed e.g. within a data center or geographically or otherwise differently organized. The functionality described herein may be provided by one or more processors of one or more computers executing code stored on a tangible non transitory machine readable medium.

The process in some embodiments includes normalizing and enriching the offer data. Normalizing may include normalizing field names of the data and normalizing the way in which dates are expressed for example. Enriching may include associating images with the offers for presentation with the offers and adding metadata to the offers to assist users searching for offers.

Next in the present embodiment the received offer data is stored in an offer data store as indicated by block . Storing the offer data in the offer data store may include identifying a merchant to which the offer pertains and storing the offer in a merchant offer record associated with that merchant. Further some embodiments may include inserting the offer in order in a sorted list of offers for relatively fast retrieval of offers using a binary search algorithm or other techniques to facilitate relatively quick access to data that has been preprocessed e.g. using a prefix trie . In some embodiments storing the received offer may further include updating hash tables by which the offer may be retrieved according to various parameters each hash table being associated with one parameter and including a hash key value calculated based on the parameter and paired with an address of the offer. Such hash tables are expected to facilitate relatively fast access to a given offer as the need to iterate through potentially all offers meeting certain criteria may be potentially avoided.

In some embodiments the process further includes receiving a request from a user device for offers as indicated by block . The request may specify criteria for identifying offers such as categories of offers search terms for offers or requests for offers designated as favorites.

Next the present embodiment includes identifying offers in the offer data store responsive to the user request as indicated by block . Identifying offers in the offer data store may be performed by the above mentioned controller by constructing a query to the offer data store based on a request received from the web server or the API server . The query may be transmitted to the offer data store or to the cache server each of which may return responsive records.

Next the identified offers are transmitted to the user device as indicated by block . Transmitting the identified offers may include transmitting the identified offers in an offer interface such as a webpage or an API transmission to a native mobile application for example by the web server or the API server of respectively.

The device receiving the identified offers may in response perform a process described below with reference to by which additional offers are requested or an offer is selected and a purchase is executed. This process of and steps through of may be repeated numerous times in some use cases before advancing to the next steps. Further the steps through may be repeated numerous times independently of e.g. concurrent with the performance of steps through of which is not to suggest that other steps described herein may not also be executed independently . That is the process may undergo step through for example 50 times within a given time while performing steps through 500 times within that given time and performing the remaining steps of process a single time.

In some embodiments a user device undergoing the process of may indicate to an offers engine that the user has selected an offer e.g. by clicking on or touching a selectable element in an offers interface associated with the offer . In response the offers engine may direct the user device to an affiliate network server or a merchant server associated with the offer as illustrated by block .

Next this embodiment of the process includes receiving from merchants or affiliate networks transaction data identifying offers accepted via the user device as illustrated by block . The transaction data may be pulled from these sources for example by the ingest module of periodically or in response to some threshold number of transactions having occurred.

Next in this embodiment the receipt transaction data may be stored in an analytics data store as indicated by block . In some embodiments this data may be stored in the analytics data store of . Storing the transaction data is expected to facilitate the identification of attributes of relatively profitable offers as the transaction data indicates which offers historically yielded compensable transactions. Further storing the transaction data is expected to facilitate relatively accurate auditing of payments from merchants or affiliate networks.

Some embodiments of process begin with receiving at a user device instructions that cause the user device to display an offers interface as indicated by block . The received instructions may be in the form of a downloaded native application such as one downloaded from an application store hosted by a provider of mobile devices or the received instructions may be in the form of a website received from the offers engine and rendered in a browser of the user device.

In some embodiments the process further includes receiving at the user device a plurality of offers as indicated by block and displaying at the user device the offers in the offer interface as indicated by block . The offers may be received at approximately the same time the instructions of step are received for example along with a webpage or the offers may be received at a later date for example during a session subsequent to downloading the native application.

The offers interface may include inputs by which the user may search filter or otherwise browse offers having various attributes. Some of these interfaces are described below with reference to steps performed to determine whether the user has engaged these inputs. In some embodiments determining whether the user has engaged these inputs may be performed by an event handler executed by the user device the event handler causing the user device to perform the corresponding below described requests to the offers engine based on the type of event e.g. whether the user touched clicked or otherwise selected a particular button on the offers interface.

Illustrated process includes determining whether the user is searching for offers as indicated by block . With the offers interface the user may express their intention to search for offers by entering search terms in a text entry box and selecting a button to request a search in accordance with the entered search term. Upon selecting this button the user device may transmit a request for offers satisfying the entered search criteria as indicated by block . The transmitted request may be in the form of a GET request or an API call to the web server or the API server of the offers engine of .

In some embodiments the process further includes determining whether the user requests offers within a collection of offers as indicated by block . The offers interface may include selectable inputs that identify the collections such as clickable collection names collection selection buttons or collection selection tabs. Examples of collections include categories of goods or services such as sporting goods house wares groceries and the like collections of modes of coupon redemption such as in store coupon redemption and online coupon redemption collections based on offer statistics such as newest offers most popular offers highest ranked offers collections of offers designated by a user or other users or collections based the value conferred by the offer such as discounts free shipping rebates and referral fees. Upon determining that the user has requested offers within a collection the user device may transmit a request for offers within the collection to the offers engine as indicated by block which may return data responsive to the request.

In some embodiments the process includes determining whether the user requests offers previously designated by the user as indicated by block . In some embodiments the offers interface may include an input by which a user can designate an offer such as designating offers as being a user favorite designating offers as being ranked in a particular fashion or designating offers as likely being of interest to some other user such as users adjacent one another in a social graph. The offers interface may include an input for a user to make designations such as a user selectable input labeled add to my favorites or add to my wallet and an input for a user to request offers having a designation such as a user selectable input labeled view my favorites. or view my wallet. Upon determining that the user made such a request the process includes transmitting a request for the offers previously designated by the user as indicated by block . The transmission may be made to the offers engine to the API server or the web server as described above with reference to and may include an identification of the designation and the user.

The process in some embodiments further includes determining whether the user requests offers previously designated by another user as indicated by block . The offers interface in some embodiments may include an input by which a user makes such a request such as a user selectable input labeled offers recommended by my friends. Upon determining that the user has made such a request the process transmits a request for offers previously designated by the other user or users as indicated by block . Again the transmission may be to the offers engine of which may store or otherwise have access to offers designated by other users and a social graph of the user by which responsive offers are identified. Further the offers interface may include an input by which the user may view identifiers of other users and add the other users to an offer interest graph of the user. This offer interest graph may be referenced by the offers engine to identify offers in response to the request of step .

The process further includes in some embodiments receiving at the user device one or more offers responsive to the request as indicated by block and displaying the responsive offers on the offers interface as indicated by block .

In some embodiments and some use cases a selection from the user is received via the offers interface thereby identifying an offer among the displayed offers as indicated by block . In some embodiments each of the offers may be displayed with an associated input by which the user selects the offer such as a touchable or clickable button region or text. The selection in some embodiments may cause the offers interface to request additional data from the offers engine such as instructions from the offers engine to navigate to an affiliate network server associated with the offer or to navigate to a merchant server associated with the offer. In other embodiments such instructions may be present within the offers interface e.g. in the form of URLs linking to these servers.

The process further includes determining whether the selected offer is compensable through an affiliate network as indicated by block . This determination may be made by the offers engine in some embodiments for each of the offers being displayed prior to transmission of the offers to the user device. For example each offer may be associated with a designation indicating whether the offer is compensable in this fashion and the designation may be transmitted along with the offer for instance by associating the offer with HTML or JavaScript that so designate the offer or by including a field including the designation in a response to an API call for each offer. The user device in some embodiments may take different actions depending on the designation associated with the selected offer.

Upon determining that the selected offer is not compensable through an affiliate network the process of this embodiment includes determining whether the selected offer is compensable directly from the merchant associated with the offer as indicated by block . Again the determination of block may be performed in some embodiments by the offers engine for each of the offers being displayed prior to transmission of the displayed offers and each displayed offer may be associated with a designation based on the results of the determination such as different HTML or JavaScript or a different field value in an API response. The user device may take different actions depending on this designation.

Upon determining that the selected offer is not compensable directly from the merchant the process may proceed to block described below. Upon determining that the selected offer is compensable the process in this embodiment may proceed to request the website of the merchant issuing the selected offer with a request that identifies the affiliate from whom the selected offer was obtained as indicated by block . The request may be in the form of a URL having as a parameter an identifier of the entity operating the offer engine thereby indicating to the merchant that the affiliate should be compensated in accordance with an arrangement between the merchant and the affiliate. Upon performance of step the process of the present embodiment proceeds to step described below.

As indicated by block upon determining that the selected offer is compensable through an affiliate network the process proceeds to transmit a request to the affiliate network server for instructions to store data identifying an affiliate from whom the selected offer was obtained as indicated by block . This request may be a request for content from the affiliate network server that is not displayed to the user or is not displayed to the user for an appreciable amount of time e.g. less than 500 ms and the request may include an identifier of the affiliate the merchant and the offer. The requested content may cause the user device to store in persistent memory of the browser of the user device e.g. memory that lasts between sessions such as a cookie or a database of the browser an identifier of the affiliate operating the offers engine . This value may be retrieved later by the affiliate network at the instruction of the merchant upon the user accepting the offer for example by the user using a coupon code associated with the offer at the merchant thereby allowing the merchant or the affiliate network to identify the appropriate party to compensate for the sale.

Upon transmitting the request the affiliate network server the process further includes requesting the website of the merchant issuing the selected offer as indicated by block and transmitting acceptance of the offer to the merchant via the merchant s website as indicated by block . Accepting the offer as noted above may cause the merchant to compensate the affiliate operating the offers engine .

The process of is expected to facilitate relatively fast access to offers that are likely to be relevant to a user as each of the determinations of step and provide different paths by which the user can specify offers in which the user is likely to be interested. Further the determinations of step and provide dual mechanisms by which the operator of the offers engine can be compensated thereby potentially increasing revenue.

As mentioned above offers may include offers redeemable at a merchant facility e.g. a retail store and may be referred to as in store offers. In some embodiments the offers engine may provide such offers to a user in response to a user s traversal of a geofence. As used herein the term geofence refers to a virtual perimeter for a real world geographic area. As described further below when a user crosses a geofence offers relevant to merchant facilities within the geographic area of the geofenced perimeter are provided to the user via a user device. The geographic area may include for example an indoor shopping mall an outdoor shopping mall a shopping district an airport or any other suitable geographic area having merchant facilities.

Next local geofences are obtained based on the user device location block . The local geofences may be obtained from the offers engine and may be stored e.g. cached in a memory of the user device. The local geofences may be selected from a database of geofences based on the proximity of the user location to each of the geofence locations. The proximity for selecting the local geofences may vary based on factors such as the user s location at a given point in time or the user s location over a set of points in time. In some embodiments a geofence may defined by a polygon enclosing an area. The polygons may be defined via coordinates such as latitude and longitude coordinates. In other embodiments a geofence may be defined by a center point and a radius. Thus in some embodiments a geofence may be stored by storing the coordinates or center point and radius that define the geofence.

The offers engine may store defined geofences e.g. polygons center points and radii etc. for providing to a user device. Each geofence may be assigned a unique geofence identifier. Additionally the offers engine may store additional data associated with a geofence. In some embodiments the additional data may include a list of merchants associated with the geofence. For example if the geofence corresponds to real world shopping mall the list of merchants associated with the geofence may correspond to the some or all of the stores in the shopping mall. In some embodiments the obtained geofences and geofence identifiers may be stored e.g. cached on the user device. In some embodiments only the geofence geofence identifiers may be stored on the user device such that the additional data associated with a geofence is not stored on the user device thus minimizing memory usage of the cached geofences.

Next the traversal of a geofence is detected block . For example after a user carrying a mobile user device crosses a geofence the crossing is detected and used in the processing described further below. In some embodiments the mobile user device may include a program e.g. a native service or application that monitors the location of the mobile user device and determines traversal of a geofence. In some embodiments a program of the mobile user device may monitor the geofences stored e.g. cached on the mobile user device and detect traversal of a stored geofence. In some embodiments an operating system of the mobile user device may provide a framework advanced programming interface API or other components e.g. the CoreLocation Framework provided by Apple Inc. of Cupertino Calif. for determining the location of a mobile user device. In some embodiments for example the mobile user device may use a service provided by Localpoint Platform provided by 30 Second Software Inc. d b a Digby of Austin Tex. or the Gimbal Platform by Qualcomm Labs Inc. It should be appreciated that such services may be event based and may detect generation of an event when the location of the mobile user device changes such as when the location changes by greater than a threshold amount changes with respect to detected wireless networks changes with respect to cellular network towers and so on. Moreover it should be appreciated that such services may be selected and implemented with the desire to limit power consumption and maximize battery life of a mobile user device.

After traversal of a geofence the geofence identifier is transmitted to the offers engine for a determination of relevant candidate offers block . As illustrated in and described further below the offers engine may determine candidate offers for the merchants associated with the transmitted geofence identifier. Next ranked candidate offers are obtained from the offers engine block . In some embodiments the candidate offers data e.g. images text and other data is transmitted to and stored e.g. cached on the mobile user device. As mentioned above the candidate offers are determined to be relevant to the merchants associated with the geofence identifier e.g. the retail stores in a shopping mall within a traversed geofence. Thus after a user enters a shopping mall or other geofenced geographic area the user s mobile user device may receive and have access to relevant offers.

Next the candidate offers are provided to the user via the mobile user device block . In some embodiments as described below a notification may be displayed in a user interface of the mobile user device that indicates that offers for the geographic area are available. A user may select the notification to view some or all of the candidate offers. In some embodiments the candidate offers are provided using a candidate offer flow that is a sequence of candidate offers provided to the user based on flow criteria. As will be appreciated the candidate offers may be displayed on a display of a mobile user device. In such embodiments a candidate offer may be displayed in a notification bar or other area of a user interface of a mobile user device. The user may access the relevant offers and purchase goods or services from a merchant after receiving a relevant offer. The flow criteria may include a time period between offers a score threshold for each candidate offer a maximum number of candidate offers in a time period or any combination thereof. For example the flow criteria may specific a time period between candidate offers so that the next candidate offer is only displayed after the first candidate offer has been displayed for the time period. In another example a score threshold may be required for a candidate offer to be provided to a user in the candidate offer flow. In another example a maximum number of candidate offers in a time period such that if the maximum number of candidate offers is reached within the time period no further candidate offers are display until the time period has elapsed.

Next as described further below the selected candidate offers may be scored and ranked to produce ranked candidate offers. In some embodiments only one of the described scorings and associated rankings may be used. In other embodiments composite scores and rankings using some or all of the described scorings and rankings may be used. Moreover it should be appreciated that other types of scorings and rankings may be used in addition to as an alternative to the rankings described herein. Moreover it should be appreciated that a merchant may have one or more candidate offers. In some embodiments merchants may be sorted by alphabetical order and the candidate offers within each merchant may be ranked according to any one of or combination of the rankings described herein.

In some embodiments the candidate offers are scored and ranked based on merchant payments for use of the offers block . For example a first merchant may pay a first payment amount for a first candidate offer and a second merchant may pay a lower payment amount for a second candidate offer. The first candidate offer of the first merchant associated with the higher payment amount may be scored higher and ranked above the second candidate offer for the second merchant. In some embodiments candidate offers are scored and ranked based on the likelihood of the user using the offer block as determined from a user profile associated with the user. For example the user profile may include previously selected offers merchants categories or any combination thereof previously ranked offers merchants categories or any combination thereof and previously shared offers merchants categories or any combination thereof. The user profile may also include the redemption rate of offers and statistics from other similar users. Additionally in some embodiments the user profile may include the merchants geofences or combination thereof frequented by the user. For example if a user frequents a golf store merchant golf related candidate offers may be ranked higher. In another example if a user is within a geofence for a threshold time period some candidate offers may be scored and ranked higher.

In some embodiments the candidate offers are scored and ranked based on seasonality factors block . In such embodiments some candidate offers may be associated with specific seasons and such candidate offers may be scored and ranked higher if the associated season matches the current season. For example is a candidate offer is for sporting goods equipment the candidate offer may be associated with a summer season and may be ranked higher if the current season is the summer season. Moreover in some embodiments the candidate offers may be ranked based on time of day e.g. at 12 00 pm for candidate offers related to lunches day of the week e.g. weekends for candidate offers related to weekend services or products and so on. As mentioned above any one of or combination of the scorings and rankings may be used to produce ranked candidate offers . In some embodiments the candidate offers are scored and ranked based on their popularity e.g. the number of users who select a candidate offer the number of users who redeem a candidate offer or other suitable popularity metrics. Additionally in some embodiments curated offers i.e. hand picked offers may be scored and ranked higher than other candidate offers. After determining the ranked candidate offers the ranked candidate offers are transmitted to the user device that send the initial request block . For example the ranked candidate offers may be transmitted from the offers engine to the mobile user device via the network .

Next as shown in the user and mobile user device may traverse the geofence as indicated by movement arrow . As mentioned above the traversal of the geofence may be detected by the mobile user device . After detection of the traversal of the geofence candidate offers are obtained from the offers engine in the manner described above. depicts another memory portion of the mobile user device illustrating storage of the candidate offers. As shown in the memory portion stores candidate offer data. The candidate offer data may include candidate offer identifiers and associated offers data. As also mentioned above the candidate offers may include rankings used to rank the candidate offers. As will be appreciated the stored geofences illustrated in may remain stored on the mobile user device for use after the user leaves the geofenced geographic area .

As described above after the user has traversed the geofence and entered the geographic area the mobile user device may obtain candidate offers associated with the merchants of the retail stores . In some embodiments an offers notification may be generated and displayed in the notification area of the screen . As shown in the offers notification may include notification text View offers at Shopping Mall that may describe the availability of the candidate offers and the specific geographic area Shopping Mall that the user entered when crossing the geofence .

In some embodiments the notification is a user selectable notification that enables further display of the candidate offers to the user. depicts a screen of the mobile user device that may be displayed after a user selects the offers notification described above. In some embodiments the screen may be a screen of a native application e.g. native application of the mobile user device .

Here again the screen may include various user interface elements to display information to a user and in some instances receive user input. For example the screen may include a header portion a coupon type title an offer display area and a navigation bar . As shown in the header portion may be located at the top portion of the screen e.g. above the coupon type title and the offer display area . Similarly in some embodiments the navigation bar may be displayed below the offer display area . In other embodiments the information in the header portion may be displayed in other areas such as a footer portion and the navigation bar may be located in other areas of the application such as a header portion. In some embodiments as described below the notification may consist of a specific candidate offer. In some embodiments the notification may consist of a specific candidate offer that is user selectable.

The header portion may display a title indicating the contents of the screen presented to the user as selected by the coupon type title . For example the header portion includes the text Shopping Mall to indicate to a user that offers for the Shopping Mall are currently being presented. The coupon type title may include text describing the type of offers displayed in the offer display area . For example as the user is viewing offers for the real world geographic area Shopping Mall the coupon type title includes the text In store offers at Shopping Mall. The navigation bar may include navigation controls e.g. buttons such as a Home button A and a Profile button B. For example by selecting the Home button A a user may return to a home screen of a native application. Similarly the selection of the Profile button B enables a user to access a user profile such as a user profile associated with the native application.

The offers display area may present offers e.g. in store coupons for viewing and selection by a user. For example as indicated by the coupon type title In store offers at Shopping Mall the in store coupons may be coupons usable at the stores of the identified Shopping Mall. The in store coupons may include any number of coupons associated with merchants providing goods services or a combination thereof. As mentioned above the in store coupons may be ranked and presented to the user in the ranked order as described above. In some embodiments as mentioned above a curated in store coupon may be ranked higher than other in store coupons and may thus be presented at the top of the offer display area.

Each electronic coupon may be presented with information describing the coupon such as a merchant graphic a success rate banner and a coupon summary . The merchant graphic may include a text image e.g. a merchant logo or combination thereof identifying the merchant associated with the coupon. The success rate banner may indicate a success rate for a coupon that indicates the percentage of instances in which the coupon was successfully used. In some embodiments for example the success rate may be determined based on user feedback on coupon usage. The coupon summary may include information about the coupon such as the goods services or both associated with the coupon the discount or other offer provided by the coupon the expiration date or any other suitable information or combination thereof.

For example as shown in a first in store coupon A may be presented with a merchant graphic A Merchant1 and may include a success rate banner A indicating the success rate of the coupon 100 success . The coupon A may be presented with a coupon summary A summarizing the discount provided by the coupon 40 Off Save up to 40 on select toys from Acme Co . . . . Additionally the coupon summary A may include the expiration date of the coupon Exp. Jun. 4 2012 . The other coupons B and C illustrated in may include similar information such as merchant graphic B success rate banner B coupon summary B and so on. Additionally the coupons may include coupons for any type of offer such as offers for discounts on goods services or both and free goods services or both. As shown in each coupon A corresponds to a merchant having a retail store in the geographic area the identified Shopping Mall . For example coupon A is associated with Merchant1 of retail store A coupon B is associated with Merchant2 of retail store B and so on. However as will be appreciated not all merchants in a geographic area may have candidate offers to provide to a user and some merchants may have multiple candidate offers. In some embodiments a user may search the in store coupons such as by keyword or merchant name in order to identify particular subsets of the in store coupons .

To use a coupon a user may select e.g. touch one of the in store coupons For example a user may select any portion of the coupon A such as the merchant graphic A the coupon summary A etc. Upon selection of a coupon details about the coupon may be presented to enable a user to use the coupon i.e. redeem the coupon with a transaction with a merchant. In some embodiments after selecting a coupon for redemption a bar code or machine readable code may be displayed on a display of the mobile user device . The user may present the display of the mobile user device to a clerk of the retail store and the clerk may scan the bar code or other machine readable code at the point of sale to complete redemption of the coupon.

In other embodiments an offer may be displayed directly in the notification area of a screen of a mobile user device. depict the display of offers in the notification area of the mobile user device in accordance with an embodiment of the present invention. depicts a screen of the mobile user device as for example a home screen of a user interface. In some embodiments after the user enters the geofenced geographic area a first candidate offer In Store 40 at Merchant1 associated with the merchant of retail store A Merchant1 may be displayed in the notification area . As will be appreciated the user interface of the mobile user device may enable a user to select the candidate offer from the notification area to see more detail about the offer. After selecting the offer the user may then choose to redeem the offer at the retail store A. As mentioned above after selecting a coupon for redemption a bar code or machine readable representation may be displayed on a display of the mobile user device for presentation at the retail store A.

Next as shown in as the user remains in the geographic area a second candidate offer may be displayed in the notification area . The second candidate offer may be displayed in response to an evaluation of the candidate offer flow criteria described above. For example after the first candidate offer has been displayed for a time period the second candidate offer may be displayed in the notification area . The second candidate offer 20 Off at Merchant 2 may be associated with a merchant of a second retail store B Merchant2 . Thus as the user remains in the geographic area the user may be presented with a sequence of candidate offers. As mentioned above the candidate offers may be presented to the user according to their rankings. Thus in some embodiments the first candidate offer displayed in the notification area may have a higher ranking than the second candidate offer subsequently displayed in the notification area .

After the user is no longer located in the geographic area the traversal of the geofence may again be detected. After the second traversal of the geofence is detected the mobile user device may stop providing notifications of candidate offers. For example the cache of candidate offers may be deleted and the candidate offer flow process may be terminated.

Computer may include any combination of devices or software that may perform or otherwise provide for the performance of the techniques described herein. For example computer may include a tablet a mobile phone such as a smartphone a video game device and other hand held networked computing devices a desktop user device a server or other computing devices. Computer may also be connected to other devices that are not illustrated or may operate as a stand alone system. In addition the functionality provided by the illustrated components may in some embodiments be combined in fewer components or distributed in additional components. Similarly in some embodiments the functionality of some of the illustrated components may not be provided or other additional functionality may be available.

In addition the computer may allow a user to connect to and communicate through a network e.g. the Internet a local area network a wide area network etc. and may provide communication over a satellite based positioning system e.g. GPS . For example the computer may allow a user to communicate using e mail text messaging instant messaging or using other forms of electronic communication and may allow a user to obtain the location of the device from the satellite based positioning system such as the location on an interactive map.

As shown in the computer may include a processor e.g. one or more processors coupled to a memory a display and a network interface via an interface . It should be appreciated the computer may include other components not shown in such as a power source e.g. a battery I O ports expansion card interfaces hardware buttons etc. In some embodiments the display may include a liquid crystal display LCD or an organic light emitting diode OLED display. The display may display a user interface e.g. a graphical user interface and may also display various function and system indicators to provide feedback to a user such as power status call status memory status etc. These indicators may be in incorporated into the user interface displayed on the display . In accordance with some embodiments the display may include or be provided in conjunction with touch sensitive elements through which a user may interact with the user interface. Such a touch sensitive display may be referred to as a touchscreen and may also be referred to as a touch sensitive display. In such embodiments the display may include a capacitive touchscreen a resistive touchscreen or any other suitable touchscreen technology.

The processor may provide the processing capability required to execute the operating system programs user interface and any functions of the computer . The processor may include one or more processors that may include general purpose microprocessors and special purpose microprocessors such as one or more reduced instruction set RISC processors such as those implementing the Advanced RISC Machine ARM instruction set. Additionally the processor may include single core processors and multicore processors and may include graphics processors video processors and related chip sets. A processor may receive instructions and data from a memory e.g. system memory . Processes such as those described herein may be performed by one or more programmable processors executing computer code to perform functions by operating on input data and generating corresponding output.

The memory which may include tangible non transitory computer readable storage mediums may include volatile memory and non volatile memory accessible by the processor and other components of the computer . The memory may include volatile memory such as random access memory RAM and non volatile memory such as ROM flash memory a hard drive any other suitable optical magnetic or solid state storage medium or a combination thereof. The memory may store a variety of information and may be used for a variety of purposes. For example the memory may store executable code such as the firmware for the computer an operating system for the computer and any other programs. The executable computer code may include instructions executable by a processor such as processor and the computer may include instructions for implementing one or more techniques described herein with regard to various processes. For example the memory may store an application . For example if the computer represents a user device the application may include a web browser and may enable a user to view offers such as online coupons and select and redeem online coupons using the user actions described above. In other embodiments for example the computer may represent a server and the application may implement some or all of steps of the process described above and illustrated in . The executable code may be written in a programming language including compiled or interpreted languages or declarative or procedural language and may be composed into a unit suitable for use in a computing environment including as a stand alone program a module a component a subroutine. Such code program may be stored in a section of a file that holds other programs or data e.g. one or more scripts stored in a markup language document in a single file dedicated to the program in question or in multiple coordinated files e.g. files that store one or more modules sub programs or sections of code . Additionally the copies of the executable code may be stored in both non volatile and volatile memories such as in a non volatile memory for long term storage and a volatile memory during execution of the code.

The interface may include multiple interfaces and may couple various components of the computer to the processor and memory . In some embodiments the interface the processor memory and one or more other components of the computer may be implemented on a single chip such as a system on a chip SOC . In other embodiments these components their functionalities or both may be implemented on separate chips. The interface may be configured to coordinate I O traffic between processor memory network interface and other internal and external components of the computer . The interface may include functionality for interfacing via various types of peripheral buses such as a variant of the Peripheral Component Interconnect PCI bus standard the Universal Serial Bus USB standard and the like.

The computer depicted in also includes a network interface such as a wired network interface wireless e.g. radio frequency receivers etc. For example the network interface may receive and send electromagnetic signals and communicate with communications networks and other communications devices via the electromagnetic signals. The network interface may include known circuitry for performing these functions including an antenna system an RF transceiver one or more amplifiers a tuner one or more oscillators a digital signal processor a CODEC chipset a subscriber identity module SIM card memory and so forth. The network interface may communicate with networks such as the Internet an intranet a cellular telephone network a wireless local area network LAN a metropolitan area network MAN or other devices by wireless communication. The network interface may suitable any suitable communications standard protocol and technology including Ethernet Global System for Mobile Communications GSM Enhanced Data GSM Environment EDGE a 4G network e.g. based upon the IMT 2000 standard high speed downlink packet access HSDPA wideband code division multiple access W CDMA code division multiple access CDMA time division multiple access TDMA a 4G network e.g. IMT Advanced Long Term Evolution Advanced LTE Advanced etc. Bluetooth Wireless Fidelity Wi Fi e.g. IEEE 802.11a IEEE 802.11b IEEE 802.11g or IEEE 802.11n voice over Internet Protocol VoIP Wi MAX a protocol for email e.g. Internet message access protocol IMAP or post office protocol POP instant messaging e.g. extensible messaging and presence protocol XMPP Session Initiation Protocol for Instant Messaging and Presence Leveraging Extensions SIMPLE Instant Messaging and Presence Service IMPS Multimedia Messaging Service MMS Short Message Service SMS or any other suitable communication protocol.

Those skilled in the art will also appreciate that while various items are illustrated as being stored in memory or on storage while being used these items or sections of them may be transferred between memory and other storage devices for purposes of memory management and data integrity. Alternatively in other embodiments some or all of the software components may execute in memory on another device and communicate with the illustrated computer system via inter computer communication. Some or all of the system components or data structures may also be stored e.g. as instructions or structured data on a computer readable medium or a portable article to be read by an appropriate drive various examples of which are described above. In some embodiments instructions stored on a computer readable medium separate from computer may be transmitted to computer via transmission media or signals such as electrical electromagnetic or digital signals conveyed via a communication medium such as a network or a wireless link. Various embodiments may further include receiving sending or storing instructions or data implemented in accordance with the foregoing description upon a computer accessible medium. Accordingly the present invention may be practiced with other computer system configurations.

Various embodiments may further include receiving sending or storing instructions and or data implemented in accordance with the foregoing description upon a computer accessible medium. Generally speaking a computer accessible readable storage medium may include a non transitory storage media such as magnetic or optical media e.g. disk or DVD CD ROM volatile or non volatile media such as RAM e.g. SDRAM DDR RDRAM SRAM etc. ROM etc.

a In some cases users of the offer discovery system may browse offers on their cell phone or other mobile device using techniques like those described above and when the user discovers an offer for which they wish to be reminded the user may request such a reminder with the mobile device. Some embodiments detect with the user s mobile device when the user is near their home for example based on geolocation or the presence of a home wireless network and in response remind the user to use the offer for instance by vibrating the cell phone or presenting some other alert. Further some embodiments convey reminders from one user to others or themselves of offers when those other users are in an appropriate location to use the offer for example near a store at which the offer is redeemable using similar techniques for determining location.

b In another example a user may discover an in store offer on a publisher s website or native mobile application and save the offer to their user profile. The saved offer may then be cached on the user s mobile device and a native mobile application on the mobile device may alert the user of the saved offer when the user crosses a geofence or receives wireless networking signals associated with a merchant s physical site where the offer is redeemable.

c In some cases after a reminder is requested the reminder recipient may be reminded of the offer when the recipient using a different computer logs in to an account for viewing offers such as on a webpage or native mobile application operative to display offers hosted by the offer discovery system .

d Some embodiments may cache reminders on a computing device executing a native application for viewing offers. For instance after a reminder is requested on a mobile device a native application executing on a different device e.g. a tablet computer at home may periodically poll other components of the offer discovery system for pending reminders and present responsive reminders after a user begins interacting with the computing device e.g. when a user wakes their tablet computer from a sleep state.

e In some cases reminders are conveyed between a mobile device and a redemption device such as a desktop computer directly such as via a Bluetooth pairing or similar wireless protocol for computing device to computing device direct communication near field communication or WiFi Direct or similar wireless protocol for computing device to computing device direct communication . A user may request a reminder on their mobile device and the mobile device may convey the reminder to a native offers application executing on a desktop computer when the mobile device comes in wireless range of the desktop computer which may then present the reminder or present an interface for redeeming the offer based on the reminder request.

f Some embodiments may distribute the functions of discovering offers determining that the user is near a location for redeeming the offer e.g. at home at work or at a particular store reminding the user of the offer and redeeming the offer among separate computing devices for example a user may discover the offer and request a reminder using their cell phone an application executing on a user s wireless router may detect that the user s cell phone medium access control MAC address is present on the home wireless network to determine that the user is home the router may instruct a gaming console to display a reminder of the offer to the user on the user s television and the user may then redeem the offer on a desktop computer with a webpage that is initialized to display the offer for which a reminder was presented based on a shared public Internet Protocol IP address of the computing devices in the home network. In other examples each of these functions may be grouped or distributed among a variety of different types of devices with which consumers interact including in dash computers of automobiles wearable computing devices like smart watches and head mounted displays smart home appliances like networked refrigerators and home automation equipment with embedded computers like networked thermostats entertainment devices like set top boxes gaming consoles optical media players and general purpose computing devices like smart phones tablet computers laptop computers and desktop computers. In some cases some of the functions are performed by computing devices operated by different entities for instance a user may discover or be reminded of an offer on a public kiosk computer provided by a merchant like a consumer facing tablet computer at a point of sale or near merchandise or one user may discover an offer and request that another user for example a family member be reminded of the offer on that other user s mobile device.

The illustrated offer discovery system in some embodiments may include an offers engine a mobile user device and a redemption device within a geofence . The offers engine in some cases may include some or all of the features of the offers engine described above with reference to . Some embodiments of the offers engine may publish offers to consumers such as a consumer operating the mobile user device for instance within a mobile webpage for viewing offers or a special purpose native application for viewing offers executing on the mobile user device . Examples of displays having an interface by which the user views offers are described below with reference to . In some cases upon viewing an offer the user may request a reminder for the offer using the interface of . That reminder may be implemented on the mobile user device for example by native application determining that the mobile user device has crossed geofence based on a location sensor of the mobile user device or i.e. and or the reminder request may be communicated to the offers engine over the Internet which may coordinate reminders and location sensing by the mobile user device or other devices.

Upon the user crossing the geofence or entering a broadcast region of a local wireless network on which the redemption device is resident the user may be presented with the requested reminder for example with haptic feedback e.g. vibrating from the mobile user device an audible alert like a beep on the mobile user device a visual indication on the mobile user device like an alert message text on a lock screen or in a header portion of a home screen of the user device or on some other device.

Upon being reminded the user may choose to interact with the redemption device which may be for example their home desktop of laptop computer to redeem the offer in which case some embodiments of the offers engine send the redemption device instructions to present an interface for redeeming the offer e.g. a webpage for the offer with a description of the offer a coupon code and hyperlinks to an affiliate network that redirect the consumer to the merchant s website . Thus in this use case the user may be reminded of the offer when near their home computer and the user may redeem the offer using for instance a larger screen and physical keyboard of a desktop computer. Embodiments however are not limited to this use case and a variety of other use cases are envisioned as described below.

In some embodiments the mobile user device may be a hand held mobile device having a portable power supply such as a lithium ion battery. The mobile user device may be a cell phone tablet computer smart watch or other wearable computing device by which the user views offers from the offers engine and request reminders of those offers. The mobile user device may include memory and a processor executing an operating system examples of which are described above with reference to . The mobile user device may further include a wireless network interface such as one or more of a cellular radio a wireless local area network interface a personal area network interface like an interface for Bluetooth or near field communication networking or combinations thereof. In this example the mobile user device executes a special purpose native offers application such as a native application hosted by a maker of mobile user devices and preapproved by that provider as meeting various security requirements e.g. in an app store . Embodiments are described below with reference to the native offers application but in some cases the interactions described may be implemented in a web browser executing on the mobile user device with mobile webpages.

The mobile user device may further include a location sensor which may be polled by the offers application to determine the geographic location of the mobile user device . Locations may be determined based on the current wireless environment of the mobile user device for example based on signals from a satellite navigation system like the Global Positioning System GLONASS or GNSS systems with cell tower triangulation based on the identity of cell towers based on identifiers of local area networks within range or by sending information about the current wireless environment over the Internet to a remote server that determines location based on attributes of the current wireless environment.

In some cases the mobile user device is not as well suited for redeeming an offer as the redemption device . For example the redemption device may have a larger display and a larger set of user interfaces for example a physical keyboard and a mouse that are absent from the mobile user device . In some cases the redemption device is a home desktop or laptop computer of the user of the mobile user device . Or in some cases the redemption device is some other device selected by the user for redeeming offers such as a tablet computer a set top box connected to a television like a gaming console. In some cases the redemption device is a device having a display screen larger than 6 inches diagonally to facilitate user friendly redemptions of offers though embodiments are not limited to this size range as some consumers may wish to use devices with smaller screens to redeem offers.

Like the mobile user device the redemption device may include memory and a processor executing an operating system such as those described above with reference to . In some cases the redemption device is a home desktop computer without a portable power supply. In this example the redemption device executes a web browser by which a user may redeem offers after being reminded of those offers. For example users may be reminded of offers on the mobile user device and in response a user may request a webpage for offers from the offers engine using the web browser . In some cases the offers engine returns a webpage that is initialized to present the offer for which a reminder was presented to the user as described below.

In some embodiments the redemption device is disposed within a geofence . The geofence may be a virtual computer recognized perimeter corresponding to a real world geographic area. In some cases the geofence is associated with the user of the mobile device for example in a user profile accessible by the offers engine or the geofence may be stored locally on the mobile user device to enhance privacy. The geofence may be a geofence around a home address of the user which may be provided by the user in a sign up webpage or other interface for creating a user profile.

In some embodiments the offers application may accumulate a location history of the user and infer a home address or work address of the user based on cluster analysis of locations and time of day of those locations for instance based on the user being within a threshold radius of a location more than a threshold amount of time for more than a threshold number of days of the week. Clusters corresponding to daytime locations may be inferred to be work locations and clusters corresponding to nighttime locations may be inferred to be home locations. In some cases users are associated with multiple locations for example a work location and a home location or multiple instances of such locations like alternate office locations. The geofence may be a predetermined threshold distance around one of the locations for example a geofence around the user s home geolocation or a geofence around the user s work geolocation. In some cases the offers engine selects among multiple candidate geolocations based on user interactions with the redemption device for example the work geolocation may be selected over the home geolocation in response to webpage requests from the redemption device while the location sensor indicates to the offers application that the user is at or near the work geolocation. Some embodiments of the offers engine or offers application may infer these geofences and present them in a menu to a user to customize the user s profile. Some embodiments may present user profile configuration interfaces with options by which users opt in or opt out of collection of geolocation data. In some cases the size of the geofence is selected based on the accuracy with which geolocations are sensed with an eye towards trade offs between false positives and false negatives of determining the user is at a location. In one example the size of the geofence is smaller than or approximately equal to a 500 meter radius around the user s home geolocation.

In some cases the geofence is specified by a bounding polygon or center point and radius that is stored in memory accessible to the offers application and the offers application periodically or in response to exceeding a threshold change in position such as in response to changing cellular towers polls the location sensor to determine whether the mobile user device is within the geofence . Upon determining that the mobile user device is within the geofence embodiments of the offers application may retrieve from memory a previously requested reminder or send a request for such reminders to the offers engine . Responsive reminders may be presented to the user for example by vibrating the mobile user device displaying a reminder on a lock screen of the mobile user device displaying a reminder in a header notification bar of an operating system of the mobile user device or sending an indication to the offers engine or another device that the location criterion of a reminder is satisfied so that other devices may effectuate the reminder.

Alternatively or additionally some embodiments may detect the location of the mobile user device based on the presence of a wireless area network associated with the redemption device or a location at which the user otherwise wishes to be reminded of an offer. For example the offers application may periodically poll the wireless network interface and determine whether the wireless network interface is receiving signals such as IEEE 802.11 wireless beacons or Bluetooth beacons from a wireless network associated with the redemption device for example by comparing a home wireless network SSID short service set identifier designated in memory of the offers application with a list of SSIDs of networks currently in range and as detected by the wireless interface device IDs of transmitters associated with the user s home or the redemption device like Bluetooth device identifiers or near field communication device identifiers associated with the user s home such as an identifier of a smart lock e.g. the Locktron mobile device controllable lock from Apigy of Mounterview Calif. at the user s home. In response to determining that criteria indicating the user is home or is at work or at a merchant s site if such a location is relevant to the reminder request have been met the offers application may effectuate steps described herein as being responsive to crossing the geofence .

The components of the offer discovery system may communicate with one another via the Internet and various other networks examples of which are described above. Further components of the offer discovery system may be geographically distributed for example in different states or countries.

As noted above the offers engine may include the attributes and features of the above described offers engine of though many of those features are not illustrated in to highlight components relating to reminders of offers. In this example the offers engine may include a reminder module an offer suggestion module a reminders data store and a presentation initializer . These components are illustrated as discrete functional blocks but it should be understood that hardware or software by which this functionality is provided may be subdivided conjoined intermingled co located distributed or otherwise differently arranged. Further to accommodate relatively large numbers of users for instance in the hundreds of thousands or millions and relatively large numbers of offers for instance in the thousands or tens of thousands some embodiments may include multiple instances of some components and load balancers to balance computing loads there between as well as content delivery networks to deliver resources used in the presentation of offers from geographically distributed locations likely to be closer to end users. In some embodiments the reminder module may manage the creation and execution of reminders the offer suggestion module may suggest alternate offers to users based on offers for which reminders were requested the reminders data store may store information about reminder requests and the presentation initializer may initialize the presentation of webpages or state of offers applications on redemption devices after the presentation of a reminder to display the offer for which a reminder was presented including reminders presented on another device. In some cases some or all of these components may be instantiated on the mobile user device for example as part of the offers application or some components may be instantiated on the redemption device or other computing device.

In this example the reminder module includes a reminder registrar a reminder filter a location event handler and a reminder dispatcher . The reminder registrar in some embodiments may create new reminder records in the reminder data store examples of which are described below in response to requests from the mobile user device or other devices for such a reminder.

For example the reminder registrar may parse reminder parameters from reminder requests sent by the offers application in response to a user requesting a reminder using the interface of to create a corresponding reminder record. In some cases this request is encoded in a transport protocol e.g. hypertext transport protocol or SPDY GET or POST command or the request may be encoded in accordance with an API supported by the API server described above with reference to which may support a command to create a reminder. In some cases the reminder registrar may send the mobile user device instructions to display a reminder configuration interface by which the user further configures reminders for example by selecting the recipient of a reminder from among a social network of the user by selecting among reminders for alternate offers identified by the offer suggestion module by selecting reminder time periods e.g. by specifying that a reminder should be presented later than a first threshold time and before a second threshold time or only during certain days of the week or times of year or in response to the weather changing in a geographic area associated with the user such as more than a threshold chance of rain or above or below a threshold temperature by selecting a context in which the user wishes to be reminded e.g. by specifying a home or work geolocation or a geolocation associated with the merchant issuing the offer and in some cases by providing a message to the reminder recipient e.g. a text audio image or video message such as please use this store wide 20 off coupon to purchase vanilla ice cream to be presented with the reminder. The reminder registrar may receive responsive data from the mobile user device or other devices and augment the created reminder record. Or some embodiments may create a default reminder record specific to the user s home and an offer identified in the request without soliciting further information from users which is not to suggest that other features described herein may not also be omitted in some embodiments.

In some cases users may inadvertently request reminders for offers that expire before the reminder is presented. The reminder filter in some embodiments may filter reminders according to whether the offer has expired has less than a threshold user rating based on historical feedback on the offer from other users e.g. aggregate statistics of up votes or down votes or a zero to four star rating or has otherwise changed. For example the reminder filter may periodically e.g. daily or hourly query the reminder data store for pending reminders for which a reminder will potentially be sent in the future and compare the current date to an expiration date of an offer associated with the reminder. Upon determining that an offer associated with the reminder has expired or has a user rating below a threshold some embodiments of the reminder filter may flag the reminder record as relating to an expired or low quality offer thereby causing some embodiments of the offers engine and mobile user device to not present a reminder of the offer or suggest another offer. In some cases the reminder filter may be configured to determine that an offer is set to expire within some threshold time in the future for example within the next day or week and a reminder may be sent to the operator of the mobile user device or other reminder recipient regardless of whether the recipient is within the geofence .

In some embodiments the location event handler determines whether any reminders are pending for a geographic location when e.g. in response to a user enters the geographic location specified in a reminder record e.g. an area specified by a geofence. In some embodiments the offers application on mobile user device determines that the user has entered the geofence which may include becoming in range of a wireless network that is not necessarily defined by known geographic coordinates specifying a perimeter and in response the offers application may send a reminder request to the offers engine indicating the geofence that was entered for instance whether the user entered the geofence for their home their work or a merchant. In some cases a plurality of geofence descriptions e.g. polygons or GPS coordinates and radius along with corresponding identifiers or wireless network or device identifiers are stored on the mobile user device for determining when to submit such a request for reminders by the application . The request for reminders may be received by the location event handler which may query the reminders data store for pending reminder records corresponding to the location of the geofence in the request. Upon e.g. in response to determining that responsive reminder records are pending e.g. the records pertain to offers that have not expired the records pertain to the geographic location specified in the request and a reminder has not been sent or has not been sent more frequently or often than specified the location event handler may cause the reminder dispatcher to send a command to the mobile user device for the offers application to present the reminder. Presenting the reminder may include vibrating the mobile user device displaying data indicative of the offer on a display of the mobile user device or presenting an audible signal among other options. Or in some cases the mobile user device may be instructed to convey a reminder to another device by bypassing the offers engine for example via a local area network WiFi Direct or a personal area network such as via Bluetooth or near field communication to another device to present reminder for instance on the redemption device .

In some cases the location event handler may update the corresponding reminder record upon the command being sent with for instance a Boolean value indicating that the reminder has been sent a timestamp indicating a time at which reminder was sent or incrementing or decrementing a counter of a number of reminders sent. Some embodiments of the location event handler may throttle reminders sent to a given mobile user device to budget the user s attention and avoid annoying the user with excessive reminders in a short duration. Or in embodiments where reminders are presented potentially on multiple computing devices to the same recipient presentation across multiple devices may be similarly throttled. To this end some embodiments may update records in a user profile of the reminder recipient to indicate that a reminder was sent and the time at which the reminder was sent. In some embodiments the location event handler queries these records before sending a reminder to determine whether to delay the reminder because the user has recently received more than a threshold amount of reminders or reminders at greater than a threshold rate within some trailing duration. In some cases upon determining that a user is at the geographic location some embodiments may add the reminder to a first in first out buffer of pending reminders from which the location event handler pulls reminders at a predetermined rate e.g. one every 15 minutes to be sent to the reminder recipient to avoid annoying recipients with excessive alerts. In some cases the location event handler is configured to bundle reminders such that reminders for multiple offers which may be requested through multiple interactions at different times are sent to the reminder recipient and presented with a single alert.

In some embodiments the location event handler may be instantiated on the mobile user device as part of the offers application and relevant reminders may be stored locally. In these embodiments reminders from third parties may be pushed to the offers application or pulled from the offers engine by the offers application making API requests for such transactions.

The reminder dispatcher in some embodiments may be operative to send reminders to the appropriate device for a reminder recipient. In some cases the reminder dispatcher receives instructions from the location event handler indicating that a reminder is to be sent and identifying the reminder recipient. In response the reminder dispatcher may retrieve a user profile to identify a network address of a reminder recipient device for example an IP address of the mobile user device or a device or account identifier of the mobile user device e.g. a cell phone number for sending a text message conveying the reminder . Or the reminder dispatcher may determine based on the user profile of the recipient that the user or the reminder request designates a different device.

Examples of devices with which a reminder may be presented include various networked devices likely to be in the presence of the reminder recipient and capable of conveying information through a user interface including an in dash vehicle navigation system a networked television an Internet enabled set top box like a gaming console connected to a television an optical media player connected to the Internet a smart appliance like an Internet enabled refrigerator home automation equipment such as an Internet enabled thermostat or a wearable computing device such as a smart watch or head mounted display . Embodiments may send reminders by pushing those reminders to a designated IP address or other network address e.g. a phone number or in some embodiments reminders may be pulled from the offers engine by a reminder recipient s computing device executing a special purpose native application that periodically queries the offers engine for reminders to be presented to the reminder recipient. In some cases requests for reminders may include a device identifier or account identifier by which the reminder recipient or device is identified to the offers engine such that corresponding reminders can be identified by the reminder dispatcher and returned.

The content of the reminder may include instructions to a computing device of the recipient to present a visual audible or haptic alert. In some cases the content includes a summary of the offer and an indication of who requested the reminder and when the reminder was requested. Presenting a summary of an offer does not require that all terms of the offer be presented in a single display such that the offer can with only the summary be accepted. Rather presenting a summary of an offer may include describing some terms and in some cases providing a hyperlink to a fuller description of the offer.

In some embodiments the offers engine may further include an offer suggestion module configured to suggest offers to reminder recipients e.g. based on offers in requested reminders a user s profile or a combination thereof. For example a user may request a reminder for a given offer on a given good or service with a given discount off of a base price and the offer suggestion module may determine that another offer has a greater discount than the given offer and identify the other offer as a suggestion in the reminder. Or embodiments may determine that another offer is better or is likely to be attractive to the reminder recipient based on other criteria such as a later expiration date a product with better specifications or an offer with otherwise more favorable terms.

In some cases the offer suggestion module may store in memory a taxonomy of products or services to which offers pertain and a weighted directed product or service graph with edges indicative of the degree to which products or services are substitutes for one another and other edges indicative of the degree to which products or services are complements for one another. Upon determining that the reminder request has been received the offer suggestion module may query the taxonomy to identify the type of the product or service to which the offer pertains and the weighted directed graph to identify other products or services that are likely to be substitutes or complements to the product or service of an offer for which a reminder was requested. In some cases upon determining that a weighted edge of the graph exceeds a threshold for a complement or for a substitute embodiments may query the offers data store of for additional offers for that product or service of the adjacent node and those offers may be bundled with the reminder or sent instead of the reminder upon determining that the offer for which the reminder was requested has expired.

Weightings for edges of the graph for complements may be determined empirically for example based on merchant feedback from redeemed offers indicative of products or services that were purchased together. Counts of purchase pairs may be incremented and normalized based on the total number of purchases and the normalized values may be used as edges of the weighted directed graph for identifying offers to be suggested as complements. Similarly weightings for edges of a graph relating to substitutes may be determined empirically based on pairs of user interactions with offers for different items where the user ultimately purchases only one of the items in the pair for example as often occurs during comparison shopping where users may click through on offers for competing products before ultimately purchasing one of the two competing products.

Upon identifying an offer to be suggested with a requested reminder the offer suggestion module may update a reminder record corresponding to the reminder at issue to include instructions to alert the reminder recipient of the suggested offer. In some cases a determination to suggest offers is made based on a weighted score based on e.g. a weighted sum the degree to which one offer has a greater discount than the other the degree to which a good or service is a complement and the degree to which a good or service is a substitute. Some embodiments may determine whether the weighted score exceeds a threshold before making a suggestion and weightings and the thresholds may be dynamically adjusted based on feedback from whether users accept the suggestions.

Some embodiments further include the reminders data store which may be configured to store records about reminders requested by users. In some cases the reminders data store includes a plurality of reminder records each reminder record including an identifier of the reminder record that is unique within the reminders data store an identifier of the user account of the user requesting the reminder an identifier of the user account or device of the reminder recipient an identifier of a geolocation at which the reminder is to be presented an identifier of the device upon which the reminder is to be presented a time at which the reminder was requested an IP address to which a reminder was sent for presentation or from which data indicating such a presentation was received a time after which the reminder is requested to be sent a time before which the reminders requested to be sent a list of reminder instances indicative of times at which a reminder was presented or sent an identifier of an offer record in the offers data store for which a reminder was requested and identifiers of offer records of offers suggested by the offer suggestion module .

In some embodiments the presentation initializer is configured to initialize a webpage or state of a native application on the redemption device to display an offer e.g. a summary of an offer for which a reminder was sent to the mobile user device or other device upon which a reminder is presented . Initializing a webpage or native application may include receiving from the redemption device a request for data relating to offers such as a GET request for an offers webpage or some other API request for data in offer records. In response to the request the presentation initializer may determine whether the request relates to a reminder that was recently sent for example whether the request relates to a reminder that was sent within some threshold duration of time like within the previous hour or previous week.

Requests may be correlated with sent reminders by the presentation initializer with a variety of techniques. For example the received requests following a reminder may be conveyed in a transport protocol that includes an Internet Protocol address of the sender and in response to a request the presentation initializer may query the reminders data store for reminders sent to the same Internet Protocol address which for public IP addresses may be shared by multiple computing devices in the user s home or work. Multiple computing devices within a local area network may share a single public IP address with network address translation occurring within a router in the home or work network. As such multiple devices within a local area network may appear to the outside world to have the same IP address and the shared IP address may be used by the presentation initializer to customize data for one computing device based on reminders sent to another device sharing the same public address.

In another example the redemption device may be correlated with a reminder sent to another device based on a user profile of the user to which the reminder was sent for example based on a list of device identifiers stored in the user profile. In some such embodiments the presentation initializer may parse a device identifier from the request or request such an identifier for example stored in LocalStorage or a cookie from the redemption device and the presentation initializer may then query user profiles for profiles associated with that device identifier. From the responsive profiles the presentation initializer may extract a list or lists of device identifiers and each of those device identifiers may be submitted to the reminders data store in a query for reminders sent to those corresponding device identifiers thereby correlating the device to which a reminder was sent with the redemption device based on both appearing in a user profile. User profiles may be associated with device identifiers with a variety of techniques including users manually updating their profile to add such information or correlating previous interactions with the offers engine by a logged in user operating various devices from which device identifiers are retrieved or otherwise obtained the logged in sessions being used to match different computing devices to a single user profile.

Initializing the presentation may include retrieving an offer record from the offers data store of corresponding to the offer that was the subject of an identified reminder and in some cases offer records of offers identified by the offer suggestion module . Initializing the presentation may further include sending a webpage that includes only the identified offers e.g. a summary of the offers that were subject to a reminder or were identified by the offer suggestion module . Or in some cases a plurality of offers may be sent including offers unrelated to the reminder and the plurality of offers may be sent with instructions to the redemption device to display the offers in reminders with a different visual weight different layout different interfaces different content or the like to indicate that the offer is one for which a reminder was sent. Initializing the presentation of offers may reduce the number of steps taken by a user to redeem an offer relative to steps taken to redeem other offers not subject to a reminder. Reducing the steps and visually emphasizing such offers is expected to lower the cognitive burden on users by making it easier to identify and redeem offers in which they are likely interested as indicated by the request for a reminder relative to systems that display offers without regard to whether reminders have been sent. It should be emphasized however that not all embodiments necessarily provide this benefit as various other aspects of the present techniques are independently useful.

Some embodiments of the offer discovery system include a distributed computing environment with multiple devices with which the users interact that collectively provide a consistent workflow from offer discovery to offer reminder to offer redemption in some case spanning multiple user devices. The above examples are described with reference to a mobile user device on which offers are discovered and reminders are triggered and presented and a separate redemption device with which offers are redeemed. These functions however may be further divided among additional computing devices as described below and in some cases offer reminders may be implemented with some or all of the functionality of the offers engine relating to offer reminders being implemented in the mobile user device the redemption device or other computing devices as is also described in examples below. Before addressing these other embodiments it is helpful to consider examples of interfaces by which offers are discovered and reminders are requested for example on the mobile user device and examples of processes performed by the offer discovery system and other embodiments.

Upon a user selecting one of the offers in the display of e.g. on the mobile user device the user device may present a display corresponding to the selected offer shown in . The display may include a superset of the data about an individual offer shown in including a longer description of the offer and various user selectable interfaces such as virtual buttons to search for additional offers by the corresponding merchant virtual buttons to save the offer in a user profile such that the offer may be viewed later by requesting saved offers from the offers engine virtual buttons to redeem the offer and virtual buttons to share the offer with other users such as other users within a social network graph that are adjacent the user operating the mobile device .

In some embodiments the display includes an interface to request a reminder and an interface to configure a reminder request. Users may request reminders by touching clicking on or otherwise interacting with interfaces and . For example the offers application or JavaScript executing in a webpage may include an event handler for touch events within the areas of display corresponding to interfaces and and those event handlers may execute scripts or other routines that effectuate the functionality that creates reminders in response to associated events.

For instance upon a user selecting interface labeled remind me at home the offers application may send a request to the offers engine for the reminder registrar to create a reminder record in the reminders data store . In some cases the created record may be a default record for reminders at the user s home geolocation and the sent request for the reminder may identify the user such that the reminder request may be used to identify the user s home geolocation and the offer displayed on display . In other embodiments the reminder request may be stored locally on the mobile user device which may execute an instance of the location event handler and reminder dispatcher described above to present a reminder when the offers application determines that the user has entered the geofence or has otherwise satisfied a geographic constraint.

In some embodiments upon a user selecting the interface the offers application or corresponding webpage may present additional displays with interfaces by which the user may configure the reminder. For example the user may be presented with a list of adjacent nodes in a social network graph by which the user may identify a different reminder recipient for example a request to remind the user s spouse to redeem an offer when at home at work or at a merchant site corresponding to the offer. In another example the user may configure the offer reminder to be presented in a particular geographic location such as the user s work geolocation or at some other geolocation. Upon configuring the reminder request the reminder request may be sent to the reminder registrar in the offers engine or the reminder request may be stored locally on the mobile user device for execution of the reminder by the mobile user device without prompting from or reminder specific requests to the offers engine .

The process and other processes described herein in some embodiments may be performed concurrently for hundreds or thousands of different users across hundreds thousands or substantially more offers. Accordingly to operate at such scales some embodiments may include multiple instances of computing hardware for effectuating the same routines along with load balancing servers and content delivery networks to speed the delivery of resources to user devices that are potentially geographically distributed over a large area such as North America and Europe or a substantial portion of the world.

In some embodiments the process begins with sending from an offers engine to a mobile user device data describing a plurality of coupons or other offers such as discount deals redeemable online the mobile user device being located away from a residence of the user as indicated by block . For example the user may be waiting in line with time that is otherwise unoccupied and the user may take advantage of the time to browse offers in which they may be interested later but which they are not presently interested in redeeming on their mobile user device. Alternatively the user may be show rooming e.g. browsing merchandise in a store and at the same time look for coupons in order to purchase online at a later time at a lower price.

Next in some embodiments the offers engine may receive from the mobile user device a reminder request the reminder request identifying a coupon among the plurality of coupons and indicating that the user wishes to be reminded of the coupon when at or near their residence as indicated by block . As noted above the reminder may also relate to other types of offers and the reminder request may be a request to be reminded a different location or a request for the reminder to be sent to a different user.

Next embodiments may store the reminder request in a reminder data store as indicated by block . The reminder request may be stored in a reminder record in the above described reminders data store of in some embodiments. In some cases the reminder request may be stored locally on a mobile user device or other device.

In some embodiments the offers engine may receive an indication from the mobile user device that the user is at their residence as indicated by block . In some cases the indication is a request from the mobile user device for offer reminders associated with a geofence that the user crossed or for offer reminders associated with a wireless network to which the mobile user device connected or is in broadcast range of. In other examples the reminder request may be stored locally and the mobile user device may send a signal to the offers engine indicating that the geographic criteria of a reminder request has been satisfied to track reminders on the offers engine in the reminders data store and facilitate initialization of displays of offers following reminders.

Some embodiments include determining that the user has requested a reminder as indicated by block . Determining that the user has requested a reminder may be performed by the location event handler described above with reference to and the determination may be performed by the offers engine or the offers application . In some cases the determination includes determining that the offer reminder pertains to the current geographic location of the user and in some cases determining includes adding the offer reminder to a queue of reminders e.g. a FIFO buffer and determining that more than a threshold amount of time has passed since the last time a reminder was presented to the user to budget the user s attention.

Some embodiments include sending a reminder of the coupon or other offer to the mobile user device as indicated by block . In some embodiments this step may be performed by the above described reminder dispatcher or the reminder may be resident on the mobile user device or may have been pushed to or pulled by some other computing device by the offers engine or by the mobile user device. In cases in which the reminder is stored in advance on the computing device that will present the reminder e.g. in a reminder cache some embodiments may include instructions for that computing device to query the offers engine to determine that the offer is still valid before presenting the reminder and in some cases to request offers identified by the offer suggestion module .

Embodiments further include receiving a request for an offers webpage from a personal computer or other computing device of the user as indicated by block . In some embodiments the request may come from a variety of different computing devices from the computing device upon which the offer was discovered or upon which a reminder of the offer was presented. In some cases the request is for data to be presented by another instance of the offers application executing on another user device.

In some cases embodiments include retrieving data describing the coupon or other offer from an offers data store as indicated by block . This step may include determining that the request in block is from a user to whom the reminder is sent in block and in response initializing the offers webpage or state of a native offers application to display the offer that was the subject of the reminder. In some cases initialization is performed by the above described presentation initializer of though embodiments are not limited to that implementation. In some cases data describing suggested offers from the offer suggestion module may also be retrieved.

Embodiments may further include sending instructions to the personal computer or other computing device to display the data describing the coupon as indicated by block . Sending instructions may include sending markup styling and scripting instructions to a web browser executing on the redemption device of or sending instructions may include sending data describing the offer according to an API of the offers engine to a native offers application executing on the redemption device .

In some embodiments the process begins with displaying with a mobile user device an offer and a reminder interface to indicate that the user requests themselves or another reminder recipient to be reminded of the offer when near another computing device of the reminder recipient as indicated by block . Examples of displays of an offer and a reminder interface are described above with reference to . In some cases this step is performed by the above described offers application of mobile user device of .

Next embodiments of process include receiving an interaction with the reminder interface by the user and in response storing a reminder request in memory the reminder request identifying the offer as indicated by block . In some cases the interaction is received by an event handler executed by the offers application of . The reminder request may be stored locally on the mobile user device or remotely for example in the above described offers engine . Identifying the offer may include storing an offer identifier corresponding to a record in the above described offers data store of .

Embodiments of process may proceed to one or more of three different branches and for determining that a reminder recipient is at a location e.g. a geographic area at which the reminder is to be presented to the recipient. In some cases hardware and software for performing the method supports all three branches and or embodiments may support a subset of these branches.

As indicated in branch some embodiments include obtaining data identifying the other computing device as indicated by block . In some cases the other computing device is identified by an IP address through which the other computing device exchanges data over the Internet user agent information or data stored in cookies or LocalStorage of the other computing device or a combination thereof. For example some embodiments may store in a user profile of the reminder recipient a home IP address of the router through which the reminder recipient connects to the Internet through their home network or their work network for example . In some cases the other computing device may be identified by a request for a webpage or an API request to the offers engine of . Such a request may include the IP address in a header field of a packet conveying the request. Based on the IP address being so designated in a user profile embodiments may determine that the request comes from the user s home or work. Further embodiments may determine based on user agent information that the request comes from a desktop computer or a particular operating system associated with the other computing device. In some cases embodiments of the offers engine may send JavaScript to be executed by the other computing device to return a window size or screen size indicative of the other computing device such as a screen size larger than a threshold number of horizontal or vertical pixels. In another example such scripts may be sent and executed by a client to return to the offers engine an identifier of the user and the device from a cookie or LocalStorage or the user may log in with a user name and password on the other computing device thereby self identifying such that corresponding reminders may be retrieved. In some cases the other computing device may be identified with specificity that is unique to that computing device such as a MAC address or other device identifier like an advertiser specific device ID or the other computing device may be identified based on capabilities such as a computing device having a window or screen size larger than some threshold or a particular operating system such as a operating system known to be used primarily by desktop computers.

Some embodiments of process in branch detect that the reminder recipient has interacted with the other computing device as indicated by block . Detecting the interaction may occur concurrently with obtaining data identifying the other computing device for example concurrent with receiving a GET request or API request indicative of interaction received at an offers engine. In another example a native offers application may execute on the other computing device and upon the user interacting with the other computing device for example waking it from a sleep state the offers application may detect that the reminder recipient has interacted with the other computing device and report the interaction to the above described offers engine such that reminders may be retrieved or locally cached reminders may be presented.

Branch illustrates another example of determining the location of the user in process . In this example some embodiments obtain data identifying a geographic area of the other computing device as indicated by block . Obtaining data identifying the geographic area may include inferring a home address or a work address or both of the reminder recipient based on accumulated location histories acquired by a mobile user device of the reminder recipient. For example a reminder recipient s home address or home geographic area may be inferred based on a cluster analysis of timestamped geolocations accumulated over some duration of time such as a month by a native offers application. In some cases multiple clusters may be detected for instance one corresponding to a likely home address and one corresponding to a likely work address. In another example users may specify the geographic area for their home for their work or for a particular reminder manually by interacting with the offers engine of for instance by drawing a box on a map interface area corresponding to their home or placing a pin icon on a map location corresponding to their home.

Geographic areas may be described with a variety of data structures. In some cases a geographic area may be described by a bounding box or other polygon having vertices of latitude and longitude coordinates stored in a list in memory. In another example a geographic area may be described with one or more identifiers of unit tiles corresponding to unit geographic areas for example unit squares of a rectangular lattice or unit hexagons of a hexagonal lattice. In another example a geographic area may be described by a center point latitude and longitude coordinate and a radius. The geographic area may be obtained by retrieving such geographic areas from a user profile of the reminder recipient in the offers engine described above or such geographic areas may be maintained exclusively on a mobile user device or other computing device of the reminder recipient for enhanced privacy.

In some cases the other computing device is a specifically identified other computing device known to be in the geographic area for example a specific home desktop computer. Or the other computing device may be any of a plurality of other computing devices within a home or work environment and the geographic area is not specific to one of these devices.

Some embodiments of process in branch further include detecting that the reminder recipient has entered the geographic area as indicated by block . Examples of such detection are described above with reference to . For example a location sensor in a mobile user device may be used to determine by a native offers application that the user has traversed e.g. is within a geofence corresponding to the geographic area of a reminder. In some cases the mobile user device may periodically query the offers engine for geographic areas corresponding to reminders or the mobile user device may infer and store a list of such geographic areas locally. In some embodiments the mobile user device compares the current location of the mobile user device to the geographic area or areas periodically or in response to a change in location of the mobile user devices larger than some threshold for example in response to the mobile user device changing cell towers to reduce the power draw from frequent periodic checks when no change in position has occurred.

Branch of process illustrates another example of an embodiment by which the process may determine the location of the reminder recipient e.g. determine whether a location criterion of a reminder request has been satisfied . In some embodiments branch includes obtaining data identifying a wireless environment of the other computing device as indicated by block . Such data may include one or more SSIDs of a home wireless local area network.

In some cases a home wireless network is inferred based on an analysis by which a history of connections to or beacons from wireless area networks is ranked by frequency duration or both during evening hours for example to identify a home network by a native offers application. A similar analysis may by executed by the native offers application to identify a work wireless network using connections during work hours. In other examples the user may manually identify the SSID of their home wireless local area network and their work wireless area network.

Other examples of data identifying a wireless environment includes identifiers of a Bluetooth transmitter of the other computing device or a near field communication identifier associated with the other computing device. In some cases the user may designate such an identifier by using a configuration interface of native offers application on the mobile user device to select among such identifiers in range when proximate the other computing device to create such a designation in the mobile user device. In another example the wireless environment is identified by a Bluetooth beacon such as a Bluetooth Low Energy beacon that indicates proximity to the other computing device such as an in store Bluetooth beacon that indicates proximity to a point of sale terminal or kiosk or an at home beacon. In some cases identifiers of such beacons and corresponding merchants or locations may be acquired from third parties such as providers of location beacons hosting an API by which relevant data may be queried based on an identifier conveyed by the beacon signal. In some cases the other computing device is a point of sale terminal or in other cases the other computing device is a specific home computer known to be on the same wireless network as the beaconing device.

In some embodiments the data identifying a wireless environment includes a list of MAC addresses of other computing devices connected to the same local wireless area network as a mobile user device. In some cases the other computing device may be identified by such a MAC address or other identifier and the mobile user device may query a router or scan a network for a list of locally connected devices identified by MAC addresses to determine whether the other computing device is connected to the same router as the mobile user device.

Next some embodiments may detect that the reminder recipient has entered e.g. is in the wireless environment as indicated by block . In some cases the detection may be performed by the above described mobile user device which may for example compare an SSID received in a wireless beacon to an SSID correlated to a local network of the other computing device. In another example specific device identifiers may be detected based on device identifiers available over local or personal networks such as Bluetooth identifiers near field communication identifiers and MAC addresses. Entry to the wireless environment may be detected by matching received identifiers with identifiers stored in memory accessible to a native mobile offers application.

In some embodiments a different computing device from the above described mobile user device may detect that the reminder recipient has entered the wireless environment. For example the other computing device may execute a native offers application that periodically senses whether a MAC address of the mobile user device is resident on a wireless area network or whether a Bluetooth or near field communication identifier of the mobile user device has been broadcast in range. In some cases a third computing device determines that the reminder recipient has entered the wireless environment. For example an application executing on a home router may determine that the MAC address of the mobile user device is resident on a home wireless area networks. Or personal area network identifiers may be used to detect entry for instance a Bluetooth or near field interface of a smart thermostat or electronic lock may be used to determine proximity of the mobile user device e.g. based on the mobile user device broadcasting an identifier on such a network in which case the third computing device may report the proximity to the mobile user device the above described offers engine or the other computing device to initiate presentation of the reminder.

The process of further includes presenting a notification reminding the reminder recipient of the offer as indicated by block . Presenting the notification may include vibrating a user device emitting an audible alert or displaying a visual alert. The notification may be presented with a mobile user device a wearable computing device or a television through a network enabled set top box a gaming console an optical media player or the notification may be presented on a display on some other computing device such as an Internet enabled home automation system refrigerator thermostat or the like. In some cases the reminder is presented on an in dash automotive computer for example when the user pulls into the driveway of their home or on a public kiosk in a store such as a networked display in a checkout line.

Thus as illustrated in the present techniques may be implemented in a variety of different ways with various devices serving different functions. As device makers increasingly offer richer APIs and open their systems to third party developers such interactions are expected to become increasingly common and expected by consumers particularly as consumers engage with increasing numbers of offers of increasing complexity. Further distributed native applications on multiple devices may facilitate reminders with direct device to device communications without the communication being mediated by the offers engine . Some of these multi device use cases are described by .

After the reminder is presented on the mobile user device and the mobile user device communicates with the offers engine through the local area network router s public IP address the user may launch the web browser on the redemption device and request a webpage from the offers engine through the same public IP address of the local area network router . In some cases the offers engine may store the public IP address associated with the reminder in memory and match that address to the request for a webpage from the redemption device . Based on the match the offers engine may initialize the webpage sent to the redemption device to display the offer that was the subject of the reminder sent to the mobile user device thereby potentially reducing user interaction steps to redeem the offer relative to systems that do not initialize the webpage based on having sent a reminder. Not all embodiments however provide this benefit as other aspects described herein are independently useful.

In some embodiments an offers engine implementing part of the process may receive the reminder request as indicated by block and identify merchant sites e.g. brick and mortar stores at which the offer is redeemable as indicated by block . Some embodiments may then determine that the reminder recipient agreed to receive offers from the reminder requester as indicated by block . Such agreements may be recorded in a user profile of the user and updated by users by interacting with the interface for changing settings in user profiles hosted by the offers engine. Some embodiments further include sending a mobile device of the reminder recipient instructions to present reminders when at or near the merchant site as indicated by block .

In some embodiments a mobile device of the reminder recipient may receive the instructions as indicated by block and detect the recipient mobile device being within a geofence or wireless environment of the merchant s physical site as indicated by block . In response to the detection some embodiments may then display the reminder with the mobile device of the reminder recipient as indicated by block .

Some embodiments may use signals from a mobile user device to ascertain the geolocation of a user and recommend offers or remind the users of offers selected based on the geolocation on another user computing device that is not itself configured to provide fine grained geolocation information. For instance when a user is interacting with a desktop computer that lacks a GPS sensor embodiments may select offers based on geolocation information from other user devices associated with the same user e.g. a cell phone such association being for instance in one of the above mentioned user profiles e.g. by a list of device identifiers or by a user logging into their account on both devices to ascertain geolocation. Coarse grained geolocation information from direct signals like the IP address of the desktop computer is often not sufficient by itself to precisely locate the user. But users often carry their mobile phone or other GPS capable devices even when using a desktop computer. Thus the user is often accompanied by a geolocation sensing capable device even when using a device that does not have this capability. Some embodiments leverage this geolocation sensing capable device to select content for another device that is not configured to sense geolocation thereby providing locally relevant offers even on devices that do not provide fine grained location information.

It should be noted though that while some embodiments are described by way of example with reference to providing locally relevant offers the present techniques are not limited to offers. In some embodiments the present techniques may be used to select and to send other types of information that might be relevant to a user based on their location. For example embodiments may select based on location of one device and send to another device geographically targeted advertisements traffic updates weather alerts public safety alerts news feeds tourist information and other content selected based on acquired geographic locations.

To select and provide content like offers to a non geolocation capable device embodiments may use indirect signals taken from another device like a mobile phone. For instance if the user is logged into an account e.g. of one of the above described offer discovery systems on a desktop computer web browser and the user has previously logged into a corresponding native mobile application e.g. of the same offer discovery system on their phone some embodiments may tie the two data sources together thereby matching the phone s geolocation to the desktop computer web browser. Thus even if the user is not actively using their phone some embodiments may use the phone s location as a proxy for the user s location when selecting and providing content to the other device.

For example assume that a user has installed and logged into one of the above described examples of a native mobile application on their phone in the past. That installed app may then in response send location data back to other components of the offer discovery system. If that user then logs into a website interface of the offer discovery system via their laptop in response embodiments may check where the user s phone is located based on data pushed by or pulled from the mobile app. For instance if the phone is in a coffee shop in Seattle embodiments may assume that the user and their laptop are in that same coffee shop. In response embodiments may then customize the content that the user sees on the laptop based on that detailed location information from the phone.

In some cases the two user devices one being capable of sensing geolocation and the other being the device upon which the user is requesting and viewing content may be correlated based on a user logging into a user account on both devices. Logging in can include configuring a mobile app with a user s log in credentials at the time the application is installed or logging in on a website thereby causing the offer discovery system to set a cookie or other client side persistent e.g. remaining when the device is turned off storage with a user identifier that may later be retrieved in a subsequent session to identify the user.

In another example the two user devices may be correlated without a login on at least one device by determining that both devices have the same public IP address for a local area network as often occurs with network address translation on home routers. In some cases the two user devices are owned by the same person and for instance associated with the same account or in some cases the two devices are owned by different people using the same local area network. For example one person may be using a mobile phone on a coffee shop wireless network and another person may be using a laptop on the same network. The two devices may be tied together by a single public IP address of a coffee shop router using network address translation to translate between distinct private IP addresses of the two devices and a single shared public IP address. A geolocation from a mobile device of one person may be used to select geographically relevant offers for the other person on the same local area network.

In some cases as noted above two user devices may be matched to a single user based on a shared account. It should be noted however that in some embodiments neither device is associated with a user having a user account. Some embodiments may use third party tracking services to identify users the two devices and tie the two devices together. For example some embodiments may use such a service to tie a mobile device ID to an email address and tie the email address to a web browser all of the same user. In some cases as explained further below this linking is done entirely or partially through other web sites or native mobile applications and then aggregated by third party solutions. As a result in some embodiments even though the user never logged into an offer related service or gave an offer related service their email address embodiments may still tie the two devices together because the user gave their email address to another application running on the same mobile device and to another website that they accessed via the same desktop browser. In another scenario the users may provide an offer related service examples of which are described below their email address on one platform e.g. sign up for an email newsletters without creating an account and this email address may be tied to a browser ID or device ID using a third party matching solution. LiveRamp of San Francisco Calif. is an example of a company that provides such third party matching solutions.

In another example the two devices may be tied together based on single use offer codes. Single use offer codes associate a unique code with each instance of an offer such that multiple instances of an offer can be distinguished thereby facilitating verification of whether a single use offer code has already been redeemed. Before redeeming such an offer some merchants may query a record of single use codes e.g. in the offer records described above that have been issued and redeemed to condition redemption on the code having not been issued and not redeemed. When a user acquires such a code e.g. on the user s mobile device the offers engine may store in memory the device identifier in association with the code. When the user redeems the offer the merchant may associate in memory both the single use code and an identifier of the user e.g. an email address or phone number. This association may be provided to the above described offers engine. Some embodiments may acquire the same identifier of the user on a desktop computer via a log in email signup or third party identification. The identifier received via the user s desktop computer may be matched to the identifier conveyed via the merchant to tie the desktop computer to the mobile device to which the single use offer code was provided.

In another example the two devices may be tied together based on wireless identifiers conveyed at checkout in a brick and mortar store. For instance a native application on the user s mobile device may monitor wireless signals for wireless beacons e.g. low energy Bluetooth beacons placed in range of a merchant checkout station. During checkout the native application may record a beacon identifier or other wireless identifier and report the wireless identifier and in some cases information about signal strength to estimate distance with a time stamp to the offers engine. The merchant may also record the time of the transaction and a credit card number used in the transaction. The merchant may report the time and the credit card number to the offers engine which may also store a copy of the user s credit card number. The credit card numbers and times may be matched to tie the mobile device to a user. The offers engine may also store in memory a record matching the credit card numbers to a browser of the user on a desktop computer. This record may be used to match the desktop to the mobile device based on credit card numbers associated with both devices in the case of the mobile device the association being formed by use of the credit card near a wireless beacon associated with a merchant who provides the credit card number to the offers engine.

In another example the two devices may be tied together based on a physical token purchased on one device presented while in the presence of another device. For instance a user may buy a concert wristband online with a desktop web browser causing a cookie to be set on the browser or the browser to be profiled in the process. Later the user may present the wristband to be scanned at concert and at around the same time a wireless beacon signal in range of the concert gate may be sensed by a native mobile application that reports a time stamped beacon identifier to the offers engine. The entity scanning wristbands e.g. a concert promoter may send a time stamped list of wristband identifiers to the offers engine indicating when each wristband was scanned. Some embodiments may tie the browser to the wristband identifier e.g. with a cookie or browser profile acquired at purchase and the wristband identifier to the mobile device e.g. with the promoter s list of scan times and time stamped beacons thereby correlating the mobile device and web browser.

Offers may be selected based on geolocation with a variety of techniques. In some cases offers are selected based on a distance between a user s geolocation and a location of a merchant s store at which the offer is redeemable. For example embodiments may determine which merchants have stores within a threshold distance to the user s geolocation e.g. within one mile retrieve offers by those merchants and send the retrieved offers to a non geolocation sensing capable device of the user. In another example offers may be ranked based on a geographic distance between a merchant s store and the user s geolocation e.g. boosting the ranking of offers that are closer and suppressing the ranking of offers that are further.

As noted above in some embodiments a given user may have in their possession both the user device and the mobile user device . For example the mobile user device may be a cellular phone hand held tablet computer or wearable computing device like a smart watch and the user device may be a laptop computer a desktop computer a set top box media player a gaming console or the like. The mobile user device may be configured to sense the geolocation of the mobile user device for example based on cellular tower wireless signal triangulation global positioning system signals wireless beacons e.g. WiFi beacon service set identifiers SSIDs or low energy Bluetooth beacons or other aspects of the current wireless environment. The user device in contrast may be incapable of sensing the geolocation of the user device for example lacking in the appropriate wireless antennas interfaces radios or other mechanisms for sensing wireless signals suitable to ascertain geolocation. Often a given user may have in their possession the mobile user device for example a cell phone in their pocket while using the user device for example while in a coffee shop using a laptop. In this example some embodiments may use a geolocation sensed by the mobile user device to select offers to be presented in the web browser based on the geolocation for example to show offers relevant to the coffee shop or nearby businesses.

In some cases an operating system of the user device may provide an interface by which native offers application obtains geolocations. For instance such a native application may monitor the geolocation of the user with an object in an object oriented programming environment that is an instance of a CLLocationManager class in the iOS operation system or an instance of the LocationProvider class in the Android operating system.

To select location relevant offers various techniques may be used to correlate the geolocation from the mobile user device with networking sessions e.g. requests for and responses with web page content with the user device . For example some embodiments may correlate a geolocation received from the mobile user device with a hypertext transport protocol HTTP GET request for a webpage from the web browser to determine that the user is at the mobile device sensed geolocation and serve corresponding offers. Examples of such correlation techniques are described below. In some cases the user may be logged in to a user account on both the offers application executing in the background on mobile user device and the web browser . Based on this dual logged in state the mobile user device may report geolocations accompanied with a user identifier and the web browser may request offers with a corresponding e.g. matching user identifier e.g. as a parameter in a request specifying a URL of the offers engine . The offers engine may store the geolocation in memory in association with such an identifier e.g. in a user profile and retrieve the geolocation when the request for a webpage to display offers is received along with the same or a corresponding identifier.

In some cases the offers application may execute as a background process on the mobile user device and report the geolocation of the user device to the offers engine . In some cases user accessible privacy settings may disable or enable this feature. In some cases the reporting may be periodic for example every hour or every 10 minutes depending upon the desired specificity in geolocation and trade offs with battery life. In some cases the reporting may be in response to some event. For instance a background process on the mobile user device may include an event handler that receives location related events detected by the operating system of the mobile user device indicative of some amount of movement by the user for example changing cellular towers or moving more than a threshold distance. In response to such an event the offers application may send the new geolocation to the offers engine thereby potentially reducing battery consumption relative to systems that sense and report geolocation without regard to whether geolocation has changed. The user s account information such as username and password or other user identifier may be stored in memory by the offers application and reported to the offers engine in association with communications of the geolocations e.g. as a parameter of an API request such that the offers engine can associate the reported geolocation with the corresponding user account such as a user account having a user profile in which the geolocation is stored.

In some cases the geolocation may be expressed as a latitude and longitude or other formats may be used. Some embodiments may report geolocation with a latitude a longitude and a confidence radius within which the mobile user device is able to ascertain the user s geolocation with some threshold level of confidence such as 90 confidence that the user is within some distance of the latitude and longitude based on the quality of wireless signals received. In another example the geolocation may be expressed as an identifier of a wireless beacon sensed by the mobile device and the location corresponding to the beacon identifier may be accessible to the offers engine based on the identifier of the wireless beacon. For instance the offers engine may maintain in memory a list of beacon identifiers and corresponding geolocations. In another example a wireless beacon may periodically change the wireless beacon identifier to obfuscate location correlations and the sensed beacon identifier may be sent by offers engine or application to a third party server configured to return a geolocation in exchange for a subscription or per location service fee for translating obfuscated beacon identifiers into geolocations.

As noted in some cases the user may log in to their user account in the offers engine with the web browser before a request for customized offers based on geolocation is sent in which case an identifier of a session with the web browser may be stored in memory of the offers engine in association with the user s account such that subsequent requests for offers in the same session e.g. an HTTP session may be associated with the user account and a geolocation stored in association with the user account may be retrieved.

In other cases the user may have logged into their user account at some point in the past and an identifier of the user account may be stored in client side persistent storage accessible to the web browser such that JavaScript sent by the offers engine in response to requests for offers may retrieve from memory of the user device the identifier of the user account and return the identifier of the user account to the offers engine . Again this returned identifier may be used to identify the geolocation received from the mobile user device . Various forms of client side persistent storage may be used. In some cases the client side persistent storage may be inside a browser security sandbox such that the web browser can access the values examples including cookies local storage objects and SQLite databases. In another example an application having elevated security privileges such as Adobe Flash may be called by the browser to access persistent client side storage outside the secure browser sandbox for example in Flash cookies or local shared objects LSO accessible via a Flash player but not otherwise accessible to the web browser .

In some cases information stored outside the user device may be used to associate the user device with the user account. For example the offers engine may store in memory a browser fingerprint from a previous session with the web browser in which the user was logged into their account and subsequent requests for web content may include aspects of the browser fingerprint sufficient to uniquely identify the user s account by matching the browser fingerprint from a current request for web content to a previous browser fingerprint. In some cases the browser fingerprint is stored in the above mentioned user profiles. Examples of data constituting a browser agent include the information in the user agent field of HTTP requests configuration information of the browser such as add ons installed and versions of the same and the like. Some embodiments may use canvas fingerprinting in which the offers engine instructs the web browser to draw a graphic that is converted into a digital token that documents variations in the graphics processing system of user device . The generated token may be stored and later retrieved to identify the browser.

Some embodiments may use cookies syncing to identify the user account from the request from web browser based on information residing on other servers. For example the offers engine may send to the web browser web content that includes instructions such as JavaScript or a URL for a resource like a tracking pixel to be retrieved from another domain for the web browser to request content from a third party web domain. In response to the request a server at the third party web domain may send instructions to the web browser to retrieve a user identifier accessible to that third party from persistent client side storage examples of which are described above and the server at the third party web domain may cause the user identifier to be sent to the offers engine along with an identifier of the current session between the web browser and the offers engine . For instance the third party web domain may respond to the request for content with a redirect command back to the offers engine with a URL containing as a parameter e.g. delimited by a an identifier of the user stored in memory of the third party web domain server.

In another example data onboarding may be used to identify the user account such that the geolocation in the user account may be used to customize offers sent to the web browser . User identifiers may be distributed with client side distribution for example using redirects or with server side distribution. For instance when a user installs the offers application or otherwise creates a user account the user may submit an email address that is stored in the user profile in the offers engine . The same email address may be stored in memory of a third party data onboarding server in association with the third party s identifier of the user. The data onboarding server may obtain this association from some other user account associated with a different service or other commercially available sources of user profiles. When the web browser request content from the offers engine the offers engine may send instructions such as a URL to retrieve a tracking pixel or JavaScript to request content from the data on boarding server . The data on boarding server may receive such requests from users requesting content from a large number of different relatively large websites for example in advertising networks or social networks and in response to such requests the data onboarding server may send to the requesting web browser a JavaScript command to determine whether the data onboarding server has previously stored an identifier in persistent client side storage returning the user identifier if it has previously been stored and storing such an identifier if the identifier has not previously been stored. If the data onboarding server has previously stored a client side user identifier when the web browser request content from the offers engine which sends the instructions to request additional content from the data on boarding server the data onboarding server may cause an identifier of the email address to be sent to the offers engine which may use the email address to select the appropriate user account and corresponding geolocation from mobile user device . Other unique and relatively unique values may be used to identify the user other than email addresses including phone numbers and mailing addresses.

The use of the data onboarding server or the cookies syncing techniques described above may be used to convey user identifiers across web domains as a workaround to barriers imposed by the same origin policy imposed by most web browsers. Generally the same origin policy prevents content from one web domain from accessing content from another web domain for example preventing one website from retrieving cookies set by another website.

In another example a public IP address of a local area network router shared by the mobile user device and the user device may be used to match a geolocation from the mobile user device to a request for offers from the user device . Often home routers include a network address translation table by which multiple private IP addresses within the local area network such as one private address for the user device and another private address for the mobile user device share a single public IP address. The offers engine may store the public IP address through which the mobile user device communicates to the offers engine and then later match a request for offers from the web browser from the same public IP address to a user account associated with this IP address and having a geolocation from the mobile user device . An example of such a router is described above with reference to router in .

In the present examples the user device is described as requesting and displaying offers in the web browser but it should be noted that other client side applications may request and display offers. For example set top boxes may run applications that display offers alongside streaming media or gaming consoles may display offers alongside game menus.

In the above examples the geolocation is stored in the user account prior to the web browser requesting offers but in some cases the geolocation may be retrieved after such a request. For example in some embodiments the web browser may request offers from the offers engine the offers engine may then determine that a difference in time between a time stamped geolocation in the corresponding user account and the current time exceeds a threshold and in response the offers engine may send a request to mobile user device to retrieve an updated geolocation. In some cases the offers engine may send offers for display to the user device without waiting for the geolocation to be retrieved and then subsequently supply geo targeted offers after the geolocation is retrieved from the mobile user device to avoid delay. The offers application may include an event handler configured to receive such requests for geolocation query the operating system of the mobile user device for the corresponding geolocation and return the geolocation to the offers engine .

The obtained geolocations may be used for a variety of purposes examples of which are described above with reference to . For example the offers engine may determine that the user is to be reminded of a particular offer in content sent to the web browser based on the geolocation retrieved from the mobile user device . In another example embodiments of the offers engine may determine that the user has crossed a geofence associated with a particular offer and in response send that particular offer to the web browser to be displayed. In some cases offers may be selected for display by the offers engine based on a distance between the geolocation sent by the mobile user device and geolocations of offers for example ranking offers for display based on distance.

In some cases user profiles may be associated with a location history including a plurality of time stamped geolocations obtained from mobile user device over some trailing duration of time such as over a preceding week or month. In such embodiments in some use cases the offers engine may select offers to be sent to web browser based on patterns in user geolocation. For example the offers engine may calculate a measure of central tendency of some of the geolocations such as a centroid geolocation during nighttime hours and the measure of central tendency of the geolocation may be used to select offers. Or embodiments may cluster the geolocations and select offers based on centroids of the clusters to identify offers relevant to places that the user frequents.

Applicants have observed that users of offer discovery systems are often relatively sensitive to even relatively small increases in latency such as increases on the order of 100 ms when responding to requests for offers. Accordingly while the data described herein may be stored in a variety of different data structures and formats some data structures and formats may cause the computer systems upon which the offers engine is built to respond more quickly. In some cases user accounts may be indexed by the data from the web browser such as user identifiers in cookies or browser fingerprints with which the user accounts are identified for example in a hash table having key values calculated from such data from the web browser or in a list of key value pairs pre sorted by the data from the web browser to facilitate relatively fast binary searches. In some cases to facilitate relatively prompt selection of relevant offers some embodiments may select offers corresponding to geolocations received from mobile user device before a request for offers is received from the web browser thereby pre selecting the offer to be displayed and expediting the presentation of the offer.

Thus embodiments may provide higher resolution geotargeting of offers on non geolocation sensing capable devices like many desktop computers by recognizing that geolocation sensing capable devices like mobile phones often accompany users in these situations and providing software and hardware to correlate signals from one with the content to be provided to the other device.

The present application will be better understood with reference to the following enumerated examples of embodiments 

1. A method of distributing coupons or other offers to non location sensing devices based on a geolocation sensed by another device the method comprising obtaining a geolocation of a user from a mobile device of the user the geolocation being sensed with the mobile device of the user associating the geolocation of the user with an identifier of the user in an offers engine the user having a user account in the offers engine associated with the identifier of the user receiving a request for an offer from another computing device of the user the other computing device of the user being a different device from the mobile device of the user the request including or prompting obtaining data from the other computing device sufficient to identify the user account retrieving the geolocation of the user obtained from the mobile device by identifying the user account with the data from the other computing device sufficient to identify the user account selecting with the offers engine a responsive offer based on the geolocation of the user obtained from the mobile device wherein the responsive offer is responsive to the request for an offer from the other computing device and sending the responsive offer to the other computing device of the user. 2. The method of embodiment 1 comprising receiving credentials of the user for accessing the user account from the mobile device of the user receiving the credentials of the user for accessing the user account from the other computing device. 3. The method of embodiment 2 wherein both the mobile device of the user and the other computing device are logged in to the user account in the offers engine at the same time before receiving the request for an offer from the other computing device. 4. The method of any of embodiments 1 3 comprising sending to the other computing device a log in interface configured to return the credentials of the user for accessing the user account to the offers engine receiving the credentials of the user for accessing the user account from the other computing device determining that the credentials match the user account and after determining that the credentials match the user account sending the other computing device instructions to store the data from the other computing device sufficient to identify the user account in persistent storage that retains data when the other computing device is turned off. 5. The method of embodiment 4 comprising after receiving the request for an offer from the other computing device sending the other computing device instructions that when executed cause the other computing device to perform operations comprising retrieving from persistent storage the data from the other computing device sufficient to identify the user account and sending to the offers engine the data from the other computing device sufficient to identify the user account. 6. The method of embodiment 4 wherein the instructions to store the data include an instruction to store a value in a cookie a client side structured query language SQL database accessible by a web browser executing on the other computing device or a localstorage object instantiated by a web browser executing on the other computing device. 7. The method of embodiment 1 wherein the data from the other computing device sufficient to identify the user account includes a web browser fingerprint of a web browser executing on the other computing device. 8. The method of embodiment 1 wherein the data from the other computing device sufficient to identify the user account includes a public IP address of a router through which the mobile user device has communicated with the offers engine. 9. The method of embodiment 1 wherein the data from the other computing device sufficient to identify the user account comprises a local shared object LSO accessible via a Flash player executing on the other computing device and stored outside of a browser sandbox of a web browser executing on the other computing device. 10. The method of embodiment 1 wherein the data from the other computing device sufficient to identify the user account comprises a canvas fingerprint of a web browser executing on the other computing device. 11. The method of embodiment 1 comprising retrieving the data from the other computing device sufficient to identify the user account by cookie syncing with a web domain different from a web domain of the offers engine. 12. The method of embodiment 1 comprising retrieving the data from the other computing device sufficient to identify the user account by cookie syncing by obtaining an email address of the user when the user account is created during installation of a native mobile application on the mobile device of the user and sending a web browser of the other computing device instructions to retrieve content from another web domain different from a web domain of the offers engine the other web domain being configured to respond to a request to retrieve the content from the web browser by causing an identifier of the email address to be sent to the offers engine. 13. The method of any of embodiments 1 12 wherein selecting with the offers engine a responsive offer based on the geolocation of the user obtained from the mobile device comprises selecting from a plurality of offer records each offer record describing an offer and being associated with an offer geolocation one or more offer records having an offer geolocation including the geolocation of the user or having an offer geolocation within a threshold distance to the geolocation of the user. 14. The method of any of embodiments 1 12 comprising obtaining a plurality of time stamped geolocations of the user are obtained from the mobile device wherein selecting with the offers engine a responsive offer based on the geolocation of the user obtained from the mobile device comprises determining a measure of central tendency of user geolocations of at least some of the time stamped geolocations and selecting from a plurality of offer records each offer record describing an offer and being associated with an offer geolocation one or more offer records having an offer geolocation including the measure of central tendency of user geolocations or having an offer geolocation within a threshold distance to the measure of central tendency of user geolocations. 15. The method of embodiment 1 comprising creating the user account the user account tying the mobile device to the other computing device the user account being either created at the instruction of the user or being created as a profile of the user without the user having to provide an instruction to create the user account. 16. The method of embodiment 15 wherein the user mobile device is tied to the other computing device based on a wireless beacon sensed by the mobile device. 17. The method of embodiment 16 wherein the user mobile device is tied to the other computing device based on a credit card associated with the other user device and presented by a user to a merchant while the mobile device is in range of the wireless beacon. 18. The method of embodiment 16 wherein the user mobile device is tied to the other computing device based on a scannable physical token purchased with the other computing device and presented by a user to a merchant while the mobile device is in range of the wireless beacon. 19. The method of embodiment 15 wherein the mobile device is tied to the other computing device based on a single use offer code. 20. A system comprising one or more processors and memory storing instructions that when executed by at least some of the one or more processors causes operations comprising the steps of any of embodiments 1 19. 21. A tangible non transitory machine readable medium storing instructions that when executed by a data processing apparatus cause operations comprising the steps of any of embodiments 1 20.

Further modifications and alternative embodiments of various aspects of the invention will be apparent to those skilled in the art in view of this description. Accordingly this description is to be construed as illustrative only and is for the purpose of teaching those skilled in the art the general manner of carrying out the invention. It is to be understood that the forms of the invention shown and described herein are to be taken as examples of embodiments. Elements and materials may be substituted for those illustrated and described herein parts and processes may be reversed or omitted and certain features of the invention may be utilized independently all as would be apparent to one skilled in the art after having the benefit of this description of the invention. Changes may be made in the elements described herein without departing from the spirit and scope of the invention as described in the following claims. Headings used herein are for organizational purposes only and are not meant to be used to limit the scope of the description.

As used throughout this application the word may is used in a permissive sense i.e. meaning having the potential to rather than the mandatory sense i.e. meaning must . The words include including and includes and the like mean including but not limited to. As used throughout this application the singular forms a an and the include plural referents unless the content explicitly indicates otherwise. Thus for example reference to an element or a element includes a combination of two or more elements notwithstanding use of other terms and phrases for one or more elements such as one or more. The term or is unless indicated otherwise non exclusive i.e. encompassing both and and or. Terms relating to causal relationships e.g. in response to upon when and the like encompass causal relationships having both causes that are a necessary causal condition and causes that are a sufficient causal condition e.g. state X occurs upon condition Y obtaining is generic to X occurs solely upon Y and X occurs upon Y and Z. Similarly unless otherwise indicated statements that one value or action is based on another condition or value encompass both instances in which the condition or value is the sole factor and instances in which the condition or value is one factor among a plurality of factors. Unless specifically stated otherwise as apparent from the discussion it is appreciated that throughout this specification discussions utilizing terms such as processing computing calculating determining or the like refer to actions or processes of a specific apparatus such as a special purpose computer or a similar special purpose electronic processing computing device. In the context of this specification a special purpose computer or a similar special purpose electronic processing or computing device is capable of manipulating or transforming signals for instance signals represented as physical electronic optical or magnetic quantities within memories registers or other information storage devices transmission devices or display devices of the special purpose computer or similar special purpose processing or computing device.

