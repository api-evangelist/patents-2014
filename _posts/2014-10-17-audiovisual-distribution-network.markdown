---

title: Audiovisual distribution network
abstract: An audiovisual (AV) distribution network communicates via Internet Protocol and is implemented as a framework of local area networks (LANs). Transmitters and receivers in the AV distribution network leverage multicast transmission technology and pre-authentication to switch quickly and seamlessly between sources transmitting audiovisual data protected by a security protocol scheme.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09462308&OS=09462308&RS=09462308
owner: Crestron Electronics Inc.
number: 09462308
owner_city: Rockleigh
owner_country: US
publication_date: 20141017
---
The present invention relates generally to Internet Protocol networks and more particularly to media distribution over an Internet Protocol network.

Video distribution throughout a facility is often accomplished through an audiovisual distribution network. Audiovisual distribution networks are increasingly common installations in commercial and residential facilities. Components of an audiovisual distribution network are typically distributed throughout a facility and networked to allow video to be distributed from one or more AV sources to one or more video sinks . For example a corporate audiovisual distribution network may comprise multiple AV sources such as media servers personal computer devices disc players such as digital video disc DVD player and Blu ray disc players and cable boxes distributed throughout a corporate campus.

Internet Protocol IP is a communication protocol that may be employed to transmit video throughout the audiovisual distribution network. An IP protocol audiovisual distribution network may be implemented as a local area network LAN a wide area network WAN or various combinations of the two.

In a LAN a group of devices are connected together in a localized area to communicate with one another and share resources. Ethernet the most widely employed LAN technology is specified in Institute of Electrical and Electronics Engineers IEEE 802.3 standard. Other LAN networking technologies may include for example Token Ring and FDDI.

A WAN is a network that covers a broad area using private or public network transports. For example any telecommunications network that links across metropolitan regional or national boundaries is a WAN. It is common for the physical layer of these kinds of networks to be implemented with category CAT cable coaxial cable optical fiber or wireless transmission media.

Traditionally to network several devices in a LAN network equipment such as a network switch is required. A network switch is a computer networking device that links network segments or network devices by forwarding data from one device to another. Network switches have limited capacity and therefore the networks have limited bandwidth. Bandwidth limits may limit the amount or type of video distributed on an IP network.

Additionally there may be applications where it is desirable to provide content or digital copy protection such as High Bandwidth Digital Content Protection HDCP when transmitting over IP networks.

Accordingly there is a need for an audiovisual distribution network which efficiently utilizes IP communication protocol and incorporates digital content protection.

It is to be understood that both the general and detailed descriptions that follow are exemplary and explanatory only and are not restrictive of the invention.

One object is to provide methods and systems for switching between media over audiovisual distribution network. The present invention may be generally practiced on a diversity of data streams and is particularly well suited for media streams such as video streams. Therefore any reference to use of audiovisual data herein are provided by way of example and are not intended to limit the practice of the invention.

According to a first aspect a system for distributing audiovisual data comprises at least two transmitters and a receiver. Each of the transmitters transmits security protocol encrypted audiovisual data as an Internet Protocol multicast stream. The receiver is configured for authenticating with a second audiovisual transmitter according to the security protocol while simultaneously receiving an Internet Protocol multicast stream from a first transmitter.

According to a second aspect a method for a receiver in an audiovisual distribution network to switch sources includes the steps of receiving from a first audiovisual transmitter a first Internet Protocol multicast stream comprising audiovisual data encrypted according to a security protocol authenticating with a second audiovisual transmitter according to the security protocol prior to leaving the first Internet Protocol multicast stream joining a second Internet Protocol multicast stream of the second audiovisual transmitter leaving the first Internet Protocol multicast stream and receiving the second Internet Protocol multicast stream from the second audiovisual transmitter.

The present invention seeks to overcome or at least ameliorate one or more of several problems including but not limited to quickly and or seamlessly switching between different audiovisual multicasts over an audiovisual distribution network.

Additional aspects and advantages of the invention will be set forth in part in the description which follows and in part will be obvious from the description or may be learned by practice of the invention.

Unless the context clearly requires otherwise throughout the description and the claims the words comprise comprising and the like are to be construed in an inclusive sense as opposed to an exclusive or exhaustive sense that is to say in the sense of including but not limited to. 

The present invention is directed to an audiovisual AV distribution network communicating via Internet Protocol and implemented as a framework of local area networks LANs . Transmitters and receivers in the AV distribution network leverage multicast transmission technology and compression standards to switch seamlessly between sources transmitting audiovisual data that may be content protected by a security protocol scheme.

While the present embodiment is described as being deployed in a framework of LANs but it is not necessarily limited thereto. Similarly while the AV distribution network is described is as employing a variety of formats protocols and standards the formats protocols and standards are for illustrative purposes only and are not limiting. For example while the high bandwidth digital content protection HDCP 1.x and 2.x and the h.264 compression standard are described in the specification the AV distribution network is not limited to a particular security protocol or a particular compression standard. Persons skilled in the art will appreciate that one or more elements of the described embodiments can be interchanged and or combined.

The AV distribution network distributes AV data from one or more AV sources to one or more AV sinks via one or more network switches and networked intermediate transceiver devices functioning as transmitters receivers or both. Each AV source transmits AV data to an intermediate transceiver device functioning as a transmitter . The transmitter relays the AV data to one or more intermediate transceiver devices functioning as a receiver . Each of the one or more receivers then transmits the AV data to an AV sink .

The AV sources may be Blu Ray Disc Players media servers digital video disc DVD players digital video recorders DVR and cable boxes or any device other device capable of transmitting audiovisual data.

The AV sources are configured for transmitting audiovisual data to an intermediate transceiver device over an audiovisual interface. The audiovisual data may be transmitted as an industry standard signal. For example the audiovisual data may be transmitted via a High Definitional Multimedia Interface HDMI interface. The HDMI specification defines an interface for carrying digital audiovisual data. Throughout this specification the AV source will be described as transmitting digital audiovisual data over an HDMI interface. However the audiovisual interface may be any other interface for transmitting video such as a Video Graphics Array VGA interface a Digital Video Interface DVI interface or a Display Port DP interface.

The audiovisual interface may serve as a protected interface thereby allowing the video source to transmit audiovisual data protected under a security protocol to the intermediate transceiver device. Various content protection schemes have been developed for a variety of reasons. For example certain content protection schemes are employed to ensure that a user may not intercept transmissions of television shows movies and music.

One content protection scheme to protect digital content that is transmitted over cables between devices is known as High Bandwidth Digital Content Protection HDCP . HDCP is a specified method administered by Digital Content Protection L.L.C. DCP for protecting digital content as it travels across connection interfaces and protocols such as DP DVI and HDMI. Other security protocols for content encryption include Secure Real Time Transfer Protocol SRTP Secure Sockets Layer SSL and Transport Layer Security TLS .

A commonly implemented form is HDCP 1.x e.g. ver. 1.4 . Traditionally HDCP 1.x is used to communicate content from point to point. In other words a transmitter may only send content to a single sink . The use of intermediate transceiver devices known as repeaters is permitted however it requires further decrypting and re encrypting as well as additional security steps. Revisions of the HDCP scheme HDCP 2.x implement an interface independent scheme thereby allowing a device to transmit protected content to multiple sinks .

In the embodiment shown in the audiovisual distribution network is an HDCP protected network and accordingly one or more of the video sinks may receive HDCP protected content from one or more of the AV sources . Additionally a transmitter may distribute HDCP content to more than one receiver simultaneously as provided in HDCP 2.x. The interfaces between each HDCP source and sink must be HDCP protected interfaces. As such whether functioning as a transmitter or receiver each intermediate transceiver device must decrypt the HDCP content at the HDCP receiver on each of its inputs and re encrypt the data with an HDCP transmitter on each of its outputs. The intermediate transceiver device must inform the upstream device of its downstream connections and it is the responsibility of the intermediate transceiver device to maintain the HDCP protection of those connections.

HDCP 2.x comprises two functions authentication of receiving devices and encryption of audiovisual data.

Before a device can receive a session key necessary to decrypt audiovisual data encrypted by the HDCP transmitter it must pass a multistep process. Included in the process are four steps Authentication and key exchange locality check authentication with repeaters and session key exchange.

The authentication and key exchange step involves the verification of the HDCP receiver s public key certificate. During this step a master key k is communicated from the receiver to the transmitter .

The locality check allows the transmitter to verify that the receiver is located in the vicinity of the transmitter . To verify that the receiver is in the same vicinity as the transmitter the transmitter performs a Round Trip Time test which checks to see that the delay between a pair of messages is not more than 7 milliseconds ms .

The authentication with repeaters step is employed if the receiver is a repeater. This step involves the communication of the downstream topology from repeaters in the path to the transmitter .

The session key exchange step is performed after the authentication checks and locality check are complete. The session key is exchanged and is employed by the transmitter and receiver to encrypt and decrypt the audiovisual data.

Unlike HDCP 1.x which is a point to point link HDCP 2.x allows for multiple receivers to decode the same content using the same encryption key. To transmit the same content to multiple receivers on an IP network there are three forms of IP communication unicast multicast and broadcast. Unicast communications provide a route for sending datagrams from one end point to another end point. Multicast communications provide routes for datagrams to be sent from at least one end point to a pre designated group of end points. In broadcast communications an end point sends the same datagrams to all connected end points.

Common unicast applications are hypertext transfer protocol HTTP and file transfer protocol FTP . Unicast is the most common of the three IP communications and the only one of the three that employs the transmission control protocol TCP . A transmitter may transmit multiple copies of audiovisual data using unicast message over TCP or UDP. However as the number of receivers increase the amount of data the transmitter needs to send is increased as well.

A transmitter may transmit multiple copies of the audiovisual data via a broadcast stream. Broadcasts force all devices on the network segment to receive the traffic. While this ensures that each device on a network receives a communication this also wastes bandwidth. Broadcasting to devices that are not involved with the broadcasted content burdens those devices and results in wasted network bandwidth.

Multicast is an optimization of where the data is only sent to a subset of devices using a special set of addresses. Internet Group Management Protocol IGMP is employed to manage these groups. Network switches implement IGMP snooping to reduce network traffic on segments with no devices in the group.

Accordingly transmitters may transmit HDCP 2.x encrypted content to multiple receivers via an Internet Protocol multicast stream. This reduces both the bandwidth on the network as well as the processing burden on devices.

The AV source transmits AV data to the transmitter over an AV interface such as an HDMI interface. The AV data may be compressed or uncompressed and the AV interface may be a security protocol interface such as an HDCP 1.x protected interface.

It should be understood that the block diagrams of are for illustrative purposes only. As such components and functions in these block diagrams may overlap and components. For example the external clock generator of may perform substantially the same function and be embodied in the same device as the free running output timing generator of . Particularly in implementations wherein the transmitter and receiver are embodied in a single transceiver device.

While the transmitters and receivers are described throughout this specification as being implementations of an intermediate transceiver device the transmitters and receivers need not be implementations of a dual function device such as the intermediate transceiver. While the multi functional aspect of the intermediate transceiver device provides benefits such as versatility the transmitter and receiver may each be single function devices dedicated to either transmitting or receiving and comprising the elements described herein for each.

In an embodiment the intermediate transceiver device is an endpoint in the AV distribution network . The endpoint is a device that allows conversion of audio and video from one medium to another.

When functioning as a transmitter the intermediate transceiver devices are configured for receiving audiovisual data from an AV source over an industry standard interface such as an HDMI interface. As described above the transmitter may receive HDCP protected content from the AV source over an HDCP protected interface.

The transmitter is further configured for unencrypting the HDCP protected content and re encrypting for transmission over an Internet Protocol based network. The transmitter is configured for simultaneously transmitting the audiovisual data in both a compressed format and an uncompressed format. In an embodiment the transmitter compresses the audiovisual content according to the h.264 video compression format or the MPEG 4 Part Advanced Video Coding AVC video compression format.

The transmitter device comprises an HDMI transceiver an uncompressed packet formatter field programmable gate array FPGA a central processing unit CPU a memory buffer and an Ethernet PHY module .

The transmitter device receives the encrypted audiovisual content HDCP 1.x or 2.x over the HDCP protected interface such as an HDMI interface. The HDMI transceiver removes the HDCP encryption from the audiovisual data by decrypting the AV data. The front end processing of the transmitter device will be described in further detail below in relation to .

The unencrypted audiovisual content is then routed to the uncompressed packet formatter FPGA . The uncompressed packet formatter FPGA conditions the transition minimized differential signal TMDS signal comprising the audiovisual content to a format which can be encrypted using HDCP 2.x. The conditioned audiovisual data is routed to an IP encoder such as an SMPTE 2022 5 6 encoder and on to an Ethernet 10 gigabit GB Media Access Controller MAC using multicast UDP messages. The audiovisual data then exits the uncompressed packet formatter FPGA and is routed to an Ethernet PHY module such as a 10 GB phy or fiber module. The CPU implements the low bandwidth authentication locality check and key exchange portion of HDCP. The front end processing and encapsulation functions of the transmitter will be described in further detail below in relation to .

A local area network LAN distributes the audiovisual data. The LAN may employ a network switch such as a 10 GB Ethernet switch. The network switch is configured for routing the audiovisual data from intermediate transmitter to intermediate receiver . The network switch comprises 10 GB links with some number of up links for cascading.

In addition to distributing the audiovisual content from intermediate audiovisual transmitters to intermediate audiovisual receivers the network switch is further configured for communicating information between the intermediate AV transmitters and intermediate AV receivers . For example the network switch may facilitate communication necessary for HDCP authentication between devices may transmit control and status information EDID information from a video sink to an AV source as well as other information.

To facilitate multicast communication on the network the network switch implements a multicast group management protocol. In an embodiment the network switch implements Internet Group Management Protocol IGMP snooping. IGMP is a communications protocol used by hosts and adjacent routers on IP networks to establish multicast group membership.

In another embodiment the network implements multicast listener discovery MLD to manage multicast groups. While the network is described throughout this specification as implementing IGMP this is for illustrative purposes only and the multicast group management protocol is not limited thereto.

While the audiovisual distribution network in shows a single network switch the audiovisual distribution network is not limited to an audiovisual distribution network with a single switch. shows an audiovisual distribution network comprising multiple network switches in accordance with one illustrative embodiment.

The AV distribution network of comprises a first network and a second network. The first network comprises one or more AV sources one or more AV sinks a first network switch and one or more intermediate transceiver devices functioning as transmitters and receivers . The second network comprises one or more AV sources one or more AV sinks a second network switch and one or more intermediate transceiver devices functioning as transmitters and receivers . The first network and second network are connected via a network link between the first network switch and the second network switch . There may be more than one network switch between the first network and second network. Accordingly AV data transmitted from an AV source in the first network may be routed to an AV sink in the second network via both the first network switch and the second network switch

Essentially the receiver reverses the process of the transmitter with the added function of recovering the pixel clock signal. The intermediate receiver is configured for receiving compressed or uncompressed audiovisual data from a transmitter over an IP based network link. For example the receiver may receive a multicast UDP message via an Ethernet PHY interface. As described above the receiver may receive HDCP protected content from the intermediate transmitter device via an HDCP protected interface.

The receiver is further configured for unencrypting the HDCP protected content and re encrypting for transmission over an AV interface such as an HDMI interface.

The receiver device comprises an Ethernet phy module an packet decoder field programmable gate array FPGA a central processing unit CPU a memory buffer and an AV transceiver such as an HDMI transceiver.

The receiver device receives the encrypted audiovisual content HDCP 2.x over the HDCP protected network link as a UDP multicast. The transmitter device employs an HDCP receiver to remove the HDCP encryption. The unencrypted audiovisual content is then routed to the FPGA . The FPGA conditions the transition minimized differential signal TMDS signal to an HDMI format. The signal comprising the audiovisual content then exits the FPGA and is routed to an HDMI transmitter . The CPU implements the low bandwidth authentication locality check and key exchange portion of HDCP.

The intermediate transceiver device comprises an HDMI transceiver switch . The HDMI transceiver is configured for receiving an HDCP protected HDMI signal from a video source. The AV data on the HDMI signal may be encrypted or unencrypted. If the AV data is encrypted the HDMI interface removes HDCP protection by decrypting the AV data using the session key received when authenticating with the source of the AV data. In an embodiment the HDMI transceiver switch is an ADV7625 5x2 HDMI Transceiver switch available from Analog Devices Inc. of Norwood Mass. or similar transceiver switch.

The intermediate transceiver device also comprises a VGA to HDMI converter such as an ADV7850 available from Analog Devices or similar converter. The VGA to HDMI converter converts a VGA signal from an AV source to a TDMS signal which is then routed to the HDMI transceiver switch .

The intermediate transceiver device further comprises a digital signal processing DSP module in communication with the HDMI transceiver switch . In an embodiment the DSP module is a DSP module available from Cirrus Logic of Austin Tex. The DSP module is configured for audio down mixing. In certain applications user desire to down mix audio in a surround sound format to stereo audio. The DSP module receives surround sound audio from the HDMI transceiver as a plurality of I2S streams and returns a single I2S stream.

The intermediate transceiver device further comprises a first splitter such as a 1 2 splitter as shown in . In an embodiment the first splitter may be an EP9142 1 2 Splitter available from Explore Microelectronics of Taiwan. The 1 2 splitter receives a transition minimized differential signal TMDS comprising AV data without HDCP encryption from the HDMI transceiver and transmits a TMDS signal to both an FPGA and a scaler .

The FPGA conditions the transition minimized differential signal TMDS signal comprising the audiovisual content to a format which can be encrypted using HDCP 2.x. The condition audiovisual data is routed to an IP encoder such as an SMPTE 2022 5 6 encoder and on to an Ethernet 10 gigabit GB Media Access Controller MAC using multicast UDP messages.

The FPGA is in communication with a PHY module such as an Ethernet PHY module or small form factor pluggable transceiver SFP . The PHY module interfaces to the network switch and the audiovisual distribution network .

The scaler is configured for downscaling the TMDS signal for h.264 encoding. The scaler is further configured for scaling the TMDS signal to a native resolution of the corresponding AV sink such as when functioning as a receiver . Advantageously by scaling the TMDS to a native resolution of the AV sink the scaler eliminates downstream processing of the AV data. In one embodiment the receiver may receive the native signal of the corresponding AV sink as EDID information.

The scaler is further configured for scaling one or more received Internet Protocol multicast streams to a common resolution. As will be described later this is a necessary step to generator locking i.e. genlocking the AV data from more than one internet protocol multicast stream.

In an embodiment of the invention the scaler is configured for maintaining an authenticated connection with the AV sink . The scaler is configured for generating video timing data during switching events. Advantageously by generating video timing data the receiver may maintain an HDCP authenticated interface with the video sink thereby reducing switching times.

The scaler comprises a frame rate processing block a memory further comprising a frame buffer an input scaling block and an output scaling block . In this embodiment the term block is synonymous with circuit.

The scaler receives input audiovisual data video timing data and image content data. The frame rate processing block is configured for receiving the asynchronous input video timing data and writing the incoming image content data into memory . The frame rate processing block is further configured for receiving the free running output video timing data and reading incoming video data from memory as required by the output resolution of the scaler i.e. native resolution of the AV sink . The frame rate processing block is further configured for performing frame rate conversion if the input refresh rate and the output refresh rate of the audiovisual data differ.

The input scaling block is configured for receiving the asynchronous input video timing data and performing scaling if required. In certain applications depending on the input and output setups it is advantageous to perform input scaling before frame rate processing. In alternate applications it is advantageous to perform output scaling subsequent to frame rate processing. In these applications the output scaling block receives the free running output video timing data and performs scaling if required.

In an embodiment the scaler comprises a free running output timing generator that is configured for continuously generating a free running output video timing data used to give the downstream video sink a fixed resolution.

In embodiments in which the scaler generates audiovisual data comprising a repeated frame of image content data the last frame of video received by the scaler i.e. the frame to be repeated is repeatedly read from the memory and frame buffer and output by the scaler . Upon the scaler achieving scaler lock with audiovisual data from the second source a frame of image content data from audiovisual data received from the second source is read from the memory and frame buffer and output by the scaler .

The scaler outputs the scaled TMDS signal to a second splitter such as the 1 2 splitter shown in . In an embodiment the first splitter may be an EP9142 1 2 Splitter available from Explore Microelectronics of Taiwan. The second splitter splits the output of the scaler to both the HDMI transceiver and HDMI receiver . The routed output to the HDMI transceiver is output to an AV sink from the HDMI transceiver such as AV data being transmitted from a receiver at the native resolution to an AV sink .

The HDMI receiver transmits a transistor transistor logic TTL signal to a system on chip SoC module . For example the SoC module may be an ARM SoC. The SoC module further comprises an encoder such as h.264 encoder and a decoder such as an h.264 decoder. In other embodiments the encoder may be an h.265 encoder and h.265 decoder a JPEG2000 encoder and decoder or an MJPEG encoder and decoder. The h.264 encoder is configured for compressing AV data according to the h.264 video compression standard for transmission on the AV distribution network . The h.264 decoder is configured for decoding AV data compressed according to the h.264 video compression standard. The h.264 decoder may be employed to decode compressed AV data for transmission on an AV interface to an HDMI sink such as an HDMI interface.

The SoC module is in communication with a 10 100 mbit switch . The 10 100 mbit switch is in communication with both a 10 100 mbit courtesy port and the FPGA outputting to the network switch .

The SoC module further communicates with an infrared generator via a USB signal. The SoC module is configured for generating RS signals.

The HDMI transceiver receives AV data over an HDMI interface. The AV data may be encrypted or unencrypted. If the AV data is encrypted the HDMI interface removes HDCP protection by decrypting the AV data using the session key received when authenticating with the source of the AV data.

The unencrypted AV data is transmitted from the HDMI transmitter via a TMDS signal to the FPGA. The FPGA comprises a TMDS decoder which receives the TDMS signal and decodes and outputs separate image content data signals RGB video timing data i.e. synchronization control signal auxiliary data signal and video clock to a data formatter and framer module .

The data formatter and framer module further comprises a first in first out FIFO buffer . The data formatter and framer module is configured for tagging various data types and packing the data into 128 bit words. The FIFO buffer or alternatively a dual port RAM is configured for crossing clock domain prior to AES encryption. The output of the FIFO buffer is transmitted via an Advanced eXtensible Interface AXI bus to an encryption module .

The encryption module is configured for implementing the two components of HDCP authentication HDCP key exchange and AES 128 encryption. In the embodiment shown in the encryption module employs advanced encryption standard AES encryption in 128 CTR mode.

The payload assembler is configured for receiving the uncompressed AES encrypted AV data as well as unencrypted TMDS info frames and assemble the data into 64 bit words for presentation to the IP encoder such as the SMPTE 2022 IP encapsulation engine. The payload assembler further inserts an additional payload header at predetermined intervals. The additional payload header comprises video standard information such as image dimensions frame rate and pixel clock. This information will be required at the receiver .

The payload assembler is further configured for inserting a timestamp. The timestamp is generated by a timestamp module and is generated on the pixel clock. In an embodiment the timestamp is used by the receiver in a clock recovery algorithm.

As will be described later in reference to and in an embodiment the timestamp of the payload header is employed to transition from a compressed version of AV data to an uncompressed version. The timestamp is utilized by the receiver to synchronize a compressed version of AV data with an uncompressed version of AV data. By synchronizing the two streams according to matching time stamps the receiver may output a seamless transition between the two streams. In this embodiment the FPGA receives both an AES encrypted signal comprising compressed AV data and an AES encrypted signal comprising uncompressed AV data and processes both for transmission on the AV distribution network .

The payload assembler outputs to the SMPTE 2022 5 6 encoder via a 64 bit AXI bus for IP encapsulation and forward error correction. For example the SMPTE 2022 5 6 encoder is a 10G SMPTE 2022 5 6 encoder . SMPTE 2022 5 is a standard for the transport of high bitrate media over IP networks. SMPTE 2022 6 is a standard for forward error correction for high bitrate media transport over IP networks. The SMPTE 2022 5 6 encapsulates the payload data from the payload assembler into RTP UDP IP packets and optionally generates and transmits forward error correction packets. The encoder is scalable to multiple channels allowing the transmitter to transmit more than one channel of audiovisual data and additional non AV data.

While the IP encoder is shown as an SMPTE 2022 5 6 encoder and described herein as an SMPTE 2022 5 6 encoder the IP encoder is not limited to an SMPTE 2022 5 6 encoder . In other embodiments the IP encoder may encapsulate the packets according to the Real time Transport Protocol RTP or MPEG 2 Transport Stream TS protocol.

The SMPTE 2022 5 6 encoder is communicatively coupled to an external random access memory such as an external synchronous dynamic random access memory SDRAM double data rate three DDR3 .

The SMPTE 2022 5 6 encoder is further configured for queuing generic Ethernet traffic for transmission and for receiving generic Ethernet packets from the 10G link. The SMPTE 2022 5 6 encoder communicates with a Media Independent Interface MII to Memory Mapped Interface module to provide a path from the host processor or local Ethernet switch to the 10G link. The MII to Memory Mapped Interface transmits and receives Ethernet traffic via a courtesy port.

The SMPTE 2022 5 6 encoder outputs to a 10G Media Access Controller via a 64 bit AXI bus. The 10G Media Access Controller further comprises a Serializer Deserializer SERDES .

The FPGA further comprises a host CPU interface in communication with an external host processor . For example the external host processor may be a processor in the STM32 family available from STMicroelectronics of Geneva Switzerland.

A video data buffer such as a 16 line video data buffer matches the received video data rate with the recovered pixel clock rate.

A moving average filter averages the buffer level over a number of samples and feeds the average to a format converter . In an embodiment the moving average filter averages the buffer level over ten samples.

The mapped signal is sent to a second order loop filter . In an embodiment the second order loop filter has a cutoff frequency of 1.25 MHz.

An external programmable clock generator is employed to create a reference clock for the received video resolution.

This reference clock is fed to the Phase locked loop circuit and pulled to the required pixel clock frequency. This range makes allowance for the frequency error of the clock generator and original pixel clock on the 10G transmission end.

In an embodiment the recovered clock is transmitted off of the FPGA to a jitter cleaner . The cleaned and recovered clock is then transmitted back to the FPGA to drive the HDMI transmitter pixel clock. The recovered clock is also transmitted to a divider to enable the line buffer read and close the recovery timing loop. The clock divider matches the received video frame rate.

In an embodiment the audiovisual network administrators may configure the network such as through a dedicated software tool stored locally or accessed via a web interface. The network administrator may access the configuration tool via a personal computer laptop computer tablet mobile phone or any other portable electronic device. In an embodiment the virtual switch appliance is designed to emulate matrix switch control thereby allowing for familiarity with the matrix switch paradigm.

The configuration tool may provide an introspective look into digital video distribution systems. From advanced source and display information to source select functions and system topology views the configuration tool is a resource for deploying and troubleshooting audiovisual distribution networks.

The configuration tool may show a graphical representation of the hardware that is connected. In an embodiment inputs are shown on the left and outputs on the right. Intermediate transceiver devices are connected via colored lines with text stating resolution connection and HDCP status. Functions or greater signal detail may be displayed by simply hovering over different parts of the system.

The configuration tool may provide one or more interfaces to reorder inputs and outputs in the audiovisual distribution network . In one embodiment the configuration tool provides a graphic user interface providing the ability to drag and drop. The configuration tool may also provide an interface geared toward experienced users based on a grid which allows for minimal keystrokes.

In an embodiment the audiovisual distribution network implements a method for automatically visualizing the network topology. The network switch may then mine this information from Address Resolution Protocol ARP tables and provide it to the configuration tool for visual display.

Each intermediate transceiver device may include a dropdown box used for selecting the input to be routed. This quick route tool aids in testing sources during system commissioning. Setup buttons on each transmitter and receiver device brings you to additional menus that are organized in a convenient tabbed format. Transmitter menus provide EDID setup HDCP testing test signal generation and other advanced features receiver menus provide a means to adjust cable type and enable Deep Color support. Transmitters also have their own setup screens allowing adjustments to incoming source signals. Receivers views present resolution cable length HDCP and routing data.

Via the configuration tool user interface technicians can quickly identify signal behaviors and take action to remedy unwanted results.

Extended Display Identification Data EDID is a crucial part of digital AV signals and in an embodiment the configuration tool provides the ability to view manage or manually edit EDID. In addition to video resolution refresh rate and format information the configuration tool supplies audio information including number of channels resolution and format.

Other configuration tool features allow EDID copying from a display so that it can be applied to a set group of sources. An advanced button for Deep Color exposes compatible resolutions that work within the Deep Color guidelines. Audio selections for Best Common automatically selects the audio format that is compatible with all selected displays while Best Overall give integrators the choice of audio format regardless of downstream device support.

The virtual server appliance will further include simple network management protocol and may interface with the Crestron Fusion building management software available from Crestron Electronics Inc. of Rockleigh N.J.

In an embodiment transmitters and receivers leverage one to many protocols such as multicast transmission. Multicast is an optimization of one to many communication protocols where data is only transmitted to a subset of devices on the AV distribution network using a special set of addresses. Internet Group Management Protocol IGMP is typically employed on a network to manage these subsets of devices. Network switches implement IGMP snooping which may be used to reduce network traffic on network segments with no devices in the group. In an embodiment the network implements MLD to manage the multicast groups.

In a multicast transmission scheme a subset of receivers subscribes to and authenticate with a transmitter . The transmitter then transmits content protected AV data to this subset of receivers which have subscribed and authenticated with the transmitter . By joining and leaving different multicast groups the receiver effectively switches AV sources .

The transaction sequences of and show information transacted during the associated method described in that FIGURE with time being the horizontal or x axis.

UDP multicast content refers to audiovisual data that is being transmitted by the accompanying transmitter .

Source selection refers to the source which is currently selected. It does not refer to the source that is actually being output by the transmitter . For example upon a source switch from source 1 to source 2 being requested the source will switch from Request Display of Source 1 to Request Display of Source 2 .

TCP connection refers to one or more network connections or out of band connections established to authenticate with a source.

In step a receiver joins a first multicast group corresponding to a first transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the first transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the transmitter . The receiver and the transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the first transmitter . The session key is received in a secure manner.

In another embodiment the receiver may authenticate with the first transmitter by establishing an alternative network connection such as a UDP connection. In another embodiment the receiver authenticates with the transmitter by establishing an out of band connection.

In step upon authenticating with the first transmitter the receiver begins receiving AV data from the first transmitter . The first transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the first AV source to an AV sink . The receiver decrypts the encrypted AV data using the session key received from the transmitter . The receiver scales the AV data to a common resolution. In an embodiment this is the preferred resolution or native resolution of the video sink as determined via EDID information received for the AV sink . The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In another embodiment the transmitter may receive the control signal from the user device such as a remote control or personal electronic device directly. For example the transmitter may be an AV endpoint in communication with a network control point such as a touch panel device a personal electronic device such as a mobile phone or a tablet computer.

In another embodiment the transmitter may automatically switch sources in response to another action or setting. For example in an embodiment the receiver may switch sources upon a new source being connected. The receiver may automatically switch to the most recently plugged in source.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver .

In step the receiver joins a second multicast group corresponding to a second transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver by employing IGMP snooping.

In step the receiver authenticates with the second transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the second transmitter . The receiver and the second transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the second transmitter

In step upon authenticating the receiver receives data from the second transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the second AV source to the AV sink . The receiver decrypts the encrypted AV data using the session key received from the second transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

However users desire a fast switch from the first source to the second source. While HDCP offers the benefit of encrypted content transmission the required authentication protocol increases the switching delay in video distribution networks. Each time a new path for video distribution is desired the links forming those paths must be authenticated. Increased switching times are disrupting and bothersome to users. In complex video distribution systems with multiple layers this problem is even more amplified. Additionally because HDCP scheme operates under the surface most users do not realize that the increased time is the result of copy protection schemes and often unfairly attribute them to the individual components in the video distribution network.

An additional factor in the high switching delay in video distribution units is caused by the need for processing in video distribution networks. Scalers are employed to change the resolution or refresh rate of distributed video and are common components in video distribution networks either as separate components or integrated into other components in the network. Each time a video scaler receives audiovisual data at a new resolution there is a delay before the scaler outputs any new video. The video scaler must load data and format before outputting scaled video. This is known as achieving video lock. During a switching event each scaler in the distribution path must achieve video lock in succession. In complex video distribution systems with multiple layers this delay is amplified.

Additionally dependent on the characteristics of the display viewers may be subjected to disrupting video artifacts or snow during switches. Manufacturers handle disrupted video in different ways. Some displays may show snow when video is disrupted. Other may display pixilated images or ghost images. Many viewers find these display responses disturbing and lead some to believe that there is a problem with their equipment when no such problem exists. Users may experience the authentication process as a delayed period with snow or disorienting video artifacts.

Accordingly users desire a video distribution network with reduced switching time and aesthetically pleasing switches. In an embodiment the receiver joins the second multicast group prior to leaving the first multicast group. Advantageously the receiver may then establish an authenticated interface with the second transmitter and begin receiving AV data from the second transmitter prior to switching sources. The receiver may then execute a seamless switch.

In step a receiver joins a first multicast group corresponding to a first transmitter . The receiver joins the multicast group by transmitting an IGMP message. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn will begin routing multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the first transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the transmitter . The receiver and the transmitter then start the authentication process according to the HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the first transmitter

In step upon authenticating with the first transmitter the receiver receives AV data from the first transmitter . The first transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the first transmitter i.e. from the first AV source to an AV sink . The receiver decrypts the encrypted AV data using the session key received from the transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In step the receiver joins a second multicast group corresponding to a second transmitter prior to leaving the first multicast group. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the second transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the second transmitter . The receiver and the second transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the second transmitter

In step upon authenticating the receiver receives data from the second transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the second transmitter i.e. the second AV source to the AV sink . The receiver decrypts the encrypted AV data using the session key received from the second transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver .

In step a receiver joins a first multicast group corresponding to a first transmitter . The receiver joins the multicast group by transmitting an IGMP message. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn will begin routing multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the first transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the transmitter . The receiver and the transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the first transmitter

In step upon authenticating with the first transmitter the receiver receives AV data from the first transmitter . The first transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver . The receiver decrypts the encrypted AV data using the session key received from the transmitter . The receiver scales the AV data to the common resolution.

In step the receiver outputs the AV data from the first transmitter i.e. the first AV source to an AV sink . The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In step the receiver joins a second multicast group corresponding to a second transmitter prior to leaving the first multicast group. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the second transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the second transmitter . The receiver and the second transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the second transmitter

In step upon authenticating the receiver receives data from the second transmitter simultaneously with the first transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver . The receiver decrypts the encrypted AV data using the session key received from the second transmitter

In step the receiver genlocks the AV data from the first transmitter and the AV data from the second transmitter if required. The receiver determines whether genlocking is necessary and then genlocks the two AV streams.

In step the receiver executes a transition effect and transitions from outputting AV data from the first transmitter to outputting AV data from the second transmitter i.e. the second AV source . The receiver re encrypts the AV data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver .

In step a receiver joins a first multicast group corresponding to a first transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the first transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the transmitter . The receiver and the transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the first transmitter

In step upon authenticating with the first transmitter the receiver receives AV data from the first transmitter . The first transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the first transmitter i.e. the first AV source to an AV sink . The receiver decrypts the encrypted AV data using the session key received from the transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver buffers one or more frames of AV data from the first multicast AV stream. The receiver may buffer the one or more frames of AV data in a frame buffer. In an embodiment the frame buffer is a component of the scaler .

In step the receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver .

In step the receiver joins a second multicast group corresponding to a second transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the second transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the second transmitter . The receiver and the second transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the second transmitter

In step upon authenticating the receiver receives data from the second transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the one or more buffered frames of AV data. While the receiver is leaving the first multicast group joining the second multicast group and receiving the AV data from the second transmitter the receiver may output the buffered frames of video from the first transmitter thereby reducing any discontinuity of outputting AV data from the receiver .

In step the receiver outputs the AV data from the second transmitter i.e. the second AV source to the AV sink . The receiver decrypts the encrypted AV data using the session key received from the second transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step a receiver joins a first multicast group corresponding to a first transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the first transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the transmitter . The receiver and the transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the first transmitter

In step upon authenticating with the first transmitter the receiver receives AV data from the first transmitter . The first transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the first transmitter i.e. the first AV source to an AV sink . The receiver decrypts the encrypted AV data using the session key received from the transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In step the receiver outputs a repeated frame of generated image content data. Essentially by outputting a repeating frame the display on the AV sink looks frozen on the last frame thereby presenting an aesthetically pleasing transition. In response to the control signal the receiver ceases outputting received AV data from the first transmitter and instead generates a repeating frame of image content data and video timing data. For example the repeated frame of video content data may be the last frame of video data received from the first transmitter . The receiver may utilize a scaler comprising a frame buffer and a memory buffer to generate and output the repeated frame of image content data.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver .

In step the receiver joins a second multicast group corresponding to a second transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the second transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the second transmitter . The receiver and the second transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the second transmitter

In step upon authenticating the receiver receives data from the second transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the second transmitter i.e. the second AV source to the AV sink . The receiver decrypts the encrypted AV data using the session key received from the second transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

The receiver must receive a sufficient amount of audiovisual data from the second transmitter prior to outputting live audiovisual data from the second transmitter . This is known as achieving video lock. Following a switching discontinuity the scaler is further configured to generate the video timing data and repeated frame of image content data until video lock with the second transmitter is achieved. Upon achieving video lock with the incoming video after the switching discontinuity the receiver will then unfreeze the video by ceasing outputting the repeating frame and instead outputting the live scaled video. By repeating a frame of video the user is presented a cleaner and more aesthetically pleasing switch consisting of a momentarily and in some instances imperceptible frozen screen.

In addition to the aesthetic advantages and perceived reduction in switching time by the user the current invention reduces the switching time by maintaining scaler lock in any downstream scalars such as scalars embedded in video sinks . In HDCP systems switching time is further minimized. By outputting a continuous stream of audiovisual data more specifically video timing data to the HDCP transmitter the HDCP link between the receiver and the AV sink is maintained as authenticated during the switch.

In another embodiment in which a network segment may not support two uncompressed AV streams the transmitter is configured for multicasting both a compressed format version and an uncompressed format version of the AV data. For example the transmitter may transmit both a multicast datagram of the AV data and the compressed version of the data using a compression technology such as the H.264 Advanced Video Coding Standard MPEG 4 or any other protocol for compressing AV data.

The AV data is received at the transmitter by the HDMI transceiver. The AV data is then split at the first splitter. One path is routed to the scaler for downscaling and then to the h.264 encoder for compression. Both paths are then routed into the FPGA and encoded as two channels at the IP encoder. As described above the IP encoder may be an SMPTE 2022 encoder. However the IP encoder is not limited to an SMPTE encoder. The IP encoder may encode the AV data according to the Real Time Transport RTP protocol or the MPEG 2 TS protocol. The compressed and uncompressed multicast streams are transmitted as two channels on the network segment.

To conserve bandwidth on the network IP based video distribution may implements data compression of the AV data prior to transmission as less data utilizes less bandwidth. Compression is accomplished by representing a relatively larger group of data bits with a smaller group of data bits. When compressed video data is received it is decompressed to expand it back to approximately its original format for display. Examples of compressed video formats include mpeg2 h.264 h.265 and JPEG2000.

Current uncompressed video standards may require transmission at a bit rate in excess of 5 Gbit s approximately. For example certain video formats at 4K resolution also known as Ultra High Definition require large amounts of bandwidth. Commonly used compression standards may reduce that bit rate of approximately 10 Mbps.

In step a first transmitter transmits uncompressed AV data from a first AV source as a multicast datagram to a first multicast group.

In step a receiver joins the first multicast group corresponding. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the first transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the first transmitter . The receiver and the first transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the first transmitter

In step upon authenticating with the first transmitter the receiver receives the uncompressed AV data from the first transmitter . The first transmitter transmits encrypted uncompressed AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the first multicast including the receiver .

In step the receiver outputs the AV data from the first transmitter i.e. the first AV source to an AV sink . The receiver decrypts the encrypted AV data using the session key received from the transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step a second transmitter transmits a compressed version of AV data from a second AV source as a multicast datagram to a second multicast group.

In step the second transmitter simultaneously transmits an uncompressed version of the AV data from the second AV source as a multicast datagram to a third multicast group.

In step the receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In step the receiver joins the second multicast group to receive the compressed version of AV data from the second transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the second multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver authenticates with the second transmitter according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with the second transmitter . The receiver and the second transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives the session key for the encrypted AV data from the second transmitter

In step upon authenticating with the second transmitter the receiver receives the compressed version of AV data from the second transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver transitions from outputting the AV data from the first multicast group to outputting the AV data from the second multicast group to the AV sink . The receiver decrypts the encrypted AV data using the session key received from the transmitter . The receiver further decompresses the AV data using according to the compression standard used to decompress. The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver . By leaving the first multicast group the receiver frees up bandwidth on its network segment thereby allowing it to receive another stream of uncompressed AV data.

In step the receiver joins the third multicast group to receive the uncompressed version of AV data from the second transmitter . The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver receives the uncompressed version of AV data from the second transmitter . The second transmitter transmits uncompressed encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver transitions from transmitting the compressed version of the AV data to the uncompressed version of the AV data. In an embodiment time synchronization using timestamps within content are used to make aligned transitions between compressed and uncompressed content streams.

Advantageously as both SMPTE and compressed streams utilize the RTP protocol the same timestamps may be used to switch between the compressed and uncompressed AV data.

A memory buffer can be used to store frames of one of the multicast streams to delay the video. Alternatively there may be a switch at a vertical interval to the uncompressed.

In step the receiver leaves the second multicast group and ceases receiving the compressed AV data from the second transmitter . The receiver leaves the second multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver . By leaving the second multicast group the receiver frees up bandwidth to join an additional multicast group transmitting compressed data. For example the receiver may join an additional multicast group in response to or in anticipation of a source switch.

In another embodiment the receiver is notified of all potential sources to which it may be switched. It then establishes a connection to all transmitters via TCP to authenticate with all of these sources. The receiver can then receive and store the session key Kfor each source to use when that content is selected. Changes in the transmitters session key Kand receivers topology that occur at run time are updated as required using the dedicated receiver transmitter TCP connections. By pre authenticating with transmitters a significant amount of time can be saved during switching transitions.

In step receiver is notified of all potential sources to which it may be routed. In an embodiment upon system setup all transmitter devices are discovered by the receiver . The receiver may implement a network discovery tool such as Universal Plug and Play uPnP or Bonjour. Additionally the receiver may receive the network topology via one or more network devices such as the network switch or the network transmitters themselves. The receiver then compiles a list of potential receivers by network address.

In another embodiment the receiver is notified of potential sources by the configuration tool. For example a user may select a receiver on a graphic user interface of the virtual switch appliance and select corresponding transmitters to which the receiver may be routed. In another embodiment a user may send a control signal to the receiver either directly or via a video sink .

In step the receiver authenticates with all potential transmitters of which it was notified according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with each transmitter . The receiver and each transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives a session key from each potential transmitter .

In step a receiver joins a first multicast group corresponding to a first transmitter . The receiver joins the multicast group by transmitting an IGMP message. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn will begin routing multicast datagrams containing that multicast group address to the receiver .

The receiver may automatically join the first multicast group on startup or may receive a control signal to switch to the first multicast group. In an embodiment upon startup the receiver automatically joins the multicast group of the last transmitter from which it was subscribed.

In step the receiver receives AV data from the first transmitter . The first transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver outputs the AV data from the first transmitter i.e. the first AV source to an AV sink . The receiver decrypts the encrypted AV data by accessing the stored session key received from the transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In step the receiver joins a second multicast group corresponding to a second transmitter prior to leaving the first multicast group. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn routes multicast datagrams containing that multicast group address to the receiver .

In step the receiver receives AV data from the second transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

In step the receiver transitions from transmitting AV data from the first AV source to transmitting AV data from the second AV source to the AV sink . The receiver decrypts the encrypted AV data accessing the stored session key received from the second transmitter . The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver .

In step receiver updates session keys in cache as necessary. For example the receiver may periodically run a network discovery tool to determine topology changes in the network. The receiver may also be notified of new transmitters on the network by management protocols in the network switch or from the transmitter itself via plug and play protocols. The receiver may then establish a network connection with these new transmitters to authenticate and receive a session key for storage in cache.

In the embodiment described above the receiver may make seamless transitions such as by buffering frames freezing frames or executing transition effects as described above. Additionally the network may take into account bandwidth limitations by utilizing both a compressed and uncompressed version of AV data as described above.

A hybrid of authenticating with the next source and all sources are algorithms that let a receiver maintain authentication with a limited number of transmitters . An example of this is Least Recently Used LRU method. A receiver can maintain a cache of some number of transmitter keys and can break the connection with transmitters it has not used in some time. Receivers tend to use particular sources frequently and some on occasion. Frequently used sources will switch quickly and less frequently used sources will take longer while utilizing the next source authentication approach described above.

In step the receiver determines a predefined number of potential sources from which the receiver is likely to receive AV data. The predefined number may be based on a limit in capability of the receiver such as processing or memory limitations. Alternatively the predefined number may be based on limitations set by the security protocol. In an embodiment the receiver determines the predefined number of potential sources based on a Least Recently Used LRU algorithm.

In step the receiver authenticates with the predefined number of potential transmitters of which it was notified according to a security protocol. The receiver initiates the authentication process by establishing a TCP connection with each transmitter . The receiver and each transmitter then start the authentication process according to HDCP specification such as the HDCP 2.x specification. Once the authentication process is complete the receiver receives a session key from each potential transmitter .

In step receiver stores each of the session keys received from the predefined number of potential sources as a cache of session keys.

In step the receiver joins a first multicast group corresponding to a first transmitter . The receiver joins the multicast group by transmitting an IGMP message. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn will begin routing multicast datagrams containing that multicast group address to the receiver .

If the session key for the first transmitter is stored in the cache of keys in step the receiver receives AV data from the first transmitter . The first transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

If the session key for the first transmitter is not stored in the cache of keys in step the receiver authenticates with the first transmitter according to the security protocol.

In step the receiver outputs the AV data from the first transmitter i.e. the first AV source to an AV sink . The receiver decrypts the encrypted AV data by accessing either the stored session key received from the transmitter or the received session key from the first transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver receives a control signal to switch sources to a second transmitter . The control signal may be received via a data channel of the AV interface to the AV sink . For example in an embodiment the receiver receives a control signal to switch to a second transmitter over a consumer electronics control CEC channel of the HDMI interface. A user may enter a command to the AV sink to switch sources such as through a remote control interface or personal electronic device and the AV sink may relay this command to the transmitter via the CEC channel of the HDMI interface.

In step the receiver joins a second multicast group corresponding to a second transmitter . The receiver joins the multicast group by transmitting an IGMP message. The receiver initiates the join by sending an IGMP message to the network switch to request joining the multicast group. The network switch in turn will begin routing multicast datagrams containing that multicast group address to the receiver .

If the session key for the second transmitter is stored in the cache of keys in step the receiver receives AV data from the second transmitter . The second transmitter transmits encrypted AV data as a multicast datagram to the AV distribution network . The network switch routes the multicast datagram to all subscribers of the multicast including the receiver .

If the session key for the second transmitter is not stored in the cache of keys in step the receiver authenticates with the second transmitter according to the security protocol.

In step the receiver transitions from outputting AV data from the first transmitter to outputting AV data from the second transmitter . The receiver decrypts the encrypted AV data by accessing either the stored session key received from the second transmitter or the received session key from the second transmitter . The receiver scales the AV data to the common resolution. The receiver then re encrypts the data using the session key for the HDCP link with the AV sink such as an HDMI interface and then transmits the re encrypted data to the AV sink such as over an HDMI interface.

In step the receiver leaves the first multicast group and ceases receiving AV data from the first transmitter . The receiver leaves the first multicast group by sending an IGMP message to the network switch to leave the group. Datagrams containing the multicast address are no longer routed to the receiver .

In step receiver updates session key by implementing a LRU algorithm. As described above the LRU algorithm replaces the least recently used key with a more frequently used key. So for example if the receiver determines that the last session key is not stored in cache the receiver will replace the least recently used key with the last session key. In another embodiment the least recently used session key may not be replaced if the key is a frequently used key as determined by the receiver. The receiver determines whether the least recently used key is a frequently used key by maintaining a tally of times that a session key is employed and measuring that tally against a threshold.

In the embodiment described above the receiver may make seamless transitions such as by buffering frames freezing frames or executing transition effects as described above. Additionally the network may take into account bandwidth limitations by utilizing both a compressed and uncompressed version of AV data as described above.

Another hybrid alternative is to use priorities. Some receiving devices designated to have high priority can force lower priority devices to relinquish their ability to decode a given stream.

In different embodiments a priority table can be used to specify version selection priorities based on for example segment or overall network capability any device s or system s load any device s thermal temperature overall or specific subscriber counts network Quality of Service QoS the status of occupancy detected at or near the receiver ambient lighting conditions at the receiver etc. Utilization by the receiver may include for example displaying on a display device s recording on a recording medium passing on to other destination devices converting into a different format s further compressing decompressing buffering routing to a Digital Signal Processor DSP for processing etc. A display device may be a projector a monitor e.g. a computer monitor a flat panel e.g. LCD LED and Plasma etc. a television set e.g. CRT a HMD Head mounted display a HUD Heads Up Display an implantable or worn display e.g. wearable contact lens displays a media player a video game console display a cellular telephone display a mobile tablet a smart phone a PDA a component that is coupled with a graphical output device or any other suitable screen or combination thereof.

In the embodiment described above the receiver may make seamless transitions such as by buffering frames freezing frames or executing transition effects as described above. Additionally the network may take into account bandwidth limitations by utilizing both a compressed and uncompressed version of AV data as described above.

Alternate embodiments may be devised without departing from the spirit or the scope of the invention. For example in some embodiments implementations using HDCP 2.x are disclosed however any content protection mechanism using a common key can be used to decode an encrypted broadcast or multicast stream. The invention is not limited to IP networks in some embodiments non IP based networks may be used.

In this description various functions and operations may be encoded and performed by a hardware processor e.g. a microprocessor. Alternatively or in combination the functions and operations can be implemented using special purpose circuitry with or without software instructions such as using Application Specific Integrated Circuit ASIC or Field Programmable Gate Array FPGA . Embodiments can be implemented using hardwired circuitry without software instructions or in combination with software instructions. Thus the techniques are limited neither to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

While some embodiments can be implemented in fully functioning computers and computer systems various embodiments are capable of being distributed as a computing product in a variety of forms and are capable of being applied regardless of the particular type of machine or computer readable media used to actually effect the distribution.

At least some aspects disclosed can be embodied at least in part in software. That is the techniques may be carried out in a computer system or other data processing system in response to its processor such as a microprocessor executing sequences of instructions contained in a memory such as ROM volatile RAM non volatile memory cache or a remote storage device.

Routines executed to implement the embodiments may be implemented as part of an operating system middleware service delivery platform Software Development Kit SDK component web services or other specific application component program object module or sequence of instructions referred to as computer programs. Invocation interfaces to these routines can be exposed to a software development community as an Application Programming Interface API . The computer programs typically comprise one or more instructions set at various times in various memory and storage devices in a computer and that when read and executed by one or more processors in a computer cause the computer to perform operations necessary to execute elements involving the various aspects.

A machine readable medium can be used to store software and data which when executed by a data processing system causes the system to perform various methods. The executable software and data may be stored in various places including for example ROM volatile RAM non volatile memory and or cache. Portions of this software and or data may be stored in any one of these storage devices. Further the data and instructions can be obtained from centralized servers or peer to peer networks. Different portions of the data and instructions can be obtained from different centralized servers and or peer to peer networks at different times and in different communication sessions or in a same communication session. The data and instructions can be obtained in their entirety prior to the execution of the applications. Alternatively portions of the data and instructions can be obtained dynamically just in time when needed for execution. Thus it is not required that the data and instructions be on a machine readable medium in entirety at a particular instance of time.

Examples of computer readable media include but are not limited to recordable and non recordable type media such as volatile and non volatile memory devices read only memory ROM random access memory RAM flash memory devices floppy and other removable disks magnetic disk storage media optical storage media e.g. Compact Disk Read Only Memory CD ROMS Digital Versatile Disks DVDs etc. among others. The instructions may be embodied in digital and analog communication links for electrical optical acoustical or other forms of propagated signals such as carrier waves infrared signals digital signals etc.

In general a machine readable medium includes any mechanism that provides i.e. stores and or transmits information in a form accessible by a machine e.g. a computer network device personal digital assistant manufacturing tool any device with a set of one or more processors etc. .

In various embodiments hardwired circuitry may be used in combination with software instructions to implement the techniques. Thus the techniques are neither limited to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

Although some of the drawings illustrate a number of operations in a particular order operations which are not order dependent may be reordered and other operations may be combined or broken out. While some reordering or other groupings are specifically mentioned others will be apparent to those of ordinary skill in the art and so do not present an exhaustive list of alternatives. Moreover it should be recognized that the stages could be implemented in hardware firmware software or any combination thereof.

