---

title: Cluster view for storage devices
abstract: One or more techniques and/or systems are provided for generating a macroscopic cluster view of storage devices, as opposed to merely an isolated view from an individual node. For example, nodes within a node cluster may be queried for storage device reports comprising storage device information regarding storage devices with which the nodes are respectively connected (e.g., I/O performance statistics, path connections, storage device attributes, status, error history, etc.). The storage device reports may be aggregated together to define one or more storage device data structures (e.g., a storage device data structure comprising one or more tables that may be populated with storage device information). In this way, the cluster view may be generated based upon querying one or more storage device data structures (e.g., an error cluster view, a storage device cluster view, a node summary cluster view, etc.).
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09305001&OS=09305001&RS=09305001
owner: NetApp Inc.
number: 09305001
owner_city: Sunnyvale
owner_country: US
publication_date: 20140321
---
This application is a continuation of U.S. application Ser. No. 13 237 369 filed on Sep. 20 2011 entitled CLUSTER VIEW FOR STORAGE DEVICES at least some of which may be incorporated herein.

The instant disclosure pertains to generating a cluster view of storage devices from an aggregated viewpoint of a node cluster.

A network storage environment may comprise a node cluster e.g. storage servers of nodes that collaborate together to manage various aspects of data storage associated with attached storage devices e.g. data volume creation read write access logical unit number LUN creation virtual and physical data formatting etc. . For example the node cluster may provide host computing devices with read write access to data stored on storage devices. In this way a host computing device may connect to a node that may provide the host computing device with access to data stored on storage devices connected to the node. In one example a node cluster may comprise node A node B node C and or other nodes. Node A may be connected to storage device 1 and storage device 2 node B may be connected to storage device 3 node C may be connected to storage device 2 and storage device 5 etc. A user may desire to startup a virtual machine on a desktop host computing device using a virtual machine hosting application. The virtual machine hosting application may be configured to retrieve virtual machine data of the virtual machine from storage devices accessible through the node cluster. In particular the virtual machine hosting application may access node C because node C is connected to storage device 2 and storage device 5 which may store the virtual machine data. In this way node C may provide the virtual machine hosting application on the desktop host computing device with access to the virtual machine data stored across storage device 2 and storage device 5.

Conventional network storage environments may provide reporting tools that generate views of storage information from isolated viewpoints of individual nodes within the node cluster e.g. storage information known to node A storage information known to node B etc. . Unfortunately such conventional reporting techniques merely provide views that are based upon isolated reports from the respective nodes. For example an administrator of a node cluster may request a view of storage devices attached to the node cluster. Accordingly the nodes may be individually queried to determine what storages devices are accessible to the respective nodes. In this way the administrator may be presented with a view of information derived from isolated reports of storage information that is known to the nodes individually. For example the view may specify that node D reported information regarding storage device 3 node E reported information regarding storage device 3 and 5 node F reported information regarding storage device 6 node G reported information regarding storage device 3 and 5 etc. Because the reports from the nodes are isolated the view may comprise a significant amount of redundant and or overlapping information e.g. information regarding device 3 may have been reported three times by node D node E and node G . Thus the administrator may not be provided with an efficient or adequate view of what the node cluster knows as a single cluster unit operating together but merely with what individual nodes reported.

The disclosure relates to one or more techniques and or systems that generate a cluster view of one or more storage devices. That is a cluster view may be generated that provides a view of storage device information from an aggregated viewpoint of a node cluster operating together as opposed to from a viewpoint based upon isolate reports from individual nodes e.g. what storage devices the node cluster sees as opposed to what storage devices the individuals nodes see . In particular storage device reports comprising storage device information reported from nodes within a node cluster may be aggregated together into storage device data structures for respective storage devices e.g. individualized storage device data structure per storage device . In this way a cluster view may be generated utilizing one or more storage device data structures.

In one example respective nodes within a node cluster may be queried for storage device reports. In particular a node may be queried for a storage device report associated with one or more storage devices connected to the node e.g. a storage application programming interface API on the node may be queried . The storage device report may comprise storage device information reported back by one or more storage subsystems associated with the storage API e.g. a device driver may be configured to provide a device status such as an ability to accept I O requests a first subsystem may be configured to query a storage device for storage device attribute information such as model vendor path connections from the storage device to one or more nodes etc. a second subsystem may be configured to determine I O performance statistics such as read write rates latency errors etc. and or other subsystems . In this way the storage device report may comprise storage device information specifying a list of path connections from the storage device to one or more nodes and or storage device configuration and statistical information e.g. I O performance statistics storage device attribute information storage device ownership error history etc. . It may be appreciated that one example of one or more storage device reports is shown and further described in .

The storage device reports may be aggregated together to define storage device data structures for the storage devices e.g. storage device information reported by various nodes may be correlated together to create an individualized storage device data structure for respective storage devices . For example a storage device specified within a storage device report may be identified e.g. node A may report storage device information associated with storage device 1 . A storage device data structure for the storage device may be defined based upon storage device information within the storage device report e.g. a new storage device data structure may be created or an existing storage device data structure may be updated . It may be appreciated that one example of a storage device data structure is shown and further described in . For example supplemental information may be added into the storage device data structure non supplemental redundant information may be discarded and or conflicting information may be discarded or used to overwrite current information based upon the role of the node reporting such information e.g. information from an ownership node may be preferred over information from a non ownership node . In this way storage device data structures may be defined for the respective storage devices based upon aggregating the storage device information within the storage device reports. It may be appreciated that in one example a single storage device data structure may comprise a complete view of a storage device from an aggregate viewpoint of the node cluster.

It may be appreciated that aggregating storage device reports to define storage device data structures for storage devices allows for the generation of cluster views that provide an aggregated viewpoint of the node cluster. Without the storage device data structures information about storage devices and or the storage cluster may be limited to isolated viewpoints of storage devices from individual nodes. That is various cluster views may be generated utilizing one or more storage device data structures. Such views may provide storage device information based upon an aggregate viewpoint of the node cluster operating together rather than isolated viewpoints from individual nodes. A cluster view may be generated based upon information within one or more storage device data structures. For example a query may be constructed and executed against one or more storage device data structures to create a cluster view e.g. find storage devices where RPM 7200 and error count 0 and status active . In this way a plethora of different queries may be constructed to generate different cluster views. It may be appreciated that a query may be based upon various e.g. predefined rules and or query terms that may be constructed together which may improve precision of storage device data fetching e.g. redundant data may be excluded based upon the query terms and or rules of a query .

In one example an error cluster view may be generated by querying one or more storage device data structures to identify storage devices associated with at least one error from the viewpoint of the node cluster. It may be appreciated that one example of an error cluster view is shown and further described in . In another example a node summary cluster view may be generated by querying one or more storage device data structures to provide a comprehensive cluster view of storage devices and storage device connectivity within the node cluster e.g. the node summary cluster view may illustrate from the perspective of the node cluster that storage device 1 is connected to node A storage device 2 is connected to node B and node C storage device 3 is connected to node B etc. . It may be appreciated that one example of a node summary cluster view is shown and further described in . In another example a storage device cluster view of a storage device may be generated by querying a storage device data structure associated with the storage device. The storage device cluster view may comprise path connections from the storage device to one or more nodes storage device configuration and statistical information error history and or other storage device information. It may be appreciated that one example of a storage device cluster view is shown and further described in . In this way various cluster views may be generated utilizing the storage device data structures which may provide a comprehensive view of storage from the viewpoint of the node cluster rather than isolated views of what nodes individually see.

To the accomplishment of the foregoing and related ends the following description and annexed drawings set forth certain illustrative aspects and implementations. These are indicative of but a few of the various ways in which one or more aspects may be employed. Other aspects advantages and novel features of the disclosure will become apparent from the following detailed description when considered in conjunction with the annexed drawings.

Some examples of the claimed subject matter are now described with reference to the drawings where like reference numerals are generally used to refer to like elements throughout. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the claimed subject matter. It may be evident however that the claimed subject matter may be practiced without these specific details. Nothing in this detailed description is admitted as prior art.

As nodes e.g. storage servers within a node cluster e.g. a network storage environment become increasingly interconnected and operate together as a self aware cluster it may be advantageous to provide comprehensive cluster views of storage information from a viewpoint of the node cluster as opposed to from a viewpoint based upon isolated reports from individual nodes. Unfortunately current reporting tools may provide views of storage information from the viewpoint of individual nodes e.g. information known to a single node without regard to what information another node knows . Such views may provide an inadequate view of storage information e.g. a significant amount of redundant and or overlapping data may be reported by nodes and or presented within a view because information reported by the nodes may not be aggregated together .

Accordingly a cluster view of one or more storage devices may be generated based upon aggregated storage device reports from nodes within a node cluster as provided herein. In particular storage device reports may be received from nodes within the node cluster. The storage device reports may comprise storage device information e.g. a list of path connections from a storage device to one or more nodes and or storage device configuration and statistical information such as I O performance error history ownership storage device status and attributes etc. . The storage device reports may be aggregated to define storage device data structures for storage devices e.g. an ordered sequence of storage device data structures associated with corresponding storage devices may be maintained where a single storage device data structure may comprise a complete view of a storage device from an aggregate viewpoint of the node cluster . In this way storage device data structures may be utilized to generate a cluster view of storage information from the viewpoint of the node cluster e.g. a wide variety of queries may be constructed using various rules and or query terms which may be executed against one or more storage device data structures to extract information to populate different cluster views . For example a single API may be used to fetch details about one or more storage devices on a per storage device basis.

To provide context for cluster view generation illustrates a clustered network environment e.g. a node cluster and illustrates an embodiment of a data storage system e.g. comprising a node that may be implemented to store and manage data within one or more storage devices of which a cluster view may be generated. It will be appreciated that where the same or similar components elements features items modules etc. are illustrated in later figures but were previously discussed with regard to prior figures that a similar e.g. redundant discussion of the same may be omitted when describing the subsequent figures e.g. for purposes of simplicity and ease of understanding .

It will be further appreciated that clustered networks are not limited to any particular geographic areas and can be clustered locally and or remotely. Thus in one embodiment a clustered network can be distributed over a plurality of storage systems and or nodes located in a plurality of geographic locations while in another embodiment a clustered network can include data storage systems e.g. residing in a same geographic location e.g. in a single onsite rack of data storage devices .

In the illustrated example one or more clients which may comprise for example personal computers PCs computing devices used for storage e.g. storage servers and other computers or peripheral devices e.g. printers are coupled to the respective data storage systems by storage network connections . Network connection may comprise a local area network LAN or wide area network WAN for example that utilizes Network Attached Storage NAS protocols such as a Common Internet File System CIFS protocol or a Network File System NFS protocol to exchange data packets. Illustratively the clients may be general purpose computers running applications and may interact with the data storage systems using a client server model for exchange of information. That is the client may request data from the data storage system and the data storage system may return results of the request to the client via one or more network connections .

The nodes on clustered data storage systems can comprise network or host nodes that are interconnected as a cluster to provide data storage and management services such as to an enterprise having remote locations for example. Such a node in a data storage and management network cluster environment can be a device attached to the network as a connection point redistribution point or communication endpoint for example. A node may be capable of sending receiving and or forwarding information over a network communications channel and could comprise any device that meets any or all of these criteria. One example of a node may be a data storage and management server attached to a network where the server can comprise a general purpose computer or a computing device particularly configured to operate as a server in a data storage and management system.

As illustrated in the exemplary environment nodes can comprise various functional components that coordinate to provide distributed storage architecture for the cluster. For example the nodes can comprise a network module e.g. N Module or N Blade and a data module e.g. D Module or D Blade . Network modules can be configured to allow the nodes to connect with clients over the network connections for example allowing the clients to access data stored in the distributed storage system. Further the network modules can provide connections with one or more other components through the cluster fabric . For example in a first network module of first node can access a second data storage device by sending a request through a second data module of a second node .

Data modules can be configured to connect one or more data storage devices such as disks or arrays of disks flash memory or some other form of data storage to the nodes . The nodes can be interconnected by the cluster fabric for example allowing respective nodes in the cluster to access data on data storage devices connected to different nodes in the cluster. Often data modules communicate with the data storage devices according to a storage area network SAN protocol such as Small Computer System Interface SCSI or Fiber Channel Protocol FCP for example. Thus as seen from an operating system on a node the data storage devices can appear as locally attached to the operating system. In this manner different nodes etc. may access data blocks through the operating system rather than expressly requesting abstract files.

It should be appreciated that while the example embodiment illustrates an equal number of N and D modules other embodiments may comprise a differing number of these modules. For example there may be a plurality of N and or D modules interconnected in a cluster that does not have a one to one correspondence between the N and D modules. That is different nodes can have a different number of N and D modules and the same node can have a different number of N modules than D modules.

Further a client can be networked with the nodes in the cluster over the networking connections . As an example respective clients that are networked to a cluster may request services e.g. exchanging of information in the form of data packets of a node in the cluster and the node can return results of the requested services to the clients . In one embodiment the clients can exchange information with the network modules residing in the nodes e.g. network hosts in the data storage systems .

In one embodiment the data storage devices comprise volumes which is an implementation of storage of information onto disk drives or disk arrays or other storage e.g. flash as a file system for data for example. Volumes can span a portion of a disk a collection of disks or portions of disks for example and typically define an overall logical arrangement of file storage on disk space in the storage system. In one embodiment a volume can comprise stored data as one or more files that reside in a hierarchical directory structure within the volume.

Volumes are typically configured in formats that may be associated with particular storage systems and respective volume formats typically comprise features that provide functionality to the volumes such as providing an ability for volumes to form clusters. For example where a first storage system may utilize a first format for their volumes a second storage system may utilize a second format for their volumes.

In the example environment the clients can utilize the data storage systems to store and retrieve data from the volumes . In this embodiment for example the client can send data packets to the N module in the node within data storage system . The node can forward the data to the data storage device using the D module where the data storage device comprises volume A. In this way in this example the client can access the storage volume A to store and or retrieve data using the data storage system connected by the network connection . Further in this embodiment the client can exchange data with the N module in the host within the data storage system e.g. which may be remote from the data storage system . The host can forward the data to the data storage device using the D module thereby accessing volume associated with the data storage device .

It may be appreciated that generation of a cluster view of one or more storage devices may be implemented within clustered network environment . For example a node query component configured to query nodes e.g. nodes a data structure component configured to define storage device data structures for storage devices e.g. data store devices and or a cluster view component configured to generate a cluster view from the viewpoint of the node cluster e.g. clustered network environment may be implemented within the clustered network environment . For example such components may be implemented within clients nodes and or other nodes such as a centralized node not illustrated.

The data storage device can comprise mass storage devices such as disks of a disk array . It will be appreciated that the techniques and systems described herein are not limited by the example embodiment. For example disks may comprise any type of mass storage devices including but not limited to magnetic disk drives flash memory and any other similar media adapted to store information including for example data D and or parity P information.

The node comprises one or more processors a memory a network adapter a cluster access adapter and a storage adapter interconnected by a system bus . The storage system also includes an operating system installed in the memory of the node that can for example implement a Redundant Array of Independent or Inexpensive Disks RAID optimization technique to optimize a reconstruction process of data of a failed disk in an array.

The operating system can also manage communications for the data storage system and communications between other data storage systems that may be in a clustered network such as attached to a cluster fabric e.g. in . Thus the host can to respond to client requests to manage data on the data storage device e.g. or additional clustered devices in accordance with these client requests. The operating system can often establish one or more file systems on the data storage system where a file system can include software code and data structures that implement a persistent hierarchical namespace of files and directories for example. As an example when a new data storage device not shown is added to a clustered network system the operating system is informed where in an existing directory tree new files associated with the new data storage device are to be stored. This is often referred to as mounting a file system.

In the example data storage system memory can include storage locations that are addressable by the processors and adapters for storing related software program code and data structures. The processors and adapters may for example include processing elements and or logic circuitry configured to execute the software code and manipulate the data structures. The operating system portions of which are typically resident in the memory and executed by the processing elements functionally organizes the storage system by among other things invoking storage operations in support of a file service implemented by the storage system. It will be apparent to those skilled in the art that other processing and memory mechanisms including various computer readable media may be used for storing and or executing program instructions pertaining to the techniques described herein. For example the operating system can also utilize one or more control files not shown to aid in the provisioning of virtual machines.

The network adapter includes the mechanical electrical and signaling circuitry needed to connect the data storage system to a client over a computer network which may comprise among other things a point to point connection or a shared medium such as a local area network. The client e.g. of may be a general purpose computer configured to execute applications. As described above the client may interact with the data storage system in accordance with a client host model of information delivery.

The storage adapter cooperates with the operating system executing on the host to access information requested by the client . The information may be stored on any type of attached array of writeable media such as magnetic disk drives flash memory and or any other similar media adapted to store information. In the example data storage system the information can be stored in data blocks on the disks . The storage adapter can includes input output I O interface circuitry that couples to the disks over an I O interconnect arrangement such as a storage area network SAN protocol e.g. Small Computer System Interface SCSI iSCSI hyperSCSI Fiber Channel Protocol FCP . The information is retrieved by the storage adapter and if necessary processed by the one or more processors or the storage adapter itself prior to being forwarded over the system bus to the network adapter and or the cluster access adapter if sending to another node in the cluster where the information is formatted into a data packet and returned to the client over the network connection and or returned to another node attached to the cluster over the cluster fabric .

In one embodiment storage of information on arrays can be implemented as one or more storage volumes that are comprised of a cluster of disks defining an overall logical arrangement of disk space. The disks that comprise one or more volumes are typically organized as one or more groups of RAIDs. As an example volume comprises an aggregate of disk arrays and which comprise the cluster of disks and .

In one embodiment to facilitate access to disks the operating system may implement a file system e.g. write anywhere file system that logically organizes the information as a hierarchical structure of directories and files on the disks. In this embodiment respective files may be implemented as a set of disk blocks configured to store information such as data D and or parity P whereas the directory may be implemented as a specially formatted file in which other files and directories are stored.

Whatever the underlying physical configuration within this data storage system data can be stored as files within physical and or virtual volumes which can be associated with respective volume identifiers such as file system identifiers FSIDs which can be 32 bits in length in one example.

A physical volume which may also be referred to as a traditional volume in some contexts corresponds to at least a portion of physical memory whose address addressable space location etc. doesn t change such as at least some of one or more data storage devices e.g. a Redundant Array of Independent or Inexpensive Disks RAID system . Typically the location of the physical volume doesn t change in that the range of address es used to access it generally remains constant.

A virtual volume in contrast is stored over an aggregate of disparate portions of different physical storage devices. The virtual volume may be a collection of different available portions of different physical memory locations such as some available space from each of the disks . It will be appreciated that since a virtual volume is not tied to any one particular storage device a virtual volume can be said to include a layer of abstraction or virtualization which allows it to be resized and or flexible in some regards.

Further a virtual volume can include one or more logical unit numbers LUNs directories qtrees and files . Among other things these features but more particularly LUNS allow the disparate memory locations within which data is stored to be identified for example and grouped as data storage unit. As such the LUNs may be characterized as constituting a virtual disk or drive upon which data within the virtual volume is stored within the aggregate. For example LUNs are often referred to as virtual drives such that they emulate a hard drive from a general purpose computer while they actually comprise data blocks stored in various parts of a volume.

In one embodiment one or more data storage devices can have one or more physical ports wherein each physical port can be assigned a target address e.g. SCSI target address . To represent respective volumes stored on a data storage device a target address on the data storage device can be used to identify one or more LUNs . Thus for example when the host connects to a volume through the storage adapter a connection between the host and the one or more LUNs underlying the volume is created.

In one embodiment respective target addresses can identify multiple LUNs such that a target address can represent multiple volumes. The I O interface which can be implemented as circuitry and or software in the storage adapter or as executable code residing in memory and executed by the processors for example can connect to volume by using one or more addresses that identify the LUNs .

It may be appreciated that a cluster view of one or more storage devices may be generated based upon storage device data structures defined using storage device reports from one or more nodes node . For example a storage device cluster view of data storage device may be generated based upon a storage device data structure for data storage device which may have been defined based upon a storage device report from node and or other nodes connected to data storage device .

One embodiment of generating a cluster view of one or more storage devices is illustrated by exemplary method in . At the method starts. At respective nodes within a node cluster may be queried for storage device reports. In particular at a node may be queried for a storage device report associated with one or more storage devices connected to the node e.g. a storage application programming interface API on the node may be queried . For example the storage API may be associated with one or more subsystems and or device drivers configured to retrieve storage device information that may be populated within the storage device report e.g. a first subsystem may query a storage device for storage device attribute information such as model vendor path connections from the storage device to one or more nodes etc. a second subsystem may determine I O performance statistics such as read write rates latency errors etc. and or other subsystems may gather other storage device information .

At the storage device report comprising storage device information may be received from the node. It may be appreciated that one example of one or more storage device reports is shown and further described in . In one example the storage device information may comprise a list of connections from a storage device to one or more nodes and or storage device configuration and statistical information associated with one or more storage devices connected to the node. For example storage device configuration and statistical information may comprise I O performance statistics e.g. read write operations read write rates blocks read written latency time powered on I O errors etc. storage device status information e.g. ability and readiness to accept I O request storage device role information e.g. hot replacement spare offline online part of a RAID etc. storage device ownership information e.g. whether a node is an owner or not of a storage device storage device attribute information e.g. vendor model serial number RPM disk type firmware version etc. error history and or a variety of other information. It may be appreciated that in one example the storage APIs of respective nodes within the node cluster may be queried in parallel. In this way one or more storage device reports may be received substantially concurrently from nodes within the node cluster.

At respective storage device reports may be aggregated to define one or more storage device data structures for storage devices. It may be appreciated that one example of one or more storage device data structures is shown and further described in . In particular at a storage device specified within a storage device report may be identified. At a storage device data structure for the storage device may be defined for the storage device based upon storage device information within the storage device report. In one example if the storage device data structure does not exist then the storage device data structure may be created and or populated with storage device information from the storage device report.

In another example where the storage device data structure exists supplemental information within the storage device report may be added into the storage device data structure e.g. current information within the storage device data structure may specify that storage device 2 is connected to node A while supplemental information within the storage device report may specify that storage device 2 is connected to node C and thus the connection to node C may be added into the storage device data structure . In another example where the storage device data structure exists non supplementary redundant information may be discarded e.g. current information within the storage device data structure may specify that storage device 2 has a model number 123456 while non supplementary redundant information within the storage device report may specify that storage device 2 has a model number 123456 and thus may be discarded to avoid redundant data .

In another example where the storage device data structure exists if a preferred node e.g. a node having ownership over the storage device reported conflicting information within the storage device report then the conflicting information may overwrite current information within the storage device data structure e.g. current information within a storage device data structure for storage device 5 reported by node Z a spare node for storage device 5 may specify that no I O operations have been performed recently while conflicting information within the storage device report reported by node C an ownership node of storage device 5 may specify that I O operations have been performed recently and thus the current information of no I O operations reported by spare node Z may be replaced in the data structure with the conflicting information of I O operations because node C the ownership node may be performing I O operations whereas node Z a spare node may be in an inactive state . Otherwise if the node that reported the current information within the storage device data structure is preferred then the subsequent conflicting information may be discarded e.g. information from node C may not overwrite information from node Z where node Z is preferred over node C .

The storage device data structure may comprise I O performance statistics for the storage device e.g. latency read write operations etc. path connections between the storage device and one or more nodes storage device status information e.g. availability to accept I O request storage device role information e.g. active hot spare inactive etc. storage device attribute information e.g. model vendor etc. storage device usage statistics e.g. rated life used spare sectors consumed power on hours mutable device configurations settings e.g. checksum type administrator assigned attributes e.g. assigned disk name job status of operations e.g. media scrub disk zeroing reconstruct and copy operations storage device ownership e.g. an ownership node having ownership over the storage device error history of the storage device and or a variety of other information. For example the storage device data structure may comprise one or more tables which may be populated with such information e.g. an attribute info table an ownership table a status table a performance statistics table a raid table one or more connection tables and or other tables . In this way the storage device reports may be aggregated to define storage device data structures for storage devices e.g. a single storage device data structure may be defined for a storage device which may comprise data aggregated from one or more storage device reports reported from various nodes within the node cluster connected to the storage device .

It may be appreciated that storage device reports may be aggregated regardless of whether storage devices are configured with different data formats and or whether nodes comprise different operating systems. In one example the one or more storage devices within the node cluster may correspond to one or more logical unit numbers LUNs . In another example a storage device report may comprise storage device information associated with a first storage device comprising a first data format e.g. a LUN and a second storage device comprising a second data format e.g. a physical storage format different than the first data format. In another example a first storage device report may be received from a first node comprising a first operating system type and a second storage device report may be received from a second node comprising a second operating system type different from the first operating system type.

At a cluster view may be generated utilizing one or more storage device data structures. It may be appreciated that one or more examples of cluster views are shown and further described in . In one example a query may be constructed e.g. the query may be built with one or more query terms based upon one or more query rules and execute against one or more storage device data structures to retrieve storage device information to populate a cluster view. In another example pre defined queries may be provided for administrative ease e.g. an administrator may be provided with pre defined queries that may be executed to generate various cluster views such as an error cluster view a storage device summary cluster view etc. . It may be appreciated that a plethora of queries may be constructed so that various cluster views may be created e.g. queries may be constructed using syntax similar to relational database queries .

In one example of a cluster view a request for the node summary cluster view may be received e.g. an administrator of the node cluster may utilize a command prompt and or a storage administration utility application to request the cluster view . A node summary query may be constructed and executed against one or more storage device data structures to create the node summary cluster view comprising a cluster view of storage devices and storage device connectivity within the node cluster e.g. the node summary query may retrieve storage device information associated with storage devices having an RPM 7200 errors 0 and status active to create the node summary cluster view . In another example of a cluster view a request for an error cluster view may be received. An error query may be constructed and executed against one or more storage device data structures to identify one or more storage devices associated with at least one error to create the error cluster view. In another example of a cluster view a request for the storage device cluster view of a storage device may be received. A storage device query may be constructed and executed against one or more storage device data structures to create a storage device cluster view comprising path connections from the storage device to one or more nodes storage device configuration and statistical information error history and or other information associated with the storage device. In another example pre configured commands e.g. pre programmed command line commands and or pre defined orderings of output records e.g. a sorted order in which records within a cluster view may be presented may be provided for administrative convenience e.g. a pre configured command may allow an administrator to quickly retrieve a cluster view of defective storage devices that may be ordered sorted based upon a date at which such storage devices were designated as defective . At the method ends.

One embodiment of presenting a cluster view of one or more storage devices is illustrated by an exemplary method in . At the method starts. At a request for a cluster view associated with one or more storage devices within a node cluster may be received. The request may correspond to an error cluster view a storage device cluster view of a storage device a node summary cluster view and or a wide variety of other views associated with storage information from the viewpoint of the node cluster. At a query may be constructed based upon the request. It may be appreciated that in one example the query may be similar to a relational database query that allows a plethora of different queries to be constructed e.g. a first query that returns information regarding storage devices with high disk speed a second query that returns information regarding inactive storage devices with errors etc. . In one example an error query may be constructed to search storage device data structures for storage devices associated with errors. In another example a storage device cluster view query may be constructed to extract storage device information from a storage device data structure corresponding to the storage device. In another example a node summary cluster view query may be constructed to extract storage device information from one or more storage device data structures based upon various criteria e.g. a first query that returns information regarding storage devices with a high latency a second query that returns information regarding storage devices that have I O operations above a threshold value .

At the cluster view may be presented. In one example the cluster view may be presented within a command line interface. In one example the cluster view may be presented within a user interface such as a storage administration utility application. Because of the flexibility provided by executing custom constructed queries a user may filter the cluster view. For example a filter criterion may be received e.g. a user may desire to filter a node summary cluster view to storage devices with a status of inactive . The query may be reconstructed based upon the filter criterion. The reconstructed query may be executed against one or more storage device data structures to generate a new cluster view. The new cluster view may be presented e.g. the new cluster view may comprise the original results within the cluster view filtered by storage devices with a status of inactive . At the method ends.

The node query component may query nodes A Z for example in parallel for storage device reports. It may be appreciated that one example of one or more storage device reports is shown and further described in . For example node query component may receive a storage device report A from node A comprising storage device information associated with storage device 1 and 2 a storage device report B from node B comprising storage device information associated with storage device 3 a storage device report C from node C comprising storage device information associated with storage device 2 and 5 a storage device report D from node D comprising storage device information associated with storage device 4 6 and a storage device report Z from node Z comprising storage device information associated with storage device 5 and N . In this way the node query component may receive storage device reports A Z .

The data structure component may be configured to aggregate the storage device reports A Z to create storage device data structures for respective storage devices. It may be appreciated that one example of a storage device data structure is shown and further described in . In particular the data structure component may identify a storage device within a storage device report e.g. storage device 2 may be identified within storage device report A and within storage device report C in the illustrated example . A storage device data structure for the storage device may be defined based upon storage device information within the storage device report e.g. a storage device data structure 2 for storage device 2 may be populated with storage device information corresponding to I O operations between node A and storage device 2 latency between node A and storage device 2 serial number of storage device 2 etc. . If the storage device data structure is already created then supplemental information may be added into the storage device data structure non supplemental redundant information may be discarded and or conflicting information may be discarded or used to overwrite current information based upon the role or preference of the node reporting such conflicting information e.g. storage device information for storage device 2 reported by node C within storage device report C may be aggregated into the storage device data structure 2 which may already comprise storage device information populated from storage device report A . In one example the data structure component may be configured to maintain one or more storage device data structures in an ordered sequence where a storage device data structure represents an aggregate cluster view of a storage device for example. Maintaining storage device data structures in an ordered sequence may allow for queries to be constructed and or executed against one or more storage device data structures to retrieve storage device information that may be used to generate a cluster view.

The cluster view component may be configured to generate the cluster view utilizing one or more of the storage device data structures . In one example the cluster view component may query one or more storage device data structures to identify one or more storage devices associated with at least one error to create an error cluster view e.g. the error cluster view may indicate that storage device 4 has a redundancy error along single path storage device 5 has redundancy errors along one or more of the two path connections and along single paths and and storage device 6 has a redundancy error along single path . In another example the cluster view component may query one or more storage device data structures to create a node summary cluster view comprising a cluster view of storage devices and storage device connectivity within the node cluster e.g. the node summary cluster view may provide storage device information for storage device 1 2 and 3 because such storage devices match a filter criterion status active and I O operations 120 . In another example the cluster view component may query a storage device data structure associated with a storage device to create a storage device cluster view comprising path connections of the storage device storage device configuration and statistical information for the storage device error history for the storage device and or other information e.g. a storage device cluster view for storage device 5 may describe path connections and along with configuration and statistical information for storage device 5 . It may be appreciated that a variety of other cluster views may be generated such as a cluster view specifying defective storage devices and or a cluster view specifying one or more hot spare storage devices e.g. storage device s ready to take over in the event of a failure with little to no start up and or lag time .

Similarly node D may generate storage device report D comprising a list of path connections and or storage device configuration and statistical information associated with storage device 4 5 and 6 with which node D is connected. Node Z may generate storage device report Z comprising a list of path connection and or storage device configuration and statistical information associated with storage device 5 and N with which node Z is connected. In this way a data structure component may aggregate the storage device reports C D and Z to create one or more data structures e.g. a data structure for storage device 2 a data structure for storage device 4 a data structure for storage device 5 etc. . During aggregation if storage device information associated with storage device 5 conflicts then it may be appreciated that storage device information from node C within storage device report C may be preferred because node C is an ownership node of storage device 5 e.g. storage device configuration and statistical information specifies that node C is an ownership node of storage device 5 . It may be appreciated that one example of a data structure 5 for storage device 5 is shown and further described in .

In another example the node summary cluster view may provide storage device information for storage devices associated with I O operations above a predetermined threshold that have an error count above 2 e.g. find storage devices where within performance statistics table I O operations 100 and error count 2 . In this way the node summary cluster view may provide storage device information associated with frequently access storage devices that have errors. It may be appreciated that the node summary cluster view may be filtered to provide more granular results. For example the node summary cluster view of frequently accessed storage devices that have errors may additionally be filtered based upon storage devices connected to at least 4 nodes e.g. find storage devices where within performance statistics table I O operations 100 and error count 2 and connection table count 4 . Thus the original query may be restructured and executed against one or more storage device data structures to determine a new node summary cluster view.

It will be appreciated that processes architectures and or procedures described herein can be implemented in hardware firmware and or software. It will also be appreciated that the provisions set forth herein may apply to any type of special purpose computer e.g. file host storage server and or storage serving appliance and or general purpose computer including a standalone computer or portion thereof embodied as or including a storage system. Moreover the teachings herein can be configured to a variety of storage system architectures including but not limited to a network attached storage environment and or a storage area network and disk assembly directly attached to a client or host computer. Storage system should therefore be taken broadly to include such arrangements in addition to any subsystems configured to perform a storage function and associated with other equipment or systems.

In some embodiments methods described and or illustrated in this disclosure may be realized in whole or in part on computer readable media. Computer readable media can include processor executable instructions configured to implement one or more of the methods presented herein and may include any mechanism for storing this data that can be thereafter read by a computer system. Examples of computer readable media include hard drives e.g. accessible via network attached storage NAS Storage Area Networks SAN volatile and non volatile memory such as read only memory ROM random access memory RAM EEPROM and or flash memory CD ROMs CD Rs CD RWs DVDs cassettes magnetic tape magnetic disk storage optical or non optical data storage devices and or any other medium which can be used to store data.

Another embodiment which may include one or more of the variations described above involves a computer readable medium comprising processor executable instructions configured to apply one or more of the techniques presented herein. An exemplary computer readable medium that may be devised in these ways is illustrated in where the implementation comprises a computer readable medium e.g. a CD R DVD R platter of a hard disk drive flash drive etc. on which is encoded computer readable data . This computer readable data in turn comprises a set of computer instructions configured to operate according to the principles set forth herein. In one such embodiment the processor executable instructions may be configured to perform a method such as at least some of the method of and or method of for example and or at least some of a system such as at least some of the system of for example. Many such computer readable media may be devised by those of ordinary skill in the art that are configured to operate in accordance with the techniques presented herein.

Although the disclosure has been shown and described with respect to one or more implementations equivalent alterations and modifications will occur to others skilled in the art based upon a reading and understanding of this specification and the annexed drawings. The disclosure is intended to include such modifications and alterations. In particular regard to the various functions performed by the above described components e.g. elements resources etc. the terms used to describe such components are intended to correspond unless otherwise indicated to any component which performs the specified function of the described component e.g. that is functionally equivalent even though not structurally equivalent to the disclosed structure which performs the function in the herein illustrated exemplary implementations of the disclosure. Furthermore to the extent that the terms includes having has with or variants thereof are used in either the detailed description or the claims such terms are intended to be inclusive in a manner similar to the term comprising. Also exemplary means an example not the best or is intended to be inclusive not exclusive a and or an mean one or more unless specified otherwise and or clear from context to be directed to a singular form and at least one of A and B and or the like generally means A or B or both A and B.

