---

title: Systems and methods to select locations of interest based on distance from route points or route paths
abstract: Selection of offers, locations or merchants based on their distances from a portion of a user's route and their affinity for the user is disclosed. A route employed by a user for travelling to a destination is obtained and segmented at identified vertices. Locations that are proximate to the route segments are determined. The proximate locations are further analyzed to obtain their specific distances from a selected portion such as the user's origin or destination or any route segment. Location based services are associated with those proximate locations that are closest to the selected portion on the user's route or those with the better utility.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09439036&OS=09439036&RS=09439036
owner: VISA INTERNATIONAL SERVICE ASSOCIATION
number: 09439036
owner_city: San Francisco
owner_country: US
publication_date: 20140124
---
The present application claims priority to the U.S. Provisional Patent Application Ser. No. 61 756 860 filed Jan. 25 2013 and entitled Systems and Methods to Select Locations of Interest based on Distance from Route Points and U.S. Provisional Patent Application Ser. No. 61 756 858 filed Jan. 25 2013 and entitled Systems and Methods to Select Locations of Interest based on Distance from Route Paths the entire disclosures of which applications are incorporated herein by reference.

The present application relates to U.S. Non Provisional patent application Ser. No. 14 075 518 filed Nov. 8 2013 and entitled Systems and Methods for Route Prediction and U.S. Non Provisional patent application Ser. No. 14 106 018 filed Dec. 13 2013 and entitled Systems and Methods to Select Locations of Interest the entire disclosures of which applications are incorporated herein by reference.

At least some embodiments of the present disclosure relate to the selection of offers or locations based on their distance to an origin a destination or a route path of a predicted or actual route and their affinity for a user.

Millions of transactions occur daily through the use of payment cards such as credit cards debit cards prepaid cards etc. Corresponding records of the transactions are recorded in databases for settlement and financial record keeping e.g. to meet the requirements of government regulations . Such data can be mined and analyzed for trends statistics and other analyses. Sometimes such data are mined for specific advertising goals such as to provide targeted offers to account holders as described in PCT Pub. No. WO 2008 067543 A2 published on Jun. 5 2008 and entitled Techniques for Targeted Offers. 

U.S. Pat. App. Pub. No. 2009 0216579 published on Aug. 27 2009 and entitled Tracking Online Advertising using Payment Services discloses a system in which a payment service identifies the activity of a user using a payment card as corresponding with an offer associated with an online advertisement presented to the user.

U.S. Pat. No. 6 298 330 issued on Oct. 2 2001 and entitled Communicating with a Computer Based on the Offline Purchase History of a Particular Consumer discloses a system in which a targeted advertisement is delivered to a computer in response to receiving an identifier such as a cookie corresponding to the computer.

U.S. Pat. No. 7 035 855 issued on Apr. 25 2006 and entitled Process and System for Integrating Information from Disparate Databases for Purposes of Predicting Consumer Behavior discloses a system in which consumer transactional information is used for predicting consumer behavior.

U.S. Pat. No. 6 505 168 issued on Jan. 7 2003 and entitled System and Method for Gathering and Standardizing Customer Purchase Information for Target Marketing discloses a system in which categories and sub categories are used to organize purchasing information by credit cards debit cards checks and the like. The customer purchase information is used to generate customer preference information for making targeted offers.

U.S. Pat. No. 7 444 658 issued on Oct. 28 2008 and entitled Method and System to Perform Content Targeting discloses a system in which advertisements are selected to be sent to users based on a user classification performed using credit card purchasing data.

U.S. Pat. App. Pub. No. 2005 0055275 published on Mar. 10 2005 and entitled System and Method for Analyzing Marketing Efforts discloses a system that evaluates the cause and effect of advertising and marketing programs using card transaction data.

U.S. Pat. App. Pub. No. 2008 0217397 published on Sep. 11 2008 and entitled Real Time Awards Determinations discloses a system for facilitating transactions with real time awards determinations for a cardholder in which the award may be provided to the cardholder as a credit on the cardholder s statement.

Many location based services are provided via real time messaging. Loyalty programs monitor user habits and provide services in real time that are relevant to the current user context. For example when a user stops at specific location coupons or discounts related to retail locations at the user s current locale can be provided to the user in real time. However such services tend to be more reactive and are not very proactive. These services are operative only when the user is actually situated in a particular location or if it is known with great accuracy that the user will be at the particular location. They do not operate to proactively draw the user s attention or encourage the user to visit a particular location that may be close to the user s route but which the user may not intend to visit. Hence systems which monitor a current route being traversed by a user and which predict locations of interest that are along the user s current route and within a predetermined threshold distance from the user s current route need can be used to attract users to specific locations. The systems which monitor a user s current routes encourage the user to visit locations which the user did not initially intend to visit as they are configured to pick those locations that are at are proximate from the user s current route or are otherwise suited to the user s current context. In certain embodiments the user s intentions can be derived by monitoring the user s current route settings or predicting the user s route by accessing contextual information from real time or archived sources.

When the locations of interest are determined non transaction data can be used to send real time messages pertaining to the predicted locations of interest. By employing knowledge of a predicted route or a route selected for traversal by a user locations of interest to the user along the selected route can be determined and location based services targeted to such predicted locations can be advertised to the user. In an embodiment the locations of interest can be predicted by predicting the likely route of the user. In an embodiment further filtering of the locations of interest can be achieved by weighing the distances with user specific data such as a user s affinity for particular vendors or merchants or locations.

Typical shopping patterns for users show a predisposition to select merchants based on their proximity to points along a route combined with the affinity for particular offers. Various embodiments disclosed herein pertain to selecting offers and merchants along a user s route both with and without affinities attached to them. The offers or merchants can be selected based on their distances to the origin or destination of a route and the affinity. The user therefore does not have to deviate far from their current route to visit the associated locations and hence may be motivated to capitalize on the location based services.

The transaction data such as records of transactions made via credit accounts debit accounts prepaid accounts bank accounts stored value accounts and the like can be further processed to optionally provide information for various services such as reporting benchmarking advertising content or offer selection customization personalization prioritization etc. In one embodiment of improving privacy protections users are required to enroll in a service program and provide consent to allow the system to use related transaction data and or other data for the related services and the system is configured to provide the services while protecting the privacy of the users in accordance with the enrollment agreement and user consent.

For example based on the transaction data an advertising network in one embodiment is provided to present personalized or targeted advertisements offers on behalf of advertisers. A computing apparatus of or associated with the transaction handler uses the transaction data and or other data such as account data merchant data search data social networking data web data etc. to develop intelligence information about individual customers or certain types or groups of customers. The intelligence information can be used to select identify generate adjust prioritize and or personalize advertisements offers to the customers. The transaction handler may be further automated to process the advertisement fees charged to the advertisers using the accounts of the advertisers in response to the advertising activities.

For example the computing apparatus can be configured to generate trigger records for a transaction handler to identify authorization requests that satisfy the conditions specified in the trigger records identify communication references of the users associated with the identified authorization requests and use the communication references to target real time messages at the users in parallel with the transaction handler providing responses to the respective authorization requests. Details in one embodiment regarding the generation and delivery of messages in real time with the processing of transactions are provided in the section entitled REAL TIME MESSAGES. 

For example the computing apparatus can be programmable for real time interaction with users to provide messages and or offers validate fulfillment conditions and provide benefits to qualified users to fulfill the offers. In one embodiment the computing apparatus is configured to be programmed via accepting definitions of independent events and linking the events via prerequisite requirements to specify qualification conditions. The linked events form a flow or network of events and user progress in the flow or network of events is tracked. The operations for each event are performed in an atomic way to allow the user positions in the flow or network of events to be identified as being in between adjacent events in the network. As a result the programming of the real time interaction including the offer rules and messages can be easily modified during the execution of the programming. Details in one embodiment regarding the formulation and management of real time interaction are provided in the section entitled RULE FORMATION AND MANAGEMENT. 

For example the computing apparatus can be configured to allow a user to use any of a plurality of registered accounts to participate in an offer campaign such as performing transactions in the registered accounts to fulfill requirements to obtain the benefit of the offer campaign. In one embodiment the offer campaign is programmed by offer rules that identify the real time interactions with the user in response to the actions of the user such as transactions made using any of the registered accounts of the user. The offer campaign for the user is driven at least in part by the actions of the user such as the transactions made by the user. In one embodiment transactions in the registered accounts of the user jointly advances the offer campaign for the user and a milestone achieved in the offer campaign using one account of the user is recognized as a milestone achieved by the user with respect to the multiple registered accounts. Thus the offer campaign for the user can be advanced by the user via different accounts as if the registered accounts were a same account and the user is not limited to using a particular account to participate in the offer campaign nor using different accounts to drive the offer campaign separately as if the accounts were assigned to different users. Details in one embodiment regarding the configuration of real time interactions using multiple accounts of a user are provided in the section entitled MULTIPLE ACCOUNTS. 

In one embodiment the computing apparatus is configured to target the same offer differently to users based on the media channels used to deliver the offer. An offer can be configured to include first qualification conditions formulated based on triggering events such as the current location of a user the current transaction of the user as being processed by a transaction handler and second qualification conditions not based on such triggering events. To users reachable via a first set of media channels the first qualification conditions are ignored in selecting candidate users for the delivery of the offer and the candidate users are selected based on the second qualification conditions. If the offer has not be delivered to a user via the first set of media channels the computing apparatus is configured to deliver the offer to the user via a second set of media channels when the user satisfies both the first qualification conditions and the second qualification conditions. Details in one embodiment are provided in the section entitled MULTIPLE MEDIA CHANNELS. 

In one embodiment a system and method is configured to allow an offer campaign to be specified based on requirements of transactions with multiple merchants. Details in one embodiment are provided in the section entitled MULTIPLE MERCHANTS. 

In one embodiment the computing apparatus correlates transactions with activities that occurred outside the context of the transaction such as online advertisements presented to the customers that at least in part cause offline transactions. The correlation data can be used to demonstrate the success of the advertisements and or to improve intelligence information about how individual customers and or various types or groups of customers respond to the advertisements.

In one embodiment the computing apparatus correlates or provides information to facilitate the correlation of transactions with online activities of the customers such as searching web browsing social networking and consuming advertisements with other activities such as watching television programs and or with events such as meetings announcements natural disasters accidents news announcements etc.

In one embodiment the correlation results are used in predictive models to predict transactions and or spending patterns based on activities or events to predict activities or events based on transactions or spending patterns to provide alerts or reports etc.

In one embodiment a single entity operating the transaction handler performs various operations in the services provided based on the transaction data. For example in the presentation of the personalized or targeted advertisements the single entity may perform the operations such as generating the intelligence information selecting relevant intelligence information for a given audience selecting identifying adjusting prioritizing personalizing and or generating advertisements based on selected relevant intelligence information and facilitating the delivery of personalized or targeted advertisements etc. Alternatively the entity operating the transaction handler cooperates with one or more other entities by providing information to these entities to allow these entities to perform at least some of the operations for presentation of the personalized or targeted advertisements.

In the system further includes a correlator to correlate user specific advertisement data with transactions resulting from the user specific advertisement data . The correlation results can be used by the profile generator to improve the transaction profiles .

The transaction profiles of one embodiment are generated from the transaction data in a way as illustrated in . For example in an aggregated spending profile is generated via the factor analysis and cluster analysis to summarize the spending patterns behaviors reflected in the transaction records .

In one embodiment a data warehouse as illustrated in is coupled with the transaction handler to store the transaction data and other data such as account data transaction profiles and correlation results . In a portal is coupled with the data warehouse to provide data or information derived from the transaction data in response to a query request from a third party or as an alert or notification message.

In the transaction handler is coupled between an issuer processor in control of a consumer account and an acquirer processor in control of a merchant account . An account identification device is configured to carry the account information that identifies the consumer account with the issuer processor and provide the account information to the transaction terminal of a merchant to initiate a transaction between the user and the merchant.

In one embodiment the transaction data relates to financial transactions processed by the transaction handler and the account data relates to information about the account holders involved in the transactions. Further data such as merchant data that relates to the location business products and or services of the merchants that receive payments from account holders for their purchases can be used in the generation of the transaction profiles .

In one embodiment the financial transactions are made via an account identification device such as financial transaction cards e.g. credit cards debit cards banking cards etc. the financial transaction cards may be embodied in various devices such as plastic cards chips radio frequency identification RFID devices mobile phones personal digital assistants PDAs etc. and the financial transaction cards may be represented by account identifiers e.g. account numbers or aliases . In one embodiment the financial transactions are made via directly using the account information without physically presenting the account identification device .

In one embodiment the transaction handler couples with a centralized data warehouse organized around the transaction data . For example the centralized data warehouse may include and or support the determination of spend band distribution transaction count and amount merchant categories merchant by state cardholder segmentation by velocity scores and spending within merchant target competitive set and cross section. For example the centralized data warehouse may include the advertisement data and or offers of benefits such as discount reward points cashback etc. The offers can be communicated to the users e.g. via the advertisement data or as part of the advertisement data .

In one embodiment the centralized data warehouse provides centralized management but allows decentralized execution. For example a third party strategic marketing analyst statistician marketer promoter business leader etc. may access the centralized data warehouse to analyze customer and shopper data to provide follow up analyses of customer contributions to develop propensity models for increased conversion of marketing campaigns to develop segmentation models for marketing etc. The centralized data warehouse can be used to manage advertisement campaigns and analyze response profitability.

In one embodiment the centralized data warehouse includes merchant data e.g. data about sellers customer business data e.g. data about buyers and transaction records between sellers and buyers over time. The centralized data warehouse can be used to support corporate sales forecasting fraud analysis reporting sales customer relationship management CRM business intelligence credit risk prediction and analysis advanced authorization reporting merchant benchmarking business intelligence for small business rewards etc.

In one embodiment the transaction data is combined with external data such as surveys benchmarks search engine statistics demographics competition information emails etc. to flag key events and data values to set customer merchant data or event triggers and to drive new transactions and new customer contacts.

In the profile generator generates transaction profiles based on the transaction data the account data and or other data such as non transactional data wish lists merchant provided information address information information from social network websites information from credit bureaus information from search engines and other examples discussed in U.S. patent application Ser. No. 12 614 603 filed Nov. 9 2009 assigned U.S. Pat. App. Pub. No. 2011 0054981 and entitled Analyzing Local Non Transactional Data with Transactional Data in Predictive Models the disclosure of which is hereby incorporated herein by reference.

In one embodiment the transaction profiles provide intelligence information on the behavior pattern preference propensity tendency frequency trend and budget of the user in making purchases. In one embodiment the transaction profiles include information about what the user owns such as points miles or other rewards currency available credit and received offers such as coupons loaded into the accounts of the user . In one embodiment the transaction profiles include information based on past offer coupon redemption patterns. In one embodiment the transaction profiles include information on shopping patterns in retail stores as well as online including frequency of shopping amount spent in each shopping trip distance of merchant location retail from the address of the account holder s etc.

In one embodiment the transaction handler and or the portal is configured to provide at least part of the intelligence for the prioritization generation selection customization and or adjustment of the advertisement for delivery within a transaction process involving the transaction handler . For example the advertisement may be presented to a customer in response to the customer making a payment via the transaction handler .

Some of the transaction profiles are specific to the user or to an account of the user or to a group of users of which the user is a member such as a household family company neighborhood city or group identified by certain characteristics related to online activities offline purchase activities merchant propensity etc.

The profile generator may generate and update the transaction profiles in batch mode periodically or generates the transaction profiles in real time or just in time in response to a request received in the portal for such profiles.

The transaction profiles of one embodiment include the values for a set of parameters. Computing the values of the parameters may involve counting transactions that meet one or more criteria and or building a statistically based model in which one or more calculated values or transformed values are put into a statistical algorithm that weights each value to optimize its collective predictiveness for various predetermined purposes.

Further details and examples about the transaction profiles in one embodiment are provided in the section entitled AGGREGATED SPENDING PROFILE. 

In one embodiment the transaction data is analyzed in connection with non transactional data to generate transaction profiles and or to make predictive models.

In one embodiment transactions are correlated with non transactional events such as news conferences shows announcements market changes natural disasters etc. to establish cause and effect relations to predict future transactions or spending patterns. For example non transactional data may include the geographic location of a news event the date of an event from an events calendar the name of a performer for an upcoming concert etc. The non transactional data can be obtained from various sources such as newspapers websites blogs social networking sites etc.

When the cause and effect relationships between the transactions and non transactional events are known e.g. based on prior research results domain knowledge expertise the relationships can be used in predictive models to predict future transactions or spending patterns based on events that occurred recently or are happening in real time.

In one embodiment the non transactional data relates to events that happened in a geographical area local to the user that performed the respective transactions. In one embodiment a geographical area is local to the user when the distance from the user to locations in the geographical area is within a convenient range for daily or regular travel such as 20 50 or 100 miles from an address of the user or within the same city or zip code area of an address of the user . Examples of analyses of local non transactional data in connection with transaction data in one embodiment are provided in U.S. patent application Ser. No. 12 614 603 filed Nov. 9 2009 assigned U.S. Pat. App. Pub. No. 2011 0054981 and entitled Analyzing Local Non Transactional Data with Transactional Data in Predictive Models the disclosure of which is hereby incorporated herein by reference.

In one embodiment the non transactional data is not limited to local non transactional data. For example national non transactional data can also be used.

In one embodiment the transaction records are analyzed in frequency domain to identify periodic features in spending events. The periodic features in the past transaction records can be used to predict the probability of a time window in which a similar transaction would occur. For example the analysis of the transaction data can be used to predict when a next transaction having the periodic feature would occur with which merchant the probability of a repeated transaction with a certain amount the probability of exception the opportunity to provide an advertisement or offer such as a coupon etc. In one embodiment the periodic features are detected through counting the number of occurrences of pairs of transactions that occurred within a set of predetermined time intervals and separating the transaction pairs based on the time intervals. Some examples and techniques for the prediction of future transactions based on the detection of periodic features in one embodiment are provided in U.S. patent application Ser. No. 12 773 770 filed May 4 2010 assigned U.S. Pat. App. Pub. No. 2010 0280882 and entitled Frequency Based Transaction Prediction and Processing the disclosure of which is hereby incorporated herein by reference.

Techniques and details of predictive modeling in one embodiment are provided in U.S. Pat. Nos. 6 119 103 6 018 723 6 658 393 6 598 030 and 7 227 950 the disclosures of which are hereby incorporated herein by reference.

In one embodiment offers are based on the point of service to offeree distance to allow the user to obtain in person services. In one embodiment the offers are selected based on transaction history and shopping patterns in the transaction data and or the distance between the user and the merchant. In one embodiment offers are provided in response to a request from the user or in response to a detection of the location of the user . Examples and details of at least one embodiment are provided in U.S. patent application Ser. No. 11 767 218 filed Jun. 22 2007 assigned U.S. Pat. App. Pub. No. 2008 0319843 and entitled Supply of Requested Offer Based on Point of Service to Offeree Distance U.S. patent application Ser. No. 11 755 575 filed May 30 2007 assigned U.S. Pat. App. Pub. No. 2008 0300973 and entitled Supply of Requested Offer Based on Offeree Transaction History U.S. patent application Ser. No. 11 855 042 filed Sep. 13 2007 assigned U.S. Pat. App. Pub. No. 2009 0076896 and entitled Merchant Supplied Offer to a Consumer within a Predetermined Distance U.S. patent application Ser. No. 11 855 069 filed Sep. 13 2007 assigned U.S. Pat. App. Pub. No. 2009 0076925 and entitled Offeree Requested Offer Based on Point of Service to Offeree Distance and U.S. patent application Ser. No. 12 428 302 filed Apr. 22 2009 assigned U.S. Pat. App. Pub. No. 2010 0274627 and entitled Receiving an Announcement Triggered by Location Data the disclosures of which applications are hereby incorporated herein by reference.

In an advertisement selector prioritizes generates selects adjusts and or customizes the available advertisement data to provide user specific advertisement data based at least in part on the user specific profile . The advertisement selector uses the user specific profile as a filter and or a set of criteria to generate identify select and or prioritize advertisement data for the user . A media controller delivers the user specific advertisement data to the point of interaction for presentation to the user as the targeted and or personalized advertisement.

In one embodiment the user data includes the characterization of the context at the point of interaction . Thus the use of the user specific profile selected using the user data includes the consideration of the context at the point of interaction in selecting the user specific advertisement data .

In one embodiment in selecting the user specific advertisement data the advertisement selector uses not only the user specific profile but also information regarding the context at the point of interaction . For example in one embodiment the user data includes information regarding the context at the point of interaction and the advertisement selector explicitly uses the context information in the generation or selection of the user specific advertisement data .

In one embodiment the advertisement selector may query for specific information regarding the user before providing the user specific advertisement data . The queries may be communicated to the operator of the transaction handler and in particular to the transaction handler or the profile generator . For example the queries from the advertisement selector may be transmitted and received in accordance with an application programming interface or other query interface of the transaction handler the profile generator or the portal of the transaction handler .

In one embodiment the queries communicated from the advertisement selector may request intelligence information regarding the user at any level of specificity e.g. segment level individual level . For example the queries may include a request for a certain field or type of information in a cardholder s aggregate spending profile . As another example the queries may include a request for the spending level of the user in a certain merchant category over a prior time period e.g. six months .

In one embodiment the advertisement selector is operated by an entity that is separate from the entity that operates the transaction handler . For example the advertisement selector may be operated by a search engine a publisher an advertiser an ad network or an online merchant. The user specific profile is provided to the advertisement selector to assist the customization of the user specific advertisement data .

In one embodiment advertising is targeted based on shopping patterns in a merchant category e.g. as represented by a Merchant Category Code MCC that has high correlation of spending propensity with other merchant categories e.g. other MCCs . For example in the context of a first MCC for a targeted audience a profile identifying second MCCs that have high correlation of spending propensity with the first MCC can be used to select advertisements for the targeted audience.

In one embodiment the aggregated spending profile is used to provide intelligence information about the spending patterns preferences and or trends of the user . For example a predictive model can be established based on the aggregated spending profile to estimate the needs of the user . For example the factor values and or the cluster ID in the aggregated spending profile can be used to determine the spending preferences of the user . For example the channel distribution in the aggregated spending profile can be used to provide a customized offer targeted for a particular channel based on the spending patterns of the user .

In one embodiment mobile advertisements such as offers and coupons are generated and disseminated based on aspects of prior purchases such as timing location and nature of the purchases etc. In one embodiment the size of the benefit of the offer or coupon is based on purchase volume or spending amount of the prior purchase and or the subsequent purchase that may qualify for the redemption of the offer. Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 11 960 162 filed Dec. 19 2007 assigned U.S. Pat. App. Pub. No. 2008 0201226 and entitled Mobile Coupon Method and Portable Consumer Device for Utilizing Same the disclosure of which is hereby incorporated herein by reference.

In one embodiment conditional rewards are provided to the user and the transaction handler monitors the transactions of the user to identify redeemable rewards that have satisfied the respective conditions. In one embodiment the conditional rewards are selected based on transaction data . Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 11 862 487 filed Sep. 27 2007 assigned U.S. Pat. App. Pub. No. 2008 0082418 and entitled Consumer Specific Conditional Rewards the disclosure of which is hereby incorporated herein by reference. The techniques to detect the satisfied conditions of conditional rewards can also be used to detect the transactions that satisfy the conditions specified to locate the transactions that result from online activities such as online advertisements searches etc. to correlate the transactions with the respective online activities.

Further details about targeted offer delivery in one embodiment are provided in U.S. patent application Ser. No. 12 185 332 filed Aug. 4 2008 assigned U.S. Pat. App. Pub. No. 2010 0030644 and entitled Targeted Advertising by Payment Processor History of Cashless Acquired Merchant Transaction on Issued Consumer Account and in U.S. patent application Ser. No. 12 849 793 filed Aug. 3 2010 assigned U.S. Pat. App. Pub. No. 2011 0035280 and entitled Systems and Methods for Targeted Advertisement Delivery the disclosures of which applications are hereby incorporated herein by reference.

In the user tracker obtains and generates context information about the user at the point of interaction including user data that characterizes and or identifies the user . The profile selector selects a user specific profile from the set of transaction profiles generated by the profile generator based on matching the characteristics of the transaction profiles and the characteristics of the user data . For example the user data indicates a set of characteristics of the user and the profile selector selects the user specific profile that is for a particular user or a group of users and that best matches the set of characteristics specified by the user data .

In one embodiment the profile selector receives the transaction profiles in a batch mode. The profile selector selects the user specific profile from the batch of transaction profiles based on the user data . Alternatively the profile generator generates the transaction profiles in real time and the profile selector uses the user data to query the profile generator to generate the user specific profile in real time or just in time. The profile generator generates the user specific profile that best matches the user data .

In one embodiment the user tracker identifies the user based on the user activity on the transaction terminal e.g. having visited a set of websites currently visiting a type of web pages search behavior etc. .

In one embodiment the user data includes an identifier of the user such as a global unique identifier GUID a personal account number PAN e.g. credit card number debit card number or other card account number or other identifiers that uniquely and persistently identify the user within a set of identifiers of the same type. Alternatively the user data may include other identifiers such as an Internet Protocol IP address of the user a name or user name of the user or a browser cookie ID which identify the user in a local temporary transient and or anonymous manner. Some of these identifiers of the user may be provided by publishers advertisers ad networks search engines merchants or the user tracker . In one embodiment such identifiers are correlated to the user based on the overlapping or proximity of the time period of their usage to establish an identification reference table.

In one embodiment the identification reference table is used to identify the account information e.g. account number based on characteristics of the user captured in the user data such as browser cookie ID IP addresses and or timestamps on the usage of the IP addresses. In one embodiment the identification reference table is maintained by the operator of the transaction handler . Alternatively the identification reference table is maintained by an entity other than the operator of the transaction handler .

In one embodiment the user tracker determines certain characteristics of the user to describe a type or group of users of which the user is a member. The transaction profile of the group is used as the user specific profile . Examples of such characteristics include geographical location or neighborhood types of online activities specific online activities or merchant propensity. In one embodiment the groups are defined based on aggregate information e.g. by time of day or household or segment e.g. by cluster propensity demographics cluster IDs and or factor values . In one embodiment the groups are defined in part via one or more social networks. For example a group may be defined based on social distances to one or more users on a social network website interactions between users on a social network website and or common data in social network profiles of the users in the social network website.

In one embodiment the user data may match different profiles at a different granularity or resolution e.g. account user family company neighborhood etc. with different degrees of certainty. The profile selector and or the profile generator may determine or select the user specific profile with the finest granularity or resolution with acceptable certainty. Thus the user specific profile is most specific or closely related to the user .

In one embodiment the advertisement selector uses further data in prioritizing selecting generating customizing and adjusting the user specific advertisement data . For example the advertisement selector may use search data in combination with the user specific profile to provide benefits or offers to a user at the point of interaction . For example the user specific profile can be used to personalize the advertisement such as adjusting the placement of the advertisement relative to other advertisements adjusting the appearance of the advertisement etc.

In one embodiment the user data uses browser cookie information to identify the user . The browser cookie information is matched to account information or the account number to identify the user specific profile such as aggregated spending profile to present effective timely and relevant marketing information to the user via the preferred communication channel e.g. mobile communications web mail email POS etc. within a window of time that could influence the spending behavior of the user . Based on the transaction data the user specific profile can improve audience targeting for online advertising. Thus customers will get better advertisements and offers presented to them and the advertisers will achieve better return on investment for their advertisement campaigns.

In one embodiment the browser cookie that identifies the user in online activities such as web browsing online searching and using social networking applications can be matched to an identifier of the user in account data such as the account number of a financial payment card of the user or the account information of the account identification device of the user . In one embodiment the identifier of the user can be uniquely identified via matching IP address timestamp cookie ID and or other user data observed by the user tracker .

In one embodiment a look up table is used to map browser cookie information e.g. IP address timestamp cookie ID to the account data that identifies the user in the transaction handler . The look up table may be established via correlating overlapping or common portions of the user data observed by different entities or different user trackers .

In one embodiment the portal is configured to identify the consumer account based on the IP address identified in the user data through mapping the IP address to a street address.

In one embodiment the portal uses a plurality of methods to identify consumer accounts based on the user data . The portal combines the results from the different methods to determine the most likely consumer account for the user data .

Details about the identification of consumer account based on user data in one embodiment are provided in U.S. patent application Ser. No. 12 849 798 filed Aug. 3 2010 assigned U.S. Pat. App. Pub. No. 2011 0093327 and entitled Systems and Methods to Match Identifiers the disclosure of which is hereby incorporated herein by reference.

In one embodiment the correlator is used to close the loop for the tracking of consumer behavior across an on line activity and an off line activity that results at least in part from the on line activity. In one embodiment online activities such as searching web browsing social networking and or consuming online advertisements are correlated with respective transactions to generate the correlation result in . The respective transactions may occur offline in brick and mortar retail stores or online but in a context outside the online activities such as a credit card purchase that is performed in a way not visible to a search company that facilitates the search activities.

The correlator is configured in one embodiment to identify transactions resulting from searches or online advertisements. For example in response to a query about the user from the user tracker the correlator identifies an offline transaction performed by the user and sends the correlation result about the offline transaction to the user tracker which allows the user tracker to combine the information about the offline transaction and the online activities to provide significant marketing advantages.

For example a marketing department could correlate an advertising budget to actual sales. For example a marketer can use the correlation result to study the effect of certain prioritization strategies customization schemes etc. on the impact on the actual sales. For example the correlation result can be used to adjust or prioritize advertisement placement on a web site a search engine a social networking site an online marketplace or the like.

In one embodiment the profile generator uses the correlation result to augment the transaction profiles with data indicating the rate of conversion from searches or advertisements to purchase transactions. In one embodiment the correlation result is used to generate predictive models to determine what a user is likely to purchase when the user is searching using certain keywords or when the user is presented with an advertisement or offer. In one embodiment the portal is configured to report the correlation result to a partner such as a search engine a publisher or a merchant to allow the partner to use the correlation result to measure the effectiveness of advertisements and or search result customization to arrange rewards etc.

In one embodiment the correlator matches the online activities and the transactions based on matching the user data provided by the user tracker and the records of the transactions such as transaction data or transaction records . In another embodiment the correlator matches the online activities and the transactions based on the redemption of offers benefits provided in the user specific advertisement data .

In one embodiment the portal is configured to receive a set of conditions and an identification of the user determine whether there is any transaction of the user that satisfies the set of conditions and if so provide indications of the transactions that satisfy the conditions and or certain details about the transactions which allows the requester to correlate the transactions with certain user activities such as searching web browsing consuming advertisements etc.

In one embodiment the requester may not know the account number of the user and the portal is to map the identifier provided in the request to the account number of the user to provide the requested information. Examples of the identifier being provided in the request to identify the user include an identification of an iFrame of a web page visited by the user a browser cookie ID an IP address and the day and time corresponding to the use of the IP address etc.

The information provided by the portal can be used in pre purchase marketing activities such as customizing content or offers prioritizing content or offers selecting content or offers etc. based on the spending pattern of the user . The content that is customized prioritized selected or recommended may be the search results blog entries items for sale etc.

The information provided by the portal can be used in post purchase activities. For example the information can be used to correlate an offline purchase with online activities. For example the information can be used to determine purchases made in response to media events such as television programs advertisements news announcements etc.

Details about profile delivery online activity to offline purchase tracking techniques to identify the user specific profile based on user data such as IP addresses and targeted delivery of advertisement offer benefit in some embodiments are provided in U.S. patent application Ser. No. 12 849 789 filed Aug. 3 2010 assigned U.S. Pat. App. Pub. No. 2011 0035278 and entitled Systems and Methods for Closing the Loop between Online Activities and Offline Purchases the disclosure of which application is incorporated herein by reference.

In one embodiment the transaction handler uses the account data to store information for third party loyalty programs.

In one embodiment the association between the account identifier and the loyalty benefit offeror in the account data indicates that the user having the account identifier is a member of the loyalty program. Thus the user may use the account identifier to access privileges afforded to the members of the loyalty programs such as rights to access a member only area facility store product or service discounts extended only to members or opportunities to participate in certain events buy certain items or receive certain services reserved for members.

In one embodiment it is not necessary to make a purchase to use the privileges. The user may enjoy the privileges based on the status of being a member of the loyalty program. The user may use the account identifier to show the status of being a member of the loyalty program.

For example the user may provide the account identifier e.g. the account number of a credit card to the transaction terminal to initiate an authorization process for a special transaction which is designed to check the member status of the user as if the account identifier were used to initiate an authorization process for a payment transaction. The special transaction is designed to verify the member status of the user via checking whether the account data is associated with the loyalty benefit offeror . If the account identifier is associated with the corresponding loyalty benefit offeror the transaction handler provides an approval indication in the authorization process to indicate that the user is a member of the loyalty program. The approval indication can be used as a form of identification to allow the user to access member privileges such as access to services products opportunities facilities discounts permissions which are reserved for members.

In one embodiment when the account identifier is used to identify the user as a member to access member privileges the transaction handler stores information about the access of the corresponding member privilege in loyalty record . The profile generator may use the information accumulated in the loyalty record to enhance transaction profiles and provide the user with personalized targeted advertisements with or without further offers of benefit e.g. discounts incentives rebates cash back rewards etc. .

In one embodiment the association of the account identifier and the loyalty benefit offeror also allows the loyalty benefit offeror to access at least a portion of the account data relevant to the loyalty program such as the loyalty record and certain information about the user such as name address and other demographic data.

In one embodiment the loyalty program allows the user to accumulate benefits according to loyalty program rules such as reward points cash back levels of discounts etc. For example the user may accumulate reward points for transactions that satisfy the loyalty program rules and the user may use the reward points to redeem cash gift discounts etc. In one embodiment the loyalty record stores the accumulated benefits and the transaction handler updates the loyalty record associated with the loyalty benefit offeror and the account identifier when events that satisfy the loyalty program rules occur.

In one embodiment the accumulated benefits as indicated in the loyalty record can be redeemed when the account identifier is used to perform a payment transaction when the payment transaction satisfies the loyalty program rules. For example the user may redeem a number of points to offset or reduce an amount of the purchase price.

In one embodiment when the user uses the account identifier to make purchases as a member the merchant may further provide information about the purchases and the transaction handler can store the information about the purchases as part of the loyalty record . The information about the purchases may identify specific items or services purchased by the member. For example the merchant may provide the transaction handler with purchase details at stock keeping unit SKU level which are then stored as part of the loyalty record . The loyalty benefit offeror may use the purchase details to study the purchase behavior of the user and the profile generator may use the SKU level purchase details to enhance the transaction profiles .

In one embodiment the SKU level purchase details are requested from the merchants or retailers via authorization responses when the account of the user is enrolled in a loyalty program that allows the transaction handler and or the issuer processor to collect the purchase details.

A method to provide loyalty programs of one embodiment includes the use of the transaction handler as part of a computing apparatus. The computing apparatus processes a plurality of payment card transactions. After the computing apparatus receives a request to track transactions for a loyalty program such as the loyalty program rules the computing apparatus stores and updates loyalty program information in response to transactions occurring in the loyalty program. The computing apparatus provides to a customer e.g. an offer of a benefit when the customer satisfies a condition defined in the loyalty program such as the loyalty program rules . In one embodiment the loyalty benefit as identified in the loyalty record can be redeemed in connection with a transaction in a way the benefit of an offer stored in association with the account identifier is redeemed.

Examples of loyalty programs through collaboration between collaborative constituents in a payment processing system including the transaction handler in one embodiment are provided in U.S. patent application Ser. No. 11 767 202 filed Jun. 22 2007 assigned U.S. Pat. App. Pub. No. 2008 0059302 and entitled Loyalty Program Service U.S. patent application Ser. No. 11 848 112 filed Aug. 30 2007 assigned U.S. Pat. App. Pub. No. 2008 0059306 and entitled Loyalty Program Incentive Determination and U.S. patent application Ser. No. 11 848 179 filed Aug. 30 2007 assigned U.S. Pat. App. Pub. No. 2008 0059307 and entitled Loyalty Program Parameter Collaboration the disclosures of which applications are hereby incorporated herein by reference.

Examples of processing the redemption of accumulated loyalty benefits via the transaction handler in one embodiment are provided in U.S. patent application Ser. No. 11 835 100 filed Aug. 7 2007 assigned U.S. Pat. App. Pub. No. 2008 0059303 and entitled Transaction Evaluation for Providing Rewards the disclosure of which is hereby incorporated herein by reference.

In one embodiment the incentive reward or benefit provided in the loyalty program is based on the presence of correlated related transactions. For example in one embodiment an incentive is provided if a financial payment card is used in a reservation system to make a reservation and the financial payment card is subsequently used to pay for the reserved good or service. Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 11 945 907 filed Nov. 27 2007 assigned U.S. Pat. App. Pub. No. 2008 0071587 and entitled Incentive Wireless Communication Reservation the disclosure of which is hereby incorporated herein by reference.

In one embodiment the transaction handler provides centralized loyalty program management reporting and membership services. In one embodiment membership data is downloaded from the transaction handler to acceptance point devices such as the transaction terminal . In one embodiment loyalty transactions are reported from the acceptance point devices to the transaction handler and the data indicating the loyalty points rewards benefits etc. are stored on the account identification device . Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 10 401 504 filed Mar. 27 2003 assigned U.S. Pat. App. Pub. No. 2004 0054581 and entitled Network Centric Loyalty System the disclosure of which is hereby incorporated herein by reference.

In one embodiment the portal of the transaction handler is used to manage reward or loyalty programs for entities such as issuers merchants etc. The cardholders such as the user are rewarded with offers benefits from merchants. The portal and or the transaction handler track the transaction records for the merchants for the reward or loyalty programs. Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 11 688 423 filed Mar. 20 2007 assigned U.S. Pat. App. Pub. No. 2008 0195473 and entitled Reward Program Manager the disclosure of which is hereby incorporated herein by reference.

In one embodiment a loyalty program includes multiple entities providing access to detailed transaction data which allows the flexibility for the customization of the loyalty program. For example issuers or merchants may sponsor the loyalty program to provide rewards and the portal and or the transaction handler stores the loyalty currency in the data warehouse . Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 12 177 530 filed Jul. 22 2008 assigned U.S. Pat. App. Pub. No. 2009 0030793 and entitled Multi Vender Multi Loyalty Currency Program the disclosure of which is hereby incorporated herein by reference.

In one embodiment an incentive program is created on the portal of the transaction handler . The portal collects offers from a plurality of merchants and stores the offers in the data warehouse . The offers may have associated criteria for their distributions. The portal and or the transaction handler may recommend offers based on the transaction data . In one embodiment the transaction handler automatically applies the benefits of the offers during the processing of the transactions when the transactions satisfy the conditions associated with the offers. In one embodiment the transaction handler communicates with transaction terminals to set up customize and or update offers based on market focus product categories service categories targeted consumer demographics etc. Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 12 413 097 filed Mar. 27 2009 assigned U.S. Pat. App. Pub. No. 2010 0049620 and entitled Merchant Device Support of an Integrated Offer Network the disclosure of which is hereby incorporated herein by reference.

In one embodiment the transaction handler is configured to provide offers from merchants to the user via the payment system making accessing and redeeming the offers convenient for the user . The offers may be triggered by and or tailored to a previous transaction and may be valid only for a limited period of time starting from the date of the previous transaction. If the transaction handler determines that a subsequent transaction processed by the transaction handler meets the conditions for the redemption of an offer the transaction handler may credit the consumer account for the redemption of the offer and or provide a notification message to the user . Further details and examples of one embodiment are provided in U.S. patent application Ser. No. 12 566 350 filed Sep. 24 2009 assigned U.S. Pat. App. Pub. No. 2010 0114686 and entitled Real Time Statement Credits and Notifications the disclosure of which is hereby incorporated herein by reference.

Details on loyalty programs in one embodiment are provided in U.S. patent application Ser. No. 12 896 632 filed Oct. 1 2010 assigned U.S. Pat. App. Pub. No. 2011 0087530 and entitled Systems and Methods to Provide Loyalty Programs the disclosure of which is hereby incorporated herein by reference.

In one embodiment merchants generate stock keeping unit SKU or other specific information that identifies the particular goods and services purchased by the user or customer. The SKU information may be provided to the operator of the transaction handler that processed the purchases. The operator of the transaction handler may store the SKU information as part of transaction data and reflect the SKU information for a particular transaction in a transaction profile or associated with the person involved in the transaction.

When a user shops at a traditional retail store or browses a website of an online merchant an SKU level profile associated specifically with the user may be provided to select an advertisement appropriately targeted to the user e.g. via mobile phones POS terminals web browsers etc. . The SKU level profile for the user may include an identification of the goods and services historically purchased by the user . In addition the SKU level profile for the user may identify goods and services that the user may purchase in the future. The identification may be based on historical purchases reflected in SKU level profiles of other individuals or groups that are determined to be similar to the user . Accordingly the return on investment for advertisers and merchants can be greatly improved.

In one embodiment the user specific profile is an aggregated spending profile that is generated using the SKU level information. For example in one embodiment the factor values correspond to factor definitions that are generated based on aggregating spending in different categories of products and or services. A typical merchant offers products and or services in many different categories.

In one embodiment the SKU level purchase details are requested from the merchants or retailers via authorization responses when the account of the user is enrolled in a program that allows the transaction handler and or the issuer processor to collect the purchase details. Based on the SKU information and perhaps other transaction data the profile generator may create an SKU level transaction profile for the user . In one embodiment based on the SKU information associated with the transactions for each person entering into transactions with the operator of the transaction handler the profile generator may create an SKU level transaction profile for each person.

Details on SKU level profile in one embodiment are provided in U.S. patent application Ser. No. 12 899 144 filed Oct. 6 2010 assigned U.S. Pat. App. Pub. No. 2011 0093335 and entitled Systems and Methods for Advertising Services Based on an SKU Level Profile the disclosure of which is hereby incorporated herein by reference.

In one embodiment the transaction handler is configured to cooperate with the media controller to facilitate real time interaction with the user when the payment of the user is being processed by the transaction handler . The real time interaction provides the opportunity to impact the user experience during the purchase e.g. at the time of card swipe through delivering messages in real time to a point of interaction such as a mobile phone a personal digital assistant a portable computer etc. The real time message can be delivered via short message service SMS email instant messaging or other communications protocols.

In one embodiment the real time message is provided without requiring modifications to existing systems used by the merchants and or issuers.

In one embodiment the media controller is to provide the message to the point of interaction in parallel with the transaction handler providing the response to the authorization request.

In one embodiment the point of interaction receives the message from the media controller in real time with the transaction handler processing the authorization request. In one embodiment the message is to arrive at the point of interaction in the context of the response provided from the transaction handler to the transaction terminal . For example the message is to arrive at the point of interaction substantially at the same time as the response to the authorization request arrives at the transaction terminal or with a delay not long enough to cause the user to have the impression that the message is in response to an action other that the payment transaction. For example the message is to arrive at the point of interaction prior to the user completing the transaction and leaving the transaction terminal or prior to the user leaving the retail location of the merchant operating the transaction terminal .

For example in one embodiment the portal allows the user to register the communication reference in association with the account data such as the account information of the consumer account and the media controller is to use the communication reference to deliver the message to the point of interaction . Examples of the communication reference includes a mobile phone number an email address a user identifier of an instant messaging system an IP address etc.

In one embodiment the portal allows merchants and or other parties to define rules to provide offers as real time responses to authorization requests and based on the offer rules the message broker is to generate or instruct the media controller to generate the real time message to provide the offers to the user . For example the offer may include a discount an incentive a reward a rebate a gift or other benefit which can be redeemed upon the satisfaction of certain conditions required by the offer rules . In one embodiment based on the offer rules the message broker configures a message by selecting the appropriate message template from an existing message s template s and inserts any relevant data e.g. the communication reference into the selected template then passes the configured message to the media controller which delivers the message to the point of interaction . In one embodiment the message broker or a subsystem is used to manage message templates along with the rules for selecting the appropriate message template from among several potential choices.

In one embodiment the offer rules include offer details targeting rules advertisement campaign details profile mapping creative mapping qualification rules award notify fulfillment rules approvals etc. Creative elements for offers include text images channels approvals etc.

In one embodiment when the offer rules are activated by the merchant or advertiser via the portal the message broker is to generate trigger records for the transaction handler . The transaction handler is to monitor the incoming authorization requests to identify requests that satisfy the conditions specified in the trigger records during the process of the authorization requests and to provide the information about the identified requests to the message broker for the transmission of an appropriate real time message in accordance with the offer rules .

In one embodiment the generation of the trigger records for the transaction handler is in real time with the merchant or advertiser activating the offer rules . Thus the offer rules can be activated and used for the detection of the new authorization requests in real time while the transaction handler continues to process the incoming authorization requests.

In one embodiment the portal provides information about the spending behaviors reflected in the transaction data to assist the merchants or advertisers to target offers or advertisements. For example in one embodiment the portal allows merchants to target the offers based on transaction profiles . For example the offer rules are partially based on the values in a transaction profile such as an aggregated spending profile . In one embodiment the offer rules are partially based on the information about the last purchase of the user from the merchant operating the transaction terminal or another merchant and or the information about the location of the user such as the location determined based on the location of the transaction terminal and or the location of the merchant operating the transaction terminal .

In one embodiment the portal provides transaction based statistics such as merchant benchmarking statistics industry market segmentation etc. to assist merchants and advertisers to identify customers.

Thus the real time messages can be used to influence customer behaviors while the customers are in the purchase mode.

In one embodiment the benefit of the offers can be redeemed via the transaction handler . The redemption of the offer may or may not require the purchase details e.g. SKU level purchase details . Details in one embodiment about redeeming offers via the transaction handler are provided in Prov. U.S. Pat. App. Ser. No. 61 347 797 filed May 24 2010 and entitled Systems and Methods for Redemption of Offers the disclosure of which is hereby incorporated herein by reference.

In one embodiment when the authorization request for a purchase indicates that the purchase qualifies the offer for redemption if the purchase corresponding to the authorization request is completed the message broker is to construct a message and use the media controller to deliver the message in real time with the processing of the authorization request to the point of interaction . The message informs the user that when the purchase is completed the transaction handler and or the issuer processor is to provide the benefit of the offer to the user via statement credit or some other settlement value for example points in a registered loyalty program or credit at the point of sale using a digital coupon delivered to the purchaser via cell phone.

In one embodiment the settlement of the payment transaction corresponding to the authorization request does not occur in real time with the processing of the authorization request. For example the merchant may submit the complete purchases for settlement at the end of the day or in accordance with a predetermined schedule. The settlement may occur one or more days after the processing of the authorization request.

In one embodiment when transactions are settled the settled transactions are matched to the authorization requests to identify offers that are redeemable in view of the settlement. When the offer is confirmed to be redeemable based on a record of successful settlement the message broker is to use the media controller to provide a message to the point of interaction of the user such as the mobile phone of the user . In one embodiment the message is to inform the user of the benefit to be provided as statement credits and or to provide additional offers. In one embodiment the message to confirm the statement credits is transmitted in real time with the completion of the transaction settlement.

In one embodiment the message broker is to determine the identity of the merchant based on the information included in the authorization request transmitted from the transaction terminal to the transaction handler . In one embodiment the identity of the merchant is normalized to allow the application of the offer rules that are merchant specific.

In one embodiment the portal is to provide data insight to merchants and or advertisers. For example the portal can provide the transaction profile of the user audience segmentation information etc.

In one embodiment the portal is to allow the merchants and or advertisers to define and manage offers for their creation fulfillment and or delivery in messages.

In one embodiment the portal allows the merchants and or advertisers to test run and or monitor the offers for their creation fulfillment and or delivery in messages.

In one embodiment the portal provides operation facilities such as onboarding contact management certification file management workflow etc. to assist the merchants and or advertisers to complete the tasks related to the offers .

In one embodiment the portal allows the user to opt in or opt out of the real time message delivery service.

In one embodiment an advertiser or merchant can select an offer fulfillment method from a list of options such as statement credits points gift cards e certificates third party fulfillment etc.

In one embodiment the merchant or advertiser is to use the off the rack transaction profiles available in the data warehouse . In one embodiment the merchant or advertiser can further edit parameters to customize the generation of the transaction profiles and or develop custom transaction profiles from scratch using the portal .

In one embodiment the portal provides a visualization tool to allow the user to see clusters of data based on GeoCodes proximity transaction volumes spending patterns zip codes customers stores etc.

In one embodiment the portal allows the merchant or advertiser to define cells for targeting the customers in the cells based on date time profile attributes map to offer channel creative condition testing etc.

In one embodiment the portal allows the merchant or advertiser to monitor the system health such as the condition of servers files received or sent errors status etc. the throughput by date or range by program by campaign or by global view and aspects of current programs offers campaigns such as offer details package audit reports etc. In one embodiment reporting includes analytics and metrics such as lift conversion category differentials e.g. spending patterns transaction volumes peer groups and reporting by program campaign cell GeoCode proximity ad hoc auditing etc.

In one embodiment the computing apparatus includes at least one of a transaction handler a message broker a media controller a portal and a data warehouse.

In an embodiment the location provider obtains the information regarding a route selected for traversal by the user from the route provider . In an embodiment the route provider can comprise any equipment that provides GPS data of the user such as a GPS device or a smartphone or a device which includes an IP address that may be mapped to the user s location. Accordingly a route selected for traversal by the user is obtained by the location provider which in conjunction with data from the user specific profile can predict the likely locations that are of interest to the user along the selected route and within a predetermined distance from the selected route . In an embodiment the locations of interest can comprise retail outlets entertainment establishments or other locations where the user is likely to spend time. Consequently real time messages associated with such locations of interest can be provided to the user by the portal in accordance with embodiments that will be described in further detail herein. This facilitates the portal to provide location based services such as real time messages related to deals coupons or other alerts to the user that are tailored to the user s interests.

The current location information collected by the location information receiver is provided to a route dictionary builder that builds and updates a database or a dictionary of a user s routes wherein each route is coded into a collection of identifiers such as letters which form a term or a word in the route dictionary . In an embodiment the contents of the route dictionary are accessed by the route prediction generator to predict a route that is likely to be traveled by the user . This is facilitated by employing language processing techniques to analyze contents of the route dictionary for the route prediction . In an embodiment context data which can also be recorded in the route dictionary can be employed for the route prediction . In an embodiment context data from external sources not shown in conjunction with the route dictionary contents can also be employed for making route prediction. The route selected by the route prediction generator is provided to a route information transmitter which transmits the route prediction to a requestor. In an embodiment the requestor can be the portal which is configured to provide location based services. In an embodiment the requestor can be a third party requestor such as a merchant or another intermediate entity that logs request for the route prediction.

The selected route information collected by the route information receiver is provided to a route analyzer which analyzes the selected route in accordance with embodiments described herein. The results of the selected route analysis are transmitted to a locations of interest predictor which is also comprised in the location provider . The locations of interest predictor can additionally receive profile information of the user from the portal and generates predictions or determines locations of interest to the user along the user s selected route .

In an embodiment the profile information of the user comprises the affinity values of the user for various merchants vendors products and or locations. In this embodiment a computing apparatus can perform cluster analysis in accordance with techniques know in the art to identify a plurality of standardized clusters corresponding to an area of products or services based on transactions processed by the transaction handler. In an embodiment each of the plurality of standardized clusters corresponds to a cluster of account holders such as user that have similar spending patterns. Thus a set of affinity values can be computed for the user based on transaction data of the user to indicate closeness or predilection of the user to the set of standardized clusters. For example if the user buys a lot of electronics the affinity value of the consumer for the electronics cluster and for a cluster of other users who have similar buying patterns is high. By the way of illustration and not limitation the affinity values can be represented in as a range from 0 representing least affinity to 1 representing high affinity in accordance with an embodiment.

In an embodiment the locations of interest can be determined based not only on their distances from the route but also based on the user affinity values . In accordance with embodiments described further herein the distances of locations along the route can be further weighed with the user affinity values to derive particular utility values associated with each of the locations of interest which utility values can be employed to further filter or grade the locations of interest and thereby promote particular offers via real time messaging to the user .

The locations information transmitter receives the information regarding the locations that are likely to be of interest to the user along the selected route from the locations of interest predictor and transmits the received information to the portal to aid the portal in providing appropriate location based services to the user .

The weighted radius wvvin accordance with this embodiment is the hypotenuse of a right triangle with sides a Irs 2 and b route threshold which is 1 inch for the values shown in .

Accordingly route segment between the starting point and the vertex vis divided into sub segments rsand rs. Similarly the route segment between vertices vand vis divided into rsand rsin addition to including part of the sub segment rs the route segment between vertices vand vcomprises the remainder of the sub segment r s rsand rs. Similarly other segments between the vertices vand v vand v vand the ending location or the destination are respectively divided into sub segments rs rs rs rs rs rs rs rs rsand rs as shown in

In an embodiment the method of determining the distances of the candidate locations I Iand Ito the selected route commences with identifying the route vertices that are nearest to one of the candidate locations I Iand I. Route vertices vand vare closest to the location I. Knowing the distances of the route vertices vand vto the location I and using the law of sines law of cosines it can be determined that the route vertices vand vform an oblique triangle with the location I. Accordingly the route vertices vand vcan form one of the two oblique triangles and with the location I. In this embodiment the perpendicular distance d between a reference point R on the selected route that and the convenience store I and a point on the selected route that is closest to the location I can be considered as the distance of the convenience store from the selected route .

Similarly it can be identified that route vertices vand vwhich are closest to the location Iand the triangle formed by the three points v vand Iis a non oblique triangle . Therefore two right triangles and can be created and solved for the nearest side to obtain the shortest distance of the gas station location Ifrom the selected route . Based on various other criteria that may be defined in the portal for example user preferences comprised in the user specific profile either one of or both the locations Iand Ican be selected for providing location based services.

At the affinity values determined at are compared. If it is concluded at that the user has equal affinity for all the locations for which the affinity values are obtained then locations that are proximate to the selected point or within a certain predefined threshold distance from the selected point are chosen at . For example all the locations within a certain threshold distance can be selected at in an embodiment. In an embodiment the locations can be ranked in an ascending order of their distances to the selected point and the top N locations N being a natural number can be selected at as locations that are proximate to the selected point and presented to the user at . In an embodiment location based services are associated with the locations merchants that are presented to the user at .

If at it is determined that different locations have different affinities for the user a utility for each location is obtained at by weighing the affinities of each of the locations with the distance of the locations from the selected point. By the way of a non limiting embodiment utility can be calculated as a product of the affinity with an inverse of the distance obtained at . At the locations are ranked by their utility for example in a descending order of their respective utilities and the location with highest utility is selected for presentation the user at in accordance with an embodiment. In another embodiment the top N locations N being a natural number with the highest utility values are selected for presentation to the user so that the user may further choose any of the presented offers locations.

Based on context information as set forth above two locations I valero 1 and I valero 2 are identified for further promotion to the user . In an embodiment if both the locations Iand Ihave equal affinity for the user the location Iwhich is closer to the origin Iis presented to the user if the user is between the origin Iand a route mid point as described supra. In an embodiment if both the locations Iand Ihave equal affinity for the user the location Iwhich is closer to the destination Iis presented to the user if the user is past the a route mid point and is closer to the destination I.

In an embodiment if both the locations have different affinities the utility values are estimated for each location by weighing the affinities with the respective distances of the locations I valero 1 and I valero 2 from a selected point. Following describes a non limiting embodiment of calculating utility values for locations having unequal affinities for the user . For example the first location I valero 1 has an affinity of 0.5 and I valero 2 has an affinity of 0.7 indicating that the user initially has greater affinity for I valero 2 . Based on the map following are the utility values when calculated as a product of the affinity with the inverse of the respective distances of the locations Iand Ifrom the selected point which in this case is the origin I Utility for valero 1 1 1.4 Km 0.5 aff 0.357 utility Utility for valero 2 1 2.1 Km 0.7 aff 0.333 utility.

As the utility for location I valero 1 is higher it is selected for presentation to the user even though the affinity of the user for this location is lower than the affinity for location I valero 2 . It may be appreciated that the details of the utility value calculations are shown only by the way of illustration and that the affinity can be weighed with any function that increases as the distance decreases.

At the affinity values determined at for different locations offers or merchants are compared. If it is determined at that the user has equal affinity for all the locations for which the affinity values were obtained then locations that are proximate to the route are chosen at . In an embodiment the locations within a predefined threshold distance of their respective route segments can be selected at as being proximate to the route . In an embodiment the locations can be ranked in an ascending order of their distances to their respective route segments so that the top N locations N being a natural number can be selected at and presented to the user at . In an embodiment location based services are associated with the locations merchants that are presented to the user at .

If at it is determined that different locations have different affinities for the user a utility for each location is obtained at by weighing the affinities of each of the locations with the distance of the locations from their respective route segments. By the way of a non limiting embodiment utility of a location can be calculated as a product of its affinity with an inverse of the distance obtained at . At the locations are ranked for example in a descending order of their respective utilities and the location s with highest utility is selected for presentation the user at in accordance with an embodiment. In another embodiment the top N locations N being a natural number with the highest utility values are selected for presentation to the user so that the user may further choose any of the presented offers locations.

In an embodiment the locations I Iand Ihave different affinities and hence the selection of location s for presentation to the user is based on their utility values. In an embodiment the utility values are estimated for each location by weighing the affinities with the respective distances of the locations I Iand Ifrom the route segment rs . Following describes a non limiting embodiment of calculating utility values for locations having unequal affinities for the user . For example the user has an affinity of 0.25 for Arco brand and an affinity of 1.0 for Valero brand. Based on the map following are the utility values when calculated as a product of the affinity with the inverse of the respective distances of the locations I Iand Ifrom the route segment rs Utility for valero 1 0.2 Km 1 affinity 5 utility Utility for valero 2 0.3 Km 1 affinity 3.33 utility and Utility for arcol 0.1 Km 0.25 affinity 2.5 utility.

As the utility for location I valero 1 is highest compared to other locations Iand I location I valero 1 is selected for presentation to the user even when the location Iis closest to the route segment rs . It may be appreciated that the details of the utility value calculations are shown only by the way of illustration and that the affinity can be weighed with any function that increases as the distance decreases for the estimation of the utility.

In the computing apparatus is configured to identify the authorization request of a transaction according to the trigger record and determine whether the transaction if completed satisfies the conditions required for the qualification of a benefit of the offer in accordance with the offer rules .

If the transaction satisfies the benefit qualification conditions in accordance with the offer rules of the offer the computing apparatus is configured to transmit to a communication reference associated with the account identifier e.g. account data account information or account number a message to identify the qualification. The computing apparatus is configured to further generate a trigger record for the transaction handler to identify a settlement request for the transaction. If the transaction is settled the computing apparatus is configured to provide the benefit of the offer to a consumer account identified by the account identifier e.g. account data account information or account number via statement credit. In one embodiment the statement credit is provided as part of the settlement operations of the transaction.

In one embodiment a computer implemented method includes storing in a computing apparatus having a transaction handler a plurality of trigger records processing by the transaction handler an authorization request received from an acquirer processor where the authorization request is processed for a payment to be made by an issuer processor on behalf of a user having an account identifier e.g. account data account information or account number associated with the issuer processor and the acquirer processor is configured to receive the payment on behalf of a merchant operating the transaction terminal .

In one embodiment the method further includes determining by the transaction handler whether the authorization request matches one of the plurality of trigger records by determining whether the attributes of the transaction associated with the authorization request satisfies the conditions specified in one of the plurality of trigger records .

In one embodiment if the authorization request matches a trigger record in the plurality of the trigger records the computing apparatus is configured to identify a communication reference of the user in accordance with the trigger record generate a message regarding a benefit to be provided to the user upon the completion of the payment and transmit the message to the user via the communication reference in real time with the processing of the authorization request . In one embodiment the communication reference is one of a phone number and an email address and the message is transmitted via at least one of short message service and email.

In one embodiment the message is transmitted to a mobile phone of the user via the communication reference .

In one embodiment the message is transmitted to the user via a communication channel separate from a communication channel used to provide a response to the authorization request .

In one embodiment the method further includes the computing apparatus identifying an offer based on transaction data of the user and the message is configured to provide the offer .

In one embodiment the computing apparatus includes the portal configured to receive offer rules from a merchant for the offer and the offer is identified for delivery in the real time message based further on the offer rules .

In one embodiment the offer is identified in real time with the processing of the authorization request or in response to a determination that the authorization request matches the trigger record .

In one embodiment the offer is identified based on a profile e.g. or of the user . In one embodiment the profile e.g. or summarizes the transaction data of the user . In one embodiment the computing apparatus includes the profile generator configured to generate the profile e.g. from the transaction data of the user via a cluster analysis and a factor analysis as described in the section entitled AGGREGATED SPENDING PROFILE. 

In one embodiment the message indicates that a transaction for which the authorization request is processed is eligible for the benefit of an offer associated with the account identifier e.g. account data of the user when the transaction is eventually completed and settled.

In one embodiment the offer is stored in the data warehouse in association with the account identifier e.g. account data and the trigger record identifies the offer to allow the message broker to further check whether the transaction meets the benefit redemption conditions of the offer .

In one embodiment the computer apparatus is configured to determine whether the payment if completed entitles the user to the benefit of the offer in response to a determination that the authorization request matches the trigger record and the message is transmitted to the user via the communication reference in response to an indication of the approval of the authorization request and after a determination is made that the payment if completed entitles the user to the benefit of the offer .

In one embodiment the transaction handler is configured to identify a settled transaction corresponding to the authorization request that triggers the message and then provide the benefit of the offer to the user via statement credits or loyalty program points after the settled transaction is identified.

In one embodiment the transaction handler is configured to provide the benefit of the offer to the user via point of sale credit using digital coupons transmitted to cellular telephone of the user during the processing of the payment at the transaction terminal .

In one embodiment the transaction handler is configured to process a settlement request for the payment and provide the benefit of the offer to the user via statement credit to a consumer account corresponding to the account identifier e.g. account data in response to the completion of the settlement of the payment or as part of the settlement of the payment.

In one embodiment the computing apparatus is configured to generate a second trigger record for the transaction handler to monitor the settlement of the payment in order to provide a benefit in response to the settlement of the payment or as part of the settlement of the payment.

In one embodiment the computing apparatus includes a data warehouse configured to store a plurality of trigger records a transaction handler coupled with the data warehouse and configured to process an authorization request received from an acquirer processor and a message broker coupled with the transaction handler such that after the transaction handler determines that the authorization request matches a trigger record in the plurality of the trigger records the message broker identifies a communication reference of the user in accordance with the trigger record and generates a message regarding a benefit to be provided to the user upon completion of the payment. The computing apparatus further includes a media controller coupled with the message broker to transmit the message to the user via the communication reference in real time with the transaction handler processing the authorization request .

Details about the system in one embodiment are provided in the section entitled CENTRALIZED DATA WAREHOUSE and HARDWARE. 

In one embodiment at least some of the profile generator correlator profile selector and advertisement selector are controlled by the entity that operates the transaction handler . In another embodiment at least some of the profile generator correlator profile selector and advertisement selector are not controlled by the entity that operates the transaction handler .

In one embodiment the products and or services purchased by the user are also identified by the information transmitted from the merchants or service providers. Thus the transaction data may include identification of the individual products and or services which allows the profile generator to generate transaction profiles with fine granularity or resolution. In one embodiment the granularity or resolution may be at a level of distinct products and services that can be purchased e.g. stock keeping unit SKU level or category or type of products or services or vendor of products or services etc.

In one embodiment the entity operating the transaction handler provides the intelligence information in real time as the request for the intelligence information occurs. In other embodiments the entity operating the transaction handler may provide the intelligence information in batch mode. The intelligence information can be delivered via online communications e.g. via an application programming interface API on a website or other information server or via physical transportation of a computer readable media that stores the data representing the intelligence information.

In one embodiment the intelligence information is communicated to various entities in the system in a way similar to and or in parallel with the information flow in the transaction system to move money. The transaction handler routes the information in the same way it routes the currency involved in the transactions.

In one embodiment the portal provides a user interface to allow the user to select items offered on different merchant websites and store the selected items in a wish list for comparison reviewing purchasing tracking etc. The information collected via the wish list can be used to improve the transaction profiles and derive intelligence on the needs of the user and targeted advertisements can be delivered to the user via the wish list user interface provided by the portal . Examples of user interface systems to manage wish lists are provided in U.S. patent application Ser. No. 12 683 802 filed Jan. 7 2010 assigned U.S. Pat. App. Pub. No. 2010 0174623 and entitled System and Method for Managing Items of Interest Selected from Online Merchants the disclosure of which is hereby incorporated herein by reference.

In one embodiment the characteristics of transaction patterns of customers are profiled via clusters factors and or categories of purchases. The transaction data may include transaction records and in one embodiment an aggregated spending profile is generated from the transaction records in a way illustrated in to summarize the spending behavior reflected in the transaction records .

In each of the transaction records is for a particular transaction processed by the transaction handler . Each of the transaction records provides information about the particular transaction such as the account number of the consumer account used to pay for the purchase the date and or time of the transaction the amount of the transaction the ID of the merchant who receives the payment the category of the merchant the channel through which the purchase was made etc. Examples of channels include online offline in store via phone etc. In one embodiment the transaction records may further include a field to identify a type of transaction such as card present card not present etc.

A card present transaction typically involves physically presenting the account identification device such as a financial transaction card to the merchant e.g. via swiping a credit card at a POS terminal of a merchant and a card not present transaction typically involves presenting the account information of the consumer account to the merchant to identify the consumer account without physically presenting the account identification device to the merchant or the transaction terminal .

The transaction records of one embodiment may further include details about the products and or services involved in the purchase.

When there is voluminous data representing the transaction records the spending patterns reflected in the transaction records can be difficult to recognize by an ordinary person.

In the voluminous transaction records are summarized into aggregated spending profiles e.g. to concisely present the statistical spending characteristics reflected in the transaction records . The aggregated spending profile uses values derived from statistical analysis to present the statistical characteristics of transaction records of an entity in a way easy to understand by an ordinary person.

In the transaction records are summarized via factor analysis to condense the variables e.g. and via cluster analysis to segregate entities by spending patterns.

In a set of variables e.g. are defined based on the parameters recorded in the transaction records . The variables e.g. and are defined in a way to have meanings easily understood by an ordinary person. For example variables measure the aggregated spending in super categories variables measure the spending frequencies in various areas and variables measure the spending amounts in various areas. In one embodiment each of the areas is identified by a merchant category e.g. as represented by a merchant category code MCC a North American Industry Classification System NAICS code or a similarly standardized category code . In other embodiments an area may be identified by a product category a SKU number etc.

Examples of the spending frequency variables and spending amount variables defined for various merchant categories e.g. in one embodiment are provided in U.S. patent application Ser. No. 12 537 566 filed Aug. 7 2009 assigned U.S. Pat. App. Pub. No. 2010 0306029 and entitled Cardholder Clusters and in U.S. patent application Ser. No. 12 777 173 filed May 10 2010 assigned U.S. Pat. App. Pub. No. 2010 0306032 and entitled Systems and Methods to Summarize Transaction Data the disclosures of which applications are hereby incorporated herein by reference.

In the aggregation includes the application of the definitions for these variables e.g. and to the transaction records to generate the variable values . The transaction records are aggregated to generate aggregated measurements e.g. variable values that are not specific to a particular transaction such as frequencies of purchases made with different merchants or different groups of merchants the amounts spent with different merchants or different groups of merchants and the number of unique purchases across different merchants or different groups of merchants etc. The aggregation can be performed for a particular time period and for entities at various levels.

The transaction records can be aggregated according to a buying entity or a selling entity. For example the aggregation can be performed at account level person level family level company level neighborhood level city level region level etc. to analyze the spending patterns across various areas e.g. sellers products or services for the respective aggregated buying entity. For example the transaction records for a particular merchant having transactions with multiple accounts can be aggregated for a merchant level analysis. For example the transaction records for a particular merchant group can be aggregated for a merchant group level analysis. The aggregation can be formed separately for different types of transactions such as transactions made online offline via phone and or card present transactions vs. card not present transactions which can be used to identify the spending pattern differences among different types of transactions.

In the variable values e.g. . . . associated with an entity ID are considered the random samples of the respective variables e.g. sampled for the instance of an entity represented by the entity ID . Statistical analyses e.g. factor analysis and cluster analysis are performed to identify the patterns and correlations in the random samples.

Once the cluster definitions are obtained from the cluster analysis the identity of the cluster e.g. cluster ID that contains the entity ID can be used to characterize spending behavior of the entity represented by the entity ID . The entities in the same cluster are considered to have similar spending behaviors.

In the random variables e.g. and as defined by the definitions have certain degrees of correlation and are not independent from each other. For example merchants of different merchant categories e.g. may have overlapping business or have certain business relationships. For example certain products and or services of certain merchants have cause and effect relationships. For example certain products and or services of certain merchants are mutually exclusive to a certain degree e.g. a purchase from one merchant may have a level of probability to exclude the user from making a purchase from another merchant . Such relationships may be complex and difficult to quantify by merely inspecting the categories. Further such relationships may shift over time as the economy changes.

In a factor analysis is performed to reduce the redundancy and or correlation among the variables e.g. . The factor analysis identifies the definitions for factors each of which represents a combination of the variables e.g. . A factor from the factor analysis is a linear combination of a plurality of the aggregated measurements e.g. variables determined for various areas e.g. merchants or merchant categories products or product categories . Once the relationship between the factors and the aggregated measurements is determined via factor analysis the values for the factors can be determined from the linear combinations of the aggregated measurements and be used in a transaction profile or to provide information on the behavior of the entity represented by the entity ID e.g. an account an individual a family .

Once the factor definitions are obtained from the factor analysis the factor definitions can be applied to the variable values to determine factor values for the aggregated spending profile . Since redundancy and correlation are reduced in the factors the number of factors is typically much smaller than the number of the original variables e.g. . Thus the factor values represent the concise summary of the original variables e.g. .

For example there may be thousands of variables on spending frequency and amount for different merchant categories and the factor analysis can reduce the factor number to less than one hundred and even less than twenty . In one example a twelve factor solution is obtained which allows the use of twelve factors to combine the thousands of the original variables and thus the spending behavior in thousands of merchant categories can be summarized via twelve factor values . In one embodiment each factor is combination of at least four variables and a typical variable has contributions to more than one factor.

In an aggregated spending profile for an entity represented by an entity ID e.g. includes the cluster ID and factor values determined based on the cluster definitions and the factor definitions . The aggregated spending profile may further include other statistical parameters such as diversity index channel distribution category distribution zip code etc. as further discussed below.

In general an aggregated spending profile may include more or fewer fields than those illustrated in . For example in one embodiment the aggregated spending profile further includes an aggregated spending amount for a period of time e.g. the past twelve months in another embodiment the aggregated spending profile does not include the category distribution and in a further embodiment the aggregated spending profile may include a set of distance measures to the centroids of the clusters.

In data from related accounts are combined recurrent installment transactions are combined and account data are selected according to a set of criteria related to activity consistency diversity etc.

In the computation models e.g. as represented by the variable definitions are applied to the remaining account data e.g. transaction records to obtain data samples for the variables. The data points associated with the entities other than those whose transactions fail to meet the minimum requirements for activity consistency diversity etc. are used in factor analysis and cluster analysis .

In the data samples e.g. variable values are used to perform factor analysis to identify factor solutions e.g. factor definitions . The factor solutions can be adjusted to improve similarity in factor values of different sets of transaction data .

The data samples can also be used to perform cluster analysis to identify cluster solutions e.g. cluster definitions . The cluster solutions can be adjusted to improve similarity in cluster identifications based on different sets of transaction data . For example cluster definitions can be applied to the transactions in the time period under analysis e.g. the past twelve months and be applied separately to the transactions in a prior time period e.g. the twelve months before the past twelve months to obtain two sets of cluster identifications for various entities. The cluster definitions can be adjusted to improve the correlation between the two set of cluster identifications.

Optionally human understandable characteristics of the factors and clusters are identified to name the factors and clusters. For example when the spending behavior of a cluster appears to be the behavior of an internet loyalist the cluster can be named internet loyalist such that if a cardholder is found to be in the internet loyalist cluster the spending preferences and patterns of the cardholder can be easily perceived.

In one embodiment the factor analysis and the cluster analysis are performed periodically e.g. once a year or six months to update the factor definitions and the cluster definitions which may change as the economy and the society change over time.

In transaction data are summarized using the factor solutions and cluster solutions to generate the aggregated spending profile . The aggregated spending profile can be updated more frequently than the factor solutions and cluster solutions when the new transaction data becomes available. For example the aggregated spending profile may be updated quarterly or monthly.

Details about aggregated spending profile in one embodiment are provided in U.S. patent application Ser. No. 12 777 173 filed May 10 2010 assigned U.S. Pat. App. Pub. No. 2010 0306032 and entitled Systems and Methods to Summarize Transaction Data the disclosure of which is hereby incorporated herein by reference.

In one embodiment a set of profiles are generated from the transaction data for a plurality of geographical regions such as mutually exclusive non overlapping regions defined by postal codes. Transactions of account holders residing in the regions are aggregated according to merchant categories for the respective regions and subsequently normalized to obtain preference indicators that reveal the spending preferences of the account holders in the respective regions. Each of the profiles for respective regions is based on a plurality of different account holders and or households to avoid revealing private information about individual account holders or families. Further the profiles are constructed in a way to make it impossible to reverse calculate the transaction amounts. Further details and examples about profiles constructed for regions in one embodiment are provided in U.S. patent application Ser. No. 13 675 301 filed Nov. 13 2012 and entitled Systems and Methods to Summarize Transaction data the disclosure of which is hereby incorporated herein by reference.

In the transaction handler is coupled between an issuer processor and an acquirer processor to facilitate authorization and settlement of transactions between a consumer account and a merchant account . The transaction handler records the transactions in the data warehouse . The portal is coupled to the data warehouse to provide information based on the transaction records such as the transaction profiles aggregated spending profile offer redemption notification etc. The portal may be implemented as a web portal a telephone gateway a file data server etc.

In the transaction terminal initiates the transaction for a user e.g. a customer for processing by a transaction handler . The transaction handler processes the transaction and stores transaction data about the transaction in connection with account data such as the account profile of an account of the user . The account data may further include data about the user collected from issuers or merchants and or other sources such as social networks credit bureaus merchant provided information address information etc. In one embodiment a transaction may be initiated by a server e.g. based on a stored schedule for recurrent payments .

The accumulated transaction data and the corresponding account data are used to generate intelligence information about the purchase behavior pattern preference tendency frequency trend amount and or propensity of the users e.g. as individuals or as a member of a group. The intelligence information can then be used to generate identify and or select targeted advertisements for presentation to the user on the point of interaction during a transaction after a transaction or when other opportunities arise.

In the consumer account is under the control of the issuer processor . The consumer account may be owned by an individual or an organization such as a business a school etc. The consumer account may be a credit account a debit account or a stored value account. The issuer may provide the consumer e.g. user an account identification device to identify the consumer account using the account information . The respective consumer of the account can be called an account holder or a cardholder even when the consumer is not physically issued a card or the account identification device in one embodiment. The issuer processor is to charge the consumer account to pay for purchases.

The account identification device of one embodiment is a plastic card having a magnetic strip storing account information identifying the consumer account and or the issuer processor . Alternatively the account identification device is a smartcard having an integrated circuit chip storing at least the account information . The account identification device may optionally include a mobile phone having an integrated smartcard.

The account information may be printed or embossed on the account identification device . The account information may be printed as a bar code to allow the transaction terminal to read the information via an optical scanner. The account information may be stored in a memory of the account identification device and configured to be read via wireless contactless communications such as near field communications via magnetic field coupling infrared communications or radio frequency communications. Alternatively the transaction terminal may require contact with the account identification device to read the account information e.g. by reading the magnetic strip of a card with a magnetic strip reader .

The transaction terminal is configured to transmit an authorization request message to the acquirer processor . The authorization request includes the account information an amount of payment and information about the merchant e.g. an indication of the merchant account . The acquirer processor requests the transaction handler to process the authorization request based on the account information received in the transaction terminal . The transaction handler routes the authorization request to the issuer processor and may process and respond to the authorization request when the issuer processor is not available. The issuer processor determines whether to authorize the transaction based at least in part on a balance of the consumer account .

The transaction handler the issuer processor and the acquirer processor may each include a subsystem to identify the risk in the transaction and may reject the transaction based on the risk assessment.

The account identification device may include security features to prevent unauthorized uses of the consumer account such as a logo to show the authenticity of the account identification device encryption to protect the account information etc.

The transaction terminal of one embodiment is configured to interact with the account identification device to obtain the account information that identifies the consumer account and or the issuer processor . The transaction terminal communicates with the acquirer processor that controls the merchant account of a merchant. The transaction terminal may communicate with the acquirer processor via a data communication connection such as a telephone connection an Internet connection etc. The acquirer processor is to collect payments into the merchant account on behalf of the merchant.

In one embodiment the transaction terminal is a POS terminal at a traditional offline brick and mortar retail store. In another embodiment the transaction terminal is an online server that receives account information of the consumer account from the user through a web connection. In one embodiment the user may provide account information through a telephone call via verbal communications with a representative of the merchant and the representative enters the account information into the transaction terminal to initiate the transaction.

In one embodiment the account information can be entered directly into the transaction terminal to make payment from the consumer account without having to physically present the account identification device . When a transaction is initiated without physically presenting an account identification device the transaction is classified as a card not present CNP transaction.

In general the issuer processor may control more than one consumer account the acquirer processor may control more than one merchant account and the transaction handler is connected between a plurality of issuer processors e.g. and a plurality of acquirer processors e.g. . An entity e.g. bank may operate both an issuer processor and an acquirer processor .

In one embodiment the transaction handler the issuer processor the acquirer processor the transaction terminal the portal and other devices and or services accessing the portal are connected via communications networks such as local area networks cellular telecommunications networks wireless wide area networks wireless local area networks an intranet and Internet. Dedicated communication channels may be used between the transaction handler and the issuer processor between the transaction handler and the acquirer processor and or between the portal and the transaction handler .

In the transaction handler uses the data warehouse to store the records about the transactions such as the transaction records or transaction data .

Typically the transaction handler is implemented using a powerful computer or cluster of computers functioning as a unit controlled by instructions stored on a computer readable medium. The transaction handler is configured to support and deliver authorization services exception file services and clearing and settlement services. The transaction handler has a subsystem to process authorization requests and another subsystem to perform clearing and settlement services. The transaction handler is configured to process different types of transactions such credit card transactions debit card transactions prepaid card transactions and other types of commercial transactions. The transaction handler interconnects the issuer processors e.g. and the acquirer processor e.g. to facilitate payment communications.

In the transaction terminal is configured to submit the authorized transactions to the acquirer processor for settlement. The amount for the settlement may be different from the amount specified in the authorization request. The transaction handler is coupled between the issuer processor and the acquirer processor to facilitate the clearing and settling of the transaction. Clearing includes the exchange of financial information between the issuer processor and the acquirer processor and settlement includes the exchange of funds.

In the issuer processor is configured to provide funds to make payments on behalf of the consumer account . The acquirer processor is to receive the funds on behalf of the merchant account . The issuer processor and the acquirer processor communicate with the transaction handler to coordinate the transfer of funds for the transaction. The funds can be transferred electronically.

The transaction terminal may submit a transaction directly for settlement without having to separately submit an authorization request.

In one embodiment the portal provides a user interface to allow the user to organize the transactions in one or more consumer accounts of the user with one or more issuers. The user may organize the transactions using information and or categories identified in the transaction records such as merchant category transaction date amount etc. Examples and techniques in one embodiment are provided in U.S. patent application Ser. No. 11 378 215 filed Mar. 16 2006 assigned U.S. Pat. App. Pub. No. 2007 0055597 and entitled Method and System for Manipulating Purchase Information the disclosure of which is hereby incorporated herein by reference.

In one embodiment the portal provides transaction based statistics such as indicators for retail spending monitoring indicators for merchant benchmarking industry market segmentation indicators of spending patterns etc. Further examples can be found in U.S. patent application Ser. No. 12 191 796 filed Aug. 14 2008 assigned U.S. Pat. App. Pub. No. 2009 0048884 and entitled Merchant Benchmarking Tool U.S. patent application Ser. No. 12 940 562 filed Nov. 5 2010 and U.S. patent application Ser. No. 12 940 664 filed Nov. 5 2010 the disclosures of which applications are hereby incorporated herein by reference.

In one embodiment the transaction terminal includes a memory coupled to the processor which controls the operations of a reader an input device an output device and a network interface . The memory may store instructions for the processor and or data such as an identification that is associated with the merchant account .

In one embodiment the reader includes a magnetic strip reader. In another embodiment the reader includes a contactless reader such as a radio frequency identification RFID reader a near field communications NFC device configured to read data via magnetic field coupling in accordance with ISO standard 14443 NFC a Bluetooth transceiver a WiFi transceiver an infrared transceiver a laser scanner etc.

In one embodiment the input device includes key buttons that can be used to enter the account information directly into the transaction terminal without the physical presence of the account identification device . The input device can be configured to provide further information to initiate a transaction such as a personal identification number PIN password zip code etc. that may be used to access the account identification device or in combination with the account information obtained from the account identification device .

In one embodiment the output device may include a display a speaker and or a printer to present information such as the result of an authorization request a receipt for the transaction an advertisement etc.

In one embodiment the network interface is configured to communicate with the acquirer processor via a telephone connection an Internet connection or a dedicated data communication channel.

In one embodiment the instructions stored in the memory are configured at least to cause the transaction terminal to send an authorization request message to the acquirer processor to initiate a transaction. The transaction terminal may or may not send a separate request for the clearing and settling of the transaction. The instructions stored in the memory are also configured to cause the transaction terminal to perform other types of functions discussed in this description.

In one embodiment a transaction terminal may have fewer components than those illustrated in . For example in one embodiment the transaction terminal is configured for card not present transactions and the transaction terminal does not have a reader .

In one embodiment a transaction terminal may have more components than those illustrated in . For example in one embodiment the transaction terminal is an ATM machine which includes components to dispense cash under certain conditions.

In one embodiment the account identification device includes a memory coupled to the processor which controls the operations of a communication device an input device an audio device and a display device . The memory may store instructions for the processor and or data such as the account information associated with the consumer account .

In one embodiment the account information includes an identifier identifying the issuer and thus the issuer processor among a plurality of issuers and an identifier identifying the consumer account among a plurality of consumer accounts controlled by the issuer processor . The account information may include an expiration date of the account identification device the name of the consumer holding the consumer account and or an identifier identifying the account identification device among a plurality of account identification devices associated with the consumer account .

In one embodiment the account information may further include a loyalty program account number accumulated rewards of the consumer in the loyalty program an address of the consumer a balance of the consumer account transit information e.g. a subway or train pass access information e.g. access badges and or consumer information e.g. name date of birth etc.

In one embodiment the memory includes a nonvolatile memory such as magnetic strip a memory chip a flash memory a Read Only Memory ROM etc. to store the account information .

In one embodiment the information stored in the memory of the account identification device may also be in the form of data tracks that are traditionally associated with credits cards. Such tracks include Track 1 and Track 2. Track 1 International Air Transport Association stores more information than Track 2 and contains the cardholder s name as well as the account number and other discretionary data. Track 1 is sometimes used by airlines when securing reservations with a credit card. Track 2 American Banking Association is currently most commonly used and is read by ATMs and credit card checkers. The ABA American Banking Association designed the specifications of Track 1 and banks abide by it. It contains the cardholder s account number encrypted PIN and other discretionary data.

In one embodiment the communication device includes a semiconductor chip to implement a transceiver for communication with the reader and an antenna to provide and or receive wireless signals.

In one embodiment the communication device is configured to communicate with the reader . The communication device may include a transmitter to transmit the account information via wireless transmissions such as radio frequency signals magnetic coupling or infrared Bluetooth or WiFi signals etc.

In one embodiment the account identification device is in the form of a mobile phone personal digital assistant PDA etc. The input device can be used to provide input to the processor to control the operation of the account identification device and the audio device and the display device may present status information and or other information such as advertisements or offers. The account identification device may include further components that are not shown in such as a cellular communications subsystem.

In one embodiment the communication device may access the account information stored on the memory without going through the processor .

In one embodiment the account identification device has fewer components than those illustrated in . For example an account identification device does not have the input device the audio device and the display device in one embodiment and in another embodiment an account identification device does not have components .

For example in one embodiment an account identification device is in the form of a debit card a credit card a smartcard or a consumer device that has optional features such as magnetic strips or smartcards.

An example of an account identification device is a magnetic strip attached to a plastic substrate in the form of a card. The magnetic strip is used as the memory of the account identification device to provide the account information . Consumer information such as account number expiration date and consumer name may be printed or embossed on the card. A semiconductor chip implementing the memory and the communication device may also be embedded in the plastic card to provide account information in one embodiment. In one embodiment the account identification device has the semiconductor chip but not the magnetic strip.

In one embodiment the account identification device is integrated with a security device such as an access card a radio frequency identification RFID tag a security card a transponder etc.

In one embodiment the account identification device is a handheld and compact device. In one embodiment the account identification device has a size suitable to be placed in a wallet or pocket of the consumer.

Some examples of an account identification device include a credit card a debit card a stored value device a payment card a gift card a smartcard a smart media card a payroll card a health care card a wrist band a keychain device a supermarket discount card a transponder and a machine readable medium containing account information .

In one embodiment the point of interaction is to provide an advertisement to the user or to provide information derived from the transaction data to the user .

In one embodiment an advertisement is a marketing interaction which may include an announcement and or an offer of a benefit such as a discount incentive reward coupon gift cash back or opportunity e.g. special ticket admission . An advertisement may include an offer of a product or service an announcement of a product or service or a presentation of a brand of products or services or a notice of events facts opinions etc. The advertisements can be presented in text graphics audio video or animation and as printed matter web content interactive media etc. An advertisement may be presented in response to the presence of a financial transaction card or in response to a financial transaction card being used to make a financial transaction or in response to other user activities such as browsing a web page submitting a search request communicating online entering a wireless communication zone etc. In one embodiment the presentation of advertisements may be not a result of a user action.

In one embodiment the point of interaction can be one of various endpoints of the transaction network such as point of sale POS terminals automated teller machines ATMs electronic kiosks or computer kiosks or interactive kiosks self assist checkout terminals vending machines gas pumps websites of banks e.g. issuer banks or acquirer banks of credit cards bank statements e.g. credit card statements websites of the transaction handler websites of merchants checkout websites or web pages for online purchases etc.

In one embodiment the point of interaction may be the same as the transaction terminal such as a point of sale POS terminal an automated teller machine ATM a mobile phone a computer of the user for an online transaction etc. In one embodiment the point of interaction may be co located with or near the transaction terminal e.g. a video monitor or display a digital sign or produced by the transaction terminal e.g. a receipt produced by the transaction terminal . In one embodiment the point of interaction may be separate from and not co located with the transaction terminal such as a mobile phone a personal digital assistant a personal computer of the user a voice mail box of the user an email inbox of the user a digital sign etc.

For example the advertisements can be presented on a portion of media for a transaction with the customer which portion might otherwise be unused and thus referred to as a white space herein. A white space can be on a printed matter e.g. a receipt printed for the transaction or a printed credit card statement on a video display e.g. a display monitor of a POS terminal for a retail transaction an ATM for cash withdrawal or money transfer a personal computer of the customer for online purchases or on an audio channel e.g. an interactive voice response IVR system for a transaction over a telephonic device .

In one embodiment the white space is part of a media channel available to present a message from the transaction handler in connection with the processing of a transaction of the user . In one embodiment the white space is in a media channel that is used to report information about a transaction of the user such as an authorization status a confirmation message a verification message a user interface to verify a password for the online use of the account information a monthly statement an alert or a report or a web page provided by the portal to access a loyalty program associated with the consumer account or a registration program.

In other embodiments the advertisements can also be presented via other media channels which may not involve a transaction processed by the transaction handler . For example the advertisements can be presented on publications or announcements e.g. newspapers magazines books directories radio broadcasts television digital signage etc. which may be in an electronic form or in a printed or painted form . The advertisements may be presented on paper on websites on billboards on digital signs or on audio portals.

In one embodiment the transaction handler purchases the rights to use the media channels from the owner or operators of the media channels and uses the media channels as advertisement spaces. For example white spaces at a point of interaction e.g. with customers for transactions processed by the transaction handler can be used to deliver advertisements relevant to the customers conducting the transactions and the advertisement can be selected based at least in part on the intelligence information derived from the accumulated transaction data and or the context at the point of interaction and or the transaction terminal .

In general a point of interaction e.g. may or may not be capable of receiving inputs from the customers and may or may not co located with a transaction terminal e.g. that initiates the transactions. The white spaces for presenting the advertisement on the point of interaction may be on a portion of a geographical display space e.g. on a screen or on a temporal space e.g. in an audio stream .

In one embodiment the point of interaction may be used to primarily to access services not provided by the transaction handler such as services provided by a search engine a social networking website an online marketplace a blog a news site a television program provider a radio station a satellite a publisher etc.

In one embodiment a consumer device is used as the point of interaction which may be a non portable consumer device or a portable computing device. The consumer device is to provide media content to the user and may receive input from the user .

Examples of non portable consumer devices include a computer terminal a television set a personal computer a set top box or the like. Examples of portable consumer devices include a portable computer a cellular phone a personal digital assistant PDA a pager a security card a wireless terminal or the like. The consumer device may be implemented as a data processing system as illustrated in with more or fewer components.

In one embodiment the consumer device includes an account identification device . For example a smart card used as an account identification device is integrated with a mobile phone or a personal digital assistant PDA .

In one embodiment the point of interaction is integrated with a transaction terminal . For example a self service checkout terminal includes a touch pad to interact with the user and an ATM machine includes a user interface subsystem to interact with the user .

In one embodiment a computing apparatus is configured to include some of the components of systems illustrated in various figures such as the transaction handler the profile generator the media controller the portal the profile selector the advertisement selector the user tracker the correlator and their associated storage devices such as the data warehouse .

In one embodiment at least some of the components such as the transaction handler the transaction terminal the point of interaction the user tracker the media controller the correlator the profile generator the profile selector the advertisement selector the portal the issuer processor the acquirer processor and the account identification device can be implemented as a computer system such as a data processing system illustrated in . Some of the components may share hardware or be combined on a computer system. In one embodiment a network of computers can be used to implement one or more of the components.

Further the data illustrated in the figures such as transaction data account data transaction profiles and advertisement data can be stored in storage devices of one or more computers accessible to the corresponding components. For example the transaction data can be stored in the data warehouse that can be implemented as a data processing system illustrated in with more or fewer components.

In one embodiment the transaction handler is a payment processing system or a payment card processor such as a card processor for credit cards debit cards etc.

In the data processing system includes an inter connect e.g. bus and system core logic which interconnects a microprocessor s and memory . The microprocessor is coupled to cache memory in the example of .

In one embodiment the inter connect interconnects the microprocessor s and the memory together and also interconnects them to input output I O device s via I O controller s . I O devices may include a display device and or peripheral devices such as mice keyboards modems network interfaces printers scanners video cameras and other devices known in the art. In one embodiment when the data processing system is a server system some of the I O devices such as printers scanners mice and or keyboards are optional.

In one embodiment the inter connect includes one or more buses connected to one another through various bridges controllers and or adapters. In one embodiment the I O controllers include a USB Universal Serial Bus adapter for controlling USB peripherals and or an IEEE 1394 bus adapter for controlling IEEE 1394 peripherals.

In one embodiment the memory includes one or more of ROM Read Only Memory volatile RAM Random Access Memory and non volatile memory such as hard drive flash memory etc.

Volatile RAM is typically implemented as dynamic RAM DRAM which requires power continually in order to refresh or maintain the data in the memory. Non volatile memory is typically a magnetic hard drive a magnetic optical drive an optical drive e.g. a DVD RAM or other type of memory system which maintains data even after power is removed from the system. The non volatile memory may also be a random access memory.

The non volatile memory can be a local device coupled directly to the rest of the components in the data processing system. A non volatile memory that is remote from the system such as a network storage device coupled to the data processing system through a network interface such as a modem or Ethernet interface can also be used.

In this description some functions and operations are described as being performed by or caused by software code to simplify description. However such expressions are also used to specify that the functions result from execution of the code instructions by a processor such as a microprocessor.

Alternatively or in combination the functions and operations as described here can be implemented using special purpose circuitry with or without software instructions such as using Application Specific Integrated Circuit ASIC or Field Programmable Gate Array FPGA . Embodiments can be implemented using hardwired circuitry without software instructions or in combination with software instructions. Thus the techniques are limited neither to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

While one embodiment can be implemented in fully functioning computers and computer systems various embodiments are capable of being distributed as a computing product in a variety of forms and are capable of being applied regardless of the particular type of machine or computer readable media used to actually effect the distribution.

At least some aspects disclosed can be embodied at least in part in software. That is the techniques may be carried out in a computer system or other data processing system in response to its processor such as a microprocessor executing sequences of instructions contained in a memory such as ROM volatile RAM non volatile memory cache or a remote storage device.

Routines executed to implement the embodiments may be implemented as part of an operating system or a specific application component program object module or sequence of instructions referred to as computer programs. The computer programs typically include one or more instructions set at various times in various memory and storage devices in a computer and that when read and executed by one or more processors in a computer cause the computer to perform operations necessary to execute elements involving the various aspects.

A machine readable medium can be used to store software and data which when executed by a data processing system causes the system to perform various methods. The executable software and data may be stored in various places including for example ROM volatile RAM non volatile memory and or cache. Portions of this software and or data may be stored in any one of these storage devices. Further the data and instructions can be obtained from centralized servers or peer to peer networks. Different portions of the data and instructions can be obtained from different centralized servers and or peer to peer networks at different times and in different communication sessions or in a same communication session. The data and instructions can be obtained in entirety prior to the execution of the applications. Alternatively portions of the data and instructions can be obtained dynamically just in time when needed for execution. Thus it is not required that the data and instructions be on a machine readable medium in entirety at a particular instance of time.

Examples of computer readable media include but are not limited to recordable and non recordable type media such as volatile and non volatile memory devices read only memory ROM random access memory RAM flash memory devices floppy and other removable disks magnetic disk storage media optical storage media e.g. Compact Disk Read Only Memory CD ROMS Digital Versatile Disks DVDs etc. among others. The computer readable media may store the instructions.

The instructions may also be embodied in digital and analog communication links for electrical optical acoustical or other forms of propagated signals such as carrier waves infrared signals digital signals etc. However propagated signals such as carrier waves infrared signals digital signals etc. are not tangible machine readable medium and are not configured to store instructions.

In general a machine readable medium includes any mechanism that provides i.e. stores and or transmits information in a form accessible by a machine e.g. a computer network device personal digital assistant manufacturing tool any device with a set of one or more processors etc. .

In various embodiments hardwired circuitry may be used in combination with software instructions to implement the techniques. Thus the techniques are neither limited to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

The description and drawings are illustrative and are not to be construed as limiting. The present disclosure is illustrative of inventive features to enable a person skilled in the art to make and use the techniques. Various features as described herein should be used in compliance with all current and future rules laws and regulations related to privacy security permission consent authorization and others. Numerous specific details are described to provide a thorough understanding. However in certain instances well known or conventional details are not described in order to avoid obscuring the description. References to one or an embodiment in the present disclosure are not necessarily references to the same embodiment and such references mean at least one.

The use of headings herein is merely provided for ease of reference and shall not be interpreted in any way to limit this disclosure or the following claims.

Reference to one embodiment or an embodiment means that a particular feature structure or characteristic described in connection with the embodiment is included in at least one embodiment of the disclosure. The appearances of the phrase in one embodiment in various places in the specification are not necessarily all referring to the same embodiment and are not necessarily all referring to separate or alternative embodiments mutually exclusive of other embodiments. Moreover various features are described which may be exhibited by one embodiment and not by others. Similarly various requirements are described which may be requirements for one embodiment but not other embodiments. Unless excluded by explicit description and or apparent incompatibility any combination of various features described in this description is also included here. For example the features described above in connection with in one embodiment or in some embodiments can be all optionally included in one implementation except where the dependency of certain features on other features as apparent from the description may limit the options of excluding selected features from the implementation and incompatibility of certain features with other features as apparent from the description may limit the options of including selected features together in the implementation.

In the foregoing specification the disclosure has been described with reference to specific exemplary embodiments thereof. It will be evident that various modifications may be made thereto without departing from the broader spirit and scope as set forth in the following claims. The specification and drawings are accordingly to be regarded in an illustrative sense rather than a restrictive sense.

