---

title: All points addressable touch sensing surface
abstract: A touch-sensing apparatus may include a first controller configured to measure a first set of capacitance values from a first area of a touch-sensing surface and a second controller coupled with the first controller, where the second controller is configured to receive the first set of capacitance values from the first controller, and calculate a first position of a contact at the touch-sensing surface based on the first set of capacitance values and a second set of capacitance values measured from a second area of the touch-sensing surface adjacent to the first area of the touch-sensing surface.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09454274&OS=09454274&RS=09454274
owner: PARADE TECHNOLOGIES, LTD.
number: 09454274
owner_city: Santa Clara
owner_country: US
publication_date: 20140819
---
This application is a continuation of U.S. patent application Ser. No. 13 072 634 filed on Mar. 25 2011 now U.S. Pat. No. 8 810 543 Issued on Aug. 19 2014 which claims the benefit of U.S. Provisional Application No. 61 345 061 filed on May 14 2010 both of which are incorporated by reference herein.

This disclosure relates to the field of touchscreen controllers and in particular to calculating centroid locations based on capacitance measurements from a plurality of touch sensor arrays.

Computing devices such as notebook computers personal data assistants PDAs kiosks and mobile handsets have user interface devices which are also known as human interface devices HID . One user interface device that has become more common is a touch sensor pad also commonly referred to as a touchpad . A basic notebook computer touch sensor pad emulates the function of a personal computer PC mouse. A touch sensor pad is typically embedded into a PC notebook for built in portability. A touch sensor pad replicates mouse X Y movement by using two defined axes which contain a collection of sensor elements that detect the position of one or more conductive objects such as a finger. Mouse right left button clicks can be replicated by two mechanical buttons located in the vicinity of the touchpad or by tapping commands on the touch sensor pad itself. The touch sensor pad provides a user interface device for performing such functions as positioning a pointer or selecting an item on a display. These touch sensor pads may include multidimensional sensor arrays for detecting movement in multiple axes. The sensor array may include a one dimensional sensor array detecting movement in one axis. The sensor array may also be two dimensional detecting movements in two axes.

Another user interface device that has become more common is a touch screen. Touch screens also known as touchscreens touch windows touch panels or touchscreen panels are transparent display overlays which are typically either pressure sensitive resistive or piezoelectric electrically sensitive capacitive acoustically sensitive surface acoustic wave SAW or photosensitive infra red . The effect of such overlays allows a display to be used as an input device removing the keyboard and or the mouse as the primary input device for interacting with the display s content. Such displays can be attached to computers or as terminals to networks. Touch screens have become familiar in retail settings on point of sale systems on ATMs on mobile handsets on kiosks on game consoles and on PDAs where a stylus is sometimes used to manipulate the graphical user interface GUI and to enter data. A user can touch a touch screen or a touch sensor pad to manipulate data. For example a user can apply a single touch by using a finger to touch the surface of a touch screen to select an item from a menu.

The following description sets forth numerous specific details such as examples of specific systems components methods and so forth in order to provide a good understanding of several embodiments of the present invention. It will be apparent to one skilled in the art however that at least some embodiments of the present invention may be practiced without these specific details. In other instances well known components or methods are not described in detail or are presented in a simple block diagram format in order to avoid unnecessarily obscuring the present invention. Thus the specific details set forth are merely exemplary. Particular implementations may vary from these exemplary details and still be contemplated to be within the spirit and scope of the present invention.

Described herein is method and apparatus for calculating one or more centroid locations based on capacitance measurements from a plurality of capacitive touch sensing panels. In applications where an electronic capacitive touch sensor system allows a user to manipulate a cursor or other objects on a display accurate centroid calculations allow the cursor to accurately represent the position and motion of an object such as a finger or stylus on the touch sensor. In one embodiment a centroid is a location that represents the center of mass or geometric center of an object at a touch sensing surface. In one embodiment a centroid may be represented as coordinates such as X Y coordinates in a Cartesian coordinate system. In embodiments wherein the capacitive touch sensor system measures the self capacitance of the sensor elements disposed along the X and Y axes the center of mass for a touch is determined by the separate calculation of a 1 dimensional 1D centroid for the X axis sensor elements and a 1D centroid for the Y axis sensor elements wherein the intersection of the projection of these two 1D centroids into the sensor array determines the actual 2 dimensional 2D centroid of the touch. In embodiments wherein the capacitive touch sensor system measures the mutual capacitance at the intersections of the sensor elements disposed along the X and Y axes the center of mass for a touch is determined by a direct calculation of a 2D centroid. The accurate detection and calculation of centroid positions may also be important in applications where motion of a finger or stylus is tracked such as drawing or handwriting recognition programs.

In one embodiment two or more adjacent capacitive touch sensing panels may be arranged to emulate a single touch sensing panel having a surface area equal to the combined surface area of the individual touch panels. Each of the adjacent touch panels may be individually scanned by a corresponding slave controller to obtain a set of capacitance measurements from which one or more centroid positions may be calculated for the touch panel. In one embodiment a large touch sensing surface constructed in this manner from multiple smaller touch panels may be used to overlay a single display to implement a touchscreen.

Centroid locations corresponding to contact locations of conductive objects contacting or proximate to the touch panel may be calculated based on the set of capacitance measurements. In one embodiment a master controller may calculate the centroid positions of contact locations near adjacent edges of the individual touch sensing panels while the slave controllers calculate centroid positions for contact locations over the remainder of the area of their respective touch panels.

Alternatively a master controller may be perform a scan of a first of the individual touch panels while also receiving edge capacitance values from a second adjacent touch panel measured by a slave controller. The master controller may calculate one or more centroid positions based on the measured capacitance values of the first touch panel and the received edge capacitance values of the second touch panel while the slave controller calculates centroid positions based on the capacitance values measured from the remainder of the second touch panel area.

As described herein a contact at a surface of one of the touch sensing panels may be detected when a conductive object e.g. a finger physically touches the touch sensing surface or may be caused by a conductive object in proximity to the touch sensing surface. One method for scanning a touch sensing surface involves scanning or measuring changes in self capacitance associated with each row or column sensor element in the touch sensing surface. Thus performing a scan of the entire touch sensing surface may include taking a number of measurements equal to the sum of the number of row elements plus the number of column elements.

All points sensing of the touch sensing surface in which the locations of multiple contacts at the touch sensing surface are determined may be performed using mutual capacitance measurements. Since mutual capacitance measurements are taken between a pair of sensor elements such as a row sensor element and a column sensor element the number of measurements for scanning the entire touch sensing surface may be equal to the number of row elements multiplied by the number of column elements.

In one embodiment the sensor array includes sensor elements N where N is a positive integer that are disposed as a two dimensional matrix also referred to as an XY matrix . The sensor array is coupled to pins N of the processing device via one or more analog buses transporting multiple signals. In this embodiment each sensor element N is represented as a capacitor. The self capacitance of each sensor in the sensor array is measured by a capacitance sensor in the processing device .

In one embodiment the capacitance sensor may include a relaxation oscillator or other means to convert a capacitance into a measured value. The capacitance sensor may also include a counter or timer to measure the oscillator output. The capacitance sensor may further include software components to convert the count value e.g. capacitance value into a sensor element detection decision also referred to as switch detection decision or relative magnitude. It should be noted that there are various known methods for measuring capacitance such as current versus voltage phase shift measurement resistor capacitor charge timing capacitive bridge divider charge transfer successive approximation sigma delta modulators charge accumulation circuits field effect mutual capacitance frequency shift or other capacitance measurement algorithms. It should be noted however instead of evaluating the raw counts relative to a threshold the capacitance sensor may be evaluating other measurements to determine the user interaction. For example in the capacitance sensor having a sigma delta modulator the capacitance sensor is evaluating the ratio of pulse widths of the output instead of the raw counts being over or under a certain threshold.

In one embodiment the processing device further includes processing logic . Operations of the processing logic may be implemented in firmware alternatively it may be implemented in hardware or software. The processing logic may receive signals from the capacitance sensor and determine the state of the sensor array such as whether an object e.g. a finger is detected on or in proximity to the sensor array e.g. determining the presence of the object where the object is detected on the sensor array e.g. determining the location of the object tracking the motion of the object or other information related to an object detected at the touch sensor.

In another embodiment instead of performing the operations of the processing logic in the processing device the processing device may send the raw data or partially processed data to the host . The host as illustrated in may include decision logic that performs some or all of the operations of the processing logic . Operations of the decision logic may be implemented in firmware hardware software or a combination thereof. The host may include a high level Application Programming Interface API in applications that perform routines on the received data such as compensating for sensitivity differences other compensation algorithms baseline update routines start up and or initialization routines interpolation operations or scaling operations. The operations described with respect to the processing logic may be implemented in the decision logic the applications or in other hardware software and or firmware external to the processing device . In some other embodiments the processing device is the host .

In another embodiment the processing device may also include a non sensing actions block . This block may be used to process and or receive transmit data to and from the host . For example additional components may be implemented to operate with the processing device along with the sensor array e.g. keyboard keypad mouse trackball LEDs displays or other peripheral devices .

The processing device may reside on a common carrier substrate such as for example an integrated circuit IC die substrate or a multi chip module substrate. Alternatively the components of the processing device may be one or more separate integrated circuits and or discrete components. In one embodiment the processing device may be the Programmable System on a Chip PSoC processing device developed by Cypress Semiconductor Corporation San Jose Calif. Alternatively the processing device may be one or more other processing devices known by those of ordinary skill in the art such as a microprocessor or central processing unit a controller special purpose processor digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable device. In an alternative embodiment for example the processing device may be a network processor having multiple processors including a core unit and multiple micro engines. Additionally the processing device may include any combination of general purpose processing device s and special purpose processing device s .

In one embodiment the electronic system is implemented in a device that includes the touch sensing surface as the user interface such as handheld electronics portable telephones cellular telephones notebook computers personal computers personal data assistants PDAs kiosks keyboards televisions remote controls monitors handheld multi media devices handheld video players gaming devices control panels of a household or industrial appliances or other computer peripheral or input devices. Alternatively the electronic system may be used in other types of devices. It should be noted that the components of electronic system may include all the components described above. Alternatively electronic system may include only some of the components described above or include additional components not listed herein.

Capacitance sensor includes multiplexer control demultiplexer and multiplexer clock generator signal generator demodulation circuit and analog to digital converter ADC . ADC is further coupled with touch coordinate converter . Touch coordinate converter outputs a signal to the processing logic .

The transmit and receive electrodes in the electrode matrix may be arranged so that each of the transmit electrodes overlap and cross each of the receive electrodes such as to form an array of intersections while maintaining galvanic isolation from each other. Thus each transmit electrode may be capacitively coupled with each of the receive electrodes. For example transmit electrode is capacitively coupled with receive electrode at the point where transmit electrode and receive electrode overlap.

Clock generator supplies a clock signal to signal generator which produces a TX signal to be supplied to the transmit electrodes of touch sensor . In one embodiment the signal generator includes a set of switches that operate according to the clock signal from clock generator . The switches may generate a TX signal by periodically connecting the output of signal generator to a first voltage and then to a second voltage wherein said first and second voltages are different.

The output of signal generator is connected with demultiplexer which allows the TX signal to be applied to any of the M transmit electrodes of touch sensor . In one embodiment multiplexer control controls demultiplexer so that the TX signal is applied to each transmit electrode in a controlled sequence. Demultiplexer may also be used to ground float or connect an alternate signal to the other transmit electrodes to which the TX signal is not currently being applied.

Because of the capacitive coupling between the transmit and receive electrodes the TX signal applied to each transmit electrode induces a current within each of the receive electrodes. For instance when the TX signal is applied to transmit electrode through demultiplexer the TX signal induces an RX signal on the receive electrodes in matrix . The RX signal on each of the receive electrodes can then be measured in sequence by using multiplexer to connect each of the N receive electrodes to demodulation circuit in sequence.

The mutual capacitance associated with each intersection between a TX electrode and an RX electrode can be sensed by selecting every available combination of TX electrode and an RX electrode using demultiplexer and multiplexer . To improve performance multiplexer may also be segmented to allow more than one of the receive electrodes in matrix to be routed to additional demodulation circuits . In an optimized configuration wherein there is a 1 to 1 correspondence of instances of demodulation circuit with receive electrodes multiplexer may not be present in the system.

When an object such as a finger approaches the electrode matrix the object causes a decrease in the mutual capacitance between only some of the electrodes. For example if a finger is placed near the intersection of transmit electrode and receive electrode the presence of the finger will decrease the mutual capacitance between electrodes and . Thus the location of the finger on the touchpad can be determined by identifying the one or more receive electrodes having a decreased mutual capacitance in addition to identifying the transmit electrode to which the TX signal was applied at the time the decreased mutual capacitance was measured on the one or more receive electrodes.

By determining the mutual capacitances associated with each intersection of electrodes in the matrix the locations of one or more touch contacts may be determined. The determination may be sequential in parallel or may occur more frequently at commonly used electrodes.

In alternative embodiments other methods for detecting the presence of a finger or conductive object may be used where the finger or conductive object causes an increase in capacitance at one or more electrodes which may be arranged in a grid or other pattern. For example a finger placed near an electrode of a capacitive sensor may introduce an additional capacitance to ground that increases the total capacitance between the electrode and ground. The location of the finger can be determined from the locations of one or more electrodes at which an increased capacitance is detected.

The induced current signal is rectified by demodulation circuit . The rectified current output by demodulation circuit can then be filtered and converted to a digital code by ADC .

The digital code is converted to touch coordinates indicating a position of an input on touch sensor array by touch coordinate converter . The touch coordinates are transmitted as an input signal to the processing logic . In one embodiment the input signal is received at an input to the processing logic . In one embodiment the input may be configured to receive capacitance measurements indicating a plurality of row coordinates and a plurality of column coordinates. Alternatively the input may be configured to receive row coordinates and column coordinates.

In one embodiment the sensor array can be configured to detect multiple touches. One technique for multi touch detection uses a two axis implementation one axis to support rows and another axis to support columns. Additional axes such as a diagonal axis implemented on the surface using additional layers can allow resolution of additional touches.

Touch sensing panel includes a plurality of row sensor elements and column sensor elements . Each of the row and column sensor elements is connected with the slave controller . In one embodiment the slave controller performs a scan of touch sensing panel by performing a capacitance measurement of each of the intersections between the row sensor elements and column sensor elements . Slave controller is similarly coupled with touch sensing panel and may be configured to perform a scan of touch sensing panel be performing a capacitance measurement of each of the intersections between the row sensor elements and the column sensor elements . In one embodiment the capacitance measurements are mutual capacitance measurements. Alternatively the capacitance measurements may be self capacitance measurements.

In one embodiment controllers may compensate for differences such as differences in geometry due to manufacturing tolerances between adjacent touch panels from which they measure capacitances. For example the slave controllers and may compensate for physical differences between their respective touch panels and that may affect the capacitances being measured from the panels. Differences in capacitances measured from the touch sensing panels and may be normalized within the slave controllers and by weighting or adding offsets to the measured capacitances. In one embodiment the amount of weighting or offset may be determined by comparing baseline capacitances measured from each of the touch panels when no contact is present or proximate to any of the touch panels. In one embodiment the amount of compensation may be determined dynamically at run time.

In one embodiment slave controllers and may also calculate centroid positions based on the capacitance measurements of the intersections of sensor elements. For example a conductive object contacting or proximate to the touch sensing panel may cause changes in the mutual capacitances measured between certain intersections of row and column sensor elements. The capacitance changes for each intersection are measured by the slave controller . In one embodiment a centroid corresponding to the location of the conductive object at the touch sensing panel may be determined according to the magnitudes of the measured capacitance changes.

In one embodiment the slave controllers and calculate centroid locations for contacts that occur at the surface of the touch sensing panels and that are away from an edge adjacent to another touch sensing panel. For example slave controller may perform centroid calculations for contacts detected away from the right edge of touch sensing panel which is adjacent to touch sensing panel . Similarly slave controller may calculate centroid locations for contacts that occur at the surface of touch sensing panel that are away from the left edge of the panel which is adjacent to touch sensing panel . In one embodiment the centroid locations calculated by the slave controllers and are transmitted to master controller .

In one embodiment the slave controllers and determine based on scans of the panels and when a contact location is near an edge adjacent to another touch sensing panel. For example the slave controller may determine that a contact has occurred near the right edge of the touch sensing panel when sensor element is activated such that a capacitance change is measured at sensor element . In one embodiment the capacitance change may be measured at any of the intersections between column sensor element and row sensor elements . Similarly slave controller may use measured capacitances of sensor element to determine whether a contact has occurred near the left edge of the touch sensing panel .

In one embodiment the slave controllers may use capacitance measurements from more than one sensor element near the edge of the touch sensing panel. For example slave controller may determine that a contact is near the right edge of the panel when column sensor elements or are activated. In an alternative embodiment determining whether a contact has occurred near the edge of the touch sensing panel may be performed by the master controller or by some other mechanism. In one embodiment the edge contact may be detected using one or more additional capacitive sensors optical sensors pressure sensors or other type of sensors.

In one embodiment in response to determining that a contact has occurred near the edge of the touch sensing panel adjacent another touch sensing panel a slave controller or may transmit the capacitance values from the edge to the master controller . For example a contact within region may cause capacitance changes measurable at the intersections with regions and . Slave controller measures the capacitances at these intersections which are intersections between sensor elements and . Slave controller may determine that a contact has occurred near the right edge of panel because sensor element has been activated. For example a slave controller may determine that a sensor element has been activated when the measured capacitance value from that sensor element exceeds a threshold capacitance value. In response to determining that the edge contact has occurred slave controller transmits the capacitance values for the intersections between sensor elements and to the master controller. In one embodiment only the capacitance values for the activated sensor elements are transmitted in response to detecting an edge contact. Alternatively all edge capacitance values may be transmitted in response to detecting the edge contact.

In one embodiment additional information such as locations of any nearby centroids over the non edge portion of the touch sensing panel may be transmitted by a slave controller to the master controller . This information may be used to correct for effects caused by other contacts near any of the detected edge contacts.

The contact within region also causes changes in capacitance measurable at the intersections between sensor elements and of touch sensing panel . Slave controller measures the capacitance changes at these intersections and determines that an edge contact has occurred because sensor element has been activated. Slave controller transmits the capacitances measured at the intersections of elements and to the master controller . Thus the master controller receives a set of capacitance values including the right edge capacitance values of panel and the left edge capacitance values of panel .

In one embodiment slave controllers and automatically transmit the capacitance measurements attributable to the edge contact to the master controller without determining that an edge contact has occurred.

In one embodiment the master controller calculates a centroid location of the contact in region based on the right edge capacitance values and the left edge capacitance values of panels and respectively. In one embodiment the master controller also receives centroid locations calculated by the slave controllers and based on capacitance values away from the adjacent edges of panels and . For example slave controller may measure a set of capacitance values away from the right edge of panel . The set of capacitance values may include for instance intersections involving column sensor elements . Slave controller may then determine a centroid location of a contact based on the set of capacitance values and transmit the centroid location of the contact to the master controller .

Similarly slave controller may measure capacitances for intersections involving sensor elements away from the left edge of panel such as intersections involving sensor elements . Slave controller may then calculate a centroid location for a centroid location for contact based on the measured capacitances then transmit the calculated centroid location to master controller .

Thus in one embodiment the master controller receives centroid locations for any contacts detected on panel but away from the right edge of panel and also receives centroid locations for any contacts detected on panel but away from the left edge of panel . For example master controller may receive the centroid locations of contacts and from slave controller and respectively. The master controller may also receive a set of capacitance measurements for the intersections near the right edge of panel from slave controller and a set of capacitance measurements for the intersections near the left edge of panel from slave controller . The master controller may then calculate a centroid position for any contacts over or near these edges of the touch sensing panels and . For example the master controller may calculate the centroid position of contact based on edge capacitance values received from slave controller and .

In one embodiment having either received or calculated all the centroid positions over the surface of both panels and the master controller may transmit the centroid locations to a host processor . In one embodiment host processor may correspond to host as illustrated in . Host processor may then use the centroid locations for gesture recognition pointing or other applications.

In one embodiment master controller measures capacitance values for all intersections of touch sensing panel while slave controller measures capacitance values for all intersections of touch sensing panel . Slave controller may then transmit the capacitance values for the intersections near the left edge of panel nearest the panel to the master controller . Slave controller may also calculate centroid locations for contacts away from the left edge of panel based on the measured capacitance values and transmit the centroid locations to master controller .

Master controller receives the edge capacitance values from slave controller and calculates one or more centroid locations based on the edge capacitance values received from slave controller and the right edge capacitance values for panel measured by the master controller itself. Master controller thus calculates centroid positions for contacts located near the adjacent edges of panels and . Master controller may also calculate the centroid positions for contacts over the remaining area of panel .

Having either calculated or received the centroid locations for contacts over the entire combined surface area of touch sensing panels and the master controller may transmit all centroid locations to a host processor . The host processor may then update a display perform gesture recognition or perform other operations based on the centroid locations.

In one embodiment a capacitive touch sensing system such as touch sensing system may be scaled to include four touch sensing panels. illustrates one embodiment of a capacitive touch sensing system including four touch sensing panels coupled with corresponding slave controllers respectively. In one embodiment each of the slave controllers is configured to measure capacitance values for each of the intersections in its corresponding touch sensing panel. For example slave controller may measure a capacitance for each intersection of sensor elements in touch sensing panel .

In one embodiment an edge region may include the areas near the adjacent edges of the touch sensing panels . For example the boundaries of the edge region may encompass the two sensor elements parallel to and nearest to each edge of a touch sensing panel that is adjacent to an edge of another touch sensing panel. In alternative embodiments the edge region may encompass more or fewer of the sensor elements nearest to and parallel to the adjacent edge. In one embodiment the edge region may be defined in terms of absolute distance from the adjacent edges rather than a number of sensor elements.

In one embodiment each slave controller also calculates based on the measured capacitance values centroid locations of contacts occurring outside of edge region . For example slave controller may use capacitance measurements for intersections outside of edge region to calculate a set of centroid locations including a centroid location for each contact at touch panel that is outside of edge region .

In one embodiment slave controller does not calculate the centroid locations for contacts within edge region . Slave controller may instead transmit the measured capacitances for intersections within the edge region to the master controller.

In one embodiment the slave controllers operate in similar fashion as slave controller such that each slave controller calculates a set of centroid locations for contacts at their respective panels that are outside the edge region . The slave controllers may then transmit the centroid locations to the master controller . In one embodiment in addition to the sets of centroid locations each of the slave controllers may also transmit to the master controller a set of capacitance values including a capacitance value for each intersection from its respective touch sensing panel that is within the edge region .

From the slave controllers the master controller receives centroid locations for contacts outside the edge region for each of the panels and also receives a set of measured capacitance values for the sensor element intersections within the edge region for each of the touch sensing panels . Using the capacitance values for the intersections within the edge region the master controller may calculate centroid locations for contacts occurring within the edge region .

In one embodiment each of the slave controllers may transmit capacitance values or calculated centroid locations to another slave controller which may then retransmit the capacitance values or centroid locations to another slave controller or to the master controller . For example slave controller may instead of transmitting capacitance values or centroid locations to master controller transmit this information to slave controller . Slave controller may then transmit the information received from slave controller to slave controller along with capacitance values or centroid locations measured or calculated by slave controller . Slave controllers and may operate in a similar fashion retransmitting information received from other slave controllers along with their own capacitance values or centroid locations to the next slave controller or to the master controller . In one embodiment this chaining of slave controllers may be used to distribute processing load across controllers allowing a single master controller to accommodate a greater number of slave controllers and thus a greater number of touch sensing panels.

Having received from the slave controllers the centroid locations for contacts outside the edge region and having calculated the centroid locations for contacts within the edge region the master controller may then transmit the full set of centroid locations to a host processor .

In one embodiment the functions of slave controller may be combined with the master controller . illustrates one embodiment of a capacitive touch sensing system that utilizes a master controller . Master controller combines the functions performed by a slave controller such as slave controller and a master controller such as master controller . In one embodiment master controller functions in similar fashion as master controller except that master controller receives centroid locations and measured capacitances from more slave controllers including slave controllers .

In one embodiment master controller receives sets of centroid positions calculated by each of the slave controllers which may include any centroid locations calculated based on capacitance values of intersections outside the edge region . Master controller measures capacitance values for the intersections of panel and receives capacitance values for the intersections of the other panels that are within the edge region . Based on its own measured capacitance values for panel and the capacitance values for the edge regions of panels the master controller calculates centroid locations for any contacts occurring within the edge region .

Having either calculated or received centroid locations for contacts across the combined surface area of touch sensing panels the master controller may then transmit the centroid locations to a host processor . In an alternative embodiment the functions of a master controller such as master controller may be performed by a host processor.

In one embodiment a master controller such as master controllers or may also control timing of the capacitance measurements performed at each touch sensing panel to minimize interference between panels. For example master controller may signal to the slave controllers to cause the slave controllers to perform their scans such that no slave controller scans its respective touch sensing panel simultaneously with another slave controller. As a further example master controller may time its own scan of panel and the scans performed by each of the slave controllers so that none of the controllers or perform their scans simultaneously. In one embodiment a master controller such as master controller may cause the slave controllers to scan panels sequentially such that a scan time of one panel does not overlap with the scan time of any of the other panels. In one embodiment the master controller may cause the sequential scan of the set of touch panels to repeat continuously.

In an alternative embodiment the scan timing may be controlled by a separate controller such as the host processor or the slave controllers may communicate to adjust timing using a synchronization protocol or by sending timing signals.

In one embodiment instead of two or more independent touch panels a single touch panel may be subdivided and each subdivision of the touch panel may be scanned using a separate slave controller. For example with regard to each of the slave controllers and instead of being connected to panels and may be connected to sets of rows or column sensor elements of a single touch panel. These sets of sensor elements may or may not have sensor elements in common. For example a first slave controller may be connected to all of the column sensor elements of a touch panel and a first half of the row sensor elements of the touch panel while a second slave controller may be connected to all of the column sensor elements and a second half of the row sensor elements.

In one embodiment the process begins at block . At block a master controller or a slave controller may measure a first set of capacitance values for a plurality of intersections of a first plurality of sensor elements in a first capacitive touch panel. For example with reference to a slave controller may measure a first set of capacitance values for the sensor element intersections of touch sensing panel . In one embodiment the first set of capacitance values includes capacitance values for intersections of sensor elements near an edge of the panel adjacent to the edge of another panel . In an alternative embodiment a first set of capacitance values may be measured by a master controller such as master controller as illustrated in .

From block the process continues at block . At block a slave controller may transmit the first set of capacitance values to a master controller. This operation may be performed by embodiments of a touch sensing system such as touch sensing system or where a master controller does not measure capacitance values.

From block the process continues at block where the master controller receives the first set of capacitance values. In one embodiment the master controller performs the measurement of the first set of capacitance values rather than receiving the first set of capacitance values from a slave controller as described previously with reference to .

In one embodiment the operations of block may be performed simultaneously with the operations of block . Alternatively the operations of block which include measurements of capacitance values of a touch sensing panel may be performed before or after the capacitance measurements of block to avoid signal interference during the measurement process. At block a slave controller may measure a second set of capacitance values for a plurality of intersections of a second plurality of sensor elements in a second capacitive touch panel. In one embodiment the second capacitive touch panel may be adjacent to the first capacitive touch panel. For example with regard to slave controller may measure a second set of capacitance values for intersections of sensor elements of panel . In one embodiment the second set of capacitance values may include capacitance values for intersections near the edge of panel that is adjacent to panel .

From block the process continues at block . At block the slave controller transmits the second set of capacitance values to the master controller. For example in system the slave controller may transmit the second set of capacitance values for the edge intersections of panel to the master controller . Similarly slave controller of touch sensing system may transmit capacitance values for the edge intersections of panel to master controller .

From block the process continues at block where the master controller receives the second set of capacitances from the slave controller. Thus in one embodiment at block the master controller receives both a first set and a second set of capacitance values corresponding to the adjacent edges of the first capacitive touch panel and the second capacitive touch panel.

From block the process continues at block . At block the master controller calculates is used to calculate a first centroid position of a contact based on the first set of capacitance values and the second set of capacitance values. For example with regard to master controller may use the first and second sets of edge capacitance values to calculate a centroid position of a contact that is near the adjacent edges of panels and . In one embodiment the master controller may also calculate centroid positions for more than one contact occurring near the adjacent edges of the touch sensing panels and .

In one embodiment a slave controller or master controller that is configured to measure the first set of capacitance values for the edge intersections of the first touch sensing panel may also measure a third set of capacitance values for a set of intersections away from an edge of the first capacitive touch panel as provided at block . In one embodiment measuring the third set of capacitance values may be performed as part of the same scan as measuring the first set of capacitance values. For example a slave controller may perform a scan of all intersections of panel including the intersections near the adjacent edge and the intersections away from the adjacent edge. In an alternative embodiment the measurement of the first and third sets of capacitance values may be performed by a master controller such as master controller of . From block the process continues at block .

At block the slave or master controller detects a presence of a contact at the first capacitive touch panel. For example a slave controller or a master controller may detect that a contact is present at touch sensing panel when any of the capacitance values measured from panel exceeds a threshold capacitance value. In one embodiment the process continues at block when a contact is detected at the touch sensing panel.

At block the master or slave controller having measured the third set of capacitance values calculates a second centroid position of a contact at the first capacitive touch panel based on the third set of capacitance values. For example with regard to the slave controller may calculate a centroid position for a contact at location . A similar operation may be performed by master controller of . From block the process continues at block .

At block in one embodiment the slave controller transmits the one or more calculated centroid locations to a master controller. For example slave controller may transmit the location of a centroid corresponding to a contact at location to master controller . In an alternative embodiment where the master controller such as master controller performs the centroid calculation the operations corresponding to block may not be necessary. From block the process continues at block .

Blocks and correspond to operations similar to the operations of blocks and respectively except that the operations of blocks and may be performed by a slave controller connected with the second capacitive touch panel. In one embodiment blocks and may be performed substantially in parallel with blocks and . Alternatively the operations of blocks and may be performed at different times than the operations of blocks and . For example the scans of each panel may be performed sequentially to avoid one panel s measurement scan from interfering with measurement scans of other panels.

At block a slave controller connected with the second touch panel may measure a fourth set of capacitance values from a set of intersections away from an edge of the second capacitive touch panel. For example with regard to slave controller may measure capacitance values for sensor element intersections of touch sensing panel that are away from the left edge of panel . In one embodiment the second set of capacitance values and the fourth set of capacitance values are measured as part of the same scan of panel . From block the process continues at block .

At block the slave or master controller detects a presence of a contact at the first capacitive touch panel. For example a slave controller may detect that a contact is present at touch sensing panel when any of the capacitance values measured from panel exceeds a threshold capacitance value. In one embodiment the process continues at block when a contact is detected at the touch sensing panel.

At block the slave controller connected with the second touch panel may calculate a third centroid position of a contact at the second touch panel based on the fourth set of capacitance values. For example the slave controller may calculate a centroid position of a contact at location which is away from the left edge of panel . From block the process continues at block .

At block the slave controller connected with the second touch panel may transmit the calculated third centroid position to the master controller. For example the slave controller may transmit to the master controller the calculated centroid location of the contact at location . From block the process continues at block .

At block the master controller having either calculated or received from a slave controller a set of centroid positions for every contact detected over the combined surface area of the first and second capacitive touch panels the master controller may transmit the full set of centroid positions to a host processor. In one embodiment this full set of centroid positions includes at least the first centroid position which is detected near the adjacent edges of the first and second touch panels. For example the master controller may transmit to the host controller any centroid locations calculated by the master controller in addition to any centroid locations calculated by the slave controllers and and transmitted to the master controller by the slave controllers and . Upon receiving the centroid locations for any contacts detected over the combined surface area of the first and second panels and the host processor may use the centroid locations for further calculations or to perform operations such as updating a pointer recognizing gestures or other functions.

In one embodiment the operations of process may be repeated in a loop to continuously update the centroid locations of contacts at the touch sensing surface comprising the first and second touch sensing panels.

Thus by performing the operations of process a capacitive sensing system such as capacitive touch sensing systems or may determine centroid locations for one or more contacts over a combined surface area of two or more touch sensing panels while maintaining the ability to accurately calculate centroid locations for contacts near or crossing an edge boundary between touch sensing panels. Such a capacitive touch sensing system may thus allow multiple touch sensing panels to be combined to emulate a single larger touch sensing panel.

Embodiments of the present invention described herein include various operations. These operations may be performed by hardware components software firmware or a combination thereof. As used herein the term coupled to may mean coupled directly or indirectly through one or more intervening components. Any of the signals provided over various buses described herein may be time multiplexed with other signals and provided over one or more common buses. Additionally the interconnection between circuit components or blocks may be shown as buses or as single signal lines. Each of the buses may alternatively be one or more single signal lines and each of the single signal lines may alternatively be buses.

Certain embodiments may be implemented as a computer program product that may include instructions stored on a computer readable medium. These instructions may be used to program a general purpose or special purpose processor to perform the described operations. A computer readable medium includes any mechanism for storing or transmitting information in a form e.g. software processing application readable by a machine e.g. a computer . The computer readable storage medium may include but is not limited to magnetic storage medium e.g. floppy diskette optical storage medium e.g. CD ROM magneto optical storage medium read only memory ROM random access memory RAM erasable programmable memory e.g. EPROM and EEPROM flash memory or another type of medium suitable for storing electronic instructions.

Additionally some embodiments may be practiced in distributed computing environments where the computer readable medium is stored on and or executed by more than one computer system. In addition the information transferred between computer systems may either be pulled or pushed across the transmission medium connecting the computer systems.

Although the operations of the method s herein are shown and described in a particular order the order of the operations of each method may be altered so that certain operations may be performed in an inverse order or so that certain operation may be performed at least in part concurrently with other operations. In another embodiment instructions or sub operations of distinct operations may be in an intermittent and or alternating manner.

In the foregoing specification the invention has been described with reference to specific exemplary embodiments thereof. It will however be evident that various modifications and changes may be made thereto without departing from the broader spirit and scope of the invention as set forth in the appended claims. The specification and drawings are accordingly to be regarded in an illustrative sense rather than a restrictive sense.

