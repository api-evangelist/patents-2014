---

title: Context-sensitive handling of interruptions
abstract: A speech output to be provided to a user of a device is received. Thereafter, it is determined if the device is currently receiving speech input from a user. Upon determining that the device is not currently receiving speech input from the user, the speech output to the user is provided. On the other hand, upon determining that the device is receiving speech input from the user it is determined if provision of the speech output is urgent. When the speech output is urgent, the speech output is provided to the user. When the speech output is not urgent, provision of the speech output to the user is stayed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09368114&OS=09368114&RS=09368114
owner: Apple Inc.
number: 09368114
owner_city: Cupertino
owner_country: US
publication_date: 20140306
---
This application claims the benefit of U.S. Provisional Application No. 61 785 805 filed on Mar. 14 2013 entitled CONTEXT SENSITIVE HANDLING OF INTERRUPTIONS which is hereby incorporated by reference in its entity for all purposes.

The disclosed embodiments relate generally to digital assistants and more specifically to digital assistants that intelligently handle user initiated and or system initiated interruptions based on the current context.

Just like human personal assistants digital assistants or virtual assistants can perform requested tasks and provide requested advice information or services. An assistant s ability to fulfill a user s request is dependent on the assistant s correct comprehension of the request or instructions. Recent advances in natural language processing have enabled users to interact with digital assistants using natural language in spoken or textual forms rather than employing a conventional user interface e.g. menus or programmed commands . Such digital assistants can interpret the user s input to infer the user s intent translate the inferred intent into actionable tasks and parameters execute operations or deploy services to perform the tasks and produce outputs that are intelligible to the user. Ideally the outputs produced by a digital assistant should fulfill the user s intent expressed during the natural language interaction between the user and the digital assistant.

The ability of a digital assistant system to produce satisfactory responses to user requests depends on the natural language processing knowledge base and artificial intelligence implemented by the system. A well designed response procedure can improve a user s experience in interacting with the system and promote the user s confidence in the system s services and capabilities.

Many digital assistants can deliver responses in the form of speech outputs. For example in some circumstance speech outputs include one or more turn by turn directions e.g. Turn left on Whipple Avenue read aloud to the user by a text to speech engine. These speech outputs are generally provided at a predetermined time e.g. of a mile before reaching Whipple Avenue or immediately e.g. in the case of a response to a question such as What time is it . A disadvantage of these digital assistant response procedures is speech outputs may be provided at inopportune times such as by interrupting a user who is speaking into the device during a phone conversation or issuing new requests to the digital assistant. Interruptions that provide non urgent information are frustrating and inconvenient for users. In addition while possible to listen to two different audio streams it is difficult for people to listen while they are themselves talking. Therefore when a digital assistant attempts to deliver speech outputs while a user is speaking it inhibits the user s ability to understand those speech outputs.

Accordingly there is a need for methods of operating a digital assistant that intelligently and intuitively determine whether to provide a speech output. In particular there is a need for methods of operating a digital assistant that determine whether the user is speaking and whether the speech output is urgent enough to warrant an interruption.

The embodiments described below offer an improved method for providing speech outputs to a user. In particular in some embodiments a digital assistant waits a predetermined amount of time after the user has finished speaking before providing a speech output. Of course some speech outputs carry greater urgency than others. For example when a digital assistant is scheduled to inform a user that they will need to turn left on Whipple Avenue in 10 seconds the user must receive the information prior to missing the turn. In other circumstances the user may have asked the digital assistant to inform him or her of the Knicks score at the end of each game. Providing a speech output indicating the latest Knicks score is less urgent. Therefore in some embodiments the predetermined amount of time is based on the urgency of the speech output. For example in some embodiments the default predetermined time is one second e.g. a long enough time to be reasonably sure that the user has finished speaking whereas a fairly urgent output Turn left in mile will be provided half of a second after the user has finished speaking e.g. an amount of time that corresponds to a pause in speech . In some circumstances the speech output is absolutely urgent Turn left now and the predetermined amount of time is zero e.g. the digital assistant barges in and interrupts the user .

The disclosed embodiments improve on speech output response procedures and methods by interrupting a user who is speaking only with urgent messages. These embodiments are motivated by the general observation that a user will have some ability to understand two sets of audio outputs based on the user s ability to contextualize the two audio outputs without necessarily understanding every word. On the other hand the user will have a very difficult time understanding an audio output while contemporaneously speaking themselves. Therefore the disclosed embodiments may result in greater user comprehension of speech outputs assistants and a more satisfying user experience.

The embodiments disclosed herein provide methods systems computer readable storage medium and user interfaces for a digital assistant to intelligently and dynamically determine whether to provide a speech output. The method includes receiving a speech output to be provided to a user of a device and determining if the device is currently receiving speech input from a user. The method further includes upon determining that the device is not currently receiving speech input from the user providing the speech output to the user. On the other hand upon determining that the device is receiving speech input from the user the method further includes determining if provision of the speech output is urgent. When the speech output is urgent the speech output is provided to the user. When the speech output is not urgent provision of the speech output to the user is stayed e.g. at least temporarily .

In some embodiments the method further includes prior to receiving the speech output receiving a request from the user to perform a digital assistant task. In some embodiments the method further includes prior to receiving the speech output sending the request to a digital assistant server. In some embodiments the speech output is received from the server in response to the request. In some embodiments receiving the speech output includes generating the speech output at the device.

In some embodiments the method further includes upon determining that provision of the speech output is urgent providing the speech output to the user without delay.

In some embodiments the device is a telephone and determining if the device is currently receiving speech input from the user includes determining if the user is participating in a telephone conversation with a remote user.

In some embodiments upon determining that the device is not currently receiving speech input from the user audio data received from the remote user and the speech output to the user are provided contemporaneously without staying provision of the speech output due to the received audio data.

In some embodiments the method further includes during a telephone conversation with the remote user transmitting a request to the remote user to request the avoidance of digital assistant interruptions.

In some embodiments the method further includes upon determining that the device is no longer receiving speech input from the user providing the speech output to the user. In some embodiments determining that the device is no longer receiving speech input from the user includes determining that a predefined amount of time has elapsed between a time of a last speech input and a current time. In some embodiments the predefined amount of time is a function of a measure of the urgency of the speech output. In some embodiments the predetermined amount of time is a monotonically decreasing function of the measure of the urgency of the speech output thereby providing speech outputs with a greater measure of urgency in a lesser amount of time.

In some embodiments determining if the device is currently receiving speech input from the user includes determining if a last speech input was received within a predetermined period of time. In some embodiments the predetermined period of time is a function of a measure of a urgency of the output.

In some embodiments the method further includes determining if the output meets message skipping criteria and upon determining that the speech output meets message skipping criteria forgoing providing the output altogether. In some embodiments the message skipping criteria are met when the measure of the urgency is lower than a predefined threshold. In some embodiments the message skipping criteria are met when the speech output is a navigational command in a set of turn by turn directions and the device is scheduled to give a corresponding navigational command at a later time.

In some embodiments the method further includes during provision of the speech output receiving speech input from the user and discontinuing speech output. In some embodiments the method further includes determining if completion criteria corresponding to the speech output have been met. In such embodiments the method further includes upon determining that the completion criteria have not been met staying at least part of the speech output for later time. In such embodiments the method further includes upon determining that the completion criteria have been met forgoing output of the remainder of the speech output altogether. In some embodiments the completion criteria are met when a predefined percentage of the speech output has already been provided to the user. In some embodiments the predefined percentage of speech output is selected from the group consisting of 50 60 70 and 80 .

In some embodiments the device includes a display. In such embodiments the method further includes upon determining that provision of the speech output is not urgent providing a displayed output corresponding to the speech output.

In some embodiments the method further includes when the device is in a special mode of operation providing the speech output without delay. In some embodiments the special mode of operation is one or more of the group consisting of a hold mode of operation and a mute mode of operation.

In some embodiments when the speech output meets user configurable criteria for immediate provision providing the speech output without delay. In such embodiments the user configurable criteria are met when the device receives an electronic message e.g. an SMS or e mail message from a person that the user has previously identified as a very important person. In such embodiments the user configurable criteria are met when the device receives a stock price update and wherein the user has previously configured the device to provide the stock price update immediately.

In some embodiments when the device is in a do not disturb mode of operation provision of the speech output is forgone.

The details of one or more embodiments of the subject matter described in this specification are set forth in the accompanying drawings and the description below. Other features aspects and advantages of the subject matter will become apparent from the description the drawings and the claims.

Specifically a digital assistant is capable of accepting a user request at least partially in the form of a natural language command request statement narrative and or inquiry. Typically the user request seeks either an informational answer or performance of a task by the digital assistant. A satisfactory response to the user request is either provision of the requested informational answer performance of the requested task or a combination of the two. For example a user may ask the digital assistant a question such as Where am I right now Based on the user s current location the digital assistant may answer You are in Central Park near the west gate. The user may also request the performance of a task for example Please invite my friends to my girlfriend s birthday party next week. In response the digital assistant may acknowledge the request by saying Yes right away and then send a suitable calendar invite on behalf of the user to each of the user friends listed in the user s electronic address book. During performance of a requested task the digital assistant sometimes interacts with the user in a continuous dialogue involving multiple exchanges of information over an extended period of time. There are numerous other ways of interacting with a digital assistant to request information or performance of various tasks. In addition to providing verbal responses and taking programmed actions the digital assistant also provides responses in other visual or audio forms e.g. as text alerts music videos animations etc.

An example of a digital assistant is described in Applicant s U.S. Utility application Ser. No. 12 987 982 for Intelligent Automated Assistant filed Jan. 10 2011 the entire disclosure of which is incorporated herein by reference.

As shown in in some embodiments a digital assistant is implemented according to a client server model. The digital assistant includes a client side portion hereafter DA client executed on a user device and a server side portion hereafter DA server executed on a server system . The DA client communicates with the DA server through one or more networks . The DA client provides client side functionalities such as user facing input and output processing and communications with the DA server . The DA server provides server side functionalities for any number of DA clients each residing on a respective user device .

In some embodiments the DA server includes a client facing I O interface one or more processing modules data and models and an I O interface to external services . The client facing I O interface facilitates the client facing input and output processing for the digital assistant server . The one or more processing modules utilize the data and models to determine the user s intent based on natural language input and perform task execution based on inferred user intent. In some embodiments the DA server communicates with external services through the network s for task completion or information acquisition. The I O interface to external services facilitates such communications.

Examples of the user device include but are not limited to a handheld computer a personal digital assistant PDA a tablet computer a laptop computer a desktop computer a cellular telephone a smart phone an enhanced general packet radio service EGPRS mobile phone a media player a navigation device a game console a television a remote control or a combination of any two or more of these data processing devices or other data processing devices. More details on the user device are provided in reference to an exemplary user device shown in .

Examples of the communication network s include local area networks LAN and wide area networks WAN e.g. the Internet. The communication network s may be implemented using any known network protocol including various wired or wireless protocols such as e.g. Ethernet Universal Serial Bus USB FIREWIRE Global System for Mobile Communications GSM Enhanced Data GSM Environment EDGE code division multiple access CDMA time division multiple access TDMA Bluetooth Wi Fi voice over Internet Protocol VoIP Wi MAX or any other suitable communication protocol.

The server system is implemented on one or more standalone data processing apparatus or a distributed network of computers. In some embodiments the server system also employs various virtual devices and or services of third party service providers e.g. third party cloud service providers to provide the underlying computing resources and or infrastructure resources of the server system .

Although the digital assistant shown in includes both a client side portion e.g. the DA client and a server side portion e.g. the DA server in some embodiments the functions of a digital assistant is implemented as a standalone application installed on a user device. In addition the divisions of functionalities between the client and server portions of the digital assistant can vary in different embodiments. For example in some embodiments the DA client is a thin client that provides only user facing input and output processing functions and delegates all other functionalities of the digital assistant to a backend server.

For example a motion sensor a light sensor and a proximity sensor arc coupled to the peripherals interface to facilitate orientation light and proximity sensing functions. One or more other sensors such as a positioning system e.g. GPS receiver a temperature sensor a biometric sensor a gyro a compass an accelerometer and the like are also connected to the peripherals interface to facilitate related functionalities.

In some embodiments a camera subsystem and an optical sensor are utilized to facilitate camera functions such as taking photographs and recording video clips. Communication functions are facilitated through one or more wired and or wireless communication subsystems which can include various communication ports radio frequency receivers and transmitters and or optical e.g. infrared receivers and transmitters. An audio subsystem is coupled to speakers and a microphone to facilitate voice enabled functions such as voice recognition voice replication digital recording and telephony functions.

In some embodiments an I O subsystem is also coupled to the peripheral interface . The I O subsystem includes a touch screen controller and or other input controller s . The touch screen controller is coupled to a touch screen . The touch screen and the touch screen controller can for example detect contact and movement or break thereof using any of a plurality of touch sensitivity technologies such as capacitive resistive infrared surface acoustic wave technologies proximity sensor arrays and the like. The other input controller s can be coupled to other input control devices such as one or more buttons rocker switches thumb wheel infrared port USB port and or a pointer device such as a stylus.

In some embodiments the memory interface is coupled to memory . The memory can include high speed random access memory and or non volatile memory such as one or more magnetic disk storage devices one or more optical storage devices and or flash memory e.g. NAND NOR .

In some embodiments the memory stores an operating system a communication module a user interface module a sensor processing module a phone module and applications . The operating system includes instructions for handling basic system services and for performing hardware dependent tasks. The communication module facilitates communicating with one or more additional devices one or more computers and or one or more servers. The user interface module facilitates graphic user interface processing and output processing using other output channels e.g. speakers . The sensor processing module facilitates sensor related processing and functions. The phone module facilitates phone related processes and functions. The application module facilitates various functionalities of user applications such as electronic messaging web browsing media processing Navigation imaging and or other processes and functions.

As described in this specification the memory also stores client side digital assistant instructions e.g. in a digital assistant client module and various user data e.g. user specific vocabulary data preference data and or other data such as the user s electronic address book to do lists shopping lists etc. to provide the client side functionalities of the digital assistant.

In various embodiments the digital assistant client module is capable of accepting voice input e.g. speech input text input touch input and or gestural input through various user interfaces e.g. the I O subsystem of the user device . The digital assistant client module is also capable of providing output in audio e.g. speech output visual and or tactile forms. For example output can be provided as voice sound alerts text messages menus graphics videos animations vibrations and or combinations of two or more of the above. During operation the digital assistant client module communicates with the digital assistant server using the communication subsystems .

In some embodiments the digital assistant client module utilizes the various sensors subsystems and peripheral devices to gather additional information from the surrounding environment of the user device to establish a context associated with a user the current user interaction and or the current user input. In some embodiments the digital assistant client module provides the context information or a subset thereof with the user input to the digital assistant server to help infer the user s intent. In some embodiments the digital assistant also uses the context information to determine how to prepare and delivery outputs to the user.

In some embodiments the context information that accompanies the user input includes sensor information e.g. lighting ambient noise ambient temperature images or videos of the surrounding environment etc. In some embodiments the context information also includes the physical state of the device e.g. device orientation device location device temperature power level speed acceleration motion patterns cellular signals strength etc. In some embodiments information related to the software state of the user device e.g. running processes installed programs past and present network activities background services error logs resources usage etc. of the user device are provided to the digital assistant server as context information associated with a user input.

In some embodiments the DA client module selectively provides information e.g. user data stored on the user device in response to requests from the digital assistant server. In some embodiments the digital assistant client module also elicits additional input from the user via a natural language dialogue or other user interfaces upon request by the digital assistant server . The digital assistant client module passes the additional input to the digital assistant server to help the digital assistant server in intent deduction and or fulfillment of the user s intent expressed in the user request.

In various embodiments the memory includes additional instructions or fewer instructions. Furthermore various functions of the user device may be implemented in hardware and or in firmware including in one or more signal processing and or application specific integrated circuits.

The digital assistant system includes memory one or more processors an input output I O interface and a network communications interface . These components communicate with one another over one or more communication buses or signal lines .

In some embodiments the memory includes a non transitory computer readable medium such as high speed random access memory and or a non volatile computer readable storage medium e.g. one or more magnetic disk storage devices flash memory devices or other non volatile solid state memory devices .

In some embodiments the I O interface couples input output devices of the digital assistant system such as displays a keyboards touch screens and microphones to the user interface module . The I O interface in conjunction with the user interface module receive user inputs e.g. voice input keyboard inputs touch inputs etc. and process them accordingly. In some embodiments e.g. when the digital assistant is implemented on a standalone user device the digital assistant system includes any of the components and I O and communication interfaces described with respect to the user device in . In some embodiments the digital assistant system represents the server portion of a digital assistant implementation and interacts with the user through a client side portion residing on a user device e.g. the user device shown in .

In some embodiments the network communications interface includes wired communication port s and or wireless transmission and reception circuitry . The wired communication port s receive and send communication signals via one or more wired interfaces e.g. Ethernet Universal Serial Bus USB FIREWIRE etc. The wireless circuitry receives and sends RF signals and or optical signals from to communications networks and other communications devices. The wireless communications may use any of a plurality of communications standards protocols and technologies such as GSM EDGE CDMA TDMA Bluetooth Wi Fi VoIP Wi MAX or any other suitable communication protocol. The network communications interface enables communication between the digital assistant system with networks such as the Internet an Intranet and or a wireless network such as a cellular telephone network a wireless local area network LAN and or a metropolitan area network MAN and other devices.

In some embodiments memory or the computer readable storage media of memory stores programs modules instructions and data structures including all or a subset of an operating system a communications module a user interface module one or more applications and a digital assistant module . The one or more processors execute these programs modules and instructions and reads writes from to the data structures.

The operating system e.g. Darwin RTXC LINUX UNIX OS X WINDOWS or an embedded operating system such as VxWorks includes various software components and or drivers for controlling and managing general system tasks e.g. memory management storage device control power management etc. and facilitates communications between various hardware firmware and software components.

The communications module facilitates communications between the digital assistant system with other devices over the network communications interface . For example the communication module may communicate with the communication interface of the device shown in . The communications module also includes various components for handling data received by the wireless circuitry and or wired communications port .

The user interface module receives commands and or inputs from a user via the I O interface e.g. from a keyboard touch screen pointing device controller and or microphone and generates user interface objects on a display. The user interface module also prepares and delivers outputs e.g. speech sound animation text icons vibrations haptic feedback and light etc. to the user via the I O interface e.g. through displays audio channels speakers and touch pads etc. .

The applications include programs and or modules that are configured to be executed by the one or more processors . For example if the digital assistant system is implemented on a standalone user device the applications may include user applications such as games a calendar application a navigation application or an email application. If the digital assistant system is implemented on a server farm the applications may include resource management applications diagnostic applications or scheduling applications for example.

The memory also stores the digital assistant module or the server portion of a digital assistant . In some embodiments the digital assistant module includes the following sub modules or a subset or superset thereof an input output processing module a speech to text STT processing module a natural language processing module a dialogue flow processing module a task flow processing module a service processing module and an interruption handling module . Each of these modules has access to one or more of the following data and models of the digital assistant or a subset or superset thereof ontology vocabulary index user data task flow models service models and priority parameters database .

In some embodiments using the processing modules data and models implemented in the digital assistant module the digital assistant performs at least some of the following identifying a user s intent expressed in a natural language input received from the user actively eliciting and obtaining information needed to fully infer the user s intent e.g. by disambiguating words names intentions etc. determining the task flow for fulfilling the inferred intent and executing the task flow to fulfill the inferred intent. In this specifications more details regarding the interruption handling module and its use of the priority parameters are provided later.

In some embodiments as shown in the I O processing module interacts with the user through the I O devices in or with a user device e.g. a user device in through the network communications interface in to obtain user input e.g. a speech input and to provide responses e.g. as speech outputs to the user input. The I O processing module optionally obtains context information associated with the user input from the user device along with or shortly after the receipt of the user input. The context information includes user specific data vocabulary and or preferences relevant to the user input. In some embodiments the context information also includes software and hardware states of the device e.g. the user device in at the time the user request is received and or information related to the surrounding environment of the user at the time that the user request was received. In some embodiments the I O processing module also sends follow up questions to and receives answers from the user regarding the user request. When a user request is received by the I O processing module and the user request contains a speech input the I O processing module forwards the speech input to the speech to text STT processing module for speech to text conversions.

The speech to text processing module receives speech input e.g. a user utterance captured in a voice recording through the I O processing module . In some embodiments the speech to text processing module uses various acoustic and language models to recognize the speech input as a sequence of phonemes and ultimately a sequence of words or tokens written in one or more languages. The speech to text processing module can be implemented using any suitable speech recognition techniques acoustic models and language models such as Hidden Markov Models Dynamic Time Warping DTW based speech recognition and other statistical and or analytical techniques. In some embodiments the speech to text processing can be performed at least partially by a third party service or on the user s device. Once the speech to text processing module obtains the result of the speech to text processing e.g. a sequence of words or tokens it passes the result to the natural language processing module for intent deduction.

The natural language processing module natural language processor of the digital assistant takes the sequence of words or tokens token sequence generated by the speech to text processing module and attempts to associate the token sequence with one or more actionable intents recognized by the digital assistant. An actionable intent represents a task that can be performed by the digital assistant and has an associated task flow implemented in the task flow models . The associated task flow is a series of programmed actions and steps that the digital assistant takes in order to perform the task. The scope of a digital assistant s capabilities is dependent on the number and variety of task flows that have been implemented and stored in the task flow models or in other words on the number and variety of actionable intents that the digital assistant recognizes. The effectiveness of the digital assistant however is also dependent on the assistant s ability to infer the correct actionable intent s from the user request expressed in natural language.

In some embodiments in addition to the sequence of words or tokens obtained from the speech to text processing module the natural language processor also receives context information associated with the user request e.g. from the I O processing module . The natural language processor optionally uses the context information to clarify supplement and or further define the information contained in the token sequence received from the speech to text processing module . The context information includes for example user preferences hardware and or software states of the user device sensor information collected before during or shortly after the user request prior interactions e.g. dialogue between the digital assistant and the user and the like. As described in this specification context information is dynamic and can change with time location content of the dialogue and other factors.

In some embodiments the natural language processing is based on e.g. logy . The ontology is a hierarchical structure containing many nodes each node representing either an actionable intent or a property relevant to one or more of the actionable intents or other properties . As noted above an actionable intent represents a task that the digital assistant is capable of performing i.e. it is actionable or can be acted on. A property represents a parameter associated with an actionable intent or a sub aspect of another property. A linkage between an actionable intent node and a property node in the ontology defines how a parameter represented by the property node pertains to the task represented by the actionable intent node.

In some embodiments the ontology is made up of actionable intent nodes and property nodes. Within the ontology each actionable intent node is linked to one or more property nodes either directly or through one or more intermediate property nodes. Similarly each property node is linked to one or more actionable intent nodes either directly or through one or more intermediate property nodes. For example as shown in the ontology may include a restaurant reservation node i.e. an actionable intent node . Property nodes restaurant date time for the reservation and party size are each directly linked to the actionable intent node i.e. the restaurant reservation node . In addition property nodes cuisine price range phone number and location are sub nodes of the property node restaurant and are each linked to the restaurant reservation node i.e. the actionable intent node through the intermediate property node restaurant. For another example as shown in the ontology may also include a set reminder node i.e. another actionable intent node . Property nodes date time for the setting the reminder and subject for the reminder are each linked to the set reminder node. Since the property date time is relevant to both the task of making a restaurant reservation and the task of setting a reminder the property node date time is linked to both the restaurant reservation node and the set reminder node in the ontology .

An actionable intent node along with its linked concept nodes may be described as a domain. In the present discussion each domain is associated with a respective actionable intent and refers to the group of nodes and the relationships therebetween associated with the particular actionable intent. For example the ontology shown in includes an example of a restaurant reservation domain and an example of a reminder domain within the ontology . The restaurant reservation domain includes the actionable intent node restaurant reservation property nodes restaurant date time and party size and sub property nodes cuisine price range phone number and location. The reminder domain includes the actionable intent node set reminder and property nodes subject and date time. In some embodiments the ontology is made up of many domains. Each domain may share one or more property nodes with one or more other domains. For example the date time property node may be associated with many different domains e.g. a scheduling domain a travel reservation domain a movie ticket domain etc. in addition to the restaurant reservation domain and the reminder domain .

While illustrates two example domains within the ontology other domains or actionable intents include for example initiate a phone call find directions schedule a meeting send a message and provide an answer to a question read a list providing navigation instructions provide instructions for a task and so on. A send a message domain is associated with a send a message actionable intent node and may further include property nodes such as recipient s message type and message body. The property node recipient may be further defined for example by the sub property nodes such as recipient name and message address. 

In some embodiments the ontology includes all the domains and hence actionable intents that the digital assistant is capable of understanding and acting upon. In some embodiments the ontology may be modified such as by adding or removing entire domains or nodes or by modifying relationships between the nodes within the ontology .

In some embodiments nodes associated with multiple related actionable intents may be clustered under a super domain in the ontology . For example a travel super domain may include a cluster of property nodes and actionable intent nodes related to travels. The actionable intent nodes related to travels may include airline reservation hotel reservation car rental get directions find points of interest and so on. The actionable intent nodes under the same super domain e.g. the travels super domain may have many property nodes in common. For example the actionable intent nodes for airline reservation hotel reservation car rental get directions find points of interest may share one or more of the property nodes start location destination departure date time arrival date time and party size. 

In some embodiments each node in the ontology is associated with a set of words and or phrases that are relevant to the property or actionable intent represented by the node. The respective set of words and or phrases associated with each node is the so called vocabulary associated with the node. The respective set of words and or phrases associated with each node can be stored in the vocabulary index in association with the property or actionable intent represented by the node. For example returning to the vocabulary associated with the node for the property of restaurant may include words such as food drinks cuisine hungry eat pizza fast food meal and so on. For another example the vocabulary associated with the node for the actionable intent of initiate a phone call may include words and phrases such as call phone dial ring call this number make a call to and so on. The vocabulary index optionally includes words and phrases in different languages.

The natural language processor receives the token sequence e.g. a text string from the speech to text processing module and determines what nodes are implicated by the words in the token sequence. In some embodiments if a word or phrase in the token sequence is found to be associated with one or more nodes in the ontology via the vocabulary index the word or phrase will trigger or activate those nodes. Based on the quantity and or relative importance of the activated nodes the natural language processor will select one of the actionable intents as the task that the user intended the digital assistant to perform. In some embodiments the domain that has the most triggered nodes is selected. In some embodiments the domain having the highest confidence value e.g. based on the relative importance of its various triggered nodes is selected. In some embodiments the domain is selected based on a combination of the number and the importance of the triggered nodes. In some embodiments additional factors are considered in selecting the node as well such as whether the digital assistant has previously correctly interpreted a similar request from a user.

In some embodiments the digital assistant also stores names of specific entities in the vocabulary index so that when one of these names is detected in the user request the natural language processor will be able to recognize that the name refers to a specific instance of a property or sub property in the ontology. In some embodiments the names of specific entities are names of businesses restaurants people movies and the like. In some embodiments the digital assistant searches and identifies specific entity names from other data sources such as the user s address book a movies database a musicians database and or a restaurant database. In some embodiments when the natural language processor identifies that a word in the token sequence is a name of a specific entity such as a name in the user s address book that word is given additional significance in selecting the actionable intent within the ontology for the user request.

For example when the words Mr. Santo are recognized from the user request and the last name Santo is found in the vocabulary index as one of the contacts in the user s contact list then it is likely that the user request corresponds to a send a message or initiate a phone call domain. For another example when the words ABC Caf are found in the user request and the term ABC Caf is found in the vocabulary index as the name of a particular restaurant in the user s city then it is likely that the user request corresponds to a restaurant reservation domain.

User data includes user specific information such as user specific vocabulary user preferences user address user s default and secondary languages user s contact list and other short term or long term information for each user. In some embodiments the natural language processor uses the user specific information to supplement the information contained in the user input to further define the user intent. For example for a user request invite my friends to my birthday party the natural language processor is able to access user data to determine who the friends are and when and where the birthday party would be held rather than requiring the user to provide such information explicitly in his her request.

Other details of searching an ontology based on a token string is described in U.S. Utility application Ser. No. 12 341 743 for Method and Apparatus for Searching Using an Active Ontology filed Dec. 22 2008 the entire disclosure of which is incorporated herein by reference.

In some embodiments once the natural language processor identifies an actionable intent or domain based on the user request the natural language processor generates a structured query to represent the identified actionable intent. In some embodiments the structured query includes parameters for one or more nodes within the domain for the actionable intent and at least some of the parameters arc populated with the specific information and requirements specified in the user request. For example the user may say Make me a dinner reservation at a sushi place at 7. In this case the natural language processor may be able to correctly identify the actionable intent to be restaurant reservation based on the user input. According to the ontology a structured query for a restaurant reservation domain may include parameters such as Cuisine Time Date Party Size and the like. In some embodiments based on the information contained in the user s utterance the natural language processor generates a partial structured query for the restaurant reservation domain where the partial structured query includes the parameters Cuisine Sushi and Time 7 pm . However in this example the user s utterance contains insufficient information to complete the structured query associated with the domain. Therefore other necessary parameters such as Party Size and Date are not specified in the structured query based on the information currently available. In some embodiments the natural language processor populates some parameters of the structured query with received context information. For example in some embodiments if the user requested a sushi restaurant near me the natural language processor populates a location parameter in the structured query with GPS coordinates from the user device .

In some embodiments the natural language processor passes the structured query including any completed parameters to the task flow processing module task flow processor . The task flow processor is configured to receive the structured query from the natural language processor complete the structured query if necessary and perform the actions required to complete the user s ultimate request. In some embodiments the various procedures necessary to complete these tasks are provided in task flow models . In some embodiments the task flow models include procedures for obtaining additional information from the user and task flows for performing actions associated with the actionable intent.

As described above in order to complete a structured query the task flow processor may need to initiate additional dialogue with the user in order to obtain additional information and or disambiguate potentially ambiguous utterances. When such interactions are necessary the task flow processor invokes the dialogue processing module dialogue processor to engage in a dialogue with the user. In some embodiments the dialogue processor determines how and or when to ask the user for the additional information and receives and processes the user responses. The questions are provided to and answers are received from the users through the I O processing module . In some embodiments the dialogue processor presents dialogue output to the user via audio and or visual output and receives input from the user via spoken or physical e.g. clicking responses. Continuing with the example above when the task flow processor invokes the dialogue flow processor to determine the party size and date information for the structured query associated with the domain restaurant reservation the dialogue flow processor generates questions such as For how many people and On which day to pass to the user. Once answers are received from the user the dialogue flow processor can then populate the structured query with the missing information or pass the information to the task flow processor to complete the missing information from the structured query.

In some cases the task flow processor may receive a structured query that has one or more ambiguous properties. For example a structured query for the send a message domain may indicate that the intended recipient is Bob and the user may have multiple contacts named Bob. The task flow processor will request that the dialogue processor disambiguate this property of the structured query. In turn the dialogue processor may ask the user Which Bob and display or read a list of contacts named Bob from which the user may choose.

Once the task flow processor has completed the structured query for an actionable intent the task flow processor proceeds to perform the ultimate task associated with the actionable intent. Accordingly the task flow processor executes the steps and instructions in the task flow model according to the specific parameters contained in the structured query. For example the task flow model for the actionable intent of restaurant reservation may include steps and instructions for contacting a restaurant and actually requesting a reservation for a particular party size at a particular time. For example using a structured query such as restaurant reservation restaurant ABC Caf date 3 12 2012 time 7 pm party size 5 the task flow processor may perform the steps of 1 logging onto a server of the ABC Cafe or a restaurant reservation system such as OPENTABLE 2 entering the date time and party size information in a form on the website 3 submitting the form and 4 making a calendar entry for the reservation in the user s calendar.

In some embodiments the task flow processor employs the assistance of a service processing module service processor to complete a task requested in the user input or to provide an informational answer requested in the user input. For example the service processor can act on behalf of the task flow processor to make a phone call set a calendar entry invoke a map search invoke or interact with other user applications installed on the user device and invoke or interact with third party services e.g. a restaurant reservation portal a social networking website a banking portal etc. . In some embodiments the protocols and application programming interfaces API required by each service can be specified by a respective service model among the services models . The service processor accesses the appropriate service model for a service and generates requests for the service in accordance with the protocols and APIs required by the service according to the service model.

For example if a restaurant has enabled an online reservation service the restaurant can submit a service model specifying the necessary parameters for making a reservation and the APIs for communicating the values of the necessary parameter to the online reservation service. When requested by the task flow processor the service processor can establish a network connection with the online reservation service using the web address stored in the service model and send the necessary parameters of the reservation e.g. time date party size to the online reservation interface in a format according to the API of the online reservation service.

In some embodiments the natural language processor dialogue processor and task flow processor are used collectively and iteratively to infer and define the user s intent obtain information to further clarify and refine the user intent and finally generate a response i.e. an output to the user or the completion of a task to fulfill the user s intent.

In some embodiments after all of the tasks needed to fulfill the user s request have been performed the digital assistant formulates a confirmation response and sends the response back to the user through the I O processing module . If the user request seeks an informational answer the confirmation response presents the requested information to the user. In some embodiments the digital assistant also requests the user to indicate whether the user is satisfied with the response produced by the digital assistant .

More details on the digital assistant can be found in the U.S. Utility application Ser. No. 12 987 982 entitled Intelligent Automated Assistant filed Jan. 18 2010 U.S. Utility Application No. 61 493 201 entitled Generating and Processing Data Items That Represent Tasks to Perform filed Jun. 3 2011 the entire disclosures of which are incorporated herein by reference.

In most scenarios when the digital assistant receives a user input from a user the digital assistant attempts to provide an appropriate response to the user input with as little delay as possible. For example suppose the user requests certain information e.g. current traffic information by providing a speech input e.g. How does the traffic look right now . Right after the digital assistant receives and processes the speech input the digital assistant optionally provides a speech output e.g. Looking up traffic information . . . acknowledging receipt of the user request. After the digital assistant obtains the requested information in response to the user request the digital assistant proceeds to provide the requested information to the user without further delay. For example in response to the user s traffic information request the digital assistant may provide a series of one or more discrete speech outputs separated by brief pauses e.g. There are 2 accidents on the road. One accident is on 101 north bound near Whipple Avenue. And a second accident is on 85 north near 280. immediately after the speech outputs are generated.

For the purpose of this specification the initial acknowledgement of the user request and the series of one or more discrete speech outputs provided in response to the user request are all considered sub responses of a complete response to the user request. In other words the digital assistant initiates an information provision process for the user request upon receipt of the user request and during the information provision process the digital assistant prepares and provides each sub response of the complete response to the user request without requiring further prompts from the user.

Sometimes additional information or clarification e.g. route information is required before the requested information can be obtained. In such scenarios the digital assistant outputs a question e.g. Where are you going to the user asking for the additional information or clarification. In some embodiments the question provided by the digital assistant is considered a complete response to the user request because the digital assistant will not take further actions or provide any additional response to the user request until a new input is received from the user. In some embodiments once the user provides the additional information or clarification the digital assistant initiates a new information provision process for a new user request established based on the original user request and the additional user input.

In some embodiments the digital assistant initiates a new information provision process upon receipt of each new user input and each existing information provision process terminates either 1 when all of the sub responses of a complete response to the user request have been provided to the user or 2 when the digital assistant provides a request for additional information or clarification to the user regarding a previous user request that started the existing information provision process.

In general after a user request for information or performance of a task is received by the digital assistant it is desirable that the digital assistant provides a response e.g. either an output containing the requested information an acknowledgement of a requested task or an output to request a clarification as promptly as possible. Real time responsiveness of the digital assistant is one of the key factors in evaluating performance of the digital assistant. In such cases a response is prepared as quickly as possible and a default delivery time for the response is a time immediately after the response is prepared.

Sometimes however after an initial sub response provided immediately after receipt of the user input the digital assistant provides the remaining one or more sub responses one at a time over an extended period of time. In some embodiments the information provision process for a user request is stretched out over an extended period of time that is longer than the sum of the time required to provide each sub response individually. For example in some embodiments short pauses i.e. brief periods of silence are inserted between an adjacent pair of sub responses e.g. a pair of consecutive speech outputs when they are delivered to the user through an audio output channel.

In some embodiments a sub response is held in abeyance after it is prepared and is delivered only when a predetermined condition has been met. In some embodiments the predetermined condition is met when a predetermined trigger time has been reached according to a system clock and or when a predetermined trigger event has occurred. For example if the user says to the digital assistant set me a timer for 5 minutes the digital assistant initiates an information provision process upon receipt of the user request. During the information provision process the digital assistant provides a first sub response e.g. OK timer started. right away and does not provide a second and final sub response e.g. OK five minutes are up until 5 minutes later. In such cases the default delivery time for the first sub response is a time immediately after the first sub response is prepared and the default delivery time for the second final sub response is a time immediately after the occurrence of the trigger event e.g. the elapse of 5 minutes from the start of the timer . The information provision process is terminated when the digital assistant finishes providing the final sub response to the user. In various embodiments the second sub response is prepared any time e.g. right after the first sub response is prepared or until shortly before the default delivery time for the second sub response before the default delivery time for the second sub response.

As will be described in more details later in this specification a context sensitive interruption handler e.g. the interruption handling module in is implemented on top of the default rules for providing responses to the user requests and or for providing the alert items for reminders and notifications. In some embodiments the interruption handler gathers information regarding the present context in real time and determines in real time whether the default rules for provision of responses reminders and or notifications need to be altered because the device is currently receiving speech input for a user. For example in some contexts it would be more suitable to delay e.g. staying at least temporary provision of a non urgent speech output because a user is speaking into the device while other times it may be more suitable to provide an urgent speech output immediately e.g. barge in or interrupt the user . In addition in some contexts it is acceptable and in fact more suitable to forgo providing the speech output altogether.

The device receives the speech input and performs the necessary operations to for example determine the location of the nearest library as described in greater detail with reference to method and . In this example the device determines that library is the nearest library and responds promptly with a speech output SO Ok Continue Straight 

At a location designated by a phone feature included on the same device as the digital assistant receives an incoming call as indicated by ring tone icon . The user answers the phone by providing speech input SI stating Hey John Haven t heard from you in ages. How is the family At the completion of speech input SI the user is at a location designated by . However in the interim between and the device receives e.g. from a server or a different module on the same device a speech output SO indicating Turn right on First Street in 3 miles. In this example speech output SO has a low measure of urgency because the device is scheduled to warn the user of the upcoming turn one or more additional times before the user reaches First Street e.g. additional warning such as Turn Right in 1 mile and or Turn right now onto First Street . Because the device was receiving speech input SI when speech output SO was to be outputted until the device stays output of speech output SO. Furthermore because of the very low priority associated with speech output SO e.g. due to the redundancy associated with the turn by turn direction in this example the stay actually forgoes output of speech output SO altogether e.g. never outputs a command to turn left in three miles relying instead on the 1 mile and immediate warnings .

During a speech input SI the user requests that the device inform the user of the Knicks score whenever the game should end stating Tell me the Knicks score when the game ends. The device responds promptly acknowledging the request stating Ok I will tell you the score of the Knicks game when it ends. As explained previously the phone receives an incoming call which the user answers in speech input SI by stating Hey John Haven t heard from you in ages. How is the family During SI the Knicks game ends the device receives a speech output SO indicating the score as requested to be provided to the user. In this example speech output SO is not considered urgent because the Knicks score will not change in the time that the user is speaking e.g. during the time that the device is receiving speech input For this reason the device stays speech output SO as indicated by arrow until the user has finished speaking and then outputs speech output SO. However in some embodiments the device response to the user request in a non audible fashion such as by displaying the Knicks score on a display of the device. In some embodiments because a displayed response will not interrupt the user s speech such a response is provided without delay. In some embodiments such a displayed response is provided in conjunction with or alternatively in lieu of a stayed speech output e.g. when the displayed response is in lieu of a speech output the speech output is forgone altogether .

In some embodiments prior to receiving the speech output cf. the device receives a request from the user to perform a digital assistant task. For example the user requests that the digital assistant find a cheap nearby restaurant by stating as a speech input for example Find me something for dinner not too expensive. Alternatively the user requests that the digital assistant make a reservation at a particular restaurant for example by stating as a speech input Make me a reservation at Boulevard for four Alternatively the user asks for turn by turn directions to a local landmark Directions to the Golden Gate Bridge or ask for a baseball score How did the Sox do or a stock price How did Apple s stock do today .

In some embodiments prior to receiving a speech output cf. the device sends the request to a digital assistant server. The speech output is received from the server in response to the request. In some embodiments prior to sending the request to the server the device performs a speech to text operation e.g. with STT Processing Module . In some embodiments speech to text is performed at the server. In some embodiments the device performs the natural language processing e.g. with Natural Language Processing Module including performing the ontology vocabulary analysis and context matching using user data for example to disambiguate which Sox team the user is interested in based on preferences such as favorites browser history and or digital assistant request history . The server then performs any remaining operations necessary to service the request e.g. identifies one or more actionable items one or more missing properties from the actionable properties searches one or more database and or the Internet for missing information etc. In some embodiments the server prepares a response e.g. a text string and returns the response to the user. In some embodiments the server prepares a speech response e.g. audio data and transmits the speech response to the digital assistant.

In any event the device receives a speech output to be provided to a user of the device. In some embodiments the speech output is received from the server in response to the request e.g. the speech output is an appropriate response to the request made by the user be it a request for a dinner reservation or turn by turn directions . In some embodiments receiving the speech output includes generating the speech output at the device e.g. for example the server returns a text string in response to the request and the device generates the speech output from the text string using a text to speech engine . It should be understood that in some embodiments receiving a speech output means receiving from a server which optionally includes additional processing operations such as text to speech operations . Alternatively or in addition receiving a speech output means receiving at a first device component e.g. a module such as interruption handling module or a processor executing instructions held in a module such as interruption handling module from a second device component e.g. a module such as natural language processing module or a processor executing instructions held in a module such as natural language processing module .

The device determines if the device is currently receiving speech input from a user. For example in some embodiments the device is a telephone and determining if the device is currently receiving speech input from the user includes determining if the user is participating in a telephone conversation with a remote user. In such embodiments the device determines that it is currently receiving speech input from the user if the user is currently speaking in the conversation. In some embodiments when a party on the other end of the telephone conversation is speaking or if there is silence while the user and the other party go about doing other things the device determines that it is not currently receiving speech input e.g. in some implementations an active telephone conversation is sufficient for a determination that the device is receiving speech input while in alternative implementations the device determines that speech input is being received when the user is actually the one speaking in the conversation .

In some embodiments determining if the device is currently receiving speech input from the user includes determining if a last speech input was received within a predetermined period of time. For example because there are natural pauses in the ebb and flow of conversation e.g. pauses to catch one s breath pauses to consider what to say next in some embodiments the devices waits a predetermined amount of time before concluding that the user is not speaking rather than detecting speech input in an instantaneous or nearly instantaneous fashion. In some embodiments the predetermined period of time is a function of a measure of a urgency of the output. For example when the device has an urgent message Turn right NOW in an output queue the device will wait a shorter amount of time before determining that the user is not speaking thus barging in the moment the user pauses to catch his or her breath or consider what to say next . In some embodiments determining if the device is currently receiving speech input includes a squelch determination e.g. based on a particular strength or directionality threshold at a device microphone to disambiguate for example background noise and or speech made by the user but not intended as speech input e.g. during a telephone conversation when the user pauses the conversation to talk to another party in person .

Upon determining that the device is not currently receiving speech input from the user the device provides the speech output to the user. In some embodiments the device provides audio data received from the remote user cf. when the user is participating in a telephone and the speech output to the user contemporaneously without staying provision of the speech output due to the received audio data. For example in such embodiments when the remote user i.e. the other party is talking during a telephone conversation the device will nevertheless provide speech output from the digital assistant. In some embodiments providing audio data e.g. speech received from the remote user and the speech output to the user contemporaneously means muting the audio data from the remote user temporarily while the speech output is provided. For example in such embodiments when the remote user says Four score and seven years ago our fathers brought forth on this continent a new nation conceived in liberty and dedicated to the proposition that all men are created equal and the speech output in an output queue is Turn left the audio actually provided to the user will be Four score and seven years ago our fathers brought forth on this continent a . . . Turn Left . . . conceived in liberty and dedicated to the proposition that all men are created equal. The user will thus be aware that the remote user is reciting Lincoln s Gettysburg address and will also understand the instructions to turn left. In some embodiments the audio data received from the remote user and the speech output are provided using different vocal accents and or volumes to disambiguate the remote user from the digital assistant.

In some circumstances the user will have configured the device to override provision of the speech output. For example when the device is in a do not disturb mode of operation provision of the speech output is forgone . In some embodiments the device is in a do not disturb mode of operation when the user has configured the device to be in a do not disturb mode of operation. In some embodiments the device is in a do not disturb mode of operation when the user has configured a device to operation in a mode distinct from do not disturb but nevertheless includes do not disturb as a feature e.g. the device is in an airplane mode or a quiet mode or the user has configured the device to be in a quiet mode during particular hours of the day etc.

In some embodiments during provision of the speech output the device receives speech input from the user. For example the device is in the midst of providing a speech output when the user interrupts by talking as part of a telephone conversation or speaking another request for a digital assistant operation. As an example of the latter scenario when a user has previously requested that the device locate a nearby Chinese restaurant the user may interrupt the response to indicate that he or she also needs to send an SMS message to a coworker. In such embodiments the device will discontinue speech output. In such embodiments the device will determine if completion criteria corresponding to the speech output have been met. In some embodiments the completion criteria are met when a predefined percentage of the speech output has already been provided to the user. For example in some embodiments the predefined percentage of speech output is a percentage from the group consisting of 50 60 70 and 80 . Upon determining that the completion criteria have not been met the device stays at least part of the speech output for later time and upon determining that the completion criteria have been met the device forgoes output of the remainder of the speech output altogether. In some embodiments the completion criteria are met when the device determines that the remainder of the message is moot e.g. after requesting Chinese food and during a recitation by the device of a list of local Chinese restaurants the user declares Never mind I want That food. 

Upon determining that the device is receiving speech input from the user the device determines if provision of the speech output is urgent. In some embodiments the speech output is urgent when the speech output meets user configurable criteria for immediate provision. For example in some embodiments the user configurable criteria are met when the device receives an electronic message from a person that the user has previously identified as a very important person VIP . Alternatively or in addition in some embodiments the user configurable criteria are met when the device receives a stock price update and the user has previously configured the device to provide the stock price update immediately for example the user has configured the device to alert him or her when a particular stock price exceeds a particular value so that the user can consider selling the stock as fast as possible . In some embodiments a determination is made as to whether or not provision of the speech input is urgent based on context. For example when the speech output includes directions to turn in the near future Turn left NOW the device recognizes that the message is urgent. Upon determining that provision of the speech output is urgent the device provides the speech output to the user e.g. the device barges in and provides the speech output despite receiving speech input from the user . In some embodiments the device provides the speech output to the user without delay e.g. additional delay added on account of the fact that the user is speaking on top of any required processing time needed to produce the output .

Upon determining that provision of the speech output is not urgent the device stays provision of the speech output to the user. As explained in greater detail below in some circumstances staying provision of the speech output means delaying provision of the speech output until a later time and then providing the speech output while in other circumstances staying means forgoing provision of the speech output altogether and never providing that particular speech output. In some circumstances whether staying means temporarily delaying provision of the speech output or permanently forgoing provision of the speech output depends on the particular embodiment implementation and the context surrounding the speech output cf. . In some embodiments when the device is in a special mode of operation the device provides the speech output without delay e.g. even if the device is currently receiving speech input from the user . For example in some embodiments the device includes an Interrupt Me mode of operation whereby the user is to be interrupted by the digital assistant e.g. the digital assistant is to barge in regardless of whether the device is receiving speech input. In some embodiments the special mode of operation is one or more of the group consisting of a hold mode of operation and a mute mode of operation.

Flow paths and represent additional operation that are optionally performed upon determining that provision of the speech output is not urgent in accordance with some embodiments of method . It should be understood that the various operations described with respect to flow paths are not necessarily mutually exclusive and in some circumstances combined.

For example according to some embodiments upon determining that the device is no longer receiving speech input from the user the device provides the speech output to the user. In some embodiments determining that the device is no longer receiving speech input from the user includes determining that a predefined amount of time has elapsed between a time of a last speech input and a current time. In some embodiments the predefined amount of time is a function of a measure of the urgency of the speech output. In some embodiments the predetermined amount of time is a monotonically decreasing function of the measure of the urgency of the speech output thereby providing speech outputs with a greater measure of urgency in a lesser amount of time. For example in these embodiments the device waits a shorter amount of time before providing an urgent speech output after the user has finished speaking than if the speech output was less urgent.

In some embodiments the device determines if the output meets message skipping criteria. In some embodiments the message skipping criteria are met when the measure of the urgency is lower than a predefined threshold. For example when the speech output is one of several warnings in a sequence of warnings in some circumstances it is unnecessary to provide the user with each warning in the sequence of warnings. In some embodiments the message skipping criteria are met when the speech output is a navigational command in a set of turn by turn directions and the device is scheduled to give a corresponding navigational command at a later time. For example the device is scheduled to provide navigation commands at 2 miles 1 miles a mile and moments before a turn. In such circumstances when the user is providing speech input when the 1 mile command would otherwise be recited the device forgoes provision of the 1 mile command altogether. The driver will correspondingly still be notified of the turn by the mile command as well as moments before the turn.

In some embodiments when the device includes a display upon determining that provision of the speech output is not urgent the device provides a displayed output corresponding to the speech output.

The operations described above with reference to are optionally implemented by components depicted in and or . For example receiving operation providing operation receiving operation are optionally implemented by digital assistant I O processing module interruption handling module and or natural language processing module which are described in detail above. Similarly it would be clear to a person having ordinary skill in the art how other processes can be implemented based on the components depicted in and or .

It should be understood that the particular order in which the operations have been described above is merely exemplary and is not intended to indicate that the described order is the only order in which the operations could be performed. One of ordinary skill in the art would recognize various ways to reorder the operations described herein.

The foregoing description for purpose of explanation has been described with reference to specific embodiments. However the illustrative discussions above are not intended to be exhaustive or to limit the invention to the precise forms disclosed. Many modifications and variations are possible in view of the above teachings. The embodiments were chosen and described in order to best explain the principles of the invention and its practical applications to thereby enable others skilled in the art to best utilize the invention and various embodiments with various modifications as are suited to the particular use contemplated.

