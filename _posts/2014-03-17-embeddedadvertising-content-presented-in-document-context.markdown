---

title: Embedded-advertising content presented in document context
abstract: A user may activate an embedded advertisement in an embedded window in a document, such as a web page. This embedded advertisement may be associated with a domain (a granddaughter domain) that is different than the domain associated with the embedded window (a daughter domain) and the domain associated with the document (a parent domain). In older browsers, cross-domain communication may not be supported in this circumstance. This problem is solved by opening a series of windows from the granddaughter domain, each of which is associated with a candidate origin of the document. Then, access commands associated with the windows are communicated to the domain of the document. Only the access command for the window having the correct origin of the domain of the document is processed, which results in content associated with the embedded advertisement being linked at a source and presented or displayed in the embedded advertisement.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08930971&OS=08930971&RS=08930971
owner: LinkedIn Corporation
number: 08930971
owner_city: Mountain View
owner_country: US
publication_date: 20140317
---
This application claims priority under 35 U.S.C. 120 as a Continuation in Part patent application of U.S. patent application Ser. No. 14 025 825 entitled Cross Document Communication by Kevin Mikles filed on Sep. 13 2013 the contents of which are herein incorporated by reference. The present application further claims priority under 35 U.S.C. 119 to U.S. Provisional Patent Application No. 61 946 530 entitled Embedded Advertising Content Presented in Document Context by Aviad Pinkovezky Kevin R. Mikles Eldo K. Cherian Kancheng Cao Meera G. Bhatia and Sanjay Kshetramade filed 28 Feb. 2014 the contents of which are herein incorporated by reference.

The described embodiments relate to techniques for providing content associated with embedded advertising in the context of a parent document. More specifically the described embodiments relate to techniques for providing content such as presentations or video associated with embedded advertising in the context or the environment of a web page or a website.

Many web pages and websites include advertisements. For example a web page may include a link to content associated with an advertisement. If a user activates the link the content is displayed.

However the content is often displayed separately from the original web page. In particular the original web page may be displayed in one tab of a browser while the advertising content may be displayed in a separate tab that is in or that is associated with another web page that includes the content. This technique for displaying the content separate from the original web page may cause the connection or relationship between the original web page and the advertisement to be lost. In addition the content is usually either static or in the case of video has limited functionality. These limitations often restrict the overall user experience when viewing and more generally interacting with the content. Consequently existing advertising techniques may adversely impact click through rates and conversion rates.

Note that like reference numerals refer to corresponding parts throughout the drawings. Moreover multiple instances of the same part are designated by a common prefix separated from an instance number by a dash.

Embodiments of a computer system a technique for providing content and a computer program product e.g. software for use with the computer system are described. According to this communication technique a user activates an embedded advertisement in an embedded window in a document such as a web page. The embedded advertisement may be associated with a domain a granddaughter domain that is different than the domain associated with the embedded window a daughter domain and the domain associated with the document a first original or parent domain . In older browsers cross domain or cross document communication may not be supported in this circumstance.

This problem is solved by opening a series of windows from the granddaughter domain each of which is associated with a candidate origin of the document such as different forms of the document address. Then access commands associated with the windows are communicated to the document. Only the access command for the window having the correct origin of the document i.e. the same network address port protocol or scheme and or hostname as the document is processed. The other access commands fail. When the successful access command is processed by a cross domain communication module executing in an environment of the original document such as a browser content associated with the embedded advertisement may be linked at a source and presented or displayed in the embedded advertisement.

In this way the communication technique may allow the context or the environment of the document such as interactions with other users of the same web page to be available when providing the content associated with the embedded advertisement. For example the web page may be associated with a social network and the communication technique may allow content such as presentations to be presented to other users or shared among the users of the web page without requiring that the users access the content on a different web page. By leveraging the context the communication technique may provide various benefits enhanced interaction with the content more interesting relevant advertisements and or improved advertisement distribution. Thus the communication technique may extend the reach of the advertisement improve the overall user experience when viewing or interacting with advertisements and or increase click through rates and conversion rates. Consequently the communication technique may increase commercial activity.

In the discussion that follows an individual a user or a recipient of the content may include a person for example an existing customer a new customer a student an employer a supplier a service provider a vendor a contractor etc. . More generally the communication technique may be used by an organization a business and or a government agency. Furthermore a business should be understood to include for profit corporations non profit corporations groups or cohorts of individuals sole proprietorships government agencies partnerships etc.

We now describe embodiments of the system. presents a block diagram illustrating a system that provides content. In this system server hosts a web page and more generally a document that can include embedded advertising and more generally the content . When a user of electronic device accesses via network a location such as a uniform resource locator or URL associated with web page server may receive target information such as an identifier of electronic device a geographic location of electronic device information in a profile of the user associated with an account of the user etc. .

This target information may be used to select or tailor advertising for inclusion in web page . In particular server may provide via network the target information to advertising server which is associated with one or more advertising providers and advertising server may select or tailor the advertising which is sometimes referred to as targeted advertising for the user. For example the targeted advertising may include the content. Advertising server may provide via network this targeted advertising to server . Advertising server and server may or may not be operated by or on behalf of a single organization.

Then server may include the targeted advertising in a portion of web page . For example web page may include an embedded window and more generally an embedded document associated with the advertising provider and embedded window may include an embedded advertisement or ad that includes or is populated with the targeted advertising or the content. In particular embedded window may be a frame such as an HTML iframe within web page and embedded ad may be another frame within embedded window . Note that each frame is an element within web page and more generally a document which refers to another document that is rendered as a web page. Thus one or more web pages may be contained or nested within web page .

Next server may provide via network web page to electronic device . This web page may be rendered by a browser on electronic device which displays web page to the user on a display in electronic device . In particular when processed by the browser text and code such as HTML code XML code JavaScript etc. in web page is rendered on display .

By embedding the content in web page it can be presented to the user in the context or environment of web page when the user activates embedded ad e.g. when the user activates a link included in the embedded ad. Thus the content can be displayed in embedded window in web page as opposed to being presented in a separate tab. Moreover the user can interact with the daughter nested or child document i.e. embedded ad without requiring the root or parent document i.e. web page to be refreshed. This is because a frame embedded in web page can display video audio text graphics multimedia and or a web page and more generally content independently of its container or source i.e. a remainder of web page .

However this may require cross domain or cross origin communication among web page embedded window and or embedded ad which are arranged in a hierarchy. In particular web page may be associated with a domain which is sometimes referred to as an origin or source of server e.g. the URL or a subdomain while embedded window may be associated with a domain of advertising server and embedded ad may be associated with a domain of the advertiser which may be included or hosted on advertising server or on another server not shown in . Note that the cross domain communication among web page embedded window and or embedded ad may be unidirectional or bidirectional and or may occur directly or indirectly via an intermediary.

In the case of more modern or recent versions of the browser this cross domain communication can be implemented using a messaging application programming interface API . For example in HTML5 the messaging API includes a JavaScript API postMessage that allows messages to be sent from one origin domain to another and thus from embedded ad to web page . The messages can be posted to other frames or iframes within the window of the sender document windows the sender document explicitly opens through JavaScript calls the parent window of the sender document and or the window that opened the sender document.

Moreover a given message may include a source of the message i.e. where the message came from including the port number the subdomain and the protocol such as HTTP or HTTPS a destination of the message which tells a recipient whether to process the message or to forward it and the data or content in the message. This information in the given message may be included in a JavaScript Object Notation JSON string. In some embodiments security associated with the cross domain communication is enhanced by communicating secure hashes of the domains which are generated using a cryptographic hash function such as MD5 SHA 1 or SHA 2 . In these embodiments the parent daughter and granddaughter documents look up the secure hashes of the domains in a white list for use in messages. Thus a recipient such as web page of a message from embedded ad may compare the securely hashed destination in the message with those in the white list and if there is a match the recipient processes the message.

However prior to HTML5 browsers prevented cross domain communication between different portions of a document such as embedded ad and web page that have different domains or origins i.e. these browsers may not support postMessage . For example this may be a problem in the Internet Explorer IE 7 browser from Microsoft Corp. of Redmond Wash. and or others. This problem may be addressed using a communication technique provided herein.

Using communication between embedded ad and web page as an illustration when the user activates embedded ad e.g. by activating a link such as clicking on a link using a mouse or touching the link on a touchscreen embedded ad determines if the domain of web page is different than the domain of embedded ad . For example embedded ad may invoke in a command a cross domain communication module that executes in an environment of the domain of web page such as the browser . This invoking may fail if the origins are different. Note that the cross domain communication module may include a JavaScript library that enables the cross domain communication and the command may be specified using a JSON string.

Then embedded ad may optionally determine if web page and or the browser supports a cross domain communication technique such as postMessage. If not embedded ad may continue with the communication technique.

According to some implementations embedded ad opens a series of windows corresponding to different candidate origins of the origin of the domain of web page . In some embodiments embedded ad obtains the candidate origins by accessing a list of predefined candidate origins of the domain of web page . Note that the candidate origins may have different protocols or schemes different port numbers different network addresses different hostnames different subdomains and or other differences.

When embedded ad communicates or invokes access commands associated with windows for web page only the access command for one of windows is processed by the cross domain communication module. In particular a given access command which may be specified using a JSON string may include a given candidate origin a content identifier for content associated with embedded ad and a source location of the content. The cross domain communication module may only process the access command having a candidate origin that matches the actual origin such as the URL of the domain of web page . All the other access commands for the other windows may fail. This failure may be graceful the associated access commands are not processed and the windows are not displayed . Furthermore when the cross domain communication module processes the access command having the correct origin of the domain of web page the content associated with embedded ad may be linked at the source and presented or displayed in embedded ad .

In this way the communication technique may allow cross domain communication even in browsers that do not support postMessage. Therefore the communication technique may allow the content to be presented in the context of web page . This may allow information or knowledge associated with web page to be used when presenting the content. For example web page may be associated with a social network of individuals and groups of individuals e.g. organizations companies educational institutions entities etc. such as individuals or users of the social network that have professional or business relationships with each other.

Moreover the individuals may have accounts with the social network with associated profiles. These profiles may include personal and or business information such as work histories education histories lists of skills or attributes of the individuals and or connections or interrelationships among the individuals. By presenting the content in the professional or business context of web page this context can be leveraged to provide the content to individuals at appropriate times. Thus the context can be used to provide more unique or interesting advertising which may improve the click through rate and the conversion rate. In addition the content can be presented seamlessly within web page so that there is a common context or experience including a common look and feel. In an exemplary embodiment the content includes shared presentations which may be SlideShare presentations available at a URL corresponding to www.slideshare.net . These shared presentations may be associated with recruiting by an organization or a job search by an individual or more generally the content may include commercials news previous work of an individual insightful content interviews trends in marketing designs how to demonstrations etc.

While the preceding example included a separate advertising server in other embodiments the functions of advertising server and server may be combined. For example server may use the target information to select or tailor the advertising for the user. Furthermore while frames were used as illustrations of the embedded window and embedded ad in other embodiments the portions of web page associated with other domains include pop up or pop under windows. As described further below with reference to in some embodiments the communication technique is implemented using a client server architecture in which the user interacts with web page that is provided by via network and which is rendered by a browser on electronic device .

In some embodiments at least some of the operations in the communication technique are performed by an application tool that is embedded in web page and which executes in a virtual environment of the browser. Alternatively in other embodiments at least some of the operations in the communication technique are performed by a software product or application that is resident on and that executes on electronic device . The application operated by the user may be a standalone application or a portion of another application that is resident on and which executes on electronic device such as an application that is provided by server or that is installed and which executes on electronic device .

Note that information in system may be stored at one or more locations in system i.e. locally and or remotely . Moreover because this data may be sensitive in nature it may be encrypted. For example stored data and or data communicated via network may be encrypted.

During operation the computer system loads a document operation associated with a first domain where the document includes an embedded document such as embedded window in that is associated with a daughter domain and the embedded document includes an embedded advertisement such as embedded ad in that is associated with a granddaughter domain. For example the document may be a web page such as web page in and the embedded document and the embedded advertisement may be iframes.

Then the computer system receives information operation in the granddaughter domain indicating that a viewer of the document activated the embedded advertisement. For example the user may click on a link in embedded ad in .

In response to receiving the information operation the computer system optionally determines if the document supports a cross domain communication technique operation such as postMessage. If yes operation the embedded advertisement in the granddaughter domain may communicate with the document in the first domain using the cross domain communication technique operation which results in the content such as video and or a presentation being linked at a source location and being displayed in a window in the embedded advertisement. If the document does not support the cross domain communication technique operation the computer system determines if the first domain is different than the granddaughter gd. domain operation . For example the computer system may invoke in a command a cross domain communication module executing in an environment of the first domain such as IE 7 . This command may fail if the first domain is different than the granddaughter domain.

If the first domain is the same as the granddaughter domain operation the computer system may communicate a command associated with the embedded advertisement directly with the document operation which results in the content being linked at the source location and being displayed in a window in the embedded advertisement.

Alternatively if the first domain is different than the granddaughter domain operation the computer system invokes in the granddaughter domain a series of windows operation corresponding to different candidate origins of the first domain. For example the computer system may access a list of predefined candidate origins of the first domain that was included as part of embedded ad or embedded window . Note that relative to each other the candidate origins of the first domain may have different protocols different port numbers different subdomains and or some other difference s . In some embodiments these windows are not visible to a user to whom the document was presented.

Next the computer system communicates access commands operation associated with the windows to the document where a given access command includes one of the candidate origins a content identifier for content associated with the embedded advertisement and the source location of the content. Note that the access commands may be compatible with or formatted according to JSON.

Those access commands with incorrect candidate origins fail. Only one of the access commands has the correct candidate origin that is the same as that of the first domain of the document. The computer system processes this access command operation using the cross domain communication module that executes in the environment of the first domain which results in the content being linked at the source location and being displayed in the window corresponding to the processed access command.

In an exemplary embodiment the communication technique is implemented using an electronic device such as a computer a cellular telephone and or a portable electronic device and two or more servers which communicate through a network such as a cellular telephone network and or the Internet e.g. using a client server architecture . This is illustrated in which presents a flow chart illustrating method . During this method server may provide operation and electronic device may receive operation the document such as web page in .

In response to receiving operation information indicating a user of electronic device activated an embedded advertisement in the document electronic device optionally determines if the document supports the cross domain communication technique operation . Then electronic device determines if the first domain is different than the granddaughter domain operation .

Next electronic device invokes in the granddaughter domain a series of windows operation corresponding to different candidate origins of the first domain. Furthermore electronic device communicates access commands operation associated with the windows to the document. Electronic device processes the one access command with the correct candidate origin operation i.e. the same origin as the first domain of the document using the cross domain communication module that executes in the environment of the first domain which results in the content being linked at the source location and being displayed in the window corresponding to the processed access command.

In some embodiments of method there may be additional or fewer operations. Moreover the order of the operations may be changed and or two or more operations may be combined into a single operation.

We now describe embodiments of the electronic device. presents a block diagram illustrating electronic device . This electronic device includes processing subsystem memory subsystem networking subsystem user interface subsystem and display subsystem . Processing subsystem includes one or more devices configured to perform computational operations. For example processing subsystem can include one or more microprocessors application specific integrated circuits ASICs microcontrollers programmable logic devices and or one or more digital signal processors DSPs .

Memory subsystem includes one or more devices for storing data and or instructions for use by processing subsystem networking subsystem and or user interface subsystem . For example memory subsystem can include dynamic random access memory DRAM static random access memory SRAM and or other types of memory. In some embodiments instructions for processing subsystem in memory subsystem include one or more program modules or sets of instructions such as one or more program modules e.g. a browser which may be executed by processing subsystem . Note that the one or more computer programs may constitute a computer program mechanism. Moreover instructions in the various modules in memory subsystem may be implemented in a high level procedural language an object oriented programming language and or in an assembly or machine language. Furthermore the programming language may be compiled or interpreted e.g. configurable or configured which may be used interchangeably in this discussion to be executed by processing subsystem .

In addition memory subsystem can include mechanisms for controlling access to the memory. In some embodiments memory subsystem includes a memory hierarchy that comprises one or more caches coupled to a memory in electronic device . In some of these embodiments one or more of the caches is located in processing subsystem .

In some embodiments memory subsystem is coupled to one or more high capacity mass storage devices not shown . For example memory subsystem can be coupled to a magnetic or optical drive a solid state drive or another type of mass storage device. In these embodiments memory subsystem can be used by electronic device as fast access storage for often used data while the mass storage device is used to store less frequently used data.

Networking subsystem includes one or more devices configured to couple to and communicate on a wired and or wireless network i.e. to perform network operations including an interface circuit and an antenna . For example networking subsystem can include a Bluetooth networking system a cellular networking system e.g. a 5G 4G network such as UMTS LTE etc. a universal serial bus USB networking system a networking system based on the standards described in IEEE 802.11 e.g. a Wi Fi networking system an Ethernet networking system and or another communication system such as a near field communication system .

Moreover networking subsystem includes processors controllers radios antennas sockets plugs and or other devices used for coupling to communicating on and handling data and events for each supported networking or communication system. Note that mechanisms used for coupling to communicating on and handling data and events on the network for each network system are sometimes collectively referred to as a network interface for the network system. Moreover in some embodiments a network between the electronic devices does not yet exist. Therefore electronic device may use the mechanisms in networking subsystem for performing simple wireless communication between electronic device and server e.g. transmitting advertising frames and or near field communication.

User interface subsystem may include one or more processors controllers and devices for receiving the information from a user of electronic device such as account information and for securely communicating this information to processing subsystem . For example the information may include account information such as a username and a password which is received using a user interface device such as a keypad a keyboard a pointer a mouse a touch sensitive display optical character recognition and or voice recognition .

During operation of electronic device electronic device receives via networking subsystem instructions for document such as a web page associated with domain where document includes an embedded window embed. window associated with domain and embedded window includes an embedded advertisement embed. ad associated with domain .

In response to receiving information indicating that a user of electronic device activated embedded ad in document one of the one or more program modules such as a module that is executed by a browser optionally determines if document supports a cross domain communication technique. Then the program module determines if domain is different than domain .

Next the program module invokes in domain a series of windows corresponding to different candidate origins of domain . Furthermore the program module communicates access commands associated with the windows to document via the windows. For the one access command with the correct candidate origin i.e. the same origin as domain of document another of the one or more program modules such as a cross domain communication module that is executed by the browser processes this access command. This results in content being linked at a source location and being displayed in the window in document corresponding to the processed access command.

Within electronic device processing subsystem memory subsystem networking subsystem and user interface subsystem may be coupled using one or more interconnects such as bus . These interconnects may include an electrical optical and or electro optical connection that the subsystems can use to communicate commands and data among one another. Note that different embodiments can include a different number or configuration of electrical optical and or electro optical connections among the subsystems.

In some embodiments display subsystem may include a display driver for displaying information on a display component such as a liquid crystal display a multi touch touchscreen etc.

Electronic device can be or can be included in any electronic device with at least one network interface. For example electronic device can be or can be included in a desktop computer a laptop computer a server a media player such as an MP3 player an appliance a subnotebook netbook a tablet computer a smartphone a cellular telephone a piece of testing equipment a network appliance a set top box a personal digital assistant PDA a toy a controller a digital signal processor a game console a computational engine within an appliance a consumer electronic device a portable computing device a personal organizer and or another electronic device. Moreover network may include the Internet World Wide Web WWW an intranet a cellular telephone network LAN WAN MAN or a combination of networks or other technology enabling communication between computing systems.

Although specific components are used to describe electronic device in alternative embodiments different components and or subsystems may be present in electronic device . For example electronic device may include one or more additional processing subsystems memory subsystems networking subsystems and or user interface subsystems. Additionally one or more of the subsystems may not be present in electronic device . Moreover in some embodiments electronic device may include one or more additional subsystems that are not shown in . For example electronic device can include a data collection subsystem an audio and or video subsystem an alarm subsystem a media processing subsystem and or some other subsystem not already mentioned. Also although separate subsystems are shown in in some embodiments some or all of a given subsystem or component can be integrated into one or more of the other subsystems or components in electronic device . For example in some embodiments the one or more program modules are included in operating system .

Moreover the circuits and components in electronic device may be implemented using any combination of analog and or digital circuitry including bipolar PMOS and or NMOS gates or transistors. Furthermore signals in these embodiments may include digital signals that have approximately discrete values and or analog signals that have continuous values. Additionally components and circuits may be single ended or differential and power supplies may be unipolar or bipolar.

While some of the operations in the preceding embodiments were implemented in hardware or software in general the operations in the preceding embodiments can be implemented in a wide variety of configurations and architectures. Therefore some or all of the operations in the preceding embodiments may be performed in hardware in software or both.

Furthermore while the preceding discussion focused on the hardware software and functionality in electronic device server and or advertising server may have the same or similar hardware processors memory networking interfaces etc. and or software to support the operations performed by these entities. In particular these entities may include one or more computer systems with a processing subsystem that executes one or more program modules stored in a memory subsystem to perform the operations and one or more networking interfaces for communicating with other electronic devices such as electronic device .

In the preceding description we refer to some embodiments. Note that some embodiments describes a subset of all of the possible embodiments but does not always specify the same subset of embodiments.

The foregoing description is intended to enable any person skilled in the art to make and use the disclosure and is provided in the context of a particular application and its requirements. Moreover the foregoing descriptions of embodiments of the present disclosure have been presented for purposes of illustration and description only. They are not intended to be exhaustive or to limit the present disclosure to the forms disclosed. Accordingly many modifications and variations will be apparent to practitioners skilled in the art and the general principles defined herein may be applied to other embodiments and applications without departing from the spirit and scope of the present disclosure. Additionally the discussion of the preceding embodiments is not intended to limit the present disclosure. Thus the present disclosure is not intended to be limited to the embodiments shown but is to be accorded the widest scope consistent with the principles and features disclosed herein.

