---

title: Personal assistance safety systems and methods
abstract: Disclosed are methods and systems related to a Personal Assistance Safety System. In one aspect, disclosed are methods and systems for vehicle communications comprising an antenna selecting unit configured to select an antenna according to an antenna selection strategy and a first antenna switch coupled to the antenna selecting unit configured to direct communications through the selected antenna.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09112700&OS=09112700&RS=09112700
owner: HTI IP, LLC
number: 09112700
owner_city: Atlanta
owner_country: US
publication_date: 20140616
---
This application claims priority to and is a continuation of U.S. patent application Ser. No. 11 852 071 filed Sep. 7 2007 which claims priority to U.S. Provisional Application No. 60 825 069 filed Sep. 8 2006 both of which are herein incorporated by reference in their entireties.

Disclosed are methods and systems related to a Personal Assistance Safety System. Additional advantages will be set forth in part in the description which follows or may be learned by practice. The advantages will be realized and attained by means of the elements and combinations particularly pointed out in the appended claims. It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory only and are not restrictive.

Before the present methods and systems are disclosed and described it is to be understood that the methods and systems are not limited to specific components and as such may vary. It is also to be understood that the terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting.

As used in the specification and the appended claims the singular forms a an and the include plural referents unless the context clearly dictates otherwise. Ranges may be expressed herein as from about one particular value and or to about another particular value. When such a range is expressed another embodiment includes from the one particular value and or to the other particular value. Similarly when values are expressed as approximations by use of the antecedent about it will be understood that the particular value forms another embodiment. It will be further understood that the endpoints of each of the ranges are significant both in relation to the other endpoint and independently of the other endpoint.

It is also understood that there are a number of values disclosed herein and that each value is also herein disclosed as about that particular value in addition to the value itself. For example if the value 10 is disclosed then about 10 is also disclosed. It is also understood that when a value is disclosed that less than or equal to the value greater than or equal to the value and possible ranges between values are also disclosed as appropriately understood by the skilled artisan. For example if the value 10 is disclosed the less than or equal to 10 as well as greater than or equal to 10 is also disclosed. It is also understood that the throughout the application data is provided in a number of different formats and that this data represents endpoints and starting points and ranges for any combination of the data points. For example if a particular data point 10 and a particular data point are disclosed it is understood that greater than greater than or equal to less than less than or equal to and equal to 10 and 15 are considered disclosed as well as between 10 and 15. It is also understood that each unit between two particular units are also disclosed. For example if 10 and 15 are disclosed then 11 12 13 and 14 are also disclosed.

Throughout the description and claims of this specification the word comprise and variations of the word such as comprising and comprises means including but not limited to and is not intended to exclude for example other additives components integers or steps.

 Optional or optionally means that the subsequently described event or circumstance may or may not occur and that the description includes instances where said event or circumstance occurs and instances where it does not.

 Exemplary means an example of and is not intended to convey an indication of a preferred or ideal embodiment.

Disclosed are the components to be used to perform the disclosed methods and systems. These and other components are disclosed herein and it is understood that when combinations subsets interactions groups etc. of these components are disclosed that while specific reference of each various individual and collective combinations and permutation of these may not be explicitly disclosed each is specifically contemplated and described herein for all methods and systems. This applies to all aspects of this application including but not limited to steps in disclosed methods. Thus if there are a variety of additional steps that can be performed it is understood that each of these additional steps can be performed with any specific embodiment or combination of embodiments of the disclosed methods.

The present methods and systems may be understood more readily by reference to the following detailed description of preferred embodiments of the methods and systems and the Examples included therein and to the Figures and their previous and following description.

The methods and systems provided herein can be referred to as a Personal Assistance Safety Services PASS system. Provided is an exemplary description of the environment in which the various PASS hardware and software components can operate.

In one aspect provided is a system architecture for the PASS system. For example the system architecture can comprise external equipment and or systems that the PASS system can interface with various exemplary components which can comprise the system and exemplary manners in which these components can be interconnected. Also provided is a communications network such as a wireless network that can be used by the system and the associated networking components that can be used in the PASS system. Redundancy of PASS system components and data communications security is also covered in this chapter.

In another aspect provided is a communications infrastructure for example the operation of wireless network data and voice distributed communications infrastructure in terms of the underlying generic functions. These include but are not limited to network registration network location updates assignment of a Mobile Station International ISDN Number MSISDN to facilitate callbacks voice and short message calls from and to a PASS Electronic Control Unit ECU and the like.

Also provided are various PASS services. For example end to end services provided by the system and supporting descriptions of the exemplary sequence of transactions within each of these services. The PASS services provided include but are not limited to automatic and manual emergency calls 

Further one skilled in the art will appreciate that aspects of the systems and methods disclosed herein can be implemented via a general purpose computing device in the form of a computer . FIG. I is a block diagram illustrating an exemplary operating environment for performing the disclosed methods. This exemplary operating environment is only an example of an operating environment and is not intended to suggest any limitation as to the scope of use or functionality of operating environment architecture. Neither should the operating environment be interpreted as having any dependency or requirement relating to any one or combination of components illustrated in the exemplary operating environment.

The methods and systems can be operational with numerous other general purpose or special purpose computing system environments or configurations. Examples of well known computing systems environments and or configurations that can be suitable for use with the system and method comprise but are not limited to personal computers server computers laptop devices and multiprocessor systems. Additional examples comprise set top boxes programmable consumer electronics network PCs minicomputers mainframe computers distributed computing environments that comprise any of the above systems or devices and the like.

In another aspect the processing of the disclosed methods and systems can be performed by software components. The methods and systems can be described in the general context of computer instructions such as program modules being executed by a computer. Generally program modules comprise routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. The methods and systems can also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules can be located in both local and remote computer storage media including memory storage devices.

The components of the computer can comprise but are not limited to one or more processors or processing units a system memory and a system bus that couples various system components including the processor to the system memory .

The system bus represents one or more of several possible types of bus structures including a memory bus or memory controller a peripheral bus an accelerated graphics port and a processor or local bus using any of a variety of bus architectures. By way of example such architectures can comprise an Industry Standard Architecture ISA bus a Micro Channel Architecture MCA bus an Enhanced ISA EISA bus a Video Electronics Standards Association VESA local bus an Accelerated Graphics Port AGP bus and a Peripheral Component Interconnects PCI bus also known as a Mezzanine bus. The bus and all buses specified in this description can also be implemented over a wired or wireless network connection and each of the subsystems including the processor a mass storage device an operating system software data a network adapter or communications interface system memory an Input Output Interface a display adapter a display device and a human machine interface can be contained within one or more remote computing devices at physically separate locations connected through buses of this form in effect implementing a fully distributed system.

The computer typically comprises a variety of computer readable media. Exemplary readable media can be any available media that is accessible by the computer and comprises for example and not meant to be limiting both volatile and non volatile media removable and non removable media. The system memory comprises computer readable media in the form of volatile memory such as random access memory RAM and or non volatile memory such as read only memory ROM . The system memory typically contains data such as data and or program modules such as operating system and software that are immediately accessible to and or are presently operated on by the processing unit . Data can comprise any data generated in conjunction with identification of a value opportunity conversion of a value opportunity into benefit fee management and benefit opportunity research.

In another aspect the computer can also comprise other removable non removable volatile non volatile computer storage media. By way of example illustrates a mass storage device which can provide non volatile storage of computer code computer readable instructions data structures program modules and other data for the computer . For example and not meant to be limiting a mass storage device can be a hard disk a removable magnetic disk a removable optical disk magnetic cassettes or other magnetic storage devices flash memory cards CD ROM digital versatile disks DVD or other optical storage random access memories RAM read only memories ROM electrically erasable programmable read only memory EEPROM and the like.

Optionally any number of program modules can be stored on the mass storage device including by way of example an operating system and software . Each of the operating system and software or some combination thereof can comprise elements of the programming and the software . Data can also be stored on the mass storage device . Data can be stored in any of one or more databases known in the art. Examples of such databases comprise DB2 Microsoft Access Microsoft SQL Server Oracle mySQL PostgreSQL and the like. The databases can be centralized or distributed across multiple systems.

In another aspect the user can enter commands and information into the computer via an input device not shown . Examples of such input devices comprise but are not limited to a keyboard pointing device e.g. a mouse a microphone a joystick a scanner tactile input devices such as gloves and other body coverings and the like These and other input devices can be connected to the processing unit via a human machine interface that is coupled to the system bus but can be connected by other interface and bus structures such as a parallel port game port an IEEE 1394 Port also known as a Firewire port a serial port or a universal serial bus USB .

In yet another aspect a display device can also be connected to the system bus via an interface such as a display adapter . It is contemplated that the computer can have more than one display adapter and the computer can have more than one display device . For example a display device can be a monitor an LCD Liquid Crystal Display or a projector. In addition to the display device other output peripheral devices can comprise components such as speakers not shown and a printer not shown which can be connected to the computer via Input Output Interface .

The computer can operate in a networked environment using logical connections to one or more remote computing devices . By way of example a remote computing device can be a personal computer portable computer a server a router a network computer a PASS ECU a PDA a cellular phone a smart phone a wireless communications enabled key fob a peer device or other common network node and so on. Logical connections between the computer and a remote computing device can be made via a local area network LAN and a general wide area network WAN . Such network connections can be through a network adapter . A network adapter can be implemented in both wired and wireless environments. Such networking environments are conventional and commonplace in offices enterprise wide computer networks intranets and the Internet .

For purposes of illustration application programs and other executable program components such as the operating system are illustrated herein as discrete blocks although it is recognized that such programs and components reside at various times in different storage components of the computing device and are executed by the data processor s of the computer. An implementation of software can be stored on or transmitted across some form of computer readable media. Computer readable media can be any available media that can be accessed by a computer. By way of example and not meant to be limiting computer readable media can comprise computer storage media and communications media. Computer storage media comprise volatile and non volatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Exemplary computer storage media comprises but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by a computer. In an aspect any of the methods provided can be performed by computer executable instructions embodied on a computer readable medium.

The methods and systems can employ Artificial Intelligence techniques such as machine learning and iterative learning. Examples of such techniques include but are not limited to expert systems case based reasoning Bayesian networks behavior based AI neural networks fuzzy systems evolutionary computation e.g. genetic algorithms swarm intelligence e.g. ant algorithms and hybrid intelligent systems e.g. Expert inference rules generated through a neural network or production rules from statistical learning .

An exemplary PASS system context is shown in . The system can comprise a Telematics Operations Center TOC and an in vehicle PASS Electronics Control Unit ECU .

The PASS ECU can be a high volume system frontend. It can support mobile originated MO and mobile terminated MT voice calls between a vehicle operator or occupants and service operators at the TOC Service Center or PSAP operators at a local Public Safety Answering Point PSAP . In another aspect the PASS ECU can also support MO and MT Short Message Service SMS in order to provide one or more PASS features. By way of example the PASS ECU can communicate with a vehicle operator who uses the PASS buttons to request services. The vehicle operator can use an in vehicle speaker and microphone s for voice communications via the wireless network . The PASS ECU can communicate with an instrument panel and or head unit not shown in which can be used to display system and service status. The PASS ECU can communicate with other in vehicle Electronic Control Units ECUs not shown in including but not limited to the following a crash sensor for automatic collision notification a trunk button controller for remote door unlock an engine and transmission control unit s for remote diagnostics and the like. The PASS ECU can communicate with a Global Positioning System GPS which enables the PASS ECU to determine its current position. A wireless network such as a Global System for Mobile Communications GSMC which can provide voice and data communications between the PASS ECU and the TOC and voice communications between the PASS ECU and a local PSAP operator via a Public Switched Telephone Network PSTN . The system can support MO and MT calls between a vehicle and the PSAP .

The TOC can function as the system backend. It can provide for example Voice over Internet Protocol VoIP Call Servers shown in to enable voice communication between the vehicle operator and the TOC Service Operator as well as the wireless communication infrastructure to operate the TOC as a Mobile Virtual Network Operator MVNO and Application Servers to support value added PASS services. The TOC can use geographic redundancy for availability and disaster recovery. For example there can be multiple TOCs located at different sites.

In one aspect the TOC can communicate with the one or more of the following exemplary external entities. A GSM wireless network which can provide voice and data communications with the PASS ECU . One or more PASS Subscribers which may or may not be a vehicle owner who can access the TOC via either phone voice and or SMS and or Internet to request services such as remote door unlock or stolen vehicle tracking update service subscriptions and or billing information or request other customer care functions. Service operators who can have voice and or Web access to the TOC in order to support the various PASS services and to provide customer care. PSAP operators to whom emergency calls may be extended by the Service Operator and who call the TOC via the PSTN to request additional information following an emergency call from the vehicle. Engineering which can access the TOC via the Internet to access remote diagnostic services. In one aspect diagnostics reports can be provided to Engineering through Electronic Data Interchange EDI as is known in the art. Dealers who can access the TOC via the Internet to access remote diagnostic services. In another aspect diagnostics reports can be provided to Dealers through Electronic Data Interchange EDI as is known in the art. Roadside Assistance Providers who can access the TOC via the Internet to access remote diagnostic services. The Service Operator can request roadside assistance in response to MO calls from the PASS ECU . A support service can provide 911 operations support systems services to incumbent local exchange carriers local exchange carriers and wireless carriers. Support service can be used by the TOC to determine an appropriate 10 digit PSTN number for the local PSAP given a vehicle s location in lat long.

An exemplary architecture of the TOC Wireless Communications Infrastructure subsystem is shown in . The Wireless Communications Infrastructure can operate as a packet switched network carrying signaling data messages between the carrier and the TOC Service Center .

The Wireless Communications Infrastructure can comprise a Signal Transfer Point STP which can serve as a gateway router between the wireless network and the other components of the Wireless Communications Infrastructure . A Home Location Register HLR can store the current location registration attachment status and subscription data for each subscriber that is PASS ECU . The HLR can provide this information to the wireless network to support roaming and MT voice calls and SMS messaging. A Gateway Mobile Switching Center GMSC which supports MT voice calls from the PSTN that is PSAP operator and the TOC Service Operators . Whenever a call is made to a PASS ECU the PSTN routes the call to the GMSC which further routes the call to a Mobile Switching Center MSC in the wireless network where the PASS ECU is currently registered. A High Performance Short Message Service Center HP SMSC which provides messaging capabilities between the Service Center and the PASS ECUs . All SMS messages exchanged between the TOC and the PASS ECU can be processed by the HP SMSC . A Remote Authentication Dial In User Service Dynamic Host Configuration Protocol RADIUS DHCP Server can provide Internet Protocol IP address allocation to PASS ECUs and authorization and authentication for IP based data exchanges between the TOC and the PASS ECU . A firewall between the TOC and the public IP network can prevent unauthorized access to the TOC .

By way of example the Wireless Communications Infrastructure can interface to the wireless network via links to a Signaling System 7 SS7 network . It also interfaces to the IP network which subscribers and other PASS system users can use to access the TOC Service Center for launching services like remote door unlock or other subscriber services. The IP interface also allows for IP connectivity between the PASS ECU and the TOC Service Center using the General Packet Radio Service GPRS .

The Wireless Communications Infrastructure enables MO voice calls from the PASS ECU and MT voice calls to the PASS ECU . It also provides the following mechanisms to pass data between the PASS ECU and the TOC . Short Message Service SMS which can be used for exchange application level messages between the Service Center and the PASS ECU Unstructured Supplementary Services Data USSD which can be used for certain low level data exchanges between the TOC and the PASS ECU including MSISDN assignment prior to a direct call to the local PSAP General Packet Radio Service GPRS which can be used for data exchanges between the Service Center and the PASS ECU including diagnostic reports configuration updates and software downlink load.

SMS and USSD messages can be exchanged between the HP SMSC and HLR and the wireless network over the SS7 Mobile Application Part MAP . GPRS transfer can be based on UDP IP. IP address assignment can be performed by the RADIUS DHCP Server after authenticating the PASS ECU .

An exemplary Wireless Communications Infrastructure is shown in . What follows is a more detailed description of components that can comprise the Wireless Communications Infrastructure .

The Signal Transfer Point STP can serve as a gateway router between the wireless network and the other components of the Wireless Communications Infrastructure . The STP can route SS7 traffic between the wireless network and the HLR HP SMSC and GMSC . The STP can interface to the SS7 network over standard SS7 links over T1 lines. The STP can provide Global Title Translation GTT routing and Message Transfer Part Level 3 MTP3 routing as well as reliability to the SS7 network . The STP can route messages between SS7 nodes by examining the destination point codes called numbers location areas and other identifiers.

As shown in the STP can perform GTT which can be used for MAP signaling traffic between a wireless carrier and the TOC as well as between the GMSC HLR and HP SMSC . The STP can also support Stream Control Transport Protocol MTP3 User Adaptation SCTP M3UA layers for IP based signaling endpoints such as the HLR HP SMSC and GMSC . Each STP can have one or more SCTP associations to the signaling endpoint.

A fault in an STP can completely isolate an SS7 node from other networks and thus the STP can be a highly critical node. STPs can be deployed in a mated pair configuration as shown in to provide needed availability. The TOC can employ redundant STPs at separate sites and operating in load sharing mode. In this configuration the STPs employ a C link interface between them as is known in the art.

STPs can also prevent unwanted traffic from entering or exiting the TOC . This is important to prevent Denial of Service DoS attacks or when incorrect configuration results in infinite loops. Filtering rules can be configured by a network manager described below with regard to .

The Gateway Mobile Switching Center GMSC can serve as a gateway from the PSTN to the wireless mobile network . For MT calls to a PASS ECU the PSTN can route the call to the GMSC and the GMSC can query the HLR for the subscriber s current location and route the call accordingly.

When a TOC Service Operator initiates a MT call the TOC s phone number can be used as the destination address and the GMSC can perform the following method. Use the calling party s number or Automatic Number Identification ANI to verify that the incoming call is from an authorized Service Operator . Provide an IVR function to prompt the operator for the PASS ECU s permanently assigned International Mobile Subscriber Identity IMSI . Query the HLR for the PASS ECU s current MSC address using the IMSI. Route the call to the visited MSC which will route the call to the PASS ECU in the last registered location area.

When a PSAP operator initiates a MT call i.e. a callback in response to a cleared emergency call the PASS ECU s temporarily assigned MSISDN can be used as the destination address and the GMSC can perform the following method. Query the HLR for the PASS ECU s current MSC address using the MSISDN. Route the call to the visited MSC which will route the call to the PASS ECU in the last registered location area.

The GMSC can interface to the PSTN via trunk lines serving phone numbers assigned to the TOC . The GMSC can also interface to the HLR and network management described below with regard to .

The High Performance Short Message Service Center HP SMSC can provide Short Message Service SMS capabilities between the PASS ECU and the Service Center at the TOC for the exchange of application level messages and data. Standard consumer SMSCs are generally not acceptable for mission critical data communications such as Automatic Crash Notification. The disclosed HP SMSC is therefore an enhanced network element.

For consumer level SMS each mobile terminal is generally served by a single SMSC. In some cases one SMSC may be used for MO messages and another for MT messages and different SMSCs may be used for the delivery of different message classes. In all cases however these elements are store and forward elements that are not geared towards high speed immediate delivery of messages. If a message is not delivered immediately it is queued for automatic retry. It is the combination of this retry algorithm and the messaging load that delay message delivery in the consumer level implementation of SMS.

Standard consumer level SMS involves a host of network elements that are not necessarily optimized for rapid and reliable delivery of mission critical messages. The underlying network is certainly as robust for SMS as it is for voice or any other technology. The basic GSM network consists of a host of network elements which diverge at a certain point to support voice and data messages. The basic network elements for voice calling are generally considered the HLR Home Location Register and the MSC Mobile Switching Center . Additional elements include the BSC Base Site Controller Cell Site and sometimes the GMSC Gateway MSC .

At the time a wireless device handset or otherwise powers up it registers with the local cell site that relays information back through the BSC to a serving MSC. The MSC and adjunct visitor location register VLR can send a GSM MAP message Update Location to the HLR. In a large network various methods are used to route the messages back to the proper HLR but recognize that the SS7 network contains many routing mechanisms in the STPs Signal Transfer Points to route messages to one of several hundred HLRs. This message notifies the HLR as to the presence and location of the wireless device and kicks off a sequence of Insert Subscriber Data messages that provide the VLR with the operating parameters for that mobile device.

Upon receipt of an incoming call an MSC queries the HLR for the handset availability using the GSM MAP message SRI Send Routing Information . The HLR either has knowledge of wireless device presence or it doesn t. A similar message is sent from an SMSC Short Message Service Center . The SRIS Send Routing Information for Short Message .

Messages originated from a mobile device are sent to a single SMSC. The SMSC address is shown in the handset as an E 164 number which in the U.S. is a 1 number. Translation tables in the STPs route GSM MAP messages including Forward Short Message FSM to network nodes identified by point code subsystem using this E 164 number. One number translates to one point code subsystem.

In the consumer level SMS service generally one SMSC serves a particular customer. Sometimes the customer is served by one SMSC for mobile originate messages MO and another for mobile terminate MT . In certain instances different message classes are delivered by different SMSCs but fundamentally these elements are store and forward elements and are not geared towards high speed immediate delivery of messages. If a message is not delivered immediately it is queued for automatic retry. It is this retry algorithm and load that clog the SMS delivery in consumer SMS messages. They are simply not configured for instant delivery 100 of the time. Any mobile terminate message that fails would equate to a failed voice call. Unfortunately the consumer level retry algorithm does not permit immediate retries. If a voice call fails then the forward short message would equally fail on the normal GSM signaling channel.

In one aspect illustrated in provided are methods for high performance Short Message Service SMS communication comprising receiving from a sender an SMS for delivery at determining a recipient at delivering the SMS to the recipient immediately wherein if the delivery fails immediately retry delivery until successful at and providing feedback to the sender regarding status of the delivery at . Receiving from a sender a SMS for delivery can comprise receiving a SMS from a telematics operations center. Determining a recipient can comprise determining an IMSI for a recipient. Delivering the SMS can comprise sending a MAP request to an HLR for routing information for the recipient.

The methods can further comprise receiving an MSC associated with the recipient and an SGSN address associated with the recipient. The methods can further comprise delivering the SMS over a GPRS network utilizing the SGSN address. If the delivery over the GPRS network fails the methods can deliver the SMS over a GSM network utilizing the MSC associated with the recipient.

The TOC can utilize multiple special HP SMSCs geared to high speed instant delivery. For MT messages that are originated at the Service Center these HP SMSCs can deliver messages instantly and provide immediate feedback e.g. as to network presence to the Service Center . The HP SMSCs do not place a message into a queue for delivery whenever. The originating Application Server described below with regard to can determine if an immediate retry is required. Alternatively the Application Server described below with regard to can elect to queue the message in the HP SMSC for future delivery such as for lower priority configuration updates. When appropriate the Application Server described below with regard to can set the Alert Service Center flag in the HLR so that the standard network mechanisms for retry triggered by PASS ECU registration can be used. In this case the HP SMSC forwards queued messages immediately to minimize battery drain when the PASS ECU checks for incoming messages sent while it was in sleep mode.

Note that the TOC can use GSM GPRS instead of the basic GSM mechanism for delivery of SMS messages whenever possible. SMS over GPRS has a much higher speed delivery than normal SMS over GSM. Because of consumer handset limitations many do not support SMS over GPRS and standard SMSC limitations virtually all consumer SMS messages are delivered over the GSM signaling channel. The PASS ECU and the TOC can use GPRS delivery which can therefore be used if GPRS is available at the vehicle s current location. If GPRS is not available or for some reason fails the PASS ECU can automatically fall back to standard SMS over GSM again directly to the TOC s HP SMSCs .

MO messages are directed by the E 164 address configured in a typical handset. The PASS ECU can have multiple E 164 addresses configured and the PASS ECU can randomly select an E 164 address so as to load balance MO messages to the redundant TOC s HP SMSCs . The PASS ECU can receive immediate feedback with the results of the message delivery to the HP SMSC and can retry another E 164 address if not successful.

As shown in the HP SMSC can interface to one or more of the following elements in the wireless network . A visited MSC for the exchange of SMS messages between the PASS ECU and the TOC using SMS over GSM. The Serving GPRS Service Node SGSN for the exchange of SMS messages between the PASS ECU and the TOC using SMS over GPRS. The HP SMSC can interface with one or more of the following PASS components in the TOC . The HLR for querying subscriber status and location information for MT messaging using MAP procedures. The Application Server described below with regard to for the exchange of MO and MT SMS messages using the Short Message Peer to Peer SMPP protocol. Network Management described below with regard to which can used to configure and monitor the HLR .

The Home Location Register HLR can store the current location registration attachment status and subscription data for each PASS ECU . It can provide this information to other network nodes upon request for example by using the MAP protocol. The PASS HLR can also comprise a USSD gateway function which can serve as an intermediate platform between the HLR and the TOC Application Server described below with regard to whenever USSD messages are exchanged.

Regular HLR functions can comprise one or more of the following location management services subscriber management fault and recovery services. USSD relay services supplementary service management roaming number call routing services and the like.

Additional PASS specific functions of the HLR can comprise one or more of the following MSISDN generation supporting Application Server described below with regard to for querying subscriber information based on IMSI and MSISDN and the like.

A shown in the HLR can interface to one or more of the following elements in the wireless network . Gateway GPRS Support Node GGSN which can serve as the gateway between the GPRS wireless data network and the IP network to provide network access between the PASS ECU and the TOC . The visited MSC at which the PASS ECU is currently registered. The SGSN which provides registration session mobility management and authentication for the PASS ECU . The Gateway Mobile Location Center GMLC which queries the HLR to determine a PASS ECU s current MSC address for LoCation Services LCS .

The HLR can interface with one or more of the following PASS components in the TOC . The GMSC which queries the HLR for the current i.e. visited MSC address of the PASS ECU to support MT voice calls i.e. whenever a Service Operator or PSAP operator needs to call the PASS ECU . The HP SMSC which queries the HLR for the current i.e. visited MSC address of the PASS ECU to support MT SMS. The Application Server described below with regard to which may query the HLR to determine the current registration status and location information for a PASS ECU . Network Management described below with regard to which can be used to configure and monitor the HLR . The HLR at the redundant TOC not shown in the figure . HLR HLR communication can be used to update the peer HLR when any changes are made to subscriber information such as a result of a location update or MSISDN assignment.

An exemplary TOC Service Center subsystem is shown in . It can comprise one or more of the following components. Application Server which can provide business logic to implement PASS features using the voice and data communications capabilities provided by the PASS ECU and Wireless Communications Infrastructure . The Application Server can access the support service to determine a 10 digit PSTN number for the local PSAP given a vehicle s Global Positioning System GPS position. A Voice over IP based VoIP based Call Server which can provide routing of incoming calls to the appropriate Service Operator based on call origination type of service and operator availability. The VoIP Call Server can also provide for 3 way calling for emergency calls and roadside assistance. A Subscriber Database which can be used to maintain all subscriber information in a centralized database. A web server which can provide for Internet access to the PASS applications by subscribers Engineering personnel Dealers and roadside assistance providers . A network manager which can provide overall management of the TOC including the Wireless Communications Infrastructure as well as the Service Center . A billing subsystem which can be used to record system usage and provide subscriber billing services.

The Application Server can host the PASS service logic as well as service interaction logic. The Application Server can receive service related messages from the PASS ECU and service operators manages services based on priorities and keep the Subscriber Database updated with information received from the PASS ECU .

The VoIP Call Server can be used to handle and distribute calls from the PASS ECU to the service operators . Call distribution logic in the VoIP Call Server can ensure priority call handling for emergency calls. The VoIP Call Server can also include Interactive Voice Response IVR for services like Roadside Assistance and Information Call for improved customer service and efficient utilization of the TOC Service Operators .

The network manager can be responsible for configuring each of the TOC components including the Wireless Communications Infrastructure components collecting alarms from different sources and monitoring performance parameters reported for the components.

The TOC Service Center is shown in . What follows is a more detailed description of components that can comprise the TOC Service Center .

The Application Server can host the PASS services and provide business intelligence and logic to the system. The Application Server can maintain the current context for each ongoing service transaction. Incoming messages from the PASS ECU or Service Operator can initiate service transactions described below.

The Application Server can support one or more of the following PASS services Automatic and Manual Emergency Call both direct to the PSAP and indirect via the VoIP Call Server the notification from the PASS ECU can initiate the service and the Application Server can provide the crash information and vehicle location information to the Service Operator via the Web Server Roadside Assistance Manual and Automatic the Application Server can provide the vehicle location information to the Service Operator via the Web Server Information Call including Point of Interest download Remote Door Unlock Immediate and Verified the Application Server can generate an MT message to the PASS ECU to effect the door unlock forward the message to the HP SMSC and verify that an acknowledgement was received from the PASS ECU Remote Door Lock the Application Server can generate the MT message to the PASS ECU to effect the door lock forward the message to the HP SMSC and verify that an acknowledgement was received from the PASS ECU Stolen Vehicle Tracking the Application Server can generate the MT message to the PASS ECU to request the current position forward the message to the HP SMSC and verify that a response was received from the PASS ECU Anti Theft Tracking the service can be initiated when the Application Server receives a notification from the PASS ECU the Application Server can then notify the Service Operator Maintenance Status Reporting the service can be initiated when the Application Server receives a notification from the PASS ECU the Application Server can then notify the Service Operator and Remote Diagnostics the Application Server can receive diagnostics information from the PASS ECU and record it for subsequent transfer to Engineering or dealers via EDI.

As shown in the Application Server can interface with one or more of the following PASS components at the TOC The Web Servers which can serve as the gateway to the Service Operators The Application Server can interface to the Web Server using by way of example Common Gateway Interface CGI Internet Server Application Programming Interface ISAPI Dynamic HyperText Markup Language DHTML and JavaScript and the Subscriber Database which the Application Server can access to read and update subscriber information. Access to the Subscriber Database can be through the Application Server ensuring valid and consistent subscriber data. The Application Server can also interface to the support service to determine a 10 digit PSTN number to call for the local PSAP given a vehicle s position. For high availability purposes the Application Servers can be geographically redundant and an active server can keep a peer server in sync whenever a change in a service context takes place. Under normal conditions each Application Server can carry half of the load since half of the PASS ECUs can be configured to use one server while the other half can be configured to use the other server the HP SMSC can determine which Application Server is used by each PASS ECU .

The VoIP call server can be an intelligent call distribution system with TDM IP media inter working. This component can distribute incoming service calls from PASS ECUs subscribers and other customers to the active Service Operators based on factors such as type of service or IVR navigation. Outgoing calls from Service Operators for example a MT call to a PASS ECU can also go through the VoIP Call Server .

The VoIP Call Server can use the Session Initiation Protocol SIP for setup of VoIP sessions by Service Operators . SIP is a defacto industry standard protocol for setting of multimedia sessions between clients and servers. The VoIP Call Server can also handle call transfers between operators operator registration and authentication. The VoIP Call Server can interface with the PSTN using T1 TIE lines and appears as a PBX Switchboard to the PSTN .

The VoIP Call Server can route outgoing calls from the Service Operators to other Service Operators or to the PSTN for example to PSAP operators . MT voice calls can be routed to the GMSC for subsequent routing based on the current registration status of the destination PASS ECU .

The Subscriber Database can maintain a list of PASS ECUs for example identifying one or more of the corresponding VIN IMSI IMEI and any other associated subscriber information. The Subscriber Database can be accessed by the Application Server to authenticate incoming messages and data from the wireless network to support customer care and other operator assisted PASS services and to record transactions involving subscribers . Access to the Subscriber Database can be through the Application Server to ensure valid and consistent subscriber data.

The Subscriber Database can be replicated at a redundant TOC site with periodic and transaction based updates between the two sites to replicate all changes to the subscriber data resulting for example from provisioning procedures or service transactions.

The Web Server can be a gateway between PASS users accessing the TOC via the Internet and the Application Server . It can support Internet access by Service Operators at the Service Center who can access Web pages developed to support customer care and the various PASS services. The Web Server can also provide access from system users such as PASS subscribers Engineering personnel roadside assistance providers and the like.

The Billing System can provide for billing based for example on monthly service subscriptions or per transaction billing. It can be closely coupled with automated provisioning services to support a high volume rollout of PASS vehicles. It can interface with the Application Server for access to the Subscriber Database .

The Network Manager can provide one or more of the following functions. Configuration management including one or more of the following web accessible user interface to the SNMP agents in each TOC component device commanding and control including desired state change operations to implement forced failover backup copy of configuration maintained centrally and master configuration distributed among MIBs. Fault management including one or more of the following host pinging to determine if a TOC component is available SNMP agent pinging to determine if a given service is available and monitor its internal state receipt of SNMP traps from the various TOC components web accessible trap alarm log browser and operator acknowledgment of alarms. Performance management including one or more of the following configuration of thresholds for various statistics periodic automated statistics collection and threshold analysis. Security management including one or more of the following operator access control which can be granted on a per host basis for two main functions read only and read write operator access control for cross platform applications for example alarm browser can be granted on a per application basis and operator rights can be maintained in a persistent repository for example and LDAP repository.

The Network Manager can support event management data collection and service monitoring. Data can be persistently stored in an embedded relational database system. The TOC components to be monitored can be configured at the Network Manager . Data can be collected for example via SNMP V2 s GET BULK interface if available on the agent otherwise data can be collected in pieces via SNMP V1 s GET. Customizable reports can be generated. Aggregating graph tools can be used to produce trending performance graphs. Thresholds for any performance data can be established such that threshold crossing traps can be generated by the Network Manager . Network Manager applications can be accessible via the Web.

In one aspect the overall availability of the PASS system can be governed by the availability of various components and the interconnections between them. Emergency services can require higher system availability than other services. Some of the components in the system can form the infrastructure common to all services such as the SS7 network or the Subscriber Database . These components can support the higher availability requirements of the emergency services.

Two exemplary levels of redundancy can be defined as follows Subcomponent level redundancy can be provided by redundant modules within a component such as duplicating network modules power supplies or control modules and Component level redundancy can be provided by physically duplicating the component. By duplicating the component at a separate site a disaster recovery capability is also provided in addition to high availability. The redundant components can be configured to work in either an active passive or load sharing mode. For load sharing each component must be able to take over the processing load of the other component in the pair. Component interfaces can be designed so that failure of one component does not require switchover of the other components at that site. By way of example a 40 sizing rule would allow each component to take over the full load with 20 processing capacity remaining for margin.

In one aspect the STPs can determine the availability of the services provided by the Wireless Communications Infrastructure because they can form a packet switching network between the various components at the two TOC sites. Mated pair STPs with a C link between them can be used to provide a highly available SS7 network . Network management messages as defined at MTP3 can be used to reconfigure routes and paths depending on the availability and congestion state of the network.

In the event of a component failure the STPs can come to know of its unavailability using M3UA procedures. The STPs can then mark that node as unavailable and failover to the backup node. Only transactions in progress will be impacted. In a controlled shutdown of one TOC the SCCP can coordinate handover of all SS7 traffic to the components at the other TOC . In the event of a failed component only transactions in progress will be impacted.

In one aspect local faults in the a database such as disk failures corruption can be handled by using for example a Level 5 Redundant Array of Independent Disks RAID which use multiple drives in combination for fault tolerance as well as improved performance . Further availability of the database can be ensured by replicating the database at a geographically separate location which is kept synchronized with the active database.

In another aspect geographic redundancy can be used to ensure a high availability for the Application Server . The active Application Server can handle service transactions and update a passive standby server as transaction checkpoints are reached. The passive standby server is ready to take over the service in case of a switchover. If the active server goes down the formerly passive server can take over role of the active server. Transactions in progress may need to be restarted following a switchover.

In one aspect availability of the voice infrastructure can be ensured by utilizing one or more of the following configurations Multiple DS1 TIE lines from the PSTN to prevent isolation in the event of a physical interface failure Dedicated DS1 lines to the GMSC for emergency calls with overflow to non emergency DS1 lines Multiple Service Center destination PSTN numbers and addresses in the PASS ECU which are used while retrying Geographical separation of VoIP Call Servers and Indication to Network Manager when availability of Service Operators falls below a threshold especially for emergency call Service Operators .

Because the Service Center and PASS ECU are connected to the wireless network a mobile user can send accidentally or intentionally an SMS message to the HP SMSC if the HP SMSC s number is known. Similarly any Internet user can send an SMS message to the PASS ECU if the Internet user knows the PASS ECU s assigned IMSI. Therefore the HP SMSC and PASS ECU can authenticate incoming SMS messages. The first check can be based on the sender information. The next can step involve verifying the authenticity of the SMS contents. For example the VIN number GPS time such as higher order to a predetermined level i.e. 15 min can be used to generate a key and the MD5 algorithm can be used to generate a signature. This signature can be included as part of the message. Since the VIN is known only to the vehicle and the PASS network when combined with current GPS time a secret key can be generated. This scheme makes replay attacks difficult since the key can be changed every 15 minutes. Even if SIM details are exposed to an attacker unless the messages are signed with the previously mentioned scheme the system is secure. Using this scheme authentication for a valid subscriber can fail due to 15 minute boundaries occurring between signing and verification. When this occurs an SMS retry can solve this problem.

In one aspect illustrated in provided are methods for one way communication authentication comprising generating a time based value at generating a key based on a unique identifier and the time based value at generating a signature based on the key and a cryptographic algorithm at and transmitting a message with the signature at . Generating a time based value can comprise determining the time based value at a predetermined time interval. Transmitting the message with the signature can comprise transmitting a SMS message with the key. The method can further comprise repeating steps once per predetermined increment of time.

The unique identifier can be for example an ECU serial number a randomly assigned number a vehicle identification number and the like.

The time based value can be obtained from a GPS. The time based value can be rounded to a predetermined increment of time. The time based value can be any increment of time. For example the predetermined increment of time can be five minutes 10 minutes 15 minutes 20 minutes and the like.

The predetermined time interval can be any interval of time for example fifteen minutes. The cryptographic algorithm can comprise for example one of a Message Digest 5 MD5 algorithm a secure hash algorithm SHA a RACE Integrity Primitives Evaluation Message Digest RIPEMD algorithm Cellular Authentication Voice Privacy and Encryption CAVE algorithm or a Whirlpool algorithm.

GPRS security can involve admission control and authentication of ECUs before they are assigned an IP address. This can be used since any GPRS user can otherwise attach to the PASS Access Point Name APN get an IP address assigned and access the PASS internal network. To prevent this type of attack IP address assignment can be preceded by an authentication phase. For example Challenge Handshake Authentication Protocol CHAP RADIUS combination can be used to authenticate the PASS ECU .

In the absence of any end to end security mechanism Public Private IP WAN networks can use IPSec as is known in the art. IPSec provides a standard robust and extensible mechanism for IP and upper layer protocols for example UDP or TCP . In order to ensure extensibility algorithms can be implemented via downline load to the PASS ECU .

Internet users of the PASS system can comprise service operators roadside assistance providers dealers engineering subscribers and the like. Each of these types of users can have different access privileges. Internet users can access the facilities authorized to them using a Web browser by logging in to the PASS system with a given username and password. Once an Internet user successfully logs in to the system the system can determine the access privileges of the user and present the options to the user accordingly.

Provided are exemplary operational aspects of the Wireless Communication Infrastructure that can provide voice and data communication between the PASS ECU and the Service Center . One or more of the following functions can be supported by the Wireless Communication Infrastructure Network Registration Location Update MSISDN Assignment Mobile or PASS ECU Originated Voice Call Mobile or PASS ECU Terminated Voice Call Mobile or PASS ECU Originated Short Message Mobile or PASS ECU Terminated Short Message IP Connectivity and the like.

In one aspect when the PASS ECU is initially activated and when it exits from sleep mode to check for incoming messages from the Service Center the PASS ECU can execute a GSM registration procedure to announce its availability in the network. GSM and GPRS can be registered separately or in a combined manner depending on the local network options.

This can complete the registration process. The PASS ECU is now ready to receive or originate GSM traffic. If any SMS messages are pending delivery to the PASS ECU the wireless network can page the PASS ECU at this time. In order to minimize the battery drain in sleep mode the MSC can respond immediately to registration if there are any pending messages. The PASS ECU can continue to perform periodic location updates based on the configuration provided by the network or whenever it changes location area.

In another aspect location updates can be automatically performed by the PASS ECU in one or more of the conditions discussed below. When the PASS ECU is in normal mode for example ignition on it can keep the GSM network updated with the latest location as the PASS ECU moves from one location area to another where a location area is a set of adjacent cells defined by the network provider in which the PASS ECU can be paged for incoming traffic. A similar treatment can be applied to GPRS services where the PASS ECU keeps the routing area a subset of location area updated in the network as the PASS ECU moves from one area to another.

When the PASS ECU is in sleep mode it can periodically wake up to check for any incoming messages from the Service Center . During this time the PASS ECU can also check for the best cell to use and if different from the current cell can adjust its receiver to the new cell. If this new cell is in a new location area the PASS ECU can perform a location area update.

In order to stay registered in the network in low power or normal mode the PASS ECU can also perform periodic location updates. The periodicity of the location updates can be determined by network supplied parameters.

In another aspect provided are methods for dynamic MSISDN assignment. In a typical 911 112 call to an emergency operator at the PSAP the calling party number displayed on the operator s console can be used by the operator to call back if the call is disconnected. In the case of a regular MO call from a mobile subscriber to 911 this number will be the MSISDN number assigned to the subscriber and stored in the SIM . However due to the costs associated with MSISDN assignment in one aspect MSISDNs will not be permanently assigned to each PASS ECU . This is practical because MT calls from the PSTN are not generally supported.

To facilitate callback from a PSAP operator the TOC can temporarily assign an MSISDN number to the PASS ECU when it makes an emergency call directly to the PSAP . This number can remain allocated to the PASS ECU for a fixed time period for example 1 hour before it is returned to the free pool for reuse. The total number of MS ISDN numbers needed for the entire system can be determined by the rate at which emergency calls are made to the PSAP .

In one aspect illustrated in provided are methods for dynamic identifier assignment comprising receiving a request for identifier assignment at allocating an available identifier at updating communication carrier data to reflect the allocated identifier at and sending a confirmation of identifier assignment at .

The request for identifier assignment can be received from a mobile vehicle telematics unit. Receiving a request for identifier assignment can comprise receiving a Unstructured Supplementary Services Data USSD message comprising location data vehicle identification number VIN data and International Mobile Subscriber Identity IMSI data.

Allocating an available identifier can comprise allocating an Mobile Station International ISDN Number MSISDN from a plurality of MSISDNs.

Updating communication carrier data to reflect the allocated identifier can comprise updating the communication carrier s Mobile Switching Center Visitor Location Register MSC VLR data with the allocated identifier. Updating communication carrier data to reflect the allocated identifier can comprise updating the communication carrier s Serving GPRS Service Node SGSN . Updating communication carrier data to reflect the allocated identifier can further comprise receiving an acknowledgment that updating was successful.

The method can further comprise starting a timer after sending the confirmation. The method can further comprise releasing the assigned identifier after the timer reaches a predetermined value. The predetermined value can be an amount of time for example three hours.

In another aspect provided is an apparatus for dynamic identifier assignment comprising a memory for storing a plurality of available identifiers a transceiver configured for receiving a request for identifier assignment a processor configured for allocating an available identifier from the plurality of available identifiers wherein the transceiver is further configured for updating communication carrier data to reflect the allocated identifier and sending a confirmation of identifier assignment.

The request for identifier assignment can be received from a mobile vehicle telematics unit. The request for identifier assignment can comprise a USSD message comprising location data VIN data and IMSI data.

The transceiver can be configured for updating the communication carrier s MSC VLR data with the allocated identifier. The transceiver can be configured for updating the communication carrier s SGSN. The transceiver can be configured for receiving an acknowledgment that updating was successful. The transceiver can be configured for sending a USSD message.

The processor can be further configured for starting a timer after sending the confirmation. The processor can be further configured releasing the assigned identifier after the timer reaches a predetermined value. The predetermined value can be any amount of time for example three hours.

When the PASS ECU makes a MO voice call the wireless carrier can provide the allocated MSISDN number to identify the calling party. On expiration of the timer the HLR can free up the MSISDN and again update the MSC SGSN with the IMSI not shown so that subsequent non emergency calls can use the IMSI to identify the calling party.

If the PASS ECU is currently using a network which does not have a roaming agreement with the PASS network the MSISDN assignment is not possible. In this case the PASS ECU s permanently assigned IMSI can appear as the calling party identifier.

Provided in another aspect are methods for mobile originated voice calls. In normal mode the PASS ECU can originate a voice call when a service button is pressed. The call origination procedure can be the same as for a normal GSM call. An exemplary procedure is shown in the PASS ECU is assumed to be registered before the call is attempted 

In some cases such as for a Roadside Assistance call the user may need to go through an Intelligent Voice recognition IVR system before being routed to a Service Operator . An exemplary procedure for this is shown in . The method can comprise 

In an aspect MT voice calls to a PASS ECU can be originated by either a TOC Service Operator or the PSAP operator . Calls from the Service Center can use the IMSI number permanently assigned to the PASS ECU . Calls from the PSAP operator can use the MSISDN temporarily assigned to the PASS ECU . The call can be routed to the PSTN which can route the call to the GMSC and the GMSC can route the call to the visited MSC in the wireless network.

In one aspect illustrated in provided are methods for contacting a recipient with a virtual identifier comprising contacting a telematics operations center gateway TOCG at providing a virtual identifier associated with the recipient to the TOCG at providing by the TOCG the virtual identifier to a gateway mobile service center GMSC at querying by the GMSC a home location register HLR with the virtual identifier to determine a mobile service center MSC serving the recipient at querying by the HLR the MSC with the virtual identifier at receiving from the MSC a temporary local directory number associated with the virtual identifier at and contacting the recipient at the temporary local directory number at .

Contacting the TOCG can comprise initiating an outbound call to a telephone number. Contacting the TOCG can comprise interacting with an interactive voice response IVR system. The method can further comprise validating the virtual identifier by the TOCG.

Providing the virtual identifier associated with the recipient to the TOCG can comprise providing an International Mobile Subscriber Identity IMSI associated with the recipient to the TOCG.

Receiving from the MSC a temporary local directory number associated with the virtual identifier can comprise receiving the temporary local directory number at the HLR and sending a response from the HLR to the GMSC with the temporary local directory number.

Contacting the recipient at the temporary local directory number can comprise initiating by the GMSC an outbound call to the temporary local number.

In another aspect provided are systems for contacting a recipient with a virtual identifier comprising a telematics operations center gateway TOCG configured to receive a call from a user and to receive a virtual identifier associated with the recipient a gateway mobile service center GMSC coupled to the TOCG by a dedicated trunk wherein the CMSC is configured to receive a call to the virtual identifier from the TOCG and query a home location register with the virtual identifier a home location register HLR coupled to the GMSC wherein the HLR is configured to query a mobile service center MSC serving the recipient and receive a temporary local directory number associated with the virtual identifier from the MSC and wherein the GMSC is further configured to receive the temporary local directory number from the HLR and contact the recipient at the temporary local directory number.

The TOCG can be configured to be contacted through a telephone number. The TOCG can be further configured to validate the virtual identifier. The TOCG can be further configured to interact with a user via an interactive voice response IVR system. In one aspect the TOCG can be a server.

The GMSC can be further configured to send a Mobile Application Part MAP Send Routing Information SRI request to the HLR. The HLR can be further configured to examine a subscriber record associated with the virtual identifier thereby identifying the MSC serving the recipient. The MSC can be further configured to receive an incoming call to the temporary local directory number from the GMSC and route the incoming call to the recipient.

Provided in another aspect are methods for mobile originated short messages. The PASS ECU can send messages to the TOC using the SMS service as defined in GSM specifications. SMS messages can be sent using either GSM protocols or GPRS. GPRS provides a more radio resource efficient mechanism however if GPRS service is unavailable in the area the GSM based SMS service can be used.

If a voice call is in progress when the PASS ECU needs to send a short message the existing GSM traffic channel can be used to send the SMS. If the PASS ECU receives a failure report it can choose to retry another Application Server identified by a backup configured address in the MIB.

Mobile Originated MO SMS based on GSM is similar except that it goes through the HP SMSC instead of the SGSN. In this case the HP SMSC address is the HP SMSC address and the destination address is that of the Application Server . The HP SMSC address can be a regular mobile phone address and can be stored in the PASS ECU . The Application Server address can however be flexible as its significance is local to the PASS network. The Application Server can register itself with the HP SMSC using its assigned address at system startup. The SMPP protocol can be used between the HP SMSC and Application Server .

Provided in another aspect are methods for mobile terminated short messages. As with MO SMS mobile terminated SMS can be sent over GSM or GPRS if the PASS ECU is GPRS attached . However with Class B devices GPRS SMS and GSM traffic cannot be simultaneously active. It is generally configurable at the HP SMSC as to try the GPRS first or not. In this scenario the GPRS can be the preferred option. illustrates an exemplary MT short message procedure 

If the MSC SGSN fails to deliver a mobile terminated SMS for example when the PASS is in sleep mode the HP SMSC can set a flag in the HLR which indicates the cause of the failure as well as the SMSC address of the originator of the SMS. The HP SMSC can store the message in its internal storage. When this condition is cleared the HLR can inform the HP SMSC that the condition is clear and the HP SMSC can try to send the SMS again. Alternatively the Application Server can also control the resending of the SMS as shown in . This can give the application more control over the SMS messaging. As shown in 

Provided in another aspect are methods for PASS IP connectivity. IP connectivity with the PASS system can offers advantage in cases of bursty traffic between the PASS ECU and the TOC . Diagnostic reports are a good example. A diagnostic report can be large for example 10 KB and if performed over SMS will take a number of messages 160 bytes per message or about 65 separate SMS messages .

To attach to the GPRS network the PASS ECU can provide an APN to which it wants to attach. For the PASS system a new APN can be created. At the GGSN this APN can map to the PASS network and its profile. The profile can have parameters such as the IP addressing support mechanism and the IP address of the RADIUS server .

The PASS system can also initiate bursty data towards the PASS ECU such as for software download. If the PASS ECU is already attached to the network and has an IP address assigned the application can request for activation of a PDP context as illustrated in and described below 

In case the PASS ECU does not have an IP address assigned to it the application can send an SMS with an embedded command to the PASS ECU to set up the PDP context. The SMS can contain the IP address and port with which the application is expecting the PASS ECU to establish a flow.

Application data transfer can also be performed over USSD protocol. USSD is a session oriented bearer defined in GSM. USSD is faster as compared to SMS since SMS is a store and forward mechanism while USSD keeps the radio connection until the dialogue session is underway.

In one aspect provided is an apparatus comprising a telematics control unit. The apparatus can be installed in a vehicle. Such vehicles include but are not limited to personal and commercial automobiles motorcycles transport vehicles watercraft aircraft and the like. For example an entire fleet of a vehicle manufacturer s vehicles can be equipped with the apparatus. As shown in the exemplary apparatus can also be referred to herein as the PASS ECU .

All components of the telematics unit can be contained within a single box and controlled with a single core processing subsystem or can be comprised of components distributed throughout a vehicle. Each of the components of the apparatus can be separate subsystems of the vehicle for example a communications component such as a SDARS or other satellite receiver can be coupled with an entertainment system of the vehicle.

This exemplary apparatus is only an example of an apparatus and is not intended to suggest any limitation as to the scope of use or functionality of operating architecture. Neither should the apparatus be necessarily interpreted as having any dependency or requirement relating to any one or combination of components illustrated in the exemplary apparatus. The apparatus can comprise one or more communications components. Apparatus illustrates communications components modules PCS Cell Modem and SDARS receiver . These components can be referred to as vehicle mounted transceivers when located in a vehicle. PCS Cell Modem can operate on any frequency available in the country of operation including but not limited to the 850 1900 MHz cellular and PCS frequency allocations. The type of communications can include but is not limited to GPRS EDGE UMTS 1 RTT or EV DO. The PCS Cell Modem can be a Wi Fi or mobile WIMAX implementation that can support operation on both licensed and unlicensed wireless frequencies. The apparatus can comprise an SDARS receiver or other satellite receiver. SDARS receiver can utilize high powered satellites operating at for example 2.35 GHz to broadcast digital content to automobiles and some terrestrial receivers generally demodulated for audio content but can contain digital data streams.

PCS Cell Modem and SDARS receiver can be used to update an onboard database contained within the apparatus . Updating can be requested by the apparatus or updating can occur automatically. For example database updates can be performed using FM subcarrier cellular data download other satellite technologies Wi Fi and the like. SDARS data downloads can provide the most flexibility and lowest cost by pulling digital data from an existing receiver that exists for entertainment purposes. An SDARS data stream is not a channelized implementation like AM or FM radio but a broadband implementation that provides a single data stream that is separated into useful and applicable components.

GPS receiver can receive position information from a constellation of satellites operated by the U.S. Department of Defense. Alternately the GPS receiver can be a GLONASS receiver operated by the Russian Federation Ministry of Defense or any other positioning device capable of providing accurate location information for example LORAN inertial navigation and the like . GPS receiver can contain additional logic either software hardware or both to receive the Wide Area Augmentation System WAAS signals operated by the Federal Aviation Administration to correct dithering errors and provide the most accurate location possible. Overall accuracy of the positioning equipment subsystem containing WAAS is generally in the two meter range. Optionally the apparatus can comprise a MEMS gyro for measuring angular rates and wheel tick inputs for determining the exact position based on dead reckoning techniques. This functionality is useful for determining accurate locations in metropolitan urban canyons heavily tree lined streets and tunnels.

One or more processors can control the various components of the apparatus . Processor can be coupled to removable non removable volatile non volatile computer storage media. By way of example illustrates memory coupled to the processor which can provide non volatile storage of computer code computer readable instructions data structures program modules and other data for the computer . For example and not meant to be limiting memory can be a hard disk a removable magnetic disk a removable optical disk magnetic cassettes or other magnetic storage devices flash memory cards CD ROM digital versatile disks DVD or other optical storage random access memories RAM read only memories ROM electrically erasable programmable read only memory EEPROM and the like.

The processing of the disclosed systems and methods can be performed by software components. The disclosed system and method can be described in the general context of computer executable instructions such as program modules being executed by one or more computers or other devices. Generally program modules comprise computer code routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. The disclosed method can also be practiced in grid based and distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules can be located in both local and remote computer storage media including memory storage devices.

The methods and systems can employ Artificial Intelligence techniques such as machine learning and iterative learning. Examples of such techniques include but are not limited to expert systems case based reasoning Bayesian networks behavior based AI neural networks fuzzy systems evolutionary computation e.g. genetic algorithms swarm intelligence e.g. ant algorithms and hybrid intelligent systems e.g. Expert inference rules generated through a neural network or production rules from statistical learning .

Any number of program modules can be stored on the memory including by way of example an operating system and reporting software . Each of the operating system and reporting software or some combination thereof can comprise elements of the programming and the reporting software . Data can also be stored on the memory in database . Database can be any of one or more databases known in the art. Examples of such databases comprise DB2 Microsoft Access Microsoft SQL Server Oracle mySQL PostgreSQL and the like. The database can be centralized or distributed across multiple systems.

By way of example the operating system can be a Linux Unix like operating system. One feature of Linux is that it includes a set of C programming language functions referred to as NDBM . NDBM is an API for maintaining key content pairs in a database which allows for quick access to relatively static information. NDBM functions use a simple hashing function to allow a programmer to store keys and data in data tables and rapidly retrieve them based upon the assigned key. A major consideration for an NDBM database is that it only stores simple data elements bytes and requires unique keys to address each entry in the database. NDBM functions provide a solution that is among the fastest and most scalable for small processors.

It is recognized that such programs and components reside at various times in different storage components of the apparatus and are executed by the processor of the apparatus . An implementation of reporting software can be stored on or transmitted across some form of computer readable media. Computer readable media can be any available media that can be accessed by a computer. By way of example and not meant to be limiting computer readable media can comprise computer storage media and communications media. Computer storage media comprise volatile and non volatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Exemplary computer storage media comprises but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by a computer.

The processor can control additional components within the apparatus to allow for ease of integration into vehicle systems. The processor can control power to the components within the apparatus for example shutting off GPS receiver and SDARS receiver when the vehicle is inactive and alternately shutting off the PCS Cell Modem to conserve the vehicle battery when the vehicle is stationary for long periods of inactivity. The processor can also control an audio video entertainment subsystem and comprise a stereo codec and multiplexer for providing entertainment audio and video to the vehicle occupants for providing wireless communications audio PCS Cell phone audio speech recognition from the driver compartment for manipulating the SDARS receiver and PCS Cell Modem phone dialing and text to speech and pre recorded audio for vehicle status annunciation.

The apparatus can interface and monitor various vehicle systems and sensors to determine vehicle conditions. Apparatus can interface with a vehicle through one or more vehicle interfaces . The vehicle interface can include but is not limited to OBD On Board Diagnostics port OBD II port CAN Controller Area Network Low Speed 250 Kbps High Speed 500 Kbps port and the like. ISO 9141 KWP2000 Key Word Protocol J1850 PWM Pulse Width Modulation J1850 VPWM Variable Pulse Width Modulation and the like. The vehicle interface allows the apparatus to receive data indicative of vehicle performance such as vehicle trouble codes operating temperatures operating pressures speed fuel air mixtures oil quality oil and coolant temperatures wiper and light usage mileage break pad conditions and any data obtained from any discrete sensor that contributes to the operation of the vehicle engine and drive train computer. Additionally CAN interfacing can eliminate individual dedicated inputs to determine brake usage backup status and it can allow reading of onboard sensors in certain vehicle stability control modules providing gyro outputs steering wheel position accelerometer forces and the like for determining driving characteristics. The apparatus can interface directly with a vehicle subsystem or a sensor such as an accelerometer gyroscope airbag deployment computer and the like.

Communication with a vehicle driver can be through an infotainment radio head not shown or other display device not shown . More than one display device can be used. Examples of display devices include but are not limited to a monitor an LCD Liquid Crystal Display a projector and the like.

The apparatus can receive power from power supply . The power supply can have many unique features necessary for correct operation within the automotive environment. One mode is to supple a small amount of power typically less than 100 microamps to at least one master controller that can control all the other power buses inside of the PASS ECU . In an exemplary system a low power low dropout linear regulator supplies this power to PCS Cellular modem . This provides the static power to maintain internal functions so that it can await external user push button inputs or await CAN activity via vehicle interface . Upon receipt of an external stimulus via either a manual push button or CAN activity the processor contained within the PCS Cellular modem can control the power supply to activate other functions within the PASS ECU such as GPS GYRO Processor Memory and SDARS receiver audio video entertainment system audio codec mux and any other peripheral within the PASS ECU that does not require standby power.

In an exemplary system there can be a plurality of power supply states. One state can be a state of full power and operation selected when the vehicle is operating. Another state can be a full power relying on battery backup. It can be desirable to turn off the GPS and any other non communication related subsystem while operating on the back up batteries. Another state can be when the vehicle has been shut off recently perhaps within the last 30 days and the system maintains communications with a two way wireless network for various auxiliary services like remote door unlocking and location determination messages. After the recent shut down period it is desirable to conserve the vehicle battery by turning off almost all power except the absolute minimum in order to maintain system time of day clocks and other functions waiting to be awakened on CAN activity. Additional power states are contemplated such as a low power wakeup to check for network messages but these are nonessential features to the operation of the PASS ECU .

Normal operation can comprise for example the PCS Cellular modem waiting for an emergency pushbutton key press or CAN activity. Once either is detected the PCS Cellular modem can awaken and enable the power supply as required. Shutdown can be similar wherein a first level shutdown turns off everything except the PCS Cellular modem for example. The PCS Cellular modem can maintain wireless network contact during this state of operation. The PASS ECU can operate normally in the state when the vehicle is turned off. If the vehicle is off for an extended period of time perhaps over a vacation etc. the PCS Cellular modem can be dropped to a very low power state where it no longer maintains contact with the wireless network.

Additionally in subsystems can include a BlueTooth transceiver can be provided to interface with occupant supplied devices such as phones headsets and music players. Emergency button can be coupled to the processor . The emergency button can be located in a vehicle cockpit and activated an occupant of the vehicle. Activation of the emergency button can cause processor to initiate a voice and data connection from the vehicle to a remote call center. Data such as GPS location and occupant personal information can be transmitted to the call center. The voice connection permits two way voice communication between a vehicle occupant and a call center operator. The call center operator can have local emergency responders dispatched to the vehicle based on the data received. In another embodiment the connections are made from the vehicle to an emergency responder center.

One or more non emergency buttons can be coupled to the processor . One or more non emergency buttons can be located in a vehicle cockpit and activated an occupant of the vehicle. Activation of the one or more non emergency buttons can cause processor to initiate a voice and data connection from the vehicle to a remote call center. Data such as GPS location and occupant personal information can be transmitted to the call center. The voice connection permits two way voice communication between a vehicle occupant and a call center operator. The call center operator can provide location based services to the vehicle occupant based on the data received and the vehicle occupant s desires. For example a button can provide a vehicle occupant with a link to roadside assistance services such as towing spare tire changing refueling and the like. In another embodiment a button can provide a vehicle occupant with concierge type services such as local restaurants their locations and contact information local service providers their locations and contact information travel related information such as flight and train schedules and the like.

For any voice communication made through the PASS ECU text to speech algorithms can be used so as to convey predetermined messages in addition to or in place of a vehicle occupant speaking. This allows for communication when the vehicle occupant is unable or unwilling to communicate vocally.

PASS ECU can communicate with one or more computers either through direct wireless communication and or through a network such as the Internet. One skilled in the art will appreciate that what follows is a functional description of an exemplary operating environment and that functions can be performed manually by software by hardware or by any combination of manual software and hardware.

In another aspect the PASS ECU and optional Back Up Battery BUB unit can comprise in vehicle components of the PASS system. illustrates an exemplary functional partitioning and interfaces of the PASS ECU and BUB .

The PASS ECU can be comprised of one or more of the following functional partitions. An Applications Processor AP Subsystem can be comprised of a processor such as a Reduced Instruction Set Code RISC processor a memory subsystem a diagnostics CAN interface power management and clocking circuits. The AP Subsystem can provide monitoring and control interfaces to control subsystems. Interrupt and handshaking signals can be provided to control the reset and run operation of the AP Subsystem . A Cellular Network Controller CNC can be comprised of the elements necessary to provide access to a cellular network. The CNC can support one or more of the following exemplary functions GSM GPRS R99 850 1900 Mhz operation Echo Cancellation and Suppression Microphone Inputs Loudspeaker Output and Cellular Antenna Selection and the like. A GPS Subsystem can be comprised of the elements necessary to provide a high sensitivity GPS receiver as well as dead reckoning logic for PASS ECU location based services. A Vehicle Interface Controller VIC can be comprised of the elements necessary to provide control and monitoring of one or more of the following exemplary vehicle interface functions Switches Indicators and Control Vehicle CAN Interface crash interfaces vehicle battery Power Mode Management and Engineering and Instrumentation Interface .

The PASS ECU can comprise one or more of the following interfaces Cellular Antenna s GPS Antenna Vehicle CAN Diagnostics CAN Crash Data Microphone s and Loudspeaker Switches Indicators and Controls Engineering and Instrumentation Vehicle Battery and Back Up Battery .

The PASS Back Up Battery can be an optional component of the system that interfaces directly to the PASS ECU and provides power for selected emergency services in the event of a loss of primary vehicle battery.

Illustrated in is a block level description of exemplary AP Subsystem functional elements. shows the relationships and interconnection of these elements.

The AP Subsystem can integrate a high performance processor and system peripheral functions. Exemplary functional elements and interfaces include but are not limited to a processor RAM flash memory GPS Subsystem Interface Vehicle Interface Controller VIC Interface Cellular Network Controller Interface Diagnostics CAN Interface and a Clock Source .

The AP Subsystem can incorporate a processor that can comprise one or more of the following peripheral control functions RAM Memory Controller Flash Memory Controller Serial Peripheral Interfaces SPI UART Controller CAN Controller Interrupt Controller and the like.

The processor can comprise a memory controller that can support both volatile RAM and nonvolatile Flash external memory devices. The interface can support any amount of memory for example 64 Mbytes of RAM and 64 Mbytes of Flash memory.

An industry standard SPI can provide for control and data exchange between the AP Subsystem and the Global Positioning System GPS Subsystem . An industry standard SPI can provide for control and data exchange between the AP Subsystem and the VIC .

The Applications Processor can comprise an interface for Diagnostics CAN D that can operate for example at 500 K Baud. The PASS ECU can utilize the CAN D bus to perform remote diagnostics using for example Keyword Protocol KWP and Unified Diagnostics Services UDS diagnostic protocols.

A CNC Interface such as a Universal Asynchronous Receiver Transmitter UART interface can provide control and data communications between the AP Subsystem and the CNC . The CNC can be comprised of the elements necessary to provide access to a cellular network with one or more of the following functions GSM GPRS Coding Schemes CS 1 to CS 4 GPRS Multi slot Classes 1 12 Class B and C SMS USSD Dual band operation 850 MHz Power Class 4 33 dBm 1900 MHz Power Class 1 30 dBm 3GPP Release 99 Compliant Quad Audio Codec FR HR EFR AMR Echo Cancellation and Suppression Noise Suppression Audio Amplifier for Direct Speaker Connection Multiple Microphone Inputs Antenna Selection and the like.

Illustrated in is a block level description of exemplary CNC functional elements. shows the relationships and interconnection of these elements.

GSM GPRS controller can integrate for example a baseband processing subsystem not shown an audio subsystem a power management unit not shown and an RF transceiver in a single chip device in support of a dual band GSM network interface.

The GSM GPRS controller can comprise for example a memory controller that supports both volatile RAM and nonvolatile Flash external memory devices.

A Subscriber Information Module SIM device or chip is an SMD package device that can interface with the GSM GPRS Controller through for example a dedicated Smart Card Interface Module. The SIM device can support the security characteristics and memory requirements necessary to support GSM standards.

A signal interface between the CNC and the VIC can provide for example for control of the power mode of the CNC and for signaling of message detected states from the CNC to the VIC during Sleep Polling operation. The signal interface can be dedicated.

A Cellular Interface in the PASS ECU system can comprise one or more antenna inputs and an RF Switch to select between the antennas. Some vehicles comprise one or more built in antennas. The PASS ECU system can determine which antenna to use and implement the determination with the RF Switch .

In one aspect the PASS ECU can be connected to at least one antenna at any given point in time. Some vehicles provide an option to interface with an external phone while some do not provide this option. If there is an external phone system PASS ECU can share the primary antenna with the phone through RF switch . The PASS ECU can control the switching of the RF switch . The phone can be independent of PASS ECU and can be configured to only be connected via activation of a phone on signal. This strategy for antenna switching can be derived based on usage of the best received signal antenna when a service is active higher priority for Telematics services over phone usage and information to PASS ECU as to whether the phone is available in the vehicle and is powered. For example if the phone is powered and if no Telematics services are active PASS ECU remains connected to the secondary antenna.

The PASS ECU can recognize the antenna configuration installed in a vehicle and perform antenna selection based on the antenna strategy. For example the PASS ECU can read the vehicle type from the CAN bus and establish the configuration based on the pre existing parameters for each type of vehicle to determine the antenna configuration for the vehicle.

In one aspect illustrated in provided are methods for vehicle communications comprising selecting an antenna according to an antenna selection strategy at and switching communication to the selected antenna at . Selecting an antenna according to an antenna selection strategy can comprise selecting one of a plurality of antennas that comprises a best received signal based on signal strength. Selecting an antenna according to an antenna selection strategy can comprise selecting between a primary antenna and a secondary antenna.

The methods can further comprise sharing the primary antenna with an in vehicle phone. The methods can further comprise disconnecting the in vehicle phone to utilize the primary antenna to provide an emergency telematics service. The methods can further comprise switching to the secondary antenna if the in vehicle phone is in use. Switching communication to the selected antenna can comprise an RF switch.

In another aspect illustrated in provided is an apparatus for vehicle communications comprising an antenna selecting unit configured to select an antenna according to an antenna selection strategy and an antenna switch coupled to the antenna selecting unit configured to direct communications through the selected antenna . The antenna selecting unit can be configured to select one of a plurality of antennas that comprises a best received signal based on signal strength. The antenna selecting unit can be configured to select between a primary antenna and a secondary antenna

The primary antenna can be shared with an in vehicle phone . An antenna switch can be configured to disconnect the in vehicle phone to utilize the primary antenna to provide an emergency telematics service. The antenna switch can be configured to utilize the secondary antenna if the in vehicle phone is in use. In vehicle phone use can be detected through connection . The antenna switch and can comprise an RF switch.

Returning to the RF Front End Module FEM can be an integrated module that has for example a TX RX Switch not shown TX filters not shown Power Amplifiers PAs for GSM 850 MHz and 1900 MHz frequencies and Power control circuitry not shown . TX RX switch can be a Single Pole Quad Throw Switch SP4T switch that incorporates for example two receive paths and two transmit paths. Logic circuitry can be responsible for selection of operating mode TX RX of the FEM and enabling the right PA for the required band of transmission. A function of the power control circuit can be to control the output power of the PAs by controlling duty cycles.

External Surface Acoustic Wave SAW filters can be used in the RX path to interface with internal Low Noise Amplifiers LNAs not shown . For example two discrete SAW filters can be utilized to cover the GSM 850 MHz and 1900 MHz system.

In one aspect the PASS ECU can provide one or more microphone inputs. For example the PASS ECU can provide four microphone inputs. In another aspect only two of the microphone inputs can be used depending on the vehicle type. Equal power mix of both microphones can be implemented. Circuitry can also be provided to enable disable individual microphone.

The PASS ECU can provide an audio amplifier such as a 1.5 Watt audio amplifier . The audio amplifier can drive speakers such as 4 10 ohm speakers.

In another aspect the PASS ECU can provide fault detection for the audio output interface. For example the PASS ECU can check the discrete connection to a single speaker system and generate failure codes if the connection is open. A voltage sensing principle can be utilized for fault detection. EMC protection can be implemented for example by using discrete LC filters or Ferrite Bead filters.

Illustrated in is a block level description of exemplary GPS Subsystem functional elements. shows the relationships and interconnection of these elements.

The GPS Subsystem can comprise elements necessary to provide a high sensitivity GPS receiver for real time navigation for the PASS ECU . For example the GPS Subsystem can provide one or more of the following features high sensitivity receiver acquisition down to 158 dBm for improved urban canyon operation rapid time to fix and Dead Reckoning DR differential wheel estimation closely coupled GPS DR filter algorithm support for optional angular rate sensor inputs.

The GPS Subsystem can comprise a high sensitivity GPS receiver and an RISC processor GPS controller that supports a DR software function. The DR function can be dynamically configured to support differential wheel speed odometer and Angular Rate Sensor ARS inputs in all combinations. The GPS controller can comprise a memory controller that supports for example nonvolatile Flash memory .

A GPS antenna not shown can utilize dc power on signal line to power an internal low noise amplifier LNA . The PASS ECU can interface to the GPS antenna of the vehicle. Collocation of the GPS and cellular antennas requires that the antennas and the GPS receiver front end together provide the required isolation to prevent de sense of the GPS receiver during cellular transmissions.

A multiplex circuit can be implemented to combine the dc power and the GPS signal. The LNA de power supply can comprise Electrostatic Discharge ESD protection diode and attach to the signal line by a RF choke inductor.

Vehicles can be equipped with one or more GPS antennas. The GPS antenna can be used by the PASS ECU to provide vehicle position information and can be directly connected to the PASS ECU or via an external GPS splitter in case the vehicle has an additional navigation system.

A GPS SAW filter for example centered at 1575.42 MHz can be used for rejecting out of band signals preventing entry into the GPS receiver. The cellular signals can be attenuated by the whole receiver chain which can comprise the antenna LNA filter and the SAW filter with specially designed matching circuits. An industry standard SPI interface can provide for control and data exchange between the AP Subsystem and the GPS Subsystem . A signal interface between the GPS Subsystem and the VIC can provide for control of the power mode of the GPS Subsystem.

The GPS controller can be configured with an optional Angular Rate Sensor ARS not shown to Dead Reckoning DR navigation in vehicles without ABS ESP differential wheel speed data. The ARS can be attached to a VIC ADC. The VIC can formulate angular rate messages and forward them to the AP which in turn can forward the messages to the GPS Controller for processing.

In one aspect provided is a VIC illustrated in . The VIC can comprise a microcontroller that can manage vehicle interfaces such as the vehicle bus interface for CAN B or I HS and LIN. The VIC can pass vehicle signal data between the AP of the PASS ECU and other vehicle ECU s using for example standard Vector signal drivers as is known in the art. The VIC can participate in vehicle network management utilizing the standard Vector Network Management drivers. Network management functions such as loss of communications bus wake glitch detection and bus off handling can also be performed. The VIC can implement standard diagnostic layers and can provide a subset of the required diagnostic services in addition to providing a diagnostic conduit to the AP . The VIC can maintain cumulative timers to measure the total time the unit operated in each power mode for use in reliability analysis.

The PASS ECU Vehicle CAN interfaces can comprise for example one or more of a CAN B 83.3 K Baud a CAN I HS 125 K Baud and the like. The interface can operate in non dominant mode and can include terminations for the interface type. For example the PASS ECU can use applicable CAN B or CAN I HS bus and CAN D bus Vehicle Message Matrix VMM and or Kmatrix to determine bus message requirements. The PASS ECU can have common software on all vehicle lines with different VMMs or Kmatrices. The PASS ECU can store unique CAN bus message ID tables for each unique VMM or Kmatrix and then overwrite the default message ID table within the compiled DBC files.

In one aspect illustrated in provided are methods for vehicle telematics comprising receiving vehicle data through a first vehicle interface configured to communicate with a public vehicle bus at and a second vehicle interface configured to communicate with a private vehicle bus at and storing the vehicle data at .

Receiving vehicle data through a first vehicle interface configured to communicate with a public vehicle BUS and a second vehicle interface configured to communicate with a private vehicle BUS can comprise receiving data from a CAN d bus and a CAN b bus.

The methods can further comprising wirelessly transmitting the vehicle data. The methods can further comprise receiving location data from a GPS receiver. The methods can further comprise storing the location data. The methods can further comprise wirelessly transmitting the vehicle data and the location data. The methods can further comprise selecting from a plurality of antennas an antenna out of the plurality of antennas based on available signal strength.

In another aspect provided is an apparatus for vehicle telematics comprising a first vehicle interface configured to communicate with a public vehicle bus a second vehicle interface configured to communicate with a private vehicle bus a processor coupled to the first vehicle interface and the second vehicle interface and a memory coupled to the processor configured for storing data retrieved through the first vehicle interface and the second vehicle interface.

The apparatus can further comprise a wireless transceiver configured to transmit data stored on the memory. The apparatus can further comprise a GPS configured to determine a location of the apparatus. The memory can be configured to store GPS data. The apparatus can further comprise a user serviceable back up battery.

The apparatus can further comprise an antenna interface to a plurality of antennas and an antenna selection component configured for selecting an antenna out of the plurality of antennas based on available signal strength.

The public vehicle bus can be one or more of a Controller Area Network Diagnostic CAN D Low Speed 250 Kbps High Speed 500 Kbps ISO 9141 KWP2000 Key Word Protocol J1850 PWM Pulse Width Modulation J1850 VPWM Variable Pulse Width Modulation and the like. The private vehicle bus can be one or more of a Body CAN B Chassis CAN C LIN Local Interface network OEM specific proprietary bus and the like.

In another aspect provided is an apparatus for vehicle telematics comprising a first vehicle interface configured to communicate with a public vehicle BUS a second vehicle interface configured to communicate with a private vehicle BUS a processor coupled to the first vehicle interface and the second vehicle interface and a memory coupled to the processor configured for storing data for transmission through at least one of the first vehicle interface or the second vehicle interface.

In another aspect provided is an apparatus for vehicle telematics comprising a public vehicle bus a private vehicle bus a processor coupled to public vehicle bus and the private vehicle bus and a memory coupled to the processor configured for storing data for transmission through at least one of the public vehicle interface or the private vehicle interface.

In yet another aspect provided is an apparatus for vehicle telematics comprising a public vehicle bus a private vehicle bus a processor coupled to public vehicle bus and the private vehicle bus and a memory coupled to the processor configured for storing data retrieved through at least one of the public vehicle interface or the private vehicle interface.

Returning to a crash sensor interface can comprise a discrete line or a LIN communication bus between the VIC microprocessor and a crash sensor. For example if a discrete wire is used the crash sensor output can be implemented as a communications interface according to ISO 9041 diagnosis interface . In the event that the crash sensor uses LIN crash output data can be communicated to the VIC via LIN. Crash data can also be communicated to the VIC via CAN B or CAN I HS if the sensor is CAN capable.

A switch and indicator interface can be controlled with the VIC microcontroller and can be accomplished through discrete parts and devices with integrated diagnostic status capabilities. In one aspect switch interface circuitry for the Emergency Call ECall Roadside Assistance Call RCall and Information Call ICall buttons can be implemented with discrete parts and can comprise button press detection. This interface can wake up the required elements of the PASS ECU when a button is pressed while the PASS ECU is in sleep mode. Another switch interface on the VIC can be an external RF switch not shown which can use a high side driver controlled by digital inputs and outputs. Through the use of discrete parts switch interfaces of the VIC can perform hardware diagnostics functions.

By way of example E Call R Call and I Call buttons can interface with the PASS ECU via analog inputs that allow module diagnostics to detect open shorts and stuck switch. For example the button signals can be SPST momentary switches wired in parallel with a 1 K resistor. One side of this parallel switch resistor circuit can be connected to a vehicle ground and the other side can be wired to the PASS ECU button inputs. Each switch input can be conditionally pulled up via a 1 K resistor to vehicle battery and connected to a VIC analog input channel through a voltage divider to bring switch input voltage swing within A D channel range of 0 to 3.3 volts. In one aspect in order to meet PASS ECU Sleep Mode current levels 1 K pull ups can be connected through a high side switch to the vehicle battery. This allows the VIC microcontroller to periodically wake up connect button input pull ups to vehicle battery and scan button A D channels to determine if a button is pressed. If no buttons are pressed the pull up vehicle battery switch is switched off by VIC microcontroller and powers down to its sleep state.

An indicator interface can use a high side driver IC with diagnostics status capabilities for LEDs. LED indicators in one or more of the buttons can provide button and function status to operator. The button indicator LEDs can be wired in common cathode configuration to vehicle ground. Button illumination can be accomplished through a Pulse Width Modulator PWM output of the VIC and a high side driver. The high side driver can be capable of driving 0.2 A of current and can have built in hardware diagnostics capabilities for the VIC to perform required diagnostics on this I O pin. The diagnostics status capability of the IC can allow the PASS ECU to perform hardware diagnostics functions for these indicators. By way of example button illumination can be accomplished with a high side driver . The muting of a Head Unit HU can be controlled by the VIC in the event an emergency phone call is placed. This mute can be accomplished through one of the VIC s digital I O output pins and is an open collector drive to Ground GND . A Phone On function of the PASS ECU is an input to the VIC indicating that an external phone is present and powered. The Phone On interface uses one of the digital V O input pins on the VIC .

An External RF Switch function of the PASS ECU can be performed by the VIC through one of its digital I O output pins that controls the single channel high side driver. This high side driver can be capable of driving 0.2 A of current and can have built in hardware diagnostics capabilities for the VIC to perform required diagnostics on this I O pin.

A PASS Engineering and Instrumentation interface can be provided through one of the UART channels on the VIC . Data from the AP can be received over SPI and transmitted out on the UART. Data received by the VIC on the UART can be sent via SPI to the AP . Data flow control can be handled by the AP and an external tool program. Standard baud parity and bit configuration can be used so that an external terminal program can be used to monitor UART data that the PASS system is writing. For example the UART interface can require external level shifting for interfacing to a USB RS 232 Firewire and the like port of a PC or wirelessly.

In one aspect the VIC microprocessor can use an analog input channel to interface with an Angular Rate Sensor. Measurements taken from these interfaces can be provided to the AP via the AP SPI interface.

The VIC can interface with various power supply systems through a power supply interface . The VIC can measure the voltage level of the vehicle battery and control the BUB . During normal mode operation the VIC can periodically test the BUB health. Wake up processing from the vehicle CAN CNC and any button press can be performed on the VIC . Periodic wake ups can be performed by an internal real time clock of the VIC microprocessor to control the CNC for sleep polling monitoring for incoming SMS messages. The VIC can also enable and disable one or more of the following power supplies as required by the power mode though its digital I O channels GPS power AP power Audio power GSM power and CAN power.

The BUB circuit can comprise an interface to an external backup battery ECU internal boost switching converter and battery monitor interface from the VIC that can switch from the main car battery to the BUB in the event of power loss. The VIC can enables the BUB circuit but the BUB can be configured to not be utilized until for example the vehicle battery voltage drops below a threshold of 9 V. The battery can hold one or more end user replaceable batteries that can be replaced on a predetermined schedule. In one aspect since the batteries are easily accessible the batteries may not be co located with the PASS ECU .

In one aspect illustrated in provided is a battery back up apparatus for a vehicle telematics unit comprising a battery enclosure configured to house a user replaceable battery wherein the battery enclosure is located in a user accessible location and a power interface configured to couple the battery back up apparatus to the vehicle telematics unit and transmit power to the vehicle telematics unit .

The apparatus can further comprise a battery management circuit configured to enable zero current draw when the battery back up apparatus is uncoupled from the vehicle telematics unit. The user accessible location can comprise the fuse panel kick plate glove box the center console and the like.

The battery back up apparatus can be configured to transmit power to the vehicle telematics unit when a main battery is no longer operational. The vehicle telematics unit can be configured to utilize the power upon receipt of a request for an emergency service. The emergency service can comprise an emergency call an automatic crash notification roadside assistance request and the like.

The battery management circuit can be configured to provide a battery status to the vehicle telematics unit. The battery management circuit can be configured to determine the back up battery status on a predetermined interval. The battery management circuit can be configured to transmit the battery status to the vehicle telematics unit. The vehicle telematics unit can be configured to wirelessly transmit the battery status.

The apparatus can further comprise a battery status indicator configured to provide a notification of the battery status to a user. Notification can comprise a visual notification or an audio notification. Notification can comprise a visual notification and or an audio notification. For example a visual notification can comprise one or more of a blinking light an indicator light a check engine light a text message and the like. For example an audio notification can comprise a beep a tone an automated voice message and the like.

The user replaceable battery can comprise typical off the shelf batters such as AA AAA C D 9V and the like. The user replaceable battery can comprise any number of batteries such as from about 1 to about 20 batteries. In one aspect the user replaceable battery comprises four AA batteries.

In another aspect provided is a battery back up apparatus for a vehicle telematics unit comprising a battery management circuit configured to enable zero current draw when the battery back up apparatus is uncoupled from the vehicle telematics unit.

In another aspect provided is battery back up apparatus for a vehicle telematics unit comprising a battery enclosure configured to house a battery and a power interface configured to couple the battery back up apparatus to the vehicle telematics unit and transmit power to the vehicle telematics unit.

The PASS ECU can monitor the service life of the battery pack and generate alarms at a service event for example visual or aural reminders at ignition on a heads up display message an automatic maintenance event and the like. shows a high level functional block diagram of an exemplary BUB .

A Boost Switching Converter can take raw unregulated battery voltage and increases that voltage using classical boost regulator technology to a regulated working voltage at the highest voltage rail for the design. This solves the problems of low and or sagging battery voltages as the batteries age or are used causing any of electrical circuitry to drop below required operating voltages.

A Battery Monitor Switch can have as inputs the BUB voltage conditioned by the Boost Switching Converter and the Vehicle Battery . The output can be the voltage current source for the DC Power Distribution of the ECU . The Battery Monitor Switch can monitor the vehicle battery preferred power source and when that drops below a certain voltage ex. 9 vdc then the switch can disconnects the vehicle battery from the output and instead connects the BUB voltage conditioned by the Boost Switching Converter to the output powering the ECU from the BUB .

DC Power Distribution can provide numerous working voltages to the digital analog circuitry on the ECU ex. 3.3 vdc 5 vdc etc. and requires a stable source of input power voltage current to function properly. The Battery Monitor Switch can provide this input power by selecting either the first of vehicle battery or second of BUB conditioned by the Boost Switching Converter .

Upon loss of the vehicle battery the BUB circuit can support extension of Automatic Emergency Calls Manual Emergency Calls and Roadside Assistance Calls on a one time basis. A Replace Battery indication can be generated and can persist until the vehicle battery is restored and a positive indication that the BUB has been replaced has been detected. The specifics of the indication can vary depending on the vehicle. For example a method of BUB replacement indication can be to require extended user pressing of one or more PASS ECU buttons after detection of an open BUB circuit battery removed .

The BUB circuit can resist damage from vehicle and backup battery over voltage vehicle and backup battery reversal short circuits to either battery voltage short circuits to ground vehicle battery supply voltage transients ESD installation of battery types with cell voltages up to 3.2 V Lithium and the like.

In one aspect illustrated in provided are methods for battery back up operation of a vehicle telematics device comprising receiving power from a battery backup at receiving a request for a telematics service at and determining if the request is for an emergency service at wherein if the request is not for an emergency service the request is denied at and if the request is for an emergency service providing the emergency service at . Receiving power from a battery backup can comprise receiving power when a main battery is no longer operational.

The methods can further comprise wirelessly transmitting a status of the main batter to a server. The method can further comprise receiving a status of the back up battery. The method can further comprise wirelessly transmitting the back up battery status.

The methods can further comprise providing a notification to a user that the vehicle telematics device is using back up battery power. Notification can comprise a visual notification and or an audio notification. For example a visual notification can comprise one or more of a blinking light an indicator light a check engine light a text message and the like. For example an audio notification can comprise a beep a tone an automated voice message and the like.

The methods can further comprise determining a status of the battery backup. Determining a status of the battery backup can further comprise determining the status of the battery backup on a predetermined interval.

In one aspect provided are power management schemes to reduce unnecessary current draw during various power modes. For example the VIC can control power modes of various functional blocks and can initiate and or gracefully shut down each block. Table 1 shows exemplary functional blocks within the PASS ECU that are available in each of the power modes.

In an aspect illustrated in provided are methods for power management in a vehicle telematics unit comprising operating by the vehicle telematics unit in one of a plurality of power modes at determining if at least one power mode transition criterion has been met at and changing operation of the vehicle telematics unit from a first mode to a second mode according to the at least one power mode transition criterion at .

Determining if at least one power mode transition criterion has been met can comprise determining if one of detection of activity on a vehicle bus or receipt of a request for a telematics service is met and the first mode is sleep mode and the second mode is normal mode.

Determining if at least one power mode transition criterion has been met can comprise determining if a polling timer is met and the first mode is sleep mode and the second mode is polling mode.

Determining if at least one power mode transition criterion has been met can comprise determining if one of ignition on receipt of a request for a telematics service receipt of data from a wireless network or activity on a vehicle bus is met and the first mode is polling mode and the second mode is sleep mode.

Determining if at least one power mode transition criterion has been met can comprise determining if ignition off no active telematics services no activity on a vehicle BUS and a wireless transceiver registered on a wireless network are met and the first mode is normal mode and the second mode is sleep mode. The methods can further comprise determining if inactive phone input line is met.

Determining if at least one power mode transition criterion has been met can comprise determining if ignition off no active telematics services no activity on a vehicle BUS and a wireless transceiver activated and registered on a wireless network are met and the first mode is normal mode and the second mode is low power mode. The methods can further comprise determining if inactive phone input line is met.

Determining if at least one power mode transition criterion has been met can comprise determining if one of ignition on receipt of a request for a telematics service receipt of data from a wireless network or activity on a vehicle bus is met and the first mode is polling mode and the second mode is normal mode.

Determining if at least one power mode transition criterion has been met can comprise determining if one of ignition on receipt of a request for a telematics service activation of a telematics service receipt of data from a wireless network or activity on a vehicle bus is met and the first mode is low power mode and the second mode is normal mode.

Determining if at least one power mode transition criterion has been met can comprise determining if ignition off no active telematics services no activity on a vehicle BUS a wireless transceiver activated and registered on a wireless network are met and the first mode is normal mode and the second mode is low power mode. The methods can further comprise determining if inactive phone input line is met.

Determining if at least one power mode transition criterion has been met can comprise determining if one of expiration of a timer detection of loss of a connection to a wireless network or unauthorized telematics service request is met and the first mode is low power mode and the second mode is sleep mode.

Determining if at least one power mode transition criterion has been met can comprise determining if loss of a main battery supply is met and the first mode is normal mode and the second mode is back up battery mode.

Determining if at least one power mode transition criterion has been met can comprise determining if one of ignition on receipt of a request for a telematics service activation of a telematics service receipt of data from a wireless network or activity on a vehicle bus is met and the first mode is back up battery mode and the second mode is normal mode.

Sleep Mode is the lowest power mode in which the PASS ECU unit can operate. All major components like the Application Processor powered off when entering Sleep Mode . Any volatile memory contents timer in the VIC expires.

In normal mode all functional blocks in the PASS ECU module can be powered and operational as shown in Table 2. Normal Mode can exit to Sleep Mode when all of the following conditions are true the ignition is off no services are active no CAN bus activity the CNC is registered on the network and the Phone ON input line if available is inactive.

Normal Mode can exit to Low Power Mode when all of the following conditions are true the ignition is off no services are active no CAN bus activity the CNC is activated and registered on the network and the Phone ON input line if available is inactive.

Polling Mode is a transitory mode during which the VIC temporarily wakes up from Sleep Mode when a polling timer expires to determine if there are any incoming messages via the CNC . Polling Mode can exit to Normal Mode if any of the following criteria are met the ignition is turned on any of the ECall RCall ICall buttons are pressed the PASS ECU module received data from the Service Operator via the CNC or the PASS ECU module detects CAN activity.

Polling Mode can exit back to Sleep Mode if none of the above criteria are met after the CNC registers with the network and determines there are no incoming messages for the PASS ECU .

Low Power Mode is a longer term transitory stage that is entered whenever the ignition transitions from on to off and no services are requested. The CNC is still registered to the network at this point and all service activations are possible. Low Power Mode exits to Normal Mode if any of the following criteria are met the ignition is turned on any of the ECall RCall ICall buttons are pressed the PASS ECU module received data from the network via the CNC the PASS ECU module detects CAN activity or activation of a service either via CAN bus discrete button push incoming call or received data .

Low Power Mode can exit back to Sleep Mode when a timer expires for example default value of 3 days in Low Power Mode the CNC detects a loss of the network or all the services in the PASS ECU are not authorized in transit from Normal Mode .

BUB Mode can facilitate an emergency call for a duration of for example a minimum of 5 minutes at 20 C. after a 3 year period from the date of install. This can comprise one or more of the following PASS features Automatic Emergency Call AEC Manual Emergency Call and or Roadside Assistance.

By way of example the following PASS features can be configured to not be supported in BUB Mode Remote Door Unlock Vehicle Tracking Remote Door Lock Remote Diagnostics Automatic Maintenance Information Call and or POI Download. However it is specifically contemplated that supported features can be expanded to include not supported features and vice versa as needs dictate.

Exemplary functional elements that are powered in BUB Mode can be the CNC for network access the audio interface for user interaction and the VIC for power management and monitoring.

Note that the following features can be configured to not be available when in BUB Mode button illumination button fault detection CAN bus GPS GPRS and the like.

BUB Mode can be an exception mode that is activated when the main vehicle battery voltage drops below a predetermined threshold such as 9 V and the VIC has enabled the BUB feature.

The VIC can enable the BUB feature upon for example crash notification ECall button press RCall button press and the like. The VIC can be responsible for gracefully shutting down the respective functional blocks that are not supported in BUB Mode .

Restoration of the vehicle battery in conjunction with any of the following conditions can cause the PASS ECU to exit BUB Mode into Normal Mode the ignition is turned on any of the ECall RCall ICall buttons are pressed the PASS ECU module received data from the network via the CNC the PASS ECU module detects CAN activity or activation of a service either via CAN bus discrete button push incoming call or received data .

Provided herein are design aspects for the PASS ECU . An exemplary PASS ECU is shown in the assembled state in . The PASS ECU can comprise one or more circuit board assemblies contained in a die cast aluminum housing. The aluminum housing acts as both a shelter to the electronics and a thermal heatsink to dissipate chip level heat during operation out to ambient air.

The PASS ECU can use thread forming screws for internal board to housing connections and housing to housing connections.

PASS ECU connectors can be color coded and keyed for retention of connecting cable harnesses. All PASS ECU connectors exit on the same length side of the PASS ECU using right angle PCB connections. The I O connectors pass through the bottom surface gravity down surface of the PASS ECU .

The PASS ECU can comprise an RF board . The RF board can provide one or more of the following functions wireless communications transceiver cellular PCS WiFi satellite and the like GPS chipset and receiver backup antenna selector circuit and the like. The RF connectors can be for example standard Radial 50 ohm FAKRA compliant a single port and dual port right angle connectors. For example the single port can be colored violet code D and the dual port can be colored black code A . The single port can provide a connection to a back up cellular antenna. The dual port can provide connection to a primary cellular and GPS antenna.

The PASS ECU can comprise a digital board . The digital board can provide one or more of the following functions vehicle bus interface CPU and memory user interface power circuitry RF board Interface and the like. By way of example a digital connector can be a sealed or unsealed Sumitomo 40 pin 3 cavity right angle header with cable harness connections as known in the art. Connections can include but are not limited to vehicle busses CAN D CAN B. LIN vehicle power and ground user interface microphone speaker push buttons with associated illumination back up battery BUB and the like.

Indentions on one or more sides of the PASS ECU housing can allow it to snap in place to a mounting bracket adequate to provide spring force retention. BSR damping elements can be included on the mounting bracket to isolate the PASS ECU and provide retention force. Thus the PASS ECU can assemble to a vehicle platform in a fastener less method. Alternatively clearance holes can be provided for a fastener mounting assembly.

In one aspect the PASS ECU can be attached to a mounting bracket using snap in spring tabs into the left and right of the PASS ECU housing shown in . The bracket geometry can vary based on vehicle platform constraints. The PASS ECU can be oriented with the I O connectors facing downward to prevent dust debris intrusion. Additionally Angular Rate Sensor ARS equipped units can be oriented within 3 degrees of gravity vertical for proper Angular Rate Sensor ARS functioning. shows an exemplary orientation. An alternative method of mounting using fasteners can be accomplished from the sides of the PASS ECU by placing mounting clearance hole tabs on the Housing Bottom. The PASS ECU can be located in the vehicle interior.

Provided is a PASS ECU software platform. In one aspect software can execute on one or more of the Applications Processor Subsystem APS the Cellular Network Controller the GPS Controller and the Vehicle Interface Controller .

In one aspect the APS can comprise the majority of the software and functionality for the PASS ECU . For example the APS software platform can utilize a Linux Real Time Operating System RTOS that provides bootstrapping operating system services for task management interrupt handing and service routine dispatching file system management for disk like storage devices and peripheral device management. On top of that platform PASS application software can be implemented which has primary control over one or more PASS services that are provided.

The Linux RTOS kernel can supply services to manage software units including but not limited to scheduling synchronization messaging memory management interrupt handling and the like. In one aspect the PASS ECU applications can be implemented as a set of kernel processes and user threads running under Linux. Each of the application units running under the Linux environment can be independent of other units. Clean application interfaces and messaging schemes for each unit allow the units to interact and safely execute with each other.

Linux can also provide memory management to further protect the application units from each other. If one application unit tries to access the memory or code space of another the operating system can prohibit it and the offending thread can be stopped. PASS application units can comprise multiple threads in one or more process like thread groups. In the case of Linux a thread is actually implemented as a special type of process which shares it resources with other threads so explicit processes with a set of threads is not present in Linux. In Linux the terms task and thread are used interchangeably. The structure of an exemplary software unit is illustrated in . The units can use Inter Process Communication IPC techniques to share information between thread groups within the same unit or across units. Exemplary IPC resources provided by Linux include First In First Out FIFO Queues Shared Memory Message Queues and Pipes.

The RTOS can provide a flexible platform for PASS applications and can provide a simple method where future features and applications can easily be added. With the multiprocess and multithread nature of Linux new features and applications can be developed and added to the PASS system with minimal modification or disruption to existing code. With the system and applications designed in a modular nature with a clearly defined interface to each unit dependencies can be minimized. This makes the system more flexible and more easily upgraded in the future.

At power on the PASS ECU processor can boot the Linux kernel and start system tasks. In one aspect in order to make this process as quick as possible the boot process can be broken into three parts comprising 

By way of example to begin the process a boot loader located at a processor reset vector in Flash memory can execute. The boot loader at this location can perform a very basic set of tasks due to the limited access speed of the Flash interface. Exemplary basic functions the bootloader can perform can comprise 

Following the completion of the Flash based boot loader a small RAM resident loader can take over. This loader can have the ability to load the Linux kernel from a file that resides on part of the Flash device. The loader can verify the kernel using a checksum or similar method. In the case where the kernel cannot be verified a backup kernel can be loaded and used. The kernel image is an executable binary image that can be directly loaded and executed from RAM. In addition to loading the kernel the RAM loader can be designed to handle certain events interrupts in order to provide a quick response time when necessary for certain PASS related services. Since the kernel and applications will not yet be operational only a simple set of responses may be available. The basic functions the RAM loader can perform can comprise 

Once the Linux kernel has been loaded the root file system in flash can be mounted and the application units loaded and started. The Linux kernel can also load device drivers for the various peripheral devices that can provide threads and processes access to the device resources.

The PASS ECU can have multiple sources of interrupt. These include for example the GSM GPRS GPS VIC serial interfaces timers other on chip devices and the like. All interrupts in the systems can be serviced by interrupt service routines that have been registered with the real time Linux kernel. Certain interrupts that require a quick response at boot time can also have a service routine that is built as part of the boot sequence software executed before the kernel is loaded.

The RTOS can provide file system support for the PASS ECU . File system storage can be utilized by the software applications for file data both in transient and persistent file storage devices. For example the PASS ECU can utilize RAM for nonpermanent file storage and Flash for permanent file storage.

The PASS ECU can use Flash memory for nonvolatile storage that is required for the PASS ECU . Usage of the Flash device can be divided into two partitions the primary partition of the Flash memory can be formatted with a file system and the other portion of the Flash can be used as raw data storage. The portion of the Flash that is formatted with a file system can allow the access to files using basic file operations. Files on the disk can be opened closed deleted and searched. The location of the data on the flash can be managed by the RTOS and file system. The raw portion of the Flash can store data without any file abstraction layer. The boot code can be directly stored on the Flash in a raw format executable by accessing memory locations mapped directly to the Flash device.

In one aspect the file system on the Flash device can store all persistent files that are required by the PASS. The file system can be mounted each time that the PASS ECU host processor is booted and the kernel and application units can be loaded from the file system. In addition to PASS software the persistent Flash file system can store logs configuration data and Flash firmware images for other PASS ECU devices.

The content that will be in the raw portion of the Flash can comprise the ROM and RAM executable boot code. When the processor boots the reset vector of the PPC can start code execution directly from the Flash device. Execution from Flash can be kept to a minimum due to the slow speed of this interface at boot time.

In one aspect the PASS system can be implemented on top of the Linux platform as a group of kernel processes and user level threads. One or more of the areas of functionality of the PASS system can comprise a software application unit. Each unit can have a clearly defined set of functions and can provide an external API or messaging interface as appropriate to other units in the system. Various Linux methods for Inter Process Communication IPC can be used as appropriate based on unit design. A diagram of exemplary PASS functional units is shown in .

In one aspect a Service Management Unit SMU of the PASS ECU can provide a major portion of the functionality of the PASS system. The SMU can be responsible for receiving service request messages from the VIC and CNC and appropriately dispatching service tasks based on services priorities. Additionally the SMU can be responsible validating that the service requested is authorized configured in PASS. A Service Management Dispatcher SMD of the SMU can receive parse dispatch and monitor service requests. The SMD can also be responsible for verifying that a given service is authorized and configured prior to dispatching the service task. Once the service configuration has been verified it can be dispatched to the appropriate service task. If a service request made to the SMD is for a service not configured or authorized the request can be terminated.

One or more PASS services can have a defined priority level and the SMU can enforce these priorities. Exemplary service priorities are shown in Table 3. When a PASS service is active and a higher priority service request is received by the dispatcher a notification can be sent to any service tasks active that must be suspended or terminated to allow the higher priority service to be started. If a PASS service is requested and a higher priority service is already active the lower priority service can be delayed or terminated by the dispatcher.

One or more of the PASS services can have a service task to execute the functionality of the service. The SMU can provide a set of common functionalities to one or more service tasks that can be used across services for functions such as call and dialing methods blackbox logging TOC messaging and the like.

In an aspect an Emergency Call Service Task can be responsible for providing and managing the Emergency call services in the PASS ECU . It can manage both Automatic Crash Notification ACN and Emergency Assistance service requests referred to as Automatic and Manual Emergency Calls respectively AEC MEC . Much of the calling and messaging notification process for both types of emergency calls are the same. The task can also allow additional automatic emergency call requests to be made when either an automatic or manual emergency call is in progress. When a call is in progress an established voice connection will not be affected but a new data message with the new crash information can be sent to the TOC . For example once the task receives a service request for an emergency call the following flow can be executed 

The service can have a called failed state if all redial attempts have failed. This state can display a call service failure message on the HU and remain in the state for a configured amount of time before returning to idle mode and clearing the display message.

The above process for Emergency calls can apply when the PASS system is operating in Normal power mode. In the case when the unit it operating in other power modes PASS can allow the establishment of a MEC. In order to facilitate this the CNC can utilize an application to assist with quick call placement and data messaging. When the PASS ECU boots the SMD can query the CNC to determine if a call is currently active. If it is an emergency call the Emergency Call Service Task can determine the state of the call and take over the management of the call. When a call is assumed by the Emergency Call task processing that could not take place from the CNC can be completed such as black box entries for the service.

In another aspect a Roadside Assistance Call RAC Task can manage the roadside assistance call services of PASS. The service is requested by the user pressing the R Call button in the vehicle. The RAC Task can monitor for activation of higher priority services and relinquish resources if other services become active that require a resource that is in use by the RAC Task . If the Roadside Assistance service is not authorized the service request can be terminated.

The service can have a call failed state if all redial attempts have failed. This state can display a call service failure message and remain in the state for a configured amount of time before returning to idle mode and clearing the display message.

The above process for Roadside Assistance calls can apply when the PASS system is operating in Normal power mode. In the case when the unit it operating in other power modes PASS can allow the establishment of a Roadside Assistance call. In order to facilitate this the CNC can utilize an application to assist with quick call placement and data messaging. When the PASS ECU boots the SMD can query the CNC to determine if a call is currently active. If it is a roadside assistance call the RAC Task can determine the state of the call and take over the management of the call. When the call is assumed by the RAC Task processing that could not take place from the CNC can be completed such as black box entries for the service.

In one aspect an Information Call Service ICS Task can manage the Information Call services of PASS. The service can be requested by the user pressing the I Call button in the vehicle. The ICS Task can monitor for activation of higher priority services and relinquish any resources necessary for the higher priority service to become active. If the I Call service is not authorized the service request can be terminated.

The service can have a call failed state if all redial attempts have failed. This state can display a call service failure message and remain in the state for a configured amount of time before returning to idle mode and clearing the display message.

The above process for I Calls can apply when the PASS system is operating in Normal power mode. In the case when the unit it operating in other power modes PASS can allow the establishment of an I Call. In order to facilitate this the CNC can utilize an application to assist with quick call placement and data messaging. When the PASS ECU boots the service dispatcher can query the CNC to determine if a call is currently active. If it is the appropriate service task can determine the state of the call and take over the management of the call. When the call is handed off from the CNC back to the Information Call Task processing that could not take place form the CNC can be completed including a black box entry.

In an aspect a Remote Door Task can handle the Remote Unlocking Verified Remote Unlocking and Remote Locking service for PASS. All door services can require that the customer contact the TOC via outside means such as a landline or cellular telephone to arrange for the services.

In one aspect the TOC can send a service request to the vehicle that indicates a time to unlock the doors. The service request time can be compared to current time and if it matches or is within a predetermined time threshold such as the past 15 minutes the doors can be unlocked. If the PASS ECU is in Normal mode the Remote Door task can set a timer to provide indication when the service should be performed. If the PASS ECU had been in or transitions to low power or sleep mode the Remote Door task can program the VIC to reawaken the processor at the appropriate time to service the request. The PASS ECU can then be allowed to go into low power mode. Each subsequent time that the processor is awakened the Remote Door task can check to see if the service time has occurred and if so unlock otherwise confirm the wakeup request made to the VIC or set a task timer. In all cases when the unlock action is complete the vehicle directional signals can flash and or a message can be displayed on the Instrument Cluster confirming the operation.

In another aspect the TOC can send a request to the vehicle with a timed window to allow for verified vehicle unlocking. This message can be received validated and the Remote Door task can keep a record of the service request and time window. The Remote Door task can then be waiting for the confirmation of the trunk button signal. When the signal is detected for a predetermined threshold such as 15 seconds and the current time is within the timed window the PASS system can unlock the doors trunk and or tank cap. If the PASS ECU transitions to low power mode the trunk button press can reawaken the processor and the Remote Door task can perform verification of the time window when awoken and unlock the doors trunk and or tank cap if successful.

Also provided is a method for remote vehicle lock. This service can lock the doors of the vehicle when received. The Remote Door task can receive the service message from the TOC and can immediately lock the vehicle doors. A message confirming service completion may be sent to the TOC for verification that the door lock request was successful.

In another aspect a Tracking task can support geographical tracking of a PASS equipped vehicle. In one aspect the Tracking task can manage two variations on the tracking service Stolen Vehicle Tracking and Antitheft Tracking. The underlying service can be the same with the method of activation varying.

Stolen Vehicle Tracking can be initiated by a call from the customer to the TOC requesting that the service be enabled to track a stolen car. The TOC can then send a tracking service request to the vehicle.

To initiate Antitheft Tracking the vehicle s built in Theft Alarm system can send a message to the PASS ECU via the VIC CAN interface which can be sent to the Tracking task . The Tracking task can send a data message to the TOC with information regarding the theft alarm if it is not canceled within a configured time. The TOC can then verify the vehicle s state with the customer. Once verified that the car is stolen the TOC can send a tracking request back to the vehicle.

Once one of the above methods of requesting activating the tracking service has occurred the Tracking task can begins the following exemplary functional flow 

Tracking task can be preempted by either an AEC or MEC. In the case of an AEC the tracking service can be cancelled completely if a MEC established tracking services can resume at the end of the call.

In one aspect an Automatic Maintenance Status AMS Reporting task can be responsible for providing the Maintenance Status Report Service. The AMS Reporting task can periodically access in vehicle remote diagnostics functions to read for example the vehicle s maintenance computer function and odometer reading. Using this information and configured mileage thresholds the AMS Reporting task can determine if a vehicle maintenance service is due. If a service is due a data message can be sent to the TOC containing Vehicle Identification Number VIN current mileage remaining miles and estimated days until the next service is due. The AMS Reporting task can support updates to the configuration by means of a locally connected diagnostic tool or over the air by means of a PASS configuration command.

In an aspect a Remote Diagnostic task can be responsible for managing a service request and making the required queries and commands on the Diagnostic CAN and relaying information via data messages to the TOC . The Remote Diagnostic task can support one or more diagnostic functions. For example Scan All Modules Test Diagnostic Trouble Codes Deleting Quality Data Reporting and the like.

The Remote Diagnostic task can be responsible for running a series of diagnostic requests to various devices on the CAN network in a vehicle. The stimulus for running the test diagnostics can be for example a Roadside Assistance button press a remote service request message or when the PASS ECU receives a diagnostic message from the diagnostic bus. The data that is collected when the diagnostic tests are run can be stored in the PASS ECU as well as transmitted to the TOC . If a data connection is not available at the time of the test it can be queued and sent when connectivity is restored.

The data collected by the Remote Diagnostic task can be used to support one or more diagnostic functions. Test data can be stored in the flash file system that is provided on the PASS ECU and can be updated and managed by the Remote Diagnostic task to allow for a history of at least five data sets. When five sets have been stored the oldest will be replaced at the time when the next data set is written.

The Remote Diagnostic task can support configuration through a Configuration and Provisioning Unit . Configuration information for remote diagnostics can be updated via a wireless communication network as well as a locally connected engineering tool.

In one aspect the PASS ECU can support multiple power management and operational modes in order to conserve power while still allowing for quick wakeup and response to events and other inputs. Exemplary modes supported by the PASS ECU can comprise 

In one aspect from an AP software perspective when the PASS ECU is operating in Normal or Back Up Battery mode the AP can be powered and provide active software execution. When in Normal mode a power management software unit can be responsible for monitoring changes in the vehicle status that can require the PASS ECU to shutdown and transition the PASS ECU to a different power mode. In one aspect a primary condition that must exist to leave normal mode is for the vehicle ignition to be turned off. Once this occurs the power management unit can monitor one or more of the following service status CAN bus activity CNC registration CNC configuration Phone input line and the like. When in normal mode at least two mode transitions are possible Sleep and or Low Power.

When the ignition is turned off the power management unit can initiate a shutdown of the software and transition to the power mode corresponding to the conditions present.

When the power management unit has detected that it is appropriate to transition the PASS ECU to either Sleep or Low Power mode it can send messages to one or more of the software units to initiate a graceful shut down of the system. When each unit has completed the shutdown process a message can be sent back to the power management unit indicating that shutdown is complete. When all units have reported back that shutdown is complete the power management unit can be responsible for final PASS ECU shutdown. The final system shutdown can include preparing service messages for call service and forwarding them to the CNC memory to facilitate a quick call feature. Once all shutdown tasks are complete the AP can command the VIC to put the PASS ECU into sleep mode or low power mode as appropriate.

If during shutdown processing the PASS ECU receives a signal that a service request CAN activity or CNC message has been received the units can restart and return the PASS ECU to normal mode without having to reboot the Linux kernel.

In one aspect in the PASS ECU the majority of vehicle generated information can be received via the VIC . The VIC can provide a connection to the CAN B crash sensor interface PASS ECU buttons and LEDs. For example the VIC can be connected to the AP via a SPI bus and can have an AP host driver to manage the message protocol between the VIC and the AP . The VIC can manage the wake up of the AP .

The CAN D can utilize a built in CAN cell in the Applications Processor and can have Vector CAN drivers and a stack running on the host processor. This interface can be utilized for diagnostic purposes and can be operational while in normal mode.

The VIC can have flash based code storage from which the device will boot and execute form when powered up. A Vehicle Interface Management Unit can provide a flash update interface to the VIC used when a binary image is received by a flash management unit to update the software.

In one aspect a CNC Management Unit can be responsible for all communication and configuration of the GSM GPRS Controller. By way of example the CNC can be connected to the Applications Processor via a UART interface.

The CNC Management Unit can be responsible for managing data messaging and voice call requests that are made by one or more units of the PASS system. The CNC management unit can provide a messaging interface for units to make data or voice call requests. Outside units can pass message content and recipients to the CNC management unit and it can format and send the appropriate set of commands and data to the GSM GPRS Controller to establish the voice call or data transfer.

The CNC Management Unit can provide a messaging interface to the GSM GPRS Controller that allows the controller to manage the multiple data flows with the GSM GPRS Controller. The GSM GPRS Controller can be used for both data services and voice services. For example the GSM GPRS Controller can support the use of GSM 07.10 communication multiplexing stack. This stack can provide the interface to the GSM GPRS Controller to allow for multiple services to be used simultaneously.

When the CNC causes a processor wake up to occur it can be the responsibility of the CNC Management unit to receive the message from the CNC and forward it to the responsible unit for processing. The possibilities include messages such as a service request message that can be forwarded to the Service Management Unit software download data that can be passed to the flashing management unit or a configuration data message that can be passed to the configuration management unit .

The CNC Management Unit can also be responsible for interfacing to a GSM application that can handle a Quick call feature when the unit is in Low power or Sleep Mode. In one of these modes the GSM can be signaled by the VIC to establish a call. During PASS ECU shutdown from Normal mode the GSM GPRS Controller can be loaded with preformed messages and numbers for each of the call services. When a service button is pressed the GSM GPRS Controller can immediately begin to establish the call and send the data message. The CNC Management Unit can assist in passing off control of the voice and data connections for such calls to the appropriate service task.

In another aspect a SIM device can be a replaceable or non replaceable SMT device in the PASS ECU . It can be connected to the AP via the GSM GPRS Controller. A SIM Management Unit can be responsible for managing configuration and data in a SIM device. The SIM Management Unit can implement a messaging protocol that can use utilize the CNC interface to the GSM GPRS Controller to communicate with the SIM device. This SIM Management Unit can also be responsible for managing the PIN and PIN1 of the SIM device. At boot the SIM Management Unit can enter the PIN for the SIM device to allow it to register on the network.

In one aspect a Position Management Unit can be responsible for maintaining an accurate and current position of the vehicle at all times. All services and other software units that require position data can request such from the Position Management Unit . In addition to current position the Position Management Unit can also maintain a set of past location points for a configured number of points. Position points can be stored based on an algorithm taking into account changes in location or heading. Each time a position is determined it can be compared to the last position in the history. If the location has changed by more than the configured number of meters or the heading has changed by more than the configured number of degrees an entry can be made in the position log. The log can implement a FIFO storage method.

The Position Management Unit can implement a messaging protocol with the GPS Controller over the serial peripheral interface. This protocol can allow for receiving position information and the sending of vehicle movement metrics to implement dead reckoning. The Position Management Unit can also allow the PASS AP to configure and flash the GPS Controller.

To improve accuracy of the position points that are received from the GPS satellite the GPS Controller can augment them with an implementation of dead reckoning using the vehicle metrics that are received from the VIC CAN interface. The vehicle metrics can comprise one or more of differential wheel speed the reverse indicator and the like. These metrics can be sent to the GPS Controller from the Position Management Unit . If the PASS ECU is interfaced to the optional Angular Rate Sensor ARS this information can be passed to the GPS Controller with the other vehicle metrics used for dead reckoning.

In an aspect a LED HU Management Unit can be responsible for aggregating and managing LED and Heads Up display messages for the PASS ECU . The LED HU Management Unit can implement a periodic timing system that can allow for the LED outputs to be controlled with flashing periods and duty cycles that can indicate the service or PASS ECU state on the LEDs. The LED and Management Unit can display the proper message and LED status based on the priority of each service that has made a visual display request.

The Configuration and Provisioning Management Unit can maintain and distribute configuration information for one or more functional units and services of the PASS ECU . The Configuration and Provisioning Management Unit can support provisioning either automatically or manually of the PASS ECU .

When a vehicle is manufactured and reaches the End of Line or after the PASS ECU is otherwise installed in a vehicle the PASS ECU can initiate an automatic provisioning session when power is applied and the first valid position is acquired from the GPS. This session can allow the PASS ECU to be paired with the vehicle that it has been installed in and verify service configuration parameters with the TOC . To initiate the session the Configuration and Provisioning Management Unit can determine that the PASS ECU requires provisioning and can send a status message to the TOC .

Manual provisioning can be initiated when the PASS ECU is not currently provisioned and is being reactivated by a customer. The PASS customer can contact the TOC and arrange for activation of PASS services. Once the customer has arranged for service a unique procedure to reawaken the PASS ECU can be performed. This can indicate to the PASS ECU to initiate a provisioning session. If the PASS ECU is able to register with the wireless data service then a status data message can be sent to the TOC to attempt service provisioning.

The TOC can initiate a provisioning session at any time with the unit to allow the configuration to be updated. This can be used for updates to configuration data such as service status enabling disabling of features configured telephone numbers and other service parameters.

When the PASS ECU receives a provisioning service request initiated by one of the previous methods the following exemplary flow can be used 

The Configuration and Provisioning Management Unit can also provide a unit interface and notification method for other PASS software units to obtain configuration data. This allows for a common method and single location of storage for the PASS system configuration. Data can be stored in nonvolatile memory.

In an aspect a Blackbox Unit can be responsible for managing entries into the PASS ECU blackbox logs. The Blackbox Unit can maintain one or more sets of blackbox records. For example one use for Emergency call requests and one set for all other service requests. For example the Blackbox Unit can utilize a circular list of entries that will provide for twenty entries. Once the log is full the oldest entry can be replaced with the newest entry in a first in first out fashion. The black box logs can be stored in a file and can be downloaded via an engineering or diagnostic tool connected to the vehicle or wirelessly over a network. When requested the log files can be sent over the VIC CAN interface to the connected tool.

In another aspect software flashing of the various components of the PASS ECU can be managed by the Flashing Management Unit . The Flashing Management Unit can maintain the status of software firmware that is running on one or more of the PASS ECU devices. By way of example the flashable devices in the PASS ECU can comprise one or more of the Applications Processor VIC CNC and the GPS subsystem . Software firmware flash images can be received from the CNC or via a locally connected engineering tool over the CAN VIC interface.

When the VIC management unit or CNC management unit identifies incoming data as software firmware update data it can forward the data to the Flashing Management Unit for reassembly and verification prior to being loaded to the appropriate device. If the flash image does not pass verification methods such as checksum or signature the image can be discarded. If the image passes verification then it can be prepared for transfer to the indicated device. When a complete flash image is downloaded to the AP status can be returned to the provider either the TOC or a confirmation to the local engineering tool.

In the cases of the VIC CNC or GPS subsystem the image can be loaded to the device over the device s processor interface. For the GPS subsystem and VIC this can be a SPI bus for the CNC a UART interface can be used. Each of these devices can have a software unit that handles management of the device including the methods for transferring the new software firmware image into the proper flash memory for the device.

New software flash images can be loaded into the PASS ECU with a defined activation method. The Flashing Management Unit can allow for images to be loaded and activated immediately at a specific time or on demand. If a flash image is to be activated immediately once it has been verified it can be loaded and executed. If a timed activation is requested the flash image can be held in non volatile storage until the time requested. In the case of the on demand method is selected once the flash image is received by the PASS ECU it can be stored in non volatile memory until a command is received from the TOC to activate it.

When flash images are updated a copy of the existing software firmware that is executing can be maintained in case a failure occurs and the device must be reloaded with the original software firmware. The Flashing Management Unit can query the device that had been updated to verify that the new image is operational if it is not the device can be reloaded with its original software firmware.

In one aspect the VIC can be an 8 bit microcontroller which is the PASS ECU s connection to the vehicle Body CAN network crash sensor and PASS input buttons. The Diagnostic CAN can be connected directly to an AP CAN interface and is not connected through the VIC .

An approved Vector CAN protocol communications driver can be part of the application program which runs on the VIC microcontroller. This protocol stack and microcontroller combination can provide an interface to the vehicle bus and remove the complexities of the CAN aggressive response requirements from the AP software. The isolation of the VIC also provides the advantage that any CAN related changes VMM changes can be addressed locally with a software change on the VIC only rather than the entire PASS module.

For example the VIC can be interfaced to the AP through an SPI connection. The VIC can be interfaced to the vehicle CAN bus at 83.3 K baud CAN B or 125 K baud CAN I HS speeds. Additionally the VIC can handle miscellaneous PASS ECU I O such as button inputs and wake up LEDs and illumination CAN wake up crash Sensor input discrete wire or LIN Real Time Clock wake up and various analog measurements and sensors such as BUB enable BUB load test Angular Rate Sensor ARS Vbat inputs and the like.

The VIC algorithms can decide when to enable the BUB and vice versa. The VIC software an also perform hardware diagnostics on such parts as the LEDs buttons illumination and power supplies. Shorts or opens can then be stored and communicated at the appropriate time via DTCs over CAN.

The VIC can determine what configuration is required for the PASS ECU based on the type of vehicle in which it is installed. This function can be performed via the CAN interface of the VIC . The VIC can also control the engineering tool interface for the PASS ECU . For example through one of the UART channels on the VIC .

VIC can comprise software units with functions such as Vector CAN protocol drivers CAN DbKom Transport Protocol Diagnostic Network Management for CAN related functions network loss of communication Diagnostic Trouble Code DTC monitoring Wake up Sleep monitoring VIC HOST SPI protocol driver crash sensor serial protocol driver UART LIN analog channels input function button input main battery back up battery etc. button illumination PWM output driver engineering Interface UART channel driver RTC wake up function low power sleep discrete outputs enabling various PASS power supplies for Applications Processor GSM GPRS Controller GPS Controller and Audio functions and the like.

In one aspect VIC program memory can be flash based therefore it can start executing application programs immediately upon exiting from power on reset. For VIC application program updating a protected bootloader allows the main memory to be flashed through the AP SPI interface. The bootloader can ensure a valid application exists and prevent an invalid application code from running.

In another aspect the GSM GPRS Controller can comprise a built in microprocessor that allows PASS specific applications to be executed in the GSM GPRS Controller. The GSM GPRS Controller can initiate calls and messaging to the TOC without the AP active to provide expeditious services when the PASS ECU is in low power or sleep mode. This application is referred to as Quick call software. As the AP enters Low Power or Sleep mode it can load the GSM GPRS Controller memory with messages and phone numbers to support Emergency Calls Roadside Assistances and Information Calls. When the VIC detects that a service button in the car has been pressed it can send a signal to the GSM GPRS Controller. That can cause the GSM GPRS Controller to execute the Quick call software application which can send the preloaded message and call the stored TOC number for the service requested. Once the AP has booted it can determine the state of the service request call and take over the management of the service.

In one aspect the GPS Controller can comprise a built in microprocessor that will allow PASS specific applications to be executed on the GPS Controller. In order to provide more accurate position points the GPS Controller can utilize Dead Reckoning DR Software. The DR can augment the GPS data that is received by taking for example differential wheel speed and reverse indicator information that can be fed to it by the AP . The AP can provide updated information to the GPS Controller.

Provided herein are various aspects of exemplary operation of the PASS ECU and TOC to provide PASS services making use of the communication services described previously. The following PASS services are described herein Automatic Emergency Call Manual Emergency Call Roadside Assistance Manual and Automatic Information Call including Point of Interest download Remote Door Unlock Immediate and Verified Remote Door Lock Stolen Vehicle Tracking Anti Theft Tracking Maintenance Status Reporting and Remote Diagnostics.

The Automatic Emergency Call AEC service can provide for emergency assistance from the PSAP via an automatically initiated call. When a crash occurs the PASS ECU can detect the event via either CAN messages or discrete I O from the crash sensor unit. Since the crash sensor unit is not active while the ignition is off this service can be applicable while the ignition is on. This service is also known as Automatic Crash Notification ACN .

In one aspect the PASS ECU can use two types of calls to provide emergency assistance indirectly via the Service Center and or directly to the local PSAP by dialing 911 or 112.

For example the direct call to the PSAP can be used in one or more of the following conditions the PASS ECU is configured to use a direct call for the AEC service and or no roaming service is available that is the PASS ECU is unable to register to the visited network . In all other cases the PASS ECU can dial the Service Center to obtain emergency assistance.

Provided in one aspect are methods for indirect AEC via a Service Center . illustrates an exemplary method for indirect AEC via the Service Center comprising 

If the PASS ECU detects a crash while engaged in another service it can preempt that other service in order to perform the AEC. Preempted services are not restarted. If a manual emergency call is in progress when a crash is detected the PASS ECU can maintain the call in progress but forward an AEC message to the TOC with the crash details and upgrade the ongoing service to AEC.

If the PASS ECU needs to resend the AEC message after receiving crash information of a different type or with higher severity then the PASS ECU can send the higher severity crash information in the AEC message.

If the PASS ECU is currently on a network which does not have a roaming agreement with the PASS network the MSISDN assignment is not possible. In this case the PASS ECU s permanently assigned IMSI number can be displayed on the emergency operator s console.

The Manual Emergency Call MEC service is similar to the Automatic Emergency Call AEC service except that it is initiated manually and it can be initiated in either ignition on or off states. In one aspect the PASS ECU can use two types of voice calls indirectly via the Service Center or directly to the local PSAP by dialing 911 or 112.

The direct call to the PSAP can be used in one or more of the following conditions the PASS ECU is configured to use a direct call for the MEC service and or no roaming service is available that is the PASS ECU is unable to register to the visited network .

In one aspect provided are methods for indirect MEC via Service Center . The method provided for the Manual Emergency Call via the Service Center is identical to the indirect AEC via the Service Center shown in with the following exceptions 

In another aspect provided are methods for direct MEC to PSAP . The method for the MEC service direct to the PSAP is identical to the AEC service directly to the PSAP shown in with the following exceptions 

Provided are two exemplary types of Roadside Assistance. Manual Roadside Assistance MRA which provides for non emergency assistance from the Service Center via a MO voice call initiated when the vehicle operator presses the Roadside Assistance button. Automatic Roadside Assistance ARA which provides a reminder for routine maintenance from the Service Center via a MO voice call triggered automatically after a specified elapsed time or distance traveled.

In both cases the MO calls go to the Service Center so no temporary MSISDN assignment is required and the standard MO voice call procedure can be used.

In one aspect provided are methods for Manual Roadside Assistance MRA . illustrates an exemplary method for a Manual Roadside Assistance MRA service initiated by a vehicle operator comprising 

The PASS ECU can ignore the Roadside Assistance button press if the MRA service is not authorized and configured. The PASS ECU can ignore the lower priority Information button while engaged in the MRA service. If the voice call to the Service Center fails the PASS ECU can automatically retry the call. The call failed dialing and redial timers can be configured independently from the timers configured for emergency calls.

The Roadside Assistance service can be preempted by a higher priority service such as AEC or MEC. The vehicle operator can use the voice call Hang Up button to terminate the service at any time without waiting for the RA Terminate message from the Application Server .

In another aspect provided are methods for Automatic Roadside Assistance ARA . The Automatic Roadside Assistance ARA methods can be identical to the manually initiated RA service shown in with the following exceptions 

The Information Call IC service provides for general information and customer assistance from the Service Center via a voice call initiated when the vehicle operator presses the Information button. Information calls can go to the Service Center so no temporary MSISDN assignment is required and a MO voice call procedure can be used.

An exemplary method for an Information Call service can be identical to the Manual Roadside Assistance service shown in with the following exceptions 

The Remote Door Unlock RDU service can be used to unlock the vehicle from the TOC for example if the subscriber has locked his keys in the vehicle. Provided are two types of RDU services Immediate Remote Door Unlock IRDU and Verified Remote Door Unlock VRDU . For IRDU the Application Server can unlock the vehicle immediately. For VRDU the vehicle operator can press the trunk button for a pre configured number of seconds at an agreed time before the doors will be unlocked.

In one aspect provided are methods for Immediate Remote Door Unlock IRDU . The Immediate Remote Door Unlock IRDU service can be initiated via either a phone call to the TOC or Internet access to the TOC . illustrates an exemplary method for an IRDU initiated by a phone call to the TOC comprising 

If the subscriber uses the Internet to initiate the IRDU service the TOC can automatically verify the subscriber s identity and authorize the service at the time specified by the subscriber . After that the sequence of events matches . The RDU service can be initiated in either the ignition on or off condition.

If the agreed time has already passed the PASS ECU can unlock the vehicle doors trunk and tank cap immediately. The PASS ECU can ignore the IRDU Request message if it is received while the PASS ECU is engaged in a higher priority service or a prior request for RDU. The PASS ECU can ignore the IRDU Request message if the IRDU service is not configured.

If the Application Server does not receive the RDU Acknowledgement within a configurable time after sending the request it can notify the Service Operator and update the Subscriber Database . The Service Operator can initiate another IRDU Request at this point.

In one aspect provided are methods for Verified Remote Door Unlock VRDU . The Verified Remote Door Unlock VRDU service can be initiated via either a phone call to the TOC or Internet access to the TOC .

If the subscriber uses the Internet to initiate the VRDU service the TOC can automatically verify the subscriber s identity and authorize the service at the time specified by the subscriber . After that the sequence of events can be as in . The PASS ECU can ignore the trunk button if it is engaged in a higher priority service or a prior request for RDU.

If the PASS ECU can determine that the VRDU service has not been authorized when the trunk button is pressed it can send a Call Failed message to the Head Unit and Instrument Cluster for display. The PASS ECU can clear the message after a configurable delay for example 10 seconds .

The Remote Door Lock RDL service can be used to lock the vehicle from the TOC for example if the subscriber realizes that he neglected to lock the vehicle and cannot get to it himself. The RDL service can be initiated via either a phone call to the TOC or Internet access to the TOC .

In one aspect provided are methods for Remote Door Lock RDL . illustrates an exemplary method for an RDL initiated by a phone call to the TOC comprising 

If the subscriber uses the Internet to initiate the RDL service the TOC can automatically verify the subscriber s identity and authorize the service that is no Service Operator will be involved . The PASS ECU can ignore the RDL Request message if it is received while the PASS ECU is engaged in a higher priority service or a prior request for RDL.

If the TOC receives an RDL Reject message from the PASS ECU or if it does not receive the RDL Acknowledgement within a configurable time after sending the request it can notify a Service Operator and update the Subscriber Database . The Service Operator can initiate another RDL Request at this point. The RDL service can be provided within a fixed period of 30 days of switching the ignition off. After that time the service cannot be performed.

In one aspect provided are methods for Stolen Vehicle Tracking SVT . illustrates exemplary method for an SVT service comprising 

The SVT service can be initiated while the vehicle is in either the ignition on or ignition off state.

If the PASS ECU loses power while engaged in the SVT service it can restart the service by resending the SVT Response message to the TOC when power is restored. This can be accomplished by storing the service state in the flash memory.

The PASS ECU can ignore the SVT Request message if it is already engaged with a higher priority service including AEC or MEC or a prior request for the SVT service. If an AEC is initiated by the crash sensor while the PASS ECU is engaged in the SVT service the SVT service can be terminated immediately in order to service the AEC.

If the Emergency Call button is pressed while the PASS ECU is engaged in the SVT service the SVT service can be suspended in order to provide the MEC service. Upon completion of the MEC service the PASS ECU can resume tracking.

The PASS ECU can ignore the Roadside Assistance and Information buttons while engaged in the SVT service. The PASS ECU can ignore messages for RDU RDL and configuration of the PASS ECU while engaged in the SVT service.

If the PASS ECU is unable to send a Tracking Position Update message to the TOC for example because no roaming service or wireless signal available the PASS ECU can discard the message and wait for the next update.

The Anti Theft Tracking ATT service is very similar to the Stolen Vehicle Tracking SVT service except that it can be automatically initiated by the PASS ECU .

In one aspect provided are methods for Anti Theft Tracking ATT . illustrates an exemplary method for an ATT service comprising 

The ATT service may only be initiated while the vehicle is in the ignition off state. If the PASS ECU loses power while engaged in the ATT service it can restart the service by resending the ATT Request message to the TOC when power is restored.

The PASS ECU can ignore the vehicle security alarm if it is already engaged with a higher priority service including AEC or MEA or if it is already engaged with an SVT or ATT service.

If the PASS ECU is unable to send the ATT Request message to the TOC for example because no roaming service or wireless signal available or it does not receive a response from the TOC after a configurable interval it can set a timer to periodically resend the message.

If an AEC is initiated by the crash sensor while the PASS ECU is engaged in the ATT service the ATT service can be terminated immediately in order to service the AEC.

If the Emergency Call button is pressed while the PASS ECU is engaged in the ATT service the PASS ECU can suspend the ATT service in order to provide the MEC service. Upon completion of the MEC service the PASS ECU can resume tracking.

The PASS ECU can ignore the Roadside Assistance and Information buttons while engaged in the ATT service. The PASS ECU can ignore messages for RDU RDL and configuration of the PASS ECU while engaged in the ATT service.

If the PASS ECU is unable to send a Tracking Position Update message to the TOC for example because no roaming service or wireless signal available the PASS ECU can discard the message and wait for the next update.

The automatic Maintenance Status Reporting MSR service can be used to provide maintenance status information to a manufacturer or other interested party.

In one aspect provided are methods for Maintenance Status Reporting MSR . illustrates an exemplary method for MSR comprising 

The PASS ECU will only initiate the MSR service while the ignition is on. The PASS ECU can ignore the periodic MSR timer while it is engaged in a higher priority service.

The Remote Diagnostics RD services can collect vehicle maintenance status diagnostics and performance data from individual vehicles for use by roadside assistance providers dealerships manufacturers and other interested parties.

In one aspect provided are methods for performing a Scan All Modules SAM Test Report. The Scan All Modules SAM Test Report service can use the vehicle s diagnostics bus to collect Diagnostic Trouble Codes DTCs as well as relevant hardware and software configuration and environment data for all electronic control units in the vehicle. The PASS ECU can initiate a SAM test at a configurable interval after ignition on of the vehicle and periodically thereafter as long as the ignition is on. The PASS ECU can record and send the results of the SAM test based on configurable rules for example if a new DTC is detected. A SAM test can also be initiated by the vehicle manufacturer dealer or a roadside assistance provider via the TOC via either a Service Operator or via Internet access . In this case the results can be sent to the TOC which can forward them to the requester.

The PASS ECU can ignore the SAM Request if the SAM service is not authorized and configured. The PASS ECU can ignore the SAM Request if it is already engaged with a higher priority service including AEC MEC Tracking RA or IC or if it is already engaged in a SAM test.

The PASS ECU will not perform a periodic SAM test while it is engaged with a higher priority service including AEC MEC Tracking RA or IC or if it is already engaged in a SAM test as a result of a request from the TOC .

The PASS ECU can ignore the SAM Request if an external diagnostics tester is present on the bus. The PASS ECU can immediately terminate a SAM test in progress if it detects an external diagnostics tester on the bus. The PASS ECU can gracefully terminate a SAM test in progress if it detects ignition off.

If the PASS ECU is unable to send the results of a SAM test for example network connectivity is not available at the time it can automatically try to send the buffered data at a later time.

The Quality Data Reporting QDR service can provide diagnostics status and environment and usage data to the vehicle manufacturer or other interested party. The PASS ECU can periodically query electronic control units in the vehicle at a defined frequency using diagnostics requests to collect sensor and status readings and diagnostics status information and forward the collected information to the vehicle manufacturer based on configurable rules for example once a week or whenever a DTC is detected.

In one aspect provided are methods for Quality Data Reporting QDR . illustrates an exemplary method for Quality Data Reporting starting with ignition on comprising 

The PASS ECU can immediately terminate quality data reporting if it detects an external diagnostics tester on the bus. The PASS ECU can gracefully terminate quality data reporting if it detects ignition off. If the PASS ECU is unable to send a quality data report for example network connectivity is not available at the time it can automatically try to send the buffered data at a later time.

In another aspect provided are methods for performing a Delete Diagnostic Trouble Codes DDTC service. The Delete Diagnostic Trouble Codes DDTC service can allow a dealer roadside assistance provider or other interested party to clear the error memories of the electronic control units in the vehicle to facilitate trouble shooting. The DDTC service can be initiated via Internet access to the TOC . illustrates exemplary method for a DDTC service comprising 

The PASS ECU can ignore the DDTC Request if the service is not authorized and configured. The PASS ECU can ignore the DDTC Request if it is already engaged with a higher priority service including AEC MEC Tracking RA or IC or if it is already processing a prior DDTC request.

The PASS ECU can ignore the DDTC Request if an external diagnostics tester is present on the bus. The PASS ECU can immediately terminate a DDTC service in progress if it detects an external diagnostics tester on the bus.

In another aspect provided are methods for Remote Diagnostics Configuration RDC . The Remote Diagnostics Configuration RDC service can allow a vehicle manufacturer or other interested party to configure the remote diagnostic functions of the PASS ECU . The manufacturer can request re configuration of one or more vehicles where the vehicles to be reconfigured can be identified for example by specific VINs a VIN range or by model line and model year. The TOC can ensure that each identified PASS ECU is updated.

The PASS ECU can ignore the RDC Request if it is already engaged with a higher priority service including AEC MEC Tracking RA or IC. In this case the TOC can retry the request.

If the manufacturer identifies multiple vehicles for reconfiguration the TOC can wait until it gets responses from all of the vehicles before passing the results of the re configuration to the manufacturer.

While the methods and systems have been described in connection with preferred embodiments and specific examples it is not intended that the scope of the methods and systems be limited to the particular embodiments set forth as the embodiments herein are intended in all respects to be illustrative rather than restrictive.

Unless otherwise expressly stated it is in no way intended that any method set forth herein be construed as requiring that its steps be performed in a specific order. Accordingly where a method claim does not actually recite an order to be followed by its steps or it is not otherwise specifically stated in the claims or descriptions that the steps are to be limited to a specific order it is no way intended that an order be inferred in any respect. This holds for any possible non express basis for interpretation including matters of logic with respect to arrangement of steps or operational flow plain meaning derived from grammatical organization or punctuation the number or type of embodiments described in the specification.

It will be apparent to those skilled in the art that various modifications and variations can be made in the methods and systems without departing from the scope or spirit of the methods and systems. Other embodiments of the methods and systems will be apparent to those skilled in the art from consideration of the specification and practice of the methods and systems disclosed herein. It is intended that the specification and examples be considered as exemplary only with a true scope and spirit of the methods and systems being indicated by the following claims.

