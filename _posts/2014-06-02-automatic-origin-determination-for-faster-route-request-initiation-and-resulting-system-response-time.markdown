---

title: Automatic origin determination for faster route request initiation and resulting system response time
abstract: When a user enters, initializes, or otherwise starts using a navigation function, such as a navigation function on a mobile phone or a stand-alone device, a current location is automatically estimated, prior to or in the absence of a GPS fix, for use as an origin in route determination. The estimation of current location is performed using a database of GPS fixes that are mapped to cell tower identifiers. For example, the database can include one or more fixes associated with each cell tower that the mobile device has used. Thus, when navigation on the device is begun, one or more cell towers to which the device can communicate are identified. If any has a GPS fix in the database, then a location derived from such GPS fix(es) can be used as an origin for navigation functions. Such navigation functions can include estimating a time of arrival at a destination, producing a route to the destination, and checking for traffic updates.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09261366&OS=09261366&RS=09261366
owner: BlackBerry Limited
number: 09261366
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20140602
---
This application is a continuation of U.S. patent application Ser. No. 13 962 772 filed Aug. 8 2013 which is a continuation of U.S. patent application Ser. No. 12 962 874 filed Dec. 8 2010 now U.S. Pat. No. 8 532 920 and claims the benefit of and priority to U.S. Provisional Patent Application No. 61 297 435 filed Jan. 22 2010 the contents of each of the above patent applications are hereby expressly incorporated by reference in their entirety for all purposes herein.

The following relates generally to location based services LBS for mobile devices and in particular to systems and methods for providing navigation information such as routes ETA information search functionality and other related functionality on mobile devices.

Rush hour traffic volume road construction vehicular collisions and roadside emergencies are just a few examples of the various events and circumstances that can cause traffic congestion. Due to the nature of such events traffic congestion can be difficult to predict. Although radio television and online news sources can provide traffic information gathered using various techniques such as highway cameras phone in traffic tips satellite imagery and road sensors this information is stale and or inaccurate.

Old or inaccurate traffic information can be troublesome for various reasons. For example an alternate traffic route which may be less convenient is chosen due to a traffic report indicating that a traffic problem exists which problem has since been alleviated. This can cause a commuter to take a less optimal route which can waste fuel cause them to be late and cause congestion on side roads. Conversely a traffic report may indicate that the commuter s route is clear when in fact an event has in the meantime created a traffic jam since the traffic report is based on information that is not current.

Navigation systems typically rely on using Geographic Positioning System GPS fixes in order to determine a present location from which information such a route to a destination can be provided. However determining a position based on received GPS signals takes time and such time often depends on how many GPS satellite signals can be received and the quality of such reception. Other approaches have included attempting to use triangulation based on reception of multiple cell tower identifiers and signal strength information for such cell towers. Although such approaches can produce an estimated position of the mobile device they can be inaccurate in that signal strength measurements can vary widely based on current topological and environmental conditions. Also it may be more difficult in practice to obtain a number of identifiers for cell towers in order to perform a triangulation. Using a single cell tower identifier may fail to provide sufficient accuracy because a cell tower can serve a wide area in some cases such that simply connecting to that cell tower would be insufficiently precise for navigation purposes.

Therefore advances in location determination and responsive of such location determination remain desirable even though GPS location determination is used for the most part.

It will be appreciated that for simplicity and clarity of illustration where considered appropriate reference numerals may be repeated among the figures to indicate corresponding or analogous elements. In addition numerous specific details are set forth in order to provide a thorough understanding of the embodiments described herein. However it will be understood by those of ordinary skill in the art that the embodiments described herein may be practiced without these specific details. In other instances well known methods procedures and components have not been described in detail so as not to obscure the embodiments described herein. Also the description is not to be considered as limiting the scope of the embodiments described herein.

Mobile devices often have GPS receivers or more generically a satellite positioning system signal receiver such as GPS GloNASS etc. for determining a current location of a device which can be used in a variety of ways and applications such as for navigation GPS will be used generically for all such satellite navigation systems for simplicity . Obtaining a GPS takes time and sometimes a GPS fix is not available. For example a person leaving work may leave a cubicle and walk some distance before being exposed to strong enough signals from enough satellites to obtain a GPS fix. It is recognized herein however that a number of useful outputs relating to navigation can be provided in the absence of a precise GPS fix. In one example if a user of a navigation application is leaving work the user does not necessarily need precise information about how to navigate from an office location to a nearby freeway since the user typically would be familiar with the vicinity. However the user would be concerned with a larger context such as how long a drive time may be required to get home and whether any abnormal traffic conditions indicate that a detour or an alternate route should be taken. Such information can be often provided without a current GPS fix if a general location is known. One approach to providing a general location is to determine identifying information for a cell phone tower that the mobile device current can communicate with. A correlation is maintained between such identifying information and prior GPS fixes for the mobile device. Such correlation can be maintained in a background process for example as a user simply uses the mobile device and or the navigation application. The identifying information current obtained is used to determine whether a GPS fix is correlated with that cell phone tower. If so then the prior GPS fix is used as an estimate of a current location of the mobile device until a current fix is available.

By particular example when a user first begins using a navigation application e.g. selects the application to begin execution through an interface on the mobile device the identifying information for the cell phone tower would be available before the GPS fix even assuming that a GPS fix can be obtained and a GPS fix identified as associated with the cell phone tower can be used as a current position estimate. The current position estimate can in turn be used as an origin to a destination. Other information such as traffic congestion information can be requested sooner as well. Navigation outputs such as an estimated time of arrival and a recommended route can be provided based on the current position estimate. For normal user behaviour the availability of such information is expected to be immediately useful in order for a user to determine what to do and where to go comparatively more so than information such as turn by turn directions.

I. Route Representation Technology for Representation of Routes can be Used in Navigation Supports Navigation Applications and Other Applications.

An object for vehicle navigation is providing a route from an origin to a destination. The route can be roughly defined to include an ordered sequence of roadways that may be traveled to move from the origin to the destination. In general there will be many perhaps millions of possible sequences that may be used to travel between any given origin destination pair. In practice there are a relatively small number that are good as defined by some measure or measures such as shortest fastest and more subjective measures such as simplest least stress most scenic and so on . Given a set of conditions there often can be determined an optimal best route to fit a given measure or measures.

For computer assisted vehicle navigation a route can be defined relative to a map database. A map database generally comprises an object based encoding of the geometry connectivity and descriptive attributes of a collection of roadways and is usually based on a topological model such as a 1D directed graph inscribed within a 2D surface sheet. The individual objects in a model of this type include edges that mostly represent roads such as the centerlines of roads and nodes that represent locations where roads intersect and cul de sacs terminate. A road or roadway used interchangeably here in a map database can be defined in terms of a connected chain of edges that share a common name. Most roadways consist of a single connected chain. Some roads are more complicated for instance a road may be split in two by another geographic feature such as a river.

Certain non road features can also be represented by edges including railroads streams and rivers and the boundaries of area objects faces such as parks water bodies and military bases as well as boundaries of towns cities counties and similar divisions of governmental hierarchy.

The geometry of the database can be represented by coordinate locations x y or longitude latitude points associated with nodes and shape often point sequences associated with edges. The raw connectivity of the roadways is represented by the edge node connectivity that is provided by the directed graph representation each edge has a specific from and to node each node has a list of edges that have the node at either the from or to end.

Actual road connectivity may be limited by descriptive attributes such as turn prohibitions and travel mode restrictions. Other descriptive attributes can include the road name legal travel speed and direction bi directional or one way number of lanes and similar.

Map databases can carry different levels of detail. A fully detailed or large scale map database will include everything from the most important long distance highways to minor back alleys and un paved country lanes. A sparsely detailed or small scale map database can have only the most important highways and connections that allow long distance travel.

Map databases also include varying geographical extents of coverage. Some map databases may cover only a small area. Others may cover entire continents. Often there is an inverse correlation between scale and coverage extent in that large scale maps tend to have limited geographic coverage while continental extent maps may have limited detail. Such a circumstance was particularly true for paper maps city map vs. road atlas and is still true in paper equivalent computer map renderings. A familiar example is the internet based mapping service when zooming in on a given displayed map area more detail and less extent are displayed and when zooming out less detail and more extent are displayed.

In fully detailed databases wide roads and roads with wide medians may also be split lengthwise into two separate one way chains representing the two independent directions of travel. Many roads are short consisting of only a single edge. Some roads are very long spanning from ocean to ocean across a continent and consisting of thousands of individual edges within a full detailed representation. Most roads are somewhere between these two extremes.

A route as originally described may therefore be represented as a specific sequence of connected edges within a map database. Given a route with this representation a variety of properties about the overall route can be determined by inspecting the individual edges. For instance to determine the length of the route one can sum the lengths of the individual edges. Similarly to estimate travel time of a route one can determine the travel time for each edge length divided by speed and accumulate the sum over the whole set. Such a travel time is termed static in that it would be based on a fixed representation of speed.

More elaborate results may be determined by examining a route s edge sequence within the context of the containing database. For instance the list of turn by turn instructions that are required to follow a route may be inferred by examining how the route traverses each node relative to the other edges that occur at the corresponding intersection. Some intersection traversals are more important than others and may warrant explicit identification in a route representation. Other intersections are more trivial for example those in which no turn is made. Such intersections may not be explicitly identified in some representations.

II. Traffic and Congestion Technology can be Used for Modeling of Traffic Patterns and Congestion and can Build on Technology for Route Representation and Support Various Applications Such Those Described Herein.

Turning now to an example zone of traffic is shown which comprises a traffic problem hereinafter named a congested zone . The congested zone comprises a left bound lane of traffic i.e. with respect to the page and a right bound lane of traffic . It can be seen that the congested zone represents a common zone of traffic congestion caused by any one or more traffic events. Another zone of traffic is also shown in and in this example represents an upstream zone which refers to any roadway that is approaching expected to connect lead into or is simply an upstream portion of a same roadway that includes the congested zone . In this example the upstream zone thus feeds traffic into the congested zone such that at least one mobile device approaching the congested zone can be determined.

In the example shown in the congested zone at a particular point in time comprises three vehicles travelling left bound namely vehicles B C and D and comprises a single vehicle E travelling right bound . For the present discussion the congestion occurs in the left bound lane only whereas vehicle E is moving at a normal rate of speed in the right bound lane. The upstream zone at the same point in time comprises a single vehicle A travelling left bound towards the congested zone . Each vehicle A E comprises a respective data communications device hereinafter referred to as a mobile device A E which travels with the corresponding vehicle A E in which it currently resides. As will be explained below the mobile device can be any suitable device capable of communicating via a wireless network . The mobile devices utilize such capability to provide device data to a dynamic traffic notification sub system via the wireless network . The device data comprises information related to the location and speed of the vehicle as measured by or obtained by or from another source the mobile device located and travelling within the vehicle . For example mobile device B in vehicle B may utilize a GPS function to measure the speed of the vehicle B and the current location prepare device data and send the device data to the dynamic traffic notification sub system hereinafter referred to as the notification sub system for brevity.

As will also be explained below the notification sub system uses device data from a plurality of mobile devices to dynamically determine traffic conditions such as the development of the congested zone in order to prepare a notification that can be sent to a mobile device that is expected to be headed towards the congested zone .

Commute traffic congestion tends to follow very reliable patterns. For example a given stretch of heavily used freeway at 7 30 AM every weekday morning would be expected to have traffic moving much slower than during normal free flow conditions. Within that basic model more refined patterns can be found. For example it can be found that traffic may be heaviest on Monday 33 mph average a little lighter Tuesday Thursday 37 mph and perhaps lighter still on Friday 45 mph . However the same stretch of freeway may be free flowing e.g. 65 mph at noon flowing well during the evening commute e.g. 60 mph and racing along at 75 mph overnight and on the weekend.

Further observations for a single person traveling at the roughly the same time over the same route for five days a week 50 weeks a year can be accumulated to develop a robust model of the traffic congestion that this person faces each day including its consistency its day of the week and season of the year variability and perhaps most importantly the congestion s effect on the travel time that the person experiences daily.

Furthermore these observations can yield information about how the congestion tends to affect certain portions of the route. For example a portion of a route following Hwy 1 tends to flow at 39 mph and the portion that follows Hwy 2 tends to flow at 51 mph. In turn the portion of Hwy 1 between 7and 10streets can be observed to average 34 mph at around 7 44 AM and the portion between 10and 14streets observed to average 41 mph at 7 51 AM and so on.

This description of a single person s experience can be generalized into the system concept of collecting traffic data using traffic probe and using that data for traffic modeling. By collecting observations or data for a large enough number of vehicles drivers by for example using wireless devices with GPS then those observations and that data can be aggregated and collectively analyzed to develop an overall model of traffic congestion. In such a system each device e.g. owned by a driver of a vehicle serves as a probe sensing the traffic conditions at particular locations and times. The overall picture serves as the traffic model and is a byproduct of the system.

Previously it was disclosed that data collection for and observations about personal driving habits can be used to improve accuracy of the estimation of route travel time and correspondingly ETA determination and further that historical traffic models have the potential for even greater improvement and wider application.

However both of these methods rely on the stability of previously observed driving patterns and some times actual traffic congestion due to accidents bad weather sporting events and similar or just wide variability is much worse and occasionally much better than expected.

If the departure time for a trip is immediate it typically is preferable to know what the live real time traffic conditions are now rather than relying solely on the historical model at least for the first portion of the route. Such an approach should yield more accurate travel time and ETA and can serve as a trigger to alert the driver that today s experience will be worse you re going to be late or better you have ten extra minutes than usual.

With a network of probes which can be used to produce the historical traffic model described previously it is possible to monitor the current activity of all probes in real time to produce a current picture of traffic congestion as will be addressed further below. For example for all traffic segments a list of recent probe samples for each segment can be tracked and used to compute a live expected speed for the segment.

An approach to using these live speeds to compute travel time can be similar to the use of speeds from the historical model and can include stepping through the route s edges in sequence computing travel times for each edge. If the edge corresponds to a traffic segment for which there is a current live speed then that speed can be used. If this is no live speed then the historical model value from the appropriate time slot can be used. If there is no traffic segment then a static speed can be used.

In practice a robust implementation is more complicated than this conceptual description. One reason is that live traffic has a limited shelf life . In other words after some amount of time e.g. 30 minutes it is likely that the current live speed will be invalid and that the historical pattern speed may be more accurate.

A preferred speed determination function includes a continuous function of live and historical values. A simplified description of one such function can be for a set time along the route 

Because conditions will change the ETA calculation preferably is continuously updated as the route is consumed traveled during driving. Such preference is based on at least three reasons. First actual traffic congestion will continue to evolve and probes driving somewhere up ahead may detect different and new conditions thus evolving the live model. Second because part of the route has been consumed by driving the location framework for live traffic has shifted so that live information is needed for roads that are further along the route than originally needed. Third because actual travel progress may vary greatly from the original estimate particularly on long routes the time framework of the historical model may also change resulting in a dramatic increase or decrease of likely traffic speeds far ahead.

Live traffic and congestion data such as that obtained from in vehicle probes can be used for modelling traffic and congestion and can supplement a historical model. A mixture of live data and historical data can be used.

In addition to giving ETA estimates understanding travel times a second application that relates to ETA. This application can be phrased as What is my Required Time of Departure a.k.a ETD In other words if I know that I need to get somewhere at time T when do I need to leave in order to be confident that I will make it An example method to determine includes perform a static travel time summation tt assume the departure time is T ttand calculate the ETA if ETA T then back up the departure time by the difference ETA T and try again. Repeat until ETA

To aid the reader in understanding at least one environment in which the notification sub system and the above described applications may be implemented an example system comprising the wireless network and other components that may be used to effect communications between mobile devices and the notification sub system will now be described.

As noted above data communication devices will be commonly referred to as mobile devices. Examples of applicable mobile devices include pagers cellular phones cellular smart phones portable gaming and entertainment devices wireless organizers personal digital assistants computers laptops handheld wireless communication devices wirelessly enabled notebook computers and the like.

One exemplary mobile device is a two way communication device with advanced data communication capabilities including the capability to communicate with other mobile devices or computer systems through a network of transceiver stations. The mobile device may also have the capability to allow voice communication. Depending on the functionality provided by the mobile device it may be referred to as a smartphone a data messaging device a two way pager a cellular telephone with data messaging capabilities a wireless Internet appliance or a data communication device with or without telephony capabilities .

The mobile device may be one that is used in a system that is configured for continuously routing content such as pushed content from a host system to the mobile device. An example architecture of such a system will now be described.

Referring now to an example system diagram showing the redirection of user data items such as message A or C from a corporate enterprise computer system host system to the user s mobile device via a wireless router is provided. The wireless router provides the wireless connectivity functionality as it acts to both abstract most of the wireless network s complexities and it also implements features necessary to support pushing data to the mobile device . Although not shown a plurality of mobile devices may access data from the host system . In this example message A in represents an internal message sent from e.g. a desktop computer within the host system to any number of server computers in the corporate network e.g. LAN which may in general include a database server a calendar server an E mail server or a voice mail server.

Message C in represents an external message from a sender that is not directly connected to the host system such as the user s mobile device some other user s mobile device not shown or any user connected to the public or private network e.g. the Internet . Message C could be e mail voice mail calendar information database updates web page updates or could even represent a command message from the user s mobile device to the host system . The host system may comprise along with the typical communication links hardware and software associated with a corporate enterprise computer network system one or more wireless mobility agents a TCP IP connection a collection of datastores for example a data store for e mail can be an off the shelf mail server program such as Microsoft Exchange Server or Lotus Notes Server which typically are behind a corporate firewall.

The mobile device may be adapted for communication within wireless network via wireless links as required by each wireless network being used. As an illustrative example of the operation for a wireless router shown in consider a data item A repackaged in outer envelope B the packaged data item A now referred to as data item A and sent to the mobile device from an Application Service Provider ASP in the host system . Within the ASP is a computer program similar to a wireless mobility agent running on any computer in the ASP s environment that is sending requested data items from a data store to a mobile device . The mobile destined data item A is routed through the network and through a firewall protecting the wireless router .

Although the above describes the host system as being used within a corporate enterprise network environment this is just one embodiment of one type of host service that offers push based messages for a handheld wireless device that is capable of notifying and preferably presenting the data to the user in real time at the mobile device when data arrives at the host system.

Provision of a wireless router sometimes referred to as a relay there are a number of advantages to both the host system and the wireless network . The host system in general runs a host service that is considered to be any computer program that is running on one or more computer systems. The host service is said to be running on a host system and one host system can support any number of host services. A host service may or may not be aware of the fact that information is being channelled to mobile devices . For example an e mail or message program see might be receiving and processing e mail while an associated program e.g. an e mail wireless mobility agent is also monitoring the mailbox for the user and forwarding or pushing the same e mail to a wireless device . A host service might also be modified to prepare and exchange information with mobile devices via the wireless router like customer relationship management software. In a third example there might be a common access to a range of host services. For example a mobility agent might offer a Wireless Access Protocol WAP connection to several databases.

As discussed above a mobile device may be a hand held two way wireless paging computer as exemplified in a wirelessly enabled palm top computer a mobile telephone with data messaging capabilities a PDA with mobile phone capabilities a wirelessly enabled laptop computer a vending machine with an associated OEM radio modem a wirelessly enabled heart monitoring system or alternatively it could be other types of mobile data communication devices capable of sending and receiving messages via a network connection e.g. a portable gaming device. Although the system is exemplified as operating in a two way communications mode certain aspects of the system could be used in a one and one half or acknowledgment paging environment or even with a one way paging system. In such limited data messaging environments the wireless router still could abstract the mobile device and wireless network offer push services to standard web based server systems and allow a host service in a host system to reach the mobile device in many countries.

The host system shown herein has many methods when establishing a communication link to the wireless router . For one skilled in the art of data communications the host system could use connection protocols like TCP IP X.25 Frame Relay ISDN ATM or many other protocols to establish a point to point connection. Over this connection there are several tunneling methods available to package and send the data some of these include HTTP HTML HTTP XML HTTP Proprietary FTP SMTP or some other proprietary data exchange protocol. The type of host systems that might employ the wireless router to perform push could include field service applications e mail services stock quote services banking services stock trading services field sales applications advertising messages and many others.

This wireless network abstraction can be accomplished by wireless router which can implement this routing and push functionality. The type of user selected data items being exchanged by the host could include E mail messages calendar events meeting notifications address entries journal entries personal alerts alarms warnings stock quotes news bulletins bank account transactions field service updates stock trades heart monitoring information vending machine stock levels meter reading data GPS data etc. but could alternatively include any other type of message that is transmitted to the host system or that the host system acquires through the use of intelligent agents such as data that is received after the host system initiates a search of a database or a website or a bulletin board.

The wireless router provides a range of services to make creating a push based host service possible. These networks may comprise 1 the Code Division Multiple Access CDMA network 2 the Groupe Special Mobile or the Global System for Mobile Communications GSM and the General Packet Radio Service GPRS and 3 the upcoming third generation 3G and fourth generation 4G networks like EDGE UMTS and HSDPA LTE Wi Max etc. Some older examples of data centric networks include but are not limited to 1 the Mobitex Radio Network Mobitex and 2 the DataTAC Radio Network DataTAC .

Providing push services for host systems can be bettered by the wireless router implementing a set of defined functions. The wireless router can be realized by many hardware configurations however features described likely would be present in these different realizations.

Referring to one example of a mobile device is shown in and another example of a mobile device is shown in . More generally the numeral 100 will hereinafter refer to any mobile device and by explanation and reference the examples and of . A similar numbering convention is used for some other general features common between such as a display a positioning device a cancel or escape button a camera button and a menu or option button .

The mobile device shown in comprises a display and the cursor or view positioning device shown in this embodiment is a trackball . Positioning device may serve as another input member and is both rotational to provide selection inputs to the main processor see and can also be pressed in a direction generally toward housing to provide another selection input to the processor . Trackball permits multi directional positioning of the selection cursor see such that the selection cursor can be moved in an upward direction in a downward direction and if desired and or permitted in any diagonal direction. The trackball is in this example situated on the front face of a housing for mobile device as shown in to enable a user to manoeuvre the trackball while holding the mobile device in one hand. The trackball may serve as another input member in addition to a directional or positioning member to provide selection inputs to the processor and can preferably be pressed in a direction towards the housing of the mobile device to provide such a selection input.

The display may include a selection cursor that depicts generally where the next input or selection will be received. The selection cursor may comprise a box alteration of an icon or any combination of features that enable the user to identify the currently chosen icon or item. The mobile device in also comprises a programmable convenience button to activate a selected application such as for example a calendar or calculator. Further mobile device includes an escape or cancel button a camera button a menu or option button and a keyboard . The camera button is able to activate photo capturing functions when pressed preferably in the direction towards the housing. The menu or option button loads a menu or list of options on display when pressed. In this example the escape or cancel button the menu option button and keyboard are disposed on the front face of the mobile device housing while the convenience button and camera button are disposed at the side of the housing. This button placement enables a user to operate these buttons while holding the mobile device in one hand. The keyboard is in this embodiment a standard QWERTY keyboard.

The mobile device shown in comprises a display and the positioning device in this embodiment is a trackball . The mobile device also comprises a menu or option button a cancel or escape button and a camera button . The mobile device as illustrated in comprises a reduced QWERTY keyboard . In this embodiment the keyboard positioning device escape button and menu button are disposed on a front face of a mobile device housing. The reduced QWERTY keyboard comprises a plurality of multi functional keys and corresponding indicia including keys associated with alphabetic characters corresponding to a QWERTY array of letters A to Z and an overlaid numeric phone key arrangement.

The mobile device may employ a wide range of one or more positioning or cursor view positioning mechanisms such as a touch pad a positioning wheel a joystick button a mouse a touchscreen a set of arrow keys a tablet an accelerometer for sensing orientation and or movements of the mobile device etc. or other input device whether presently known or unknown. Similarly any variation of keyboard may be used. It will also be appreciated that the mobile devices shown in are for illustrative purposes only and various other mobile devices are equally applicable to the following examples. For example other mobile devices may include the trackball escape button and menu or option button similar to that shown in only with a full or standard keyboard of any type. Other buttons may also be disposed on the mobile device housing such as color coded Answer and Ignore buttons to be used in telephonic communications. In another example the display may itself be touch sensitive thus itself providing an input mechanism in addition to display capabilities. Furthermore the housing for the mobile device should not be limited to the single piece configurations shown in other configurations such as clamshell or flip phone configurations are also applicable.

Now to aid the reader in understanding the structure of the mobile device and how it can communicate with the wireless network reference will now be made to .

Referring first to shown therein is a block diagram of an exemplary embodiment of a mobile device . The mobile device comprises a number of components such as a main processor that controls the overall operation of the mobile device . Communication functions including data and voice communications are performed through a communication subsystem . The communication subsystem receives messages from and sends messages to a wireless network . In this exemplary embodiment of the mobile device the communication subsystem is configured in accordance with the Global System for Mobile Communication GSM and General Packet Radio Services GPRS standards which is used worldwide. Other communication configurations that are equally applicable are the 3G and 4G networks such as EDGE UMTS and HSDPA LTE Wi Max etc. New standards are still being defined but it is believed that they will have similarities to the network behaviour described herein and it will also be understood by persons skilled in the art that the aspects disclosed herein can be used with and adapted for other suitable communication protocols and standards that may be developed in the future. The wireless link connecting the communication subsystem with the wireless network represents one or more different Radio Frequency RF channels operating according to defined protocols specified for GSM GPRS communications.

The main processor also interacts with additional subsystems such as a Random Access Memory RAM a flash memory a display an auxiliary input output I O subsystem a data port a keyboard a speaker a microphone a GPS receiver short range communications and other device subsystems .

Some of the subsystems of the mobile device perform communication related functions whereas other subsystems may provide resident or on device functions. By way of example the display and the keyboard may be used for both communication related functions such as entering a text message for transmission over the network and device resident functions such as a calculator or task list.

The mobile device can send and receive communication signals over the wireless network after required network registration or activation procedures have been completed. Network access is associated with a subscriber or user of the mobile device . To identify a subscriber the mobile device may use a subscriber module component or smart card such as a Subscriber Identity Module SIM a Removable User Identity Module RUIM and a Universal Subscriber Identity Module USIM . In the example shown a SIM RUIM USIM is to be inserted into a SIM RUIM USIM interface in order to communicate with a network. Without the component the mobile device is not fully operational for communication with the wireless network . Once the SIM RUIM USIM is inserted into the SIM RUIM USIM interface it is coupled to the main processor .

The mobile device is a battery powered device and includes a battery interface for receiving one or more rechargeable batteries . In at least some embodiments the battery can be a smart battery with an embedded microprocessor. The battery interface is coupled to a regulator not shown which assists the battery in providing power V to the mobile device . Although current technology makes use of a battery future technologies such as micro fuel cells may provide the power to the mobile device . In some embodiments a plurality of batteries such as a primary and a secondary battery may be provided.

The mobile device also includes an operating system and software components to which are described in more detail below. The operating system and the software components to that are executed by the main processor are typically stored in a persistent store such as the flash memory which may alternatively be a read only memory ROM or similar storage element not shown . Those skilled in the art will appreciate that portions of the operating system and the software components to such as specific device applications or parts thereof may be temporarily loaded into a volatile store such as the RAM . Other software components can also be included as is well known to those skilled in the art.

The subset of software applications that control basic device operations including data and voice communication applications may be installed on the mobile device during its manufacture. Software applications may include a message application a device state module a Personal Information Manager PIM a connect module and an IT policy module . A message application can be any suitable software program that allows a user of the mobile device to send and receive electronic messages wherein messages are typically stored in the flash memory of the mobile device . A device state module can provide persistence i.e. the device state module provides for availability and storage of potentially important device data. Device state module can be implemented using flash memory or other non volatile memory technologies so that the data is not lost when the mobile device is turned off or loses power. A PIM includes functionality for organizing and managing data items of interest to the user such as but not limited to e mail text messages instant messages contacts calendar events and voice mails and may interact with the wireless network . A connect module implements the communication protocols that are required for the mobile device to communicate with the wireless infrastructure and any host system such as an enterprise system that the mobile device is authorized to interface with. An IT policy module can receive IT policy data that encodes IT policies and may be responsible for organizing and securing rules such as a Set Maximum Password Attempts IT policy and password expiration policies.

Other types of software applications or components can also be installed on the mobile device . These software applications can be pre installed applications e.g. applications other than message application or third party applications which are added after the manufacture of the mobile device . Examples of third party applications include games calculators and utilities.

The additional applications can be loaded onto the mobile device through at least one of the wireless network the auxiliary I O subsystem the data port the short range communications subsystem or any other suitable device subsystem .

The data port can be any suitable port that enables data communication between the mobile device and another computing device. The data port can be a serial or a parallel port. In some instances the data port can be a USB port that includes data lines for data transfer and a supply line that can provide a charging current to charge the battery of the mobile device .

For voice communications received signals are output to the speaker and signals for transmission are generated by the microphone . Although voice or audio signal output is accomplished primarily through the speaker the display can also be used to provide additional information such as the identity of a calling party duration of a voice call or other voice call related information.

Referring now to an exemplary block diagram of the communication subsystem component is shown. The communication subsystem includes a receiver a transmitter and example associated components such as one or more embedded or internal antenna elements and Local Oscillators LOs and a processing module such as a Digital Signal Processor DSP . The particular design of the communication subsystem can be dependent on the communication network with which the mobile device is intended to operate. Thus it should be understood that the design illustrated in serves only as one example. Radios also can be implemented differently for example LOs can be avoided by avoiding intermediate frequencies such as by using direct digital sampling.

Signals received by the antenna through the wireless network are input to the receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection and analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission over the wireless network via the antenna . The DSP not only processes communication signals but also provides for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter may be adaptively controlled through automatic gain control algorithms implemented in the DSP .

The wireless link between the mobile device and the wireless network can contain one or more different channels typically different RF channels and associated protocols used between the mobile device and the wireless network . An RF channel is a limited resource that should be conserved based on concerns such as limits of overall bandwidth and limited battery power of the mobile device .

When the mobile device is fully operational the transmitter is typically keyed or turned on only when it is transmitting to the wireless network and is otherwise turned off to conserve resources. Similarly the receiver may be periodically turned off to conserve power until it is needed to receive signals or information if at all during designated time periods. The receiver also can be turned on to poll for data to be retrieved.

Some aspects of the description provided relate to a system architecture where information can be pushed to mobile devices. Such system architectures can operate to push information responsive to a request from a mobile. For example mobile device can request information periodically and the system can respond with any messages or notifications determined to be applicable to device .

Turning now to the mobile device may display a home screen which may be the active screen when the mobile device is powered up or may be accessible from other screens. The home screen generally comprises a status region and a theme background which provides a graphical background for the display . The theme background displays a series of icons in a predefined arrangement on a graphical background. In some themes the home screen may limit the number icons shown on the home screen so as to not detract from the theme background particularly where the background is chosen for aesthetic reasons. The theme background shown in provides a grid of icons. It will be appreciated that preferably several themes are available for the user to select and that any applicable arrangement may be used. One or more of the series of icons is typically a folder that itself is capable of organizing any number of applications therewithin.

The status region in this embodiment comprises a date time display . The theme background in addition to a graphical background and the series of icons also comprises a status bar . The status bar can provide information to the user based on the location of the selection cursor e.g. by displaying a name for the icon that is currently highlighted.

An application such as a maps program see also may be initiated opened or viewed from display by highlighting a corresponding icon using the positioning device and providing a suitable user input to the mobile device . For example maps program may be initiated by moving the positioning device such that the icon is highlighted by the selection box as shown in and providing a selection input e.g. by pressing the trackball

V. An Example Approach to User Interfaces for Sending Notifications of ETA Via Messaging Technologies

The above description is related to automatically predicting a destination for automatic provision of an ETA and related information. Such ETA can be shared according to the disclosure relating to the method of and at least one of the user interfaces depicted in and .

Turning first to its method is described below. A selection of destination and calculation and display of ETA can be conducted either by selection of places or by automatic selection as described above. An indication to share the ETA can be received . A determination of whether the destination is associated with an entry in a contact manager is made. If there is such an associated entry then contact information from that entry is obtained and if not then contact information can be requested through the user interface. An option to select additional contacts can be provided which can cause acceptance of additional contacts. Upon determining contact information to which the ETA should be sent messages can be sent directed to each contact informational element. For example a Short Message Service message can be generated to be sent to phone numbers associated with the contact entry and or phone numbers supplied by a user through the interface.

The user interface element of depicts an estimated time of arrival ETA the distance to travel and travel time left . The user interface element of depicts that a default operating procedure can be that an SMS message is sent to a phone number associated with the contact while a Pick button allows the option to select additional phone numbers. An excuse window can be provided which allows a reason to be included in the message as to why the ETA may be different from what was expected. A send button allows confirmation of the selections before the messages with the ETA information are sent.

Such aspects can include automatic production sending of supplemental periodic update notifications based on a variety of conditions or parameters including elapsed time proximity to POI departures from the route or re selections. For example updates can be made hourly or when passing a given point. The user interface can be modified or a user interface provided that provides user selectable options which can have defaults for such parameters and conditions.

VI. An Example Approach to User Interfaces and Techniques for Presenting Traffic and Route Information in a User Friendly Format.

As shown in routes which can comprise a number of interconnected road travel segments are depicted on user interface element as linear representations also can be called a spine or a trunk such as linear shape which in that it represents a route also can be termed a linear representation of such route . Such linear representation can be oriented along one axis of a 2 D display of the device such as along an axis that is parallel to a field of view of a user of the device and thus can vary if the device is turned on its side such that the route orientation can turn to maintain that orientation with respect to the viewpoint of the user . Preferably the linear representation takes up most of the available display width. Indicators of information such as roads to be taken along the route can be represented at angles along the linear representation e.g. indicators and . Indication of traffic congestion information can be represented by different cross hatching or colors within the area of the linear representation itself. The user interface element can also depict the miles traveled and the miles to be traveled .

To the extent that these indicators apply to one or more portions of the route as opposed to a point on the route these indicators also can be viewed as information segments. For example indication of traffic congestion can be termed an information segment for the portion of the route on which that congestion occurs and which is indicated by indication . As can be discerned an information indicator thus can be an indicator of a point along a route to which an informational item is relevant as well as a segment of a route along which such informational item is relevant. As will become apparent such informational indicators can be overlayed on the linear representation linear shape of the route as is above or below such linear representation.

In addition to the aspects disclosed above aspects herein include estimating or predicting an origin for use in generating a navigation output such as a recommended route.

In these aspects a given mobile device as disclosed in various examples above tracks which cellular towers it communicates with such as generally receiving identifiers for cell towers that are available in a given area or more specifically towers that are used for data and voice communication as the mobile device is used or simply carried about or otherwise transported such as in a car or on foot. Such tracking can include tracking identifiers of such cell towers. For each such distinct cell tower identifier a GPS fix of the mobile device when the mobile device is receiving the identifier for that cell tower or in some more specific examples using or otherwise resident on that cell tower is obtained and recorded in a database. In these aspects the GPS fix is not a location or attempted to be the location of the cell tower itself but a location of the device when the device uses that cell tower.

In some aspects the location recorded for each of the cell towers is selected based on knowledge of user device behaviour. For example if the mobile device is traveling a route to a destination and upon arriving at the destination the mobile device is using a given cell tower an identifier for that cell tower can be associated with a GPS fix obtained for the destination. In a more concrete example a mobile device can be used on a route between a user s home and a workplace. Upon arriving at the workplace a cell tower identifier can be obtained and a GPS fix of the workplace can also be obtained. Such an approach is in contrast with approaches that attempt to make contact with multiple cell towers and use signal strength indications from those cell towers in approximating a current location of the device.

By way of further explanation a plurality of mobile devices can be communicating with the same cell tower. However each can be located in a different physical location for which a respective GPS fix is obtained. Then each mobile device can use its respective GPS fix for that same cell tower when the mobile device is resident on it as an origin for navigation. Thus these aspects are not attempting to estimate locations of the cell towers themselves. Rather each mobile device independently determines which locations are important to that device for each cell tower and then can use those pre determined locations as likely origins when resident on each cell tower.

In other situations the only cell tower identifier that may be available to an application is an identifier for a cell tower which the device currently would use for communication whether or not the mobile device currently is communicating with that cell tower .

In any of the above examples the method can monitor whether a given cell tower identifier whether it is one or more than one identifier at any given time is new and perform the method aspects disclosed below for each such identifier.

If the cell tower identifier is new determination which in some cases can indicate that a change has been made since a last cell tower identifier was received such determination can be made based on whether the cell tower has an identifier already stored on the mobile device. If the identifier does not exist i.e. the device has not encountered this tower before or it has expired from a cache then the GPS fix obtained is stored with the identifier received.

If the identifier exists then the device can perform a variety of actions or no action. The depicted method represents that the GPS fix now being received can be added to a list of GPS fixes associated with the cell tower or used to replace one or more GPS fixes already associated with the cell tower . In either case a further GPS fix can be obtained in due course. If the identifier for the cell tower is unchanged then the GPS fix associated with the still current cell tower can be updated based on the obtained GPS fix in a case where multiple cell tower identifiers are currently available or visible then if desired a GPS fix for each such identifier can be updated . Thus the method depicted in generally provides for the last GPS fix while any given cell tower identifier is available is saved for that cell tower such that initially it can be assumed that the mobile device is proximate that last GPS fix before a real GPS fix has been obtained.

In other embodiments a weighted average of the GPS fixes can be maintained or a simple average or several fixes can be maintained for each identifier. For example in some embodiments multiple GPS fixes may be maintained to be associated with each cell tower identifier and in other embodiments a blended average of GPS fixes may be provided. For example a blended GPS fix may be produced for multiple cell towers when concurrently receiving identifiers for such multiple cell towers. By further example a time weighted average of locations identified while a given cell tower identifier is received can be provided. For example if the device stops moving for a period of time while communicating with a given cell tower identifier and then starts moving again the location where the device was stopped can be weighted more heavily in a location generic for a GPS fix in that the exact location or GPS fix that would be associated with the cell tower identifier in this scenario may never have been actually determined as a location of the device associated with that cell tower identifier. Further information about road and point of interest information can be used in determining a location associated with a given cell tower identifier. Still further pre defined places see e.g. and description relating thereto can be consulted to determine whether a GPS fix obtained while communicating with a given cell tower identifier is proximate any such pre defined place. If there is a pre defined place close to the current GPS fix then that pre defined place may be used as a current location of the mobile device when receiving that cell tower identifier.

In some embodiments a cell tower identifier may be made provided from an application programming interface to an application implementing these disclosed method aspects. Similarly a GPS fix may be made available through an application programming interface to a GPS function. As such the application can query each interface to obtain a current one or more cell tower identifiers currently being received and a current GPS. The application can schedule such queries such as on a regular interval. The GPS interface can be queried responsive to detecting a change in the cell tower identifier s being received.

A determination as to whether there is a current GPS fix can be made which can include that a GPS receiver can be turned on to begin a process of obtaining such a fix which would imply an absent of a GPS fix at that instant . If there is a current GPS fix then it can be used as an origin for producing a navigation output after entering activating the navigation function .

If there isn t then one or more cell tower identifiers currently available being received by the mobile device such as by virtue of being resident on that cell tower or simply being able to receive an identifier for it is obtained note that although this statement is phrased as a conditional the actual reception of such tower identifiers by the device as a whole can be a by product of using the wireless network and as such the reception of such identifiers isn t conditional on the absence of a GPS fix but rather the method makes use of the tower identifiers to access historical GPS fix information as described below when current GPS fix information is not available.

The identifier available is looked up in the data stored on the computer readable medium that associates such IDs with GPS fixes and if there is an association between that cell tower identifier and a GPS fix that associated GPS fix is used as an origin for producing or requesting a navigation output after entering or activating the navigation function. Such navigation outputs can include a route determination an estimated arrival time traffic congestion conditions and the like. If the tower ID is not found then the method can loop determine whether a current GPS fix is available .

In some exemplary embodiments the cellular tower IDs and their associated GPS fixes are stored in a computer readable medium on the mobile device such as in one or more of flash and RAM of example device in . In example embodiments a pre determined maximum number of cell tower identifier entries can be stored in the computer readable medium such as 1000 more than 1000 or less 1000 identifiers. As discussed above one or more GPS fixes are stored for each identifier or a location reflecting an average or a synthesis of multiple GPS fixes.

The various examples described above are provided by way of illustration only and should not be construed as limiting. The disclosures herein can be adapted and understood from that perspective. In addition separate boxes or illustrated separation of functional elements of illustrated systems implies no required physical separation of such functions as communications between such elements can occur by way of messaging function calls shared memory space and so on without any such physical separation. Disclosure of memories and other examples of computer readable medium provide for tangible computer readable media that store information as specified. Processors can be implemented in a variety of ways including processors that are fully programmable with software and combinations of fixed function and software programmable processing elements. Different implementations may call for a different mixture of processing elements and selection therefrom for a particular implementation can be performed by those of ordinary skill in the art.

Although the above has been described with reference to certain specific embodiments various modifications thereof will be apparent to those skilled in the art as outlined in the appended claims. Also disclosure of certain techniques or examples with respect to a subset of the disclosures or examples herein does not imply that such techniques or examples pertain only to those disclosures but rather such selective disclosures are made for the sake of clarity to avoid obscuring principal teachings of the disclosure.

