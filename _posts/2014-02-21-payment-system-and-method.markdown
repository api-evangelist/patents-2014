---

title: Payment system and method
abstract: In one embodiment, transferring payment between a first user and a second user of a communication system includes displaying a contact list in a user interface of a client executed at a user terminal of the first user, the contact list including the second user. The client retrieves and displays at least one page from a payment provider responsive to the first user selecting the second user from the contact list. The client transmits, to the payment provider, information related to the payment entered into the page by the first user, which causes the payment provider to transfer the payment from an account of the first user to an account of the second user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09058601&OS=09058601&RS=09058601
owner: Skype
number: 09058601
owner_city: Dublin
owner_country: IE
publication_date: 20140221
---
This application is a continuation of and claims priority to U.S. patent application Ser. No. 11 848 936 filed Aug. 31 2007 entitled Payment System and Method by Viidu et al. The entire teachings of the above application is incorporated herein by reference.

Voice over internet protocol VoIP communication systems allow the user of a device such as a personal computer to make calls across a computer network such as the Internet. These systems are beneficial to the user as they are often of significantly lower cost than fixed line or mobile networks. This may particularly be the case for long distance calls. To use VoIP the user must install and execute client software on their device. The client software provides the VoIP connections as well as other functions such as registration and authentication. In addition to voice communication the client may also provide video calling and instant messaging IM .

One type of VoIP communication system uses a peer to peer P2P topology built on proprietary protocols. To access the peer to peer system the user must execute P2P client software provided by a P2P software provider on their PC and register with the P2P system. When the user registers with the P2P system the client software is provided with a digital certificate from a server. Once the client software has been provided with the certificate communication can subsequently be set up and routed between users of the P2P system without the further use of a server. In particular the users can establish their own communication routes through the P2P system based on exchange of one or more digital certificates or user identity certificates UIC to acquire access to the P2P system. The exchange of the digital certificates between users provides proof of the user s identities and that they are suitably authorized and authenticated in the P2P system. Therefore the presentation of digital certificates provides trust in the identity of the user. It is therefore a characteristic of peer to peer communication that the communication is not routed using a server but directly from end user to end user. Further details on such a P2P system are disclosed in WO2005 009019.

VoIP communication systems therefore have a valuable resource in that each user has a contact list of other VoIP system users contacts . This provides a level of trust between the users. Currently however these contact lists are only used for initiating communication events between the user and contact or contacts e.g. VoIP calls IM chat video calls file transfers etc. 

According to various embodiments there is provided a method of transferring a payment between a first user of a communication system and a second user of the communication system comprising displaying a contact list in a user interface of a client executed at a user terminal of the first user said contact list comprising said second user said client retrieving and displaying at least one page from a payment provider responsive to said first user selecting the second user from the contact list and receiving information related to said payment entered into said at least one page by said first user and said client transmitting said information related to said payment to said payment provider to cause said payment provider to transmit a message to a user terminal of the second user over the communication system and transfer said payment from an account of the first user to an account of the second user.

In one embodiment the communication system is a voice over internet protocol communication system. In another embodiment the communication system is an instant messaging communication system.

The step of said first user selecting the second user may include detecting the activation by the first user of a displayed name of the second user displayed in the user interface of the client. The client may be implemented as a computer program downloaded and executed on the user terminal of the first user.

The step of retrieving said at least one page from the payment provider may include downloading said at least one page over the Internet. The downloading of said at least one page over the Internet may use a secure protocol.

The step of displaying said at least one page from the payment provider may include said client triggering the display of a pop up window wherein said at least one page is displayed in said pop up window.

The information related to said payment may be transmitted to said payment provider over the Internet. The information related to said payment may be transmitted over the Internet using a secure protocol. The information related to said payment may include payment provider authorization information for the first user. The payment provider authorization information for the first user may include a payment provider username and a payment provider password. The username may be an email address for the first user.

The information related to said payment may include an identity of the second user in the communication system. The identity of the second user in the communication system may include a communication system username of the second user. The information related to said may include comprises at least one of a payment amount a currency and a message.

In one embodiment said message transmitted by said payment provider is transmitted to a secure interface of a messaging system over the Internet and forwarded by said messaging system over said communication system to the user terminal of the second user. In another embodiment said message transmitted by said payment provider is an email message transmitted to an email address of the second user. In another embodiment said message transmitted by said payment provided is an SMS message transmitted to a telephone number of said second user.

The method may further comprise the step of said user terminal of the second user receiving said message in a client program executed at the user terminal of the second user. The method may further comprise the steps of authorizing said second user with the communication system authorizing said second user with the payment provider and transmitting an acceptance message from said user terminal of said second user to said payment provider to initiate the transfer of said payment.

The method may further comprise the step of linking authorization information of the second user in the communication system with authorization information of the second user in the payment provider such that for subsequent payments the steps of authorizing said second user with the communication system and authorizing said second user with the payment provider are not required and the step of transferring said payment is initiated without transmitting an acceptance message from the user terminal of the second user. The step of linking may include storing the authorization information of the second user in the communication system and the authorization information of the second user in the payment provider at a network node. The authorization information of the second user in the communication system may be a communication system username of the second user and the authorization information of the second user in the payment provider may be a payment provider username of the second user.

In one or more implementations there is provided a computer program product comprising program code means which when executed by a computer implement the steps according to the above defined method of transferring a payment.

In one or more implementations there is provided a system for transferring a payment between a first user or a communication system and a second user of the communication system comprising a user terminal of said first user arranged to execute a client and display a contact list in a user interface of said client said contact list comprising said second user and a payment provider wherein said client is configured to retrieve and display at least one page from the payment provider responsive to said first user selecting the second user from the contact list receive information related to said payment entered into said at least one page by said first user and transmit said information related to said payment to said payment provider and wherein the payment provider is arranged to transmit a message from said payment provider to a user terminal of the second user over the communication system responsive to receiving said information related to said payments and transfer said payment from an account of the first user to an account of the second user.

In one or more implementations there is provided a user terminal for transferring a payment between a first user of a communication system and a second user of the communication system comprising a processor arranged to execute a client and a display arranged to display a contact list to said first user in a user interface of said client said contact list comprising said second user wherein said client is configured to retrieve and display at least one page from a payment provider responsive to said first user selecting the second user from the contact list receive information related to said payment entered into said at least one page by said first user and transmit said information related to said payment to said payment provider to cause said payment provider to transmit a message to a user terminal of the second user over the communication system responsive to receiving said information related to said payments and transfer said payment from an account of the first user to an account of the second user.

One very common operation that is performed between acquaintances is the exchange of money. In particular this frequently happens between friends and family members. For example if two friends have been out for lunch and the one friend has paid for the meal then the other may want to reimburse the payer. Another common scenario is that one person buys a set of tickets e.g. cinema tickets which the other attendees to the ticketed event need to pay for. A further common scenario involves expatriates sending money back to their home country. Typically this might involve larger amounts of money than the other examples above. Many other such scenarios exist and are extremely common.

Currently these types of payments are typically made using cash checks or bank transfers. Cash payments are inconvenient if the parties do not meet regularly. Checks are inconvenient to the person receiving the check as they need to visit a bank to pay the check into their account. Bank transfers can be performed online but this has the disadvantage of needing to know the bank account details of the person who is being paid.

The same groups of people that exchange these quantities of money are also generally the same people that are stored in contact lists in the VoIP system. It is therefore advantageous to provide a system and method whereby money can be exchanged between the contacts in the VoIP system utilizing the pre existing authorization scheme present in the VoIP system thereby avoiding as much further authorization as possible and hence simplifying the procedure for the user whilst maintaining the security provided by a specialized payment provider. Note that the embodiment described below is described with reference to a VoIP communication system but it will be appreciated that other types of communication system can also be used such as instant messaging communication systems.

Reference is now made to which illustrates a system for enabling the transfer of money using a VoIP communication system. In the embodiment shown in a P2P communication system is illustrated although it will be understood that other forms of communication could also be used.

A first user of the VoIP communication system denoted User A operates a user terminal which is shown connected to a network such as the internet. The user terminal may be for example a personal computer PC personal digital assistant PDA a mobile phone a gaming device or other embedded device able to connect to the network . The user device has a user interface to receive information from and output information to a user of the device. In one or more embodiments the user interface of the user device comprises a display such as a screen and a keyboard and mouse. The user terminal is connected to the network via a network interface such as a modem and the connection between the user terminal and the network interface may be via a cable wired connection or a wireless connection.

The user terminal is running a client provided by the VoIP software provider. The client is a software program executed on a local processor in the user terminal . The user terminal is also connected to a handset which comprises a speaker and microphone to enable the user to listen and speak in a voice call. The microphone and speaker does not necessarily have to be in the form of a handset but can be in the form of a headphone or earphone with an integrated microphone or as a separated loudspeaker and microphone independently connected to the user terminal .

An example of a user interface of the client executed on the user terminal of User A is shown illustrated in . The client user interface displays the username of User A in the VoIP system and User A can set his own presence state that will be seen by other users using a drop down list by selecting icon .

The client user interface comprises a tab labelled contacts and when this tab is selected the contacts stored by the user in a contact list are displayed. In the example user interface in five contacts of other users of the VoIP system User B to F are shown listed in contact list . Each of these contacts have authorized the user of the client to view their contact details and online presence and mood message information. Each contact in the contact list has a presence status icon associated with it. For example the presence status icon for User B indicates that User B is online the presence icon for User C indicates that User C is not available the presence icon for User D indicates that User D s state is do not disturb the presence icon for User E indicates User E is away and the presence icon for User F indicates that User F is offline. Further presence indications can also be included. Next to the names of the contacts in pane are mood messages of the contacts.

Reference is now made to which illustrates the process for User A to authenticate with the VoIP system and initiate a call with another user called User B in the system illustrated in .

When User A first registers with the VoIP system the client is provided with a digital certificate from a VoIP authentication server as illustrated in step S. As mentioned once the client has been provided with the digital certificate communication can subsequently be set up and routed between users of the VoIP communication system without the further use of a server due to the P2P nature of this example system. Furthermore subsequent to the initial registration with the VoIP system. the user must also provide a username referred to hereinafter as a VoIP ID and password in order to log in to the VoIP system and view their contact list and make calls. This is performed by the user entering the username VoIP ID and password into the client and the username and password are then authenticated with the VoIP authentication server . Alternatively these authentication details may be stored by the client so that the user does not need to manually enter them every time the client is executed but the stored details are still passed to the VoIP authentication server to be authenticated.

The contact list for the users e.g. the contact list for User A is stored in a contact server shown in Figure L When the client first logs into the VoIP system the contact server is contacted in step S and the contact list is downloaded to the user terminal . This allows the user to log into the VoIP system from any terminal and still access the same contact list. The client also periodically communicates with the contact server in order to obtain any changes to the information on the contacts in the contact list or to update the stored contact list with any new contacts that have been added. Presence information is not stored centrally in the contact server. Rather the client periodically requests the presence information for each of the contacts in the contact list directly over the VoIP system.

In step S a call is made between User A and User B . Calls to the users in the contact list may be initiated over the VoIP system by selecting the contact listed in the client and clicking on a call button as shown in using a pointing device such as a mouse. Alternatively the call may be initiated by typing in the VoIP identity of a contact in the field . Referring again to the call setup is performed using proprietary protocols and the route over the Internet between the calling user and called user is determined by the peer to peer system without the use of servers. In an illustrative route is shown between the caller User A and the called party User B via other peers of the system. It will be understood that this route is merely an example and that the call may be routed via fewer or more peers.

Following authentication through the presentation of the digital certificates to prove that the users are genuine subscribers of the VoIP system described in more detail in WO 2005 009019 incorporated herein by reference in its entirety the call can be made using the transmission of VoIP packets. The client performs the encoding and decoding of VoIP packets. VoIP packets from the user terminal are transmitted into the Internet via the network interface and routed by the VoIP system to the computer terminal of User B via a network interface . A client similar to the client running on the user terminal of User B decodes the VoIP packets produce an audio signal that can be heard by User B using the handset . Conversely when User B talks into handset the client executed on user terminal encodes the audio signals into VoIP packets and transmits them across the Internet to the user terminal . The client executed on user terminal decodes the VoIP packets from User B and produces an audio signal that can be heard by the user of the handset .

The VoIP packets for the P2P call described above are passed across the Internet only and the public switched telephone network PSTN is not involved. Furthermore due to the P2P nature of the system the actual voice calls between users of the VoIP system can be made with no servers being used. This has the advantages that the network scales easily and maintains a high voice quality and the call can be made free to the users.

Reference is now made to which illustrates a technique for utilizing the VoIP system to enable the transfer of payments between a first user of the VoIP system and a contact of the first user. Specifically shows the steps involved in the transfer of payments for the system of .

In the example shown in User A is using the VoIP system to initiate a payment to User B . The first step in this process is for User A to use the VoIP client executed on user terminal to select a contact from his contact list in to determine to whom a payment should be made. This is illustrated with reference to the client UI shown in . shows a client UI similar to that shown in as executed on user terminal of User A . In the contact entry fur User B shown in contact list has been selected using the pointing device and a drop down menu has been activated for User B s contact.

Drop down menu contains an option entitled Send Money and this option is selected by User A using the pointing device. The selection of option initiates the process of transferring money to User B . Note that the Send Money option can also be selected from other parts of the client UI. For example a Send Money option can be located in the tools menu of the client or from a drop down menu associated with a contact displayed during an IM chat.

When option is selected client controls the opening of a pop up window that is used to display user interface screens that contain fields that control and initiate the sending of money from User A to User B . Note that the user interface screens described below illustrate an example sequence of screens and the precise presentation and order of information can be changed in alternative embodiments.

If this is the first time that User A has used the VoIP client to send money to a contact then the pop up window shows an introductory page illustrated in . The introductory page shown in is fetched under the control of client from a payment provider . This is shown as step S in . Page is an introductory screen this is only displayed when a user uses the send money functionality for the first time. The introductory page simply explains the steps that need to be taken to send money to a contact so that the user knows what to expect. There are two buttons at the bottom of page . Firstly there is a cancel button which when activated closes the pop up window and cancels the send money process. Secondly there is a get started button which when activated replaces page with account creation page shown in .

Account creation page shown in allows User A to set up an account with the payment provider . An example payment provider is PayPal . The account creation page is provided from the server operated by the payment provider as shown in step S in . All communication between the client and the payment provider in step S uses a secure communication protocol. An example of such as secure protocol is HTTPS although other protocols could also be used.

If User A does not already have an account with the payment provider then he can set one up by selecting his country from the drop down list and then selecting the next button . Responsive to clicking the next button the pop up window displays a sequence of screens that allows the user to enter the personal data required to create an account with the payment provider such as name address email address password payment card details etc. The precise nature of the details that are entered by the user are dependent on the payment provider and are not described further here. However it should be noted that the user setting up an account with the payment provider needs to provide details of a payment source from which funds may be taken such as a credit debit card or bank account details.

Alternatively if User A already has an account with the payment provider he can select the link labelled log in now and will then be presented with log in page shown in . This page is also provided by the payment provider in . Log in page has fields for the user to enter an email address this acts as the payment provider username in this example and password and this information is sent to the payment provider when the user selects the login button . These log in details are verified by a payment provider authorization database as shown in . Note that the username i.e. email address that is used as part of the user s authorization with the payment provider is distinct from the username of the user in the VoIP system i.e. the user s VoIP ID .

Note that the pages shown in are only shown to the user when he first uses the send money functionality. For repeat uses of the functionality the user is displayed the log in page immediately without being shown the introductory page or the account creation page .

Once User A has entered his log in details and been authorized with the payment provider then information regarding the payment to be made is required. This information is entered in a money transfer page illustrated in . The pop up window in shows a money transfer page in which User A enters the details of the money to be sent. Money transfer page is provided by the payment provider as part of step S in . Contact field allows the user to set to the contact in the VoIP system to which the money should be sent. This is initially set to the contact selected in the client UI as shown in User B in this example . The amount of money to be sent and the currency are entered in fields and respectively. A category for the reason for the payment is selected from dropdown list and a message to accompany the payment can be entered in field . When this information has been entered by User A he can activate a next button .

In response to activating the next button the pop up window displays confirmation page shown in . Confirmation page is provided by the payment provider as part of step S in . The confirmation page displays a summary of the payment to be made as shown in region for the user to review. The source of the payment funds as selected up by the user when he set up the account with the payment provider is indicated at . If required the payment source can be changed by selecting the change hyperlink. Possible payment sources include credit debit cards bank accounts or a stored balance with the payment provider. If the user is happy with the details shown in region then a button labelled send money now is activated by the user to confirm that the payment should go ahead. A final page shown in is then displayed to the user to confirm that the payment has been sent. When User A selects the done button the pop up window is closed and the communication between the client of User A and the payment provider in step S of ends.

Referring again to the payment provider on receiving confirmation to proceed with the transfer of the money initiates the sending of a message to the recipient of the money i.e. User B . The message is sent using a messaging system . The messaging system provides a messaging interface between the internet and the VoIP communication system so that an entity that is external to the VoIP system such as the payment provider can send a message to the client of a user of the VoIP communication system. An example messaging system of this type is described in co pending patent application no. GB0702763.4.

More specifically the messaging system provides a secure application programming interface API which can be accessed by authorized users of the messaging system. In this case the payment provider is such an authorized user. The payment provider prepares a message notifying User B of the payment that has been made to him and containing details of the payment and transmits this to the secure API along with the VoIP ID of User B in step S in . The VoIP ID of User B was provided to the payment provider as part of the information entered by User A in see field .

The messaging system processes the message to User B and transmits it over the VoIP communication system via P2P interface . This is illustrated in step S whereby the message is transmitted via peer and before being delivered to user terminal . This is merely an example route for the message for the purposes of illustration.

Reference is now made to which illustrates a UI for the client executed on user terminal of User B . In the UI shown in User B has received the message transmitted by the payment provider . Notification of the message is displayed to User B in an events pane . In particular events pane displays a notification message indicating to User B that he has a payment that is waiting to be received from User A . The name of the sender of the money User A is hyped inked in the notification such that when User B clicks on the hyperlink a pop up window is displayed. If this is the first time that User B has received a payment over the VoIP system then the pop up window shown in is displayed.

Pop up window shown in provides instructions to User B regarding how to claim the money that has been sent to him. More specifically pop up window displays information about the payment including details of the sender or the money User A the date the amount and any message that was entered by the sender as was described above with reference to message field in . The pop up window also provides step by step instructions for how the payment can be accepted. The information displayed in the pop up window is provided in the message transmitted from the payment provider via the messaging system in step S as shown in and does not need to be fetched from a server.

Pop up window comprises three buttons. The first is a decide later button which when activated by User B closes the pop up window but the notification message is retained in the events pane of the client UI shown in . The second button is a close button which when activated by User B closes the pop up window and also removes the notification message from the events pane of client UI in . However the notification message is not deleted but can be viewed again by User B by selecting history tab in the client UI shown in . The third button is a get started button . When User B activates the get started button then pop up window displays an authorization page shown in .

The authorization page is provided by a webserver of the VoIP system as shown in step S and is used to confirm the identity of User B by requesting him to enter his password. The username of User B in the VoIP system i.e. the VoIP D of User B is displayed at and a password field is shown at . To proceed with receiving the money sent to him User B must enter his password in the field . When User B has entered his password in field then the process can be continued by User B activating next button . Alternatively User B can cancel the process and close the pop up window by selecting cancel button .

When User B has entered the password in the password field and activated the next button the password is verified by the VoIP authorization DB in step S as shown in . If the password is incorrect the user is invited to re enter it. If the password is correctly verified then the VoIP authorization DB transmits the VoIP identity of User B to a linking server in step S. The linking server is a server operated by an entity that is trusted by both the VoIP software provider and the payment provider . In one embodiment the linking server is operated by a third party. In alternative embodiments the linking server may be operated by an entity related to either or both of the VoIP software provider and the payment provider . Communications between the VoIP authorization DB and the linking server utilize a secure communication protocol.

The purpose of the linking server is to link together the authorization of the user in the VoIP system with the authorization of the user with the payment provider. This only needs to be performed the first time that a user receives money. Upon receiving the VoIP identity of User B from the VoIP authorization DB in step S the linking server generates a one time session token which has a short lifespan. The token is passed back to the VoIP authorization DB which returns it to the client as part of the confirmation of correctly entering authentication details in step S. This token is used to link the VoIP and payment provider authorizations as described in more detail hereinafter.

Returning again to subsequent to User B correctly entering is authorization details and selecting the next button the client triggers the execution of a web browser program. The client opens the web browser program such that the web browser navigates immediately to a website of the payment provider as illustrated in step S of . The website of the payment provider fetched and displayed in the web browser program is shown in .

The payment provider website shown in requires the user User B in this example to enter his login details for the payment provider . The website comprises a username in this example email address field and a password field and User B can transmit these authentication details to the payment provider to be verified by the payment provider authorization DB by selecting a log in button . In addition to transmitting the authentication details the session token generated by the linking server is also transmitted to the payment provider .

Alternatively if User B does not already have an account with the payment provider he can sign up for an account by selecting his country using drop down list and selecting sign up button . Following the activation of the sign up button User B is presented with a sequence of website pages provided by the payment provider that allow the user to sign up for an account with the payment provider . This sequence of website pages are dependent on the payment provider and are not described in more detail here.

Following the authorization with the payment provider in step S the payment provider credits the account of User B with the amount sent to User B by User A minus any fees that are taken by the payment provider and debits the account of User A . This therefore completes the process of sending money from User A to User B .

In addition the payment provider also attempts to link the accounts of the user in the VoIP system and with the payment provider using the session token provided to the payment provider in step S. The payment provider communicates with the linking server using a secure communication protocol to verify the token that it has received in step S. When the token has been verified by the linking server the payment provider transmits the payment provider username of User B i.e. User B s email address see field to the linking server. As the two usernames of User B in the VoIP system i.e. the VoIP ID of User B and with the payment provider i.e. the email address of User B are now both known to the linking server and User B is simultaneously logged in to both accounts in the same session as proven by the matching token provided by the payment provider in S then the linking server can store these two identities for the two different systems and create a link between them.

As a result of the linking process the payment provider can for subsequent payments communicate with the linking server in order to confirm the payment provider username that is linked to a given VoIP ID. This allows the payment provider to have sufficient trust in the user s VoIP identity to allow money sent to the user to be automatically and immediately deposited into the user s payment provider account for subsequent payments thereby allowing the two stage authentication in to be skipped for subsequent payments . The effect of such a linking of the authorizations between the VoIP system and the payment provider is illustrated in . Note that the user may also be provided with the option to link the VoIP and payment provider accounts in advance of receiving a first payment. This can be performed by providing an option in the VoIP client to perform the two stage authorization process described above i.e. entering both VoIP and payment provider authorization details at any time without a payment needing to be received.

The depositing of the money into his account is confirmed to User B in pop up window shown in which is shown in response to User B clicking on the hyperlink in the notification message . Therefore as a result of the linking of the accounts the money is received very easily by the user without the requirement to log into multiple accounts. Note however that in some circumstances User B may be prompted in a notification message to accept the payment before it is deposited even if the accounts have been linked. For example this may occur if the payment provider is taking a fee from the money in which case User B must accept this fee before the money is deposited. Similarly the user may be asked to accept a particular exchange rate for a given currency.

While this invention has been particularly shown and described with reference to one or more embodiments it will be understood to those skilled in the art that various changes in form and detail may be made without departing from the scope of the invention as defined by the appendant claims. For example the message transmitted from the payment provider to User B may in alternative embodiments be sent as an email message over the internet or a short message service SMS message over a cellular network rather than being transmitted over the VoIP communication system. In this case the recipient of the money is identified by an email address or mobile phone number rather than by a VoIP ID.

