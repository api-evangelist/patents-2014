---

title: Communication device
abstract: The communication device can easily serve as an extended user interface such as a remote controller of a target apparatus without causing any complicated operations to a user. The communication device includes the following units. An apparatus information obtainment unit () obtains apparatus information from an apparatus. A position information obtainment unit () obtains position information of the communication device (). An operation information obtainment unit () obtains operation information based on the apparatus information. A storage unit () stores the position information as apparatus position information indicating as a position of the apparatus, in association with the operation information. A direction sensor unit () detects direction of the communication device (). A directional space calculation unit () calculates a directional space of the communication device (). A selection unit (a) specifies the apparatus existing in the directional space based on the apparatus position information and selects the operation information associated with the specified apparatus. An operation information transmission unit () transmits, based on the selected operation information, a control signal to the specified apparatus so as to allow the communication device to operate the apparatus.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=RE046108&OS=RE046108&RS=RE046108
owner: PANASONIC INTELLECTUAL PROPERTY CORPORATION OF AMERICA
number: RE046108
owner_city: Torrance
owner_country: US
publication_date: 20140910
---
The present invention relates to communication devices and more particularly to a communication device that uses proximity wireless communication to serve as an extended user interface for a home appliance.

There has been disclosed a communication device which reads apparatus information out from an Integrated Circuit IC tag on an apparatus by using proximity wireless communication then registers operation information corresponding to the readout apparatus information so that the communication device can serves as a remote controller of the apparatus for example Patent Reference 1 . This communication device has operation units each of which enables the communication device to serve as a remote controller that remotely controls a predetermined target apparatus to be controlled. The communication device includes an IC tag reader unit and a Central Processing Unit CPU . The IC tag reader unit reads from an IC tag on the target apparatus apparatus information corresponding to the target apparatus. The CPU executes a registration program for registering a control information data file and the apparatus information read by the IC tag reader unit. In the control information data file the apparatus information is stored in association with control information. The CPU also executes the registration program for obtaining the control information associated with the apparatus information from the control information data file and for registering various control instructions of the obtained control information to the respective operation units. Then when one of the operation units is pressed the communication device transmits to the target apparatus a specific control instruction corresponding to the pressed operation unit from among the registered control instructions of the control information.

There also has been disclosed a remote control user interface using proximity wireless communication which has been conceived in consideration of operation simplicity and usability for example Patent Reference 2 . This remote control user interface includes an operation sheet and a remote controller. The operation sheet holds wireless tags in respective regions segmented for respective different operation items. In each of the tags information necessary to operate an external electronic device is stored. By using the operation sheet the remote controller transmits a command signal to the electronic device. Then the remote controller side reads the information from the wireless tag on the operation sheet not without being in contact with the operation sheet and transmits a command signal based on the readout information to the electronic device.

There still has been disclosed a control device that allows a user to select necessary information by a simple operation for example by pointing by a remote controller to a button selected button on a display of a display unit for example Patent Reference 3 . This control device includes a remote controller unit a display coordinate unit a selected button recognition unit and a screen display control unit. By using an angular sensor included in the remote controller the remote controller unit detects and measures an angle change amount between two directions which is caused when the user operator holding the remote controller moves the remote controller. The display coordinate unit calculates from initial coordinates and the angle change amount two dimensional 2D coordinates of the button selected on the display of the display unit by the remote controller. The selected button recognition unit determines the selected button based on the calculated 2D coordinates and button position information stored in a button information storage unit. The screen display control unit displays buttons on respective positions on the display of the display unit and displays the selected button by hot spot. When the operator intends to decide the button selected by the screen display control unit the operator presses a decision button on the remote controller to transmit a decision signal. This control device can select necessary information by such a simple operation.

In Patent Reference 1 when a user intends to operate the target apparatus by the communication device the user needs to select the target apparatus to be controlled operated by the communication device via a display unit buttons and keys of the communication device. More specifically there is a problem that complicated operations such as plural various operations are necessary for the communication device in order to cause the communication device to serve as a remote controller for the target apparatus when the target apparatus is selected.

In Patent Reference 2 different operation sheets are necessary for different electronic devices to be operated. In other words with the increase of electronic devices which a user wishes to control the number of operation sheets for the electronic devices is also increased.

In Patent Reference 3 the remote controller transmits an angle change amount regarding a move of the operator to the control device and the control device determines a location pointed by the operator based on the angle change amount. Therefore the control of the target apparatus requires the remote controller the control device and the display device. In short Patent Reference 3 has a problem that a plurality of devices are required to control the apparatus. Moreover Patent Reference 3 does not consider the situation where a plurality of target apparatuses are to be operated and neither discloses nor suggests a method of registering a target apparatus selected by the operator and instructions corresponding to the target apparatus.

In order to solve the above described problems of the conventional technologies an object of the present invention is to provide a communication device that can easily serve as an extended user interface such as a remote controller of a target apparatus without causing any complicated operations to a user.

In accordance with an aspect of the present invention for achieving the object there is provided a communication device including an apparatus information obtainment unit configured to obtain from an apparatus apparatus information for uniquely identifying the apparatus a position information obtainment unit configured to obtain position information indicating a position of the communication device an external communication unit configured to perform external communication an operation information obtainment unit configured to obtain via the external communication unit operation information for allowing the communication device to operate the apparatus based on the apparatus information a storage unit configured to store the position information and the operation information in association with each other the operation information being obtained by the operation information obtainment unit and the position information being obtained when the apparatus information obtainment unit obtains the apparatus information and being considered as apparatus position information indicating a position of the apparatus a direction sensor unit configured to generate direction information indicating a direction to which the communication device faces a directional space calculation unit configured to calculate a directional space based on the position information obtained by the position information obtainment unit and the direction information generated by the direction sensor unit the directional space being a space pointed by the communication device facing the space a selection unit configured to i specify the apparatus existing in the directional space based on the apparatus position information stored in the storage unit and ii select from the storage unit the operation information associated with the apparatus position information of the specified apparatus and an operation information transmission unit configured to transmit based on the operation information selected by the selection unit a control signal to the apparatus specified by the selection unit so as to allow the communication device to operate the apparatus.

With the above structure the communication device according to the aspect of the present invention can store the position information of the communication device and the operation information of the apparatus in association with each other. In addition the use of the position information of the apparatus to be operated by the communication device enables the user to operate the apparatus merely by pointing the communication device such as a mobile device to the apparatus. As a result the aspect of the present invention can provide a communication device that can easily serve as an extended user interface such as a remote controller of the apparatus without causing any complicated operations to the user.

Furthermore the communication device may further include a proximity wireless communication unit configured to perform proximity wireless communication wherein the apparatus information obtainment unit is configured to obtain the apparatus information regarding the apparatus via the proximity wireless communication unit.

With the above structure the communication device according to the aspect of the present invention can easily obtain the operation information of the apparatus such as a home appliance by single pressing of a button by using via proximity wireless communication without causing any complicated operations to the user.

Still further the selection unit may include an apparatus direction calculation unit configured when there are a plurality of apparatuses including the apparatus in the directional space to calculate plural pieces of apparatus direction information based on the position information of the communication device and plural pieces of apparatus position information including the apparatus position information the plural pieces of apparatus direction information each indicating a direction from the communication device to a corresponding one of the apparatuses and the plural pieces of apparatus position information being stored in the storage unit and each indicating a position of the corresponding one of the apparatuses a difference calculation unit configured to calculate a difference between the direction information of the communication device and each of the plural pieces of apparatus direction information and an apparatus decision unit configured to decide as the specified apparatus existing in the directional space an apparatus having the difference that is smaller than a predetermined value from among the apparatuses the difference being calculated by the difference calculation unit.

With the above structure even if there are a plurality of apparatuses in an oriented direction of the communication device according to the aspect of the present invention the communication device can appropriately select as a target apparatus to be operated by the communication device an apparatus closer to the oriented direction pointed by the communication device from among the plurality of apparatuses.

Still further the selection unit may include a space information storage unit configured to store space information indicating a a space and b an arrangement of the apparatus in the space and an apparatus decision unit configured when there are a plurality of apparatuses including the apparatus in the directional space to i obtain the space information including information of a space in which the communication device exists from the space information storage unit based on the position information of the communication device and ii decide as the specified apparatus existing in the directional space an apparatus existing in the space in which the communication device exists based on the obtained space information.

With the above structure the communication device according to the aspect of the present invention can use the space information such as room arrangement information of a building. As a result it is possible to decrease a possibility that the user selects a wrong apparatus to which the user does not intend to point.

Still further the communication device may further include a display unit wherein the selection unit includes a pitch angle detection unit configured to generate pitch angle information indicating an angle of a pitch direction of the communication device a pitch angle information storage unit configured to store the pitch angle information in association with the apparatus information and an apparatus decision unit configured to decide as the specified apparatus existing in the directional space an apparatus selected by a user from an apparatus candidate list displayed on the display unit wherein the display unit is configured to display as the apparatus candidate list apparatuses existing in the directional space based on plural pieces of apparatus position information including the apparatus position information stored in the storage unit and plural pieces of pitch angle information including the pitch angle information stored in the pitch angle information storage unit and the pitch angle detection unit is configured to store the generated pitch angle information into the pitch angle information storage unit in association with the apparatus decided by the apparatus decision unit.

With the above structure the communication device according to the aspect of the present invention can consider habits of the user in consideration of an angle change in a pitch direction of the communication device. As a result it is possible to increase an accuracy of selecting the target apparatus to be operated by the communication device.

Still further the communication device may further include an apparatus state obtainment unit configured to obtain an operation state of the apparatus wherein the display unit is further configured to display based on the operation state obtained by the apparatus state obtainment unit a the apparatus candidate list and b plural pieces of operation information including the operation information associated with respective apparatuses in the apparatus candidate list.

With the above structure if a plurality of apparatuses are specified as candidates to be operated by the communication device the communication device according to the aspect of the present invention can change the operation information depending on the operation state of each of the apparatuses. As a result pieces of information to be displayed on the communication device can be simplified.

Still further the apparatus information obtainment unit may further include an absolute position generation unit configured to generate absolute position information of the communication device and a relative position generation unit configured to generate relative position information of the communication device the relative position information indicating a position moved from a position indicated by the absolute position information wherein the position information is generated from the absolute position information and the relative position information. Still further the communication device may further include a still determination unit configured to obtain move information of the communication device from the relative position information and the direction information and determine based on the move information whether or not the communication device is still wherein the direction sensor unit is configured to generate the direction information indicating a direction to which the communication device faces when the still determination unit determines that the communication device is still.

With the above structure the communication device according to the aspect of the present invention can operate the apparatus at the timing where the user points the communication device to the apparatus and stops a move of the communication device to be still.

Still further when it is determined based on the apparatus information that it is possible to obtain the apparatus position information from the storage unit the position information obtainment unit may i store into the storage unit the absolute position information generated by the absolute position obtainment unit as the apparatus position information and ii initialize the relative position information generated by the relative position generation unit.

With the above structure the communication device according to the aspect of the present invention can decrease accumulated errors of the relative position information generated by the relative position generated unit such as an acceleration sensor.

Still further the communication device may further include a display unit wherein when it is determined based on the direction information and the position information that the communication device is outside a communicable range where the operation information transmission unit is capable of transmitting the control signal to the apparatus the display unit is configured to display a fact that the communication device is outside the communicable range when the operation information transmission unit is to transmit the control signal to the apparatus.

With the above structure if the communication device according to the aspect of the present invention is outside the communicable range of the operation information transmission unit the communication device can warn the user to persuade the user to be back to the communicable range. For example since a communicable range of infrared communication is limited due to narrow directionality the above structure can improve usability.

Still further the communication device may further include a sound sensor unit configured to detect sound information produced by the apparatus wherein the communication device determines based on the sound information detected by the sound sensor unit whether or not the transmission of the control signal to the apparatus is successful.

With the above structure the communication device according to the aspect of the present invention can allow the operation information transmission unit to perform reliable one way communication without requesting a feedback response.

Still further the communication device may further include an operation history obtainment unit configured to obtain an operation history including a history of the transmission of the control signal to the apparatus wherein the communication device transmits the operation history to a server by performing the external communication when it is determined that the transmission of the control signal to the apparatus is successful.

With the above structure even if the apparatus does not have a means for communicating via a general purpose network such as the Internet the communication device according to the aspect of the present invention can transmit the reliable operation history of the apparatus to a server.

Still further the apparatus information may further include individual identification information for identifying a user of the communication device and the communication device may control the display on the display unit based on the individual identification information.

With the above structure the communication device according to the aspect of the present invention can serve as a remote control interface suitable for each user. For example if the user does not require detailed operations the communication device displays a simple interface.

Still further the operation information obtainment unit may obtain external communication operation information of the apparatus for allowing the communication device to operate the apparatus via the external communication unit when it is determined based on the position information obtained by the position information obtainment unit that the apparatus does not exist in a range where the operation information transmitting unit is capable of transmitting the control signal to the apparatus and the communication device may operate the apparatus via the external communication unit based on the external communication operation information.

With the above structure the communication device according to the aspect of the present invention can easily serve as a remote control interface of the apparatus connected to a general purpose network such as the Internet even if the communication device is outside a building. For example when the communication device is pointed to a direction of user s home the communication device can serve as a remote controller of an operable apparatus in the user s home.

Still further the apparatus information obtainment unit may include a reading unit configured to read the apparatus information from an image regarding the apparatus information the image being provided on the apparatus.

With the above structure the communication device according to the aspect of the present invention can obtain the apparatus information when a simple information image such as a two dimensional 2D bar code is provided on the apparatus.

The present invention can realize a communication device that can easily serve as an extended user interface such as a remote controller of a target apparatus without causing any complicated operations to a user. For example use of position information of the target apparatus enables the user to operate the target apparatus merely by pointing the communication device to the target apparatus. In addition if the communication device has a proximity wireless communication function use of the proximity wireless communication enables the user to easily obtain operation information of the target apparatus such as a home appliance by single pressing of a button.

The following describes embodiments according to the present invention with reference to the drawings. In the following embodiments various aspects of the communication device according to the present invention are described. Among them the eighteenth embodiment is directly related to the claims appended in this application.

The first embodiment according to the present invention is described below. is a schematic diagram of the first embodiment of the present invention. Here a communication system including an image capturing device camera a TV and a server is illustrated. In the image capturing device capturing images is illustrated on a left hand side while the image capturing device reproducing the captured images is illustrated on a right hand side.

The image capturing device is an example of the communication device according to the aspect of the present invention. Here the image capturing device is implemented as a digital camera. For units used in capturing images the image capturing device includes a first power supply unit a video processing unit a first antenna a first processing unit a second memory and a RF ID antenna second antenna . The second memory holds medium identification information captured image state information and server specific information . The RF ID antenna is used for a RF ID unit. For units used in reproducing images the image capturing device includes the first power supply unit a first memory a power detection unit an activation unit the second memory a second processing unit a modulation unit switch a communication unit a second power supply unit and the RF ID antenna . The second memory holds medium identification information captured image state information and the server specific information .

The TV is an example of an apparatus device connected to a reader via a communication path. In more detail the TV is a television receiving apparatus used to display image data captured by the image capturing device . The TV includes a display unit and a RF ID reader writer .

The server is a computer that holds image data uploaded from the image capturing device and that downloads the image data to the TV . The server has a storage device in which data is stored.

When images of objects such as scenery are captured the images are converted to captured data image data by the video processing unit data. Then in communicable conditions the image data is transmitted to an access point using the first antenna for a wireless Local Area Network LAN or Worldwide Interoperability for Microwave Access WiMAX and eventually recorded as the data via the Internet to the predetermined server .

Here the first processing unit records the captured image state information regarding the captured image data onto the second memory in a RF ID unit . The captured image state information indicates at least one of a date of time of capturing each of the images b the number of the captured images c date and time of finally transmitting uploading an image d the number of transmitted uploaded images and e date and time of finally capturing an image. In addition the captured image state information includes f serial numbers of images that have already been uploaded or images that have not yet been uploaded g a serial number of a finally captured image and the like.

In addition the first processing unit generates a Uniform Resource Locator URL of the data that is uploaded to the server . The first processing unit records the server specific information onto the second memory . The server specific information is used to access the image data. The medium identification information is also recorded on the second memory . The medium identification information is used to determine whether the device embedded with the RF ID RF ID unit is a camera a card or a post card.

When a main power of the camera the first power supply unit such as a battery is ON the second memory receives power from the main power. Even if the main power of the camera is OFF the external RF ID reader writer is located outside supplies power to the RF ID antenna . This enables the passive second power supply unit without any power like a battery to adjust a voltage to provide power to respective units in a RF ID circuit unit including the second memory. Thereby it is possible to supply power to the second memory so that the data is exchanged between the second memory and the external device to be recorded and reproduced. Here the second power supply unit is a circuit generating power from radio waves received by the second antenna RF ID antenna . The second power supply unit includes a rectifier circuit and the like. Whenever the main power is ON or OFF the data in the second memory is read and written by the second processing unit . When the main power is ON the data in the second memory can be read and written also by the first processing unit . In other words the second memory is implemented as a nonvolatile memory and both the first processing unit and the second processing unit can read and write data from and to the second memory .

When the image capturing device completes capturing images of a trip or the like and then the captured images are to be reproduced the image capturing device is moved into proximity of the RF ID reader writer of the TV as illustrated on the right side of as being the situation of reproducing images. Then the RF ID reader writer supplies power to the RF ID unit via the second antenna and thereby the second power supply unit provides power to the units in the RF ID unit even if the main power the first power supply unit of the image capturing device is OFF. The captured image state information and the server specific information are read by the second processing unit from the second memory and transmitted to the TV via the second antenna . The TV generates a URL based on the server specific information then downloads the image data of the data from the server and eventually displays on the display unit thumbnails or the like of images in the image data. If it is determined based on the captured image state information that there is any captured image not yet been uploaded to the server the determination result is displayed on the display unit . If necessary the image capturing device is activated to upload to the server image data of the captured image not yet been uploaded.

 a b and c in are an external front view an external back view and an external right side view respectively of the image capturing device according to the first embodiment of the present invention.

As illustrated in c in the first antenna used for a wireless LAN and the second antenna used for the RF ID unit are embedded in a right side of the image capturing device . The antennas are covered with an antenna cover made of a material not shielding radio waves. The RF ID unit operates at a frequency of 13.5 MHz while the wireless LAN operates at a frequency of 2.5 GHz. The significant difference in frequency prevents interference between them. Therefore the two antennas and are seen overlapping with each other from the outside as illustrated in c in . The structure decreases an installation area of the antennas eventually reducing a size of the image capturing device . The structure also enables the single antenna cover to cover both of the two antennas as illustrated in c in so that the part made of the material not shielding radio waves is minimized. The material not shielding radio waves such as plastic has a strength lower than that of a metal. Therefore the minimization of the material can reduce a decrease in a strength of a body of the image capturing device . The image capturing device further includes a lens and a power switch . The units assigned with numeral references to will be described later.

Image data captured by an image capturing unit is provided to a recording reproducing unit via the video processing unit and then recorded onto a third memory . The image data is eventually recorded onto an Integrated Circuit IC card that is removable from the image capturing device .

The above processing is instructed by the first processing unit that is for example a Central Processing Unit CPU . The image data such as captured photographs or video is provided to an encryption unit a transmission unit in a communication unit and then the first antenna in order to be transmitted to an access point or the like by radio via a wireless LAN WiMAX or the like. From the access point or the like the image data is transmitted to the server via the Internet . In the above manner the image data such as photographs is uploaded.

There is a situation where a part of the image data fails to be uploaded because for example the communication state is not good or there is no nearby access point or base station. In the situation some images have already been uploaded to the server and the other images have not yet been uploaded. Therefore the image data in the server is different from the image data captured by the image capturing device . In the first embodiment of the present invention the RF ID reader writer of the TV or the like reads the server specific information and the like from the second memory in the RF ID unit of the image capturing device . Then based on the readout information a URL or the like of the server is generated. According to the URL the TV accesses the server to access the data such as a file folder or the like uploaded by the image capturing device . Then the TV downloads the uploaded images from among the images captured by the image capturing device and displays the downloaded images. The above method will be described in more detail later.

If a part or all of the captured images is not uploaded as image data of the data in the server a problem would occur that a user downloading the images to the TV cannot watch a part of the images on the TV .

In order to solve the problem in the first embodiment of the present invention the first processing unit causes a recording reproducing unit to indicate information regarding a state of captured images such as information of uploading state to the captured image state information in the second memory .

The above is described in more detail with reference to . In the second memory synchronization information is recorded. The synchronization information indicates whether or not image data in the server matches image data captured by the camera in other words whether or not the image data in the server is in synchronization with the image data captured by the camera. In the first embodiment of the present invention the TV reads the captured image state information from the second memory via the second antenna . The captured image state information makes it possible to instantly determine whether or not the data in the server lacks any image. If the determination is made that there is any image that has not yet been uploaded then the determination result is displayed on the display unit of the TV . Here the TV also displays a message of Please upload images to a viewer. Or the TV issues an instruction to the camera via the RF ID antenna to transmit an activation signal to the activation unit thereby supplying power to the first power supply unit of the image capturing device . Thereby the TV causes the image capturing device to upload to the server the images in the first memory or the like of the image capturing device which have not yet been uploaded via a wireless LAN a wired LAN the second antenna RF ID antenna or the like.

Since transmission via the RF ID antenna has a small transfer amount transmission of the image data as originally captured takes a considerable time to upload and display the image data. This causes a user to feel unpleasant. In order to avoid this according to the first embodiment of the present invention when the image data is transmitted via the RF ID antenna thumbnails of the images not yet been uploaded are transmitted instead. The thumbnails can shorten apparent upload time and display time suppressing unpleasant feeling of the user. Most of current RF ID having a high communication ability has a transfer amount of several hundreds kbps. However development of RF ID having a quad speed has been examined. The quad speed RF ID has a possibility of achieving a transfer amount of several Mbps. If thumbnails of images not yet been uploaded are transmitted it is possible to transmit several dozens of thumbnails in one second. If thumbnails are displayed in a list thumbnails of all images including images not yet been uploaded can be displayed on the TV within a time period a general user can tolerate. The above is one of practical solutions.

If the image capturing device is forced to be activated to upload images not yet been uploaded as described above the most speedy and stable path is selected from a wireless LAN the RF ID antenna and a wired LAN to be used for uploading and displaying on the TV. In the situation where the image capturing device receives power from the outside via the second antenna the communication unit transmitting signals to the second antenna performs communication with the outside by a low speed modulation method. On the other hand in the situation where the image capturing device can receive power from the first power supply unit or the like the communication unit switches the modulation method to a modulation method having a large signal point such as Quadrature Phase Shift Keying QPSK 16 Quadrature Amplitude Modulation QAM or 64 QAM as needed in order to achieve high speed transfer to upload the image data not yet been uploaded in a short time. Furthermore when the power detection unit detects for example that the first power supply unit or the like does not have enough power or that the image capturing device is not connected to an external power the first power supply unit stops supplying power and a modulation switch unit switches the modulation method employed by the communication unit to a modulation method having a smaller signal point or less transfer rate. As a result it is possible to prevent that the capacity of the first power supply unit is reduced to be equal to or less than a set value.

There is another solution for power. When power is not enough the second processing unit the communication unit or the like sends a power increase request signal to the RF ID reader writer of the TV via the second antenna to request for power support. In response to the request the RF ID reader writer increases providing power to have a value greater than the set value for the power used in reading data from the RF ID unit. Since the RF ID unit receives more power via the second antenna the RF ID unit can provide power to the communication unit or the first processing unit . Thereby a power amount of a battery for the first power supply unit is not reduced. Or without the battery the image capturing device can practically and unlimitedly continue transmission.

As still another method uploaded image data information in can be used. In uploaded image data information uploaded image information such as serial numbers of photographs is recorded. It is also possible to use hashed information generated by hashing the information . As a result a data amount is reduced.

The TV can read the above information to be compared to information of images captured by the camera thereby obtaining information of images not yet been uploaded.

As still another method not yet uploaded image data existence identification information can be used. The not yet uploaded image data existence identification information includes an existence identifier indicating whether or not there is any image not yet been uploaded. Since existence of images has not yet been uploaded is notified data in the second memory can be significantly reduced.

It is also possible to use not yet uploaded image number indicating the number of images not yet been uploaded. Since the image capturing device allows the TV to read the information a viewer can be informed of the number of images to be uploaded. In this case a data capacity in addition to the number is recorded as the captured image state information . Thereby the image capturing device enables the TV to display a more exact prediction time required to upload images not yet been uploaded.

It is also possible to use not yet uploaded image information hashed information that is generated by hashing information regarding images not yet been uploaded.

In addition it is also possible to record a final capturing time final capturing date time in the second memory . Later the TV reads the final capturing time . The TV is connected to the server to compare the final capturing time to a capturing date of an image that has been finally uploaded to the server . Thereby it is possible to easily determine whether or not there is any image not yet been uploaded. If images are captured and assigned with serial numbers sequentially from an older image it is possible to record only a final image serial number . The final image serial number is compared to a serial number of an image that has been finally uploaded to the server . Thereby it is possible to determine whether or not there is any image not yet been uploaded. It is also possible to record onto the second memory captured image information that is for example serial numbers of all captured images. Thereby the TV later accesses the server to match the serial numbers to images uploaded to the server . As a result it is possible to determine whether or not there is any image not yet uploaded. When the captured image information is used use of hashed information generated by hashing the captured image information can compress the captured image information .

The second memory further stores Unique IDentification UID of the RF ID unit camera ID and the medium identification information . Even if the main power of the camera except a sub power for backup etc. of a clock is OFF these pieces of information can be read by the TV via the second antenna to be used for identifying the camera or the user or authenticating a device apparatus . When the user comes back from an overseas trip or the like the camera is likely to have a small charge amount of the battery. However according to the first embodiment of the present invention the camera can be operated to transmit information without battery which is highly convenient for the user. The medium identification information includes an identifier or the like indicating whether the medium or device embedded with the RF ID unit is a camera a camcorder a post card a card or a mobile phone. The identifier enables the TV to identify the medium or device. Thereby the TV can display a mark or icon of the camera or postcard on a screen as illustrated in as will be described. The TV can also change processing depending on the identifier.

The second memory also stores image display method instruction information . For example in the situation where a list display in is selected when the second antenna is moved into proximity of the RF ID reader writer of the TV the image capturing device camera causes the TV to display a list of thumbnails of images such as photographs.

In the situation where slide show is selected the image capturing device causes the TV to sequentially display images from a newer one or an older one.

In a lower part of the second memory in there is a region for recording the server specific information .

The server specific information allows a camera operator to display images on the TV screen by a preferred method.

The server specific information includes server URL generation information that is source information from which a server URL is generated. An example of the server URL generation information is login ID . The server specific information has a region in which server address information and user identification information are recorded. In practical login ID and the like are recorded. In addition there is a region for storing a password . An encrypted password may be stored in the region. The above pieces of information are used to generate an URL by a URL generation unit that is provided in the image capturing device the RF ID unit the camera function used for capturing images in the image capturing device or the TV . The URL is used for accessing a group of images corresponding to the image capturing device or the user in the server . If the URL generation unit is provided in the RF ID unit the URL generation unit receives power from the second power supply unit .

It is also possible to generate URL without using the above pieces of information and store the generated URL directly to the second memory .

It is characterized in that the above described pieces of information stored in the second memory can be read by both the second processing unit in the RF ID unit and the first processing unit in the camera function.

The above structure allows the TV reading the RF ID unit in the camera to instantly obtain the pieces of information regarding uploading state the sever address information the login ID the password and the like. Thereby the TV can download image data corresponding to the camera from the server and display the image data at a high speed.

In the above situation even if the main power of the image capturing device is OFF the RF ID reader writer supplies power to the second power supply unit to activate operate the image capturing device . Therefore power of the battery in the image capturing device is not reduced.

Referring back to the first power supply unit receives power from the battery to provide power to the units in the camera. In a quiescent state however a third power supply unit provides weak power to the clock and the like. In some cases the third power supply unit supplies backup power to a part of the second memory .

The RF ID unit receives power from the second antenna to provide power to the second power supply unit thereby operating the second processing unit or operating a data receiving unit a recording unit a reproducing unit a data transfer unit the communication unit and the second memory .

Therefore in a quiescent state of the camera no power is consumed. As a result it is possible to keep the battery of the camera longer.

The processing performed by the image capturing device referred to also as a medium such as a camera or card and the processing performed by the TV and the RF ID reader writer are explained with reference to a flowchart of .

If the main power is OFF at Step a in it is determined at Step b whether or not activation setting of the RF ID reader writer for the main power OFF is made. If the activation setting is made then the RF ID reader writer is turned ON at Step c and changed to be in a power saving mode at Step e.

At Step f impedance or the like of an antenna unit is measured or a nearby sensor is measured. When the RF ID unit is moved into proximity of an antenna of the RF ID reader writer at Step j it is detected at Step g whether or not the RF ID unit is in proximity of or contacts the antenna. If it is detected that the RF ID unit is in proximity of or contacts the antenna then the RF ID reader writer starts supplying power to the antenna of the medium at Step h. At Step k in the medium the second power supply unit is turned ON and thereby the second processing unit starts operating. As Step m communication between the medium camera or card and the RF ID reader writer starts.

When at Step i the TV determines whether or not the RF ID reader writer receives communication from the medium. If the RF ID reader writer receives communication then mutual authentication starts at Steps a and f in . If it is determined at Steps b and g that the mutual authentication is successful information is read out from the second memory at Step d. At Step e the readout information is transmitted to the RF ID reader writer . At Step i the RF ID reader writer receives the information. At Step j the TV side makes a determination as to whether or not the identification information or the like of the second memory is correct. If the identification information or the like is correct then it is determined at Step p whether or not the TV has identification information indicating automatic power ON. If the TV has identification information then it is determined at Step r whether or not a main power of the TV is OFF. If the main power of the TV is OFF the main power of the TV is turned ON at Step a of . At Step b the TV side makes a determination as to whether or not the second memory has forced display instruction. If the second memory has the forced display instruction then the TV side changes an input signal of the TV to a screen display signal for displaying the RF ID at Step d. At Step e the RF ID reader writer reads format identification information. At Step f the RF ID reader writer reads information from the second memory by changing a format of the information to a format according to the format identification information. At Step g the TV side makes a determination as to whether or the second memory has a password request flag . If the second memory has the password request flag then the RF ID reader writer reads an ID of TV not requesting password entry from the second memory at Step h. At Step i the TV side makes a determination as to whether or not ID of the TV matches the ID of TV not requesting password entry . If the ID of the TV does not match the ID of TV not requesting password entry then the medium reads out a password from the second memory at Step q. At Step v the medium decrypts the password that has been encrypted. At Step s the medium transmits the decrypted password to the TV side. Here at Steps q r and s it is also possible to store the password in a storage device in the server as the data in the server .

At Step j the RF ID reader writer receives the password. At Step k the TV displays a password entry screen. At Step m the TV determines whether or not the input password is correct. The determination may be made by the server . If the determination is made that the input password is correct then the TV performs display based on the information and program read from the second memory in the RF ID unit at Step p.

At Step a of the TV side determines whether or not the medium identification information in the RF ID unit in the second memory indicates that the medium is a camera. If the medium identification information indicates a camera then the TV displays an icon characters of a camera camera icon on the display unit at Step b. On the other hand if the medium identification information does not indicate a camera then it is determined at Step c whether or not the medium identification information indicates a post card. If the medium identification information indicates a post card then the TV displays an icon of a post card post card icon at Step d. On the other hand if the medium identification information does not indicate a post card the TV further determines at Step e whether or not the medium identification information indicates an IC card. If the medium identification information indicates an IC card then the TV displays an icon of an IC card at Step f. On the other hand if the medium identification information does not indicate an IC card the TV still further determines at Step g whether or not the medium identification information indicates a mobile phone. If the medium identification information indicates a mobile phone then the TV displays an icon of a mobile phone on a corner of the TV screen.

At Steps a and i of the RF ID reader writer reads service detail identification information from the server or the second memory. At Step c the TV side determines whether or not the service detail identification information indicates image display service. At Step b the TV side determines whether or not the service detail identification information indicates a post card service such as direct mail. At Step d the TV side determines whether or not the service detail identification information indicates advertising service. At Steps f and j the RF ID reader writer obtains the server specific information from the second memory of the medium. At Step g the TV side determines whether or not the second memory stores the URL . If the second memory does not store the URL then the processing proceeds to Steps h and k at which the TV obtains the server address information and the user identification information from the second memory. At Steps a and p the TV obtains an encrypted password from the second memory. At Steps b the TV decrypts the encrypted password. At Step c the TV generates URL from the above pieces of information. At Step d even if the second memory stores the URL the TV accesses the server having the URL via the communication unit and the Internet. At Step k the TV starts being connected to the server . At Step q the medium reads out operation program existence identifier from the second memory. At Step e the TV determines whether or not the TV has any operation program existence identifier. If the TV has any operation program existence identifier it is further determined at Step f whether or not there are plurality of operation programs. If there are a plurality of operation programs then the TV reads operation program selection information from the second memory at Step r. At Step g the TV determines whether or not the operation program selection information is set. If the operation program selection information is set the TV selects directory information of a specific operation program at Step h. At Step s the medium reads out directory information of the specific operation program from the server and provides the directory information to the TV. At Step i the TV accesses the specific operation program in the directory on the server. At Step m the server provides the specific operation program to the TV or executes the specific operation program on the server at Step n. At Step j the TV or the server starts execution of the specific operation program. At Step a of the TV determines whether or not the specific operation program is service using images. If the specific operation program is service using images then the TV starts checking images not yet been uploaded at Step b.

At Step i the TV reads the not yet uploaded image data existence identification information from the medium. At Step c the TV determines whether or not the not yet uploaded image data existence identification information indicates that there is any image not yet been uploaded. If there is any image not yet been uploaded the TV reads the not yet uploaded image number and the data capacity from the medium at Step d. At Step e the TV displays a the not yet uploaded image number and b a prediction time required to upload images which is calculated from the data capacity regarding image not yet been uploaded. At Step f the TV determines whether or not the medium camera is in a state where the medium can automatically upload images. If the medium can automatically upload images then at Step g the TV activates the medium camera to upload images not yet been uploaded to the server via the first antenna or the second antenna by wireless communication or wired communication having contacts. When Step g is completed the processing proceeds to Step a of . At Step a the TV determines whether or not there is a billing program. If there is no billing program then at Step n the TV reads identifier regarding the image display method instruction information which is shown in . At Step b the TV determines whether or not the server has the image display method instruction information. If the server has image display method instruction information then at Step p the TV reads from the medium directory information regarding a directory in which image display method instruction information is stored on the server. At Step c the TV reads from the medium the directory information in which the image display method instruction information corresponding to UID or the like is stored. At step d the TV obtains the image display method instruction information from the server. Then the processing proceeds to Step f.

On the other hand if the determination is made at Step b that the server does not have the image display method instruction information then the processing proceeds to Step e. At Step e the TV obtains the image display method instruction information from the medium such as a camera . Then the processing proceeds to Step f.

At Step f the TV starts display of images based on the image display method instruction information. At Step g the TV reads an all image display identifier from the medium. At Step g the TV determines whether or not the all image display identifier indicates that all images are to be displayed. If all images are to be displayed the TV displays all images at Step r. On the other hand if all images are not to be displayed then at Step h the TV displays a part of images in a specific directory identified by the directory information that is read at Step s from the medium. At Step i the TV determines whether or not a list display identifier indicates that images to be displayed in a list. If the images are to be displayed in a list then the TV reads a display order identifier at Step t. At Step j the TV displays the images in a list in a date order or an upload order based on the display order identifier. At Step v the TV reads a slide show identifier from the medium. At Step k the TV determines whether or not the slide show identifier indicates that images are to be displayed as slide show. If the images are to be displayed as a slide show then at Step m the TV displays the images as slide show based on the display order identifier . Then the TV reads image quality prioritization from the second memory of the medium. At Step a of the TV determines whether or not the image quality prioritization indicates that the images are to be displayed by prioritizing image quality. If the images are not to be displayed by prioritizing image quality the TV reads speed prioritization from the medium at Step q and further determines at Step b whether or not the speed prioritization indicates that the images are to be displayed by prioritizing a speed. If a speed is to be prioritized then the TV determines at Step c whether or not the server stores display audio. At Step s the TV reads and checks display audio server directory from the medium. At Step d the TV accesses the directory in the server to obtain the display audio and outputs the audio.

At Step e the TV determines whether or not all images are to be displayed as priorities. If all images are not to be displayed as priorities then at Step f the TV selects a part of the images. At Steps g the TV reads specific directory information from the medium at Step v and receives images in the specific directory from the server at Step w. At Step h the TV displays the images in the specific directory. On the other hand if it is determined at Step e that all images are to be displayed as priorities then the TV may display all images at Step i. At Step j the TV determines whether or not the image display is completed. If the image display is completed then the TV displays a message view other image s at Step k. If the user agrees then the TV displays a menu of images in different directories at Step m.

At Step a of the TV determines whether or not images captured by a specific user are requested. If images captured by a specific user are requested then at Step b the TV requests the medium to provide a specific user all image information at Step m and b a specific user password that is a password of the specific user. At Step c the TV determines whether or not the password is correct. If the password is correct then at Step p the TV reads directory information of a directory of a file storing an image list from the medium. At Step d the TV accesses the server to access a directory having an image list of the specific user. At Step r the TV downloads image data in the directory from the server. At Step e the TV displays the images captured by the specific user.

At Step f the TV starts color correction routine. At Step g the TV reads camera model information from the camera ID . At Steps h and t the TV downloads characteristic information of the camera model from the server. Then at Steps i and u the TV downloads characteristic information of the TV from the server. At Step w the server calculates the characteristic information to generate modified information. At Step j the TV modifies color and brightness of the display unit based on the pieces of characteristic information of the medium camera and the TV. At Step k the TV displays the images with the modified color and brightness.

At Step a of the TV determines whether or not forced print instruction is selected. Here if forced print instruction is selected it is determined at Step b whether or not the terminal the TV in the above example to which the medium camera is moved closer is a printer or a terminal connected to the printer. If the terminal is a printer or a terminal connected to the printer then the terminal obtains at Step c camera model information of the medium camera and a model name of the printer for each image data. At Step d the terminal modifies each piece of information of the server to generate modified information. At Step p the terminal receives directory information of a directory in which the image data to be printed is stored. At e the terminal accesses the server by using an address of the directory having the image data to be printed or file name . At Step m the server sends the image data stored in the directory to the terminal. At Step f the TV receives the image data to be printed. At Step g the terminal prints the image data. At Step h the printing is completed. At Step i for each image data the terminal records onto the server an identifier indicating that one printing process is completed. At Step n the server assigns a print completion identifier to the image data that is stored in the server and has been printed.

Next the following describes the situation where the medium such as a camera or a post card does not have a memory for storing data.

Steps of follow the numbers and in circles in . At Step a of a main power of the TV is turned ON. At Step k the TV reads UID of the RF ID unit from the second memory. At Step b the TV obtains the UID. At Step m the TV reads the server specific information from the second memory. At Step c the TV accesses a server directory. At Step d the TV searches the server directories for a final server providing service corresponding to the UID. At Step e the TV determines whether or not such a final server exists. If there is such a final server then at Step g the TV accesses the final server and reads a user ID a password and a service name from a UID list. At Step h the TV determines whether or not a password is requested. If the password is requested then the TV determines at Step i whether or not the readout password is correct. At Step a of the TV determines whether or not the service is regarding photographs or video. If the service is regarding photographs or video then at Step b the TV reads i reads from a specific directory in the server associated with the UID a a corresponding program such as a billing program b a list including an address or a file name of image data to be displayed c image display instruction information d forced display instruction e forced print instruction and f camera ID and ii automatically displays the image data or causes the image data to be printed based on the above pieces of information and procedure.

If needed password entry is requested at Step b. At Step c the TV determines whether or not the user desires to print a specific image. If the user desires to print a specific image then at Step d the TV adds data of the specific image to the server associated with the UID or to a print directory of the TV. At Step e the TV determines whether or not the TV is connected to a printer and there is an independent printer. If so then at Step f the RF ID unit of the medium such as a post card is moved into proximity of a RF ID reader writer of the printer. At Step a of the printer i reads UID of the RF ID from the medium ii thereby reads image data to be printed or a location of the image data from the print directory on the server having the modified information and iii prints the image data. At Step b the printing is completed. Thereby the above processing is completed.

Step i of is the number in . At Step d the TV determines whether or not the service is for shopping. If the service is for shopping then the TV determines at Step e whether or not authentication is successful. If the authentication is successful then at Step f the TV reads from the server a shopping billing program associated with the UID and executes the program. At Step g the execution of the program is completed. Thereby the above processing is completed.

Next the following describes a method of reading information from a RF ID unit embedded in a postcard without a RF ID reader.

At Step a in a second RF ID unit on which URLs of relay servers are recorded is attached to or embedded in the medium such as a post card. On the outer surface of the second RF ID unit a UID of the second RF ID unit and b information for identifying a first URL of a certain relay server are printed to be displayed by a two dimensional barcode.

At Step b there is a camera capable of being connected to a main server. The camera has a first RF ID unit on which a first URL of the main server is recorded. An image capturing unit in the camera optically reads the two dimensional barcode and converts the readout information to information for identifying a the UID of a second RF ID unit in the post card and b a second URL of a relay server.

At Step d the camera selects a specific set of images from images captured by the camera and stores the set of images into a specific first directory in the main server. At the same time the camera uploads information of first directory first directory information as well as the first URL of the main server a specific second directory in the relay server having the second URL. The camera uploads information for associating the UID of the second RF ID unit with the second directory to the relay server having the second URL. At Step e the medium such as a post card is mailed to a specific person.

At Step f the person receiving the post card moves the RF ID unit of the post card into proximity of a RF ID reader of a TV or the like. Thereby the TV reads from the RF ID unit the second URL of the relay server and the UID of the post card.

At Step g the TV accesses the relay server having the second URL. Then the TV reads from the relay server a a program in the second directory associated with the UID and or b the first URL and the first directory information of the main server on which specific image data is recorded. The TV downloads the image data from the main server. The TV displays the image data on a screen. In the above case the image capturing unit in the image capturing device according to the first embodiment of the present invention reads information from the two dimensional bar code that is generally printed in a product or post card to record server information. Then the image capturing device records the information read from the two dimensional bar code as digital information onto the second memory of the RF ID unit. Thereby the image capturing device allows a RF ID reader of a TV to read the information. As a result even a TV without an optical sensor for two dimensional bar codes can indirectly read information of two dimensional bar codes and automatically access a server or the like.

When the image capturing device is moved into proximity of the antenna the TV displays a camera icon for notifying of that the medium is a camera in the manner described previously.

Next since the number for example five of images not yet been uploaded is detected the TV displays five blank images a b c d and e as if these images were taken out from the camera icon .

Thereby the TV displays tangible information of images by changing materials to information . As a result the user can perceive the information of images by more natural sense.

Regarding images that have been already uploaded to the server actual images a b and c are displayed as tangible data in the same manner as described above.

Next the following processing is described in detail. By the processing an operation program illustrated in is transmitted to the TV illustrated in that is an apparatus device communicating with the RF ID unit of the image capturing device . The communicating device TV executes the transmitted program.

The RF ID unit in the image capturing device has the second memory . The second memory holds the operation program . The operation program can be executed by the TV communicating with the RF ID unit. In more detail the operation program is an example of the program executed by the TV with reference to the identification information of the image capturing device . The operation program is for example an execution program such as Java program a virtual machine script program such as Javascript program or the like.

The reproducing unit in the RF ID unit reads necessary information and the operation program from the second memory . The necessary information is required to execute the operation program . The necessary information includes the UID unique to the image capturing device the server specific information including the URL of the server and the like. The necessary information and the operation program are transmitted to the RF ID reader writer in the remote controller via the data transfer unit and the second antenna . The remote controller remotely controls the TV .

The RF ID reader writer of the remote controller receives the necessary information and the operation program from the RF ID unit of the image capturing device and stores them into a RF ID storage unit .

A remote controller signal generation unit in the remote controller converts the necessary information and the operation program which are transmitted from the RF ID unit of the image capturing device and stored in the RF ID storage unit to remote controller signals. The remote controller signals such as infrared signals are widely used in communication for present remote controllers.

To the TV a remote controller signal transmission unit transmits the remote controller signals including the operation program which are generated by the remote controller signal generation unit .

A remote controller signal receiving unit in the TV receives the remote controller signals from the remote controller . A program execution unit such as a Java virtual machine retrieves the necessary information and the operation program in the RF ID unit of the image capturing device from the remote controller signals by using a decryption unit . Thereby the program execution unit executes the operation program.

When the remote controller is moved into proximity of the image capturing device the RF ID reader writer of the remote controller provides power to the RF ID unit in the image capturing device via RF ID communication. Thereby the UID unique to the image capturing device the URL of the image server image server URL and the operation program are read from the second memory S . The readout UID image server URL and operation program are transmitted to the remote controller via the data transfer unit and the second antenna S . Here as presented in the operation program includes server connection instruction download instruction slide show display instruction download completion time processing set instruction and download completion time instruction . The remote controller receives the UID the image server URL and the operation program from the image capturing device via the RF ID reader writer S . A determination is made as to whether or not receiving is completed S . If receiving is completed then the UID the image server URL and the operation program are stored in the RF ID storage unit S . Then the UID the image server URL and the operation program are converted to remote controller signals transmittable by infrared ray S . A determination is made as to whether or not the user performs a predetermined input operation by the remote controller to instruct to transmit the remote controller signals to the TV S . If the instruction is received by from user then the remote controller signal transmission unit transmits the remote controller signals including the image server URL and the operation program to the TV S . In other words serving as a common remote controller the remote controller serves also as a relay device that transfers the UID the image server URL and the operation program from the image capturing device to the TV by using the embedded RF ID reader writer .

Next the TV receives the remote controller signals from the remote controller S . The decryption unit in the TV retrieves decrypts the UID the image server URL and the operation program from the remote controller signals S . Then the program execution unit executes the operation program with reference to the image server URL S to S . More specifically by the operation program connection between the TV and the image server on a communication network is established with reference to the image server URL S and in . Then with reference to the UID unique to a corresponding image capturing unit image data captured by a specific image capturing unit is selected from the image data stored in the storage device of the image server and the selected image data is downloaded to the TV S and in . In other words the UID is used to select image data associated with the image capturing device indicated by the UID from among pieces of image data stored in the image server . A determination is made as to whether or not the image download is completed S . If the image download is completed the downloaded images are sequentially displayed as a slide show S and and in . The download completion time processing set instruction in is instruction for setting processing to be performed when image downloading is completed. In the example of the download completion time processing set instruction instructs the download completion time instruction as the processing to be performed when image downloading is completed. Moreover the download completion time instruction calls the slide show display instruction for performing a slide show of the images.

It should be noted that referring to it has been described that the operation program and the necessary information for the operation program are transferred from the image capturing device to the TV via the remote controller . However the RF ID reader writer of the remote controller may be provided to the TV . In other words the RF ID reader writer may be embedded in the TV . Furthermore the communication path connecting the reader RF ID reader writer to the apparatus may be a wireless communication path such as infrared communication path or a wired signal cable.

It should also be noted that in the above described execution example the UID is used to select image data associated with the image capturing device from among pieces of image data stored in the image server . However it is also possible to use the UID to identify the image server storing the image data. Here it is assumed that in a communication system including a plurality of image servers UID is associated with an image server storing image data captured by an image capturing device identified by the UID. Under the assumption if the operation program is created so that a URL of the image server can be identified with reference to the UID the TV executing the operation program can identify by using the UID the image server associated with the UID from the plurality of image servers and thereby download the image data from the identified image server.

It should also be noted that the identification information for identifying the image capturing device is not limited to UID. The identification information maybe any other information regarding the image capturing device such as a serial number a product serial number a Media Access Control MAC address or information equivalent to the MAC address for example an Internet Protocol IP address. Moreover if the image capturing device serves as an access point on a wireless LAN the identification information maybe a Service Set Identifier SSID or any information equivalent to SSID. It should also be noted that in the above described second memory the identification information UID unit for identifying the image capturing device has been described to be stored separately from the operation program . However the identification information may be stored described in the operation program .

It should also be noted that the remote controller signals in other words the communication path connecting the reader to the apparatus are described to employ infrared ray. However the remote controller signals are limited to the above but may employ a wireless communication method such as Bluetooth. The use of wireless communication that is generally speedier than infrared communication can shorten a time required to transfer an operation program and or the like.

It should be noted that the operation program is not limited to the program in the format presented in . The operation program may be described in any other programming language. For example the operation program described in Java can be easily executed by various apparatuses devices because the program execution circumstances called JavaVM have broad versatility. The operation program may be described in a compact programming language in a script format represented by Javascript so as to be stored in a small storage capacity. The operation program in such a compact programming language can be stored in the RF ID unit in the second memory even if the RF ID unit has a small storage capacity. Moreover the operation program may be in an executable format applied with processing such as compiling rather than a source code presented in . The program can reduce a processing load on apparatuses having program execution environments.

The following describes in detail the processing of changing execution of a program depending on information unique to a display device such as the TV having a RF ID reader with reference to .

The TV illustrated in further includes a language code holding unit . When the operation program received as remote controller signals is executed to connect the TV to the server the program execution unit reads a language code from the language code holding unit to connect the TV to the server compliant to the language code. Then the operation program is executed to download a server program from the server and executes the downloaded server program. For example if the language code indicates Japanese language the TV is connected to the server having a program storage unit in which a server program compliant to Japanese language is stored and then the server program is obtained from the program storage unit to be executed in the TV . More specifically the operation program stored in the RF ID unit of the image capturing device as illustrated in executes only connection to the server while other processing such as image display is executed by the server program downloaded from the server .

The steps in the above processing are described with reference to . The processing by which the TV receives the operation program and the necessary information for the operation program from the RF ID unit of the image capturing device is the same as the processing described previously with reference to . In it is assumed that the server specific information which the TV receives as remote controller signals includes two different server addresses which are a a sever address of a server compliant to English and a a server address of a different server compliant to Japanese. It is also assumed that the operation program which the TV receives as remote controller signals includes instruction for connecting the TV to a server indicated by the server connection instruction in .

In the execution environments the TV obtains a language code of the TV S . The TV determines whether or not the language code indicates Japanese language S . If the language code indicates Japanese language then the TV selects from the server specific information a sever address of a server having a program storage unit storing an operation program for processing compliant to Japanese S . On the other hand if the language code does not indicate Japanese language then the TV selects from the server specific information a server address of a server having a program storage unit storing an operation program for processing compliant to English S . Next the TV is connected to the server with reference to the selected server address S . The TV downloads a server program from the server S S . The TV executes the downloaded server program in the program execution environments for example a virtual machine of the TV S .

It should be noted that the use of the language code has been described in but the language code may be replaced by other information. Examples are a product serial number a serial number of the display device TV and the like each of which indicates a country where the display device is on the market or equipped.

The first embodiment of the present invention can solve the above problem. In the first embodiment of the present invention RF ID is used to perform authentication. In more detail an authentication program including a MAC address is recorded as an operation program in the second memory in the RF ID unit of the image capturing device . When the image capturing device is moved into proximity of the RF ID reader writer of the TV the image capturing device provides the authentication program to the TV . The authentication program includes not only the MAC address but also a cryptography key for authentication hereinafter authentication cryptography key and an authentication command When the TV recognizes that the information provided from the RF ID unit includes the authentication command the TV performs authentication processing. The communication unit in the RF ID unit cannot communicate with the TV until the image capturing device is physically located in proximity of the RF ID reader writer . Therefore it is extremely difficult to intercept the communication between the image capturing device and the TV which is performed in a house. In addition since the image capturing device is moved into proximity of the TV to exchange data it is possible to prevent that the image capturing device authenticates a wrong device apparatus such as the TV in a neighbor or a DVD recorder in the user s house.

The following is an example of an authentication method without using RF ID with reference to . A user inputs to the TV a MAC addresses of terminals to be authenticated such as the camera the image capturing device and the DVD recorder which the user intends to authenticate for communication and b authentication cryptography keys for the terminals. The TV receiving the inputs transmits an appropriate message called a challenge to a target terminal having the MAC address. When the image capturing device receives the challenge the image capturing device encrypts the challenge using the authentication cryptography key and returns the encrypted challenge to the TV that is a terminal from which the challenge has been provided. In receiving the encrypted challenge the TV decrypts the encrypted challenge using the authentication cryptography key . Thereby the TV can authenticate the authentication cryptography key to prevent user s error and intervention of other malicious users. Next the TV encrypts a cryptography key a for data hereinafter a data cryptography key a using the authentication cryptography key . Then the TV transmits the encrypted data cryptography key a to the image capturing device . Thereby it is possible to perform the encrypted data communication between the TV and the image capturing device . The TV performs the above described processing also with the DVD recorder and other apparatuses terminals and in order to share the data cryptography key a among them. Thereby the TV can perform encrypted communication with all terminals devices apparatuses or the like connected in the home network.

On the other hand illustrates an authentication method using RF ID. In the authentication method using RF ID the image capturing device camera generates an authentication program a. The camera provides the generated authentication program a from the RF ID unit in the camera to a RF ID unit in the TV . The authentication program a includes an authentication command a MAC address of the camera and an authentication cryptography key for the camera. When the TV receives the authentication program a with the authentication command the TV retrieves the MAC address and the authentication cryptography key from the RF ID unit . The TV encrypts a data cryptography key a using the retrieved authentication cryptography key and transmits the encrypted data cryptography key a to the retrieved MAC address. The transmission is performed by a wireless LAN device terminal . In the authentication method using RF ID the authentication is performed automatically without any user s input. Therefore there is no problem caused by user s input errors. In addition since the image capturing device camera needs to moved into proximity of the TV it is possible to prevent intervention of other malicious users. This authentication method using RF ID can eliminate pre processing such as the above described challenge. Moreover the action of physically moving the image capturing device camera into proximity of the TV enables the user to easily recognize which terminals the camera has authenticated. Furthermore if the authentication cryptography key is not included in the authentication program the authentication may be performed by a technique of general public key authentication. In addition the communication device medium is not limited to a wireless LAN but may be any medium such as PLC or Ethernet included in the home network. Moreover the MAC address may be any identification information for uniquely identifying a communication terminal in the home network.

Next the following situation is described in detail with reference to figures. Here the image capturing device described with reference to generates or updates a program executable by the TV . Then the image capturing device transmits the program to the TV via the data transmission unit . Thereby the TV executes the program.

The second memory reading unit reads information from the second memory via the recording reproducing unit . The URL generation unit reads the UID the server specific information the captured image state information and the image display method instruction information from the second memory via the second memory reading unit . From the above pieces of information the URL generation unit generates a URL that is an address of the server to which images have been uploaded from the image capturing device .

The UID is identification information for identifying the image capturing device . The UID is unique to each image capturing device . The URL generated by the URL generation unit includes UID. For instance the image server to which images are uploaded has an image file in a directory unique to each UID. Thereby a URL address can be generated for each image capturing device .

The server specific information is a server name for identifying the server to which the images are uploaded. Via a Domain Name Server DNS an IP address of the server is determined to connect the image capturing device to the server . Therefore the server specific information is included in the generated URL.

The image display method instruction information is information for enabling the user to optionally select the list display the slide show display or the like. The URL generation unit generates the URL based on the image display method instruction information . In other words since the generated URL includes information indicating the list display or the slide show display the image server the server can determine based on the URL whether the images are to be displayed as the list display or the slide show display.

As described above based on the UID the server specific information the captured image state information the image display method instruction information and the like which are stored in the second memory the URL generation unit generates a URL of the image server in which images to be watched are stored. Then the URL generation unit provides the generated URL to the program generation unit .

The program generation unit generates a program executable by the TV based on a the URI generated by the URL generation unit and b forced display instruction forced print instruction and format identification information stored in the second memory . It should be noted that the program generation unit can generate a new operation program based on the above described information which is a method of generating a new operation program. The program generation unit can also generate such a new operation program by updating an operation program that has been already generated.

The program generated by the program generation unit is executable by the TV . The program should be compiled into a machine language used in a system controller not shown of the TV so that the system controller can execute the program. In this case the program generation unit has a compiler to convert the generated program to a program in an executable format.

However the above described compiler is not necessary if the program in a text format script for example a general Java script is executed by a browser in the TV .

The URL provided to the program generation unit is used to connect the TV to the image server server in which images are stored. By using the URL the program generation unit generates or updates a connection program hereinafter referred to also as a server connection program or connection program for connecting the TV to the image server.

The forced display instruction is optional and used in the following situation. For example there is the situation where while the user watches on the TV a TV program provided by general broadcast waves the RF ID reader writer of the TV becomes communicable with the image capturing device via the second antenna . In the situation the forced display instruction is used to automatically set the TV into a browser watching mode so that image data provided from the image server is displayed on the TV . If this option is selected the program generation unit generates a program for forcing the TV to display image data.

The forced print instruction is optional and used in the following situation. For example there is the situation where while the user watches on the TV a TV program provided by general broadcast waves the RF ID reader writer of the TV becomes communicable with the image capturing device via the second antenna . In the situation the forced print instruction is used to automatically print image data stored in the image server by a printer not shown connected to the TV . If this option is selected the program generation unit generates a program for forcing the TV to print image data by the printer.

The format identification information is information of a format by which image data is to be displayed. When an option of language code optimization selection in the format identification information is selected the program generation unit generates a program for selecting a URL to be connected based on the language code set in the TV . The following is an example in the situation where the option of language code optimization selection in the format identification information is selected. If the language code of the TV indicates Japanese language the program generation unit selects a Japanese site as the URL to be connected. On the other hand if the language code of the TV does not indicate Japanese language the program generation unit selects an English site as the URL to be connected. Or the URL generation unit may generate two URLs for the Japanese site and the English site and provide the two URLs to the program generation unit .

The program part storage unit holds program command information used by the program generation unit to generate a program. A program part stored in the program part storage unit may be a general library or an Application Programming Interface API . In order to generate a connection command for connecting the TV to the server the program generation unit combines a server connection command Connect in the program part storage unit with the URL generated by the URL generation unit . Thereby the program generation unit generates or updates a connection program for connecting the TV to the server indicated by the URL.

The program writing unit is an interface used to write the program generated by the program generation unit to the second memory .

The program provided from the program writing unit is stored into a program storage unit in the second memory via the recording reproducing unit .

When the image capturing device is moved to bring the RF ID unit of the image capturing device into proximity of the RF ID reader writer connected to the TV the reproducing unit reads out the program from the program storage unit in the second memory . Then transmission signals indicating the program are transmitted to the RF ID reader writer via the data transfer unit and the second antenna . The TV receives the transmission signals via the RF ID reader writer . The TV executes the receives program.

The product serial number is a product serial number of the TV . From the product serial number it is possible to learn a manufacture date time a manufacture location a manufacturing line and a manufacturer of the TV .

The language code is predetermined in the TV to be used in displaying a menu for example. The language code is not limited to be predetermined but can be switched to another by the user.

The program execution virtual machine is a virtual machine that executes a received program. The program execution virtual machine may be implemented as hardware or software. For example the program execution virtual machine may be a Java virtual machine. The Java virtual machine is a stack or interpreter virtual machine that executes defined instruction sets. If the image capturing device has the virtual machine the program generated by the program generation unit in the image capturing device is compliant to any execution platforms. As a result the program generation unit can generate a program executable in any platforms.

Next based on the server specific information stored in the second memory the program generation unit generates a connection command for connecting the TV to the server by using the URL generated by the URL generation unit . In order to generate the connection command the program generation unit selects an instruction set for example Connect in for a server connection command from the program part storage unit and combines the selected instruction set with the URL. Thereby a server connection program for example Connect URL is generated.

Then the program generation unit examines the forced display instruction in the second memory so as to determine whether or not the forced display instruction is selected S . If the forced display instruction is selected then the program generation unit calls an instruction set for a forced display program from the program part storage unit and thereby generates a forced display command S . The generated forced display command is added to the program S .

On the other hand if the forced display instruction is not selected then the program generation unit does not generate the forced display command but proceeds to S.

Next the program generation unit makes a determination as to whether the forced print instruction in the second memory is selected S . If the forced print instruction is selected then the program generation unit generates a forced print command for forcing the TV to print by a printer an image file stored in the server S . The generated print command is added to the program S .

Then the program generation unit examines the image display method instruction information in the second memory so as to determine whether or not the list display is selected S . If the list display is selected then the program generation unit generates a list display command for causing the TV to display a list of the image file stored in the server S . The generated list display command is added to the program S .

After that the program generation unit examines the image display method instruction information in the second memory so as to determine whether or not the slide show is selected S . If the slide show is selected then the program generation unit generates a slide show command for causing the TV to display a slide show of the image file stored in the server S . The generated slide show command is added to the program S .

As described above based on the information set in the second memory the program generation unit in the image capturing device generates a program used to display images on the TV by using an instruction command set that is stored in the program part storage unit to generate the program.

It should be noted that in the first embodiment there are commands for the forced display instruction the forced print instruction the list display and the slide show display. However the commands programs are not limited to the above. For example if a command for the forced display instruction is to be generated as a program the program generation unit can also generate a determination command for determining whether or not the apparatus device executing the program has a display device or display function and adds the generated determination command to the program. Thereby the command for the forced display instruction is executed only if the apparatus executing the program has a display device or display function. As a result the determination command can prevent confusion in the apparatus executing the program. The same goes for a command for the forced print instruction. It is preferable that the program generation unit also generates a determination command for determining whether or not the apparatus executing the program has or is connected to a printing function and adds the generated determination command to the program. Thereby the command for the forced print instruction is executed only if the apparatus executing the program has or is connected to a printing function.

The following describes execution of the program generated or updated by the program generation unit in the image capturing device .

First the program is executed to read the language code set in the TV as unique information of the TV S . The language code is predetermined by the user to be used in displaying a menu and the like on the TV .

Next the program is executed to determine a language indicated in the language code. First a determination is made as to whether or not the language code indicates Japanese language S . If the determination is made that the language code indicates Japanese language then a connection command for a Japanese site is selected from the connection commands in the program S . On the other hand if the determination is made that the language code does not indicate Japanese language then a connection command for an English site is selected from the connection commands in the program S . It should be noted that it has been described in the first embodiment that a determination is made as to whether or not the language code indicates Japanese language and thereby a connection command is selected from the connection command for connecting to a Japanese site and the connection command for connecting to an English command. However it is also possible that the program includes a plurality of connection programs compliant to various language codes. Thereby the program can be compliant to two or more language codes. As a result usability is improved. Next according to the selected connection command the program is executed to connect the TV to the URL indicted in the connection command S .

Then a determination is made as to whether or not the connection to the URL indicted in the connection command is successful S . If the connection is failed then the display unit of the TV displays warning indicating the connection failure S . On the other hand if the connection is successful then a command for displaying a slide show of an image file stored in the server is executed to display the slide show S .

It should be noted that the above is the situation where the operation program is for displaying images as a slide show. However the operation program is not limited to the above. The program may be used for performing list display forced display or forced printing. If the operation program is for forced display a step command of automatically changing setting of the TV to setting of displaying an image file stored in the server is added to the program. Thereby the user does not need to change the setting of the TV by manual in order to display images provided from the image server. In the case of the forced printing a command for automatically changing setting of the TV to a printable mode is added to the program. Moreover in the case of each of the forced printing and forced display a determination command for determining whether or not the TV has a printing function or a displaying function is added to the program. Thereby the forced print command is not executed in an apparatus device without a printing function. Furthermore the operation program in the first embodiment of the present invention may be a connection program for leading other programs. For example the operation program may be a loader program such as a boot loader for loading other programs to be executed.

As described above the first embodiment of the present invention is characterized in that the program generation unit is included in the first processing unit of the image capturing device that is a device having RF ID communication means such as the data transfer unit and the second antenna . It is also characterized in that the program generated or updated by the program generation unit is executed by a different device apparatus except the image capturing device according to the first embodiment of the present invention that is a communication device having RF ID.

Conventionally a device having RF ID needs to transfer ID information tag information which the device has from a RF ID communication unit to another device for example the TV according to the first embodiment of the present invention . The device apparatus receiving the ID information should previously hold operation programs each unique to a corresponding device having RF ID. Therefore if new products having RF ID technology appear the receiving device needs to install an operation program corresponding to the new products and execute the program. Otherwise the receiving device is excluded as not being compliant to the new products. The installation of operation programs requires technical knowledge. Not everyone can perform the installation. Therefore if various new devices having RF ID are produced other devices such as the TV of the first embodiment of the present invention become obsolete. As a result property values of user s devices are damaged.

According to the disclosure of the first embodiment of the present invention the device having RF ID technology has the program generation unit and sends not ID information tag information but a program to another device apparatus such as the TV . The apparatus such as the TV receives and executes the program. Therefore the receiving apparatus does not need to previously have operation programs for various devices having RF ID. Even if a new device having RF ID technology appears the receiving apparatus does not need to install a new program for the device. Therefore usability is significantly improved.

Therefore the terminal such as a TV does not need to previously have application programs for respective items kinds or application systems of various objects having RF ID. Thereby the terminal such as a TV does not need to previously have a storage device either for holding various application programs. In addition maintenance such as version up of the programs in the terminal is not necessary.

The program generated by the program generation unit is useful if it is executable in any execution platforms such as a Java language. Therefore if the device apparatus such as the TV executing programs has a Java virtual machine programs generated by any devices apparatuses can be executed.

It should be noted that the program generation unit according to the first embodiment of the present invention may has a function of updating the program previously stored in the program storage unit of the second memory . The situation of updating a program produces the same advantages as that in the situation of generating a program. The generating or updating performed by the program generation unit may be generating or updating data used in executing a program by the TV . In general the program includes additional initialization setting data. The additional data is used to switch an execution mode or to set a flag. Therefore generating or updating of the additional data is equivalent to generating or updating of the program without deviating from the inventive concepts of the present invention. This is because for execution of a program it depends on design whether a parameter for mode switching or the like is to be hold and read as data or is to be included in the program to be executed. Therefore when the program generation unit according to the first embodiment of the present invention generates or updates a program the program generation unit can also generate data such a parameter sequence used by the program. The parameter is generated based on the forced display instruction the forced print instruction the image display method instruction information the format identification information or the like stored in the second memory .

The following describes characteristic structures and processing of the second memory and the first processing unit in the image capturing device that is a communication device having RF ID according to the first embodiment of the present invention. In the first embodiment of the present invention the image capturing device that is a communication device having RF ID has a use status detection unit in the first processing unit . The use status detection unit detects a trouble related to operation a power consumption status or the like. The image capturing device generates a program for displaying the result of the detection use status on the TV that is a device apparatus different from the image capturing device .

The second memory includes the UID the server specific information the camera ID and the program storage unit .

The UID is a serial number unique to the image capturing device and used to identify the single image capturing device .

The server specific information is information for identifying the server to which image data captured by the image capturing device is transmitted by the communication unit . The server specific information includes a sever address a storing directory a login account a login passwords and the like.

The camera ID includes a product serial number a manufacturing year month date a manufacturer a manufacturing line a manufactured location and the like of the image capturing device . The camera ID also includes camera model information for identifying a model of the image capturing device .

The first processing unit includes the second memory reading unit a use status detection unit the program generation unit the program part storage unit and the program writing unit .

The second memory reading unit reads information from the second memory via the recording reproducing unit . In the first embodiment of the present invention the second memory reading unit reads the UID the server specific information and the camera ID from the second memory and provides the pieces of information to the program generation unit . Reading of the pieces of information from the second memory is performed when a readout signal is provided from a use status detection unit that is described later.

The use status detection unit detects a use status of each unit included in the image capturing device . The use status detection unit includes sensors each detecting a trouble in operation of a corresponding unit included in the image capturing device . Results of the detection of the sensors in respective units are provided to the use status detection unit . The sensors for the respective units provide the use status detection unit with trouble information battery duration a power consumption amount and the like. For example the image capturing unit provides the use status detection unit with information indicating whether or not an image capturing operation of the image capturing unit has any trouble whether or not the image capturing unit functions correctly and whether or not the image capturing unit responds to a call from the use status detection unit . The video processing unit provides the use status detection unit with information indicating whether or not data processing for image data captured by the image capturing unit has any trouble whether or not the video processing unit functions correctly and whether or not the video processing unit responds to a call from the use status detection unit . The first power supply unit provides the use status detection unit with a voltage level of the battery and a total power consumption amount. The communication unit provides the use status detection unit with information indicating whether or not the communication unit is successfully connected to the server or the Internet whether or not the communication unit functions correctly and whether or not the communication unit responds to a call from the use status detection unit . The display unit a provides the use status detection unit with information indicating whether or not display processing has any trouble whether or not the display unit a correctly responds to a call from the use status detection unit and the display unit a functions correctly. Based on the above pieces of status information provided regarding the respective units the internal trouble detection unit in the use status detection unit determines whether or not each of the units has any trouble in its functional operation. If there is a trouble then the use status detection unit provides the program generation unit with information for specifying the trouble. The use status detection unit has a power consumption detection unit . The power consumption detection unit generates power consumption information based on the total power consumption information provided form the power supply unit and then provides the power consumption information to the program generation unit .

The program generation unit generates a program for displaying on the TV the information for specifying a trouble or the power consumption information which is provided from the use state detection unit . For generation of a program instruction sets to be included in the program are previously stored in the program part storage unit . Therefore the program generation unit generates a a display command display in for displaying a trouble or a power consumption amount and b a program for displaying information for specifying a location of the trouble and information for specifying the trouble in detail. It should be noted that the power consumption amount may be converted to a carbon dioxide emission amount and therefore a program may be generated to display the carbon dioxide emission amount.

The program generated by the program generation unit is stored in the program storage unit in the second memory via the program writing unit .

The program stored in the program storage unit in the second memory is transmitted to the RF ID reader writer of the TV via the data transfer unit and then the second antenna .

With the above described structure the program generation unit in the first processing unit generates a program for displaying on the TV trouble information or use status information detected by the use status detection unit regarding use of the image capturing device . The program is transmitted to the TV that displays the trouble information or the use status information of the image capturing device . Thereby the TV can present the trouble information or the use status information to the user without installing a plurality of programs compliant to various devices including the image capturing device .

In conventional systems each of devices such as an image capturing device a camcorder an electric toothbrush and a weight scale is provided with a simple display function such as a liquid crystal device so as to display the trouble information or the use status information on the corresponding display function. Therefore the display function has a low display capability for merely displaying the trouble information as a symbol sequence or an error code. When the trouble information is presented the user needs to read instruction manual to check what kind of trouble it is. Some users have lost instruction manual and therefore obtain more information from a website on the Internet.

In the system according to the first embodiment of the present invention however a program for displaying trouble information can be executed by the TV not by the image capturing device . The TV which displays the trouble information detected by each device such as the image capturing device has a display capability higher than that of the conventional systems. Therefore the system according to the first embodiment of the present invention can solve the above conventional problem.

The following describes in detail with reference to figures the situation where a program generated by the image capturing device described with reference to is executed by a plurality of apparatuses devices including the TV .

The TV includes the RF ID reader writer and a wireless communication device . The wireless communication device is for example a general infrared communication device currently used as many remote controllers of home appliances or a short range wireless communication device used for home appliances using radio waves such as Bluetooth and ZigBee.

The remote controller with display function includes a transmission unit a display unit an input unit a RF ID reader a memory and a program execution virtual machine . The transmission unit transmits signals to the wireless communication device of the TV . The display unit displays video. The input unit receives key inputs from a user. The RF ID reader communicates with the RF ID unit . The memory stores a program received by the RF ID reader . The program execution virtual machine is a virtual machine that executes the program received by the RF ID reader . For instance recent mobile phones are example of the remote controller with display function having an infrared communication function Bluetooth a RF ID reader a liquid crystal display a key input unit a Java virtual machine and the like. The display unit and the input unit may be a liquid crystal display and a plurality of character input buttons or may be integrated into a liquid crystal touch panel for example.

The remote controller without display function includes a transmission unit an input unit a RF ID reader and a memory . The transmission unit transmits signals to the wireless communication device of the TV . The input unit such as buttons receives key inputs from a user. The RF ID reader communicates with the RF ID unit . The memory temporarily stores data received by the RF ID reader .

The remote controller without display function is for example a general remote controller having a RF ID reader. Remote controllers are common accessory devices of TVs.

In the first embodiment of the present invention there are the following four possible situations from which the user selects a preferred one. In the first situation the program generated by the image capturing device is transmitted directly to the TV via the RF ID reader writer of the TV and executed by the TV . In the second situation the program generated by the image capturing device is transmitted indirectly to the TV via the remote controller without display function and executed by the TV . In the third situation the program generated by the image capturing device is transmitted indirectly to the TV via the remote controller with display function and executed by the TV . In the fourth situation the program generated by the image capturing device is transmitted to the remote controller with display function and executed by the remote controller with display function .

The first situation has been already described above in the first embodiment. Therefore the first situation is not described again below.

In the second situation a program generated by the image capturing device is executed by the TV via the remote controller without display function such as general TV remote controllers that does not have a graphical display device such as a liquid crystal panel.

When the user moves the image capturing device to bring the RF ID unit to the RF ID reader the RF ID reader reads the program generated by the image capturing device to store the program in the memory .

Then when the user presses the input unit the program held in the memory is transmitted from the transmission unit to the wireless communication device of the TV . The program execution virtual machine in the TV executes the program. If the wireless communication device is a directional infrared communication device the user presses the input unit facing the remote controller without display function to the TV . If the wireless communication device is a non directional short range wireless communication device such as devices using Bluetooth or ZigBee the program is transmitted to the TV that is previously paired with the remote controller without display function . In the case of the short range wireless communication device it is also possible that the program is automatically transmitted to the paired TV when the RF ID reader reads the program from the RF ID unit without user s pressing of the input unit .

The remote controller without display function may have a display unit such as a LED for notifying the user of that data read by the RF ID reader is stored in the memory . The LED is lit up to encourage the user to press the input unit when the program is read by the RF ID reader and stored in the memory . The LED is lit out when the transmission of the program to the TV is completed. Thereby it is possible to clearly notify the user of that the remote controller without display function holds the program. The LED may be an independent LED or integrated into the input unit .

In the second situation even if the user is far from the TV the program can be executed by the TV by using the remote controller without display function in the user s hand.

In the third and fourth situations if the remote controller with display function has a program execution virtual machine as high function mobile phones called smart phones do the user can select whether the program generated by the image capturing device is executed on the remote controller with display function or the program is transmitted to the TV to be executed on the TV .

When the user moves the image capturing device to bring the RF ID unit to the RF ID reader the RF ID reader reads the program generated by the image capturing device to store the program in the memory .

The following describes the processing performed by the remote controller with display function in more detail with reference to a flowchart of .

First a program read by the RF ID reader is transmitted to the program execution virtual machine and executed by the program execution virtual machine S .

Next a determination is made as to whether or not the remote controller has a display function S . If the remote controller does not have any display function N at S then the program is transmitted to the TV via the transmission unit and then the processing is completed. In this situation the program is executed by the TV .

If the remote controller has a display function Y at S then a further determination is made as to whether or not the remote controller is paired with the TV that is a transmission destination S . If the remote controller is not paired with the TV N at S then a rest processing of the program is executed by the display unit of the remote controller . On the other hand if the remote controller is paired with the TV Y at S then the display unit displays a dialog message Display on TV or on Remote Controller to encourage the user to select one of the options S .

Then the remote controller receives user s entry by the input unit S . A determination is made as to whether or the user selects to display data on the TV S . If the user selects the TV to display data Y at S then the program is transmitted to the TV via the transmission unit and thereby the processing is completed. In this situation the program is executed by the TV . On the other hand if the user selects the remote controller to display data N at S then a rest processing of the program is executed by the remote controller using the display unit S .

It should be noted that the rest processing of the program refers to displaying of a status of a battery a trouble status or an instruction manual regarding the image capturing device but of course not limited to those described in the first embodiment.

With the above structure a program generated by the image capturing device is transmitted to the remote controller with display function then a capability of the remote controller with display function is examined and a determination is made by the remote controller as to which apparatus device is to execute rest processing of the program. Thereby the remote controller does not need to previously install various programs compliant to a plurality of apparatuses. The user can execute the program in his her preferred manner.

It should be noted that it has been described in the first embodiment that the determination is made based on whether or not the remote controller has a display function and based on a pairing status of the remote controller. However it is not limited to the above. A program may execute any determination based on a capability of the apparatus such as a communication capability an audio video reproduction capability a capability of an input unit a capability of an output device and the like.

As described above the storage region of the RF ID unit holds not only information but also a program describing operations of an apparatus device . This considerably simplify changing or updating of a program which has been necessary for conventional techniques to change operations of apparatuses. In addition it is possible to deal with addition of various new functions and an increase of cooperative apparatuses. Moreover proximity communication using RF ID technology is a simple operation achieved by simply bringing a device into proximity of an apparatus which the user can easily understand. Therefore conventional bothersome device operations by using buttons and a menu are simplified. As a result the complicated device operations are changed to be convenient.

The following describes the second embodiment of the present invention. In the second embodiment actual operations of the communication system are described. In the communication system images captured by a camera are uploaded to a server and then downloaded by a simple operation to a TV to be displayed. The whole configuration of the communication system according to the second embodiment is the same as that of the communication system according to the first embodiment.

The second memory updating process of Step S enables the server and the camera to share identification information for distinguishing photographs that have already been uploaded to the server from photographs that have not yet been uploaded to the server . Examples of the uploading process at Step S are given as following cases to .

In case the final capturing time final capturing date time is previously stored in the second memory and then updated after the captured images are stored into the third memory Step S .

Comparison of a time of uploading the captured images to the final capturing time of the camera allows the server and the camera to share identification information of the uploaded photographs.

In case the above advantages can be produced also by generating existence identifiers of images not yet been uploaded to the server with reference to images uploaded to the server among the captured images and storing the generated existence identifiers into the second memory Step S .

In case it is also possible that the not yet uploaded image information hashed information is stored in the second memory Step S . Thereby an amount of the information stored in the second memory is reduced thereby saving a capacity of the second memory.

In case it is further possible that image serial numbers are chronologically generated for captured images and thereby the final image serial number in the second memory is updated Step S . Thereby even if a time counted by the camera is not correct it is possible to synchronize information of uploaded photographs between the server and the camera.

The cases to in correspond to the above described cases to of the second memory updating process in respectively.

In case the camera receives from the server a final upload time final upload date time that is a time of finally uploading to the server Step S . Then the camera compares the final upload time to the final capturing time Step S . If the final capturing time is later than the final upload time in other words if there is any image captured after final uploading then the camera uploads to the server any images captured after the final upload time Step S .

In case the camera checks not yet uploaded image data existence identifiers in the second memory Step S . Thereby the camera determines whether or not there is any image not yet been uploaded Step S . If there is any image not yet been uploaded then the camera uploads images not yet been uploaded to the server Step S . Then the camera updates the uploaded image information in the second memory Step S .

In case the camera checks the not yet uploaded image information hashed information in the second memory Step S . Thereby the camera determines whether or not the not yet uploaded image information hashed information in the second memory is the same as hashed information that is generated by hashing NULL Step S . If the not yet uploaded image information hashed information is not the same as the hashed information regarding NULL then the camera determines that there is an image not yet been uploaded to the server and therefore uploads to the server any images that are stored in the third memory but have not yet been uploaded to the server Step S .

In case the camera receives from the server an image serial number of a finally uploaded image Step S . Then the camera determines whether or not the image serial number matches the final image serial number in the second memory Step S . If the image serial number does not match the final image serial number then the camera uploads any images having UIDs that are newer than UID of the final image serial number that is received from the server Step S .

First the second antenna embedded in the image capturing device receives weak radio power from polling of the RF ID reader writer of the TV and thereby activates the RF ID unit operated under the second power supply unit S .

The RF ID unit of the image capturing device which is activated by receiving weak power at Step S responds to the polling of the RF ID reader writer of the TV Step S .

After responding to the polling at Step S mutual authentication is performed to determine whether or not the RF ID unit of the image capturing device and the RF ID reader writer of the TV are legitimate devices and also to share a cryptography key used for secure information communication between the image capturing device and the TV Step S . The mutual authentication employs a public key cryptography algorism such as elliptic curve cryptography. In general the employed method for the mutual authentication is the same as that of mutual authentication used in communication via High Definition Multimedia Interface HDMI or IEEE1394.

As described earlier at Step S the mutual authentication is performed between the RF ID unit of the image capturing device and the RF ID reader writer of the TV to generate a common cryptography key. After that the server URL generation information is read from the server specific information stored in the second memory readable from the RF ID unit . The server URL generation information is transmitted to the RF ID reader writer of the TV via the second antenna Step S . The server URL generation information includes the server address information indicating address information of the server the user identification information that is the login ID to the server and the password that is a login password to the server . The password is important information for preventing unauthorized acts of a malicious third person. Therefore the password is sometimes encrypted beforehand as the encrypted password to be stored and then transmitted to the TV .

After the server URL generation information is transmitted to the RF ID reader writer of the TV at Step S the captured image state information stored in the second memory is also transmitted to the RF ID reader writer of the TV via the second antenna Step S . The captured image state information is the final capturing time case the existence identifiers which are existence identification information regarding images not yet been uploaded and each of which is assigned to a corresponding one of the captured images so that it is possible to determine whether the image has not yet been uploaded case the not yet uploaded image information hashed information case or the final image serial number from among image serial numbers chronologically assigned to captured images case . The captured image state information is important for examining synchronization between captured images in the image capturing device and captured images in the server .

In case the final capturing time is used as the captured image state information . Therefore the TV compares the final capturing time to the final upload time. If the final capturing time is temporally later than the final upload time that is a time of finally uploading to the server then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

In case the captured image state information is the existence identifiers each of which is assigned to a corresponding one of the captured images so that it is possible to determine whether the image has not yet been uploaded. Therefore the TV examines the existence identifiers to determine whether or not there is any image not yet been uploaded. If there is any image not yet been uploaded then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

In case the not yet uploaded image information hashed information is employed as the captured image state information . Therefore the TV examines the not yet uploaded image information hashed information to determine whether or not there is any image not yet been uploaded. If there is any image not yet been uploaded then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

In case the captured image state information is the final image serial number from among image serial numbers chronologically assigned to the captured images. Therefore the TV compares a the final image serial number from among image serial numbers chronologically assigned to the captured images to b an image serial number of an image finally uploaded to the server . Here the final image serial number is provided from the image capturing device while the image serial number is provided from the server . Based on the comparison the TV can determine whether or not there is any image not yet been uploaded. If there is any image not yet been uploaded then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

After transmitting the captured image state information from the second antenna of the image capturing device to the RF ID reader writer of the TV at Step S the image display method instruction information is also transmitted from the second memory of the image capturing device to the RF ID reader writer of the TV via the second antenna Step S . The image display method instruction information is identification information indicating how the display unit of the TV is to display the images downloaded from the server . The image display method instruction information includes the list display indicator indicating that the images are to be displayed in a list and the slide show indicator indicating that the images are to be displayed as a slide show.

As described above at Steps S to S the image capturing device transmits the server URL generation information the captured image state information and the image display method instruction information which are stored in the second memory of the image capturing device from the second antenna of the image capturing device to the RF ID reader writer of the TV . Here it is desirable to encrypt all of the above pieces of information to be transmitted by using the cryptography key information shared between the image capturing device and the TV at the mutual authentication. The encryption achieves secure information communication between the image capturing device and the TV . As a result intervention of a malicious third person can be prevented.

Since the server URL generation information is transmitted to the TV the server and directory to which the first antenna of the image capturing device transmits data is the same as the server and directory from which the TV downloads the data. Therefore the TV can display the images that have been captured by the image capturing device and then uploaded to the server .

In addition the transmission of the captured image state information to the TV makes it possible to examine synchronization between the captured images stored in the third memory of the image capturing device and the images uploaded from the first antenna to the server . Therefore the TV can detect a failure of the synchronization. The display of the warning information indicating the synchronization failure on the TV can prevent unnecessary confusion of the user.

Moreover the transmission of the image display method instruction information to the TV enables the user to view images by a set image viewing method without designating the image viewing method on the TV . The user merely needs to move the image capturing device into proximity of the TV . The complicated operations using a remote controller or the like of the TV are not necessary. The images can be automatically displayed by the set viewing method.

The TV according to the second embodiment includes the RF ID reader writer the decryption unit a URL generation unit a communication unit a transmission unit a communication interface a receiving unit a data processing unit a memory unit a display unit and a CPU .

The RF ID reader writer communicates with the RF ID unit of the image capturing device via the second antenna . The RF ID reader writer includes a wireless antenna a receiving unit and a communicable device search unit polling unit .

The wireless antenna performs proximity wireless communication with the second antenna of the image capturing device . The wireless antenna has the same structure as that of wireless antennas of general purpose RF ID reader writers.

The communicable device search unit polling unit performs polling to check a RF ID unit of each of plural cameras in order to examine whether to have any transmission request or processing request . If the communicable device search unit receives a response of the polling from the RF ID unit of the image capturing device the corresponding camera then the mutual authentication is performed to share a common cryptography key between the TV and the image capturing device .

When the mutual authentication is completed after receiving the polling response the receiving unit receives the server URL generation information the captured image state information and the image display method instruction information from the second memory via the second antenna of the image capturing device .

The decryption unit decrypts the server URL generation information the captured image state information and the image display method instruction information which are received by the receiving unit . The decryption of the server URL generation information the captured image state information and the image display method instruction information which have been encrypted is performed using the cryptography key shared between the image capturing device and the TV after the mutual authentication by the communicable device search unit polling unit .

The URL generation unit generates based on the server URL generation information a URL to access the server and then transmits the generated URL to the communication unit. The URL includes not only the server specific information but also the login ID and the password used to login to the server.

The communication unit communicates with the server via a general purpose network using the communication interface .

The transmission unit transmits the URL generated by the URL generation unit via the communication interface in order to connect the TV to the server .

The communication interface is a communication interface for connecting the TV to the server via a general purpose network. The communication interface is for example a wired wireless LAN interface.

The receiving unit receives downloads image data and an image display cascading style sheet CSS from the server connected by the communication interface .

The data processing unit performs data processing for the image data downloaded by the receiving unit . If the image data to be downloaded is compressed data the data processing unit de compresses the image data. If the image data is encrypted the data processing unit decrypts the image data. In addition the data processing unit can arrange the downloaded image data by an image display style based on the image display CSS. If it is determined based on the captured image state information obtained if necessary by decryption of the decryption unit that the image data in the image capturing device is not in synchronization with the image data in the server then the data processing unit causes the display unit to display warning information regarding the synchronization failure. Thereby unnecessary confusion of the user can be prevented. Moreover the data processing unit sets a mode of displaying the downloaded image data according to the image display method instruction information provided from the decryption unit . For example if the list display flag in the image display method instruction information is ON then the data processing unit generates a list of the downloaded images and provides the list to the memory unit . If the slide show flag in the image display method instruction information is ON then the data processing unit generates a slide show of the downloaded images and provides the slide show to the memory unit .

The memory unit is a memory that temporarily holds the image data processed by the data processing unit .

The display unit displays the image data stored in the memory unit . The image data has been downloaded from the server and applied with data processing by the data processing unit as described earlier.

As descried above based on the server URL generation information the captured image state information and the image display method instruction information which are received from the RF ID unit of the image capturing device the TV according to the second embodiment of the present invention can be connected to the server then download the uploaded image data from the server and display the downloaded image data on the display unit . Thereby the user does not need to do complicated processes of removing the third memory such as a Secure Digital SD card or a flash memory from the image capturing device and equipping the third memory to a card reader of the TV in order to view captured images. In the second embodiment of the present invention the user can display and view captured image data by simple operations of simply presenting the RF ID unit of the image capturing device to the RF ID reader writer of the TV for proximity communication. The second embodiment of the present invention can provide a captured image viewing system by which even users who are not familiar with operations of digital devices can easily view image data.

First the communicable device search unit in the RF ID reader writer of the TV transmits a polling signal to search for the RF ID unit of the communicable image capturing device Step S .

When the image capturing device receives the polling signal from the communicable device search unit in the RF ID reader writer of the TV the second power supply unit is supplied with power to activate operate the RF ID unit Step S . Here at least the RF ID unit which can be operated under the second power supply unit is activated. It is not necessary to activate all functions in the image capturing device .

When the activation of the RF ID unit of the image capturing device is completed at Step S the image capturing device transmits a polling response for the polling to the RF ID reader writer of the TV via the second antenna Step S .

After the image capturing device responds to the polling at Step S the TV receives the polling response by the wireless antenna of the RF ID reader writer Step S .

After receiving the polling response at Step S the TV determines whether or not the image capturing device transmitting the polling response is a device mutually communicable with the TV Step S . If the determination is made that the image capturing device cannot mutually communicate with the TV then the processing is completed. On the other hand if the determination is made that the image capturing device is mutually communicable with the TV then the processing proceeds to Step S.

If the determination is made that the image capturing device is mutually communicable with the TV at Step S then the TV performs mutual authentication to determine whether or not the image capturing device and the TV are legitimate devices for communication Step S . The mutual authentication is the same as general mutual authentication using HDMI or IEEE1394. In the mutual authentication issuing of challenge data and checking of response data are performed plural times between the TV and the image capturing device to eventually generate a common cryptography key. If one of the TV and the image capturing device is not legitimate the common cryptography key is not generated thereby disabling future mutual communication.

The image capturing device also performs the same mutual authentication in the RF ID unit . Generation and transmission of challenge data and receiving and checking of response data are performed plural times between the TV and the image capturing device to eventually generate a cryptography key identical to the cryptography key generated by the TV Step S .

When the mutual authentication is completed at Step S the image capturing device reads the server URL generation information as the server specific information from the second memory then encrypts the server URL generation information using the common cryptography key generated at the mutual authentication and transmits the encrypted server URL generation information to the RF ID reader writer of the TV Step S .

The TV receives the encrypted server URL generation information transmitted at Step S by the receiving unit in the RF ID reader writer . Then the decryption unit decrypts the encrypted server URL generation information using the common cryptography key. Based on the server URL generation information the URL generation unit generates a URL to access the server . Then the TV transmits to the image capturing device a notification of completion of receiving the server URL generation information Step S .

After the notification of the receiving completion is transmitted at Step S the image capturing device receives the notification by the second antenna . Then the image capturing device reads the captured image state information from the second memory to transmit the captured image state information to the TV Step S . The captured image state information is the final capturing time case the existence identifiers which are existence identification information regarding images not yet been uploaded and each of which is assigned to a corresponding one of the captured images so that it is possible to determine whether the image has not yet been uploaded case the not yet uploaded image information hashed information case or the final image serial number from among image serial numbers chronologically assigned to captured images case . The captured image state information is important for examining synchronization between captured images in the image capturing device and captured images in the server .

After the image capturing device transmits the captured image state information at Step S the TV receives the captured image state information by the RF ID reader writer and then transmits to the image capturing device a notification of completion of receiving the captured image state information Step S . Here the CPU in the TV performs the following processing depending on kinds of the received captured image state information .

In case the final capturing time is used as the captured image state information . Therefore the TV compares the final capturing time to the final upload time that is a time of finally uploading to the server . If the final capturing time is temporally later than the final upload time then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

In case the captured image state information is the existence identifiers each of which is assigned to a corresponding one of the captured images so that it is possible to determine whether the image has not yet been uploaded. Therefore the TV examines the existence identifiers to determine whether or not there is any image not yet been uploaded. If there is any image not yet been uploaded then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

In case the not yet uploaded image information hashed information is employed as the captured image state information . Therefore the TV examines the not yet uploaded image information hashed information to determine whether or not there is any image not yet been uploaded. If there is any image not yet been uploaded then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

In case the captured image state information is the final image serial number from among image serial numbers chronologically assigned to the captured images. Therefore the TV compares a the final image serial number from among image serial numbers chronologically assigned to the captured images to b an image serial number of an image finally uploaded to the server . Here the final image serial number is provided from the image capturing device while the image serial number is provided from the server . Based on the comparison the TV can determine whether or not there is any image not yet been uploaded. If there is any image not yet been uploaded then it is determined that the image data in the image capturing device is not in synchronization with the image data in the server . Therefore warning information regarding the synchronization failure is displayed on the display unit of the TV .

After the TV completes receiving of the captured image state information and transmits the notification of the receipt to the image capturing device at Step S the image capturing device reads the image display method instruction information from the second memory and transmits the image display method instruction information to the TV Step S . The image display method instruction information includes the list display flag and the slide show flag .

After the image display method instruction information is transmitted at Step S the TV receives the image display method instruction information by the RF ID reader writer of the TV and transmits a notification of completion of receiving the image display method instruction information to the image capturing device Step S . The data processing unit of the TV generates a mode of displaying images downloaded from the server based on the received image display method instruction information . For example if the list display flag in the image display method instruction information is ON the data processing unit generates a list of the downloaded images and stores the generated list in the memory unit and causes the display unit to display the list. On the other hand if the slide show flag in the image display method instruction information is ON the data processing unit generates a slide show of the downloaded images and stores the generated slide show in the memory unit and causes the display unit to display the slide show.

After receiving the image display method instruction information at Step S the TV disconnects communication from the RF ID unit of the image capturing device Step S .

Next the TV activates a TV system Step S . The activation of the TV system refers to turning the main power of the TV ON to display the downloaded image data on the display unit . Prior to the activation of the TV system at Step S at least the RF ID reader writer of the TV is activated and the display unit may be turned OFF.

Then the communication unit is activated to connect the TV to the server based on the URL generated by the URL generation unit Step S .

After connecting to the server at Step S the TV downloads uploaded image data from the server Step S .

The data processing unit generates to be displayed image data from the images downloaded at the Step S based on the image display method instruction information obtained from the camera the image capturing device then stores the generated image data into the memory unit and displays the image data on the display unit Step S . The data processing unit of the TV generates a mode of displaying the images image data downloaded from the server based on the received image display method instruction information . For example if the list display flag in the image display method instruction information is ON the data processing unit generates a list of the downloaded images and stores the generated list in the memory unit and causes the display unit to display the list. On the other hand if the slide show flag in the image display method instruction information is ON the data processing unit generates a slide show of the downloaded images and stores the generated slide show in the memory unit and causes the display unit to display the slide show.

After displaying of the images downloaded from the server is completed at Step S the TV performs synchronization examination to determine whether or not the captured images recorded in the third memory of the image capturing device are in synchronization with the images downloaded from the server Step S . The synchronization examination is performed based on the captured image state information provided at Step S from the image capturing device . The captured image state information is the final capturing time case the existence identifiers which are existence identification information regarding images not yet been uploaded and each of which is assigned to a corresponding one of the captured images so that it is possible to determine whether the image has not yet been uploaded case the not yet uploaded image information hashed information case or the final image serial number from among image serial numbers chronologically assigned to captured images case . The captured image state information is important for examining synchronization between captured images in the image capturing device and captured images in the server .

 a in is a flowchart of case where the captured image state information is the final capturing time .

First the communication unit of the receives from the server date time of finally uploading to the server hereinafter referred to also as a final upload date time that may be date time of capturing a final image among uploaded images to produce the same advantages Step S .

Next the TV compares the final upload date time to a final capturing date time Step S . The final capturing date time which is date time of final capturing of the image capturing device is indicated in the captured image state information provided from the image capturing device to the RF ID reader writer . If the final upload date time is prior to the final capturing date time it is determined that there is an image captured after the final upload and not yet been uploaded to the server . Therefore a determination is made that the images in the image capturing device are not in synchronization with the images in the server . Then warning information is displayed at Step S. On the other hand if the final upload date time is equal to the final capturing date time it is determined that the images in the image capturing device are in synchronization with the images in the server . Then the synchronization examination is completed without displaying warning information.

If it is determined at Step S that the images in the image capturing device are not in synchronization with the images in the server the display unit displays warning information indicating the synchronization failure. Here if time information is generated by comparing the final upload date time to the final capturing date time in order to indicate from when captured images are not uploaded and the generated time information is presented as a message together with the warning information the warning information is convenient for the user.

 b in is a flowchart of case where the captured image state information is the existence identifiers each of which is assigned to a corresponding one of the captured images so that it is possible to determine whether the image has not yet been uploaded.

First it is determined based on the existence identifiers of the not yet uploaded image existence identification information whether or not there is any image not yet been uploaded to the server from among the captured images stored in the third memory of the image capturing device Step S . Here the existence identifiers are indicated in the captured image state information provided from the image capturing device to the RF ID reader writer . If it is determined that there is an image not yet been uploaded to the server at Step S then the processing proceed to Step S to display warning information. On the other hand if there is not image not yet been uploaded it is determined that the images in the image capturing device are in synchronization with the images in the server . Then the synchronization examination is completed without displaying warning information.

If it is determined that the images in the image capturing device are not in synchronization with the images in the server the display unit displays warning information indicating the synchronization failure at Step S.

 c in is a flowchart of case where the captured image state information is the not yet uploaded image information hashed information .

First it is determined based on the not yet uploaded image information hashed information whether or not there is any image not yet been uploaded to the server from among the captured images stored in the third memory of the image capturing device Step S . Here the not yet uploaded image information hashed information is indicated in the captured image state information provided from the image capturing device to the RF ID reader writer . The determination of Step S is performed by comparing the not yet uploaded image information hashed information to a hashed value generated by hashing NULL generated in the TV . If it is determined that there is an image not yet been uploaded at Step S then the processing proceed to Step S to display warning information. On the other hand if there is no image not yet been uploaded it is determined that the images in the image capturing device are in synchronization with the images in the server . Then the synchronization examination is completed without displaying warning information.

If it is determined that the images in the image capturing device are not in synchronization with the images in the server the display unit displays warning information indicating the synchronization failure at Step S.

 d in is a flowchart of case where the captured image state information is a final image serial number from among image serial numbers assigned to captured images.

First the communication unit of the TV receives from the server an image serial number of an image finally uploaded to the server Step S .

Next the TV compares a the image serial number of the image finally uploaded which is provided form the server to b a final image serial number of an image finally captured which is indicated in the captured image state information provided from the image capturing device by the RF ID reader writer Step S . If the mage serial number of the image finally uploaded is smaller than the mage serial number of the image finally captured it is determined that there is an image captured after the final upload and not yet been uploaded to the server . Therefore a determination is made that the images in the image capturing device are not in synchronization with the images in the server . Then the processing proceeds to Step S to display warning information. On the other hand if the mage serial number of the image finally uploaded is identical to the mage serial number of the image finally captured it is determined that the images in the image capturing device are in synchronization with the images in the server . Then the synchronization examination is completed without displaying warning information.

If it is determined at Step S that the images in the image capturing device are not in synchronization with the images in the server the display unit displays warning information indicating the synchronization failure.

When all of images captured by the image capturing device are not uploaded to the serve in other words when images captured by the image capturing device are not in synchronization with images uploaded to the server any of above cases to makes it possible to detect the synchronization failure. Thereby although all of the captured images cannot be displayed on the display unit a convenient message can be displayed to the user to inform the synchronization failure. As a result unnecessary confusion of the user can be prevented.

First 1 a data format in uploading captured images from the image capturing device to the server is described. The data format includes camera ID a sever address a server login ID a server login password an image directory and an uploading image number .

The camera ID is camera UID uniquely assigned to each camera image capturing device . The camera ID is ID information recorded in the camera ID in the second memory of the image capturing device . Use of the camera ID as login ID to the server can provide a server address unique to each image capturing device so that the image capturing device can access the server without user s entry of login ID. In addition the camera ID enables the server to manage captured images for each capturing camera.

The sever address is included in the server address information in the server specific information stored in the second memory of the image capturing device . The sever address enables the TV to identify the server to which target image data is uploaded.

The server login ID is included in the login ID in the user identification information in the server specific information stored in the second memory of the image capturing device . The server login ID allows the TV to login by using the same account to the server to which the image capturing device uploads image data.

The server login password is included in the password in the server specific information stored in the second memory of the image capturing device . The server login password allows the TV to login by using the same account to the server to which the image capturing device uploads image data.

The uploading image number is the number of images to be uploaded to the server. The uploading image number is equal to the number of images which is stored as the not yet uploaded image number in the second memory of the image capturing device . After capturing images the number of images not yet been uploaded is indicated in the uploading image number .

After transmitting the data format the image capturing device uploads to the server the images that are stored in the third memory of the image capturing device but not yet been uploaded to the server .

Next 2 a data format used in RF ID communication between the image capturing device and the TV is described. The data format includes camera ID a sever address a server login ID a server login password a final capturing date time final capturing time and not yet uploaded image data existence identifiers not yet uploaded image information hashed information a final image serial number and image display method instruction information .

The camera ID is a camera UID uniquely assigned to each camera image capturing device . The camera ID is ID information recorded in the camera ID in the second memory of the image capturing device . Use of the camera ID as login ID to the server from the TV can provide a server address unique to each image capturing device so that the TV can access the server without user s entry of login ID. The camera ID may be used in the mutual authentication between the RF ID unit of the image capturing device and the RF ID reader writer of the TV .

The sever address is included in the server address information in the server specific information stored in the second memory of the image capturing device . The sever address enables the TV to identify the server to which target image data is uploaded.

The server login ID is included in the login ID in the user identification information in the server specific information stored in the second memory of the image capturing device . The server login ID allows the TV to login by using the same account to the server to which the image capturing device uploads image data.

The server login password is included in the password in the server specific information stored in the second memory of the image capturing device . The server login password allows the TV to login by using the same account to the server to which the image capturing device uploads image data.

The final capturing date time corresponds to the final capturing time in the captured image state information stored in the second memory of the image capturing device . The TV uses the final capturing date time for the synchronization examination between captured images in the image capturing device and captured images in the server .

The not yet uploaded image data existence identifiers correspond to the not yet uploaded image data existence identification information in the captured image state information stored in the second memory of the image capturing device . TV uses the not yet uploaded image data existence identifiers for the synchronization examination between captured images in the image capturing device and captured images in the server . In order to implement each of the not yet uploaded image data existence identifiers each image ID for identifying a corresponding one of captured images is assigned with an upload flag indicating whether or not the corresponding image has been uploaded to the server . Thereby it is possible to determine whether or not each of the captured images has been uploaded to the server .

The not yet uploaded image information hashed information corresponds to the not yet uploaded image information hashed information in the captured image state information stored in the second memory of the image capturing device . The TV uses the not yet uploaded image information hashed information for the synchronization examination between captured images in the image capturing device and captured images in the server .

The final image serial number corresponds to the final image serial number in the captured image state information stored in the second memory of the image capturing device . The TV uses the final image serial number for the synchronization examination between captured images in the image capturing device and captured images in the server .

The image display method instruction information corresponds to the image display method instruction information in the captured image state information stored in the second memory of the image capturing device . The image display method instruction information includes identification information by which the TV designates a method of viewing images downloaded from the server .

For each image ID the image display method instruction information includes a list display flag a slide show flag a print flag a video reproduction flag a download flag and a security password .

The image ID is information unique to a captured image. The pieces of image ID are chronologically assigned to captured images by the image capturing device in capturing the images.

The list display flag corresponds to the list display flag stored in the second memory of the image capturing device . The TV uses the list display flag to determine whether or not image data downloaded from the server is to be displayed in a list format. If the list display flag indicates yes the data processing unit of the TV generates a list of the downloaded images stores the list to the memory unit and then displays the list on the display unit .

The slide show flag corresponds to the slide show flag stored in the second memory of the image capturing device . The TV uses the slide show flag to determine whether or not image data downloaded from the server is to be displayed as a slide show. If the slide show flag indicates automatic the data processing unit of the TV generates a slide show of the downloaded images stores the slide show to the memory unit and then displays the slide show on the display unit . If the slide show flag indicates manual the TV permits execution of the slide show according to instructions from the user. If the slide show flag indicates disable the TV inhibits display of the slide show.

The print flag indicates whether or not images to be downloaded to the TV and then displayed on the display unit are permitted to be printed by a printer not shown connected to the TV . The print flag is not shown in the image display method instruction information stored in the second memory of the image capturing device . However if the print flag is added it is possible to set whether or not image data is printable. As a result usability related to use of images can be improved.

The video reproduction flag indicates whether or not video data captured by the image capturing device and then uploaded to the server is permitted to be downloaded by the TV and then viewed. If the image capturing device has a video capturing function addition of the video reproduction flag to the image display method instruction information stored in the second memory can add setting of whether or not video reproduction is permitted. As a result the video reproduction can be managed without complicated operations by the user.

The download flag is an identifier indicating whether or not image or video uploaded to the server is permitted to be downloaded copied to a memory in the TV . The download flag can prevent that the image or video is copied by the third person to which image capturing is not permitted. Thereby copy right protection is also achieved.

The security password is password information that permits only the authorized user to perform the above described image viewing printing and downloading processes. In the second embodiment the same password is set for each of the above described image viewing printing and downloading processes. It is preferable however to set a different password to each of image viewing printing and downloading processes so that a level of security can be set independently.

As described above in the system according to the second embodiment of the present invention the image capturing device uploads captured images to the server connected to the image capturing device via the first antenna. When the image capturing device is prevented to the RF ID reader writer of the TV the image capturing device transmits the server URL generation information the captured image state information and the image display method instruction information from the RF ID unit to the TV by the RF ID communication. Then the TV connects to the server to which the image capturing device has uploaded the captured images then downloads the captured images from the server and displays the captured images. Here it is determined whether or not the captured images in the server are in synchronization with the captured images in the image capturing device . If the synchronization is failure the TV displays notification of the synchronization failure on the display unit . Thereby the user can display the captured images only by presenting the image capturing device to the TV although the user conventionally has to remove a recording memory from the camera the image capturing device to be equipped to the TV in order to view the images. Thereby even the user who is not familiar with operations of digital devices can easily display the images on the TV .

First the third embodiment is explained in summary. is a schematic block diagram of an electronic catalog display system according to the third embodiment. The electronic catalog display system according to the third embodiment includes an electronic catalog server information input device an electronic catalog notification card the TV and an electronic catalog server . The electronic catalog server information input device includes a RF ID writer . The electronic catalog notification card includes a RF ID unit . The TV includes a RF ID reader and a network communication unit . The electronic catalog server includes an electronic catalog database and a customer attribute database .

The electronic catalog server information input device writes electronic catalog server information from the RF ID writer to the RF ID unit attached to the electronic catalog notification card . The electronic catalog server information is provided from a user who provides services of an electronic catalog hereinafter referred to as a provider user . When a user who receives the services of the electronic catalog hereinafter referred to as a customer user brings the electronic catalog notification card in which the electronic catalog server information is written into proximity of the TV the RF ID reader in the TV reads the electronic catalog server information from the RF ID unit . In addition the TV transmits based on the readout electronic catalog server information a request for obtaining an electronic catalog to the electronic catalog server set on a network via the network communication unit . Furthermore when transmitting the request to the electronic catalog server the TV transmits also user information which is previously inputted in the TV to the electronic catalog server . The electronic catalog server receives the request for the electronic catalog and the user information from the TV . First the electronic catalog server obtains customer attribute data from the customer attribute database based on the user information. Next from the electronic catalog database the electronic catalog server obtains electronic catalog data associated with the customer attribute data. Then the electronic catalog server transmits the obtained electronic catalog data to the TV from which the request for the electronic catalog has been transmitted. The TV displays the electronic catalog data received from the electronic catalog server and thereby receives purchase operations from the customer user to purchase products in the electronic catalog data.

The following describes the electronic catalog display system according to the third embodiment in more detail.

The following describes processing of the TV after downloading the electronic catalog data with reference to a flowchart of . The processing regarding obtaining of the electronic catalog server information from the RF ID unit at Steps S to S is the same whichever the electronic catalog data is downloaded or not. At S it is determined whether or not the electronic catalog data associated with the electronic catalog server information received from the RF ID unit has already been downloaded and displayed. If the electronic catalog data has not yet been downloaded then the TV downloads the electronic catalog data from the server at S and displays the electronic catalog data at S. The download processing is the same as the download processing described in the first embodiment.

If it is determined at S that the electronic catalog data has already been downloaded then the TV issues a signal of a predetermined key for example a signal of a Decide key to execute operations for the displayed electronic catalog data S . Here as illustrated in an example of a screen display of the electronic catalog data in a screen presents the customer user with a few of options for a next operation to be executed by the customer user for the displayed electronic catalog data. Then a focus circulates among the options on the screen as illustrated as options and in to indicate one of them as a selection candidate every time a predetermined time period passes. This allows the customer user to execute an operation for selecting or purchasing each product in the electronic catalog data for example only by presenting the electronic catalog notification card having the RF ID unit to the TV when the focus indicates a desired option of the customer user.

The second memory according to the third embodiment which is embedded in the RF ID unit on the electronic catalog notification card may be a Read Only Memory ROM . In this aspect the electronic catalog server information input device serves as a RF ID memory data input unit in manufacturing the RF ID unit or a RF ID memory data input means in a RF ID manufacturing system. In general a RF ID unit having a ROM unit is inexpensive more than a RF ID unit having a rewritable memory. Therefore the RF ID unit having a ROM allows the provider user sending a great number of electronic catalog notification cards to reduce a cost.

It should be noted that it has been described in the third embodiment that a focus circulates among the options on the screen of the TV as illustrated as options and in to indicate one of them as a selection candidate every time a predetermined time period passes. However the method of operating the electronic catalog data displayed on the screen by using the electronic catalog notification card having the RF ID unit is not limited to the above. For example it is also possible that the receiving unit of the TV sequentially receive pieces of information from the RF ID unit and counts the sequential receiving processes then thereby calculates a time period RF ID proximity time period during which the RF ID unit is in proximity of the TV and eventually moves a focus indicating a selection candidate displayed on the screen based on the RF ID proximity time period. With the above structure the following operation for the electronic catalog is possible. Only when the RF ID unit is in proximity of the TV the focus displayed on the screen is circulated to change the selection candidate. If the RF ID unit is away from the TV the focus is stopped. After a predetermined time period after stopping of the focus the selection candidate on which the focus is stopped is decided as selection. In this operation for the electronic catalog the customer user can actively operate the electronic catalog by using the RF ID unit without waiting for the focus which automatically circulates among options every predetermined time period to arrive at a user s desired option.

It should also be noted that it has been described in the third embodiment that the electronic catalog server information input device has the key input receiving unit which receives inputs by the input keys operated by the provider user in order to obtain the electronic catalog server information. However the following configuration is also possible. That is the electronic catalog server information input device has a communication interface to communicate with the image server. The image server holds the server information to be transmitted to the electronic catalog server information input device . The electronic catalog server information input device receives the server information from the image server in order to obtain the server information. This configuration in which the server information is stored in the image server allows the electronic catalog server information input device to eliminate inputting to the image server. Especially when a plurality of the electronic catalog server information input devices are operated for a single image server this configuration is highly convenient.

The conventional techniques have a program that users who are not familiar with operations of digital devices such as personal computers should learn operations of the devices to do online shopping. However the system according to the third embodiment enables users using electronic catalogs to do online shopping and the like simply by bringing received cards or post cards into proximity of TVs. Therefore even users who are not familiar with online terminals such as personal computers and mobile phones can easily enjoy shopping on TV screens.

The structure and processing of the image capturing device according to the fourth embodiment are the same as described in the first embodiment.

It should be noted that it has been described in the fourth embodiment that the user inputs the destination information to the TV but the user may input not only the destination information such as an address and a name but also a message to be printed with an image on a post card. The TV receives the input message together with the destination information and provides them to the image server . The printer prints them on the post card. in illustrates an example of a screen of the TV on which a message to be printed is inputted. If the user can select an image to be printed on the post card and also input an message added to the image a flexibility in generating a post card with RF ID is increased.

It should also be noted that the TV according to the fourth embodiment may allow the user to perform operations for images displayed on the TV by using the post card with RF ID in the same manner as described in the third embodiment for the processing in which the user operates an electronic catalog displayed on a screen by using RF ID.

As described above the system according to the fourth embodiment enables the user to mail a post card with RF ID to a person living in a distant location without creating a post card attached with RF ID by the user himself herself. In addition when the user wishes to print the image s stored in the image server onto the post card to be mailed the system allows the user to perform operation on a TV screen to select an image s to be printed. As a result high usability is achieved.

Conventionally if the user intends to show images on a large screen display device to a different user living in a remote location the user in the remote location needs to learn operations of the device apparatus an operation acquirer has to go to the remote location to operate the device or the display device in the remote location should be remotely controlled. The system according to the fourth embodiment however enables such a user in a remote location to easily view images by a simple operation for example by bringing a physical medium such as a post card with RF ID into proximity of a display device.

The fifth embodiment of the present invention has the following configuration. A mailing object such as a post card is written with fixed information. The image capturing device associates the fixed information with an image or a group of images image data stored in the server. A reproduction side reads the fixed information from the RF ID attached to the post card or the like in order to display the image data associated with the fixed information. The configuration is illustrated in . Referring to first the image capturing device reads the fixed information from the mailing object then associates the fixed information with an image s and registers information of the association hereinafter referred to as association information into the server. When the user receives the mailing object for which the registration is completed the user brings the mailing object into proximity of a RF ID reader of a TV to read the fixed information from the mailing object. The TV queries the server using the fixed information and thereby displays the image s associated with the mailing object.

The fifth embodiment is characterized in that the RF ID information in the mailing object is not rewritable ROM or in non rewritable environments so that image data in the server is associated with the mailing object without rewriting the fixed information in the mailing object.

The images captured by the image capturing device are uploaded to the server using the method described in the prior embodiments. Here an identifier is assigned to an uploaded image or image group. The identifier makes it possible to identify the image or an group of images stored in the server.

The following describes a method of associating i an image or image group which is captured and uploaded to the server by the image capturing device with ii fixed information recorded in a RF ID tag of a mailing object. illustrates examples of the fixed information recorded in the RF ID tag of the mailing object.

 a in illustrates fixed information including mailing object UID unique to the mailing object and information such as an address for accessing the image server. b in illustrates fixed information including the mailing object UID and information such as an address for accessing a relay server. c in illustrates fixed information including the mailing object UID only. The fixed information may also include a login ID password information and the like for accessing the server. It is assumed in the fifth embodiment that such information necessary to access the server is included in a URL including the address information.

First the image capturing device reads information from the RF ID of the mailing object by using the RF ID reader S . In more detail the second antenna illustrated in communicates with the RF ID of the mailing object and thereby the data receiving unit receives the fixed information from mailing object. Then the second processing unit performs processing to provide the fixed information of the mailing object to the first processing unit via the recording unit the second memory and the recording reproducing unit . The first processing unit associates the mailing object UID read from the mailing object with an image or image group according to designation from the user S . Then the image capturing device accesses the server via the first antenna S . Thereby the image capturing device registers to the server the association information regarding the association between the mailing object UID and the image data stored in the server S .

If the fixed information read from the mailing object includes an address of the image server or a URL including the address then the processing is completed. On the other hand if the fixed information read from the mailing object does not include an address of the image server or a URL including the address the image capturing device sets a relay server .

In order to set a relay server the image capturing device accesses the relay server S . In more detail if the fixed information read from the mailing object includes an address of a relay server or a URL including the address then the image capturing device accesses the relay server. Otherwise the image capturing device accesses a relay server that is previously set for the image capturing device.

After accessing the relay server the image capturing device sets in a database of the relay server association information regarding association between the mailing object UID and the server that is a redirection destination transfer destination S . Thereby association between the mailing object UID and an address of the transfer destination is registered in the database of the relay server.

If the image capturing device does not have a RF ID reader function and the mailing object is printed with a two dimensional code or the like indicating information of the RF ID reader the image capturing device captures an image of the two dimensional code using an image capturing unit to read information from the code so that the image capturing device can obtain the same information as the fixed information recorded in the RF ID unit of the mailing object. The two dimensional code may be a QR Code a PDF417 Veri Code Maxi Code or the like. Any other code can be used if the image capturing device can read information from the code by capturing an image of the code. In addition the same advantages as described in the fifth embodiment can be produced by using a bar code in a one dimensional direction only although a printing area is increased.

The following describes a flow of the processing from reading the information of the two dimensional code to associating the information with an image or image group in the server with reference to .

Firstly the image capturing unit captures an image of the two dimensional code S . Then it is determined whether or not the captured image is a two dimensional code S . If the captured image is not a two dimensional code then error processing is performed S . Or normal image capturing processing may be performed. On the other hand if the captured image is a two dimensional code then the two dimensional code is analyzed S . Thereby information is read from the mailing object based on the result of the analysis S . After reading the fixed information from the mailing object the image capturing device associates the mailing object UID with image data stored in the server S . Then the image capturing device accesses the server S . Then the image capturing device sets the association information to the server S . The Steps S to S are the same as the Steps S to S in . Here if the readout information does not include an address of the image server or a URL including the address then the image capturing device performs transfer setting to a relay server. The transfer setting to the relay server has been previously described with reference to .

As described above by reading information from the two dimensional bar code printed on the mailing object it is possible to complete to associate the information recorded on the RF ID unit with image data stored in the server.

If the image capturing device does not have a RF ID reader function and the mailing object is not printed with a code such as a two dimensional code the image capturing device can read information from the mailing object if the user manually inputs to the image capturing device the mailing object UID and the URL such as a sever address which are printed on the mailing object. The user inputs the information using buttons to illustrated in . In this aspect the URL and the mailing object UID may be printed directly as a plane text or coded to be a code which the user easily inputs.

As described above even if the image capturing device does not have a RF ID reader function and the mailing object is not printed with a two dimensional code it is possible to associate the mailing object with image data stored in the server.

Next the steps for viewing images stored in the server on the TV using the mailing object for which association is completed.

When the user brings the mailing object into proximity of the RF ID reader of the TV the TV reads information of the RF ID on the mailing object S . Then a determination is made as to whether or not the readout information includes a sever address or a URL including the server address S . If the readout information includes a sever address or a URL including the sever address then the TV accesses the designated server S . Then the TV transmits the mailing object UID S . Then a determination is made as to whether or not the server receiving the transmission is a relay server S . If the server is a relay server then the relay server redirects to a server the image sever designated in the relay server S . Thereby the TV accesses an image or image group in the image server S . On the other hand if it is determined at S that the server receiving the transmission is the image server then redirecting is not performed and access to the image server is performed S . Moreover if it is determined at S that the readout information does not include a sever address then the TV accesses a server set by a predetermined default S . Then the TV transmits the mailing object UID to the default server S . The default server redirects to a server the image server designated in the default server S to access the image server.

Here if association between the mailing object UID and the designated server as a destination of the relay is not registered in a database of the relay or default server the relay or default server redirects to an error page. is a flowchart of processing performed by the relay or default server after receiving the mailing object UID. When the relay or default server receives the mailing object UID S the server searches its database for information regarding the mailing object UID S . Then the relay or default server determines whether or not the database holds information regarding the mailing object UID S . If the database holds the information then the relay or default server redirects to a server associated with the mailing object UID in the database S . On the other hand if the database does not hold the information in other words if there is no association then the relay or default server redirects to an error page S .

As described above the mailing object having fixed information in the RF ID is previously associated with image data stored in the image server. Thereby when the mailing object with the association is presented to the TV the user can view an image or image group in the server which is associated with the mailing object UID without rewriting of the RF ID of the mailing object. Therefore even if the user is away from home and cannot rewrite the RF ID of the mailing object or even if the RF ID of the mailing object is not rewritable the user can associate images in the server with the mailing object. As a result the user allows a person receiving the mailing object to view the images associated with the mailing object.

It should be noted that it has been described in the fifth embodiment that the mailing object UID is transmitted after accessing the server. However it is also possible to generate a URL from the mailing object UID and the sever address recorded on the mailing object in order to access the server. In this aspect it is possible to perform the access to the server and the transmission of the mailing object UID at the same time.

According to the fifth embodiment even in an environment where the RF ID cannot be rewritten such as in a sight seeing location for example the user can associate captured images with a post card and send the post card to a friend. Thereby the friend receiving the post card presents the post card to a TV to view the images the user captured in the sight seeing location. As explained above even in an environment where the RF ID cannot be rewritten the user can create a mailing object associated with images in the server and then send the mailing object to a person to which the user desires to show the images.

If the image capturing device has a RF ID writer function to rewrite the RF ID of the mailing object the processing is the same as processing performed by the TV for associating the mailing object with image data in the server which will be described below in the sixth embodiment. Therefore the processing is not described in the fifth embodiment.

In the sixth embodiment the following configuration is described. The image capturing device captures images and uploads the images to the image server. Then a user transmitting the images hereinafter referred to as a sending user selects an image group from the images in the server. Information for accessing the selected image group is recorded in the RF ID on the mailing object. The mailing object is mailed to a user receiving the images hereinafter referred to as a receiving user . The receiving user accesses the image group in the image server by using the RF ID on the mailing object.

In a mailing object is a post card envelope or letter paper which is mailed from the image transmission side to the image receiving side. A RF ID unit is a rewritable RF ID. At least part of the RF ID unit is a rewritable memory unit . The RF ID unit is attached to or incorporated into the mailing object in order to be sent to the image receiving side together with the mailing object.

As described in the prior embodiments the memory unit in the RF ID unit holds the medium identification information for identifying that the medium having the RF ID unit is a mailing object.

Referring to a TV is a TV display device provided in the image receiving side. The TV has the same function as that of the TV in described in the prior embodiments. Like the TV in the TV includes a RF ID reader writer corresponding to the RF ID reader writer in and a display unit corresponding to the display unit in . The TV is connected to the Internet via a network connection means not shown.

In the image transmission side in images captured by the image capturing device are transmitted to a wireless access point via the second antenna in the image capturing device used for wireless communication such as a wireless LAN or WiMAX. The images are recorded as the image data onto the image server via the internet . Then the image capturing device is moved into proximity of the RF ID reader writer of the TV in order to establish connection with the TV by wireless communication via the first antenna of the image capturing device used for RF ID. The TV obtains from the image capturing device information for accessing the image data in the image server . Then the TV downloads the images of the image data to be displayed on the display unit . The above processing is the same as described in the prior embodiments. The above is just a summary.

Next the sending user checks the images displayed on the display unit of the TV in order to set transmission image selection information indicating whether or not each of the images is to be transmitted to the receiving user in other words whether or not each of the images is to be permitted to be viewed by the receiving user . The sending user can set also restriction on display for the receiving user utility form information such as a slide show and printing which is described in the prior embodiments. The transmission image selection information and the utility form information are transmitted to and recorded onto the image server. The image server manages as an image group a set of images selected as transmission images in the transmission image selection information.

The following describes steps performed by the TV for recording onto the mailing object information regarding the image group selected by the sending use with reference to a flowchart of .

It is assumed that transmission images have been selected and an image group set with the utility form information has been generated. Under the assumption the sending user brings the mailing object having the RF ID unit into proximity of the RF ID reader writer of the TV in order to establish wireless communication between the RF ID unit and the RF ID reader writer .

When the TV becomes able to communicate with the RF ID unit on the mailing object via the RF ID reader writer the TV reads information from the memory unit S . Then the TV determines whether or not the medium identification information indicates that the current communication partner is a mailing object S . If the current communication partner is a mailing object then the TV proceeds to steps for writing to the mailing object. Here if it is determined at Step S that the current communication partner is not a mailing object then the subsequent steps are not described here but the TV proceeds to steps depending on a medium indicated by the medium identification information.

In order to write to the mailing object first the TV accesses the image server via the internet S . Thereby the TV obtains from the image server image group designation information such as a server URL and an image group address for allowing the image receiving side to access the image group in the image server S .

The TV transmits the obtained image group designation information to the RF ID unit on the mailing object via the RF ID reader writer of the TV in order to write the image group designation information to the memory unit in the mailing object and the RF ID unit on the mailing object records the image group designation information to a rewritable region of the memory unit S .

As described above the mailing object on which the image group designation information is recorded is mailed by the sending user to a user of the image receiving side.

Next the image receiving side is described with reference to illustrating the schematic block diagram of the image receiving side and illustrating a flowchart of processing performed by the TV in the image receiving side.

Referring to the receiving user receives the mailing object from the sending user. Then the receiving user checks the RF ID unit or characters or design indicated on the mailing object to determine whether the mailing object is incorporated with a means for accessing images. Here the receiving user needs only to understand that the receiving user can access to the images by using the mailing object . The receiving user does not need to care about the image group designation information and the like in the RF ID unit .

In order to reproduce and view the images the receiving user brings the mailing object into proximity of the RF ID reader writer of the TV in the image receiving side so as to start viewing of the images.

If the RF ID unit on the mailing object is in enough proximity of the RF ID reader writer of the TV the RF ID reader writer supplies power to the RF ID unit of the mailing object via antennas not shown of both the RF ID reader writer and the RF ID unit in order to activate the RF ID unit . Thereby wireless communication between the TV and the RF ID unit of the mailing object starts. When the wireless communication starts the TV reads information from the memory unit of the RF ID unit S .

A determination is made as to whether or not the medium identification information in the readout information indicates that the current communication partner is a mailing object S . If the current communication partner is a mailing object then the TV proceeds to processing of reading the image group designated by the sending user from the image server .

The access to the image server makes it possible to generate an URL for accessing the image group in the image server by using the image group designation information in the information read by the RF ID unit at Step S such as an image group address and thereby to access the image server via the internet S .

The TV connected to the image server at the above step obtains the images the image group which are permitted to be displayed from among the image data in the image server based on the transmission image selection information indicating the image group managed by the image server S . Then the TV displays the images on the display unit S .

Furthermore according to the transmission image selection information indicating the image group managed by the image server and the utility form information the receiving user can use functions of for example reproducing the images as a slide show printing the images and downloading the images to a recording medium not shown attached to the TV or connected to the outside.

In addition for image printing the user can print the images by the printer on a LAN not shown and also ask via the internet a photograph print service provider to print the images.

As described above with the above configuration according to the sixth embodiment of the present invention the image group designation information is provided from the RF ID unit on the mailing object to the TV in the image receiving side. Therefore the receiving user does not need to input characters of a network access destination to obtain images for example. In other words the intuitive and simple operation of simply bringing the mailing object into proximity of the TV enables the receiving user to access the image data stored in the image server . As a result the receiving user can obtain images from the image server without knowledge of complicated operations such as menu selection and character inputs.

It should be noted that it has been described in the sixth embodiment that the mailing object is previously attached or incorporated with the RF ID unit . However the mailing object may be a general post card or letter paper attached with an independent RF ID unit that is provided separately. In this aspect the above effect can be produced by later attaching the RF ID unit to the mailing object. This produces further advantages that the sending user can use the sixth embodiment for any desired mailing object.

It should also be noted that if the access to the image server requires a login operation a server login ID and a server login password may also be written at Step S into the rewritable region of the memory unit in the RF ID unit on the mailing object . Here it is desirable that the login ID and the login password are not plane texts but are written in an encrypted format for security.

It should also be noted that it has been described in the sixth embodiment that the TV in the image transmission side performs selection of transmission images setting of the utility form information and writing of the image group designation information to the RF ID unit on the mailing object . However it is also possible that the image capturing device having a RF ID reader writer function performs setting of the transmission image selection information and the utility form information and writing of the image group designation information in order to produce the same effect as described above for obtaining images by the simple operation of the receiving user.

According to the variation of the sixth embodiment the mailing object UID is previously recorded on the memory unit of the RF ID unit on the mailing object . Here it is desirable to record the mailing object UID on a ROM region of the memory unit in order to reduce risks of data damages or data manipulation caused by accidental operations. illustrates a diagram of an example of a data structure of the memory unit .

The TV in the image transmission side sets the transmission image selection information and the utility form information into the above described RF ID unit in order to designate an image group in the image serve . In this situation the TV performs processing according to the flowchart of .

The TV reads information from the RF ID unit on the mailing object S and determines based on the medium identification information that the communication partner is a mailing object S . After that the TV obtains the mailing object UID S . The mailing object UID may be the information read at Step S or be newly obtained from the RF ID unit . Next the TV accesses the image server via the Internet S . The TV transmits the mailing object UID to the image server and thereby the image server associates with the transmitted mailing object UID with an address of the image group and then stores the manages information of the association association information S .

The TV obtains from the image server the server URL enabling the image receiving side to access the image server S . The obtained server URL is written into the rewritable region of the memory unit in the RF ID unit on the mailing object via the RF ID reader writer S .

As described above if the image server associates the image group with the mailing object UID and then stores and manages the association information the utility form information can be managed separately for each mailing object UID. Therefore in the situation where there are a plurality of the mailing objects it is possible to change an operation for receiving images for each mailing object namely for each different receiving user.

If in the configuration described in the sixth embodiment the image receiving side designates an image group for each mailing object generates a different image group address for each designated image group and writes the image group address into a corresponding RF ID unit the image transmission side needs complicated operations for designating image groups separately although the same advantages as those of the sixth embodiment can be obtained.

Therefore when the sending user selects the same transmission image group for a plurality of mailing objects it is preferable that the sending user records and manages different utility form information for each mailing object by using the mailing object UID as described earlier. Thereby it is possible to reduce operations of the sending user and to reduce a memory capacity of the image server because it is not necessary to hold pieces of the transmission image selection information separately thereby producing further advantages.

The processing of differs from the processing of in that Steps S and S are replaced by Steps S and . At Step the TV obtains an image group address in addition to the server URL. At Step S the TV writes the image group address together with the server URL into the memory unit of the RF ID unit .

Thereby when the image receiving side is to receive images the image receiving side accesses the designated image group in the image server . Here the access is permitted only when the mailing object UID of the image group stored and managed in the image server matches the mailing object UID used by the receiving server requesting the access. Thereby security is increased.

Conventionally if the user intends to show images on a large screen display device apparatus to a different user living in a remote location the user in the remote location needs to learn operations of the device an operation acquirer has to go to the remote location to operate the device or the display device in the remote location should be remotely controlled. However like the fourth embodiment the system according to the sixth embodiment enables such a user in a remote location to easily view images by a simple operation for example by bringing a physical medium such as a post card with RF ID into proximity of a display device. In the fourth embodiment generation of the post card with RF ID and writing of data into the RF ID is not performed by the user who captures and sends images or who views the images but by a service provider. In the sixth embodiment however the sending user in the image transmission side performs generation of the post card with RF ID and writing of data into the RF ID.

In the seventh embodiment of the present invention a method of changing setting for a device apparatus by using a RF ID card according to the seventh embodiment of the present invention is described.

The following describes a method of changing setting for a recorder by using a RF ID card with reference to .

A recorder records broadcast contents obtained by a tuner onto a Hard Disk Drive HDD or an optical disk drive . In addition the recorder reproduces on the TV the recorded contents or video audio contents ready by the optical disk drive .

An input signal processing unit includes an Analog Digital A D converter a decoder and an encoder in order to convert input video audio signals into data in a predetermined video audio format. The A D converter converts analog signals obtained by the tuner into digital signals. The decoder decodes scrambled contents. The encoder converts data into data in a video format according to MPEG 2 for example.

An output signal processing unit includes a Digital Analog D A converter and a decoder in order to provide video and audio to the TV . The D A converter converts digital signals to analog signals. The decoder decodes data in a data format according to MPEG 2 for example.

A system control unit controls operations of the recorder . The system control unit includes a setting information processing unit that switches setting for the recorder . The setting information processing unit will be described in detail later.

An operation input unit receives inputs from a user using buttons of a remote controller a front panel or the like not shown .

The HDD has an area in which recorded contents and content lists provided from the input signal processing unit are stored.

The optical disk drive is a disk drive that performs recording or reproducing for an optical disk such as a Digital Versatile Disc DVD or a Blue ray Disc. The optical disk drive records recorded contents and content lists provided from the input signal processing unit onto the optical disc and reproduces video audio contents in the optical disk.

The input signal processing unit the output signal processing unit the system control unit the HDD and the optical disk drive of the recorder are connected one another via a bus .

According to the setting information stored in the memory the setting information processing unit sets displaying of a menu screen a recording reproducing mode chapters of recorded contents TV program recommendation based on user s preference and the like regarding the recorder . In more detail the setting information processing unit reads an identifier indicating for example menu screen background color Black from the setting information and thereby issues a request for menu screen display to the output signal processing unit together with an instruction for displaying a background of a menu screen in black.

Here the setting information may be stored in an external storage unit such as a SD card not shown. Especially it is efficient to store in the HDD the setting information regarding chapters of recorded contents stored in the HDD information having a large size and the like.

Conventionally the setting information has been set prior to purchase of the recorder or set by operations of the user using the operation input unit . In the seventh embodiment of the present invention however the setting information can be changed based on information obtained from the RF ID reader writer .

The RF ID card includes a memory the antenna second antenna the power supply unit second power supply unit the data receiving unit the data transfer unit a processing unit the recording unit and the reproducing unit .

When the RF ID card is moved to bring the antenna into proximity of the RF ID reader writer of the recorder the RF ID reader writer supplies power to the power supply unit via the antenna in order to provide power to the respective units in the RF ID card .

Information regarding data recording reproducing is read from the RF ID card to the recorder via the RF ID reader writer . In the recorder the information is received by the data receiving unit and then provided to the processing unit .

In the RF ID card the processing unit causes the recording unit to record information onto the memory and causes the reproducing unit to reproduce the information stored in the memory .

The data transfer unit transmits the information provided from the processing unit to the RF ID reader writer of the recorder via the antenna .

The memory in the RF ID card stores the UID the medium identification information and apparatus operation information .

The apparatus operation information holds pieces of information regarding an apparatus device to perform an operation using the RF ID card and regarding the operation. The following describes the pieces of information included in the apparatus operation information .

Operation apparatus identification information indicates a type of the apparatus device to perform the operation using the RF ID card . The operation apparatus identification information indicates the type by an identifier in the similar manner as described for the medium identification information . In the operation apparatus identification information holds an identifier indicating that a type of the apparatus to perform the operation is a recorder.

Target apparatus information holds information so that only a specific apparatus device can perform the operation using the RF ID card . In the example of the target apparatus information holds recorder ID for identifying the recorder . It should be noted that if an apparatus that can use the RF ID card according to the seventh embodiment of the present invention is limited for instance if only recorders can use the RF ID card the operation apparatus identification information and the target apparatus information may not be included in the apparatus operation information . In addition if the setting information processing unit in the recorder has a structure to change settings of the recorder by using the information in cards the medium identification information may not be included in the memory .

Operation instruction information indicates details of the operation to be performed by the apparatus designated in the apparatus operation information . In the example of the operation instruction information includes information indicating that setting is to be changed setting change information indicating a target for which the setting change is to be performed change target information and information indicating that communication is to be executed in obtaining the setting information communication execution .

It should be noted that the operation instruction information is not limited for a single operation but may include plural pieces of information for plural operations or may be a program in which the plural operations are combined.

Communication information is information regarding a server or the like. When the recorder is instructed based on the operation instruction information to access the server or the like to obtain data the recorder accesses the server or the like using the communication information . In the example of the communication information includes a URL login ID and a password of the server or the like. The URL may be replaced by an IP address. If the recorder is to access a different apparatus device via an office or home network the URL may be information for identifying the apparatus such as a MAC address.

The following describes processing by which the recorder registers the setting information from the recorder to a server by using the RF ID card with reference to .

At Step when the recorder receives an input from the user using the operation input unit the setting information processing unit causes the output signal processing unit to issue to the TV a request for message display. In response to the request the TV displays a message Please present a RF ID card on its screen at Step . The message may be displayed on a console not shown of the recorder . It is also possible that the recorder requests the user for authentication such as a password or biometric authentication when the user performs the input operation and after the authentication proceeds to the setting registration processing. It is further possible that the recorder does not request the TV for the message display but the user needs to present the RF ID card to the RF ID reader writer when using the recorder in order to perform steps of and after . It is still further possible that an inquiry message is displayed to enquire where the setting information is to be registered and the setting information is registered into the location the user designates. For example the setting information may be registered into the RF ID card or into a sever different from the server .

At Step the recorder detects the RF ID card. After that mutual authentication between the recorder and the RF ID card is performed at Step .

If the mutual authentication at Step is successful then the processing proceeds to Step . Otherwise the processing returns to Step to repeat the detection of the RF ID card.

At Step the recorder obtains the communication information from the memory in the RF ID card . If the memory in the RF ID card does not hold the communication information the recorder may issue to the user a request for providing the communication information. Moreover if the user instructs at Step the recorder to register the setting information into a location that is not designated in the RF ID card Step is not performed. If plural pieces of the communication information are stored in the RF ID card it is possible to display a list of the plural pieces of the communication information from which the user can select a desired one.

At Step the recorder gets the recorder ID and the setting information from the memory . The setting information is not limited to information currently stored but may be information inputted by the user in the setting registration processing.

At Step in the recorder the setting information processing unit issues to the communication unit a request for access to a server or the like having the URL included in the obtained communication information . The communication unit accesses the server using the login ID and the password .

At Step it is determined whether or not the access to the server is successful. If the access is successful then the processing proceeds to Step . Otherwise the setting registration processing is terminated.

At Step the recorder transmits to the server the UID and the recorder ID and the setting information which are obtained from the memory thereby registering the setting information into the server .

At Step the recorder generates the operation instruction information using a the operation designated at Step or a storage location of the setting information selected at Step b the setting information obtained at Step and c the communication information obtained at Step .

At Step the recorder performs the same step as Step to cause the TV to displays a message Please present a RF ID card on its screen.

At Step the recorder detects the RF ID card. After that mutual authentication between the recorder and the RF ID card is performed at Step .

If the mutual authentication at Step is successful then the processing proceeds to Step . Otherwise the processing returns to Step to repeat the detection of the RF ID card .

At Step it is determined whether or not the UID obtained at Step matches the UID obtained at Step . If the UIDs match then the processing proceeds to Step . Otherwise the processing returns to Step to repeat the detection of the RF ID card .

At Step the recorder transmits to the RF ID card the operation apparatus identification information not shown in stored in the memory the recorder ID the operation instruction information generated at Step and the communication information in order to record register these pieces of information onto the memory of the RF ID card . As a result the setting registration processing is completed.

Referring to the setting information registered into the server by the above described processing of is described.

Each of the setting information registered in the server is hereinafter referred to as setting information . Each setting information is registered in association with a corresponding one of the UID and a corresponding one of the target apparatus information . In more detail the setting information holds an identifier indicating for example menu screen background color Black . In the example of a letter A or B at the end of pieces of the setting information indicates that the setting is different from another.

It is also possible that plural pieces of setting information are registered for a single UID such as UID in . It is further possible that a single piece of the target apparatus information such as REC 0001 is registered for plural pieces of setting information associated with different UID. Here the setting information may include the change target information .

Next referring to the apparatus operation information registered in the memory of the RF ID card by the above described processing of is described.

It is assumed in the example of that the UID designates UID and the medium identification information designates a card .

The apparatus operation information includes sets each including the operation apparatus identification information the target apparatus information the operation instruction information and the communication information . Here it is possible that the communication information is not registered as being information not related to the other pieces of information. For instance it is possible that only a piece of the communication information is registered to always access the same server in using the RF ID card .

The operation instruction information includes instruction detail information instruction target information and communication execution information . The instruction detail information holds an identifier indicating an operation to be performed by the device designated by the target apparatus information . The instruction target information holds an identifier indicating a setting such as a menu screen mode or recording mode of the apparatus to perform the operation such as REC . The communication execution information holds an identifier indicating whether or not communication is to be executed in performing the operation indicated in the instruction detail information . It should be noted that the apparatus operation information may include only the communication information if the operating to be performed using the RF ID card is limited to changing of setting.

The communication information holds a URL login ID a password and the like for accessing a server that is a partner of communication if the communication execution information indicates that the communication is to be executed.

Next the description is given for processing of changing the setting of the recorder by using the RF ID card with reference to . is a flowchart of processing by which the setting information processing unit in the recorder updates the setting information by using the RF ID card .

First at Step the recorder detects the RF ID card . After that at Step the recorder performs mutual authentication with the RF ID card .

At Step the recorder determines whether or not the mutual authentication is successful. If the mutual authentication is successful then the processing proceeds to Step . Otherwise the setting update processing is terminated.

At Step the recorder obtains the UID and the apparatus operation information from the memory of the RF ID card .

At Step the recorder searches the apparatus operation information for the operation apparatus identification information . At Step the recorder compares the searched out operation apparatus identification information to apparatus identification information not shown in the memory of the recorder .

If it is determined at Step that the operation device identification information matches the device identification information then the processing proceeds to Step . Otherwise the processing proceeds to Step .

At Step the recorder determines whether or not all pieces of the operation apparatus identification information in the apparatus operation information have been examined. If all pieces of the operation apparatus identification information have been examined then the setting update processing is terminated.

At Step the recorder searches the device operation information for the target apparatus information . At Step the recorder compares the searched out target apparatus information to the recorder ID in the memory of the recorder .

If it is determined at Step that the target device information matches the recorder ID then the processing proceeds to Step . Otherwise the setting update processing is terminated.

At Step the recorder obtains the operation instruction information associated with the target device information from the apparatus operation information .

At Step the recorder obtains the operation instruction information associated with the target apparatus information from the apparatus operation information .

At Step the recorder determines based on the instruction detail information in the operation instruction information in the device operation information that an operation to be performed is updating of setting and thereby accesses the server to obtain the setting information from the server . The step will be described in more detail with reference to .

At Step the recorder determines whether or not the obtainment of the setting information is successful. If the obtainment of the setting information is successful then the processing proceeds to Step . At Step the setting information processing unit in the recorder updates the setting information in the memory of the recorder by the setting information . On the other hand if the obtainment of the setting information fails then the setting update processing is terminated.

The following describes Step in in more detail with reference to . is a flowchart of processing by which the setting information processing unit in the recorder accesses the server to obtain the setting information from the server .

At Step the communication unit in the recorder accesses the server having the URL included in the communication information .

At Step the setting information processing unit provides the communication unit with the login ID and the password which are included in the communication information and thereby the communication unit logins to the server .

At Step it is determined whether or not authentication namely the login is successful. If the authentication is successful then the processing proceeds to Step . Otherwise the processing is terminated as being failure of obtaining the setting information .

At Step the recorder searches the server for UID. At Step the recorder determines whether or not the searched out UID matches the UID obtained at Step in . If the searched out UID matches the UID then the processing proceeds to Step . Otherwise the processing returns to Step to repeat the search for UID until it is determined at Step that all pieces of UID in the server have been examined. If it is determined at Step that all pieces of UID in the server have been examined then the processing is terminated as being failure of obtaining the setting information .

At Step the recorder searches the server for the target apparatus information associated with the UID . At Step the recorder determines whether or not the searched out target apparatus information matches the target apparatus information obtained at Step in . If the searched out target apparatus information matches the target apparatus information then the processing proceeds to Step . On the other hand if the searched out target apparatus information does not match the target apparatus information then the processing proceeds to Step then the processing returns to Step to repeat the search for the target apparatus information until it is determined at Step that all pieces of the target apparatus information in the server have been examined. If it is determined at Step that all pieces of the target apparatus information have been examined then the processing is terminated as being failure of obtaining the setting information .

At Step the recorder obtains from the server the setting information associated with the UID and the target apparatus information .

As described above the use of the RF ID card enables the user to perform setting of the recorder without complicated operations. Even if the user is not familiar with operations of apparatuses devices the user can easily change the setting of the recorder by using the RF ID card . Moreover the operation executable for the recorder by using the RF ID card is not limited to the setting change. For example the instruction detail information can designate an operation of obtaining a list of recorded contents in the recorder. In this case the list is registered in the RF ID card or the server. Thereby the user can check the list on a different apparatus device other than the recorder by using the RF ID card.

In addition the RF ID card holding information illustrated in the allows the user to perform timer recording in the recorder simply by presenting the RF ID card to the recorder. In more detail if the change target information associated with Index in is applied the recorder can perform timer recording according to setting of TV program ID and recording mode designated in the instruction target information simply by presenting the RF ID card to the recorder. Thereby the timer recording can be performed without accessing the server. In addition if the change target information associated with Index in is applied the recorder can perform timer recording according to TV program code designated in the instruction target information simply by presenting the RF ID card to the recorder. Here the recorder can obtain from the server a program ID or a start time and end time and b channel information. As a result the time recording can be performed according to the setting of the recording mode .

Furthermore it is also possible that recommended TV program is designated in the instruction target information in the RF ID card. After presenting the RF ID card to the recorder the recorder obtains ID of the recommended TV program from the server. Thereby the recorder can obtain a content of the recommended TV program from the server and performs timer recording of the content. The above functions may be used as service for providing the RF ID card as being a supplement of a TV program guide magazine for example. This RF ID card can reduce user s bothersome procedures for timer recording. For another service it is also possible in the RF ID card that the instruction detail information designates a download operation the instruction target information designates video or software in a version where a function is restricted and the communication information designates a URL of a download website. Such RF ID cards are provided for free to users. The users can use the video or software as trial and purchase it if the user likes it.

It should be noted that the description in the seventh embodiment has been given for the recorder but the present invention is not limited to the recorder.

For example the seventh embodiment of the present invention may be implemented as a TV having a reader writer for the RF ID card and the setting information processing unit. The TV can register as the change target information a setting of an initial display channel or initial sound volume immediately after power on b setting of child lock for excluding adult broadcasts and violence scenes c setting of zapping for favorite channels d setting of contrast and brightness of a screen e setting of a language f setting of a continuous use time and the like simply by presenting the RF ID card to the TV. Thereby the TV can perform settings according to usability. Furthermore the seventh embodiment may be implemented also as a vehicle navigation system having a reader writer for the RF ID card and the setting information processing unit. In this aspect the instruction detail information designates highlighted display and the instruction target information designates landmark information . Thereby by using the RF ID card the vehicle navigation system can display the designated landmark as being highlighted by changing a character font character size or color. The landmark information may be obtained from a server. In this case the RF ID cards on which the apparatus operation information illustrated in is recorded are offered to users at rest areas or interchanges on expressways sightseeing spots and the like. Thereby the RF ID cards allow vehicle navigation systems of the users to display a recommended landmark where an even is currently held for example as highlighted display. In addition the seventh embodiment may be implemented as a laptop having a reader writer for the RF ID card and the setting information processing unit. The laptop can designate a setting of a resolution of a screen b setting of a position of an icon or the like on a display c setting of a wallpaper d setting of a screen saver e setting of start up of resident software f setting of employed peripheral devices g setting of a dominant hand for a mouse or the like and the like by simply by presenting the RF ID card to the laptop. Therefore if the user brings the RF ID card in a business trip the user can operate a different personal computer at the business trip location with the same settings as those the user usually uses. The seventh embodiment may be implemented further as a game machine having a reader writer for the RF ID card and the setting information processing unit. The user visiting a friend s house uses a RF ID card in which the instruction detail information designates setting change. By presenting the RF ID card to the game machine at the friend s house the user can change a setting of positions of keys on a remote controller and b setting of a structure of a menu screen. In addition the user can save data in the game machine by using the RF ID card. Moreover the following service using the RF ID card is also possible. The RF ID card holds the instruction detail information designating a download operation. Such RF ID cards are offered to users as supplements of magazines or the like. The users can use the RF ID cards to download an additional scenario a rare item or the like.

The RF ID card according to the seventh embodiment of the present invention can be also applied to home appliances connected to one another via a network. In this aspect the RF ID card previously holds a setting of a temperature of an air conditioner b setting for a temperature of hot water in a bus tab and the like depending of the user s preference. Thereby the user presents the RF ID card to RF ID reader writers in the user s house so as to manage settings of the home appliances at once. In addition the RF ID card may designate an operation for checking foods stored in a refrigerator. Here information of the foods which is registered in the refrigerator is obtained by using RF ID tags previously attached to the foods. Or video of the inside of the refrigerator is captured by using camcorder. Thereby the user can check a list of the foods on a TV by using a RF ID reader writer to obtain information from the RF ID card. As described above the RF ID card according to the seventh embodiment of the present invention can be applied for various usages. It is also possible to combine a RF ID cards for designating apparatuses such as four different cards indicating heating appliance cooling appliance stove and fan respectively and b RF ID cards for designating setting of the apparatuses such as three different cards indicating weak medium and strong respectively . It is further possible that such RF ID cards having the apparatus designating and setting designating functions are integrated into a single RF ID card. And the settings of the apparatuses can be customized.

Although only some exemplary embodiments of the present invention have been described in detail above those skilled in the art will be readily appreciate that many modifications are possible in the exemplary embodiments without materially departing from the novel teachings and advantages of the present invention. Accordingly all such modifications are intended to be included within the scope of the present invention.

For example if two users hereinafter referred to as a user A and a user B exchanges photographs between them the user B can view photographs taken by the user A by the following method. The user B has a TV having an apparatus ID and a relay server having a URL. The apparatus ID and the URL are previously stored in a RF ID hereinafter referred to as a RF tag B . The user B generates information hereinafter referred to as device generation information B from the information in the RF tag B and stores the generated device generation information B into the RF tag B. The user B transmits the device generation information B to the user A via e mail or the like. The user A stores a URL of a server holding the photographs into the relay server in association with the received device generation information B. Thereby the user B simply presents the RF tab B to a RF ID reader writer of the TV in order to view the photographs taken by the user A. Here it is assumed that the RF tag B previously holds an e mail address of the user A. When the user B simply presents the RF tag B to the RF ID reader writer of the TV the device generation information B may be automatically written into the TV and a notification of the device generation information B may be automatically transmitted to the e mail address of the user A. Thereby even if the user B is not familiar with operations of the devices the user B can exchange photographs with the user A. Furthermore it is also possible that the user A encrypts at least one of a URL login ID and a password by using the device generation information B and sends to the user B a post card with RF ID on which the encrypted information is recorded. This makes it possible to restrict an apparatus permitted to display the photographs only to the TV of the user B. It is further possible that the user A sends to the user B a post card with two RF IDs that are a RF ID for sending and a RF ID for returning. In this aspect the user A records onto the RF ID for returning device generation information A that is previously generated by a TV or the like of the user A. This can restrict an apparatus permitted to display photographs stored by the user B. More specifically when the user B receives the post card with the two RF IDs and returns the post card to the user A the user B encrypts by using the device generation information A a URL a login ID or a password of a server storing the photographs of the user B and then records the encrypted data onto the RF ID for returning. Or when the user B stores the photographs the user B associates the photographs with the device generation information A. Therefore an apparatus permitted to display photographs stored by the user B can be restricted.

Moreover the mailing object UID of the RF ID on the mailing object may be a combination of a a group ID that is common among a plurality of mailing objects and b a UID unique that is unique to each mailing object. Thereby image data in the server is associated not with every mailing object UID but with the group ID. Therefore when post cards with RF ID on which the image data is associated with a plurality of targets are mailed it is possible to eliminate user s bothersome procedures for performing registration for each of the UIDs. It is also possible that the image data stored in the server in association with the group ID is switched to be permitted or inhibited to be viewed for each of the UID. Thereby if for example a printer prints destination addresses on the mailing objects the printer having a RF ID reader writer reads the UIDs on the mailing objects and thereby associates the UIDs with addresses in an address list respectively. Thereby the address list can be used to manage the permission inhibition of viewing the images stored in the server.

It is also possible that a post card or card is provided with a plurality of RF ID tags having various different functions. In this aspect the single post card or card can switch the functions by disconnecting communication of a part of the RF ID tags which are not currently used. For example a post card has a an upper portion on which a RF ID tag having a function of displaying a slide show of photographs is attached and b a lower portion on which a RF ID tag having a function of reproducing video. A user can switch the display function or the reproduction function by selecting the upper portion or the lower portion to be brought into proximity of a RF ID reader writer. The RF ID tags having different functions can be provided to a front side and a back side of the post card. It is also possible that covers made of a material blocking communications are applied on the RF ID tags so that the user can select a RF ID tag to be used by opening the cover on it.

It is further possible that photographs are stored in a plurality of servers and a RF ID tag holds URLs of the servers. Thereby a user can access the servers to obtain the photographs to display them in a list.

Moreover the RF ID reader writer may be provided not only to an apparatus device such as the TV or the recorder but also to the input means such as a remote controller for operating the apparatus. For instance if a plurality of apparatuses are connected to one another via a network an input means for collectively operating the apparatuses may be provided with a RF ID reader writer to operate the respective apparatuses. Furthermore an input means such as a remote controller may be provided with an individual authentication means for biometric authentication such as fingerprint authentication or face authentication password or the like. In this aspect the input means having a RF ID reader writer exchanges data with a RF ID tag only when the individual authentication is successful. It is also possible that the individual authentication information is previously stored in the RF ID tag and individual authentication is performed by the apparatus or the remote controller using the RF ID tag.

It should be noted that the definition of the term RF ID frequently used in the description of the present invention is not limited to narrow meaning. In general the term RF ID narrowly refers to a tag having a nonvolatile memory on which identification information is recorded . RF ID having a dual interface function or a security function seems commonly called as a IC card or the like. However in the embodiments of the present invention the RF ID widely refers to an electronic circuit which has a nonvolatile memory on which individual identification information is recorded and which can transmit the individual identification information to the outside via an antenna .

Conventionally if a user who is not familiar with operations of an apparatus device wishes to perform complicated settings for the apparatus it is necessary that a seller repairer or serviceperson of the apparatus visits a location of the apparatus to perform the settings or controls the apparatus remotely. Even in remotely controlling the apparatus the seller repairer or serviceperson has to visit the location for setting of the remote control. In the seventh embodiment of the present invention however the RF ID card enables the user to perform the settings of the apparatus the recorder without complicated operations. Therefore even the user not familiar with operations of the recorder can easily change the settings of the recorder.

The present invention can be implemented also as an image presentation method of presenting image related to a communication device on an apparatus device having a display screen in a communication system having a the apparatus having the display screen b a reader device connected to the apparatus via a communication path and c the communication device performing proximity wireless communication with the reader device. The present invention can be implemented further as a program stored in the communication device with identification information of the communication device the program being described by codes executed by a virtual machine included in a device performing proximity wireless communication with the communication device and being for executing accessing a server connected via a communication network downloading form the server image associated with the identification information from among image stored in the accessed server and displaying the downloaded image. In addition the present invention can be implemented as a computer readable recording medium such as a CD ROM on which the above program is recorded.

The communication device according to the present invention may be used of course as various devices having a RF ID unit in which identification information and a virtual machine program are stored. For example the communication device may be electronic devices such as a camera home appliances such as a rice cooker and a refrigerator and daily commodities such as a toothbrush.

Here an embodiment in which a RF ID reader is provided to a remote controller of a TV or the like is described with reference to diagrams a and b in a flowchart c in and a flowchart of .

First as described earlier a child device or child communicator such as a camera has the memory second memory and the antenna second antenna . When an antenna of a remote controller is moved into proximity of the antenna the antenna supplies power to the antenna . Thereby data in the memory is transmitted from the antenna to the antenna . The remote controller converts the received data into digital data by a communication circuit and then stores the digital data into a memory Step a in . Then a transmission unit of the remote controller is faced to the TV and a transmission switch on the remote controller is pressed Step b . Thereby the data in the memory is transmitted as light to a light receiving unit of the parent device apparatus the TV via a light emitting unit Step c . The communication may be not light but wireless.

Referring back to a flowchart c in the embodiment of the present invention used in social systems should be applicable even in twenty or thirty years. An example of the program described in a virtual machine language or the like is known Java . However such programs are expected to be extended or replaced by totally different programs described in more efficient languages. In order to address the above situation in the embodiment of the present invention the parent device such as the TV holds parent device version information or parent device version information n that indicates a language type or version of a virtual machine language or the like Step i in c of . In the beginning of the memory of the child device child device version information or child device version information n indicating a version of a program language or the like for the child device is recorded a in . Following to the child device version information a program region is recorded in the memory . The program region stores a program a in a version a a program b in a version b and a program c in a version c. Following to the program region a data region is recorded in the memory .

At Step i in the flowchart of the parent device stores the parent device version information nof the parent device is stored. Then the parent device obtains the child device version information nfrom the memory of the child device Step a . Then the parent device selects an execution program n having a maximum value of n n Step b . The parent device executes the selected execution program Step c . Then it is determined whether or not the parent device is connected to the Internet Step d . If the parent device is connected to the Internet then the parent device is connected to the server via the Internet Step e . The parent device thereby transmits language information which is set in the parent device to the server Step f . The server provides the parent device with a program in the language indicated in the transmitted language information for example in French and causes the parent device to execute the program. Alternatively the server may execute the program on the server itself.

On the other hand if it is determined at Step d that the parent device is not connected to the Internet then the processing proceeds to Step h. At Step h the parent device executes a local program in order to display on a screen of the parent device attribute information of the child device . The attribute information is for example information for notifying a trouble or information regarding the number of stored photographs. As described above the memory in the child device holds the child device version information . The memory stores a program procedure URL or the like of each generation. The program procedure URL or the like will be developed every 10 years. Such data format on which information is recorded for each generation can be kept being used even in twenty or thirty years in order to operate the parent device . a of illustrates an example of information on which versions or generations of a program are recorded. However the same advantages are also offered in another example illustrated in b of . In b of addresses of data stored in the server are recorded in associated with respective different versions. In this example a URL a in a version d a URL b in a version e and a URL c in a version f are recorded. The above can achieve backward compatibility for many years. For example it is assumed that a user purchases a product the parent device in version this year and the product has RF ID. Under the assumption it is expected that in twenty or thirty years programs described in virtual machine languages or the like such as Java which are compliant to versions and will be installed into the parent device . In the situation the child device can provide the parent device with the child device version information . Based on the child device version information the parent device can select a program to be compliant to an appropriate version. It is also expected that in thirty years the child device will hold information of programs in all versions and . Therefore a different parent device in version employs the best function of a version among them. On the other hand the former parent device in version employs a rather limited function of a version older than the version employed by the parent device in version . As a result perfect compatibility can be achieved.

The flowchart of is explained below. At Step a pressing a read switch on the remote controller a user brings the remote controller into proximity of the antenna of the child device . Thereby data in the memory of the child device is transmitted to the memory of the remote controller . Next at Step b facing the remote controller to the parent device such as a TV the user presses a transmission switch Step b . Thereby the data in the memory is transmitted as light to the parent device Step c . In the embodiment of the present invention the data is referred to as tag data for convenience. The parent device extracts or selects an execution program from the tag data Step d . The parent device executes the extracted or selected execution program by a virtual machine language set in the parent device Step e . The parent device reads Internet connection identification information for the parent device Step f . At Step g it is determined whether or not the identification information does not indicate Connectable to the Internet in other words it is determined based on the identification information whether or not the parent device is connectable to the Internet. If the identification information does not indicate Connectable to the Internet until Step g then the parent device executes a non connectable state program in the execution program Step t . The non connectable state program is to be executed when the parent device is not connectable to the Internet. Then the parent device displays a result of the execution on its screen Step u . In the embodiment of the present invention the memory stores not only the information regarding connection to the Internet but also the non connectable state program to be executed when the parent device is not connectable to the Internet. Therefore the parent device can display a result of a minimum required operation when the parent device is not connectable to the Internet.

On the other hand if it is determined at Step g that the identification information indicates Connectable to the Internet then the parent device executes a connection program Step h . The connection program includes a part of the above execution program.

The connection program may be generated by adding into the execution program in the tag data data such as a URL of the server user ID and a password. More specifically the added such as a URL of the server user ID and a password are added in the data region illustrated in a of . Such connection program can extend the execution program in the tag data and also reduce a capacity of the nonvolatile memory in the memory . In this case it is also possible that the connection program in the memory is recorded onto a memory such as a non rewritable ROM in the program region while the URL of the server and the like are recorded onto the data region that is rewritable. As a result a tip area and a cost can be reduced.

At Step i the parent device connects to a server having a specific URL. At Step j it is determined whether or not the server requests the parent device to upload data to the server. If the server requests for uploading of data then at Step p the parent device uploads data and or a program to the server. The server executes a program using the data Step q . The server provides a result of the execution to the parent device Step r . The parent device displays the result and the like of the execution on its screen Step s .

On the other hand if it is determined at Step j that the server does not request for uploading of data then the parent device downloads information including a specific program from the server having the URL Step k . The parent device executes the downloaded program Step m . Then the parent device displays the result of the execution on its screen Sn .

The memory in the RF ID unit or the child device has a limited capacity due to restriction on power consumption a volume or a cost. Therefore a common program cannot be stored in the memory. However the use of the connection program and the server as described in the embodiment of the present invention allows an infinitely large program to be executed.

A huge program may be executed on the server. Or such a program may be downloaded from the server to be executed. These aspects are in the scope of the present invention.

The embodiment described with reference to has been described to use a remote controller of a TV. In this example the remote controller has a battery buttons for switching TV channels an antenna for reading RF ID a communication circuit and an infrared light emitting unit. The remote controller can be replaced by a mobile phone to produce the same effects as described above. Since mobile phones generally have an infrared light emitting unit they are easily used instead of remote controllers. In addition mobile phones have a communication line. Therefore mobile phones can offer the same capability of that of remote controller being directly connected to the server. However a communication cost of a mobile phone is burden of a user. A display screen of a mobile phone is significantly smaller than that of a TV. Therefore a mobile phone may have the transmission switch as illustrated in . Thereby if there is a TV near the mobile phone the user faces the light emitting unit of the mobile phone to the TV to transmit tag data in the memory of the mobile phone directly to the TV. As a result the user can view data on a large screen of the TV having a high resolution. The above method does not incur a cost which is greatly advantageous for the user. The communication using the readout tag data via the mobile phone line is stopped in cooperation with the transmission switch.

In this case in the same manner as described for as the remote controller with reference to the mobile phone has at least a reader for RF ID or a Near Field Communication NFC unit. In the future mobile phones are expected to have a reader function for reading RF ID or the like. If RF ID readers are provided to mobile phones the present invention can be implemented with a much lower additional cost which is greatly advantageous for the user. Moreover the present invention can be easily implemented not only as a remote controller or a mobile phone but also as a Personal Digital Assistance PDA terminal a laptop or a mobile media player.

In the eight embodiment consider a situation where under the above mentioned environment the user who is watching video on the TV wants to watch it on the TV upstairs. In the case of moving to another place to watch the video it is desirable that the user can watch the video seamlessly from the point up to which the user has already watched. However in order to seamlessly move the video while maintaining security user authentication and timing synchronization are necessary and the user is required to perform complex operations. This is because a highly versatile apparatus device such as a TV or a mobile terminal can be used in various applications so that the user wishes to operate the apparatus depending on circumstances.

In this embodiment of the present invention the mobile AV terminal transmits a program according to a status of the mobile AV terminal and generates a video display destination change command using a status of the TV received as a response. In this way by an extremely simple operation of causing the mobile AV terminal and the TV touch each other video passing according to the statuses of both terminals can be achieved with it being possible to significantly improve user friendliness. Though the following describes video passing the same advantageous effects can be attained even in the case of continuously displaying still images by a slide show or the like.

In this embodiment of the present invention according to the above structure video passing can be performed by an extremely simple operation of causing the mobile AV terminal and the TV touch each other thereby significantly improving user friendliness.

This embodiment relates to a best mode of a method for ensuring traceability in a distribution form from factory shipment to use environment of an apparatus device provided with a RFID tag as described in the first to tenth embodiments.

Recently given a need to improve distribution efficiency and also an increase in number of accidents caused by aging of home electrical products there has been debate for ensuring traceability namely an ability to trace from manufacture and distribution through to a use environment by a consumer.

As an example an attempt has been made to enable management from manufacture to distribution to a retailer by adding a passive RFID tag that uses a communication frequency in a band of 860 to 900 MHz to a package a returnable container or the like. The band of 860 to 900 MHz is also called a UHF UltraHigh Frequency band. The RFID tag in the UHF band can exhibit a largest communication distance in the passive type i.e. the type of tag to which power is supplied from outside and is capable of communication of 2 to 3 m though depending on output magnitude. Accordingly by simultaneously passing a plurality of products through a RFID reader gate during transportation RFID information of the plurality of products can be instantly read with efficiency. Hence the RFID tag is particularly expected to be used in the field of distribution.

However such a RFID tag of the UHF band has the following problem. Though the RFID tag certainly has an advantage of long distance communication the apparatus cannot be traced once it has been delivered to the consumer because the RFID tag is added to the package or the returnable container. Besides the long distance feature is not particularly effective in an entity interface an object interface or an intuitive interface described in the first to tenth embodiments where apparatuses are brought into proximity of each other to trigger an action.

Meanwhile the RFID tag described in the first to tenth embodiments is assumed to be a HF RFID tag in a band of 13.56 MHz though this is not a limit for the present invention . HF RFID has a feature of short distance communication within about several ten cm though depending on output . For instance the HF RFID tag is widely used in applications that intuitively trigger an action by bringing two terminals close to each other such as electronic money and ticket gate systems. This being so for example when the user wants to display photographs captured by a digital camera on a TV the user brings the digital camera close to the RFID reader writer of the TV thereby realizing an entity interface where an entity camera and an entity TV operate in conjunction with each other or an intuitive interface where digital camera photographs are displayed on the TV.

In this embodiment the HF RFID tag is added to the apparatus device as in the first to tenth embodiments and also the UHF RFID tag is added to the package or the returnable container of the apparatus to ensure product traceability even after the product is reached the use environment of the consumer.

Though this embodiment describes the case where the apparatus is a recorder the apparatus is not limited to such and may be any of a digital home appliance a food and the like.

An apparatus M assembled in a manufacturing line is provided with a HF RFID tag M. The HF RFID tag M has a memory which has a structure of a dual interface that is accessible from both the apparatus M and a communication unit of the RFID tag M. A product serial number of the apparatus and a program command for copying the product serial number of the apparatus to the UHF RFID tag are stored in the memory of the HF RFID tag M in an assembly stage.

After the assembly of the apparatus M is completed prior to packaging a handy reader writer M reads the product serial number from the memory of HF RFID and also records a device ID of UHF RFID UHF RFID unique information indicating that the UHF RFID tag is added to the package or the like.

Next having packaged the apparatus M a UHF RFID tag M is added to a package M. The UHF RFID tag M may be directly added to the package or may be added to a management table or the like. After adding the UHF RFID tag M the handy reader writer M records the product serial number and the like read from the HF RFID tag M of the apparatus M to the UHF RFID tag M. In this embodiment the handy reader writer M is capable of accessing both HF RFID and UHF RFID.

Thus the product serial number of the apparatus M is recorded on the HF RFID tag M and the same information is also recorded on the UHF RFID tag M of the package M. Therefore in distribution after packaging there is no need to read the product serial number and the like from the HF RFID tag that is capable of only short distance access. By simultaneously passing a plurality of products through the gate the information can be directly read from the UHF RFID tag. This contributes to more efficient distribution.

Moreover after the apparatus M reaches the use environment of the consumer the HF RFID tag can be read by a remote controller of a TV and the like. Hence not only the distribution but also the apparatus reaching the consumer can be traced. As a result overall traceability that contributes to improved distribution efficiency and prevents accidents caused by aged deterioration during apparatus use can be achieved.

The memory of the UHF RFID tag M stores a UHF device ID M HF existence identification information M an apparatus product serial number and actual article number M a date M a manufacturer M a model number lot number and product name M and a status M.

The UHF device ID M is stored in a non rewritable area of the memory and is identification information for uniquely identifying the UHF RFID tag. The UHF device ID M is read by the handy reader writer before the apparatus M is packaged and recorded in the HF RFID tag M. Hence even when the correspondence relation between the package and the apparatus is wrong the correspondence relation can be checked beforehand and appropriate processing can be performed.

The HF existence identification information M is identification information for determining whether or not the HF RFID tag M is added to the apparatus M. In the case where the HF RFID tag M is added to the apparatus M when recording the product serial number and the like read from the HF RFID tag M to the UHF RFID tag M upon apparatus packaging the HF RFID existence identification information is changed to information indicating exist . This makes it possible to determine whether or not to check the correspondence relation between UHF RFID and HF RFID by referencing only the HF existence identification information M.

The apparatus product serial number and actual article number M is at least one of the product serial number read from the HF RFID tag M and an actual article number associated with the product serial number. The actual article number is a number of the apparatus used in the distribution process. It is possible to uniquely associate the actual article number with the product serial number by equally managing the product serial number and the actual article number. Accordingly in this embodiment the product serial number and the actual article number are not clearly distinguished from each other but are described as the same information.

The date M corresponds to a manufacturing year month date and information of a date and time of manufacture of the apparatus M is recorded as the date M. This information may be recorded by the handy reader writer M at the time of recording the product serial number to the UHF RFID tag M or manufacturing year month date information stored in the HF RFID tag M may be read and recorded to the UHF RFID tag M.

The manufacturer M is identification information of a manufacturer of the apparatus M. This information may be recorded by the handy reader writer M at the time of recording the product serial number to the UHF RFID tag M or manufacturer information stored in the HF RFID tag M may be read and recorded to the UHF RFID tag M.

The model number lot number and product name M may be recorded by the handy reader writer M or the corresponding information may be read from the HF RFID tag M and recorded in the same way as the date M and the manufacturer M. Regarding the lot number in the case where lot management from manufacture to distribution can be conducted in a unified fashion the information may be written by any of the two methods. However in the case where unified management is not conducted and manufacturing line information is unclear upon packaging reading the lot number from the HF RFID tag M and recording it to the UHF RFID tag M is more advantageous because stricter management can be achieved.

The status M is status information in the distribution form. That is status information necessary for tracing the apparatus such as factory storage factory shipment distribution center reception distribution center shipment and retailer reception is recorded as the status M. The status M is rewritable in each distribution process.

Moreover the UHF RFID tag M stores management server specific information M. The management server specific information M is the same information as the server specific information in the second memory of the HF RFID tag M. When packaging the apparatus M the server specific information is read from the HF RFID tag M and copied to the UHF RFID tag M. This enables unified management to be performed by the same management server for both of the management in the distribution stage using UHF RFID and the management after the apparatus is delivered to the consumer.

Therefore after the apparatus M is delivered to the consumer by reading the management server address information from the HF RFID tag M accessing the management server and making an inquiry by the apparatus product serial number M trace information from manufacture to distribution managed by the management server can be visualized to the consumer. This enhances consumer assurance and safety.

First the HF RFID tag M is added to the assembled product the apparatus M M . This flowchart shows an example where the HF RFID tag is added after the assembly of the apparatus M. However in the case of a structure of a dual interface where the apparatus and the HF RFID tag can both access a shared memory the HF RFID tag M is added to the apparatus M during assembly of the apparatus M.

Next the product serial number of the apparatus M is recorded on the HF RFID tag M M . This is a step of recording the product serial number on the HF RFID tag M in the assembly process through the handy reader writer M. The product serial number is obtained from a management server of the manufacturing line using the handy reader writer or the like and recorded on the HF RFID tag M by proximity wireless communication.

After the product serial number is recorded on the HF RFID tag M the apparatus M is packaged M . The packaging mentioned here denotes packaging for distribution with a cushioning material and the like or containment into a returnable container and the like.

After completing the packaging the UHF RFID tag M is added to the package including a returnable container surface a management label and so on M .

Following this the handy reader writer M communicates with a management server M thereby reading the actual article number associated with the product serial number read from the HF RFID tag M M . The actual article number is a management number used in product distribution and is issued by the management server. The actual article number is in a one to one correspondence with the product serial number.

After the actual article number is read from the management server M the product serial number or the actual article number and the existence identification information indicating that the HF RFID tag M is added to the apparatus M are recorded on the UHF RFID tag M M .

As a result of the above processing the product serial number recorded on the HF RFID tag M which is added to the apparatus M is copied to the UHF RFID tag M after apparatus packaging. Typically the communicable distance of the HF RFID tag is short and so it is difficult to access the HF RFID tag after packaging. In this embodiment however the product serial number or the actual article number is recorded on the UHF RFID tag that has a longer communicable distance than the HF RFID tag and is added to the package. This allows for apparatus distribution management after packaging.

Moreover even if the package or the like is discarded after the apparatus is delivered to the consumer the product serial number and the like can be read by accessing the HF RFID tag added to the apparatus. Thus unified management from distribution to consumer use can be achieved which contributes to traceability over a wide range.

First upon factory shipment of the apparatus M the product serial number or the actual article number is read from the UHF RFID tag M by using a handy reader writer or passing the product through a UHF RFID reader gate. Shipment completion is registered in the management server M that can communicate with the handy reader writer or the UHF RFID reader gate and also the UHF RFID tag M is accessed from the handy reader writer or the UHF RFID reader gate to rewrite the status M in the memory of the UHF RFID tag M to indicate shipment completion M .

After factory shipment the product is retained in the distribution center or the like. Upon subsequent shipment from the distribution center the product serial number or the actual article number is read from the UHF RFID tag M by a handy reader writer or a UHF RFID reader gate and distribution center shipment completion is registered in the management server M and also the status M in the UHF RFID tag M is rewritten to indicate distribution center shipment completion M .

Likewise upon retailer shipment retailer shipment completion is registered in the management server M and the status M in the UHF RFID tag M is rewritten to indicate retailer shipment completion M .

Lastly when the apparatus M reaches the consumer the product serial number is read from the HF RFID tag M by the reading unit of the RF ID reader writer of the TV remote controller or the like and registered in the management server M in association with TV identification information M . Accordingly in this embodiment too the server specific information is recorded in the second memory of HF RFID beforehand. The server specific information in this embodiment indicates the management server M and includes a URL for connecting to the management server M. Hence by reading the HF RFID tag M of the apparatus M using the TV remote controller or the like having the RF reader writer management information from manufacture to distribution can be obtained from the management server M. In addition by managing the product serial number in association with the TV identification information in the management server M it is possible to store a list of apparatuses possessed by the user in the management server in association with the user s TV without managing personal information of the user.

When the user s apparatus has a problem a message warning the user is adequately displayed on the TV with it being possible to prevent a serious accident.

As described above according to this embodiment in the manufacturing stage the apparatus and the package are respectively provided with the HF RFID tag and the UHF RFID tag which each carry existence identification information of the other tag. Moreover the product serial number and the management server specific information stored in the HF RFID tag are copied to the UHF RFID tag. As a result it is possible to provide a system in which management can be performed even after the apparatus reaches the consumer while maintaining distribution management convenience unlike a conventional system where traceability is attained only during distribution.

Though this embodiment describes management from manufacture to delivery to the user the present invention has the same advantageous effects even when the user discards or recycles the apparatus. A procedure in this case can be realized in the same way as in this embodiment.

For example in upon factory shipment the product serial number and the like recorded on the HF RFID tag M added to the apparatus M are copied to the UHF RFID tag M added to the package M after packaging. The same applies to shipment to a disposal facility or shipment to a recycling center other than factory shipment. In the case of shipment to a disposal facility after disposal completion disposal completion is registered in the management server. This enables unified management to be performed while the product is manufactured used by the consumer and put into disposal. Recently there is a problem of illegal disposal due to disposal cost. However referencing HF RFID or UHF RFID of an illegally disposed apparatus makes it instantly clear in which part of the distribution stage the illegal disposal has been conducted. Thus the problem of illegal disposal can be alleviated according to this embodiment.

In the case of shipment to a recycling center since use status information a problem detection status a total use time and the like detected by the use status detection unit are recorded in an area accessible from the HF RFID tag such information can be used for determination of whether or not the apparatus is recyclable price determination and so on. When the apparatus is determined as recyclable information such as TV identification information or personal information managed in the management server M in association with the product serial number may be updated and put to use.

In the case where a video source is a TV and the apparatus is connected to a TV antenna i TV channel information and a TV image reproduction display time are transmitted to the apparatus via the antenna a . The apparatus displays video of the TV channel on the screen b . The image is not horizontally flipped in the case of TV c .

Upon receiving a power supply enable flag from the terminal d the apparatus supplies power to the terminal e .

Referring back to the previous step in the case where the apparatus is connected to the Internet j a video rate and resolution are set according to the attribute information of the apparatus and a server address optimal for the settings a server ID on a DLNA network a stream ID in a server and stream reproduction display time information are transmitted to the apparatus via the RF antenna k .

Referring to a flowchart of the apparatus displays the stream so as to be synchronous with the display time of the video stream being displayed on the terminal on the basis of the server IP address the stream ID and the stream reproduction display time. Once the synchronization has been established the apparatus switches from the previous display to the next display that is the video on the terminal is seamlessly passed to the apparatus h .

In the case where simultaneous display of the video on the terminal and the apparatus is prohibited for copyright protection i when the video display on the apparatus starts seamlessly the video display on the terminal is stopped by means such as transmitting a video stop instruction from the apparatus to the terminal j .

Moreover when the apparatus receives from the terminal a mirror flip identifier for horizontally flipping the video on the mirror display k the apparatus horizontally flips the video in the next step. Meanwhile horizontal flip of characters is not performed m .

According to the above method first the terminal supplies power to the apparatus and activates the apparatus when the apparatus is not in operation. This benefits power saving. After this once the apparatus has started operation then the apparatus supplies power to the terminal. In the case where the terminal receives video data from a server or the like and distributes the video to the apparatus via a network the terminal needs to transmit the video for a long time via an access point by wireless LAN. When transmitting a large amount of data by wireless LAN power consumption is high and there is a possibility that the battery level of the terminal becomes 0. However this embodiment provides an advantageous effect of preventing battery drain by supplying power from the apparatus to the terminal. Moreover the mirror shows a reversed image of a human figure. For example as in the case of a video instruction for toothbrushing leaning effectiveness decreases because right and left are reversed. However this embodiment facilitates leaning by horizontal flipping the image.

The following describes the fourteenth embodiment of the present invention. illustrates environments of home networks assumed in the present embodiment. A home network is established in each of houses M M and M. Each of the home networks is connected to a registration server M via the Internet M. If services provided via a home network are limited within a corresponding house the registration server M may exist in the house. It is also possible that a home network is divided into various places such as a vacation house and an office and that a plurality of home networks are used in a single house such as a dormitory or a room sharing house. It is assumed that in a house there are home appliances which are always connected to the Internet hereinafter referred to as always connected home appliances and home appliances which are not always connected to the Internet hereinafter referred to as non always connected home appliances . The always connected home appliances such as TVs M and M a DVD recorder M and the like are connected to the Internet via a router M or a wireless Access Point wireless AP M. The non always connected home appliances such as a digital camera M a microwave M and a refrigerator M are indirectly connected to the Internet as needed. In the present embodiment a mobile terminal mobile device such as a mobile phone M is also a terminal included in the home network. The devices in the present embodiment can perform simple data communication with other device each other by using a proximity wireless communication device. Each of the devices obtains information of other device using the proximity wireless communication device and registers the obtained information into the registration server M using a home network device.

In the fifteenth embodiment of the present invention a configuration in which the home ID is shared among communication terminals communication devices is described. is a functional block diagram illustrating a function of sharing home ID between communication devices. Communication devices MS and MR included in a home network share the same home ID using a home network M and the home network communication devices M. The communication devices MS and MR may share the home ID using the proximity wireless communication devices M. The communication device according to the present embodiment hereinafter referred to as a transmitting communication device MS can share the home ID with another communication device hereinafter referred to as a receiving communication device MR in the same house by transferring a sharing command and home ID to the receiving communication device via the proximity wireless communication devices M. In the transmitting communication device MS a home ID sharing unit MS in a home ID management unit MS provides the sharing command and the home ID that is held in a home ID storage unit MS to a proximity wireless communication device MS. For example when the proximity wireless communication device MS of the transmitting communication device MS is moved into proximity of a proximity wireless communication device MR of the receiving communication device MR information is transferred between them. Thereby the home ID in the transmitting communication device MS is stored into the proximity wireless communication device MR of the receiving communication device MR. If a home ID storage unit MR in the receiving communication device M does not hold any home ID a home ID sharing unit MR in the receiving communication device MR stores the received home ID into the receiving communication device MR itself. Thereby it is possible to quite easily share the home ID between the communication devices. On the other hand if the home ID storage unit MR already holds home ID the receiving communication device MR transmits both the held home ID and the received home ID to the registration server M. In receiving both home IDs the registration server M manages both home IDs virtually as a single home ID. The registration server M may notify both communication devices of one of the home IDs to unify them. Even in this case the registration server M manages both home IDs virtually as a single home ID since there are non always connected devices in the home network. It is possible that ID of a non always connected device is updated every time of being connected to the home network and the virtual management by the registration server M ends when updating of all of the registration devices namely devices to be registered which are included in the home network are completed. Thereby it is possible to unify originally plural home networks into a single network.

The home ID sharing can be performed by using the home network. When a communication device is to be connected to the home network M and a home network connection detection unit MS of the communication device detects that the communication device does not hold home ID the communication device broadcasts a request for home ID sharing to terminals connected to the home network M. Terminals holding home ID among the terminals connected to the home network M transmit the home ID to the communication device. Thereby the home ID sharing is completed prior to start of communication. Here if a master terminal to respond to requests for home ID sharing is previously selected from among terminals holding the home ID it is possible to prevent that a device requesting home ID sharing receives responses from a plurality of terminals thereby overburdening the home network. If there is no response the communication device terminal requesting home ID sharing may obtain home ID by itself.

A communication device according to the sixteenth embodiment of the present invention is described in detail with reference to the drawings. The communication device according to the present embodiment of the present invention reads terminal apparatus information regarding a terminal apparatus from the terminal apparatus by using a Near Field Communication NFC function and transfers the terminal apparatus information to a server via a general purpose network.

The terminal apparatus Y is a device having a NFC function RF ID unit IC tag or NFC tag emulation . The terminal apparatus Y is for example an electronic terminal apparatus such as a refrigerator a microwave a washing machine a TV or a recording device. The terminal apparatus Y has an internal memory for holding as terminal apparatus information a product serial number that is ID for identifying the terminal apparatus Y use history information of the terminal apparatus Y error information and the like.

The communication device Y has a NFC function for communicating with the NFC function of the terminal apparatus Y by proximity wireless communication. The communication device Y includes a reader writer function of reading the terminal apparatus information from the terminal apparatus Y. The communication device Y is for example a portable device such as a mobile phone or a remote controller terminal of a TV.

The server Y is a server connected to the communication device Y in order to communicate with the communication device Y via a general purpose network such as the Internet. The server Y includes a database DB for accumulating the terminal apparatus information that is read from the terminal apparatus Y to the communication device Y.

The terminal apparatus Y includes a Central Processing Unit CPU Y a failure sensor unit Y a use history logging unit Y a memory Y a modulation unit Y and an antenna Y.

The CPU Y is a unit that controls a system of the terminal apparatus Y. The CPU Y controls the failure sensor unit Y the use history logging unit Y the memory Y and the modulation unit Y which are units included in the terminal apparatus.

The failure sensor unit Y is a unit that detects a location and detail of a failure occurred in each unit included in the terminal apparatus Y. A piece of failure information detected by the failure sensor unit Y is accumulated in a Random Access Memory RAM in the memory Y. The detected failure information is represented by an error code that is uniquely defined depending on a location and condition of the failure.

The use history logging unit Y is a unit that performs logging for each piece of use history information every time the terminal apparatus Y is operated by the user. The use history information applied with logging is accumulated into the RAM Y in the memory Y. In general when use history information is used to examine how a failure has occurred several pieces of use history information up to occurrence of the failure have high priorities of being examined. Therefore it is desirable that the use history logging unit Y according to the present embodiment uses the RAM Y as First In First Out FIFO to chronologically accumulate new pieces of use history information into the RAM Y. Moreover when use history information is used to examine how a failure has occurred it is desirable that several pieces of use history information up to a timing detected by the failure sensor unit Y are stored as priorities into the RAM. Therefore if when five minor failures are detected in using the terminal apparatus Y several pieces of operation use history information up to the five failures are stored as priorities.

The ROM Y previously stores at least a product serial number for uniquely identifying the terminal apparatus Y when the terminal apparatus Y has been shipped. The user of the terminal apparatus Y cannot update the information previously held in the ROM Y. The product serial number is desirably information by which a manufacturer a manufacturing lot number and a manufacturing date of the terminal apparatus Y can be determined. It is also desirable that the ROM Y is embedded in a semiconductor chip of the CPU Y. This structure prevents information during memory access to be easily inspected. Therefore secret key information for authentication and encrypted communication in proximity wireless communication with the communication device can be recorded on the ROMY when shipping.

The RAMY is a rewritable memory in which the failure information detected by the failure sensor unit Y and the use history information applied with logging of the use history logging unit Y are accumulated.

The modulation unit Y is a unit that modulates communication data for proximity wireless communication with the communication device Y. The modulation method varies depending on employed NFC standard. For example Amplitude Shift Keying ASK Frequency Shift Keying FSK Phase Shift Keying PSK and the like are used.

An example of the antenna Y is a loop antenna. The antenna Y generates electromagnetic induction from radio waves emitted from an antenna of the communication device Y. The antenna Y performs at least processing of providing power to the modulation unit Y and the memory Y to be operated. In addition the antenna Y overlaps reflected waves of the radio waves emitted from the communication device Y with signals modulated by the modulation unit Y to transmit the terminal apparatus information that is stored in the memory Y to the communication device Y.

As described above the terminal apparatus according to the present embodiment detects failures occurred in each unit included in the terminal apparatus. Then the terminal apparatus performs logging for use histories to accumulate the use histories into the memory. Then if the terminal apparatus is moved into proximity of the communication device Y to be capable of performing proximity wireless communication with the communication device Y the terminal apparatus can transmit the terminal apparatus information stored in the memory into the communication device Y.

Next the communication device Y according to the present embodiment is described. It should be noted that the subject of the present embodiment is the communication device Y.

The communication device Y includes an antenna Y a CPU Y a demodulation unit Y a memory Y a position information determination unit Y a GPS antenna Y a communication memory Y an information adding unit Y and a communication unit Y.

The antenna Y performs polling for calling any terminal apparatuses in order to search for a terminal apparatus communicable with the communication device Y by proximity wireless communication. In receiving a response to the polling the antenna Y establishes proximity wireless communication with the responding terminal apparatus Y to receive modulated terminal apparatus information from the terminal apparatus Y and provides the modulated terminal apparatus information to the demodulation unit Y. In general the polling processing is always necessary even if there is no terminal apparatus communicable with the communication device Y by proximity wireless communication. This consumes power. Therefore the communication device Y is provided with a switch not shown for controlling a timing of start of polling so that polling processing is performed when the switch is turned ON. This structure can significantly shorten a time period of the polling. As a result the power consumption amount of the communication device Y can be considerably reduced. This is especially efficient when the communication device Y operates by a limited power source such as a battery.

The CPU Y is a unit that controls a system of the communication device Y. The CPU Y controls operations of each unit included in the communication device Y.

The modulation unit Y is a unit that demodulates data modulated by the modulation unit Y of the terminal apparatus Y. The demodulated terminal apparatus information is temporarily stored into the memory Y.

The ROM Y is a memory that cannot be rewritten by the outside. The ROMY previously holds a product serial number for uniquely identifying the communication device Y when the communication device Y has been shipped. The product serial number is desirably information by which a manufacturer a manufacturing lot number and a manufacturing date of the communication device Y can be determined. It is also desirable that the ROMY is embedded in a semiconductor chip of the CPU Y. This structure prevents information during memory access from being easily inspected. Therefore secret key information for authentication and encrypted communication in proximity wireless communication with the terminal apparatus Y can be recorded on the ROM Y when shipping.

The RAM Y holds the terminal apparatus information of the terminal apparatus Y which is received by the antenna Y and demodulated by the demodulation unit Y. As described earlier the terminal apparatus information includes the product serial number for uniquely identifying the terminal apparatus Y the use history information of the terminal apparatus Y and failure codes.

The position information determination unit Y is a group of sensors for determining a location of the communication device Y. The position information determination unit Y includes a latitude longitude positioning unit GPS Y an altitude positioning unit Y and a position correction unit Y. The position information determination unit Y does not need to always determine a location of the communication device Y location information if the location information is generated at a timing where the communication device Y becomes communicable with the terminal apparatus Y using the antenna Y. As a result power consumption of the communication device Y can be reduced.

The latitude longitude positioning unit Y is a general Global Positioning System GPS that receives radio waves from satellites to perform 3 dimensional 3D positioning of the earth.

The altitude positioning unit Y is a general altimeter. The altitude positioning unit Y may be any various altimeters such as an altimeter receiving radio waves to extract an altitude an altimeter detecting an air pressure to measure an altitude and the like. The altitude positioning unit Y is provide to the communication device Y so that an altitude can be detected even in a building where GPS cannot receive radio waves.

The position correction unit Y is a unit that corrects a value measured by the GPS to generate more accurate position information. In general when radio waves from satellites cannot be received in a room or the like the GPS cannot generate correct position information. Therefore the position correction unit Y includes an electronic compass and a 6 axis acceleration sensor. The electronic compass is used to detect a direction in which the communication device Y moves and the acceleration sensor is used to detect a speed of the movement. Thereby it is possible to correct position information generated by the GPS in a location where the GPS is difficult.

Regarding the information adding unit Y when the terminal apparatus information that has been provided from the terminal apparatus Y and stored into the memory Y is to be transmitted to the server Y the information adding unit Y adds a the product serial number of the communication device Y that is stored in the ROM Y in the memory Y and b the position information measured by the position information determination unit Y to the terminal apparatus information. This enables the server Y to determine which communication device transmits the terminal apparatus information where the transmitting terminal apparatus is located for example and then manage the results of the determination. For example if a manufacturer of the terminal apparatus finds that the terminal apparatus has a possibility of causing serious accidents the information in the database of the server Y allows the manufacturer to determine where the terminal apparatus is. Thereby the possibility of causing serious accidents can be reduced. As a result it is possible to increase sense of safety and security of the user using the terminal apparatus. Furthermore when the communication device Y has a display function as mobile phone terminals have the above described terminal apparatus information generated by the information adding unit Y makes it possible to determine with which communication device the terminal apparatus having a possibility of accidents can perform proximity wireless communication and thereby display a notification of the possibility of accidents in the terminal apparatus on the communication device Y. Thereby even if such a terminal apparatus generally does not have any display function and is not connected to a general purpose network it is possible to transmit a notification of the accident possibility of the terminal apparatus to the communication device Y in order to warn the user using the terminal apparatus. As a result it is also possible to provide a terminal apparatus that can increase sense of safety and security of the user using the terminal apparatus.

The communication unit Y is a unit that communicates with the server Y via the Internet by using general LAN wireless LAN or mobile phone network. Thereby the communication unit Y transmits to the server Y the terminal apparatus information added with the product serial number and the position information of the communication device Y as the communication device information. Here the added terminal apparatus information is further added with a MAC address and an Internet Protocol IP address to be transmitted to the server Y.

The server Y is connected to the communication device Y via a general purpose network such as the Internet. The server Y includes a device management database DB for managing the terminal apparatus information.

The device management DB Y stores the terminal apparatus information in association with the communication device information. In the device management DB Y according to the present embodiment the communication device information is managed as parent device information and the terminal apparatus information is managed as child device information in association with the parent device information. The child device information is added with the position information generated by the communication device in order to manage further information indicating where the terminal apparatus is.

As described above in the system according to the present embodiment the terminal apparatus information is read from the terminal apparatus by the communication device using proximity wireless communication. The communication device is touched to the terminal apparatus to communicate with the terminal apparatus to obtain the terminal apparatus information. The communication device adds a product serial number and position information of the communication device to the obtained terminal apparatus information and transmits the generated information to the server. Thereby the server can manage the communication device information as parent device information in association with the terminal apparatus information as child device information. Therefore if a manufacturer of the terminal apparatus finds that the terminal apparatus would cause serious accidents the manufacture can easily recall the terminal apparatus or display a notification of a possibility of the serious accident on a display unit of the communication device. As a result it is possible to achieve traceability of the products and to provide the users of the products with safety and security.

First the communication device Y performs polling to the terminal apparatus Y to establish proximity wireless communication. In terms of power consumption amount of the communication device it is desirable as described earlier that a switch operated by a user is provided so that the polling is performed while the switch is being pressed or the polling starts when the switch is pressed SY .

Next the terminal apparatus Y sends a response to the polling to the communication device Y in order to establish proximity wireless communication with the communication device Y SY . At this timing the position information determination unit Y of the communication device Y generates position information of a current position to be used as position information of the terminal apparatus Y. The generation of the position information is not limited to be performed only in completion of the polling. The position information may be generated any time while the proximity wireless communication is established after the response to the polling. It is important to determine the position of the terminal apparatus at a high accuracy by generating position information of the position where proximity wireless communication which can be performed when a distance between communicating devices is only several centimeters is established.

After the establishment of the proximity wireless communication at SY mutual authentication between the terminal apparatus Y and the communication device Y is performed using general public key cryptography and also key sharing is temporarily performed to share cryptography keys generated by the terminal apparatus Y and the communication device Y between the devices SY . After that while the proximity wireless communication is established data on the communication path is encrypted using the cryptography keys to communicate between the devices. As a result tapping of the data can be prevented.

After completing the key sharing the terminal apparatus Y transmits the terminal apparatus information recorded on the memory Y of the terminal apparatus Y to the communication device Y SY .

When the communication device Y receives the terminal apparatus information from the terminal apparatus Y the communication device Y stores the received terminal apparatus information into the memory Y of the communication device Y SY .

When the communication device Y completes receiving of the terminal apparatus information from the terminal apparatus Y the communication device Y issues a connection request to the server Y SY .

The server Y responds to the connection request of SY to establish communication with the communication device Y SY .

After establishing communication between the communication device Y and the server Y the communication device Y adds the communication device information of the communication device Y to the terminal apparatus information of the terminal apparatus Y to be transmitted to the server Y SY . Here the communication device information includes for example a product serial number of the communication device Y position information of the communication device Y when proximity wireless communication with the terminal apparatus Y is established an e mail address of the user registered in the communication device Y if any a connection account to the server Y registered in the communication device Y if any and the like.

After adding the communication device information to the terminal apparatus information at SY then the communication device Y transmits the terminal apparatus information added with the communication device information to the server Y SY .

The server Y registers the terminal apparatus information added with the communication device information received from the communication device Y into the device management DB Y. Thereby the processing is completed.

Thereby the server Y can manage pieces of information regarding devices for each house by managing information of each terminal apparatus Y which establishes proximity wireless communication with the communication device Y touching the terminal apparatus Y in association with identification information product serial number or the like of the communication device Y. In addition for the position information registered as information of a position at which the terminal apparatus is equipped position information indicating a position where proximity wireless communication is established between the communication device Y and the terminal apparatus Y is used. Since the proximity wireless communication according to the present embodiment is performed at common High Frequency HF band of 13.56 MHz the communication is possible when a distance between communicating devices is within several centimeters. Therefore if the position information detected in establishing proximity wireless communication is set to be position information of the terminal apparatus a maximum error is several centimeters which results in assuring an enough accuracy to achieve traceability of the products.

When the user intends to perform user registration or the like for a terminal apparatus using the communication device Y in purchasing the terminal apparatus the following processing is performed. The user equips the terminal apparatus and touches the terminal apparatus by the communication device Y. Thereby terminal apparatus information of the terminal information is provided to the communication device Y using proximity wireless communication. The communication device Y adds the communication device information of the communication device Y to the terminal apparatus information in order to be transmitted to the server Y. In receiving the terminal apparatus information added with the communication device information the server Y manages the terminal apparatus information as child device information and the communication device information as parent device information in association with each other in the device management DB. For example in the device management DB terminal apparatus information of a terminal apparatus for example a microwave Y terminal apparatus information of a terminal apparatus for example a washing machine Y and terminal apparatus information of a terminal apparatus for example a TV Y all of which are touched by a communication device Y are managed in association with a product serial number of the communication device Y. Each of the terminal apparatus information includes whereabout information longitude latitude altitude and the like and use status information use histories error codes use time periods and the like . Thereby the server Y can manage pieces of information of devices for each house because the communication device Y touches these terminal apparatuses. As a result traceability of the terminal apparatuses can be achieved.

Furthermore the communication device generates position information when proximity wireless communication with the terminal apparatus is established and uses the generated position information as position information of the terminal apparatus. Therefore it is possible to register a position of the terminal apparatus with an error of several centimeters which is a distance capable for proximity wireless communication between devices. Since the GPS in the communication device is used to generate the position information of the terminal apparatus each terminal apparatus does not have a GPS thereby reducing a cost.

First the description is given for the situation where the communication device Y touches the terminal apparatus Y to register information of the terminal apparatus Y into the server Y.

When the user operates the communication device Y to start up a reader writer application program of the communication device Y the communication device Y displays on a display screen a message persuading the user to make the communication device Y touch the terminal apparatus Y for proximity wireless communication Y .

When the communication device Y touches the terminal apparatus Y proximity wireless communication is established between the devices. The communication device Y reads terminal apparatus information of the terminal apparatus Y from the terminal apparatus Y generates position information of a current position and provides the pieces of information to the memory in which the pieces of information are temporarily stored. Then the communication device Y establishes communication with the server Y and transmits the terminal apparatus information added with communication device information of the communication device Y to the server Y. The server Y determines whether or not the terminal apparatus information has already been registered in the device management DB. If it is determined that the terminal apparatus information has not yet been registered in the device management DB then the server Y causes the communication device Y to display on the display unit of the communication device Y a message asking the user whether or not to register information of the terminal apparatus Y Y .

Next when the user selects to register the information of the terminal apparatus Y the server Y causes the communication device Y to display a message asking the user whether or not to register position information of the terminal apparatus. When the user selects to register the position information the server Y registers the position information associated with the terminal apparatus information transmitted from the communication device Y to the server Y into the device management DB of the server Y as position information of the terminal apparatus Y Y .

Next the description is given for the situation where the position information of the terminal apparatus Y is different from the position information registered in the device management DB of the server Y.

When the user operates the communication device Y to start up a reader writer application program of the communication device Y the communication device Y displays on the display screen a message persuading the user to make the communication device Y to touch the terminal apparatus Y by the communication device Y to perform proximity wireless communication Y .

When the communication device Y touches the terminal apparatus Y proximity wireless communication is established between the devices. The communication device Y reads terminal apparatus information of the terminal apparatus Y from the terminal apparatus Y generates position information and transmits the terminal apparatus information added with communication device information of the communication device Y to the server Y. The server Y compares a a product serial number of the terminal apparatus which is included in the received terminal apparatus information to b a product serial number registered in the device management DB in order to examine whether or not information of the touched terminal apparatus is already registered in the server Y. In addition the server Y extracts the position information from the received communication device information and examines whether or not the extracted position information is identical to the position information registered in the device management DB. Since the position information has an error of course the determination is made to compare the position information to a threshold value that has the order of several centimeters in other words the threshold value is a value corresponding to a distance between devices capable for proximity wireless communication . If it is determined that the extracted position information is different from the registered position information the server Y causes the communication device Y to display on the display unit a message notifying the user of the result of the determination Y .

Then the communication device Y displays on the display unit a message asking the user whether or not to update the position information of the terminal apparatus Y to information of a current position of the terminal apparatus Y Y .

If the user selects to update the position information the communication device Y registers the position information generated by touching the terminal apparatus Y by the communication device Y into the device management DB of the server Y as new position information of the terminal apparatus Y.

Therefore according to the present embodiment even if the position information that has been registered is changed because the terminal apparatus Y is moved and equipped at a different location it is possible to update the position information to new position information that is generated by touching the terminal apparatus Y by the communication device Y. Thereby an accuracy of traceability of the terminal apparatus Y can be improved.

Referring to the RF ID unit N includes an antenna N a power supply unit N a memory N a reproducing unit N and a data transfer unit N. The antenna N is used for proximity wireless communication. The power supply unit N is supplied with power via the antenna N. The memory N is a nonvolatile memory in which pieces of individual identification information are stored. The reproducing unit N reproduces data registered in the memory N. The data transfer unit N transmits the data registered in the memory N into the outside via the antenna N.

The memory N stores UID NA a part number NB server specific information NC and an operation program ND. The UID NA is used to identify a product having the RF ID unit N. The part number NB is used to identify a part number of the product having the RF ID unit N. The server specific information NC is used to specify the registration server N. The operation program ND is to be executed by the mobile device N.

Referring to the mobile device N includes a RF ID reader writer N a RF ID storage unit N a program execution unit N a data processing unit N a memory unit N a display unit N a communication I F unit N a transmission unit N a receiving unit N a communication unit N a GPS N a 6 axis sensor N a position information storage unit N and a CPU N. The RF ID reader writer N receives data from the RF ID unit N. The RF ID storage unit N holds the data provided from the RF ID reader writer N. The program execution unit N executes a program included in the data. The data processing unit N performs data processing for image data included in the data. The memory unit N holds the image data processed by the data processing unit N. The display unit N displays the image temporarily stored in the memory unit N. The communication I F unit N connects the mobile device N to other device via a general purpose network. The transmission unit N transmits data to the outside via the communication I F unit N. The receiving unit N receives data from the outside via the communication I F unit N. The communication unit N communicates with other device via a general purpose network by using the communication I F unit N. The GPS N measures a position of the mobile device N to generate absolute position information of the mobile device N. The 6 axis sensor N measures a position of the mobile device N to generate relative position information of the mobile device N. The position information storage unit N holds results of the measurement of the GPS N and the 6 axis sensor N. The CPU N analyzes the position information stored in the position information storage unit N.

Referring to the registration server N includes a communication I F unit N a transmission unit N a receiving unit N a communication unit N a product information management unit N an image data storage unit N a program storage unit N a position information generation unit N and a product control unit N. The communication I F unit N connects the registration server N to other device via a general purpose network. The transmission unit N transmits data to the outside via the communication I F unit N. The receiving unit N receives data from the outside via the communication I F unit N. The communication unit N communicates with other device via a general purpose network by using the communication I F unit N. The product information management unit N manages product information received from the communication I F unit N. The image data storage unit N holds image data to be transmitted to the mobile device N. The program storage unit N holds a program to be transmitted to the mobile device N. The position information generation unit N generates a map indicating position relationships among the products having the RF ID unit N by combining the pieces of product information stored in the product information management unit N. The product control unit N controls the products having the RF ID units N by using the pieces of product information stored in the product information management unit N and information of a current position of the mobile device N.

The present embodiment differs from the other embodiments in that the products in the house are controlled based on a product map generated from a the position information of the mobile device N and b pieces of position information of the products having the RF ID units N.

Referring to the arrangement diagram of in the house there are a TV NA a BD recorder NB an air conditioner NC and a FF heater NK in a living room on the first floor an air conditioner ND and a fire alarm NE in an European style room on the first floor an air conditioner NF and a fire alarm NG in a Japanese style room on the first floor a TV NI and an air conditioner NJ on the second floor and a solar panel NH on a roof.

As described earlier is the diagram illustrating an example of the system according to the present embodiment. is a configuration of home appliances in the arrangement of .

This system includes products from the TV NA to the FF heater NK the mobile device N illustrated in the registration server N illustrated in a home network N and an external network N. Each of the products NA to NK has a the RF ID unit N illustrated in and b a communication I F unit N used to communicate with other products and devices via a general purpose network. The home network N connects the products NA to NK to the mobile device N. The external network N connects the home network N to the registration server N.

The following describes an example of a method of registering information regarding a product having the RF ID unit N into the registration server N with reference to .

First when a user moves the mobile device N to bring the RF ID reader writer N of the mobile device N to proximity of an antenna N of the TV NA the RF ID reader writer N supplies power to a power supply unit N of the TV NA via the antenna N to provide power to each unit in the RF ID unit N in .

The reproducing unit N in the RF ID unit N generates product information. The product information includes the UID NA the part number ID NB the server specific information NC and the operation program ND stored in the memory N.

The data transfer unit N in the RF ID unit N modulates the product information and transmits the modulated product information to the RF ID reader writer N of the mobile device N via the antenna N in .

The RF ID reader writer N in the mobile device N receives the product information and stores the received product information into the RF ID storage unit N.

The program execution unit N executes the operation program included in the product information stored in the RF ID storage unit N.

Here the program execution unit N executes the operation program to generate server registration information to be transmitted to the address of the registration server N which is designated in the product information .

The GPS N in the mobile device N constantly operates while the mobile device N is active. Detected results of the GPS N are stored in the position information storage unit N.

The 6 axis sensor N operates when the mobile device N is outside an area in which the GPS N can perform positioning. The 6 axis sensor N stores detected results into the position information storage unit N.

The program execution unit N generates position information to be included in the server registration information from the results detected by the GPS N and the 6 axis sensor N which are stored in the position information storage unit N.

From the generated position information and information stored in the RF ID storage unit N the program execution unit N generates the server registration information as illustrated in .

Next the communication unit N designates an address of the registration server N which is recorded on the RF ID storage unit N to be a destination address of the server registration information.

The transmission unit N transmits the generated server registration information via the communication I F unit N in .

The receiving unit N of the registration server N receives the server registration information via the communication I F unit N.

The communication unit N confirms the login ID and the password in the server registration information.

If the login ID and the password are correct the registration server N stores into the product information management unit N the part number ID the UID and the position information included in the server registration information.

Next when the registration of the product information of the TV NA is completed the communication unit N in the registration server N generates a server registration completion notification. The server registration completion notification includes a image data that is previously stored in the image data storage unit N and b the operation program stored in the program storage unit N. Then the communication unit N designates an address of the mobile device N to be a destination of the server registration completion notification.

The transmission unit N transmits the generated server registration completion notification via the communication I F unit N in .

The receiving unit N of the registration server N receives the server registration completion notification via the communication I F unit N.

The communication unit N in the mobile device N confirms the destination address of the server registration completion notification and provides the received server registration completion notification to the program execution unit N.

The program execution unit N executes the operation program included in the server registration completion notification. Here the program execution unit N executes the operation program to display image data on the display unit N. 

In more detail the program execution unit N instructs the data processing unit N to perform processing for the image data.

The data processing unit N thereby performs data processing for the image data. For example if downloaded image data is compressed the data processing unit N decompresses the image data. If the image data is encrypted the data processing unit N decrypts the image data. The data processing unit N may also arrange the downloaded image data in an image display style based on an image display style sheet.

In completing the data processing the data processing unit N provides the processed image data to the memory unit N in which the processed image data is temporarily stored.

The display unit N displays the image data stored in the memory unit N. In this example the image data accumulated in the memory unit N is used to notify a user of that registration of information of a corresponding product is completed without any problem.

If the RF ID unit N receives power from the mobile device N then the processing proceeds to N. Otherwise the processing returns to N.

At N the RF ID unit N generates product information including information stored in the memory N. Then at N the RF ID unit N transmits the product information from the antenna N to the mobile device N. Thereby the processing is completed.

First at N the RF ID reader writer N of the mobile device N supplies power to the RF ID unit N of the target product.

Next the mobile device N waits for product information from the RF ID unit N of the target product N .

If the mobile device N receives product information from the RF ID unit N then the processing proceeds to N. Otherwise the processing returns to N to supply power to the RF ID unit N again.

At N the mobile device N analyzes the received product information and thereby executes an operation program included in the product information.

At N the mobile device N generates server registration information including information of the determined position. At N the mobile device N transmits the generated server registration information to the registration server N via the communication I F unit N.

Next the mobile device N waits for a server registration completion notification from the registration server N N .

If the mobile device N receives the server registration completion notification from the registration server N then the processing proceeds to N.

At N the mobile device N analyzes the server registration completion notification. Then at N the mobile device N displays on the display unit N image data included in the server registration completion notification. Thereby the processing is completed.

First the registration server N waits for server registration information from the mobile device N N .

If the registration server N receives the server registration information from the mobile device N then the processing proceeds to N. Otherwise the processing returns to N.

At N the registration server N analyzes the received server registration information to determine whether or not a login name and a password included in the server registration information are correct. If the login name and the password are correct then at N the registration server N stores the product information into the product information management unit N.

At N the registration server N generates a server registration completion notification that includes an operation program and image data. At N the registration server N transmits the generated server registration completion notification from the communication I F unit N to the mobile device N. Thereby the processing is completed.

Next the following describes an example of a method of controlling a product having the RF ID unit N by using the position information of the mobile device N with reference to .

The CPU N in the mobile device N monitors the position information stored in the position information storage unit N to determine whether or not predetermined conditions are satisfied. If the predetermined conditions are satisfied then the CPU N generates positional information including position information that is information of a current position of the mobile device N hereinafter referred to as current position information .

The positional information includes a second server login ID and a second server login password which are regarding the registration server N and b the current position information of the mobile device N. The second server login ID and the second server login password are previously obtained in purchasing the product and stored in a memory not shown . The current position information is obtained from the position information storage unit N.

The communication unit N designates as a destination of the positional information an address of the registration server N in which information of the product is registered.

The transmission unit N transmits the positional information to the registration server N via the communication I F unit N in .

The receiving unit N in the registration server N receives the positional information via the communication I F unit N.

The communication unit N in the registration server N confirms the second server login ID and the second server login password in the received positional information.

If the second server login ID and the second server login password are correct then the communication unit N provides the positional information to the product control unit N.

The product control unit N provides the second server login ID to the position information generation unit N.

According to instructions from the product control unit N the position information generation unit N obtains pieces of product information as illustrated in from the product information management unit N based on the second server login ID. Then the position information generation unit N generates a product map from pieces of position information of the respective products. The product map shows positions of the products in the house illustrated in . The position information generation unit N provides the generated product map to the product control unit N.

The product map is a 3D map or 3D product map in which illustrations of the products are arranged at positions based on the respective pieces of position information.

The product control unit N controls the products from the TV NA to the FF heater NK by using a the current position information of the mobile device N included in the positional information and b the product map or home appliance map generated by the position information generation unit N. In this example the product control unit N turns ON a product located most close to the current position information received from the mobile device N. Here the product control unit N generates product control information including an instruction for turning ON the air conditioner NJ.

The first product control information includes part number ID of the air conditioner NJ UID of the air conditioner NJ and a product control command for turning ON the air conditioner NJ.

The communication unit N designates an address of the mobile device N to be a designation of the first product control information.

The transmission unit N transmits the first product control information to the mobile device N via the communication I F unit N in .

After receiving the first product control information the mobile device N transfers the first product control information to the air conditioner NJ based on the part number ID and the UID in the first product control information in .

When the air conditioner NJ receives the first product control information from the communication I F unit N the air conditioner NJ turns ON a power source of the air conditioner NJ if the power source is OFF.

Next the product control unit N turns OFF a product located the farthest from the current position information received from the mobile device N. Here the product control unit N generates product control information including an instruction for turning OFF the TV NA.

The second product control information includes part number ID of the TV NA UID of the TV NA and a product control command for turning OFF the TV NA.

The communication unit N designates an address of the mobile device N to be a designation of the second product control information.

The transmission unit N transmits the second product control information to the mobile device N via the communication I F unit N in .

After receiving the second product control information the mobile device N transfers the second product control information to the TV NA based on the part number ID and the UID in the second product control information in .

When the TV NA receives the second product control information from the communication I F unit N the TV NA turns OFF a power source of the TV NA if the power source is ON.

As described above according to the present embodiment near field communication of RF ID technology and position information are used to manage in the registration server N positions of products each having the RF ID unit N. Thereby it is possible to automatically control the products according to a current position of the mobile device N.

Regarding the position information information detected by the 6 axis sensor N motion sensor that measures relative position information is used as position information. Therefore it is possible to update the position information by using the detected results of the 6 axis sensor N when the mobile device N is outside an area in which the GPS N can perform positioning. As a result correct position information can be obtained even outside the area.

It should be noted that the mobile device N according to the present embodiment has been described to have the GPS N and the 6 axis sensor N but the mobile device N is not limited to the above described structure. For example the mobile device N may have only the 6 axis sensor N. In this aspect the product information management unit N in the registration server N stores pieces of relative position information of products which are with respect to a reference point position information of the TV NA which is first registered as illustrated in . Here a product map generated by the position information generation unit N has axes of an x coordinate a y coordinate and a z coordinate as illustrated in .

It should also be noted that it has been described in the present embodiment that a part number ID and UID of a target product which are stored in the RF ID unit N of the target product and b position information of the mobile device N are registered to the registration server N but the present invention is not limited to the above. For example if the registration server N receives again server registration information regarding a product for which registration has already been completed the registration server N may perform processing as illustrated in .

The following describes . Referring to the table includes a accuracy identifiers for identifying an accuracy of position information b part number ID in association with each accuracy identifier and c processing to be performed when position information in re received server registration information is different from position information registered in the product information management unit N.

If the registration server N determines based on the part number ID and the UID included in the re received server registration information that the position information has already been registered in the product information management unit N then the registration server N checks the part number ID. If the registration server N determines based on the part number ID and the UID included in the re received server registration information that the position information has already been registered in the product information management unit N then the registration server N checks the part number ID.

If the part number ID indicates an air conditioner a solar panel or a fire alarm then the registration server N notifies the mobile device N of the position information stored in the product information management unit N. The mobile device N thereby corrects current position information of the mobile device N based on the position information received from the registration server N.

It should also be noted that shows the two kinds of accuracy identifiers but the accuracy identifiers are not limited to the two kinds. It is possible to set more than two kinds of accuracy identifiers for respective different processing.

It should also be noted that the product control unit N in the present embodiment is included in the registration server N but the present invention is not limited to the structure. For example the product control unit N may be included in the mobile device N so that the product control unit N obtains a product map from the registration server N to control products. Besides in the mobile device N the product control unit N may also be included in a home server not illustrated that is connected to the home network N. In this aspect the mobile device N transmits position information to the home server and obtains a product map from the home server.

It should be noted that the mobile device N according to the present embodiment is connected to the registration server N via the home network N and the external network N by using the communication I F unit general purpose I F unit N but the present invention is not limited to the above. For example the mobile device N may have a function of serving as a mobile phone so that the mobile device N can be connected to the registration server N via at least a mobile phone network for example Long Term Evolution LTE by using an interface connectable to the mobile phone network in stead of the communication I F unit N see . Furthermore the mobile device N may have an interface connectable to a circuit network such as WiMAX so as to be connected to the registration server N via at least the WiMAX network. Any other networks can be used to connect the mobile device N to the registration server N.

It should also be noted that in the present embodiment the product map generated by the position information generation unit N is used to determine how to control products but the present invention is not limited to the structure. For example image data of the product map generated by the position information generation unit N is transmitted to the mobile device N that displays the image data on the display unit N.

It should also be noted that in the present embodiment the position information generation unit N generates the product map based on the information illustrated in but the present invention is not limited to the above. For example pieces product information of products located near the position information of the mobile device N in the same house are detected from the product information management unit N and then used to generate a product map regarding nearby products in the house. In this aspect the product control unit N performs product control by combining the product map of and the product map of nearby products. For instance it is assumed in the present embodiment that the TV NA which is the farthest from the mobile device N is turned OFF but there is a solar panel near the mobile device N in the house. Under the assumption the product control unit N controls the TV NA to be turned ON for example.

It should also be noted that in the present embodiment the product information management unit N in the registration server N stores part number ID UID and position information of each product but the present invention is not limited to the above. For example it is also possible that a power state ON or OFF is obtained in real time from each product via the communication I F unit N of the product and then managed in the product information management unit N. The product control unit N thereby controls power of the TV NA located the farthest from the mobile device N to be kept ON when the predetermined number of products are powered OFF although it has been described n the above description that the product control unit N turns OFF the TV NA.

It should also be noted that in the present embodiment the product control unit N turns OFF a product located the farthest from the mobile device N and turns ON a product closest to the mobile device N. However the present invention is not limited to the above.

The product control unit N may control power to be turned ON or OFF for a plurality of products based on the position information of the mobile device N.

It should also be noted that in the present embodiment the product control unit N turns OFF a product located the farthest from the mobile device N and turns ON a product closest to the mobile device N. However the present invention is not limited to the above. For example it is also possible that the CPU N in the mobile device N stores position information as a movement history into a memory not illustrated and regularly provides the movement history to the registration server N. In this aspect the registration server N estimates from the movement histories of the mobile device N which product is located in which room or which floor and manages results of the estimation. It is further possible that the product control unit N controls power to be turned ON or OFF for each product in the same house based on the estimation results. For example if it is estimated from the movement histories that the TV NA and the air conditioner NC are located in the same room the product control unit N turns OFF the air conditioner NC when the TV NA is turned OFF.

In addition to the moving histories it is also possible to obtain a time of switching ON or OFF each product thereby estimating which product is in the same room or the same floor.

It should also be noted that in the present embodiment the product information management unit N manages the product information illustrated in or and the position information generation unit N generates the product map illustrated in . However the present invention is not limited to the above. For example it is also possible that image data of a room arrangement created by the user is transmitted from the mobile device N to the registration server N and therefore managed by the product information management unit N. In this aspect the position information generation unit N generates a product map as illustrated in by combining a product information illustrated in or and b the image data of the room arrangement.

Here private information such as the image data of room arrangement may be applied with encryption different from encryption employed for the product information and then transmitted from the mobile device N to the registration server N.

It is also possible that private information such as the image data of room arrangement is transmitted to a server different from the server receiving the product information and a product map is generated with reference to the different server when the registration server N generates the product map.

It should also be noted that the present embodiment may be combined with any other embodiments. For example it is possible that the function of the terminal apparatus Y according to the sixteenth embodiment is provided to the RF ID unit N according to the present embodiment and the function of the communication device Y according to the sixteenth embodiment is provided to the mobile device N according to the present embodiment. Thereby the series of processes including the polling the mutual authentication and the key sharing illustrated in can be performed prior to the product registration processing of . Any combination of the embodiments is within a scope of the present invention.

It should also be noted that the units in the above described embodiments may be typically implemented into a Large Scale Integration LSI which is an integrated circuit. These may be integrated separately or a part or all of them may be integrated into a single chip. Here the integrated circuit is referred to as a LSI but the integrated circuit can be called an IC a system LSI a super LSI or an ultra LSI depending on their degrees of integration. The technique of integrated circuit is not limited to the LSI and it may be implemented as a dedicated circuit or a general purpose processor. It is also possible to use a Field Programmable Gate Array FPGA that can be programmed after manufacturing the LSI or a reconfigurable processor in which connection and setting of circuit cells inside the LSI can be reconfigured.

Furthermore if due to the progress of semiconductor technologies or their derivations new technologies for integrated circuits appear to be replaced with the LSIs it is of course possible to use such technologies to implement the functional blocks as an integrated circuit. For example biotechnology and the like can be applied to the above implementation.

The following describes a communication system according to the eighteenth embodiment of the present invention. The communication system according to the present embodiment includes a terminal apparatus a communication device and a server device. The terminal apparatus has a proximity wireless communication function. The communication device such as a mobile device performs proximity wireless communication with the terminal apparatus. The server device is connected to the communication device via a general purpose network such as the Internet or a mobile telephone communication network. In this communication system when the communication device points the terminal apparatus the communication device becomes capable of operating the terminal apparatus based on sensor information or the like detected by the communication device. The configuration is described in more detail with reference to corresponding figures.

The terminal apparatus and the communication device can communicate with each other by using proximity wireless communication. Here the proximity wireless communication in the present embodiment is assumed to be 1 communication between a Radio Frequency Identification RF ID tag ISO1443 and a reader writer which is performed by electromagnetic induction of 13.56 MHz band High Frequency HF band radio waves between 52 MHz to 954 MHz band Super High Frequency UHF band or the like or 2 communication of Near Field Communication NFC ISO IEC 21481 of 13.56 MHz band. A distance communication distance available for the proximity wireless communication is generally limited to several dozens of centimeters in the HF band or several centimeters in the UHF band. Therefore the communication device is presented to or touches the terminal apparatus to establish the communication the proximity wireless communication .

In the present embodiment the description is given for the configuration in which the communication device side has a reader writer function and the terminal apparatus has an IC tag function. However the present embodiment is characterized in that the terminal apparatus and the communication device can exchange information by using proximity wireless communication. In other words the present embodiment is not limited to the above combination. For example it is also possible in the present embodiment that the communication device side has the IC tag function and the terminal apparatus side has the reader writer function. Moreover for the NFC a peer to peer P2P communication function a card emulation and a reader writer emulation have been standardized. These functions make no difference which device apparatus should have an IC tag or a reader writer. Therefore for the sake of simplicity in the description it is assumed in the present embodiment that the communication device side has a reader writer function and the terminal apparatus has an IC tag function.

The terminal apparatus such as an air conditioner or a TV is a target home appliance to be operated by the communication device . The terminal apparatus includes a controller a memory a proximity wireless communication unit and an antenna .

The controller is a system controller of the terminal apparatus . An example of the controller is a Central Processing Unit CPU . The controller performs at least system control for processing units in the terminal apparatus except the proximity wireless communication unit .

The memory is a memory that is capable of holding control software for operating the terminal apparatus by the controller and various data detected by the terminal apparatus . Examples of the memory are a Random Access Memory RAM a non volatile memory and the like. The memory is generally embedded in a Large Scale Integration LSI of the controller . However the memory may be outside the terminal apparatus .

The proximity wireless communication unit performs communication with the reader writer function unit hereinafter referred to as a reader writer in the communication device . The proximity wireless communication unit modulates data to be transmitted to the reader writer and demodulates data transmitted from the reader writer.

In addition the proximity wireless communication unit generates power from radio waves received from the reader writer in order to establish at least proximity wireless communication and also extracts clock signals from the received radio waves. At least the proximity wireless communication unit is thereby operated by the power and clock generated from the radio waves from the reader writer. Therefore the proximity wireless communication unit can perform proximity wireless communication with the communication device even if a main power of the terminal apparatus is OFF.

The antenna is a loop antenna for the proximity wireless communication with the reader writer in the communication device .

The communication device includes an antenna a display unit and keys . An example of the communication device is a mobile device.

The antenna is an antenna for the proximity wireless communication with the terminal apparatus . The communication device performs polling towards the IC tag on the terminal apparatus . When the communication with the terminal apparatus is established the communication device reads information from the terminal apparatus or writes information into the terminal apparatus .

The display unit is for example a liquid crystal display. The display unit displays a result of the proximity wireless communication between the communication device and the terminal apparatus or data transmitted from the server device .

The set of keys is an interface that enables the user to operate the communication device . It should be noted that the keys are not limited to the structure separated from the display unit as shown in . For example it is also possible that the display unit is a touch panel displaying the keys to implement the functions of the keys . In short the display unit may serve as the keys .

The communication device having the above described structure activates the proximity wireless communication unit in the communication device according to a user s input by the keys . After the activation the communication device starts polling to the terminal apparatus for proximity wireless communication. In general polling keeps emitting radio waves to unspecified receivers. Therefore the communication device driven by a battery is under load in terms of battery duration. Therefore the communication device may be provided with a button dedicated for polling. This structure is preferable because the communication device can avoid unnecessary polling and the user needs merely to press the dedicated button without having operation load.

The server device is a server having a database. The server device is implemented as for example a web server having a database. The server device is connected to the communication device via the Internet . The server device registers onto the database information transferred from the communication device and transfers to the communication device information indicating completion of the registration completion or the like. Then the display unit of the communication device displays information indicating the registration completion.

Thus the communication system has the above described configuration. In the system configuration the communication device can obtain information from the terminal apparatus and register the obtained information onto the database in the server device . More specifically by using proximity wireless communication the communication device obtains from the terminal apparatus information such as a product serial number a model number or manufacturer identification information each of which is used to uniquely identify the terminal apparatus . Then the communication device transfers to the server device a information received obtained from the terminal apparatus via the proximity wireless communication b information for identifying the user or the mobile device communication device itself which is stored in the communication device for example an e mail address a telephone number a mobile terminal identification number or a Subscriber Identity Module SIM card ID and c information for determining a position of the communication device if the communication device can detect position information for example GPS information Assisted GPS information or position information estimated based on a base station in a mobile network . The server device registers these pieces of information onto the database.

The above described series of processes can eliminate user s load for inputting various pieces of information. In other words in practice the user merely presents the communication device to the terminal apparatus in order to register various pieces of information such as user registration information for the terminal apparatus .

Furthermore the communication device can obtain from the terminal apparatus a trouble occurrence state or use history information which is detected by the terminal apparatus and transmits such information to the server device . In this case a manufacturer of the terminal apparatus can handle the trouble of the terminal apparatus by speedily determining an initial failure of a specific lot based on the trouble occurrence state. Moreover the structure offers advantages to the manufacturer that can specify functions used by each user from the use history information and use the specified information for next product development.

The following describes the communication device according to the present embodiment in more detail with reference to corresponding figures.

The communication device such as a mobile device includes the antenna the display unit and the keys as shown in . The communication device further includes a proximity wireless communication unit a proximity wireless detection unit an apparatus information obtainment unit an external communication unit a sensor unit a position information obtainment unit a direction sensor unit a directional space calculation unit a selection unit a a move determination unit an operation information obtainment unit a storage unit a display information decision unit an operation information transmission unit an operation history obtainment unit and a sound sensor .

The proximity wireless communication unit demodulates information received by the antenna and modulates information to be transmitted via the antenna . For example via the antenna the proximity wireless communication unit transmits polling waves that are signals for calling unspecified receivers transmits a request for providing apparatus information of the terminal apparatus and receives information including the apparatus information from the terminal apparatus .

The proximity wireless detection unit determines whether or not a response to the polling polling response from the terminal apparatus is detected. In addition the proximity wireless detection unit detects information demodulated by the proximity wireless communication unit .

The apparatus information obtainment unit obtains from the terminal apparatus the apparatus information for uniquely identifying the terminal apparatus . More specifically the apparatus information obtainment unit obtains the apparatus information regarding the terminal apparatus from the information detected by the proximity wireless detection unit . Furthermore the apparatus information obtainment unit determines whether or not a position of the terminal apparatus apparatus position information can be obtained from the obtained apparatus information.

The external communication unit is used to communicate with external devices apparatuses including the server device outside the communication device . The external communication unit includes a communication antenna a receiving unit a transmission unit and a communication control unit . More specifically the communication antenna is connected to a general purpose network such as the Internet. The transmission unit modulates data to be transmitted to the outside via the general purpose network such as the Internet . The receiving unit demodulates data received via the general purpose network such as the Internet . The communication control unit generates and analyzes data exchanged or to be exchanged with external devices apparatuses via the general purpose network such as the Internet .

The sensor unit detects a position of the communication device itself. The sensor unit includes an acceleration sensor a Global Positioning System GPS sensor an angular velocity sensor and an orientation sensor . The acceleration sensor measures an acceleration of the communication device . The GPS sensor obtains GPS information and thereby calculates position information of the communication device . The angular velocity sensor measures an angular velocity of the communication device . The orientation sensor measures an orientation of the position of the communication device .

The position information obtainment unit generates obtains position information indicating a position current position of the communication device . The position information obtainment unit includes an absolute position obtainment unit a relative position obtainment unit and a position information calculation unit . The absolute position obtainment unit obtains as an absolute position of the communication device a the position information generated by the GPS sensor or b position information provided from the server device via the external communication unit . The relative position obtainment unit integrates the acceleration measured by the acceleration sensor and the angular velocity measured by the angular velocity sensor thereby calculating a relative position of the communication device with respect to an initial setting value. The position information calculation unit calculates a current position of the communication device based on the absolute position obtained by the absolute position obtainment unit and the relative position generated by the relative position obtainment unit . For example if the communication device determines that apparatus position information of the terminal apparatus a current position of the terminal apparatus can be retrieved from the apparatus information obtained by the apparatus information obtainment unit in the communication device the absolute position obtainment unit stores the apparatus position information into the storage unit as absolute position information of the communication device and the relative position obtainment unit initializes the relative position information. On the other hand if the communication device determines that the apparatus position information cannot be retrieved from the apparatus information obtained by the apparatus information obtainment unit the communication device activates the GPS sensor to generate absolute position information of the communication device and causes the relative position obtainment unit to initialize the relative position information.

The direction sensor unit generates direction information indicating a direction to which the communication device faces. More specifically based on the angular velocity measured by the angular velocity sensor and the orientation measured by the orientation sensor the direction sensor unit calculates an oriented direction that is a direction which the communication device faces namely a direction to which the communication device is pointed.

The directional space calculation unit calculates a directional space directional space information based on the position information generated obtained by the position information obtainment unit and the direction information generated by the direction sensor unit . The directional space is a space which the communication device faces namely a space to which the communication device is pointed. More specifically the directional space calculation unit calculates a space pointed by the communication device as the directional space information based on a the position information of the communication device which is calculated by the position information obtainment unit and b the oriented direction calculated by the direction sensor unit .

The operation information obtainment unit obtains operation information such as remote control information for controlling the terminal apparatus from the server device via the external communication unit .

The storage unit stores a the operation information of the terminal apparatus which is obtained by the operation information obtaining unit and b position information of the communication device which is generated when the apparatus information obtainment unit obtains the apparatus information in association with each other. Here the stored position information of the communication device is considered as position information of the terminal apparatus . Here in other words the position information which is obtained when the apparatus information obtainment unit obtains the apparatus information is position information which is generated obtained by the position information obtainment unit when proximity wireless communication with the terminal apparatus is detected. Here the position information which is generated obtained by the position information obtainment unit when proximity wireless communication with the terminal apparatus is detected indicates a position current position of the communication device . However since the communication device performs proximity wireless communication with the terminal apparatus the position information of the communication device can be considered as position information of the terminal apparatus hereinafter referred to as apparatus position information . In other words the communication device can handle as the apparatus position information of the terminal apparatus the position information of the communication device that is generated obtained by the position information obtainment unit when the proximity wireless communication with the terminal apparatus is detected.

The move determination unit determines based on the sensor information detected by the sensor unit whether or not the communication device is still.

The selection unit a includes an apparatus specification unit and an operation information setting unit . The selection unit a specifies an apparatus terminal apparatus existing in the directional space based on the apparatus position information stored in the storage unit and selects a piece of operation information corresponding to the specified apparatus terminal apparatus from among pieces of operation information stored in the storage unit . The apparatus specification unit specifies an apparatus terminal apparatus existing in the directional space based on the apparatus position information stored in the storage unit . More specifically based on the directional space information which is generated by the directional space calculation unit and the apparatus position information of the terminal apparatus which is stored in the storage unit the apparatus specification unit specifies determines which terminal apparatus is the apparatus located in the direction pointed by the communication device . The operation information setting unit selects a piece of operation information corresponding to the determined apparatus terminal apparatus from among pieces of operation information stored in the storage unit . In other words the operation information setting unit obtains from the storage unit the operation information of the terminal apparatus specified determined by the apparatus specification unit and sets the operation information into the communication device . Thereby the operation information setting unit selects the operation information corresponding to the specified determined apparatus terminal apparatus .

The display information decision unit decides a remote control interface to be displayed on the display unit based on the operation information set selected by the operation information setting unit .

The operation information transmission unit transmits to the apparatus a control signal for operating the apparatus based on the operation information set selected by the operation information setting unit . More specifically when a user of the communication device presses one of the keys the operation information transmission unit transmits to the terminal apparatus a control signal such as a remote control command which corresponds to the pressed key to operate the terminal apparatus .

The operation history obtainment unit obtains information of the control signal such as the remote control command which has been transmitted by the operation information transmission unit thereby obtaining a user s operation history regarding the terminal apparatus .

With the above structure the communication device can easily serve as an extended user interface such as a remote controller of a target apparatus without causing any complicated operations to the user.

It should be noted in the above description that the communication device according to the present embodiment includes the antenna the display unit the keys the proximity wireless communication unit the proximity wireless detection unit the apparatus information obtainment unit the external communication unit the sensor unit the position information obtainment unit the direction sensor unit the directional space calculation unit the selection unit a the move determination unit the operation information obtaining unit the storage unit the display information decision unit the operation information transmission unit the operation history obtainment unit and the sound sensor . However the communication device according to the present embodiment is not limited to have the above structure. As shown in the communication device may have as a minimum structure at least a minimum structure part a that includes the apparatus information obtainment unit the external communication unit the position information obtainment unit the direction sensor unit the directional space calculation unit the selection unit a the operation information obtainment unit the storage unit and the operation information transmission unit . Here is a block diagram showing the minimum structure of the communication device according to the present embodiment. With the minimum structure part a the communication device can easily serve as an extended user interface such as a remote controller of a target apparatus without causing any complicated operations to the user.

The following describes the apparatus specification unit according to the present embodiment in more detail.

Each of is a block diagram showing an example of a detailed structure of the apparatus specification unit according to the present embodiment.

As shown in the apparatus specification unit includes an apparatus direction calculation unit a difference calculation unit and an apparatus decision unit .

If there are a plurality of apparatuses in the directional space the apparatus direction calculation unit calculates plural pieces of apparatus direction information each indicating a direction from the communication device to a corresponding one of the apparatuses based on using the position information of the communication device and the plural pieces of apparatus position information stored in the storage unit regarding the apparatuses in the directional space. More specifically the apparatus direction calculation unit calculates a direction angle between the communication device and each of the apparatuses terminal apparatuses based on a distance between the communication device and each of the terminal apparatuses .

The difference calculation unit calculates a difference between the direction information of the communication device and each of pieces of the apparatus direction information of the terminal apparatuses. More specifically the difference calculation unit calculates a difference between a the direction angle calculated for each of the terminal apparatuses by the apparatus direction calculation unit and b a directional angle indicating a direction oriented direction pointed by the communication device .

From among the apparatuses the apparatus decision unit eventually decides as an apparatus to be specified as existing in the directional space an apparatus having a difference calculated by the difference calculation unit which is smaller than a predetermined value. For example the apparatus decision unit eventually decides specifies the terminal apparatus having a minimum difference calculated by the difference calculation unit as a target terminal apparatus for which operation information is to be set in the communication device to operate the target terminal apparatus .

Thus the apparatus specification unit having the above described structure specifies a target apparatus terminal apparatus existing in the directional space. More specifically when there are a plurality of the terminal apparatuses in the directional space calculated by the directional space calculation unit the communication device can select as an apparatus to be specified as existing in the directional space in other words as an apparatus to which the user intends to point a terminal apparatus that is determined by the different calculation unit as being the closest in the direction pointed by the communication device from among the terminal apparatuses .

It should be noted that the apparatus specification unit may further include an apparatus number determination unit at a stage prior to the apparatus direction calculation unit so that the apparatus number determination unit determines whether or not there are a plurality of apparatuses in the directional space. With the above structure the apparatus number determination unit may determine the number of the terminal apparatuses existing in the directional space based on a the oriented direction of the communication device which is calculated by the directional space calculation unit and b the pieces of apparatus position information of the terminal apparatuses which are stored in the storage unit .

An apparatus specification unit shown in includes a space information storage unit and an apparatus decision unit .

The space information storage unit stores space information indicating a space and an arrangement of apparatuses in the space. More specifically the space information storage unit holds a room arrangement or layout information of the target building in which the terminal apparatuses exist and b coordinate information of the terminal apparatuses on the room arrangement or layout information.

If there are a plurality of the terminal apparatuses in the directional space the apparatus decision unit obtains from the space information storage unit the space information including information of a space where the communication device exists based on the position information of the communication device . Then based on the space information the apparatus decision unit determines decides an apparatus existing in the space where the communication device exists as an apparatus to be specified as existing in the directional space. In other words the apparatus decision unit determines decides a target terminal apparatus which a user of the communication device wishes to operate based on the room arrangement information or the like obtained from the space information storage unit . Here when there is only one terminal apparatus in the same room where the communication device exists the apparatus decision unit determines the terminal apparatus as a target terminal apparatus for which operation information is to be set in the communication device to operate the target apparatus.

Thus the apparatus specification unit having the above described structure specifies a target apparatus terminal apparatus existing in the directional space. More specifically when there are a plurality of the terminal apparatuses in the directional space calculated by the directional space calculation unit the communication device can obtain room arrangement information of the building and narrows down a terminal apparatus for which operation information is to be set from among terminal apparatuses in the space where the communication device exists.

It should be noted that the apparatus specification unit may further include an apparatus number determination unit at a stage prior to the apparatus decision unit so that the apparatus number determination unit determines whether or not there are a plurality of apparatuses in the directional space. With the above structure the apparatus number determination unit may determine the number of the terminal apparatuses existing in the directional space based on a the oriented direction of the communication device which is calculated by the directional space calculation unit and b the pieces of apparatus position information of the terminal apparatuses which are stored in the storage unit .

An apparatus specification unit shown in includes an apparatus number determination unit an apparatus candidate output unit a user input receiving unit an apparatus decision unit an apparatus pitch angle detection unit and an apparatus pitch angle storage unit .

The apparatus number determination unit determines whether or not there are a plurality of apparatuses terminal apparatuses in the directional space based on a the oriented direction of the communication device which is calculated by the directional space calculation unit and b the pieces of apparatus position information of the terminal apparatuses which are stored in the storage unit . More specifically the apparatus number determination unit determines the number of apparatuses terminal apparatuses in the directional space.

The apparatus candidate output unit generates an apparatus candidate list indicating at least one apparatus terminal apparatus existing in the directional space based on a the pieces of apparatus position information stored in the storage unit and b pitch angle information stored in the apparatus pitch angle storage unit and provides the apparatus candidate list to the display unit . More specifically the apparatus candidate output unit generates an apparatus candidate list indicating the terminal apparatuses determined by the apparatus number determination unit based on the results of the apparatus pitch angle detection unit and provides the apparatus candidate list to the display unit . Then the display unit displays the apparatus candidate list.

The user input receiving unit receives user s selection of an apparatus terminal apparatus which is selected by the user using the keys from the apparatus candidate list that is generated by the apparatus candidate output unit and displayed on the display unit .

The apparatus decision unit determines decides the apparatus selected by the user from the apparatuses in the apparatus candidate list displayed on the display unit as an apparatus to be specified as existing in the directional space. More specifically the apparatus decision unit determines the terminal apparatus obtained by the user input receiving unit as a target terminal apparatus which is to be specified as existing in the directional space and for which operation information is to be set.

The apparatus pitch angle detection unit detects an angle in a pitch direction of the communication device to generate pitch angle information indicating the pitch angle. More specifically the apparatus pitch angle detection unit generates pitch angle information indicating an angle in a pitch direction of the communication device when the apparatus terminal apparatus which is in the directional space and for which operation information is to be set is to be specified. In addition the apparatus pitch angle detection unit stores the generated pitch angle information into the apparatus pitch angle storage unit in association with the apparatus terminal apparatus determined by the apparatus decision unit .

In the apparatus pitch angle storage unit the pitch angle information and the apparatus information are stored in association with each other. More specifically in the apparatus pitch angle storage unit a pitch angle detected by the apparatus pitch angle detection unit and the terminal apparatus determined by the apparatus decision unit are stored in association with each other.

Thus the apparatus specification unit having the above described structure specifies a target apparatus terminal apparatus existing in the directional space. More specifically the target terminal apparatus selected by the user and the pitch angle information are stored in association with each other so that the communication device can use the pitch angle information to narrow down the target terminal apparatus from the apparatus candidate list generated by the apparatus candidate output unit even if there are a plurality of the terminal apparatuses in the directional space calculated by the directional space calculation unit . In addition the above structure can offer the following advantages. If the pitch angle detected by the apparatus pitch angle detection unit and the terminal apparatus determined by the apparatus decision unit are stored in association with each other in the apparatus pitch angle storage unit after the apparatus decision unit determines the terminal apparatus it is possible to learn from the accumulated pitch angles habits of the user pointing the communication device to the determined terminal apparatus .

As shown in the storage unit stores for example a product serial number a product number position information and remote control information in association with one another. Here the storage unit has regions for holding the above pieces of information such as a product serial number storage region a product number storage region a position information storage region and a remote control information storage region. These regions may form a table as well as a data structure.

The product serial number storage region is a region for holding a product serial number for uniquely identifying a registered terminal apparatus .

The product number storage region is a region for holding a product number for identifying a product type of the terminal apparatus .

The position information storage region is a region for holding position information corresponding to the terminal apparatus . For example the position information storage region holds longitude and latitude of a position of the terminal apparatus and room information such as a living room or a kitchen where the terminal apparatus exists.

The remote control information storage region is a region for holding remote control information corresponding to the terminal apparatus . Here the remote control information includes a operation information corresponding to the terminal apparatus and b display information in which each of the keys is in association with a corresponding operation command in the operation information. The operation information includes a operations of the terminal apparatus such as power ON and power OFF and b operation commands each of which is to be transmitted from the communication device to execute a corresponding one of the operations in association with each other. It should be noted that the operation indicated in the operation information may include a plurality of operations not only one kind of operation of the terminal apparatus . More specifically for example one operation indicated in the operation information may be a series of operations of the terminal apparatus such as powering ON opening of a recording list selection of a specific TV program and reproduction of the selected TV program.

The following describes an example of a method of calculating a directional space by the directional space calculation unit .

In coordinates x0 and coordinates y0 indicate a coordinate position of the communication device . In other words the coordinate position is the position information which the position information obtainment unit in the communication device can generate obtain . In the coordinate axises N represents the North S represents the South E represents the East and W represents the West which are calculated measured by the orientation sensor in the communication device . An angle represents a directional angle of the communication device with respect to the coordinate axis is measured by the angular velocity sensor in the communication device .

The angle is a threshold value for defining a range region of a directional space. More specifically the greater angle results in the larger directional space while the smaller angle results in the smaller directional space. In more detail the range region of the directional space is defined as a range region d which is surrounded by a dotted line b and a dotted line c to indicate a range having an angle with respect to an oriented direction a that is a direction having a directional angle . The angle may be predetermined set in the communication device or inputted by the user. The angle may be set based on a size of a building a size of a room a distance between a wall and the communication device or the like.

The following describes a summary of processing performed by the communication device having the above structure.

The processing performed by the communication device is mainly divided into Step S and Step S. At Step S the communication device holds apparatus position information and operation information. At Step S based on the stored apparatus position information and operation information the communication device operates a target terminal apparatus by serving as a remote controller or the like.

At Step S the apparatus information obtainment unit obtains from a target terminal apparatus apparatus information for uniquely identifying the terminal apparatus S .

Next the position information obtainment unit generates obtains position information indicating a current position of the communication device S .

Next based on the obtained apparatus information the operation information obtaining unit obtains the operation information for operating the terminal apparatus from the server device via the external communication unit S .

Next the communication device stores into the storage unit the obtained operation information and the generated position information in association with each other S . Here the stored position information is considered as apparatus position information indicating a position of the terminal apparatus .

By performing Steps S to S the communication device performs Step for storing the apparatus position information and the operation information.

Next at Step S at the beginning the direction sensor unit detects a direction to which the communication device faces thereby generating direction information S .

Next the directional space calculation unit calculates a directional space which is a space pointed by the communication device facing the space based on the position information generated obtained by the position information obtainment unit and the direction information generated by the direction sensor unit S .

Next the selection unit a specifies an apparatus terminal apparatus existing in the directional space based on the apparatus position information stored in the storage unit S and then selects operation information corresponding to the specified apparatus from among pieces of operation information stored in the storage unit S .

Finally the operation information transmission unit transmits to the specified apparatus terminal apparatus a control signal for operating the apparatus based on the selected operation information S .

By performing Steps S to S based on the stored operation information and apparatus position information the communication device performs Step S for operating the target terminal apparatus by serving as a remote controller or the like.

First the description is given for a flow of registering operation information onto the storage unit of the communication device according to the present embodiment.

At the beginning the user activates a reader writer application program for performing proximity wireless communication S .

Next the communication device transmits via the antenna polling waves which are signal calling unspecified receivers S . Then the communication device determines whether or not a response to the polling has been detected S . If it is determined that a response to the polling has not detected N at S then the communication device re transmits polling waves.

On the other hand if it is determined that a response to the polling has been detected Y at S then the communication device transmits a request for apparatus information in order to obtain apparatus information of the terminal apparatus S .

Next the communication device receives the requested apparatus information from the terminal apparatus S .

Next the communication device determines whether or not apparatus position information of the terminal apparatus can be retrieved from the apparatus information S .

If it is determined that the apparatus position information can be retrieved Y at S then in the communication device the absolute position obtainment unit holds the apparatus position information as absolute position information of the communication device and the relative position obtainment unit initializes relative position information S .

On the other hand if it is determined that the apparatus position information cannot be retrieved from the apparatus information N at S then the communication device activates the GPS sensor S to generate absolute position information and initializes relative position information generated by the relative position obtainment unit S .

Next the communication device determines whether or not operation information in association with the apparatus information obtained at S is stored in the storage unit S .

If it is determined that the operation information is stored in the storage unit Y at S then the communication device completes the registration processing.

On the other hand if it is determined that the operation information is not stored in the storage unit N at S then the communication device transmits a request for operation information associated with the apparatus information to the server device via the external communication unit S .

Next the communication device stores the received operation information in association with the apparatus position information into the storage unit S .

As described above the communication device performs the registration of the operation information onto the storage unit .

The following describes processing of setting remote control information into the communication device to serve as a remote controller of a target apparatus according to the present embodiment.

Each of is a flowchart of setting operation information into the communication device according to the present embodiment to operate a target apparatus. shows a flow in which the user operates the communication device to activate a remote control application program. shows a flow in which the remote control application program is automatically activated without user s operation using the keys .

At the beginning the user operates the keys to activate a remote control application program in the communication device S . Subsequently the user selects a target terminal apparatus by using the keys on the communication device S . Therefore the communication device sets operation information associated with the terminal apparatus selected at S S .

Here under the assumption that the operation information is expressly set in the communication device by Steps S to S the subsequence steps performed by the communication device will be described.

After setting the operation information of the target terminal apparatus such as a TV into the communication device as described above the communication device then activates the sensor unit and starts detection of the position information obtainment unit and the direction sensor unit S . Then the communication device causes the relative position obtainment unit to calculate a relative position S .

Next based on the remote control operation inputted by the user using the keys the communication device transmits a remote control command for operating the terminal apparatus for which the operation information is set at S. This means that it is seemed for the user that Steps S S and S are a series of steps performed by the communication device but the communication device also starts Steps S and S which the user does not notice.

Next the move determination unit in the communication device determines whether or not the communication device is still S .

If it is determined that the communication device is not still N at S then the communication device returns to S to re calculate relative position information.

On the other hand if it is determined that the communication device is still Y at S then the position information obtainment unit and the direction sensor unit generates position information and oriented direction information respectively S .

Next the communication device specifies the target terminal apparatus existing in a direction pointed by the communication device and sets operation information of the terminal apparatus .

As described above the communication device firstly performs Steps S to S to set operation information and then performs Steps S S and S to S to finally set for example narrow down the operation information.

Firstly the communication device activates the sensor unit to start detection of the position information obtainment unit and the direction sensor unit S . Then the communication device causes the relative position obtainment unit to calculate a relative position S .

Next the move determination unit in the communication device determines whether or not the communication device is still S .

If it is determined that the communication device is not still N at S then the communication device returns to S to re calculate relative position information.

On the other hand if it is determined that the communication device is still Y at S then the communication device activates the remote control application program S .

Next the position information obtainment unit and the direction sensor unit in the communication device generate position information and oriented direction information respectively S .

Next the communication device specifies the target terminal apparatus existing in a direction pointed by the communication device and sets operation information of the terminal apparatus S .

Next at S the communication device transmits a remote control command for operating the terminal apparatus based on the remote control operation inputted by the user using the keys for example details of the step will be described later .

As described above the communication device performs the setting of operation information without without trigger of user s key operation.

Next the description is given for a detailed example of Steps S and S namely a flow of specifying a target terminal apparatus existing in a direction pointed by the communication device .

Firstly a search range is set where a represents a search range angle that is an angle for defining a range region of a directional space to be searched out S .

Next the communication device determines whether or not the terminal apparatus exists in a range region of a directional space satisfying x x0 tan y0

If it is determined that a terminal apparatus exists in the directional space Y at S then the communication device further determines whether or not there is one terminal apparatus in the directional space S .

If it is determined that there is one terminal apparatus in the directional space Y at S then the communication device proceeds to S described later to set operation information associated with the terminal apparatus and completes the processing. On the other hand if it is determined that there is not only one terminal apparatus in the directional space in other words there are two or more terminal apparatuses in the directional space N at S then the communication device obtains room arrangement information from for example the space information storage unit in the apparatus specification unit S .

Next based on the obtained room arrangement information and the directional space obtained at S the communication device determines whether or not there is one terminal apparatus satisfying conditions that the terminal apparatus exists i in a room where the communication device exists and ii in the directional space S .

If there is one terminal apparatus satisfying the conditions Y at S then the communication device proceeds to S described later to set operation information associated with the terminal apparatus and completes the processing. On the other hand if there is not only one terminal apparatus satisfying the conditions N at S then the communication device displays on the display unit a list of the terminal apparatuses satisfying the conditions at S hereinafter referred to as an apparatus candidate list S .

Next the communication device receives selection of a terminal apparatus from the apparatus candidate list which is made by the user using the keys S .

Next the communication device obtains for example the pitch angle information from the apparatus pitch angle detection unit in the apparatus specification unit and stores the obtained pitch angle information in association with the terminal apparatus selected at S into the apparatus pitch angle storage unit S . In addition the communication device specifies a terminal apparatus from among terminal apparatuses existing in a direction pointed by the communication device and sets operation information of the specified terminal apparatus S .

Referring back to S if it is determined that there is no terminal apparatus in the directional space N at S then the communication device further determines based on the obtained position information whether or not the communication device exists in a target space such as a user s home where a target terminal apparatus which the user wishes to operate exists S . It should be noted that it has been described above that the target space where the target terminal apparatus to be operated exists is the user s home but the space is not limited to the user s home.

If it is determined that the communication device exists in the target space where the target terminal apparatus to be operated exists N at S then the communication device displays a notice on the display unit to persuade the user to register the terminal apparatus for example by displaying a notice Not Registered. Please touch the home appliance. S .

On the other hand if it is determined that the communication device does not exist in the target space where the target terminal apparatus to be operated exists Y at S then the communication device obtains position information of the communication device such as latitude and longitude of the user s home S .

Next the communication device determines whether or not the communication device faces the user s home based on home position information of the user s home and the oriented direction information and the position information of the communication device S .

If it is determined that the communication device does not face the user s home Y at S then the communication device terminates the processing. On the other hand if it is determined that the communication device faces the user s home N at S then the communication device displays on the display unit an operable apparatus list of operable terminal apparatuses such as terminal apparatuses connected to an external network which the communication device can operate via the internet S .

Next the user uses the keys to select the target terminal apparatus to be operated from the operable apparatus list displayed by the communication device S . Then the communication device decides the terminal apparatus selected by the user and sets operation information associated with the decided terminal apparatus into the communication device S and completes the processing.

As described above the communication device specifies the target terminal apparatus existing in the direction pointed by the communication device .

The following describes a detailed example of S and S in other words a flow of operating a target terminal apparatus to be operated by using the communication device as a remote controller.

At the beginning the communication device determines whether or not there is a command input from the user using the keys S .

If it is determined that there is no command input from the user N at S then the communication device terminates the processing.

On the other hand if it is determined that there is a command input from the user Y at S then the communication device further determines whether or not the input command is a quit command of the application program S . If it is determined that the input command from the user is a quit command of the application program Y at S then the communication device terminates the processing. On the other hand if it is determined that the input command from the user is not a quit command of the application program N at S then the communication device transmits a command signal indicating an operation command to the terminal apparatus S .

Next the communication device determines by using the sound sensor whether or not the terminal apparatus has appropriately received the operation command S . More specifically the communication device receives audio information emitted from the terminal apparatus to notify that the terminal apparatus has appropriately received the operation command. Therefore based on the obtained audio information the communication device examines the appropriate receipt. Here for example in the case where the terminal apparatus is a TV the audio information may be a sound caused when the TV changes channels. Furthermore for example in the case where the terminal apparatus is an air conditioner or the like the audio information may be a reaction sound for notifying the user of appropriate receipt of remote control information.

If it is determined that the terminal apparatus has appropriately received the operation command Y at S then the communication device transmits an operation history of the terminal apparatus to the server device via the external communication unit S . Here it is also possible that the communication device stores the operation history into the storage unit .

Next the communication device switches a display on the display unit according to the operation command. For example when a list of recorded TV programs is to be displayed on the terminal apparatus that is a TV the communication device held by the user also displays the same list on the display unit of the communication device .

Referring back to S if it is determined that the terminal apparatus has not appropriately received the operation command N at S then the communication device re transmits the operation command and determines whether or not the number of the re transmissions exceeds a predetermined value S .

If it is determined that the number of the re transmissions exceeds the predetermined value Y at S then the communication device displays on the display unit a notice for persuading the user to input the command by the keys again for example by displaying a notice Please once more .

As described above the communication device performs processing as a remote controller for operating the target terminal apparatus to be operated.

The following describes data exchange between the terminal apparatus and the server device which is performed when the communication device is to register operation information.

At the beginning the user activates an application program in the communication device to perform proximity wireless communication to activate a reader writer so that the communication device starts polling S .

Next the user makes the communication device which starts polling touch a region of the terminal apparatus where an antenna of the terminal apparatus for proximity wireless communication is provided S so that the communication device transmits polling waves to the terminal apparatus S . Next the terminal apparatus receives the polling waves from the communication device and transmits a polling response signal to the communication device S . As described above proximity wireless communication is established between the terminal apparatus and the communication device . Then when the communication device receives the polling response signal from the terminal apparatus the communication device generates a read command for reading apparatus information from the terminal apparatus and transmits the read command to the terminal apparatus S . When the terminal apparatus receives the read command the terminal apparatus transmits to the communication device information including apparatus information of the terminal apparatus S .

Next the communication device extracts the apparatus information from the information received from the terminal apparatus S .

Here by using various sensors such as the GPS sensor the communication device generates obtains position information of the communication device at the timing where the communication device touches the terminal apparatus at S S . Here the communication device generates obtains the position information at the timing of S by using the situation where the communication device needs to be close to the terminal apparatus within several centimeters in order to establish the proximity wireless communication. In other words the position information generated by the communication device in the establishment of the proximity wireless communication can be considered as apparatus position information of the terminal apparatus .

Next the communication device transmits to the server device a request command for requesting operation information associated with the extracted terminal information of the terminal apparatus from the server device S .

Next when the server device receives the request command for requesting the operation information the server device obtains the operation information associated with the terminal apparatus from an operation information management database and transmits the obtained operation information to the communication device S .

Finally the communication device stores the received operation information the position information and the apparatus information in association with one another into the storage unit S .

The following describes data exchange between the terminal apparatus and the server device which is performed when the communication device serves as a remote controller to operate the terminal apparatus .

At the beginning the user inputs an operation command to the communication device via the keys based on a remote controller interface displayed on the display unit S .

Next the communication device transmits the operation command inputted by the user to the terminal apparatus via the operation information transmission unit S .

Next the terminal apparatus executes a program according to the received operation command S . For example the terminal apparatus executes a program corresponding to the operation command such as a command for switching power a command for changing a sound volume a command for changing a temperature a command for reproduction a command for changing TV channels or the like.

Next the terminal apparatus emits audio audio information for notifying appropriate receipt of the operation command S . For example in the case where the terminal apparatus is a TV the audio is sound emitted when a TV channel is changed to another. In the case where the terminal apparatus is an air conditioner or the like the audio is reaction sound emitted to notify the user of appropriate receipt of the operation information.

Next the communication device recognizes the audio emitted from the terminal apparatus by using the sound sensor S . Then if the communication device recognizes that the audio has been emitted by the terminal apparatus to notify appropriate receipt of the operation command then the communication device transmits an operation history of the terminal apparatus to the server device S . Here as described earlier the communication device switches a display on the display unit according to the operation command S .

Subsequently for example the user inputs an operation command again by using the keys based on a remote control interface displayed on the display unit S . In this case as described earlier the communication device transmits the operation command inputted by the user to the terminal apparatus via the operation information transmission unit S .

Here if the terminal apparatus cannot receive the operation command appropriately the communication device cannot recognize audio emitted from the terminal apparatus S . Then the communication device re transmits the operation command S . As described above the communication device can recognize that the terminal apparatus has not received the operation command without exchanging a specific feedback signal indicating appropriate receipt of the signal by the terminal apparatus . As a result the communication device can perform re transmission or the like for the operation command.

If it is determined that the number of re transmissions of the operation command exceeds a predetermined number S then the communication device displays on the display unit a notice for persuading the user to input the operation command again by using the keys such as a notice Please once more and waits for an input operation command from the user S .

By the above described sequence the communication device serves as a remote controller for operating the terminal apparatus .

Thereby the present embodiment of the present invention can provide a communication device that can easily serve as an extended user interface such as a remote controller of a target apparatus without causing any complicated operations to the user.

More specifically the communication device can store in the storage unit terminal apparatus information position information apparatus position information of the terminal apparatus and operation information of the terminal apparatus in association with one another. Thereby a direction pointed by the communication device is calculated based on sensor information detected by the sensor unit . Therefore the operation information of the terminal apparatus existing in the calculated directional space is called from the storage unit . As a result the communication device can serve as a remote controller of the terminal apparatus . In other words the communication device can set a remote controller command control signal of the communication device based on the operation information of the terminal apparatus . For example merely by pointing the communication device to a home appliance terminal apparatus or the like such as an air conditioner or a TV which the user of the communication device intends to operate the communication device can operate the home appliance or the like pointed by the user.

Furthermore the move determination unit determines whether or not the communication device is still. Thereby by using the stillness of the communication device as a trigger the communication device can serve as a remote controller of the terminal apparatus in a direction pointed by the communication device . In other words the communication device can serve as a remote controller for a new terminal apparatus when the communication device becomes still as a trigger without user s key operation.

Furthermore the communication device obtains an oriented direction detected by the direction sensor unit . Thereby if the oriented direction of infrared communication or the like turns away from the terminal apparatus operated by the communication device using the infrared communication the communication device can present the user with a notice message such as Please turn it slightly to the right .

In addition the communication device can obtain sound information of the terminal apparatus by the sound sensor . More specifically in the case where the terminal apparatus is a TV the communication device can obtain sound caused by channel switching and in the case where the terminal apparatus is an air conditioner or the like the communication device can obtain reaction sound notifying the user of that the terminal apparatus has appropriately received the operation information. Thereby without transmitting a certain feedback signal indicating that the terminal apparatus has received a signal the communication device can determine whether or not the operation command has been appropriately transmitted. Therefore it is possible to collect an operation history of a proper terminal apparatus via the communication device even if the terminal apparatus is not connected to a general purpose network.

Moreover by using as a trigger the detection of the terminal apparatus by the proximity wireless detection unit in the communication device the relative position obtainment unit initializes relative position information and the absolute position obtainment unit sets the apparatus position information obtained via the GPS sensor or the external communication unit to be absolute position information of the communication device . Thereby the communication device can reduce accumulation errors of the apparatus position information which are occurred when the acceleration sensor corrects the apparatus position information.

It should be noted that it has been described in the present embodiment that the communication device obtains apparatus information of the terminal apparatus by using proximity wireless communication. However the present embodiment is not limited to the above. For example it is also possible that the terminal apparatus is provided with a bar code having apparatus information and the communication device includes a scanner such as a digital camera function to read the apparatus information. Here is a diagram showing the case where a 2D bar code is provided as apparatus information of the terminal apparatus according to the present embodiment. is a diagram showing an example of the case where the apparatus information of the terminal apparatus is read from the 2D bar code according to the present embodiment. Each of shows an air conditioner as an example of the terminal apparatus . The communication device shown in further includes a scanner. The structure of the communication device shown in is the same as the structure of the communication device shown in or except the scanner. As shown in the air conditioner is provided with a 2D bar code including apparatus information. Then as shown in the scanner in the communication device is used to obtain the apparatus information from the 2D bar code . With the above structure it is possible to obtain apparatus information of a terminal apparatus that does not have a proximity wireless communication function. For example even if the air conditioner is equipped at a high place and it is therefore difficult to perform action for establishing proximity wireless communication with the air conditioner in other words it is difficult to touch the terminal apparatus by the communication device the communication device can obtain the apparatus information.

It should be noted that it has been described in the present embodiment that the communication device selects one terminal apparatus for which the communication device serves as a remote controller. However the present embodiment is not limited to the above.

For example if a plurality of the terminal apparatuses are located close to each other so that the apparatus specification unit has difficulty in detecting a certain terminal apparatus among them or if the plurality of terminal apparatuses are to be operated at the same time the communication device may operate the terminal apparatuses simultaneously. In other words the communication device may serve as a remote controller for the plurality of terminal apparatuses . Each of is a diagram showing a display example of the display unit in the case where a plurality of illumination apparatuses are operated. More specifically it is shown that the communication device is pointed to an illumination switch board for operating the illumination apparatuses not to the illumination apparatuses so that illumination switches operable on the illumination switch board can be operated together on the display unit . In other words as shown in the communication device may simultaneously set plural pieces of operation information of a plurality of apparatuses which are a kitchen illumination and a dining illumination and simultaneously operate the apparatuses. Or as shown in if an illumination intensity of a light Emitting Diode LED illumination or the like can be changed by analog the display unit may present a display on which the illumination intensity can be changed by analog.

Furthermore for example if the terminal apparatuses such as a TV and a recorder are closely located it is difficult to display on the display unit of the communication device all of remote control commands of the terminal apparatuses since each of the TV and the recorder has a great number of remote control commands for operation. Therefore if there are a great number of remote control commands it is possible as shown in that the display unit presents a display so that the user can select on the display a terminal apparatus for which the communication device is to serve as a remote controller. Here is a diagram showing a display example in the case where the user is persuaded to select which apparatus among the plurality of apparatuses should be operated by the communication device as a remote controller. In an example of the communication device serves as a remote controller for the TV when setting of TV remote control is ON while the communication device serves as a remote controller for the recorder when setting of recorder remote control is ON .

It should be noted that it has been described in the present embodiment that the communication device obtains apparatus information of the terminal apparatus . However the present embodiment is not limited to the above. For example the communication device may obtain a current operating status such as powered ON or OFF of the terminal apparatus from the terminal apparatus . In this case the communication device may set operation information according to the current operating status of the terminal apparatus . Thereby it is not necessary to display all of the remote control commands on the display unit . As a result the user interface can be simplified. For example in the case where the terminal apparatus is a TV or the like the communication device can obtain the current operating status of the terminal apparatus by using a general purpose network such as the Internet. is a diagram showing an example in the case where the communication device sets operation information according to a current operating status of the terminal apparatus . It is assumed in the example of that the TV is ON the recorder is OFF and the communication device knows these current operating statuses. Under the assumption since it is not necessary to use at least a Power ON command for TV operation the display unit of the communication device does not need to display the command. In addition since the recorder is OFF the first operation selected by the user would be operation for powering the recorder ON. Therefore it is necessary to display operation information for powering the recorder ON. As described above the communication device may narrow down the remote control commands to be presented to the user according to the operating status of the terminal apparatus .

It should be noted that it has been described in the present embodiment that the communication device calculates directional space information of the communication device and thereby specifies a target terminal apparatus existing in the oriented direction. However the server device may perform the specification of the terminal apparatus . In this case for example the communication device transmits angular velocity information acceleration information and position information to the server device via the external communication unit . Then based on the angular velocity information the acceleration information and the position information received from the communication device the server device may specify a terminal apparatus existing in the oriented direction of the communication device and transmit the operation information of the specified terminal apparatus to the communication device .

It should be noted that the communication device according to the present embodiment may use altitude information. In this case it is possible to generate detect the altitude information of the communication device by a barometer for example.

In the present embodiment it is possible to change a detection range of a remote controller for a terminal apparatus such as a TV or an air conditioner depending on a degree of mobility a degree of operation urgency a size of the apparatus or the like. For example the reduction of a detection range for detecting a terminal apparatus such as an air conditioner which is unlikely to move can prevent false operation during operation of another terminal apparatus . On the other hand the increase of a detection range of a remote controller for detecting a terminal apparatus such as a fan which is likely to move makes it possible to operate the terminal apparatus even if the position of the terminal apparatus is changed to some extent.

Moreover if the terminal apparatus is far from the communication device a range in which the communication device can operate the apparatus is reduced. Therefore it is possible to vary a threshold value for defining a directional space range depending on a distance between the terminal apparatus and the communication device .

Furthermore of course as shown in the user on the first floor of a building can operate a terminal apparatus on the second floor. Here is a schematic diagram of remote control operation for the second floor according to the present embodiment. As shown in if the user holding the communication device exists in a room or floor that is different from a room or floor where the terminal apparatus to be operated exists or if the communication device is far from the terminal apparatus to be operated by a predetermined distance or more the user may point the communication device to a direction so that a list of terminal apparatuses in a room in the pointed direction are displayed. Thereby even if the user does not exactly remember a location of a terminal apparatus in a next room it is possible to operate the terminal apparatus in the far location.

Referring to the system according to the present embodiment includes a RF ID device O a mobile device O a first server O and a second server O.

The RF ID device O is a device having a NFC function. The RF ID device O is included in electronic products such as refrigerators microwaves washing machines TVs and recording apparatuses. The RF ID device O stores as product information of a corresponding product a a product serial number that is ID for identifying the product b use history information of the product d error information and the like into a memory of the product. Thereby the RF ID device O has the same function as that included in the terminal apparatus according to the eighteenth embodiment.

The mobile device O has a NFC function communicable with the NFC function of the RF ID unit O by proximity wireless communication. The mobile device O also has a reader writer function of reading product information from the RF ID device O. In addition the mobile device O is a portable device such as a mobile phone terminal and a remote controller terminal for TV. Furthermore the mobile device O has the same function as that of the communication device according to the eighteenth embodiment.

The first server O is a server connected to the mobile device O via a general purpose network such as the Internet in order to communicate with the mobile device O. The first server O has an internal database DB in which pieces of RF ID information read from the RF ID devices O to the mobile device O are accumulated.

The second server O is a server connected to the first server O via a general purpose network such as the Internet in order to communicate with the first server O. The second server O has an internal database DB in which pieces of building information regarding the RF ID devices O are accumulated. Each of the building information is coordinates of a building in which the corresponding RF ID device O is located.

The RF ID device O includes product ID O a first server URL O service ID O and an accuracy identifier O.

Here the server device according to the eighteenth embodiment has functions of the first server O and the second server O.

The product ID O is ID for identifying a product having the RF ID device O. For example the product ID O is a part number including color information or a product serial number of the product.

The service ID O is ID for identifying a product classification such as a TV an air conditioner or a refrigerator.

The accuracy identifier O is information indicating reliability of position information provided from a product with the RF ID device which has the product ID.

As described above if the RF ID device O according to the present embodiment is moved into proximity of the mobile device O to be able to perform proximity wireless communication the RF ID device O can transmit to the mobile device O the product serial number the first server URL the service ID and the accuracy identifier which are stored in the memory.

The mobile device O includes an antenna O a RF ID reader writer O a coordinate accuracy identification information O a CPU O a program execution unit O a data processing unit O a memory unit O a display unit Od a communication antenna O a transmission unit O a receiving unit O a communication unit O a position information storage unit O a RF ID storage unit O a RF ID detection unit O a URL unit O a reproducing unit O a relative position calculation unit O a coordinate information sending unit O a recording unit O a building coordinate information output unit O a registered coordinate unit O a determination unit O a reference coordinate unit O a position information output unit O a position information unit O a direction information unit O a magnetic compass O a geomagnetism correction unit O a satellite antenna O a position information calculation unit O position information O position information correction unit O a direction information correction unit O an angular velocity sensor O an angular velocity sensor O an angular velocity sensor O an acceleration sensor O an acceleration sensor O an acceleration sensor O an integrator O an integrator O and an absolute coordinate calculation unit O.

The antenna O supplies power towards any RF ID devices so as to search for a RF ID device with which the mobile device O can perform proximity wireless communication. In receiving a response the antenna O establishes proximity wireless communication with the responding RF ID device O to receive modulated information from the RF ID device O.

Here the proximity wireless communication unit according to the eighteenth embodiment has functions of the antenna O and the RF ID reader writer O.

The coordinate accuracy identification information O extracts an accuracy identifier from the received information.

The CPU O controls a system of the mobile device O. The CPU O controls operations of each unit included in the mobile device O.

The program execution unit O executes a program based on the service ID included in the received information.

The data processing unit O performs data processing for information transmitted from the first server O.

The communication antenna O is connected to a general purpose network such as the Internet. The communication antenna O has the same function as that of the communication antenna according to the eighteenth embodiment.

The transmission unit O modulates information to be transmitted to the general purpose network such as the Internet. The transmission unit O has the same function as that of the transmission unit according to the eighteenth embodiment.

The receiving unit O demodulates information received via the general purpose network such as the Internet. The receiving unit O has the same function as that of the receiving unit according to the eighteenth embodiment.

The communication unit O generates and analyzes information to be exchanged transmitted and received in communication with other devices via the general purpose network such as the Internet. The communication unit O has the same function as that of the communication control unit according to the eighteenth embodiment.

The position information storage unit O stores position information generated by the mobile device O.

The reproducing unit O reproduces the position information stored in the position information storage unit O.

The relative position calculation unit O calculates relative position information from a the position information which is obtained from the position information storage unit O and then reproduced and b position information of a current position current position information of the mobile device O.

The coordinate information sending unit O provides other units with the position information of the mobile device O which is generated at a timing of receiving a trigger from the RF ID detection unit O.

The recording unit O writes the position information provided from the coordinate information sending unit O into the position information storage unit O.

The building coordinate information output unit O extracts building coordinate information from the information received by the communication antenna O.

The registered coordinate unit O extracts registered coordinate information from the information received by the communication antenna O.

The determination unit O examines determines an accuracy of the registered coordinate information extracted by the registered coordinate unit O.

If the determination unit O determines that the registered coordinate information is reliable then the reference coordinate unit O sets the registered coordinate information to be reference coordinate information and provides the reference coordinate information to the position information correction unit O.

The position information output unit O generates position information using direction information provided from the direction information unit O and position information provided from the position information unit O and provides the generated position information to another unit. The position information provided from the position information unit O and the direction information provided from the direction information unit O are position information of the mobile device O which is provided form the absolute coordinate calculation unit O that includes the position information correction unit O and the direction information correction unit O.

The direction information unit O generates direction information from information detected by the magnetic compass O.

Here the direction sensor according to the eighteenth embodiment includes the functions of the magnetic compass O and the direction information unit O.

The position information calculation unit O calculates position information of the mobile device O from a result of the communication with the satellites. For example the position information calculation unit O calculates longitude latitude and altitude of the position of the mobile device O.

The position information unit O generates position information from the position information generated by the position information calculation unit O.

Here the GPS sensor according to the eighteenth embodiment includes the functions of the satellite antenna O the position information calculation unit O and the position information unit O.

The position information correction unit O corrects a result of position information obtained from the integrators O and O by using pieces of information provided from the position information O the reference coordinate unit O and the building coordinate information output unit O.

The direction information correction unit O corrects a result of direction information obtained from the integrators O and O by using the information provided from the direction information unit O.

The angular velocity sensor O measures an angular velocity in the x axis direction of the mobile device O.

The angular velocity sensor O measures an angular velocity in the y axis direction of the mobile device O.

The angular velocity sensor O measures an angular velocity in the z axis direction of the mobile device O.

Here the angular velocity sensor according to the eighteenth embodiment includes the functions of the angular velocity sensor O the angular velocity sensor O and the angular velocity sensor O.

Here the acceleration sensor according to the eighteenth embodiment includes the functions of the acceleration sensor O the acceleration sensor O and the acceleration sensor O.

The absolute coordinate calculation unit O includes the position information correction unit O and the direction information correction unit O in order to calculate absolute coordinates of the mobile device O.

As described above the mobile device O according to the present embodiment can determine a position of the mobile device O when the mobile device O receives the product information from the RF ID device O thereby generating position information of the mobile device O. Thereby the mobile device O transmits to the first server O the position information and the product information of the product having the RF ID device O in association with each other. In addition a the reference coordinates and the building coordinate information which are generated from the registered coordinates received from the RF ID device O b the position information generated by the position information unit O and c the information generated by the direction information unit O allow the current position information of the mobile device O to be corrected. In addition combination of the registered coordinate information in the first server O and the building coordinate information in the second server O makes it possible to generate a 3D product map of a building in which a product having the RF ID device registered by using the mobile device O is located. It is also possible to display the generated 3D product map on the display unit Od.

The first server O is a server connected to the mobile device O via a general purpose network such as the Internet. The first server O includes a registered coordinate information unit O in which pieces of information regarding products having the RF ID devices O are managed.

The registered coordinate information unit O receives the information of the RF ID device O and the information of the mobile device O which are in association with each other. The registered coordinate information unit O manages the information of the mobile device O as parent device information and the RF ID device O as child device information in association with each other. The child device information is added with the position information generated by the mobile device O so as to manage also information indicating whether the terminal device product having the RF ID device O exists. In addition combination of the building coordinate information received from the second server O and the information in the registered coordinate information unit O makes it possible to generate a 3D product map of products including the mobile device O arranged in the corresponding building.

The second server O is a server connected to the first server O via the general purpose network such as the Internet. The second server O includes a building coordinate database O in which a room arrangement and coordinates of each existing building for example longitude latitude and altitude are managed in association with each other.

The room arrangement and coordinates of each existing building stored in the building coordinate database O can be combined with the registered coordinate information registered in the first server O in order to generate a 3D product map of products including the mobile device O arranged in the corresponding building. The building coordinate database O may be managed as private information in a server having security higher than that of the first server O for example a server having setting of preventing the server from directly communicating with the mobile device O . In this aspect it is possible reduce leakage of the private information.

As described above in the system according to the present embodiment the product information of the product having the RF ID device O is read by the mobile device O using proximity wireless communication. Then the mobile device O transmits to the first server O a the product information received from the RF ID device O and b the position information generated by touching the RF ID device O by the mobile device O to perform proximity wireless communication which are in association with each other. The first server O can manage the information of the mobile device O as parent device information and the information of the product having the RF ID device O as child device information in association with each other. In addition if relative positions of such products having the RF ID devices O are calculated using pieces of the position information of the products the relative positions can be used to generate a 3D map of the products.

In addition the system includes the second server O having a database in which a room arrangement and coordinates of each building are managed. The room arrangement and coordinates are combined with pieces of position information of products which are managed in the first server O. Thereby it is possible to generate a 3D map 3D product map of the products having the RF ID devices O arranged in each building.

Moreover the mobile device O can correct the current position information of the mobile device O by using a the reference coordinates and the building coordinate information which are generated from the registered coordinates received from the RF ID device O b the position information generated by the position information unit O and c the information generated by the direction information unit O.

The following describes processing of registering the product information of the product having the RF ID device O into the first server O.

If the mobile device O touches the RF ID device O to be able to perform proximity wireless communication with the RF ID device O the mobile device O supplies power and clock to the RF ID device O that thereby starts operating.

With the power supply the RF ID device O modulates the product ID O the first server URL O the service ID O and the accuracy identifier O which are stored and transmits these pieces of data to the mobile device O.

In receiving the product ID O the first server URL O the service ID O and the accuracy identifier O by the antenna O the mobile device O demodulates the received pieces of information in the RF ID device O.

The URL unit O extracts the first server URL O and provides the extracted first server URL O to the communication unit O.

The coordinate accuracy identification information O extracts the accuracy identifier O and provides the extracted accuracy identifier O to the determination unit O.

The RF ID detection unit O provides the coordinate information sending unit O and the reference coordinate unit O with a trigger for notifying of the receipt of the pieces of information from the RF ID device O.

In receiving the trigger the coordinate information sending unit O provides the communication unit O with the position information of the mobile device N which is received from the position information output unit O.

Here the description is given for the position information of the mobile device O outputted by the position information output unit O.

First the absolute coordinate calculation unit O receives a a result of integrating by the integrator O results detected by the angular velocity sensors O to O and b a result of integrating by the integrator O results detected by the acceleration sensors O to O. Here in the absolute coordinate calculation unit O the direction information correction unit O and the position information correction unit O correct the results of the integrators O and O based on a the information of the position information unit O storing the calculation result of the position information calculation unit O using the satellite antenna O and b information of the direction information unit O storing the results of the orientation indicated by the magnetic compass O.

Next the absolute coordinate calculation unit O provides the corrected direction information in the direction information unit O and the corrected position information in the position information unit O to the position information output unit O. The position information output unit O generates position information from the corrected direction information in the direction information unit O and the corrected position information in the position information unit O.

By the above described processing the mobile device O eventually generates position information current position information of the mobile device O.

Then the program execution unit O provides the product ID and the service ID which are stored in the RF ID storage unit O to the communication unit O.

The communication unit O generates data information including a the position information provided from the coordinate information sending unit O and b the product ID and the service ID provided from the program execution unit O. The communication unit O designates the first server URL notified from the URL unit O to be a destination address of the data and provides the data and the address to the transmission unit O. The transmission unit O modulates the data and transmits the modulated data to the first server O via the communication antenna O.

The registered coordinate information unit O stores the information of the mobile device O as parent device information and the information of the RF ID device O as child device information in association with each other. In more detail the product ID O and the service ID O which are information of the product having the RF ID device O child device are managed in association with the position information of a position at which the mobile device O parent device receives the product ID O and the service ID O from the RF ID device O.

The following describes processing performed by the mobile device O to generate a 3D map of products a 3D product map . Each of the products has the RF ID device O and has been registered by the mobile device O onto the first server O.

In a living room on the first floor a TV OA a BD recorder OB and an air conditioner OC are arranged. In a Japanese room on the first floor an air conditioner OD is arranged. On the second floor a TV OE and an air conditioner OF are arranged. Each of the above products is embedded with the RF ID device O. It is assumed that coordinates of a position of each product have already been registered to the registered coordinate information unit O connected to the first server O by using the mobile device O employing the above described processing for registering product information stored in the RF ID device O.

First the communication unit O in the mobile device O generates product information request data to be used to request the first server O to provide the product information registered by using the mobile device O.

The transmission unit O modulates the product information request data and transmits the modulated data to the first server O via the communication antenna O.

In receiving the product information request data the first server O generates product information response data and transmits the generated data to the mobile device O. The product information response data includes the child product information that managed in association with the mobile device O as its parent device. In this example the product information response data includes the product ID O the service ID and the position information regarding each of the TV OA the BD recorder OB the air conditioner OC the air conditioner OD the TV OE and the air conditioner OF.

Based on the position information of each product included in the product information response data the second server O extracts from the building coordinate database O image data including position coordinate information of a building hereinafter building coordinate information located at the same position as that of each product. illustrates the building coordinate information extracted from the building coordinate database O. The building coordinate information includes an image of a room arrangement and position information of a building.

The receiving unit O in the mobile device O receives the product information response data via the communication antenna O then modulates the received information and provides the modulated information to the communication unit O.

The program execution unit O generates image data of a 3D map of products as illustrated in using the position information of each of the products which is information included in the product information response data. In the 3D map the products are mapped as different icons on respective coordinates based on the corresponding position information so that the user can learn the arrangement of the products at a glance.

The data processing unit O provides the image data to the memory unit O in which the image data is temporarily stored.

The display unit Od displays image data of the 3D map of products illustrated in which is stored in the memory unit O.

Next in receiving the building coordinate information from the second server O via the communication antenna O the receiving unit O in the mobile device O demodulates the received building coordinate information and provides the demodulated information to the building coordinate information output unit O.

The building coordinate information output unit O analyzes the building coordinate information and provides the building coordinate information to the display unit Od. The display unit Od displays image data of a 3D product map as illustrated in . The displayed image data is a combination of the image data of and the already displayed image data of .

As described above it is possible to generate a 3D product map which the user having the mobile device O can see an arrangement of products at a glance.

Next the description is given for the processing performed by the mobile device O to correct the position information of the mobile device O by using the building coordinate information.

It is assumed in this example that product information of the air conditioner OD in is to be registered to the first server O.

Here the processing until when the first server O receives data including product ID and service ID from the mobile device O is the same as the processing described previously and therefore is not explained again below.

In receiving the product information of the air conditioner OD the first server O transmits the position information of the air conditioner DD to the second server O.

The second server O extracts from the building coordinate database O the building coordinate information of corresponding to the position information of the air conditioner OD. Then the second server O transmits the extracted building coordinate information to the first server O.

If the product to be registered is a product usually fixed to a wall or somewhere such as an air conditioner the first server O compares a the position information of the air conditioner that is indicated in the building coordinate information to b the position information of the air conditioner that is generated by the mobile device O. If the position information of the air conditioner that is generated by the mobile device O is not close to a wall the first server O transmits to the mobile device O the position information hereinafter referred to also as building coordinate information of the air conditioner that is indicated in the building coordinate information.

In receiving the building coordinate information the receiving unit O in the mobile device O demodulates the building coordinate information and provides the demodulated information to the building coordinate information output unit O. The building coordinate information output unit determines based on the building coordinate information and the position information of the air conditioner that the current position information of the mobile device O is to be corrected. Then the building coordinate information output unit O provides the building coordinate information to the position information correction unit O.

The position information correction unit O corrects the current position information of the mobile device O based on the building coordinate information provided from the building coordinate information output unit O.

Next the mobile device O registers information of the air conditioner OD into the first server O in association with the corrected current position information of the mobile device O.

As described above a the position information of the air conditioner that is indicated in the building coordinate information is compared to b the position information of the air conditioner that is generated by the mobile device O. Thereby it is possible to determine whether or not b the position information of the air conditioner that is generated by the mobile device O is deviated from a correct position. As a result the position information of the mobile device O can be corrected.

It should be noted that it has been described that the first server O receives the building coordinate information from the second server O for the determination. However the present invention is not limited to the above. For example it is also possible that the mobile device O obtains the building coordinate information from the second server O before transmitting information to be registered to the first server O and that the mobile device O compares the building coordinate information to the position information of the air conditioner OD to determine whether or not the position information of the mobile device O is to be corrected.

Next the description is given for the processing performed by the mobile device O to correct the position information of the mobile device O by using the accuracy identifier.

It is assumed that the product information of the air conditioner OC has already been registered to the first server O and the mobile device O touches the air conditioner OC.

When the mobile device O receives via the antenna O the product ID O the first server URL O the service ID O and the accuracy identifier O from the RF ID device O of the air conditioner OC the RF ID unit O in the mobile device O demodulates these pieces of information.

At this stage the mobile device O does not know whether the product information of the air conditioner OC has already been registered in the first server O. Therefore the mobile device O transmits to the first server O data including the position information of the mobile device O the product ID and the service ID by the product registration processing as described previously.

If the registered coordinate information unit O determines that the product information of the air conditioner OC has already been registered then the first server O generates data including the position information of the air conditioner OC that is registered in the registered coordinate information unit O and then transmits the generated data to the mobile device O.

When the receiving unit O in the mobile device O receives the position information of the air conditioner OC via the communication antenna O the receiving unit O demodulates the received position information and provides the demodulated information to the registered coordinate unit O.

The registered coordinate unit O extracts the position information from the data including the position information of the air conditioner OC and provides the extracted position information to the determination unit O.

The determination unit O determines whether or not the position information received from the registered coordinate unit O is to be reference coordinates based on the accuracy identifier O of the RF ID device O received from the coordinate accuracy identification information O.

Regarding the accuracy identifier O the RF ID device O is previously assigned with an accuracy identifier for identifying each different product as illustrated in .

Here the air conditioner OC is assigned with the accuracy identifier O representing a high accuracy. If the determination unit O determines that the position information of the mobile device O is to be corrected then the determination unit O provides the position information received from the registered coordinate unit O to the reference coordinate unit O.

Here if the accuracy identifier O represents a low accuracy then the mobile device O determines that it is not necessary to correct the position information of the mobile device O. Then the mobile device O notifies the determination result to the first server O. The first server stores the new position information of the air conditioner OC into the registered coordinate information unit. Thereby the processing is completed.

If there is a trigger from the RF ID detection unit O the reference coordinate unit O provides the position information received from the registered coordinate unit O to the position information correction unit O.

The position information correction unit O corrects the current position information of the mobile device O based on the position information received from the reference coordinate unit O.

Next the mobile device O notifies the first server O of that the position information is completed. Thereby the processing is completed.

As described above a the position information indicated in the building coordinate information is compared to b the position information generated by the mobile device O. Thereby it is possible to determine whether or not b the position information generated by the mobile device O is deviated from a correct position. As a result the position information of the mobile device O can be corrected thereby preventing unnecessary updating of the position information.

Furthermore products which are usually not moved from an initial equipped location are designated in a group of products having a high accuracy of the position coordinates. Thereby reliability of the accuracy can be improved.

If even position information of a product in the group having a high accuracy is deviated from a correct position more than predetermined times it is possible not to correct the position information newly generated by the mobile device O but to correct the position information registered in the registered coordinate information unit O.

It should be noted that it has been described that the mobile device O determines based on the accuracy identifier whether or not the position information is to be corrected. However the accuracy identifier may be transmitted to the first server O so that the first server O determines the necessity of the correction.

Next the description is given for processing performed by the mobile device O to manage relative positions of the products.

Here product registration is first performed for the TV OA. Then with reference to the position information of the TV OA as a reference point relative position information is generated for the BD recorder OB that is registered next.

When the mobile device O receives via the antenna O the product ID O the first server URL O the service ID O and the accuracy identifier O from the RF ID device O of the TV OA the RF ID unit O in the mobile device O demodulates these pieces of information. The coordinate information sending unit O in the mobile device O provides the recording unit O with the position information determined in detecting the RF ID device O.

In receiving the position information the recording unit O records the received position information onto the position information storage unit O.

After that in the same product registration processing as described earlier the mobile device O registers the product information of the TV OA into the first server O.

When the mobile device O receives via the antenna O the product ID O the first server URL O the service ID O and the accuracy identifier O from the RF ID device O of the BD recorder OB the RF ID unit O in the mobile device O demodulates these pieces of information.

The coordinate information sending unit O in the mobile device O provides the recording unit O with the position information determined in detecting the RF ID device O of the BD recorder OB.

The recording unit O does not record the position information of the BD recorder OB onto the position information storage unit O because the position information of the TV OA has already been recorded.

In receiving the position information from the coordinate information sending unit O the relative position calculation unit O obtains the position information of the TV OA from the position information storage unit O via the reproducing unit O.

Next the relative position calculation unit O calculates relative position information of the BD recorder OB which is with respect to a reference position or a reference point that is the position information of the TV OA obtained via the reproducing unit O. Then the relative position calculation unit O stores the calculation result into the position information recording unit.

By the above described processing it is possible to generate relative position information of a product with reference to a position of a different certain product.

It should be noted that it has been described that relative position information is stored in the mobile device position information storage unit O . However the present invention is not limited to the above. It is also possible that the mobile device O transmits relative position information to the first server O that manages the received relative position information in the registered coordinate information unit O.

It should also be noted that it has been described that the position information of the TV OA for which product registration is performed at the first time is set to be the reference position. However the present invention is not limited to the above.

For example a position predetermined by the user may be set to be the reference point reference position . For instance the reference point may be a position of an entrance of a building. If the mobile device O is a remote controller terminal of a TV a position of the TV may be the reference point.

In the present embodiment the position information storage unit O in the mobile device O holds relative position information. However the present invention in not limited to the above. For example the following aspect is also possible. The coordinate information sending unit O in the mobile device O provides position information generated by the mobile device O to the recording unit O every time the position information is generated. The recording unit O thereby records the position information onto the position information storage unit O. The position information storage unit O accumulates the position information generated by the mobile device O. In this aspect the program execution unit O generates trajectory information of the mobile device O from pieces of the position information accumulated in the position information storage unit O. Thereby a travel of the mobile device O can be estimated form the trajectory information.

It should be noted that it has been described in the present embodiment that the processing of the determination unit O is performed based on the two kinds of accuracy identifiers in . However the present invention is not limited to the above. For example the following is also possible. Two or more kinds of product classification are set. A threshold value is defined for each kind of the classification to represent a different size of deviation from the position information. Based on the threshold value the determination unit O determines whether or not to correct the position information of the mobile device O.

It should also be noted that the present embodiment may be combined with any other embodiments of the present invention. For example it is also possible that the function of the communication device MS according to the eighteenth embodiment is provided to a product having the RF ID device O and the 3D map 3D product map as well as home ID are shared among products within the same house. In this aspect each product obtains the 3D map beforehand from the mobile device O using the NFC function.

It should also be noted that it has been described in the present embodiment that the RF ID device O is provided to TVs BD recorders air conditioners and the like. illustrates a system including products OG to ON each having the RF ID device O. Each of the products OG to ON also includes a specific small power wireless communication device for example ZigBee which enables the products to directly communicate with each other within a range in which radio waves can be received. It is assumed that each of the products OG to ON has already obtained a 3D map from the mobile device O via the RF ID device O. The 3D map shows an arrangement of the products OG to ON. Or for another method each of the products OG to ON may have the communication antenna O in order to obtain via the interne the 3D map showing the product arrangement.

The following describes the situation where a product OH transmits data to a product OK by using the specific small power wireless communication device. The specific small power wireless communication device usually operates at a sleep mode in terms of power saving. At the sleep mode a power source of the specific small power wireless communication device is switched ON or OFF at regular intervals. Here timings of switching ON or OFF for the products are in synchronization with each other. When the product OH needs to transmit data the specific small power wireless communication device in the product OH is switched to an awake mode. At the awake mode the power source of the specific small power wireless communication device is always ON. The product OH examines the 3D map showing the arrangement of the products OG to ON which has previously been obtained. From the 3D map of the product arrangement the product OH determines products located between the product OH and the product OK. In this example a product OJ is determined from the 3D map to be a relay product to relay data.

The product OH instructs the product OJ to switch to the awake mode. The product OH transmits to the product OJ data addressed to the product OK. When the product OJ receives the data addressed to the product OK the product OJ transfers the data to the OK. Then the product OJ is switched to the sleep mode.

As described above using the 3D map the product OH determines a relay product in order to transmit data and causes only the determined relay product product OJ to be switched to the awake mode. Thereby other products which do not need to be at the awake mode do not need to be switched to the awake mode. Without the 3D map in order to establish a path to the product OK the product OH needs to cause all products to be switched to search for the path.

It should also be noted that the units included in each of the above described embodiments may be implemented into a Large Scale Integration LSI that is typically an integrated circuit. These units may be integrated separately or a part or all of them may be integrated into a single chip. Here the integrated circuit is referred to as a LSI but the integrated circuit can be called an IC a system LSI a super LSI or an ultra LSI depending on their degrees of integration. The technique of integrated circuit is not limited to the LSI and it may be implemented as a dedicated circuit or a general purpose processor. It is also possible to use a Field Programmable Gate Array FPGA that can be programmed after manufacturing the LSI or a reconfigurable processor in which connection and setting of circuit cells inside the LSI can be reconfigured.

Furthermore if due to the progress of semiconductor technologies or their derivations new technologies for integrated circuits appear to be replaced with the LSIs it is of course possible to use such technologies to implement the functional blocks as an integrated circuit. For example biotechnology and the like can be applied to the above implementation.

This is because the home appliances sometimes employ various different protocols at an upper layer higher than a physical layer and a MAC layer although they employ a standardized common protocol at the physical layer and the MAC layer . For example an apparatus performs authentication by using NFC while an apparatus performs authentication by using buttons. Moreover the home appliances would employ various near field communication methods such as BlueTooth and wireless LAN . . In this case the home appliances employ different protocols even for the physical layer and the MAC layer. Therefore the home appliances perform operation at these layers in the same manner as the situation where they have different protocols for the upper layer. Therefore the home appliance control device can cope with the above situations if the home appliance control device has protocols corresponding to various manufacturers and apparatuses as described previously.

As shown in a in at the beginning the user near the home appliance control device switches a mode of the mobile terminal to an apparatus connection mode and causes the mobile terminal to touch the home appliance control device Step . Here in the description touching refers to establishing of short distance communication to perform near field communication. When the user makes the mobile terminal touch the home appliance control device the mobile terminal establishes near field communication with the home appliance control device and obtains from the home appliance control device a communication ID such as a MAC address an apparatus ID such as a product serial number and an available communication protocol information of a server connecting with the home appliance control device a cryptography key for a wireless communication path and the like a in . Here the communication ID is provided to target home appliance s so that the target home appliance s can be connected to the home appliance control device . The apparatus ID is identification necessary for the mobile terminal to perform inquiry to the server.

As described above the home appliance control device and the mobile terminal exchange information via proximity wireless communication and establish a safety path between them via the server for a predetermined time period. Here the safely path is an encrypted communication path including another wireless path such as a path for cellular phones. The safety path via the server is used to update a secret key between the home appliance control device and the mobile terminal in order to provide the secret key to the home appliance.

However if the effective secret key is issued for example on a day to day basis a security strength of the secret key is decreased. Furthermore if consecutive setting processes are to be performed for the apparatus home appliance such as the solar panel NH in which is far from the home appliance control device the security strength is further decreased. However in the present embodiment a new secret key can be issued merely by pressing a button on the mobile terminal. As a result it is possible to shorten an effective time period of the secret key and keep the security strength. In addition when the mobile terminal keeps issuing new secret keys and also touches a plurality of home appliances to provide them with the secret keys it is possible to sequentially perform authentication processes between a each of the home appliances far from the home appliance control device and b the home appliance control device .

Here the use of the above method is not limited to the wireless communication paring within a user s home. For example the above method can also be used to perform paring between a home appliance in the user s home and a home appliance in a home of a user s relative or friend. Thereby the user can easily perform pairing processing even if the target apparatuses are not in the home.

Furthermore when moving the mobile terminal can generate position information of the mobile terminal itself by using a six axis sensor or a GPS. Therefore the user makes the mobile terminal touch the home appliance control device Step and moves to the location of the solar panel NH Steps to and makes the mobile terminal touch the solar panel NH Step and the same time transmits position information of the mobile terminal to the server. Thereby the server can manage three dimensional 3D relative position information of the home appliance control device hereinafter referred to also as a Smart Energy Gateway SEG and the solar panel NH.

As shown in at the beginning when the user makes the mobile terminal touch the first panel solar panel No. of the solar panel NH Step the mobile terminal starts connecting the first panel solar panel No. to the home appliance control device SEG or the server. More specifically from the first panel solar panel No. the mobile terminal obtains information such as an apparatus ID of the solar panel NH or a communication protocol or a product sever address of a manufacturer of the solar panel NH. Based on the obtained information the mobile terminal determines whether or not the first panel solar panel No. is capable of communicating with the home appliance control device or the server. The information may be sent to the server and the determination may be made by any one of the server and the mobile terminal. If the obtained communication protocol enables communication between the first panel solar panel No. and the home appliance control device or the server then the mobile terminal performs setting for connection between the first panel solar panel No. and the home appliance control device or the server by using the communication ID. On the other hand if the obtained communication protocol does not enable the communication then the mobile terminal may download firmware from the server to update the firmware by proximity wireless communication or may instruct the home appliance control device SEG to update the firmware.

As described above the mobile terminal performs authentication between the first panel solar panel No. and the home appliance control device SEG or the server. For example as shown in the first panel solar panel No. obtains a net ID for example to perform authentication with the home appliance control device SEG or the server.

If the solar panel is an apparatus home appliance that cannot be set automatically by proximity wireless communication the user performs the setting for the solar panel by hands and requests the home appliance control device to transmit a signal of setting completion to the mobile terminal so that the mobile terminal can confirm the setting completion. Furthermore if the solar panel NH is an apparatus home appliance that can be set by simultaneously pressing a setting button of a terminal and a button of the home appliance control device the setting button of the mobile terminal and the button of the home appliance control device are cooperated with each other via a safety path to perform the setting by the simultaneous button pressing. It is assumed that these setting methods are assumed to be automatically downloaded to the mobile terminal from both the home appliance control device SEG and the home appliance. Thereby the user can instantly complete the setting by using an optimum method among them.

At the beginning when the solar panel is to be set the user sets an apparatus connection mode of the mobile terminal Step S .

Next the mobile terminal displays Please make the mobile terminal touch be close to the home appliance control device Step S and starts polling by proximity wireless communication. Then the user makes the mobile terminal touch the home appliance control device a parent device or a solar panel controller Step S . Here the mobile terminal repeats the polling until the user makes the mobile terminal touch the home appliance control device . The repeating times out when a predetermined time period has passed without the touch. Furthermore if the home appliance control device is at a sleep mode so that a part of circuits in the home appliance control device is not activated the touch of the mobile terminal activates the home appliance control device .

Next the mobile terminal changes a current mode to a mode for setting of connection to another apparatus and downloads a connection setting program corresponding to the home appliance control device from the server Step S .

More specifically the mobile terminal performs 1 cryptographic communication and 2 obtainment of an apparatus ID a communication ID MAC address NFC ID or the like an available communication protocol a version of the communication protocol and a sever address regarding the home appliance control device by the proximity wireless communication NFC or the like. Next the mobile terminal connects to the server having the obtained sever address and performs cryptographic communication with the server. More specifically the mobile terminal is connected to the server changes a current mode to a mode for setting of connection to another apparatus and downloads a connection setting program corresponding to the home appliance control device from the server. Here if the version of the communication protocol is old a new version of the communication protocol is downloaded from the server to perform version up.

Next the mobile terminal displays Please touch a target apparatus to be connected within one hour Step S . More specifically since the setting mode at Step S is effective for a predetermined time period the mobile terminal displays a notice to request the user to perform the touching within the predetermined time period.

Next the mobile terminal measures a distance between the mobile terminal and the home appliance control device SEG S .

More specifically the user having seen the display at S brings the mobile terminal to a location of a target apparatus to be connected. Here the mobile terminal measures a position relative position of the mobile terminal with respect to the position of the home appliance control device on a 3D space by using the angular velocity sensor the acceleration sensor the geomagnetic sensor the GPS and the like and thereby calculates a 3D movement locus and coordinates of the moved position of the mobile terminal. Thereby the mobile terminal can measure a distance from the home appliance control device SEG . Here the calculation may be performed by the server not by the mobile terminal. In this case the mobile terminal transmits the measured data to the server. Then the server uses the data to calculate a 3D movement locus and coordinates of the moved position of the mobile terminal and thereby measures a distance between the mobile terminal and the home appliance control device SEG .

Here the mobile terminal determines whether or not the traveling time or the distance is long for the user Step S . If it is determined that the traveling time or the distance is short No at Step S then the mobile terminal provides a secret key issued by the home appliance control device to the target home appliance when the mobile terminal touches the home appliance.

On the other hand if it is determined that the traveling time or the distance is long Yes at Step S then the mobile terminal temporarily turns the setting mode OFF Step S . Then when the position information of the mobile terminal becomes close to the position information of the apparatus the mobile terminal turns the setting mode ON again Step S and is connected to the server to request the home appliance control device to re issue the secrete key.

Next the mobile terminal communicates with the home appliance control device and thereby records a the number of home appliances for which the mobile terminal has provided pieces of setting information to the home appliance control device b the number of setting completions actually performed by the home appliance control device based on the pieces of setting information and c numeral numbers assigned to the respective setting completions Step S Step S . Thereby the home appliance control device can confirm whether or not unconformity occurs after authorization with the plurality of mobile terminals.

Next the mobile terminal performs proximity wireless communication with the n th apparatus solar panel for example Step S . More specifically the user makes the antenna unit of the mobile terminal touch an antenna unit of the n th apparatus to perform proximity wireless communication with the n th apparatus.

Then the mobile terminal reads information from the memory of the n th apparatus via NFC Step S . More specifically the mobile terminal reads from the memory of the n th apparatus NFC ID a MAC address a manufacturer ID standard version and protocol of the wireless communication a manufacturer name a product name a model number an error and or a history. Here the mobile terminal may transmit the readout information to the server.

Next the mobile terminal determines whether or not the home appliance control device and the n th apparatus solar panel for example can communicate with each other Step S . Here in the case where the mobile terminal transmits the readout information to the server at Step S the server may determine whether or not the home appliance control device and the n th apparatus solar panel for example can communicate with each other.

Next the mobile terminal determines whether or not the home appliance control device and the n th apparatus have respective different communication protocols Step S .

If it is determined that the home appliance control device and the n th apparatus have the same communication protocol No at Step S then the mobile terminal further determines whether or not the communication protocol of the n th apparatus is old Step S . Then if it is determined that the communication protocol of the n th apparatus is old Yes at Step S then the mobile terminal downloads a new version of the communication protocol from the server and performs version up of the communication protocol of the n th apparatus by proximity wireless communication Step S .

On the other hand at Step S if it is determined that the home appliance control device and the n th apparatus have different communication protocols Yes at Step S then the mobile terminal downloads from the server data of a communication protocol corresponding to the n th apparatus or the home appliance control device Step S and installs the communication protocol data onto the home appliance control device .

More specifically the mobile terminal downloads the communication protocol data corresponding to the n th apparatus from the server. When the user makes the mobile terminal touch the home appliance control device the mobile terminal installs onto the home appliance control device via NFC the new protocol by which the home appliance control device can communicate with the n th apparatus. Here the mobile terminal may perform the installation via the Internet such as wireless LAN.

It is also possible at Step S that the mobile terminal issues instructions to the home appliance control device to download the communication protocol data corresponding to the n th apparatus so that the new protocol by which the home appliance control device can communicate with the n th apparatus is installed onto the home appliance control device .

Next the mobile terminal determines whether or not the new protocol by which the home appliance control device can communicate with the n th apparatus has already been installed onto the home appliance control device Step S .

If the installation has not yet been completed due to for example error occurred during a process from the downloading to the installation No at Step S then the Steps S and S are repeated. On the other hand if the installation has already been completed Yes at Step S then the user inputs presses a switch button of the mobile terminal for start of connection between the home appliance control device and the apparatus .

Next the mobile terminal detects that the switch button for start of connection between the home appliance control device and the apparatus is inputted pressed Step S .

Next the mobile terminal issues a secret key with expiration Step S . It should be noted that the issue of the secret key with expiration is not necessarily performed by the mobile terminal. The home appliance control device hereinafter referred to also as a SEG or the server may issue the secret key.

Next the mobile terminal transmits the issued secret key to the home appliance control device SEG Step S . It should be noted that the mobile terminal may transmit not only the secret key but also a network ID or MAC address of the n th apparatus to the home appliance control device SEG . Typically the mobile terminal transmits the secret keys and the like to the home appliance control device SEG via the server on the Internet or via Intranet such as wireless LAN.

Next the mobile terminal transmits the secret key and a transmission instruction to the n th apparatus by NFC Step S .

Here it is also possible that the mobile terminal transmits to the n th apparatus a network ID or MAC address of the home appliance control device SEG as well as the secret key and the transmission instruction.

At the beginning the mobile terminal determines whether or not the n th apparatus solar panel for example and the home appliance control device SEG communicate with each other directly by short distance wireless communication ZigBee for example Step S .

If the communication is performed directly Yes at Step S then the mobile terminal changes a radio strength of the short distance wireless communication according to a distance L between the n th apparatus and the home appliance control device SEG in order to increase security as well as energy saving Step S . Here if the distance L or an obstacle in the communication is large the mobile terminal presents the user with a screen display for recommending the user to perform communication between the n th apparatus and the home appliance control device SEG via a relay device that will be described later.

Next the home appliance control device SEG and the n th apparatus authenticate each other mutual authentication Step S .

Next the home appliance control device SEG transmits the authentication result to the mobile terminal via the server Step S . Here it is also possible that the user makes the mobile terminal touch the n th apparatus so that the mobile terminal obtains the authentication result from the n th apparatus Step S . It is further possible at Step S that the authentication result is displayed on the n th apparatus by illumination or the like so that the user learns the authentication result.

If the authentication fails No at Step S No at Step S the processing returns to the step of key issuing.

Next the mobile terminal determines whether or not connection authentication of the n th apparatus in other words authentication of connection between the n th apparatus and the home appliance control device SEG has already been completed Step S .

Next the mobile terminal determines whether or not the n th apparatus is a final apparatus to be connected Step S .

If the n th apparatus is a final apparatus to be connected in other words connection authentication has been performed for all of target apparatuses Yes at Step S then the mobile terminal notifies the server of that connection authentication has been performed for all of target apparatuses and then releases the connection mode and completes the processing.

On the other hand if the n th apparatus is not a final apparatus to be connected No at Step S then the mobile terminal performs processing shown in to perform connection authentication for a next target apparatus the n 1 th apparatus .

More specifically the mobile terminal is moved to a location of the next n 1 th apparatus Step S and obtains physically relative or absolute 3D position information of the mobile terminal Step S .

Then the mobile terminal displays on the screen of the mobile terminal 2D or 3D image information or coordinate information which indicates pieces of 2D or 3D position information of the first to the n 1 th apparatuses Step S .

As described above when the mobile terminal performs the above described setting for a plurality of apparatuses the mobile terminal displays on the screen of the mobile terminal pieces of the position information of the apparatuses. At S the mobile terminal may transmit the obtained pieces of physically relative or absolute 3D position information to the server. In this case the server maps arrangement relationships of the n th and n 1 th apparatuses panels in the solar panel for example onto a 3D space. It is also possible that the server transmits to the mobile terminal the 2D or 3D image information or coordinate information which indicates pieces of 2D or 3D position information of the first to the n 1 th apparatuses and the mobile terminal thereby displays the transmitted information on the screen of the mobile terminal.

If the screen display of the image information or coordinate information has been completed Yes at Step S then the mobile terminal returns to S in and repeats the processing. On the other hand if the screen display has not yet been completed No at Step S then the processing repeats from S.

More specifically at the beginning a light blocking sheet is removed from the n th panel of the solar panel Step Sf then it is examined whether or not the n th panel is normal Step Sg . In more detail the mobile terminal or a controller c such as the above described home appliance control device SEG receives from a communication IC e of the n th panel information of a voltage a current and a temperature of the n th panel thereby performing the above described checking. For example the controller c checks a total energy production of the n th panel in order to check whether or not the n th panel is normal. Then the controller c transmits the check result to the mobile terminal via the Internet or an Intranet.

Here as shown in the communication IC e includes a wireless IC such as ZigBee and a communication IC f such as NFC. The communication IC e is shielded and is not connected to the outside except a power supply line a. Therefore the communication IC e has a long life of about thirty years satisfying long life requirement. Furthermore the controller c such as the home appliance control device SEG receives instructions from the server d and therefore the controller c causes a power supply unit b to supply power to the communication IC e for several tens of seconds several times per hour in order to intermittently apply a voltage. As a result a duty cycle of about 1 100 is achieved. Therefore the communication ICs embedded on the solar panel are hardly deteriorated. As a result the communication ICs can ensure a longer life in comparison to the method by which a voltage is constantly applied.

The following describes an example of Step S in in the case where the home appliance control device SEG and the apparatus are manufactured by different manufacturers or have different protocols with reference to .

Next at Step Sb the mobile terminal touches the home appliance control device SEG in order to establish proximity wireless communication with the home appliance control device SEG .

Then at Step Sc the mobile terminal reads from the home appliance control device SEG various pieces of data of the home appliance control device SEG such as a manufacturer name an apparatus ID a product number and a sever address.

Next at Step Sd the mobile terminal determines whether or not the sever address is obtained from the home appliance control device SEG . If the determination at Step Sd is Yes then the processing proceeds to Step Se.

Next at Step Se the mobile terminal accesses the sever address to be connected to the server at Step Sf. If the connection is successful Yes at Step Sf then the processing proceeds to Step Si in .

On the other hand if the determination is No at Step Sd or Step Sf the processing proceeds to Step Sg. More specifically at Step Sg the mobile terminal accesses the sever address of the manufacturer or the product number of the home appliance control device SEG .

Next at Step Sh the mobile terminal displays on its menu screen the manufacturer or the product number of the home appliance control device SEG .

Then the user confirms the manufacturer or the product number of the home appliance control device SEG on the menu screen thereby selecting the home appliance control device SEG to be communicate with a target apparatus.

The following describes a method of performing version up of software in the home appliance control device SEG with reference to .

At the beginning at Step Si the mobile terminal displays an initial menu. Then from the initial menu the user selects a menu for connecting the home appliance control device SEG to a new target apparatus for example the n th panel in the solar panel NH .

Next at Step Sk the mobile terminal determines whether or not there is a new version of software or firmware of the home appliance control device SEG .

If it is determined that there is a new version of software or firmware of the home appliance control device SEG Yes at Step Sk then the processing proceeds to Step Sm. At Step Sm the mobile terminal downloads the new version form the server. Then the mobile terminal displays on its screen an Installation button for starting installation.

Next at Step Sn the mobile terminal determines whether or not the user selects the Installation button. If it is determined that the user selects the Installation button Yes at Step Sn then at Step Sp the mobile terminal performs version up of the software or firmware for the home appliance control device SEG after performing authentication between the home appliance control device SEG and the server. Then the processing proceeds to Step Sq in . Here the version up for the home appliance control device SEG may be performed not by the mobile terminal but by the home appliance control device SEG instructed by the mobile terminal.

If the determination at Step Sk is No in other words there is no new version of the software or firmware of the home appliance control device SEG or if the determination at Step Sn is No in other words the user does not select the Installation button on the mobile terminal then the processing proceeds to Step Sq in .

At the beginning at Step Sq the mobile terminal determines whether or not the home appliance control device SEG is connected to the server. If it is determined that the home appliance control device SEG is connected to the server Yes at Step Sq then at Step St the mobile terminal performs authentication between the home appliance control device SEG and the server.

Next if the authentication between the home appliance control device SEG and the server has been completed then at Step Sa the mobile terminal causes the home appliance control device SEG to download a new version software from the server to install it.

Next at Step Sb the mobile terminal determines whether or not the installation has been completed. If it is determined that the installation has been completed Yes at Step Sb then the processing proceeds to Step Sg in . On the other hand if the installation has not been completed at Step Sb the processing returns to Step St.

On the other hand if it is determined that the home appliance control device SEG is not connected to the server No at Step Sq then at Step Sr the mobile terminal downloads the new version software from the server.

Next at Step Ss it is determined whether or not the downloading has been completed. If it is determined that the downloading has been completed Yes at Step Ss then at Step Sc the mobile terminal displays Please touch home appliance control device SEG for m seconds. 

Next at Step Sd the mobile terminal determines whether or not the mobile terminal has established proximity wireless communication with the home appliance control device SEG .

Next if it is determined that the mobile terminal has established proximity wireless communication with the home appliance control device SEG Yes at Sd in other words if the mobile terminal touches the antenna unit of the home appliance control device SEG then at Step Se the mobile terminal transmits the new version software to the home appliance control device SEG by using the proximity wireless communication direct NFC or the like and causes the home appliance control device SEG to install the software.

On the other hand if it is not confirmed that the mobile terminal has established proximity wireless communication with the home appliance control device SEG No at Sd then the processing returns to Step Sc.

Next at Step Se the mobile terminal determines whether or not the home appliance control device SEG has completed the installation. If it is determined that the installation has been completed Yes at Step Sf then the processing proceeds to Step Sg in .

On the other hand if the home appliance control device SEG has not completed the installation No at Step Sf then the processing proceeds to Step Sc.

The following describes a flow in the case where a version of the software of the home appliance control device SEG is the latest one and the home appliance control device SEG previously holds information of a target apparatus to be connected with reference to .

At the beginning at Step Sg the mobile terminal determines whether or not the home appliance control device SEG is connected to the server.

If the determination at Step Sg is Yes then the processing proceeds to Step Sh. At Step Sh the mobile terminal is connected to the home appliance control device SEG via the server. On the other hand if the determination at Step Sg is No then the processing proceeds to Step Si. At Step Si the mobile terminal is connected to the home appliance control device SEG via a wireless Intranet such as a wireless LAN or ZigBee.

Next at Step Sj on the menu screen or the like of the mobile terminal the mode of the mobile terminal is set to an apparatus connection mode . Thereby the mobile terminal displays for example What is a manufacturer name of the target apparatus to be connected 

Next at Step Sk if a manufacturer name a model number or a product number of the target apparatus to be connected an air conditioner a washing machine a TV a recorder or the like is known Yes at Step Sk then the user selects or inputs the manufacturer name the model number or the product number on the screen of the mobile terminal.

Thereby at Step Sm the mobile terminal transmits the input data to the server. Then the server examines protocol information such as communication standard middleware and an application program of the target apparatus based on the apparatus information provided from the mobile terminal.

Next at Step Sp the server determines whether or not the home appliance control device SEG and the target apparatus can normally communicate with each other by using their communication protocols. If the determination at Step Sp is Yes then the processing proceeds to Step Se in .

Referring back to Step Sk if the determination at Step Sk is No then the processing proceeds to Step Se in . If the determination at Step Sp is No then the processing proceeds to Step Sq in .

The following explains . is a flowchart of processing for connection between the home appliance control device SEG to the target apparatus according to the present embodiment.

At the beginning at Step Sq the server searches for a new version communication protocol physical layer middleware application layer and transmits the searched out new version communication protocol to the mobile terminal or the home appliance control device SEG .

Next at Step Sr the mobile terminal displays Do you wish to download a new version communication protocol 

Next at Step Ss the mobile terminal detects whether or not an OK button displayed on its screen is pressed thereby determining whether or not to download the new version communication protocol. If the determination at Step Ss is Yes then the processing proceeds to Step Su. Otherwise No at Step s the processing proceeds to Step St. At Step St the mobile terminal displays The home appliance control device SEG cannot be connected to this apparatus to communicate. 

Next at Step Su the mobile terminal determines whether or not the home appliance control device SEG is connected to the server and data of the communication protocol is large.

If the determination at Step Su is Yes then the processing proceeds to Step Sa. At Step Sa the mobile terminal starts communication between the home appliance control device SEG and the target apparatus. More specifically the mobile terminal transmits an installation instruction a cryptographic communication key and authentication data directly to the home appliance control device SEG . Thereby within a predetermined time period set by the server the home appliance control device SEG downloads from the server communication protocol necessary for communication with the target apparatus. As a result communication between the home appliance control device SEG and the target apparatus starts.

Next at Step Sb the mobile terminal determines whether or not the communication between the home appliance control device SEG and the target apparatus is successful. If the communication is successful at Step Sb then the processing proceeds to Step Se in . Otherwise the processing returns to Step Sr.

Referring back to Step Su if the determination at Step u is No then the processing proceeds to Step Sc. At Step Sc the mobile terminal transmits the downloaded communication protocol to the home appliance control device SEG and causes the home appliance control device SEG to install the communication protocol. More specifically the mobile terminal temporarily downloads the communication protocol from the user and shares a cryptography key with the home appliance control device SEG after mutual authentication between the home appliance control device SEG and the server. Then the mobile terminal transmits the downloaded communication protocol to the home appliance control device SEG by direct NFC or the like and causes the home appliance control device SEG to install the communication protocol.

Next at Step Sd the mobile terminal determines whether or not the home appliance control device SEG has installed the communication protocol. If it is determined at Step Sd that the installation is successful then the processing proceeds to Step Se in . Otherwise the processing returns to Step Su.

The following explains . is a flowchart of processing for connection between the home appliance control device SEG to the target apparatus according to the present embodiment.

At the beginning at Step Se the mobile terminal determines whether or on the user selects a mode for performing connection setting for a new apparatus .

If the determination at Step Se is Yes then at Step Sf the mobile terminal establishes cryptographic communication with the home appliance control device SEG . More specifically when the user makes the mobile terminal touch the home appliance control device SEG the mobile terminal establishes cryptographic communication with the home appliance control device SEG . Here the cryptographic communication refers to cryptographic communication via the Internet or via a home network such as wireless LAN except NFC.

Next at Step Sg the mobile terminal displays Please move to the location of the apparatus within n minutes. 

Next at Step Sh the operator user sees the display on the screen of the mobile terminal and thereby starts the moving. More specifically the mobile terminal starts moving by the operator user and the processing proceeds to Si in .

The following describes 3D mapping with reference to . is a flowchart of processing for connection between the home appliance control device SEG to the target apparatus according to the present embodiment.

At the beginning at Step Si the mobile terminal obtains relative 3D coordinate information of a position of the mobile terminal with respect to the home appliance control device SEG . More specifically the mobile terminal measures 3D changes of the position of the mobile terminal with respect to a position of the home appliance control device SEG by using at least one of the angular sensor the geomagnetism sensor and the acceleration sensor. Then the mobile terminal generates the relative 3D coordinate information with respect to the home appliance control device SEG .

Next at Step Sj the mobile terminal determines whether or not the mobile terminal has reached the target apparatus. More specifically the mobile terminal determines whether or not the mobile terminal has reached the target apparatus such as the air conditioner on the first floor the air conditioner on the second floor the microwave on the first floor the washing machine on the first floor the TV on the first floor or the recorder on the first floor. If the determination at Step Sj is Yes then the processing proceeds to Step Sk. Otherwise No at Step Sj the processing returns to Step Si.

Next at Step Sk the operator user determines whether or not the apparatus at which the mobile terminal has reached includes the first wireless communication unit NFC for example the first antenna unit and the like. If the determination at Step S is Yes then the processing proceeds to Step Sn. At Step Sn the operator user makes the mobile terminal touch the first antenna unit of the apparatus to establish proximity wireless communication between the mobile terminal and the apparatus. At Step Sp the mobile terminal reads information regarding the apparatus from the apparatus and transmits the information to the server. More specifically the mobile terminal reads a MAC address and a network ID of the apparatus and transmits them to the server.

Next at Step Sg the mobile terminal transmits 3D coordinate information of the position of the apparatus to the server.

Next at Step Sr the mobile terminal determines whether or not the apparatus and the home appliance control device SEG have the same communication protocol. If the determination at Step Sr is Yes then the processing proceeds to Step Ss. Otherwise No at Step Sr the processing proceeds to Step Sz. At Step Sz the mobile terminal performs the change routine for the communication protocol of the home appliance control device SEG as described above and the processing proceeds to Step Ss.

Here the operator user presses for example a connection start button to start connection between the home appliance control device SEG and the apparatus.

Next at Step St the mobile terminal issues a secret key with expiration and transmits the secret key as well as a transmission instruction to the apparatus by proximity wireless communication such as NFC. Here the mobile terminal transmits the secret key also to the home appliance control device SEG . It should be noted that the secret key may be issued not by the mobile terminal but by the server.

Next at Step Su the mobile terminal causes the home appliance control device SEG and the apparatus to start authentication between them. Here if the home appliance control device SEG and the apparatus communicate directly to each other then the mobile terminal determines that the home appliance control device SEG and the apparatus start the authentication. If it is determined at Step Sx that the authentication has been completed the connection is completed. On the other hand if the authentication has not been completed at Step Sx the processing returns to Step n.

Referring back to Step Sk if the determination at Step Sk is No if NFC communication fails then the processing proceeds to Step Sl. At Step S information of the apparatus such as a manufacturer name a product name a product model number and a product serial number are read by a bar code reader of the mobile terminal or by user s eyes to input them into the mobile terminal. Then at Step Sn the mobile terminal transmits the input data the information of the apparatus to the server and the processing proceeds to Step Sa in .

The following explains . is a flowchart of processing for connection between the home appliance control device SEG to the target apparatus according to the present embodiment.

At the beginning at Step Sa based on the information of the apparatus which has been provided from the mobile terminal the server examines protocol information of the apparatus and protocol information of the home appliance control device SEG . Examples of the protocol information are a communication standard a middleware and an application program. At Step Sb the server determines whether or not the home appliance control device SEG and the target apparatus can normally communicate with each other by using their communication protocols.

If the determination at Step Sb is Yes then the processing proceeds to Step Sc in . If the determination at Step Sb is No then the processing proceeds to Step Sc. At Step Sc the server searches for a version of communication protocol physical layer middleware application layer of the home appliance control device SEG which is suitable for communication with the target apparatus.

Next at Step Sd the mobile terminal displays Do you wish to download communication protocol suitable for the target apparatus 

Next at Step Se the mobile terminal detects whether or not the OK button displayed on the screen is pressed thereby determining whether or not to download a new version communication protocol. If the determination at Step Se is Yes the processing proceeds to Step Sg in . Otherwise No at Step Se then at Step Sf the mobile terminal displays The home appliance control device SEG cannot communicate with this apparatus. 

The following explains . is a flowchart of processing for connection between the home appliance control device SEG to the target apparatus according to the present embodiment.

At the beginning at Step Sg the mobile terminal determines whether or not the home appliance control device SEG is connected to the server. If the determination at Step Sg is Yes then the processing proceeds to Step Sh. At Step Sh the mobile terminal further determines whether or not the mobile terminal can perform cryptographic communication with the home appliance control device SEG . More specifically the mobile terminal determines whether or not the mobile terminal can perform cryptographic communication with the home appliance control device SEG via the Internet or a wireless home network except NFC .

If it is determined at Step Sh that the cryptographic communication is possible then the processing proceeds to Step Si. At Step Si the mobile terminal installs onto the home appliance control device SEG a communication protocol necessary to be connected to the target apparatus. More specifically the mobile terminal transmits an installation instruction a cryptographic communication key authentication data and the like to the home appliance control device SEG via the Internet or via an intranet such as a wireless LAN within a predetermined time period. The communication protocol necessary for communication with the target apparatus is downloaded from the mobile terminal or the server to the home appliance control device SEG . Thereby the mobile terminal causes the home appliance control device SEG to install the communication protocol necessary for communication with the target apparatus.

Next at Step Sj the mobile terminal determines whether or not the communication protocol has been installed on the home appliance control device SEG . If it is determined at Step Sj that the installation is successful then the processing proceeds to Step Sk. At Sk the apparatus and the home appliance control device SEG perform wireless communication except NFC with each other by using optimum communication protocol thereby starting authentication process. Here the home appliance control device SEG and the apparatus can calculate a distance and obstacles between them based on 3D coordinate information of their positions and 3D structure information of the building so that they can set optimum minimum signal output according to the calculation result.

Next at Step Sm the mobile terminal displays a notice to persuade the user to issue instructions to the apparatus to start connection such as Start of connection is possible. or Please press the OK button and the apparatus connection start button within m seconds. 

On the other hand if the determination at Step Sg or Step Sh is No then the processing proceeds to Step Sa. At Step Sa the mobile terminal displays Please move and touch the home appliance control device SEG . More specifically the mobile terminal is moved to the location of the home appliance control device SEG and displays Please touch the home appliance control device SEG . Next at Step Sb the mobile terminal establishes proximity wireless communication with the home appliance control device SEG . More specifically when the operator user moves to the home appliance control device SEG and makes the mobile terminal touch the home appliance control device SEG the mobile terminal establishes proximity wireless communication with the home appliance control device SEG . Then the processing proceeds to Step Sc in .

The following explains . is a flowchart of processing for connection between the home appliance control device SEG to the target apparatus according to the present embodiment.

Thereby at Step Sp the mobile terminal transmits an instruction to the home appliance control device SEG to issue a secret key and continue cryptographic communication for a predetermined time period.

Then at Step Sr the apparatus issues the secret key with expiration and continue cryptographic communication for the predetermined time period.

Next at Step Ss the mobile terminal determines whether or not the home appliance control device SEG and the apparatus authenticate each other. At Step St the mobile terminal determines whether or not the mutual authentication is successful.

It is determined at St that the mutual authentication is successful then the processing proceeds to Step Su. At Step Su the mobile terminal displays Completion of connection between home appliance control device SEG and apparatus on the screen. Here it is also possible that the mobile terminal causes the apparatus to perform a specific operation such as display.

On the other hand if the determination at Step St is No in other words if the mutual authentication fails then at Step Sx the mobile terminal displays Connection failure .

The following explains . Each of is a flowchart of processing for connection between the home appliance control device SEG to the target apparatus via a relay device according to the present embodiment.

At Step a the mobile terminal determines whether or not it is difficult for the target apparatus and the home appliance control device SEG to communicate directly with each other. More specifically in order to make the above determination the mobile terminal is connected to for example the server and determines based on a 3D coordinate information of a position of the target apparatus to be connected to the server or the home appliance control device SEG and b 3D coordinate information of a position of the home appliance control device SEG whether or not a distance or obstacle between the target apparatus and the home appliance control device SEG is large.

Next if the determination at Step Sa is Yes then the processing proceeds to Step Sb. At Step Sb the mobile terminal obtains from the server position information of a relay device between the target apparatus and the home appliance control device SEG . More specifically based on 3D coordinate information of positions of relay devices which is stored in the server the server searches for a relay device for example a PAN coordinator between the target apparatus and the home appliance control device SEG . Then the server notifies the position information of the searched out relay device to the mobile terminal. Thereby the mobile terminal obtains from the server the position information of the relay device existing between the target apparatus and the home appliance control device SEG .

Here if necessary the operator user makes the mobile terminal touch the target apparatus again. Thereby the mobile terminal obtains a MAC address a network ID PAN ID for example communication protocol a communication key and 3D coordinates of a position regarding the target apparatus.

Next at Step Sd the mobile terminal determines whether or not the mobile terminal has network configuration information of the home appliance control device SEG such as a MAC address and a network ID PAN ID for example regarding the home appliance control device SEG .

If the determination at Step Sd is Yes then the processing proceeds to Step Sf in . On the other hand if the determination at Step Sd is No then the processing proceeds to Step Se. At Step Se the mobile terminal establishes proximity wireless communication with the home appliance control device SEG and thereby obtains the network configuration information of the home appliance control device SEG . Then the processing proceeds to Step Sf in . More specifically the operator user holding the mobile terminal moves to the location of the home appliance control device SEG and makes the mobile terminal touch the home appliance control device SEG so that the mobile terminal establishes proximity wireless communication with the home appliance control device SEG . Then from the home appliance control device SEG the mobile terminal obtains the MAC address the IP address the network ID the communication protocol the communication key and again the 3D coordinates of the position regarding the home appliance control device SEG . Then the processing proceeds to Step Sf in . Here it is also possible that the server optimizes configuration information of the whole network MAC addresses of child devices and network IDs of PAN IDs of sub networks by using 3D coordinate information of all apparatuses AEGs and relay devices and that the optimized configuration information is registered onto the home appliance control device SEG .

At the beginning at Step Sf the mobile terminal establishes proximity wireless communication with the relay device and sets the relay device so that the target apparatus is connected to the home appliance control device SEG via the relay device.

More specifically the operator user moves to the location of the relay device such as ZigBee and makes the mobile terminal touch the relay device. Thereby the mobile terminal establishes proximity wireless communication with the relay device so that the mobile terminal can obtain the position information of the relay device again. In addition the mobile terminal receives from the server or the like 3D coordinate information of positions of the target apparatus the relay device and the home appliance control device SEG and 3D coordinates of the building where the operator user exists. Based on the pieces of information the mobile terminal calculates the above mentioned optimum network configuration information namely a relay connection method or a topology regarding an optimum relay device to serve as a relay point between sub networks PAN IDs . The mobile terminal receives the configuration information via NFC or via the home appliance control device SEG and records it onto the mobile terminal. Or the configuration information may be recorded onto the server.

The mobile terminal transmits a recording instruction to the relay device via at least NFC. In this case the mobile terminal performs setting in the relay device so that the target apparatus is connected to the home appliance control device SEG via the relay device. More specifically the mobile terminal registers a MAC address a network ID and a communication key of a target apparatus or each of a plurality of target apparatuses onto the relay device.

Next at Step Sg the mobile terminal determines whether or not the connection between the target apparatus and the relay device has been completed.

If the connection has been completed Yes at Step Sg then the processing proceeds to Step Sh. Otherwise No at Step Sg the processing returns to Step Sf.

Next at Step Sh the mobile terminal records onto the relay device the connection information of the mobile terminal the server or the home appliance control device SEG . More specifically the mobile terminal records onto the relay device the connection information of the relay destination such as a MAC address a network ID a communication key and protocol of the mobile terminal the server or the home appliance control device SEG via NFC or a network. Thereby the relay device PAN coordinator starts connecting a a sub network having PAN ID to which the target apparatus having the registered MAC address belongs to b the home appliance control device SEG having a MAC address belonging to a sub network having PAN ID to which the home appliance control device SEG belongs.

Next at Step Si the mobile terminal determines whether or not the connection between the relay device and the home appliance control device SEG has been completed. If the determination at Step Si is Yes then the processing proceeds to Step Sj. At Step Sj the mobile terminal determines whether or not connection authentication between the apparatus and the home appliance control device SEG has been completed.

If it is determined that the connection authentication has been completed Yes at Step Sj then it is considered that the relay among the apparatus the relay device and the home appliance control device SEG has been completed. Therefore the processing is completed.

On the other hand if the determination at Step Si is No or if the determination at Step Sj is No then the processing returns to Step Sh.

As described above with reference to the use of 3D mapping according to the present embodiment allows the mobile terminal to obtain 3D position information of a child device a parent device and a relay device which are connected via ZigBee or wireless LAN. This is because the mobile terminal always holds the 3D coordinate information. When the mobile terminal is close to each of the child device the parent device and the relay device which are connected via ZigBee or wireless LAN via NFC or when the mobile terminal which is close to each of the devices apparatuses receives information from the device the mobile terminal exchange physical position relationships 3D position information among the devices apparatuses with the devices apparatuses. As a result the mobile terminal can obtain the 3D position information as well as the network ID information such as a MAC address from each of the devices apparatuses.

Then the mobile terminal processes the obtained information the 3D position information and the like regarding the above devices apparatuses thereby generating physically optimum network configuration information. It should be noted that the above processing may be processed not by the mobile terminal but by the server inside or outside the user s home.

More specifically as shown in an example in a lower part of this network configuration information can be easily calculated if the 3D position relationships are known. Here the example in the lower part of shows the configuration where a a sub network PAN ID includes an apparatus having a MAC address another apparatus and a relay device having a MAC address b a sub network PAN ID includes the home appliance control device SEG having a MAC address with Internet protocols and other apparatuses having MAC addresses and respectively all of which are connected by radio. This configuration where the PAN ID and the PAN ID are connected to each other via the relay device can offer maximum energy saving stability and loop prevention.

Here the conventional methods such as ZigBee require a one to one relationship between the home appliance control device SEG and the child device. This is because addition of a relay device requires optimization of designing and setting of the whole network configuration and there has been no method for easily obtaining 3D position relationships of respective devices apparatuses. Such conventional methods are possible in networks used in company offices that can afford cost and effort. However general home cannot afford such cost and effort for home appliances such as air conditioners a microwave and a solar panel. Therefore the addition of relay device in a home network has not been easy.

However in the present embodiment it is possible to obtain position information and ID information such as MAC addresses of the apparatuses home appliances only by making the mobile terminal touch the apparatuses by using NFC or by inputting data into the mobile terminal positioned very close to the apparatuses. Therefore the server or the mobile terminal can obtain the configuration information without cost and effort. If the mobile terminal is operated to record the obtained configuration information directly or indirectly onto the home appliance control device SEG or the relay device it is possible to easily generate optimum network configuration information. Furthermore the use of NFC allows the user to check unauthorized actions by using a cryptography key or 3D position information thereby increasing security. Therefore the addition of relay device is possible also at home and it is possible to achieve stable wireless communication over a long distance between a solar panel on the roof and the home appliance control device SEG on the first floor or a long distance between the home appliance control device SEG at home and a heat pump system or a charging system outside home for example. Then in these cases the use of the server makes it possible to calculate the network configuration information at high accuracy by using 3D coordinates. Therefore it is possible to configure an ideal network system and prevent abnormal communication such as loop. As a result transmission efficiency can be increased.

In the twentieth first embodiment the description is given for a system that enables the mobile terminal to serve as a remote controller for operating an apparatus by using a 3D product map of a building with reference to the drawings.

At the beginning at S the mobile terminal determines a current position of the mobile terminal by using GPS thereby generating position information of the mobile terminal.

Next at S the mobile terminal obtains position information that is to be used as a reference point. More specifically for example in the case where an unlocking system which locks unlocks keys by the mobile terminal via proximity wireless communication is cooperated with an entrance key of the building the mobile terminal obtains an apparatus ID of the unlocking system when the entrance key is unlocked by the proximity communication. Then the mobile terminal sets as the reference point position information associated with the obtained apparatus ID position in . Here the database in which the apparatus ID and the position information are stored in association with each other is held in the server or the mobile terminal. It should be noted that the mobile terminal may obtain the position information of the entrance key directly from the entrance key by using proximity communication or of course from another apparatus except the unlocking system. It should also be noted that when the user holding the mobile terminal enters the building the mobile terminal may detect the user s entrance to the building based on output information of a sensor provided to a door and set a position of the door to be the reference point.

The following describes the situation where the user walks from position to position in at Step S. More specifically at S the mobile terminal calculates a a traveling distance of the user s travel based on information of a user s step length and also detects b a traveling direction of the travel. Based on the travel distance and the travel direction the mobile terminal calculates position information of the mobile terminal. In more detail the mobile terminal obtains i information of a step length of the user walking at home from a database and detects ii the number of steps n in a target section by using an acceleration sensor a geomagnetism sensor or a vibrating gyro. Multiplying the step length by the number of steps n results in the traveling distance. In addition the mobile terminal detects the traveling direction by using the vibrating gyro and the geomagnetism sensor. Based on the calculated traveling distance and traveling direction the mobile terminal calculates a relative position of the mobile terminal with respect to the reference point on the 3D space and records the calculated position information onto a database in the mobile terminal.

Next at S the mobile terminal transmits the calculated position information as well as the traveling information such as traveling distance and traveling direction to the server to be stored them in a database in the server.

The following describes the situation where the user is at position in at S. More specifically at S if the user points the mobile terminal to a TV the mobile terminal serves as a remote controller. Here the TV should be on a normal line passing 3D coordinate information of the position of the mobile terminal in a direction measured by the mobile terminal. In more detail the user at position in moves to be in front of the TV on the first floor and points the mobile terminal to the TV. When the TV is on a normal line passing 3D coordinate information of the position of the mobile terminal in a direction of measured by the mobile terminal the mobile terminal serves as a remote controller of the TV by connecting the TV to a network for example.

After traveling from position to position the user further moves from position to position in and then points the mobile terminal to an air conditioner. In the same manner as described above the mobile terminal thereby serves as a remote controller of the air conditioner. More specifically when the user moves on the first floor to enter a Japanese style room and points the mobile terminal to the air conditioner the mobile terminal is connected to the air conditioner on a network so that the mobile terminal can serve as a remote controller of the air conditioner. Here in the same manner as described at S the mobile terminal detects a traveling distance from position to position based on the step length and the number of steps of the user and thereby calculates 3D position information relative position information of the mobile terminal. Then the 3D position information is stored into the database in the mobile terminal or the server.

Furthermore at S in when the user moves from position to position in a traveling distance is calculated based on the number of steps and then stored into the database in the mobile terminal or the server. As described above such traveling information for each traveling section is accumulated in the database for each user. Therefore the accumulation is used as a walking history of each user depending on each traveling section. A step length of each user is learned from the walking history to increase its accuracy.

Then at S when the user reaches a staircase in the home the mobile terminal starts calculating a a traveling change in the height and b a horizontal traveling distance regarding user s traveling on the staircase. Here it is assumed that m represents a height of one stair and that k represents a length of one stair. Under the assumption multiplying the number of steps by m results in the traveling change in the height and multiplying the number of steps by k results in the horizontal traveling distance. It is noted that m and k are accumulated in the database so that m and k are learned from the past data to increase their accuracy.

The following describes for example the case where the user ascends by a lift not by the staircase at S. In this case characteristic data of the lift in the building is recorded on the database. A time r required to ascend from a floor P to a floor Q is obtained from the database and the floor number to which the user ascends is measured based on the required time r. It is also possible to increase the accuracy of P Q and r by learning them from past data. In addition start and stop of the ascending lift is detected by the acceleration sensor.

At S a horizontal traveling distance of the ascending is calculated by multiplying the step length by the number of steps and a traveling direction of the ascending is detected by the vibrating gyro. Based on the horizontal traveling distance and the traveling direction the mobile terminal generates 3D position information of the mobile terminal. If there is 3D structure data of the building the position information is modified based on the 3D structure data to increase its accuracy. Then it is assumed that the user moves out from the lift or the staircase and temporarily stops at the front left of a TV on the second floor at position in 

At S it is determined whether or not an accumulated error E in the accumulated pieces of 3D position information is greater than a predetermined error allowable value. The accumulated error E is calculated by multiplying a traveling distance by 5 . If it is determined that the accumulated error E is greater than the error allowable value then the processing proceeds to S.

At S the mobile terminal searches apparatuses having relative or absolute position information registered in the database for an apparatus having position information closest to the position information of the mobile terminal. The mobile terminal then presents the searched out apparatus on the screen of the mobile terminal. The operator takes a photograph of the apparatus by a camera unit of the mobile terminal. The mobile terminal recognizes the apparatus based on the image photographed by the camera unit and calculates a relative angle and a distance between the mobile terminal and the apparatus in order to modify a reference position.

Subsequently at S the mobile terminal obtains network information MAC address IP address communication key and the like of the apparatus based on apparatus ID of the apparatus and is thereby connected to the apparatus. When the user presses a Lock button on the mobile terminal while pointing the mobile terminal to the apparatus the connection between the mobile terminal and the apparatus is fixed. As a result the mobile terminal can serve as a remote controller of the apparatus or display video data of the apparatus on the screen of the mobile terminal.

The steps S to S are likewise S in processing performed by the mobile terminal to learn past data to increase an accuracy of traveling distance calculation and generate accurate 3D position information of the mobile terminal. The step S is likewise S in determination as to whether or not an accumulated error of the 3D position information is greater than a predetermined value. The step S is likewise S in correction of an error in the 3D position information reference position .

By the above described processing the mobile terminal can obtain a relative position of the mobile terminal with respect to a reference point and can thereby serve as a remote controller of an apparatus only by pointing the mobile terminal to the apparatus without using correct absolute position information.

Furthermore if an error in the traveling distance measured by the acceleration sensor is large it is possible to decrease the error of the position information by using a step length position information of the apparatus and the like.

At the beginning if it is determined that the mobile terminal has not yet obtained a reference point or that reference point information of the mobile terminal is not correct then at S the mobile terminal photographs the target apparatus. Here the mobile terminal may transmit the photographed image of the apparatus to the server.

Next at S mobile terminal recognizes a kind of the apparatus based on the photographed image. Subsequently at S an image showing only the apparatus is filtered from the photographed image and the resulting image is transmitted to the server.

Next at S the server specifies a building in which the mobile terminal currently exists based on the position of the mobile terminal and then specifies the apparatus from a list of apparatuses in the building. More specifically the server determines a rough position of the mobile terminal by a base station GPS or the like and thereby specifies a building in which the mobile terminal currently exists. In addition the server specifies the photographed apparatus from the apparatus list associated with the building. Furthermore the server obtains a size and 3D shape information of the apparatus and then stores these pieces of information into the database. It should be noted that if a current position of the mobile terminal is not known it is possible to specify the photographed apparatus from an apparatus list associated with the user of the mobile terminal.

Next at S the mobile terminal or the server calculates a relative angle between the mobile terminal and the apparatus based on a direction which the apparatus faces in the photographed image.

Next at S the mobile terminal or the server calculates a distance between the mobile terminal and the apparatus by using the photographed image based on a zoom magnification or the like included in optical characteristic information of the mobile terminal.

Next at S the mobile terminal or the server calculates position information Pr indicated by 3D relative coordinate information of the position of the mobile terminal or the apparatus based on the distance and relative angle between the mobile terminal and the apparatus.

At S a relative or absolute position Pm of the mobile terminal in the building is calculated. More specifically the mobile terminal or the server reads 3D coordinate information Pd of the position of the apparatus from the server or the mobile terminal and then calculates the relative or absolute position Pm of the mobile terminal in the building based on the position information Pr and the coordinate information Pd.

Eventually at S the position Pm is set to be position information of a reference point of the mobile terminal.

By the above described processing even if a reference point of the mobile terminal has not yet been set for example if it is immediately after powering the mobile terminal ON it is possible to determine the reference point by using a photographed image. In addition the filtering of the apparatus image from the photographed image allows the user to transmit the apparatus image to the server without considering privacy of home information.

At the beginning the user points the mobile terminal to a target apparatus to be connected and photographs the apparatus by a camera unit of the mobile terminal.

Next at S the mobile terminal recognizes the apparatus by processing the photographed image of the apparatus based on position information 3D coordinate information for example of the mobile terminal. If the apparatus is recognized the mobile terminal can obtain a kind a model number and rough position information 3D coordinate information for example of the apparatus. Here the mobile terminal obtains the above mentioned kind model number and rough position information 3D coordinate information for example of the recognized apparatus from a database in the mobile terminal or the server.

Next at S the mobile terminal determines whether or not the target apparatus to be connected has already been registered in the database in the server or the mobile terminal. More specifically from the database in the mobile terminal or the server the mobile terminal obtains pieces of information of apparatus candidates. Here the apparatus candidates are apparatuses having respective pieces position information that are close to the position information of the mobile terminal. Then the mobile terminal compares each of the apparatus candidates to the photographed apparatus and thereby confirms whether or not the recognized apparatus has been registered in the database.

If it is determined at S that the target apparatus to be connected has already been registered in the database in the server or the mobile terminal then the processing proceeds to S.

At S the mobile terminal obtains an apparatus ID and the like of the apparatus and is thereby connected to the apparatus via a network. More specifically the mobile terminal obtains an apparatus ID a connection protocol a communication key and a sever address of the apparatus from the database in the server or the mobile terminal and is connected to the apparatus via a network by using the obtained pieces of information.

Subsequently at S the mobile terminal issues various commands based on position information of the apparatus and a direction of the mobile terminal.

On the other hand if it is determined that the target apparatus to be connected is not registered in the database in the server or the mobile terminal then the processing proceeds to S.

Next at S the mobile terminal determines whether or not the apparatus has a network function. Here it is also possible that the mobile terminal determines whether or not the mobile terminal can recognize a model number of the apparatus. This is because it is possible to determine whether or not the apparatus has a network function if the model number of the apparatus is recognized.

If it is determined that the apparatus does not have a network function or that the mobile terminal cannot recognize the model number of the apparatus No at S then the processing proceeds to S.

Next for example the user opens a cover of the apparatus to expose a 2D bar code of the apparatus and photographs the bar code by the camera unit of the mobile terminal S .

Next at S the mobile terminal decrypts encrypted data of the 2D bar code and records the decrypted data onto the database in the server or the mobile terminal. More specifically the mobile terminal reads the 2D bar code and decrypts encrypted data of the 2D bar code. Here the decrypted data is for example an apparatus ID a connection communication protocol a communication standard a remote control function for infrared remote control or for wireless ZigBee for example a net address MAC address IP address communication key a sever address or the like. The mobile terminal records the read data onto the database in the server or the mobile terminal.

Next at S the mobile terminal calculates 3D position information of the apparatus and records the calculated position information onto the database. More specifically the mobile terminal obtains 3D shape information of the apparatus from the database in the server or the mobile terminal. Then the mobile terminal calculates 3D position information of the apparatus based on the photographed image of the apparatus and 3D position information of the mobile terminal photographing the apparatus and then records the 3D position information onto the database.

If it is determined at S that the apparatus has a network function or that the mobile terminal can recognize a model number of the apparatus then the processing proceeds to S. Here it is also possible to determine whether or not the apparatus has an AOSS function.

Next at s it is determined whether or not the mobile terminal can communicate with the parent device. If it is determined that the mobile terminal can communicate with the parent device then the processing proceeds to S. Here the parent device is for example the home appliance control device SEG an adapter AP of a wireless LAN or the like.

Next at S it is determined whether or not the apparatus has an infrared communication receiving function or a wireless remote control ZigBee for example receiving function. In other words it is determined whether or not the apparatus can communicate with other apparatuses devices except the parent device.

If it is determined at S that the apparatus has neither the infrared communication reception function nor the wireless remote control ZigBee for example receiving function No at S then the processing proceeds to S. At S the parent device and the apparatus start connection authentication with each other according to AOSS start instruction from the user. More specifically at S the user presses a connection start button on the mobile terminal and then the mobile terminal transmits the AOSS instruction to the parent device and thereby causes the parent device to switch its mode to a registerable mode. At the same time the user presses an AOSS button on the apparatus then the apparatus starts connection authentication with the parent device and continues the connection authentication for a certain time period. Here it is preferable to increase security of the communication by controlling a radio output to be minimum based on a distance and obstacle between the parent device and the apparatus by using 3D position information of the parent device and 3D position information of the apparatus.

Next it is determined at S whether or not the connection authentication between the parent device and the apparatus is successful. If it is determined that the connection authentication is successful then the processing proceeds to S.

On the other hand if it is determined at S whether or not the apparatus has an infrared communication receiving function or a wireless remote control ZigBee for example receiving function then the processing proceeds to S.

Next at S the mobile terminal transmits a communication key and AOSS start instruction to the parent device that has the same communication protocol as that of the apparatus. At the same time the mobile terminal transmits the communication key and AOSS instruction to the apparatus to start the mutual authentication. More specifically when the user presses the connection start button on the mobile terminal the mobile terminal transmits the communication key and the AOSS start instruction to the parent device that has the same communication protocol as that of the apparatus. At the same time the mobile terminal transmits the communication key and the AOSS instruction to the apparatus by using a remote control transmission function so that the apparatus and the parent device start the mutual authentication.

Next the mobile terminal determines at S whether or not the mutual authentication has been completed. If it is determined that the mutual authentication has not yet been completed then the processing proceeds to S. On the other hand if it is determined at S that the mutual authentication has been completed then the processing proceeds to S. At S it is determined whether or not the connection between the parent device and the apparatus has been established.

If it is determined at S that the connection has been established then the mobile terminal causes the apparatus to transmit an apparatus ID a product number an address an error code a use time period a history and 3D position information regarding the apparatus to the server via the parent device.

Next at S the mobile terminal calculates 3D position information of the apparatus. More specifically the mobile terminal obtains 3D shape information of the apparatus from the database based on a product number of the apparatus. Then the mobile terminal calculates 3D position information of the apparatus based on a a distance between the apparatus and the mobile terminal which is detected from the photographed image b a 3D direction which is detected from the photographed image and c position information of the mobile terminal photographing the image. Then the mobile terminal records the calculated 3D position information onto the database in the server or the mobile terminal.

By the above described processing even if the apparatus is not provided with a proximity communication function the use of a 2D bar code enables easy connection between the apparatus and the parent device. As a result it is possible to register the apparatus onto the server or register the 3D position information of the apparatus onto the server.

Next the 3D mapping is described. Each of is a flowchart of a method of registering position information position information registration method according to the present embodiment of the present invention.

After starting 3D mapping a the operator user moves the mobile terminal. The following describes an example where the operator moves the mobile terminal to a location of a metes and bounds position.

At Step Sc the mobile terminal transmits to the server current position information of the mobile terminal which is determined by GPS hereinafter GPS information and thereby obtains 3D absolute coordinates of the position information from the server. For example the mobile terminal transmits the GPS information to the server and thereby obtains 3D absolute coordinate information that include a metes and bounds boundary mark or a measurement reference point ID of a location close to the current position of the mobile terminal. Then the mobile terminal stores the obtained 3D absolute coordinate information onto an absolute position 3D coordinate database. Here as described previously the mobile terminal has two kinds of 3D coordinate information which are 3D coordinate information of an absolute position and 3D coordinate information of a relative position of the mobile terminal.

Next at Step Sd the mobile terminal switches the position determination by the GPS to position determination by the motion sensor in order to calculate 3D coordinate information of a current position of the mobile terminal. More specifically the mobile terminal switches the GPS sensor to the motion sensor to determine a current position of the mobile terminal. Then the mobile terminal calculates a distance of user s travel based on a step length and the number of steps of the user and also detects a direction of the user s travel by the vibrating gyro. Thereby the mobile terminal calculates 3D coordinate information of the current position in consideration of the distance and the direction in addition to the 3D absolute coordinate information.

Next at Se the mobile terminal records 3D coordinate information of the mobile terminal which has been determined when the mobile terminal has established the proximity wireless communication. More specifically it is assumed for example that the user makes the mobile terminal touch a NFC unit of a key of the building in order to unlock the key. Here the mobile terminal records 3D coordinate information of the position of the mobile terminal establishing proximity wireless communication by touching the NFC unit of the key of the building onto the database in the mobile terminal or the server or onto the NFC unit of the key.

Next at Sf the mobile terminal further calculates 3D coordinate information of the current position of the mobile terminal based on the number of steps a step length and a direction of the steps of the user. More specifically when the user enters the building the mobile terminal calculates the 3D coordinate information of the current position based on the number of steps the step length and the direction of the steps of the user. Here if the accuracy of the triaxial magnetic sensor is deteriorated by noise or the like the information detected by the triaxial magnetic sensor is replaced by direction information detected by the vibrating gyro.

Next at Sg the mobile terminal updates 3D position information of the apparatus and records a high accuracy position information identifier in association with the updated 3D position information. More specifically if a traveling distance from a reference point 3D absolute coordinate information of a position of a reference point to the current position of the mobile terminal is short the mobile terminal determines that the position accuracy is high. Therefore if the user makes the mobile terminal touch the antenna unit of the NFC unit of the apparatus having registered 3D position information and thereby establishes proximity wireless communication between the mobile terminal and the apparatus the mobile terminal updates the 3D position information of the apparatus and records a high accuracy position information identifier which indicates that the 3D position information has a high accuracy onto the NFC unit or onto the database in the server or the mobile terminal in association with the 3D coordinate information.

Next at Sh the mobile terminal determines whether or not an accumulated error in the 3D coordinate information is greater than a predetermined value. More specifically the mobile terminal determines whether or not the accumulated error PE of the 3D coordinate information is greater than the predetermined value.

If the determination at Sh is Yes the processing proceeds to Si. At Si the mobile terminal searches neighborhood of the mobile terminal for an apparatus assigned with such a high accuracy position identifier. Then the mobile terminal displays on the screen the searched out apparatus with instructions Please touch the antenna unit of the NFC of the apparatus . More specifically the mobile terminal searches apparatuses having NFC functions in the home TV air conditioner microwave refrigerator and the like for an apparatus that is assigned with a high accuracy position identifier and that is close to the mobile terminal. The mobile terminal displays on the screen of the mobile terminal the searched out apparatus TV for example together with instructions Please touch the antenna unit of the NFC of the apparatus . Then the processing proceeds to Sj in .

On the other hand if the determination at Sh is No then the processing proceeds to Sn in . At Sn the mobile terminal updates 3D reference coordinates and records the high accuracy position identifier onto the database. More specifically the mobile terminal can detect an action of the user by the acceleration sensor. For example the acceleration sensor can detect that the user walks up the first stair of a staircase that the user has already walked up the final stair of the staircase that the user stops in front of a closed door that the user starts ascending by a lift that the user stops the ascending in the lift that the user stops in front of a closed entrance door that the user walks up a step of the entrance that the user starts ascending by a ladder that the user turns at a corner of a corridor or that the user goes around a bulged wall of the building. Then the mobile terminal compares performs matching the 3D coordinate information of the mobile terminal detected by using the acceleration sensor to the 3D coordinate information of the building thereby updating the 3D reference coordinates. By the above described processing it is possible to increase the accuracy of the 3D reference coordinates. Then here the updated 3D reference coordinates and the high accuracy position identifier are recorded onto the database.

Next at Sj the mobile terminal determines whether or not the mobile terminal has established proximity wireless communication with the apparatus. More specifically the mobile terminal determines whether or not the user makes the mobile terminal touch the antenna unit of the apparatus and thereby proximity wireless communication is established between the mobile terminal and the apparatus. If the determination is Yes then the processing proceeds to Sk.

Next at Sk the mobile terminal determines whether or not the 3D coordinate information of the apparatus is significantly different from the 3D coordinate information of the mobile terminal. If the determination at Sk is Yes then the processing proceeds to Sp. At Sp the mobile terminal determines that the apparatus has moved from an original position indicated by the previously measured coordinates. Therefore the mobile terminal records an error information identifier onto a database in the apparatus.

Here if there is an apparatus assigned with a high accuracy position identifier near the mobile terminal the operator user makes the mobile terminal touch the apparatus to update the 3D coordinate information of the current position of the mobile terminal held in the mobile terminal. Furthermore the operator user makes the mobile terminal touch the target apparatus that has been determined at Sk as having moved from the original position in order to record the updated 3D coordinate information onto the database to correct the position information of the target apparatus. Here in the database the target apparatus is assigned with a high accuracy position identifier instead of the error information identifier. Thereby in the database the target apparatus is stored in association with the high accuracy position information.

On the other hand if the determination at Sj is No then the processing proceeds to Step Sn. Since Step Sn has already been described this step will not be described again.

On the other hand if the determination at Sk is No then the processing proceeds to Sm. At Sm the 2D or 3D coordinate information of the position of the apparatus is updated as 3D coordinate information of the position of the mobile terminal. As a result the 3D coordinate information of the position of the mobile terminal is corrected. Then the processing proceeds to Step Sn.

The following describes cooperation between a a mobile device that is the above described communication device and b apparatus es .

In display screens and of the mobile device show various examples of the same display screen of the mobile device .

More specifically the display screen of the mobile device is presented when the user holding the mobile device points the mobile device to a TV A . At A data on the display screen of the mobile device is transmitted to the TV and thereby displayed also on the TV .

Likewise the display screen of the mobile device is presented when the user holding the mobile device points the mobile device to a recorder B . Furthermore the display screen of the mobile device is presented when the user holding the mobile device points the mobile device to a microwave apparatus C . Regarding B a remote control screen for operating the recorder is displayed on the display screen of the mobile device . The user presses a desired button on the remote control screen to operate the recorder . Regarding C a recipe screen for operating the microwave is displayed on the display screen of the mobile device . In a pair of the upper and lower mobile devices show for example that the mobile device can appropriately operate a target apparatus such as the TV regardless whether the mobile device points to a front side or a rear side of the target apparatus.

First the processing in which the user selects a desired cooperation apparatus is described with reference to .

At the beginning the mobile device obtains position information of the mobile device S . More specifically the mobile device obtains position information of the mobile device by calculating or determining a reference position position of a reference point of the mobile device. The calculation or determination of the reference position of the mobile device is performed for example by 1 searching for an apparatus by a camera function 2 then obtaining information detected by a distance sensor 3 then establishing proximity wireless communication with the apparatus and 4 receiving specific radio which enables position determination. Here the method of obtaining the position information of the mobile device has already been described in detail with reference to so that the description will not be repeated below.

Next the mobile device is pointed in the direction A in . More specifically the user points the mobile device to a desired target apparatus the TV in this example S .

Here the mobile device extracts from the database apparatus candidates existing in a direction pointed by the mobile device S . More specifically the mobile device extracts from the database apparatus candidates in the direction pointed by the mobile device based on a 3D relative or absolute coordinate information of positions of the mobile device and the TV b direction information indicating the direction pointed by the mobile device c attitude information of the apparatus the TV in this example d area information of the apparatus the TV in this example and the like.

Here the mobile device determines whether or not there are a plurality of apparatus candidates in the direction pointed by the mobile device S . If there are a plurality of such apparatus candidates Yes at S then the mobile device displays a list of the apparatus candidates with their position relationships on the screen of the mobile device S .

Next the mobile device determines whether or not the direction pointed by the mobile device is changed S . If the direction pointed by the mobile device is changed in other words if the user changes the direction pointed by the mobile device Yes at S then the mobile device changes the display of the apparatus candidates according to the changed direction S . More specifically the mobile device changes the display of the apparatus candidates on the screen of the mobile device according to the direction changed by the mobile device based on a determination as to how much each of the apparatus candidates is close to the center of the direction pointed by the mobile device .

Here when the apparatus candidates are displayed on the display screen of the mobile device an apparatus candidate closer to the center of the direction pointed by the mobile device is displayed closer to the center of the display screen. It is also possible that the apparatus candidate closer to the center of the direction pointed by the mobile device is displayed higher in the display screen or displayed with a target cursor.

Then the mobile device determines whether or not pressing of a Lock button is detected S . If the mobile device detects pressing of the Lock button Yes at S then the processing proceeds to Step S. More specifically when a target apparatus that the user desires to operate is displayed at the center of the display the user presses the Lock button. Then the mobile device detects the pressing of the Lock button and thereby the processing proceeds to Step S. Here the Lock button may be a physical switch of the mobile device or may be a virtual button displayed on a touch panel of the mobile device . Or the Lock button may be a different device logically connected to the mobile device . The above step is shown in in .

Next if the determination at S is Yes then the mobile device specifies the target apparatus selected by the user and obtains or downloads network connection information of the selected apparatus from the database S . More specifically the mobile device specifies the target apparatus a TV or a microwave for example selected by the user from among the apparatus candidates existing in the direction pointed by the mobile device . Then the mobile device obtains or downloads from the database in the server or the mobile device network connection information a MAC address an IP address a communication key a communication standard a communication protocol of the specified apparatus a performance capability of the specified apparatus a program for the specified apparatus a script for the apparatus and the like.

The mobile device holds a flag Lock flag . When the Lock button is pressed the Lock flag indicates that the mobile device is connected to the target apparatus pointed by the mobile device . While the Lock flag is ON the Step S is not performed even if the user changes the direction of the mobile device . Therefore even if the user changes the direction of the mobile terminal while the mobile device is connected to the target apparatus such as the TV the mobile terminal is not disconnected from the target apparatus. As a result it is possible to prevent that the display of the apparatus selected by the user is disappeared.

The following describes a direction pointed by the user using the mobile device to a certain apparatus a TV a recorder a microwave or the like with reference to .

In the present embodiment a target apparatus to be operated by the mobile device is specified by using a 3D relative or absolute coordinate information of positions of the mobile device communication device held by the user and the target apparatus a TV a recorder a microwave or the like and b a direction of the mobile device . If the mobile device is in almost cuboid shape a direction of the mobile device which is used to specify the target apparatus is assumed to be in parallel to a longer side of a virtual cuboid forming a case of the mobile device . For example it is assumed that the mobile device has the buttons and the display screen as shown in and that the user generally holds the mobile device by the display screen side not the buttons side. Under the assumption the direction of the mobile device pointing the target apparatus is a direction from the buttons side to the display screen side. If the mobile device is a Smartphone such as iPhone 4 manufactured by Apple Inc. which hardly has buttons and therefore the user holds the mobile device by hand in various ways it is possible that a gravity point of the user s hand on the mobile device is detected by a gravity sensor a gyro sensor a camera unit a proximity sensor and the like of the mobile device and a direction resulting in the longest distance from the gravity point to the outer periphery of the mobile device is set to be the direction from the mobile device . It should be noted that if the mobile device has a rear side camera unit on the rear side of the display screen a parallel direction in parallel to the direction of the rear side camera unit may be set to be a direction from the mobile device . The direction may be used as the direction from the mobile device when the camera unit is not operated while the direction may be used as the direction from the mobile device when the camera unit is operated. When the camera unit is operated and the direction is therefore set to be the direction from the mobile device the user can press the Lock button to specify the target apparatus while watching the target apparatus displayed on the display screen of the mobile device . Here the target apparatus is specified based on the 3D coordinate information of positions of the mobile device and the target apparatus and the direction information of the mobile device .

It is also possible to dynamically change a direction of the mobile device according to a shape of the mobile device an activation state of the gravity sensor the gyro sensor a camcorder unit a user proximity sensor an activation state of the camera unit user s selection of a direction pointed by the mobile device a line of sight of the user a posture of the user or the like.

Therefore the user can select the target apparatus merely by pointing the mobile device intuitively to a certain apparatus without being conscious of how the user holds the mobile device .

Moreover it is also possible that the mobile device may be pointed in a plurality of directions at the same time to specify a target apparatus. It is therefore possible to search a wide range for the target apparatus regardless of how the user holds the mobile device .

Next the mobile device attempts to be connected with the apparatus via a network by using the network connection information obtained at S S . If the connection is successful Yes at S and only communication information is obtained from the database Yes at S then the mobile device inquires the apparatus or the server for a performance capability of the apparatus S . Then the mobile device changes a display quality according to the obtained performance capability of the apparatus. Here the mobile device may also obtain a control display program to be executed in the mobile device .

Next in the case where the apparatus is a TV the mobile device obtains from the apparatus the number of TV programs titles thumbnails and the like of channel broadcast programs of the TV. Then the mobile device displays them on the display screen of the mobile device S . The above step is shown in in .

Then the user selects presses a button clicks on a touch panel performs pinch out gesture for example a thumbnail of a certain program on the screen display screen of the mobile device . Therefore the mobile device issues an instruction to display the selected TV program on the screen of the apparatus TV S . The above step is shown in in .

Next from the TV the mobile device receives video data having quality that corresponds to the performance capability of the mobile device S . More specifically the TV displays the designated TV program and transmits video data having quality corresponding to the performance capability of the mobile device to the mobile device . Therefore the mobile device receives the video data having quality corresponding to the performance capability from the TV .

Next the mobile device displays the video data received from the TV S . The above step is shown in in .

Here if the user flicks to the right on the display screen of the mobile device a next channel TV program is displayed on both the display screen of the mobile device and the screen of the TV. More specifically when the user flicks to the right on the display screen of the mobile device Steps S to S are performed for a next channel TV program and the next channel TV program is displayed on both the display screen of the mobile device and the screen of the TV S . The above steps are shown in to in .

With the above structure the user can intuitively control a function of the target apparatus to be operated merely by pointing the mobile device to the apparatus.

Furthermore the use of attitude and shape information of the apparatus makes it possible to specify the apparatus pointed by the mobile device even if a distance from the center of the apparatus such as a large screen TV and an edge of the mobile device is long. As a result it is possible to correctly specify the apparatus which the user intends to point.

At the beginning the mobile device displays a certain TV program on the display screen of the mobile device S . Here it is assumed that while pressing a Move button on the mobile device the user points the mobile device to a target apparatus a recorder a TV or the like into on which the user wishes to store or display the TV program.

Here the mobile device extracts from the database apparatus candidates existing in a direction pointed by the mobile device S . More specifically the mobile device extracts from the database apparatus candidates in the direction pointed by the mobile device based on a 3D relative or absolute coordinate information of positions of the mobile device and the apparatus candidates b direction information indicating the direction pointed by the mobile device c attitude information of each of the apparatus candidates and d area information of each of the apparatus candidates.

Here the mobile device determines whether or not there are a plurality of apparatuses in the direction pointed by the mobile device S . If there are a plurality of such apparatuses namely apparatus candidates Yes at S then the mobile device displays a list of the apparatus candidates with their position relationships on the display screen of the mobile device S .

Next the mobile device determines whether or not the direction pointed by the mobile device is changed S . If the direction pointed by the mobile device is changed in other words if the user changes the direction pointed by the mobile device Yes at S then the mobile device changes an apparatus candidate that is displayed at the center of the display screen to another apparatus candidate according to the changed direction S . More specifically the mobile device changes the display status of the apparatus candidates on the display screen of the mobile device according to the direction changed by the mobile device based on a determination as to how much each of the apparatus candidates is close to the center of the direction pointed by the mobile device . Here regarding the apparatus candidate display on the display screen of the mobile device an apparatus candidate that is at the more center of the direction pointed by the mobile device is displayed at the more center in the display. It is also possible that the apparatus candidate that is at the more center of the direction pointed by the mobile device is displayed higher in the display or displayed with a target cursor.

Next the mobile device confirms whether or not pressing of the Move button is detected S . If the mobile device detects pressing of the Move button Yes at S then the processing proceeds to Step S. More specifically when the target apparatus which the user desires to operate is displayed at the center of the display the user presses the Move button. Then the mobile device detects the pressing of the Move button and thereby the processing proceeds to Step S. Here the Move button may be a physical switch of the mobile device or may be a virtual button displayed on a touch panel of the mobile device . Or the Move button may be a different device logically connected to the mobile device . The above step is shown in in .

Next when pressing of the Move button is detected the mobile device specifies a certain apparatus among the apparatuses existing in the direction pointed by the mobile device S . More specifically when pressing of the Move button is detected the mobile device specifies the target apparatus a TV or a microwave for example selected by the user among the apparatuses existing in the direction pointed by the mobile device .

Next the mobile device obtains or downloads network connection information and the like of the specified apparatus from the database S . More specifically the mobile device obtains or downloads from the database in the server or the mobile device network connection information a MAC address an IP address a communication key a communication standard a communication protocol of the apparatus a performance capability of the apparatus a program for controlling the apparatus a script for the apparatus and the like.

Next the mobile device determines whether or not the specified apparatus has a capability of recording a target content S . If the specified apparatus has the recording capability Yes at S then the mobile device transmits to the specified apparatus content source information authentication information recording range information together with a recording instruction regarding the content S . More specifically to the specified apparatus the mobile device transmits the recording instruction as well as information including content source information a channel number a content address a content URI and the like a recording range time unit or the like a content sever address a source range authentication information authentication protocol a key and the like regarding the content.

Subsequently when the apparatus specified target apparatus receives the recording instruction and the like from the mobile device the apparatus is connected to and receive the target content according to the recording instruction and records the content onto the apparatus itself. To the mobile device the apparatus transmits information of the recorded content such as a title details a still picture thumbnail a video thumbnail and the like.

The mobile device receives information of the content recorded on the apparatus S and displays details of the recorded content on the display screen of the mobile device S .

Next the mobile device displays a dialog for the user in order to determine whether or not the recording by the apparatus is to be continued S . If the recording by the apparatus is to be continued in other words if the user agrees with the continuation Yes at S then the mobile device causes the apparatus to continue the recording S . On the other hand if the recording by the apparatus is not to be continued in other words if the user disagrees against the continuation No at S then the mobile device causes the apparatus to stop the recording S .

Next when the mobile device is disconnected from the apparatus the recorder for example that performs the recording the mobile device displays information of the previously displayed apparatus the TV for example again S .

With the above structure the user can record a TV program currently watched on a TV onto a recorder without complicated processes. For example when the user inputs information of the watching TV program to the recorder by using a remote controller of the recorder the user does not need to switching a holding device from a remote controller of the TV to the remote controller of the recorder.

It should be noted that it has been described in the present embodiment that the target apparatus to be operated by the mobile device is a recorder and that the user records a TV program currently watched on a TV onto the recorder. However the present embodiment is not limited to the above example. The apparatus may be a display apparatus. In this case the user may displays the currently watching TV program or content on the target apparatus instead of recording the TV program or content onto the target apparatus. As a result the user can watch a currently watched TV program Web page or content also on a different display apparatus without necessity of inputting information of the TV program Web page or content by using a keyboard of a remote controller of the different display apparatus. Furthermore a Web page which the user is watching on the mobile device can be displayed also on the display apparatus.

At the beginning it is assumed that on the mobile device the user is watching the same video as that displayed on the TV S .

Next the mobile device confirms whether or not pressing of a remote control mode button on the mobile device is detected S . If pressing of the remote control mode button is detected Yes at S then a mode on the display screen of the mobile device is switched to a remote control mode for remotely controlling the TV S .

More specifically when the user wishes to use the mobile device as a remote controller of the TV target apparatus the user presses the remote control mode button displayed on the display screen of the mobile device . The mobile device therefore detects the pressing of the remote control mode button and thereby switches a current mode on the display screen to the remote control mode for the TV. Here the program for controlling the target apparatus TV which has been obtained at S includes a remote control mode button display function and a remote control mode control program or script .

With the above structure when the user points the mobile device to the TV to be controlled the user can control the TV by using the mobile device as a remote controller without using a remote controller of the TV. More specifically the mobile device can display a remote control mode for the TV on the mobile device so that user can control channels and a sound volume of the TV on the mobile device . Meanwhile conventional mobile telephones have a problem that if such a mobile telephone is to be used as a remote controller of a target TV it is necessary to download TV remote control application programs and select a program suitable for the target TV from them for example. However the mobile device according to the present embodiment does not have the above problem. In the mobile device according to the present embodiment a program for controlling a target TV pointed by the mobile device is automatically downloaded onto the mobile device so that the mobile device can serve as a remote controller of the TV. As a result it is possible to reduce complicated steps for switching to the remote control mode.

Next the mobile device determines whether or not a a communication rate of communication between the mobile device remote controller and the target apparatus or b a use frequency of the communication are low S . If the use frequency or the communication rate is low Yes at S then the mobile device serving as a remote controller of the TV obtains ZigBee or infrared communication protocol from the server. Therefore the mobile device switches the current communication standard to wireless communication standard that results in lower power consumption S .

With the above structure automatic selection of a communication standard optimal to a corresponding function can reduce power consumption of the mobile device and the peripheral apparatus for example the TV .

Next the mobile device detects that a Lock Release button is pressed S . If the pressing of the Lock Release button is detected in other words if it is detected that the user presses the Lock Release button displayed on the display screen of the mobile device Yes at S then the mobile device releases connection from the apparatus TV or the like S .

With the above structure when the user wishes to cause the mobile device to execute functions of different apparatuses it is possible to selectively switch the functions.

The following describes processing in the case where a cooperation apparatus which the user desires to operate by the mobile device is a microwave with reference to . are flowcharts of processing in the case where the cooperation apparatus is a microwave according to the present embodiment of the present invention.

At the beginning the mobile device obtains position information of the mobile device S . More specifically More specifically the mobile device obtains position information of the mobile device by calculating or determining a reference position position of a reference point of the mobile device. The calculation or determination of the reference position of the mobile device is performed for example by 1 searching for a target apparatus by a camera function 2 then obtaining information detected by a distance sensor 3 then establishing proximity wireless communication with the apparatus and 4 receiving specific radio which enables position determination. Here the method of obtaining the position information of the mobile device has already been described in detail with reference to so that the description will not be repeated below.

Next the mobile device displays a cooking recipe selected by the user from a Web browser or the like S .

Next the mobile device is pointed to the desired target apparatus S . More specifically in the situation where the specific recipe is displayed on the display screen of the mobile device the user points the mobile device to the target apparatus a microwave a cooking machine or the like which the user intends to use for cooking while pressing the Move button on the mobile device . In the above manner the mobile device is pointed to the target apparatus. This step is shown in C in .

Here the mobile device extracts from the database apparatus candidates existing in a direction pointed by the mobile device S . More specifically the mobile device extracts from the database apparatus candidates in the direction pointed by the mobile device based on a 3D relative or absolute coordinate information of positions of the mobile device and the apparatus to be used for cooking b direction information indicating the direction pointed by the mobile device c attitude information of the apparatus here a microwave and d area information of the apparatus the microwave .

Here the mobile device determines whether or not there are a plurality of apparatus candidates in the direction pointed by the mobile device S . If there are a plurality of such apparatus candidates Yes at S then the mobile device displays a list of the apparatus candidates with their position relationships on the display screen of the mobile device S .

Next the mobile device determines whether or not the direction pointed by the mobile device is changed S . If the user changes the direction pointed by the mobile device in other words if the direction pointed by the mobile device is changed Yes at S then the mobile device changes the display state of apparatus candidates according to the direction S . More specifically the mobile device changes the display state of the apparatus candidates on the display screen of the mobile device according to the direction changed by the mobile device based on a determination as to how much each of the apparatus candidates is closer to the center of the direction pointed by the mobile device .

Here regarding the apparatus candidate display on the display screen of the mobile device an apparatus candidate closer to the center of the direction pointed by the mobile device is displayed closer to the center of the display. It is also possible that the apparatus candidate closer to the center of the direction pointed by the mobile device is displayed higher in the display or displayed with a target cursor.

Furthermore the mobile device detects that the pressing of the Move button is released S . If the release of the pressing of the Move button is detected Yes at S then the processing proceeds to Step S. More specifically when the target apparatus that the user desires to operate is displayed at the center of the display the user presses the Move button. Then the mobile device detects the release of the pressing of the Move button and thereby the processing proceeds to Step S. Here the Move button may be a physical switch of the mobile device or may be a virtual button displayed on a touch panel of the mobile device . Or the Move button may be a different device logically connected to the mobile device .

Next if the determination at S is Yes then the mobile device obtains or downloads from the database network connection information and the like of the target apparatus selected by the user S . More specifically the mobile device specifies the target apparatus here the microwave selected by the user from among the apparatus candidates in the direction pointed by the mobile device . Then the mobile device obtains or downloads from the database in the server or the mobile device network connection information a MAC address an IP address a communication key a communication standard a communication protocol of the specified apparatus a performance capability of the specified apparatus a program for controlling the specified apparatus a script for the specified apparatus and the like.

Next the mobile device determines whether or not the specified apparatus has a capability of performing target cooking S . If the specified apparatus has the cooking capability Yes at S then the mobile device transmits to the specified apparatus authentication information recipe information and recipe source information together with a cooking instruction S . Here the recipe information indicates cooking details and a cooking method. For example the recipe information indicates cooking processes with a temperature a time and the like such as ranging oven frying mixing kneading baking swearing thawing heating and steaming. The recipe source information indicates a channel number a content URL address a content sever address or a source range. The authentication information includes an authentication protocol a key and the like.

Subsequently when the apparatus receives the cooking instruction and the like from the mobile device the apparatus is connected to and receive cooking data according to the cooking instruction and records the cooking data. The apparatus transmits the recorded cocking data such as cooking detail recipe to the mobile device .

Next the mobile device receives the cooking detail recipe recorded on the apparatus S and displays on the mobile device the cooking details to be performed by the apparatus S .

Next the mobile device displays a dialog for the user in order to determine whether or not to start the cooking by the apparatus S . If the cooking is to start by the apparatus in other words if the user agrees with start of the cooking by the apparatus Yes at S then the mobile device causes the apparatus to start cooking S . On the other hand if the cooking is not to start by the apparatus in other words if the user disagrees against the start No at S then the mobile device causes the apparatus to stop the cooking S .

Next when the mobile device is disconnected from the cooking apparatus for example a cooking appliance such as a microwave the mobile device displays information of the previously displayed apparatus a TV for example again S .

In the above described manner when the user wishes to cook by using a cooking recipe displayed on the mobile device the user can start the cooking without inputting the cooking recipe into a microwave or a cooking machine. Furthermore even if the recipe is not stored in the microwave or the cooking machine the recipe can be recorded onto the apparatus without any complicated procedures. In addition the cooking appliance does not need to have a device such as a browser or a touch panel. As a result a cost of the cooking appliance can be reduced.

The following describes the processing in the case where while pressing the Move button the user points the mobile device to a target apparatus onto a recorder a TV or the like which information is to be recorded or on which information is to be displayed namely steps between S and S in with reference to steps from in .

At the beginning if the user unlock releases the Lock button at Step a Yes at Step a then the mobile device returns to the previously displayed screen here the screen displaying the TV .

On the other hand if the user does not release the Lock button No at Step a and wishes to record the displayed information onto the recorder Yes at Step b then the user points the mobile device in a direction from A to B in while pressing the Move button Step c .

The mobile device therefore detects an apparatus existing in the pointed 3D direction from 3D coordinate information by using a 3D direction sensor in the mobile device and is thereby connected to the apparatus here the recorder Step d . Here the display image display on the mobile device shown at Step e in is displayed on the display screen of the mobile device .

Next if the user releases the pressing of the Move button at Step e Step f then the mobile device transmits a request a recording instruction and the like for recording a currently displayed TV program to the apparatus recorder . Then the mobile device displays the display state shown at Step g in on the display screen and the recorder starts recording of the TV program displayed on the mobile device .

Furthermore if the user changes the direction pointed by the mobile device from direction B to direction A in Step h then the mobile device displays the display state shown at Step i in on the display.

The following describes effects of the present embodiment with reference to . In solid lines show directions of A B and C respectively from the mobile device to respective target apparatuses in the case where the display screen of the mobile device is pointed to the front sides of the TV the recorder and the microwave respectively. Doted lines show directions of the mobile device in the case where the display screen of the mobile device is pointed to the rear sides of the TV the recorder and the microwave respectively. In a conventional method merely using a motion sensor which is applied to games and the like when the display screen of the mobile device is pointed to the front side of the TV the direction A is rotated to the left in other words in anticlockwise direction to be switched to the direction B . Therefore the target apparatus is switched from the TV to the recorder as the operator intends. However when the display screen of the mobile device is pointed to the rear side of the TV the direction A is rotated in clockwise direction which is opposite to the anticlockwise direction to be switched to the direction B to point the recorder . Therefore the motion sensor wrongly detects that the target apparatus pointed by the mobile device is switched from the TV to the microwave . As a result the mobile device wrongly selects the microwave and displays it on the display screen. Therefore the mobile device performs false operation which the operator does not intends.

In the present embodiment however 3D mapping coordinate information of the TV the recorder and the microwave are previously registered by using NFC and the server. The mobile device also stores 3D coordinate information of the mobile device itself. Therefore when the mobile device is moved to the rear side of the TV located at the center of a large room and then rotated in clockwise direction from the direction A shown by the dotted arrow to the TV to the direction B shown by the dotted arrow to the recorder the mobile device can correctly select the recorder to be displayed based on the 3D coordinate information of the positions of the TV the recorder and the mobile device and the direction pointed by the mobile device . As a result the screen of the mobile device can display the recorder . Furthermore the mobile device can be linked to the recorder . As described above the present embodiment can offer special advantages of preventing false operations.

Generally there are few dozens of home appliances at home. In the present embodiment when NFC communication is performed by touching such a home appliance by the mobile device a distance between the mobile device and the home appliance is about 5 cm to 10 cm. If the mobile device has correct position information the position information with accuracy of about 5 cm to 10 cm is sent to the server. In other words in the present embodiment the few dozens of home appliances at home are set to be reference points for position determination. Conventionally there has been a problem that there is no reference point that is a reference in position determination so that a position in a building cannot be determined correctly. The present embodiment however can offer significant advantages that most of home appliances can serve as reference points.

The following describes an example of a method using radio as the position information obtainment method.

As shown in there is a communication method such as Multiple Input Multiple Output MIMO which uses a plurality of antennas to establish a plurality of transmission paths to transmit data.

The following describes a method of obtaining position information in the case where a parent device and a mobile terminal mobile device communicate with each other by the above mentioned communication method. The parent device communicates with the mobile terminal via three transmission paths a b and c. In practice there are nine transmission paths 3 3 transmission paths but the following description is given under the assumption of the three transmission paths.

For the communication the mobile terminal using the communication method such as MIMO calculates a transfer function A at Steps a to d and further calculates eigenvectors X and Wi an eigenvalue and the like at Step g. Here the nine transmission paths have respective different characteristics such as different eigenvectors phases and amplitudes. More specifically at Step a characteristics of the respective transmission paths are extracted. At Step b a radio field strength is measured. At Step c transmission characteristics of the respective transmission paths are determined based on the 3D coordinate information of the mobile terminal stored in the mobile terminal itself and the direction information of the mobile terminal . At Step f a transfer functions d of the respective transmission paths corresponding to the coordinate information and b the radio field strength e as well as c the 3D coordinate information and d the direction information are transmitted to a server . Then the processing proceeds to Step in .

At Step the server generates a pattern of a the 3D coordinate information of the mobile terminal determined at a specific time b the direction of the mobile terminal c transmission characteristics transfer function eigenvalue eigenvector of the transmission path and d the strength.

Subsequently at Steps a b and c the generated pattern is compressed with the transmission patterns a b c in more detail AAA ADA CAB for example corresponding to the respective pieces of 3D coordinate information 3D coordinate information 3D coordinate information 3D coordinate information thereby mapping the patterns onto a 3D coordinate space.

Then at Step a the resulting transmission patterns pieces of transmission information are recorded onto a database in the server in which 3D coordinate positions are stored. Here it is also possible to record characteristics of a change in the transmission information for a predetermined time period during which the mobile terminal is moved.

As described above the pieces of transmission information transmission patterns are recorded onto the database in the server . Here such transmission information transmission pattern of the mobile terminal is recorded in association with each user. For example if the mobile terminal transmits position information with a low accuracy to the server pieces of input transmission information transmission patterns are learned to record position information with a higher accuracy on the database.

Next at Step b it is assumed that the mobile terminal after Step a transmits current transmission information transmission patterns to the server in order to obtain current position information Yes at Step . Under the assumption at Step c the server matches a the transmission pattern transmitted from the mobile terminal with b each of the transmission patterns pieces of transmission information recorded on the database in the server . Here it is assumed that AAA is searched for by using a pattern matching method. Here fifteen circles at the lower left of schematically show transmission patterns recorded on the database in the server .

Next at Step d the server determines whether or not there is any transmission pattern candidate in the database which is similar to the transmission pattern AAA transmitted from the mobile terminal and the radio field strength of the mobile terminal . If there is such a candidate at Step d then the server further determines whether or not the number of such candidates is one Step e . If there is only one such candidate Yes at Step e then the server transmits to the mobile terminal 3D coordinate position information of the transmission pattern candidate in the database Step g .

On the other hand if there is not only one candidate No at Step e then the processing proceeds to Step h. At Step h a plurality of candidates are filtered based on low accuracy 3D coordinate information stored in the mobile terminal in order to reduce the candidates. Here with reference to the example shown at the lower left of at Step e it is assumed that there are three transmission patterns of AAA which are patterns a b and c. Under the assumption at Step h based on low accuracy 3D coordinate information stored in the mobile terminal shown as a bold line circle in the plurality of candidates are narrowed down filtered to only candidates close to the mobile terminal. As a result the number of candidates can be reduced.

Next after the filtering at Step h the server determines whether or not the number of candidates is one Step i . If the number of candidates is not one No at Step i then the server instructs the mobile terminal to use the low accuracy 3D coordinate information stored in the mobile terminal at Step f. On the other hand if the number of candidates is one Yes at Step i then the server transmits 3D coordinate information of the candidate transmission pattern to the mobile terminal Step j .

However the mobile terminal in a room cannot obtain GPS position information from satellites. Therefore a position of the mobile terminal in a room is determined by using the triaxial vibrating gyro the acceleration sensor and the geomagnetic sensor. However as the mobile terminal is far from a reference point more errors are accumulated to decrease an accuracy.

However in the case of the method according to the present embodiment such as MIMO which uses a plurality of transmission paths the number of patterns such as transfer functions is increased. Therefore there are more transmission patterns in a room in comparison with the situation using one transmission path. Each of the patterns is changed with a move of 2. In other words if a pattern from which characteristics of a transmission path are extracted is known it is possible to determine a position with a high accuracy of 2. For example in the case of 1 GHz it is possible to determine a position with an accuracy of 15 cm. The method has a problem that there would be a plurality of identical transmission patterns in the same room. In the present embodiment however the mobile terminal includes the position detection unit so that false patterns can be eliminated from pieces of low accuracy position information. Thereby the mobile terminal can obtain high accuracy position information.

Moreover MIMO can change directions of beams emitted from a plurality of antennas. If a beam direction from the mobile terminal to the parent device is changed it is possible to change a level of received signals such as a strength of a transmission path of a receiver for example. Move of the mobile terminal changes the state of the transmission path. Therefore if the 3D coordinate position of the parent device is known the position of the mobile terminal can be calculated.

As described above according to the present embodiment a mobile device communication device such as a mobile telephone or a Smartphone can easily serve as an extended user interface such as a multiple remote controller or a home appliance content download interface of a target apparatus by using a RF ID unit of the mobile device and various sensors such as a GPS and a motion sensor.

Although the communication device according to the present invention has been described with reference to the above embodiments the present invention is not limited to the above. Those skilled in the art will be readily appreciated that various modifications and combinations of the structural elements and functions in the embodiments are possible without materially departing from the novel teachings and advantages of the present invention. Accordingly all such modifications and combinations are intended to be included within the scope of the present invention.

The following describes a flow of processing by which a user who holds the mobile device a and is first near a building user s home or the like before entering the building starts determining a position of the mobile device in the building by using a sensor in the mobile device.

With reference to the processing of determining a position of the mobile device in the building is described.

At the beginning at Step a the mobile device determines whether or not a GPS sensor or a function of detecting radio waves in the building in the mobile device is running. If the GPS sensor or the function is running Yes then the processing proceeds to Step c. At Step c the mobile device determines whether or not coordinate information of a current position of the mobile device which are detected by the GPS sensor are close to the target building user s home for example that has been registered or whether or not the mobile device detects waves emitted from an apparatus in the target building which is to be connected via wireless LAN. Thereby the mobile device detects whether or not the mobile device is close to the target building. If it is detected that the mobile device is close to the target building Yes at Step c then the processing proceeds to Step d. If the determination at Step c is No then the processing is repeated until the determination at Step c becomes Yes. On the other hand if the determination at Step a is No then the processing proceeds to Step b. At Step b the user at the entrance of the building user s home selects an indoor position determination mode on a user interface of the mobile device in order to start position determination in the building. Then the processing proceeds to Step d. At Step d if the angular velocity sensor the geomagnetism sensor and the acceleration sensor of the mobile device are not running then the mobile device activates these sensors and the processing proceeds to Step e. At Step e it is determined whether or not a map and reference point information can be obtained from a map management server on a Cloud system or from a SEG server in the user s home . If the determination at Step e is Yes then the processing proceeds to Step f. At Step f the mobile device obtains the map and the reference point information. The reference point information indicates positions that are to be used as reference positions when a move amount of the mobile device is measured by a sensor in the mobile device and then converted into a coordinate value of a current position. In the reference point information coordinate values of such reference points on the map are previously registered. The mobile device detects such a reference point and obtains a coordinate value of the reference point thereby setting coordinate information which is stored in the mobile device as a current position of the mobile device. These reference points are characteristic parts on the map such as an entrance a foot of stairs and an end of a corridor. The reference points also include positions of home appliances chairs sofas and the like.

If the mobile device has an enough storage the mobile device holds the map and the reference point information. How to store and obtain the map and the reference point information is not limited. It is also possible that the map and the reference point information are stored in the SEG or the server on the Cloud system and the mobile device inquires the SEG or the server on the Cloud system about the map and the reference point information based on detection results of the sensor in the mobile device so that the mobile device performs via a network the same processing as that in the case where the mobile device holds the map and the reference point information.

It is further possible that the mobile device obtains a limited part of the map and a limited part of the reference point information regarding only a location close to a position of the mobile device. More specifically as the mobile device is moved the mobile device may download a part of the map and a part of the reference point information from the SEG or from the server on the Cloud system. If the determination at Step e is No then the processing proceeds to Step g. At Step g the mobile device detects a predetermined characteristic change pattern a move of a sliding door indicated by repetition of a previously measured angle change or a move on stairs indicated by a vertical acceleration change for example . If such a pattern is detected at Step g Yes then the processing proceeds to Step h. At Step h it is determined whether or not a similar characteristic change pattern similar to the detected pattern is registered in the mobile device. If the determination at Step h is Yes then the processing proceeds to in . If the determination at Step g is No then the detection routine is repeated until the determination at Step g becomes Yes.

Here the characteristic change pattern at Step g is for example a change G in a vertical direction of an acceleration in a Z axis vertical direction which indicates that the user holding the mobile device ascends three steps of stairs within three seconds. The detection of the change indicates that the user holding the mobile device reaches a height of a floor of the entrance. Then within five seconds for example the angular velocity sensor detects that a Yew direction is changed by 90 degrees which indicates that the user faces the entrance.

In this case it is recognized that opening of a door is a user s usual action. As a result it is determined that the mobile device is currently close to a reference point near the entrance door. In the situation if the sensor in the mobile device detects that the user is almost still for five seconds for example it is determined that the user is unlocking a key of the entrance. If the server or the mobile device holds coordinate information of the position in front of the entrance position information of the mobile device is updated to the coordinate information. Then the absolute coordinate system indicated by latitude longitude of GPS information is switched to the relative coordinate system in the building. The switch to the relative coordinate system can eliminate conversion to coordinates to latitude longitude and also reduce conversion errors.

The following describes the situation where the entrance door has a RF ID NFC lock. Regarding the RF ID according to the present embodiment coordinate information and a coordinate accuracy evaluation point Vs are recorded on the lock or the server. When the mobile device touches the lock a distance between the mobile device and an antenna unit of the lock is within 5 cm. Therefore if a coordinate accuracy evaluation point Vm of coordinate information of a position of the mobile device is greater than the coordinate accuracy evaluation point Vs coordinate information of the lock is replaced by the coordinate information of the mobile device. On the other hand if the coordinate accuracy evaluation point Vm of the mobile device is smaller than the coordinate accuracy evaluation point Vs the above replacement is not performed. According to the present embodiment coordinate information and a coordinate accuracy evaluation point of the coordinate information are recorded on a RF ID unit of an apparatus such as an air conditioner or a TV or on a server corresponding to the apparatus so that every time the mobile device touches the apparatus higher accuracy coordinate information and a higher accuracy evaluation point are updated. As a result the accuracy of position coordinate information of each apparatus is increased for every touching.

Regarding an apparatus having a RF ID function coordinate information and a coordinate accuracy evaluation point of the apparatus are recorded as shown in .

Here at Step c the use of the angular velocity sensor the geomagnetic sensor and the acceleration sensor enables the mobile device to measure a move amount of the user to determine a 3D position of the user. It is also possible to use a sound sensor an atmospheric pressure sensor and the like to detect a location or a floor number where sound occurs. As a result an accuracy of the position determination can be further increased.

According to the present embodiment it is possible to prevent the situation where the sensors in the mobile device are always ON whenever the mobile device is inside and outside a target building. As described in the example of the present embodiment the sensors for determining positions inside the building are turned ON only when the mobile device is detected as being close to the building. When the mobile device is not close to the building the mobile device is at a sleep mode or turned OFF to save energy if other application programs such as games are not used.

Furthermore the angular velocity sensor is turned OFF or switched to a sleep mode when the mobile device exists on a straight line part on the map of the building such as a path along which only rectilinear travel is possible. It is also possible to use the geomagnetic sensor to determine a direction. Then the angular velocity sensor is turned ON at a curved part or a fork in the path. For example the existing common triaxial angular velocity sensors consume energy of about 5 mA to 10 mA. Turning ON and OFF of the angular velocity sensor as necessary can reduce power consumption. Moreover the existing common geomagnetic sensors consume energy of about 1 mA that is less than that of the common angular velocity sensors. Therefore when high accurate angular velocity detection and attitude detection by the angular velocity sensor are not necessary it is possible to use only the geomagnetic sensor to detect the attitude of the mobile device.

At Step a it is determined whether or not area information coordinate value indicating respective areas such as a living room and a bedroom are previously set in the map information the map . If the determination at Step a is Yes then the processing proceeds to Step b. At Step b the mobile device obtains the area information indicating rooms on the map with reference to the map information stored in the mobile device. At Step c based on coordinate information of the mobile device and the obtained area information the mobile device specifies a room where the mobile device exists X Y Z

As described above by recognizing a room where the mobile device is it is possible to control a target apparatus TV for example in the room even if there are two TVs in different rooms.

Furthermore the acceleration sensor counts the number of user s steps to measure a move amount thereby enhancing an accuracy of the acceleration sensor. The move amount measurement is calculated by multiplying the number of steps by a move amount of one step step length . Here after the mobile device recognizes the room where the mobile device is the mobile device obtains a type of the room from the map. The step length varies depending on a kind of the floor wooden floor carpet or the like of each room. Therefore the move amount measurement is performed by using an appropriate step length for each floor in order to increase an accuracy of the move amount detection. For example the step length is 70 cm for a wooden floor and 60 cm for carpet.

As shown in when it is detected that the mobile device a having the angular velocity sensor at a sleep mode b enters an area range within 3 meters from the reference point the angular velocity sensor is turned ON c to detect the reference point with a higher accuracy. Until the mobile device enters the range a position of the mobile device is recognized by sensors such as the acceleration sensor and the geomagnetic sensor by calculating a speculative coordinate value of the position on the map based on a move amount measured from an immediately prior reference point passed by the mobile device.

For example as shown in a door between a bed room and an entrance is not far from a door between the bed room and a living room. Here it is assumed that the mobile device enters a range within 3 meters for example from a reference point b . At the reference point b map matching is difficult because inaccurate detection of user s turning causes the current position of the mobile device to vary depending on the respective rooms on the map. In this case it is possible to increase an accuracy of the map matching by operating the angular velocity sensor during a certain time period for 10 seconds for example .

At Step a the mobile device obtains a current coordinate value current coordinate information of the mobile device. At Step b it is determined based on the map whether or not there is any reference point or any attention point in a range within 3 meters from the current coordinate information on the map. If the determination at Step b is Yes then the processing proceeds to Step c. On the other hand if the determination at Step b is No then the processing returns to Step a. At Step c the mobile device refers to a list of sensors to be used near the reference point or the attention point. At Step d the mobile device obtains detection information detected by the target angular velocity sensor and time information 10 seconds 5 seconds after arrival . At Step e a sleep mode of the angular velocity sensor is released to start measurement. At Step f if a pattern of a detection result of the sensor regarding the reference point or the attention point is detected Yes then the processing proceeds to Step g. At Step g it is determined whether or not the predetermined time period of 5 seconds has passed. If the determination at Step g is Yes then the processing is completed. On the other hand if the determination at Step g is No then the step is repeated until the determination at Step g is Yes. If the determination at Step f is No then the processing proceeds to Step h. At Step h it is determined whether or not a time period of 10 seconds has passed. If the determination at Step h is Yes then the processing proceeds to Step i. At Step i the mobile device counts a discovery rate within the time period decrement by 1 count . At Step j the time information on the list is overwritten to be extended. In the case where the list is obtained from the server the mobile device notifies the server of the time information to be written over the list and then the processing returns to Step a.

The table a shown in indicates sensors to be activated by the mobile device in order of priorities. The sensors are prioritized according to reference points and an attention point on the map. The attention point is a position near a range where map matching errors are likely to occur. The table also indicates a time of activation and an operating time period during which each of the sensors is to be kept operating after detecting each of the reference points and the attention point. Based on the table it is possible to realize higher accuracy detection of the reference points and the attention point. Furthermore the table shows a discovery rate within the operating time period. The discovery rate indicates a percentage of discovery of each of the reference points and the attention point within the operating time period since the mobile terminal enters the range near the reference point or the attention point and activates the sensor indicated in the table. The table further indicates an error rate. The error rate indicates a rate of case s where it is determined based on the detection data after map matching an actual position is different from a result of map matching. Therefore the operating time period is set longer when the discovery rate is lower while the operating time period is set shorter when the discovery rate is higher. As a result it is possible to reduce the operating time period to save energy. Moreover if a rate of map matching errors is high a distance for detecting the range near the reference point or attention point is extended from 3 meters to 5 meters instead of extending the operating time period of the sensor. As a result it is possible to increase an accuracy of discovery of the reference points and the attention point. On the other hand if a rate of map matching errors is low the distance for detecting the range is shortened to decrease the operating time period of the sensor thereby saving energy.

The attention points include areas where a detection accuracy of each sensor is decreased. For example the geomagnetic sensor produces significant noises near a TV or in a space having magnetic force. If the mobile device detects noise causing the geomagnetic sensor to point an apparently wrong direction the mobile device registers a location causing the noise as an attention point onto the map. When the mobile device enters a vicinity of an attention point the angular velocity sensor is activated to correct the wrong direction detection. Furthermore if the mobile device detects noise but a location of the noise has not yet been registered as an attention point on the map the mobile device immediately activates the angular velocity sensor to correct wrong detection and registers the location as an attention point on the map. Furthermore regarding coordinate information coordinate point where the user always changes a way of holding the mobile device on a steep slope or on stairs when the angular velocity sensor arrives at a position where an accuracy of the angular velocity sensor is likely to be influenced by change of a direction of gravitational force the mobile device corrects detection of the sensor to increase the accuracy and a sampling amount. Moreover when the geomagnetic sensor is not operated the geomagnetic sensor is activated to perform the correction. It is determined whether or not coordinate information coordinate value from which a change of a position of the mobile device is detected is always near the location where such position change is always occurred according to a state of the user. If such position change is always occurred at the location the coordinate information coordinate value is registered as an attention point.

With reference to the processing of determining a position of the mobile device in the building is described.

At the beginning at Step a the mobile device determines whether or not the mobile device detects a coordinate information of a range near the user s home by GPS b an access point of a wireless LAN in the user s home or c one of access points of the wireless LAN in the user s home which have previously been detected in the user s home. If the determination at Step a is No then the mobile device waits until the determination becomes Yes. If the determination at Step a is Yes then at Step b the mobile device specifies a sensor for detecting a reference point passing in entering the home from a reference point detection sensor priority list shown in that indicates priorities of sensors for detecting reference points. Here it is assumed that the mobile device specifies the acceleration sensor at Step c and the acceleration sensor detects G acceleration in a Z axis direction which indicates a registered acceleration pattern for example three steps of stairs . In this case the mobile device determines that the mobile device is currently positioned at previously registered coordinate information coordinate value of the reference point. Therefore the coordinate value is set in the mobile device. Then the processing proceeds to in .

Here in addition to Step c a direction of move on the stairs is determined based on G acceleration on a moving direction axis X axis which is detected by the geomagnetic sensor. Then it is determined whether or not the determined direction is the same as the direction of the stairs which is previously detected and registered on the map. If the detected direction is not the same as the registered direction of the stairs it is possible to determine that the stairs are not a target reference point.

As shown in the list a since priorities of sensors to be activated are varied depending on a kind of a target reference point. For example when an entrance door is to be detected the sound sensor can correctly detect the entrance door by examining a similarity of sound caused by a key hole of the entrance door. However the sound sensor has a difficulty in detecting a door of a living room because a door of a living room does not make loud sound. Therefore the acceleration sensor instead of the sound sensor can detect the living room door because the user ascends one step to a height of the floor in entering the living room. More specifically detection of a vertical move by the acceleration sensor can provide more efficient characteristic pattern than the sound detection by the sound sensor. As a result the acceleration sensor is prioritized higher than the sound sensor for the living room door.

For example with reference to the list a in the normal operation two highest sensors in the order of priorities in the list are always operated. Here if the two highest priority sensors do not provide effective detection even after a certain time period the third priority sensor is also operated. On the other hand if the two highest priority sensors are enough to provide effective detection only the highest priority sensor is operated to be used. Therefore depending on characteristics of a reference point and the detection state sensors to be operated are selected. As a result it is possible to performing the detection using only necessary sensors thereby saving energy consumption and increasing the detection accuracy. Furthermore if a battery of the mobile device has enough charges lower priority sensors are also operated for example three highest sensors are always operated. As a result it is possible to increase the detection accuracy without decreasing usability.

With reference to the processing of determining a position of the mobile device in the building is described.

For example at Step a if an amount of acceleration components in a minus direction along the Z axis is large Yes it is determined at Step b that the user is ascending stairs. At Step c the number n of user s steps on the stairs is counted. At Step d a position of the user is determined based on a radio field strength and a phase of access points of the wireless LAN and thereby stairs A is specified from among plural sets of stairs. At Step f if the number n of the user s steps reaches the number m of steps of the stairs A that is obtained from the memory in the server or the mobile device or if the atmospheric pressure sensor detects a certain atmospheric pressure Yes then the processing proceeds to Step g. At Step g it is determined that the user is at the top of the stairs then coordinate information of the top step and a coordinate accuracy evaluation point Vs of the coordinate information are obtained from the server and the processing proceeds to in . On the other hand if the determination at Step f is No then the processing returns to Step c. If the determination at Step a is No then the processing proceeds to Step h. At Step h if an amount of acceleration components in a plus direction along the Z axis is large Yes then it is determined at Step i that the user is descending stairs. At Step k the number of user s steps on the stairs is counted. At Step m a position of the user is determined based on a radio field strength and a phase of access points of the wireless LAN and thereby stairs A is specified from among plural sets of stairs. At Step n if the number of the user s steps reaches the number m of steps of the stairs A that is obtained from the memory in the server or the mobile device or if the atmospheric pressure sensor detects a certain atmospheric pressure Yes then the processing proceeds to Step p. At Step p it is determined that the user is at the bottom of the stairs then coordinate information of the bottom step and a coordinate accuracy evaluation point Vs of the coordinate information are obtained from the server and the processing proceeds to in . On the other hand if the determination at Step p is No then the processing returns to Step k.

With reference to the processing of determining a position of the mobile device in the building is described.

At Step a the coordinate accuracy evaluation point Vm of the coordinate information measured by the mobile device is retrieved from the mobile device. At Step b if Vs is greater than Vm in other words if the coordinate information registered in the server is accurate more than the coordinate information stored in the mobile device Yes then the processing proceeds to Step c. At Step c the coordinate information stored in the mobile device is rewritten by the coordinate information registered in the server. At Step g the setting of the coordinate information of the reference point at the stairs has been completed. Then the processing proceeds to in . If the determination at Step b is No then the processing proceeds to Step d. At Step d the coordinate information stored in the mobile device is not rewritten by the coordinate information registered in the server. At Step e if an automatic rewriting flag for automatically rewriting the coordinate information registered in the server as the coordinate information stored in the mobile device is ON or if the user agrees OK with the screen display Can it be written Yes then the processing proceeds to Step f. At Step f the coordinate information registered in the server is rewritten as the coordinate information stored in the mobile device. At Step g the setting of the coordinate information of the reference point at the stairs has been completed. Then the processing proceeds to in . If the determination at Step e is No then at Step g the setting of the coordinate information of the reference point at the stairs has been completed. Then the processing returns to in .

As shown in a pattern a in when the user ascends stairs an acceleration is high in a minus direction along the vertical Z axis which is an ascending direction and such acceleration is periodically detected a . On the other hand when the user descends stairs an acceleration is high in a plus direction along the vertical Z axis which is a descending direction and such acceleration is periodically detected b . Moreover when the user walks horizontally an acceleration in the minus direction and an acceleration in the plus direction are almost the same along the vertical direction c . In the graphs in gravity measured by the acceleration sensor in the steady state is not considered to simplify the explanation.

With reference to the processing of determining a position of the mobile device in the building is described.

At the beginning at Step a the mobile device determines whether or not the mobile device detects a coordinate information of a range near the user s home by GPS b an access point of a wireless LAN in the user s home or c one of access points of the wireless LAN in the user s home which have previously been detected in the user s home. If the determination at Step a is No then the mobile device waits until the determination becomes Yes. If the determination at Step a is Yes then at Step b the mobile device specifies a sensor for detecting reference points in user s entrance from the reference point detection sensor priority list a. At Step c if the sound sensor is specified from the obtained list the mobile device of the user hereinafter referred to as a user s mobile device accesses a previously registered mobile device for example a mobile device of a family member hereinafter referred to as family mobile device that is going to enter the building the user s home via proximity wireless communication such as a cellular network a wireless LAN or a booster transformer BT . Thereby the user s mobile device inquires the family mobile device whether or not the family mobile device is near the building. At Step d if there is such a mobile device the family mobile device for example near the user s mobile device and the family mobile device is permitted to enter the building to receive position determination services the user s mobile device inquires a coordinate value coordinate information of the family mobile device. Then the user s mobile device determines whether or not the a distance between the position of the family mobile device the obtained coordinate value and a position of a reference point a reference value is shorter than a distance between the position of the user s mobile device and the position of the reference point. If the distance between the family mobile device and the reference point is shorter than the distance between the user s mobile device and the reference point then the processing proceeds to Step f. At Step f the user s mobile device examines the reference point detection sensor priority list to select another detection method except sound. At Step g by the selected detection method the user s mobile device detects that the user s mobile device moves to the reference point then sets coordinate value coordinate information of the reference point to the user s mobile device and the processing proceeds to in .

If it is determined at Step d that the distance between the family mobile device and the reference point is longer than the distance between the user s mobile device and the reference point then the processing proceeds to Step e. At Step e the user s mobile device determines whether or not sound emitted at the current position of the user s mobile device matches previously registered sound sound of a door knob or sound of a key . If the determination at Step e is Yes the user s mobile device determines that the current position of the user s mobile device is a reference point and sets a coordinate value of the reference point into the user s mobile device. Then the processing proceeds to in .

With reference to the processing of determining a position of the mobile device in the building is described.

At Step a an amount of a move of the mobile device from a reference point is calculated for each predetermined time period 10 ms by the acceleration sensor the angular velocity sensor and the geomagnetism sensor so that an estimated coordinate value estimated coordinate information of the mobile device is registered in the mobile device for each of the calculation by using an automatic navigation method. At Step b the mobile device i detects the user s walk based on a results of detecting the Z axis accelerations ii detects a time at which the user s foot touches the floor and iii detects one or more sounds occurred at a target time and iv detects a moment at which sound is changed. At Step c a pattern of the sound change is compared with previously registered patterns resulting from differences between floors such as a difference between a wooden floor and a carpet. If the pattern is similar to one of the previously registered patterns then the processing proceeds to Step d. At Step d a direction of the move of the mobile device hereinafter referred to as a moving direction is detected by the geomagnetism sensor and the angular velocity sensor. Then coordinate information of the mobile device is corrected to coordinates of an intersection between a the moving direction and b a straight line drawn from a coordinate value coordinate information that is currently registered as current position information in the mobile device or corrected to a position that is the closest to the intersection . Then the processing proceeds to in . On the other hand if the pattern is not similar to any of the previously registered patterns then the processing proceeds to in .

As shown in a a walking state can be detected based on acceleration. By detecting times b c at each of which a foot touches a floor it is possible to extract based on the detected time only a footstep sound from sound occurred in walking. As a result a difference of footstep sounds can be detected more efficiently. As shown in d when the user moves from a living room having a wooden floor to an European style room having a carpet floor it is determined that a time of the footstep sound change point e is a time where the user walks across a boundary between the living room and the European style room f . As a result a coordinate value coordinate information of a current position of the mobile device is corrected based on the map.

The mobile device detects a reference point a and can calculate an accuracy of a coordinate value of a position of a TV A based on a an amount b of turning towards the TV A and b an accuracy of a coordinate value of the reference point a on the map. More specifically if the turning amount b is large the accuracy of the coordinate value of the position of the TV A which is recognized by the mobile device is set low. On the other hand if the turning amount b is small the accuracy is set high. The resulting accuracy information of the reference point is registered. Likewise for a move from the TV A to a TV B an accuracy of a coordinate value of a position of the TV B is calculated based on a the accuracy information of the coordinate value of the TV A and b a turning amount or a move amount along the Z axis c and eventually the calculated accuracy information is registered.

In the table a path information includes a original reference point accuracy information that is accuracy information of an immediately prior reference point which the mobile device has passed b a move amount c the number of steps step number calculated by the acceleration sensor d a total turning amount that is calculated by the angular velocity sensor and the geomagnetic sensor e an elapsed time and f a total amount of a vertical move along the Z axis. An accuracy evaluation point coordinate accuracy evaluation point of a current position of the mobile device is calculated based on values of the above pieces of information.

As shown in the table a the reference point A such as an entrance the TV A the TV B and their reference point accuracy information are registered. As shown in an example in a coordinate accuracy evaluation point of the TV A is calculated based on the coordinate accuracy evaluation point of the reference point A and a path b . A coordinate accuracy evaluation point of the TV B is calculated based on the coordinate accuracy evaluation point of the TV A and a path c .

The calculated coordinate accuracy evaluation points are stored as map information and kept updating. The updating may be performed for each time the mobile device reaches a target reference point. It is also possible to accumulate coordinate accuracy evaluation points of a target reference point predetermined times and calculate statistics from them. For example 10 coordinate accuracy evaluation points are averaged.

With reference to the processing of determining a position of the mobile device in the building is described.

At Step a a first reference point is detected. At Step b a coordinate value of a current position of the mobile device is rewritten by a coordinate value of the first reference point. At Step c coordinate accuracy evaluation point information that indicates an accuracy of the coordinate value of the first reference point is obtained from reference point information. The first reference point is considered as an original reference point in a path list. At Step d a move from the first reference point is measured by the angular velocity sensor the geomagnetic sensor and the acceleration sensor and then stored. At Step e it is determined whether or not the mobile device arrives at a second reference point or touches an apparatus having a RF ID function for communication which is located at the second reference point. If the determination at Step e is Yes then the processing proceeds to Step f. At Step f the mobile device obtains information of the second reference point reference point information or information of the apparatus apparatus information . Then at Step g the mobile device obtains coordinate accuracy evaluation point information of the second reference point or the apparatus based on the reference point information or the apparatus information. The coordinate accuracy evaluation point information is obtained from the server SEG for example or from the mobile device itself in the same manner as described in the case where the mobile device touches the apparatus such as a home appliance having a RF ID function which is located at the second reference point. Then the processing proceeds to in . On the other hand if the determination at Step e is No then the processing returns to Step d.

With reference to the processing of determining a position of the mobile device in the building is described.

At Step a a coordinate accuracy evaluation point of the second reference point or the apparatus is calculated based on the path information. At Step b if the coordinate accuracy evaluation point calculated by the mobile device is higher than coordinate accuracy evaluation point that has been previously calculated and registered Yes then the processing proceeds to Step c. At Step c 3D coordinate information and the coordinate accuracy evaluation point of the second reference point or the apparatus which are currently calculated are written over 3D coordinate information and the coordinate accuracy evaluation point which are registered. If the determination at Step b is No then the processing proceeds to Step d. At Step d the 3D coordinate information of the second reference point or the apparatus which is registered is obtained. At Step e the obtained 3D coordinate information is overwritten as a coordinate value of a current position of the mobile device. Then the processing returns to in .

At Step a it is determined whether or not the user holding the mobile device arrives at a position of a lift. If the determination at Step a is Yes then the processing proceeds to Step b. Otherwise No at Step a Step a is repeated.

At Step b it is determined whether or not the user holding the mobile device enters the lift. If the user holding the mobile device enters the lift Yes at Step b then the processing proceeds to Step c. Otherwise No at Step b Step b is repeated.

If there are a plurality of lifts having different performance in the building it is determined at Step c based on position information which lift the user enters and on which floor floor number the lift currently exists. At Step d the mobile device obtains characteristic information of the target lift from the server. The characteristic information includes a a time period required to ascend or descend from the n th floor to the m th floor b information of Ts and load change characteristics c an absolute or relative height of each floor and d a position of a lift door on each floor. At Step e a vertical acceleration along the Z axis is measured. At Step f if an acceleration in the same direction as the gravity direction is increased or if atmospheric pressure is decreased it is determined that the user starts ascending in the lift. Therefore measurement of an elapsed time of the ascending starts. At step g if an acceleration in the same direction as the gravity direction is decreased or if increase of atmospheric pressure stops it is determined that the ascending stops. Therefore the measurement of the elapsed time is stopped to calculate the elapsed time TA. At Step h information of a time period required from the n th floor to the m th floor is calculated based on a the floor from which ascending starts b the elapsed time TA and c the required time period information of the lift and then information of a floor floor number at which the mobile device arrives is determined based on the time period required from the n th floor to the m th floor . At Step i it is determined whether or not the mobile device is moved outside the lift. If the determination at Step i is Yes then the processing proceeds to in .

It should be noted that in the case where the lift is descending detected values of data such as an acceleration and atmospheric pressure are opposite to those in the case where the lift is ascending. Therefore the floor at which the mobile device arrives is determined in the same manner as described with the above steps.

It should also be noted that in the case where the lift is stopped for someone before arriving at the user s target floor a move amount from start of ascending or descending to each stop is considered until the user holding the mobile device eventually goes out of the lift.

At Step a height information or floor number information of the above described floor floor number at which the mobile device arrives is recorded as Z information in the current 3D coordinate information of the mobile device. At Step b it is determined at Step b whether or not the user holding the mobile device goes out by a few steps from a door of the lift. If the determination at Step b is Yes then the processing proceeds to Step c. Otherwise No at Step b Step b is repeated.

At Step c the mobile device obtains a position information of an entrance of the floor and b coordinate accuracy evaluation point Vs of the entrance which are previously stored in the server or the memory in the mobile device. In addition the mobile device obtains coordinate information of the current position of the mobile device measured by sensors and the like in the mobile device. Then the processing proceeds to in . In this case if the coordinate accuracy evaluation point Vs of the entrance is higher than the coordinate accuracy evaluation point Vm of the entrance which is stored in the mobile device the coordinate information coordinate value of the entrance is written over the coordinate information stored in the mobile device to re set information of the reference point the entrance . As a result the accuracy of the coordinate information stored in the mobile device is increased. After that as a distance and a time period of move of the mobile device are increased the coordinate accuracy evaluation point Vm stored in the mobile device is decreased if a next reference point is not set. The decrease is executed by a program corresponding to characteristics of a model of the mobile device. The program is downloaded by the mobile device.

In the case where the user holding the mobile device gets on an escalator the mobile device detects both a an acceleration upwards along the Z axis which is averagely steady and b an acceleration in a move direction which is also averagely steady. The accelerations show a considerably characteristic pattern as long as the user holding the mobile device does not walk up an escalator. Therefore based on detection of such a pattern it is possible to determine that the user gets on an escalator and ascends or descends. Then a step number sensor detects that the user gets out of the escalator and therefore information of the reference point can be re set.

As described above it is possible to obtain the floor number and height information of the floor at which the user holding the mobile device arrives by a lift.

In the twenty fourth embodiment the description is given for processing performed when a mobile device touches a NFC tag of a home appliance with reference to . Here the mobile device has a NFC reader writer the home appliance has the NFC tag and a home appliance CPU and a server manages information of the mobile device and information of the home appliance.

With reference to at Step v the home appliance CPU included in the home appliance regularly records data regarding the home appliance onto a memory in the NFC tag. Therefore when the mobile device hereinafter referred to also as a mobile terminal accesses the tag of the home appliance the home appliance can provide the mobile terminal with information stored in the home appliance which can be read not by the mobile terminal but only by the home appliance CPU.

At Step b the mobile terminal determines whether or not an application program for operating the home appliance has already been activated on the mobile terminal. If the application program has already been activated Yes at Sb then at Step c the display terminal displays Please touch on the display device of the mobile terminal in order to notify the user of that the mobile terminal is ready for touching the tag of the home appliance.

At Step d the mobile terminal determines whether or not the user makes the mobile terminal touch the NFC tag of the home appliance. If it is determined that the user makes the mobile terminal touch the NFC tag Yes at Step d then the processing proceeds to Step e. At Step e the mobile terminal issues a request for reading data from the tag. At Step f the home appliance reads the data from the memory in the tag.

At Step g the home appliance determines whether or not to access the home appliance CPU. If it is determined that it is necessary to access the home appliance CPU Yes at Sg then the processing proceeds to Step h. At Step h the home appliance accesses to the home appliance CPU. At Step j the home appliance reads information by accessing the home appliance CPU. At Step k the home appliances transmits provides the information read from the home appliance CPU to the memory in the tag of the home appliance or stores the information in the home appliance. Then the processing proceeds to Step m. Therefore when the mobile terminal accesses the tag of the home appliance the home appliance can provide the mobile terminal with the information stored in the home appliance which can be read not by the mobile terminal but only by the home appliance CPU.

If the determination at Step d is No then Step d is repeated. On the other hand if the determination at Step d is Yes then the processing proceeds to Step Se.

At Step m the home appliance transmits the required information to the mobile terminal. At Step n the mobile terminal receives the information including a tag ID a signature a key ID an apparatus model an error code a use history the number of uses log data a product serial number an operating state current state of the home appliance a URL position information an on sale mode identifier and the like.

At Step q the mobile terminal determines whether or not the mobile terminal is within the service range. If the determination at Step q is Yes then the processing proceeds to Step r. At Step r the mobile terminal transmits to the server having an address of the above mentioned URL information including a user ID the tag ID the signature the key ID the apparatus model the error code the use history the number of uses the log data the operating state current state of the home appliance the position information and the on sale mode identifier. At Step s the server receives the information transmitted from the mobile terminal.

At Step a the mobile terminal determines whether or not the mobile terminal has an application program corresponding to the apparatus model received from the touched home appliance. If the determination at Step a is Yes then at Step i the mobile terminal activates the application program. Therefore when the mobile terminal holds the apparatus model information and the application program corresponding to the apparatus model the mobile terminal can activate the application program even outside the service range.

If the determination at Step a is No then the processing proceeds to Step b. At Step b the mobile terminal activates a general local processing routine. At Step c the mobile terminal displays a part of the information read from the tag of the home appliance. Therefore even if the mobile terminal is outside the service range and does not have the application program corresponding to the apparatus model of the touched home appliance the mobile terminal can present the user with the information obtained from the home appliance.

At Step d the mobile terminal determines whether or not the error code indicates error . If the determination at Step d is Yes then the processing proceeds to Step e. At Step e the mobile terminal determines whether or not the mobile terminal holds pieces of attribute information each indicating details and the like of a corresponding error code. If the determination at Step e is Yes then the processing proceeds to Step Sf.

If the determination at Step e is No then the processing proceeds to Step g. At Step g the mobile terminal displays the apparatus model and the error code or letters converted from the error code and the processing proceeds to Step Sh. Therefore even if the mobile terminal does not hold pieces of attribute information each indicating details and the like of the corresponding error code the mobile terminal can present the user with the error information of the home appliance.

At Step f the mobile terminal displays information for explaining details of the error based on the error code and the processing proceeds to Step Sh. Therefore even if the mobile terminal is outside the service range the mobile terminal holds relationship information indicating a relationship between each error code and error details and thereby converts an error code provided from the touched home appliance to corresponding error details. As a result the mobile terminal can present the user with error details based on the error code provided from the home appliance so that the user can easily understand the error. When a relationship between an error code and error details is to be changed it is possible that the mobile terminal receives also a manufacturer code from the tag of the home appliance then manages a relationship table indicating a relationship between each error code and error details for each manufacturer and changes the relationship. If common error codes for apparatuses are defined by each manufacturer it is also possible that the mobile terminal receives also a manufacturer code from the tag of the home appliance then manages a relationship table indicating a relationship between each error code and error details for each manufacturer and changes the error details. As a result it is possible to decrease the number of kinds of errors registered in the mobile terminal. Furthermore it is possible that the mobile terminal manages a relationship table indicating a relationship among a manufacturer code of a manufacturer an apparatus model of the manufacturer an error code and error details and changes the error details.

At Step h the mobile terminal determines whether or not the mobile terminal holds a telephone number an e mail address or a URL for inquiring an apparatus model of the home appliance. If the determination at Step h is Yes then the processing proceeds to Step Sa of in .

With reference to at Step a the mobile terminal determines whether or not the on sale mode identifier provided from the server or the tag of the home appliance is ON. If the determination at Step a is Yes then the processing proceeds to Step b. At Step b the mobile terminal displays a menu screen.

An on sale mode represented by the on sale mode identifier indicates that the home appliance is on sale in an electronics retail store. In general distribution of home appliances products are manufactured by a manufacturer then a part of them are stored in a warehouse and a pat selected at random from the stored products are displayed in electronics retail stores. Consumers checks a usability or design of such a displayed product in the electronics retail store. However there is a problem described below.

The processing from Step d offers advantages to the manufacturer because the processing from Step d enables the user to easily perform user registration only by making the mobile terminal touch a target home appliance. Consumers who touch a product in an electronics retail store do not always decide to buy the product. If a malicious consumer does not intend to buy a home appliance displayed in a store but makes his her mobile terminal touch the home appliance the touching results in registration of the consumer as a user of the home appliance. In recent years user registration is vital information for a manufacturer to specify purchasers of products to be recalled. Therefore many manufacturers offer financial or additional merits to purchasers who perform user registration. Therefore such a situation would increase malicious consumers attempting to perform user registration for products which the consumers do not intend to buy. Technologies of preventing such malicious user registration have been highly demanded. At Steps a and b based on the on sale mode identifier held in the server or the tag of the home appliance the mobile terminal determines whether or not the home appliance is on sale at the on sale mode . If the home appliance is at the on sale mode the mobile terminal prohibits user registration for the home appliance and displays a menu screen to notify the on sale mode. As a result it is possible to prevent malicious user registration. It is possible that the on sale mode is changed or referred to by the server. In this case the server does not need to directly touch the target home appliance. Therefore the sever can change the on sale mode for a large number of home appliances at once or can control the home appliances in distance locations. It is also possible that the on sale mode is changed or referred to by the home appliance or the tag of the home appliance. In this case it is possible to change an on sale mode for each of home appliances displayed in stores for example.

Referring back to Step a if the determination at Step a is No then the processing proceeds to Step c. At Step c the mobile terminal searches a database for a target home appliance based on the tag ID and the apparatus model and thereby determines whether or not the home appliance has already been registered in other words whether or not user registration has already been performed for the home appliance . If the determination at Step d is Yes then the processing proceeds to Step e. At Step e the mobile terminal determines whether or not a user ID of the mobile terminal and the user ID registered in the server are identical or belong to the same family. If the determination at Step e is Yes then the processing proceeds to Step f. At Step f the mobile terminal displays a menu screen corresponding to a general apparatus model. Therefore if the mobile terminal has already performed user registration for the home appliance the mobile terminal does not need to display an unnecessary user registration screen again and again to a purchaser of the home appliance. Recently almost everyone has one or more mobile terminals. Therefore for example if the user performs user registration for a purchased washing machine by using a mobile terminal of his her father and makes a mobile terminal of his her mother touch a NFC tag of the washing machine it is wrongly determined that a different user requests user registration. As a result the mobile terminal of the user s mother displays a user registration change screen even if the father and the mother live in the same home. In order to solve the above problem as indicated at Step e the user ID of the mobile terminal of the user is associated with user IDs of the mobile terminals of the family members of the user. Therefore in the above example if it is determined that the mobile terminal of the user s mother and the mobile terminal of the user s father belong to the same family it is determined that the user registration has already been performed for the washing machine correctly. As a result the mobile terminals of the user s family do not need to display a user registration screen again and again.

If the determination at Step d is No then the processing proceeds to Step g. At Step g the mobile terminal displays the user registration screen. At Step h the mobile terminal determines whether or not there is position information of a current position of the mobile terminal which is detected by the GPS or the like. If the determination at Step h is Yes the processing proceeds to Step j. At Step j the mobile terminal determines whether or not the mobile terminal is positioned at a specific region such as a building in which a target apparatus an apparatus model of a target home appliance is on sale. The processing proceeds to in .

At Step a the mobile terminal displays on its screen the above mentioned telephone number e mail address or URL for inquiring the apparatus model. At Step b the mobile terminal is connected to the server and determines whether or not there is data to be exchanged with the server. If the determination at Step b is Yes then the processing proceeds to Step c. Otherwise No at Step b the processing proceeds to Step d and is completed.

At Step c the mobile terminal displays Move to the service range to persuade the user to move into the service range. At Step e the mobile terminal causes the data information read from the tag of the home appliance to be in a savable state where the data can be saved in a memory. At Step f the mobile terminal determines whether or not the mobile terminal is in the service range. If the determination at Step f is Yes then the processing proceeds to Step g. Otherwise No at Step f then the processing returns to Step c.

At Step g the mobile terminal is connected to the server having the URL recorded on the tag of the home appliance or on the mobile terminal. At Step h user authentication is performed. At Step j the mobile terminal transmits to the server the data read from the tag or information generated based on the data or the mobile terminal processes the data or the information by executing an application program provided from the server.

As a result even if the mobile terminal touches the home appliance outside the service range after the user moves into the service range the mobile terminal can display a menu screen regarding user authentication user registration change or the target apparatus.

At Step a the mobile terminal here it is assumed that the mobile terminal does not belong to a target building determines whether or not it is possible to determine a current position of the mobile terminal by using the GPS or the like. If the determination at Step a is Yes then the processing proceeds to Step b. At Step b the mobile terminal determines whether or not the determined position position information of the mobile terminal almost matches one of pieces of position information registered in the server. If the determination at Step b is Yes then the processing proceeds to Step c.

At Step c the mobile terminal determines whether or not the matching position information in the server is assigned with an identifier indicating that Other users other user IDs are accepted . If the determination at Step c is Yes then the processing proceeds to Step d. At Step d the mobile terminal is set to be at a guest mode.

On the other hand if the determination at Step c is No then the processing proceeds to Step e and is terminated.

At the guest mode the mobile terminal for example a mobile terminal of a visitor except family members of the user can operate only a predetermined home appliance at one of the positions registered in the server. For example it is assumed that a visitor except family members of the user visits the user s home. Here it is also assumed that the user wishes to allow the visitor to use a mobile terminal of the visitor as a remote controller of a TV in the user s home but does not want to let anyone except the family members see a laundry history of a user s washing machine. Under such assumption the TV is assigned with the identifier indicating Other users other user IDs are accepted which is currently ON while the washing machine is assigned with the same identifier which is currently OFF. Furthermore the introduction of the guest mode allows any visitor to use a part of functions of his her mobile terminal. For example the gust mode inhibits anyone except family members in a target home from seeing a laundry history of a washing machine in the home but permits anyone to display an error code of the washing machine on his her mobile terminal.

If the determination at Step b is No then the processing proceeds to Step f. At Step f the mobile terminal displays on its screen a question such as Has the address been changed or Has the owner been changed If an answer of the question is Yes then the processing proceeds to Step g. At Step g the mobile terminal displays an address change menu or an user change menu.

As a result this offers the following advantages. For example it is assumed that the user moves with his her home appliances to a new home and therefore a user s address registered in user registration at purchase of the home appliances is changed. Under the assumption if the user forgets to register a new address in the user registration the mobile terminal of the user can automatically persuade the user to perform the user registration.

The following describes a variation of the present embodiment in the case where a home appliance is on sale in an electronics retail store with reference to .

At Step a the mobile terminal determines whether or not the mobile terminal is in a target region. If the determination at Step a is Yes then the processing proceeds to Step b. Otherwise No at Step a the processing proceeds to Step c. At Step c the mobile terminal performs user registration for a target home appliance in the target region.

Here the target region is space information generally indicating one of floors of an electronics retail store. The target region is indicated by GPS information or the like. The determination at Step a may be made based on a current position of the mobile terminal or a beacon of the store. The determination at Step a may also be made with reference to home appliance distribution route information and a present time.

This produces the following advantages. For example if a home appliance is displayed in a retail store it is possible to prevent a malicious user from performing malicious user registration for the displayed home appliance which the user has not yet purchased.

At Step b the mobile terminal having a user ID and the server performs user authentication. At Step d the mobile terminal determines whether or not the user authentication is successful OK . If the determination at Step d is Yes then the processing proceeds to Step e. Otherwise No at Step d then the processing proceeds to Step f and is terminated.

At Step e the mobile terminal requires input of a password of the retail store or a manufacturer of the target home appliance.

At Step h the mobile terminal determines whether or not the authentication is successful OK . If the determination at Step h is Yes then the processing proceeds to Step j. Otherwise No at Step h then the processing proceeds to Step k and is terminated.

At Step j the mobile terminal determines whether or not the password is correct. If the determination at Step j is Yes then the processing proceeds to Step m. Otherwise No at Step j then the processing proceeds to Step n and is terminated.

At Step m the mobile terminal is switched to be at the on sale mode. At Step p the mobile terminal inquires the user whether or not to record an identifier of the on sale mode on sale mode identifier onto the tag of the home appliance or onto the server.

If the user instructs the mobile terminal to record the on sale mode identifier Yes at Step p then the processing proceeds to Step q. At Step q the mobile terminal sets the on sale mode identifier ON in the tag of the home appliance or in the server. At Step r the mobile terminal transmits information regarding the on sale mode identifier identifier information to the server or encrypts the identifier information a password and a key and transmits the encrypted information to the tag of the home appliance so that the encrypted information is recorded on a memory region allocated in the tag. At Step s the mobile terminal is still at the on sale mode.

At Step t the tag of the home appliance performs authentication by using the received password and key as well as a key stored in the tag. At Step u the tag determines whether or not the authentication is successful OK . If the determination at Step u is Yes then the processing proceeds to Step v. At Step v a value representing ON is recorded on the memory region for the on sale mode identifier in the tag.

This can produce the following advantages. For example it is possible to prevent a malicious consumer from changing an on sale mode of a home appliance displayed in a store without authorization. It is also possible to prevent a malicious consumer from setting an on sale mode of a home appliance to be OFF and performing user registration for the home appliance which the consumer has not yet purchased. Even if there is no such a non sale mode it is possible to prevent that a mobile terminal of a malicious consumer requests the malicious consumer to enter a password of a store or a manufacturer of a home appliance displayed in the store and that the malicious user performs user registration for the home appliance which the malicious consumer has not purchased.

It should be noted that it has been described that the mobile terminal is switched to be at the on sale mode at Step m. However it is also possible that the mobile terminal performs user registration at Step m. As a result it is possible to prevent malicious user registration for home appliances not yet been purchased and also possible to permit sales people in an electronics retail store to perform user registration instead of a purchaser of a target home appliance.

The following describes the twenty fifth embodiment of the present invention. shows a mobile terminal according to the present embodiment. shows a home appliance according to the present embodiment. The present embodiment provides a method of easily increasing an accuracy of positional matching between an antenna unit of a proximity wireless communication module of the mobile terminal and an antenna unit of a proximity wireless communication module of the home appliance by using a guidance function of the mobile terminal and a guidance function of the home appliance in proximity wireless communication between the mobile terminal and the home appliance . The mobile terminal is assumed to be a terminal such as a Smartphone which has a front side most of which is occupied by a display unit. In the mobile terminal an antenna unit of a proximity wireless communication module is assumed to be provided at the rear side of a button unit of the display unit. As shown in in the home appliance general home appliance an antenna unit of a proximity wireless communication module is provided at a certain part of the home appliance. Furthermore on the home appliance a mark which serves as a certain mark is provided to a part near the center of the NFC antenna. The mark may be a common sign such as a circle or a cross or a specific sign representing the proximity wireless communication module. In addition a mark such as a manufacturer logo or a product logo may be used. However the mark producing higher positional matching effect is a cross having a vertical longer line and the center that is the center part of the antenna likewise the mark .

As described above in the present embodiment the mobile terminal such as a Smartphone is touched to performs proximity wireless communication with the home appliance and thereby transmits information of the home appliance to the server. Therefore a very low cost and simple structure with an antenna and a single IC can receive Internet services. Here the server can provide data to the user via the mobile terminal anytime. However connection from the home appliance to the mobile terminal and the server is not achieved until the mobile terminal touches the home appliance. In the present embodiment however if the home appliance has not been connected to the server for a predetermined time period or if the home appliance needs to be connected to the server due to breakdown the home appliance illuminates a red LED or the like which has the center that is positioned at the center of the NFC antenna unit or produces sound. Thereby the home appliance requires the user to make the mobile terminal touch the home appliance. Therefore it is possible to connect the home appliance to the mobile terminal or the server via a human. In addition the home appliance displays the illuminated mark illuminated display mark that has the center that is positioned at the center of the NFC antenna and that is larger than the printed mark. The illuminated mark is larger than a Smartphone the mobile terminal . Therefore the cross display of the illuminated mark enables the user to recognize the position of the antenna unit of the home appliance even if the position of the antenna unit hides behind the Smartphone.

Moreover in the present embodiment the memory unit in the mobile terminal such a Smartphone previously holds as a parameter coordinate information x1 y1 to be displayed on the display unit of the mobile terminal. The coordinate information corresponds to the center position of the antenna unit provided on the rear side of the mobile terminal. The coordinate information enables the mobile terminal to display the position of the antenna unit on the display unit. Especially as shown in in on the display unit of the mobile terminal the antenna position mark of the mobile terminal is displayed as a cross at a position corresponding to the mark a b indicating a position of the NFC antenna of the home appliance. Therefore the user can easily match the position of the antenna unit of the mobile terminal to the position of the antenna unit of the home appliance. As a result it is possible to prevent that a time for starting data transfer is too early or that an error occurs during long time downloading. The above described coordinate information for the display unit of the mobile terminal may be downloaded together with an application program for readout from the server. Even in this case the same effects can be produced. Furthermore a physical position of the antenna unit of the mobile terminal a physical position of the display unit of the mobile terminal information indicating a positional relationship between displayed positions and respective pieces of position information may be used. A cross mark is effective. However a circle or a square may be displayed on the display unit of the mobile terminal. It is important that the user can easily recognize a mark for the home appliance side and a displayed mark for the mobile terminal side and easily match the marks.

If a mark such as a displayed mark in which indicates a position of the antenna unit of the home appliance such as a TV is displayed on a display screen of the home appliance TV even the display screen having a narrow frame can display the mark larger.

In the present embodiment if the mobile terminal such as a Smartphone has an antenna unit on the rear side of the display unit antenna arrangement identification information is ON. In this case regarding coordinate position information of a region in the display unit which corresponds to the center of the antenna unit for example in the case of the display unit having horizontal 480 pixels vertical 1200 pixels the center position of the antenna unit is defined as x y 200 dots 400 dots . This enables positions of antenna units of mobile terminals mobile telephones manufactured by any manufacturer to be correctly specified. Therefore normalization and standardization are easy. In this case it is possible to specify a range of a target antenna for example by defining an end point and another end point for a region of the antenna. Furthermore the above method is performed with a minimum data amount. As a result a memory is not consumed. The above data may be stored in the mobile terminal. It is also possible to download the data from the server and stored in an antenna coordinate storage dedicated area in the mobile terminal. In this case the data is inputted to the mobile terminal when the application program for readout is downloaded from the server. As a result in the downloading of the application program the mobile terminal can automatically determine a position of the antenna unit. The above described coordinate information can produce considerable effects.

Furthermore a folding mobile telephone as shown in has an antenna unit on the rear side of a button unit. Therefore based on data antenna position data indicating a position of the antenna unit in the mobile terminal m by i illuminating a horizontal direction and a vertical direction which cross to indicate a position of a pressed button corresponding to the position of the antenna unit or by ii providing another display unit it is possible to display the position of the antenna unit so that the user can match the mark indicating the position of the antenna unit of the mobile telephone to a mark antenna display mark such as a cross mark which indicates a position of the antenna unit of the home appliance. As a result even conventional mobile telephone can display the antenna positions.

The following describes a method of displaying a standby screen on the mobile terminal in synchronized operation according to the present embodiment with reference to .

At Step a on the display unit of the mobile terminal the mobile terminal selects a reservation screen for a target home appliance. When the reservation screen is selected Yes the mobile terminal proceeds to Step b. At Step b the user inputs a reservation start time details of reservation processing and a parameter of a kind of the processing into the mobile terminal. At Step c the mobile terminal determines whether or not an operation time period is varied for example depending on laundry in the case of a washing machine. If the determination at Step c is Yes then the processing proceeds to Step d. At Step d the mobile terminal turns a forced synchronized operation mode ON or OFF. Then the processing proceeds to Step e.

At Step e the mobile terminal determines whether or not the mobile terminal touches a target home appliance. If the determination at Step e is Yes then the processing proceeds to Step f. Otherwise No at Step e then Step e is repeated.

At Step f the mobile terminal transmits an instruction for setting a program or the like to the home appliance. At Step g the home appliance receives the instruction. At Step h to the mobile terminal the home appliance transmits the program data including an estimated time period of processing from a start to an end.

The home appliance proceeds from Step h to Step i. At Step i the home appliance starts the program. At Step j the home appliance determines whether or not the enforced synchronized operation mode is ON or whether or not an operation time period is fixed. If the determination at Step j is Yes then the processing proceeds to Step k. Then synchronized operation is performed between the mobile terminal and the home appliance. At Step m for example if the home appliance such as a washing machine completes its processing in 15 minutes although the processing generally takes 20 minutes at maximum the home appliance is stopped until 20 minutes pass. Thereby the home appliance can be operated completely in synchronization with the mobile terminal.

If the determination at Step j is No then the processing proceeds to Step n. At Step n the home appliance performs operation not always in synchronization with the mobile terminal.

The processing of the mobile terminal proceeds to Step p. At Step p the mobile terminal receives the program from the home appliance. At Step q the mobile terminal starts the program. At Step r the mobile terminal determines whether or not the forced synchronized operation mode is ON or whether or not an operation time period is fixed. If the determination at Step r is Yes then the processing proceeds to Step s. At Step s the mobile terminal displays the same data as operated in the home appliance. At Step t the mobile terminal displays a standby screen as shown at a in and then processing proceeds to Step u. At Step u the mobile terminal displays an icon for indicating a current state of the target home appliance such as an icon or in . For example when an air conditioner home appliance starts a reserved operation the mobile terminal displays an icons for indicating a start time or a remaining time period of the operation as shown in b b or c in . If the user presses one of the icons the mobile terminal changes the screen to a menu screen for a washing machine as shown at for example. Here if the user selects an icon a on the menu screen the mobile terminal displays a reservation screen like a screen . As a result the mobile terminal notifies the user outside home of what kind of reservation is made for the washing machine or the air conditioner.

More specifically in the present embodiment communication is performed when the mobile terminal touches a target home appliance. However even if the mobile terminal is not communicating with home appliances each of the home appliances is forced to operate in synchronization with the mobile terminal according to setting of the application program shared with the mobile terminal. Therefore the user outside home sees a standby screen of the mobile terminal to check current operation states of the home appliances in home and the mobile terminal notifies the user of laundry completion heating start and the like. As a result the user can receive services as if the services were provided via a network.

If the determination at Step r is No then the processing proceeds to Step v. At Step v the server causes the mobile terminal to displays a time period required for processing of each of home appliances. Here for example the mobile terminal displays on the standby screen a minimum required time period a maximum required time period and a completion time of laundry and drying of a washing machine. In the present embodiment even if the mobile terminal displays the standby screen a the application programs for the home appliances are operating. Therefore the mobile terminal displays icons as shown in in and also displays current operation states of the home appliances as shown in in . As a result the user can learn current states of the home appliances without operating the mobile terminal. In the present embodiment an icon of a home appliance that completes its operation is disappeared from the standby screen. Therefore the standby screen is simple to see without unnecessary icons.

Although the communication device according to the present invention has been described with reference to the above embodiments the present invention is not limited to the above. Those skilled in the art will be readily appreciated that various modifications and combinations of the structural elements and functions in the embodiments are possible without materially departing from the novel teachings and advantages of the present invention. Accordingly all such modifications and combinations are intended to be included within the scope of the present invention.

It should be noted that it has been described in the embodiment with reference to that the center of the NFC antenna unit of the mobile terminal is positioned at the rear side of the display unit such as LCD or LED of the mobile terminal. However even if the center of the NFC antenna unit is positioned at the rear side of a part without the display unit a part of concentric circle having the center that is the center of the NFC antenna unit is displayed on the display unit. In this case although the center of the concentric circle is not displayed on the display unit a partial curve line of the concentric circle enables the user to guess the center and match the concentric circle displayed on the mobile terminal to the mark on a target home appliance. As a result the center of the NFC antenna unit of the mobile terminal can touch the appropriate position of the home appliance.

It should also be noted that it has been described in the embodiment with reference to that the camera unit of the mobile terminal is used. Here it is also possible to illuminate a LED illumination provided in the mobile terminal when the camera unit is activate when the NFC reader is activated when a change of electric field strength is occurred due to the mobile terminal touching the home appliance or when the acceleration sensor or the like detects that the mobile terminal touches the home appliance. The mobile terminal is generally provided with a white LED for a camera flash. Therefore in the case of using the camera unit the LED illumination can solve the problem that the mark on the home appliance becomes dark under the mobile terminal and therefore not displayed on the mobile terminal. In this case a lens of the camera unit is positioned at a range of the NFC antenna unit of the mobile terminal. Therefore the camera unit can take an image of the antenna unit of the home appliance without adjusting the image. In this case or in the case where the camera lens is out of alignment the camera unit recognizes the antenna arrangement mark on the home appliance by recognizing a pattern of the image taken by the camera unit. Therefore the mobile terminal can detect a displacement between the mark on the mobile terminal and the mark on the home appliance. If the mobile terminal displays arrows right left down and up arrows on the screen the user can adjust the antenna positions correctly. In this case the adjustment becomes easy if a matching ratio is indicated by sound. As a point is far from the center louder or higher warning sound is emitted to notify the user of the displacement.

It should also be noted that it has been described in the embodiment with reference to that the pressing button unit of the mobile terminal m displays illumination cross lines for guiding to the antenna position. However the method is not familiar to the user using the method at the first time. Therefore the mobile terminal m displays a an overall image of the mobile terminal on the screen and also displays b an image on which the illumination lines on the pressing button unit are to match the antenna mark of the home appliance. As a result even the user as a beginner can understand that the user needs to match the illumination lines on the pressing button part to the cross mark of the antenna unit of the home appliance. Therefore operations become easy.

In the embodiment in general the guidance for matching the antenna units is displayed on the screen of the mobile terminal. If the NFC unit of the mobile terminal serves as a reader writer the antenna guidance is displayed. On the other hand if the NFC unit of the mobile terminal serves as an IC tag the antenna guidance is not displayed. In some situations the antenna guidance is not illuminated. As a result it is possible to eliminate unnecessary display element and unnecessary illuminating of the display unit thereby saving energy. If the NFC unit of the mobile terminal serves as an IC tag the antenna of the reader writer is large and guidance of the antenna is not necessary. In addition since the IC tag is used only to provide data it is not always necessary to illuminate the display unit.

It should also be noted that the mobile terminal may have an illumination display unit such as a LED on a part that corresponds to a position of the center of the antenna unit and on the case surface opposite to the NFC antenna side. As a result when the NFC antenna unit is to face the target it is possible to clearly notify the user of the center of the NFC antenna unit.

The communication device according to the present invention is suitable as a communication device which can easily serve as an extended user interface by using RF ID and various sensors in the communication device. Examples of the communication device are a mobile telephone a Smartphone and the like. Examples of the extended user interface are a mufti purpose remote controller of a target home appliance an interface for downloading a content onto a target home appliance and the like. Examples of the sensors are a GPS sensor a motion sensor and the like. More specifically the communication device according to the present invention has a motion sensor that detects a direction of the communication device. Therefore the communication device can easily serve as an extended user interface of a target home appliance.

