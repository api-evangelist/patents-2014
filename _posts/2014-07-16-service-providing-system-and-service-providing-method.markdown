---

title: Service providing system and service providing method
abstract: A service providing system that provides a service to a service using apparatus includes a management information storage unit that stores management information associating service identification information of the service, user identification information of a user using the service, and device identification information of the service using apparatus; an authentication unit that authenticates user authentication information for user authentication and/or device authentication information for device authentication acquired from the service using apparatus; a service identification unit that identifies the service associated with the authentication information based on the management information and the authentication information that has been authenticated; and an execution unit that executes a process according to a use request for the identified service acquired from the service using apparatus. The execution unit determines a content of a predetermined output request acquired from the service using apparatus and controls output of data according to the output request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09164710&OS=09164710&RS=09164710
owner: RICOH COMPANY, LTD.
number: 09164710
owner_city: Tokyo
owner_country: JP
publication_date: 20140716
---
Image forming apparatuses such as printers having test print functions for preventing wasteful printing upon printing an image are known. According to such test print function when multiple copies of a document are to be printed for example test printing of one copy is executed e.g. see Japanese Laid Open Patent Publication No. 2002 254754 .

Also in printing an image at an image forming apparatus such as a printer a technique is known for simulating a result of printing the image on a print medium such as paper and displaying a preview of the print result before printing e.g. see Japanese Laid Open Patent Publication No. 2010 278495 .

According to one embodiment of the present invention a service providing system is provided that includes one or more information processing apparatuses and is configured to provide a service to a service using apparatus connected to the service providing system via a network. The service providing system includes a management information storage unit configured to store management information including an association between service identification information of the service user identification information of a user using the service and device identification information of the service using apparatus an authentication unit configured to execute an authentication process using authentication information acquired from the service using apparatus the authentication information including at least one of user authentication information used for user authentication and device authentication information used for device authentication a service identification unit configured to identify the service associated with the authentication information based on the management information and the authentication information that has been authenticated by the authentication unit and an execution unit configured to execute a process according to a use request for the service identified by the service identification unit upon acquiring the use request for the service from the service using apparatus. The execution unit determines a content of a predetermined output request acquired from the service using apparatus and controls output of data according to the output request.

In the following embodiments of the present invention are described with reference to the accompanying drawings.

The private network N in the office is arranged behind a firewall FW. The firewall FW is configured to block unauthorized access from an unauthorized source. An access control apparatus is arranged at the network N. The access control apparatus is configured to restrict access to the network N.

The network N in the office is a private network arranged at the inner side of the firewall FW. A terminal apparatus an image forming apparatus an authentication apparatus and some other apparatus may be connected to the network N.

The terminal apparatus may be implemented by an information processing apparatus computer system having a general OS operating system installed therein. The terminal apparatus may be a device operable by a user such as a PC personal computer a tablet PC a notebook PC a smartphone or a mobile phone for example.

The image forming apparatus is a device having an image forming function such as a MFP multifunction peripheral a copier a scanner or a laser printer. The authentication apparatus may be implemented by an information processing apparatus computer system having a general OS installed therein. The authentication apparatus is configured to provide a user authentication function. The other apparatus may be a device such as a projector or an electronic blackboard for example.

Note that the terminal apparatus the image forming apparatus the authentication apparatus and the other apparatus have mechanisms for establishing wireless or wired communication. Also note that although illustrates an example where one of each of the terminal apparatus the image forming apparatus the authentication apparatus and the other apparatus are provided there may be a plurality of each of these devices.

The service providing system is a system configured by a service provider that provides a cloud service via the network N. Note that although the present embodiment relates to an application for a cloud service the present invention is not limited to the present embodiment but may also be applied to any service that can be provided via the network N such as a web service or a service provided by an ASP application service provider for example.

The network N is connected to the network N via the access control apparatus . The access control apparatus a print service providing apparatus a delivery service providing apparatus a portal service providing apparatus an authentication apparatus a data process control apparatus a data process execution control apparatus and a data processing apparatus are connected to the network N.

The print service providing apparatus the delivery service providing apparatus the portal service providing apparatus the authentication apparatus the data process control apparatus the data process execution control apparatus and the data processing apparatus are described in detail below.

The access control apparatus and the other apparatuses such as the print service providing apparatus within the service providing system may be implemented by at least one information processing apparatus. That is the apparatuses within the service providing system may be implemented by one information processing apparatus or multiple information processing apparatuses.

Note that the apparatuses within the service providing system may be integrated into a single computer for example. In other words the number of information processing apparatuses configuring the service providing system is not limited to a particular number.

Also a part or all of the apparatuses of the service providing system may be implemented in a private network such as the network N in the office. The illustrated information processing system of the present embodiment is merely one example. That is the scope of the present invention is not limited by whether the firewall FW is implemented between the service providing system and apparatuses of the network N in the office that are used to gain access to the service providing system .

The apparatuses of the service providing system may be roughly categorized into those implementing service providing functions for providing various services and those implementing platform functions to be commonly used upon providing the various services.

Note that the print service providing apparatus the delivery service providing apparatus and the portal service providing apparatus are examples of apparatuses implementing service providing functions for providing various services. The authentication apparatus the data process control apparatus the data process execution control apparatus and the data processing apparatus are examples of apparatuses implementing platform functions to be commonly used upon providing the various services.

Note that the above described categorization of the apparatuses of the service providing system is for illustrative purposes only. That is the service providing system does not necessarily have to be configured based on such categorization.

The network N corresponding to the Internet for example may have the terminal apparatus a mail server and an online storage connected thereto. As illustrated in the terminal apparatus may be connected to a network other than the private network N in the office. The information processing system illustrated in includes the terminal apparatus that is connected to the private network N in the office and the terminal apparatus that is connected to the network N such as the Internet.

The mail server performs processes related to email such as transmission and reception of a user email. The online storage performs processes related to rental services of a storage area of a storage. The mail server and the online storage may be implemented by at least one information processing apparatus.

The terminal apparatus and the authentication apparatus illustrated in may be implemented by a computer system having a hardware configuration as illustrated in for example. Similarly the apparatuses within the service providing system such as the access control apparatus and the print service providing apparatus as illustrated in may be implemented by the computer system having the configuration as illustrated in for example. Similarly the mail server and the online storage as illustrated in may be implemented by the computer system having the configuration as illustrated in for example. is a block diagram illustrating an exemplary configuration of a computer system according to an embodiment of the present invention.

The computer system illustrated in includes an input device a display device a RAM Random Access Memory a ROM Read Only Memory a HDD Hard Disk Drive a CPU Central Processing Unit a communication I F and an external I F which are interconnected by a bus B.

The input device may include a keyboard a mouse and a touch panel for example to be used by a user for inputting operation signals. The display device may include a display for displaying processing results obtained by the computer system for example.

The RAM is a volatile semiconductor memory storage device for temporarily storing programs and data. The ROM is a nonvolatile semiconductor memory storage device that can hold programs and data even after the power is turned off. The ROM stores programs and data such as BIOS Basic Input Output System that is executed when the computer system is activated OS settings and network settings.

The HDD is a nonvolatile storage device storing programs and data. Examples of the stored programs and data include an OS operating system corresponding to basic software for controlling the entire computer system and application software for providing various functions in the OS.

The CPU is a processor that controls and executes overall operations and functions of the computer system by loading programs and data from storage devices such as the ROM and the HDD into the RAM and executing relevant processes for example.

The communication I F is an interface for connecting the computer system to the networks N through N. In this way the computer system may establish data communication via the communication I F .

The external I F is an interface between the computer system and an external device. An example of the external device is a recording medium A. In this way the computer system can read data from and or write data in the recording medium A via the external I F .

Examples of the recording medium A include a flexible disk a CD compact disk a DVD digital versatile disk an SD memory card and a USB memory universal serial bus memory .

The computer system having the above described hardware configuration may perform various processes including the processes described below.

In the example of the service applications include a portal service application a print service application and a delivery service application for example. The service applications are applications having functions for providing various services.

For example the portal service application may be implemented in the portal service providing apparatus illustrated in . The print service application may be implemented in the print service providing apparatus . The delivery service application may be implemented in the delivery service providing apparatus .

The portal service application is configured to provide portal sites for enabling the user to use various services such as a print service or a delivery service. Also as described below the portal service application is configured to cooperate with the platform to execute a tenant registration process a service registration process and registration processes of various types of management information for example.

The print service application is configured to provide a print service for implementing printing by the image forming apparatus by storing print data and transmitting the print data to the image forming apparatus for example.

The delivery service application is configured to provide a delivery service for delivering to the online storage of for example image data that has been processed and transmitted from a device such as the image forming apparatus .

Note that the service applications are not limited to the examples illustrated in . In some embodiments the service applications may include an application providing a service for transmitting stored image data projection data to the other apparatus such as a projector. Also the service applications may include an application providing a service for transmitting stored image data projection data to the other apparatus such as an electronic blackboard. As described above the service applications include an application providing some type of service to a device used by a user such as the image forming apparatus .

The platform API is an interface that enables the service applications to use the platform . In other words the platform API is a predefined interface that enables the platform to receive requests from the service applications and may be implemented by functions or classes. When the service providing system is implemented by or distributed to multiple information processing apparatuses a Web API that is accessible via a network may be used as the platform API .

In the example of the platform includes a communication unit an access control unit a mail transmission unit a setting registration unit an authorization setting process unit a license authentication unit a user authentication unit a user device authentication unit an in house cooperation authentication unit an external cooperation authentication unit a data process control unit one or more process queues one or more data process request units and one or more data processing units .

The communication unit is configured to establish communication with other devices such as the image forming apparatus and may be implemented in the access control apparatus of for example. The access control unit is configured to perform access control according to various types of access requests made from devices such as the image forming apparatus to the service providing system . The access control unit may be implemented in the access control apparatus for example.

The mail transmission unit is configured to transmit mail and may be implemented in the authentication apparatus of for example. The setting registration unit is configured to set up and register various types of management data to be stored in the management data storage unit and may be implemented in the authentication apparatus for example. The authorization setting unit is configured to execute a process of setting up authorization with respect to an external service such as the online storage and may be implemented in the authentication apparatus for example.

The license authentication unit is configured to perform authentication related to a license based on license information and tenant information described below to be stored by the management data storage unit . The license authentication unit may be implemented in the authentication apparatus for example. The user authentication unit is configured to perform user authentication based on a login request from a device not requiring device authentication such as the terminal apparatus . The user authentication unit may be implemented in the authentication apparatus for example.

The user device authentication unit is configured to perform user authentication based on a login request from a device requiring device authentication such as the image forming apparatus . The user device authentication unit may be implemented in the authentication apparatus for example.

The in house cooperation authentication unit is configured to perform user authentication in a case where the user using the image forming apparatus for example performs authentication by the authentication apparatus of and attempts to login using a user ID acquired from the authentication apparatus . The in house cooperation authentication unit may be implemented in the authentication apparatus for example. The external cooperation authentication unit is configured to perform an authentication process for logging into the online storage of and may be implemented in the authentication apparatus for example.

The data process control unit is configured to control a data process that is executed based on a request from the service applications and may be implemented in the data process control apparatus for example. The one or more process queues are message queues corresponding to one or more data process types specific processes . Request messages related to data processes from the data process control unit are registered in the process queues . The process queues may be implemented in the data process control apparatus for example.

The one or more data process request units are configured to monitor the process queues assigned thereto and receive request messages related to data processes from their corresponding process queues . The data process request units are configured to send requests to the data processing units to execute data processes corresponding to the received messages. The data process request units may be implemented in the data process execution apparatus for example.

The one or more data processing units are configured to execute data processes according to requests from the data process request units and may be implemented in the data processing apparatus for example. Examples of data processes that may be executed by the data processing units include a division process for dividing up a request from the service applications a data format conversion process for converting a data format an OCR optical character recognition process for executing an ORC process. Further the data processing units may execute other processes such as an uploading process for uploading data in the online storage for example.

Note that depending on the data process type the data process request units and the data processing units may be implemented in the data process execution control apparatus for example.

The management data storage unit includes for example a management information storage unit a data process information storage unit and a data storage unit .

The management information storage unit stores management information such as license information tenant information user information and device information for example. The management information storage unit may be implemented in the authentication apparatus for example. The data process information storage unit stores information related to requested data processes. The data process information storage unit may be implemented in the data process control apparatus for example. The data storage unit stores data such as application data print data and other data for example. The data storage unit may be implemented in the data process control apparatus for example.

The management data stored in the management data storage unit may include the following information for example. is a table illustrating an exemplary data configuration of license information. The license information includes as data items license type ID registration code and registration status . The license type is information indicating the type of license. Exemplary types of licenses include tenant print service and delivery service licenses. The ID is information representing the ID of licenses that may be used for license authentication for example. The registration code is information used upon registering a tenant. The registration status is information indicating whether license registration ID registration by a user has been completed i.e. registered or not registered .

The name corresponds to a name designated by the user upon performing the tenant registration. For example a company name or an organization name may be set up as the name in the tenant information. The service ID corresponds to an ID of license information of which the license type is indicated as print service delivery service or some other service. The service ID is registered when the user performs a service registration after completing the tenant registration.

The service type is information indicating the license type service type corresponding to the service ID. The valid term indicates the term of validity of the service ID. Note that the term of validity of the service ID is managed based on the time point at which the service ID is registered with a particular apparatus.

The external service is information indicating an external service to be used in cooperation with the service providing system . The online storage of may be an exemplary external service that may be used in cooperation with the service providing system . The address information indicates the email address of the administrator registered in connection with the tenant registration. The region information is information indicating the country region in which the corresponding service is to be used. Note that the online storage is an example of an external service. Examples of information items that may be used in connection with the use of the external service include an account a password an authorization token and scope which are described below.

Note that authorization refers to setting up the scope of use authority of services such as the types of services a user is authorized to use and resources to which the user is permitted to access for example. For example authorization may be set up using API authorization standard technology such as OAuth. In this case from the perspective of using an external service such as the online storage from the service providing system the external service assumes the role of the OAuth service provider and the service providing system assumes the role of the OAuth consumer.

The user information manages information of users with respect to each tenant ID. The user ID and password for login correspond to authentication information to be used for user authentication when the user logs into the service providing system . The user ID for login may be a user name or some other information that may be used for identifying the user when the user logs into the service providing system . The user ID for in house authentication corresponds to user identification information for identifying the user in the authentication apparatus of the network N in the office. The user ID for in house authentication corresponds to authentication information to be used for user authentication in a case where the user attempts to login using user identification information acquired from the authentication apparatus . The user ID for in house authentication may be any information that may be used to identify a user within the authentication apparatus of the network N in the office such as a card ID of an IC card or a terminal ID of a terminal apparatus carried by a user for example.

The account and password for an online storage correspond to authentication information to be used upon logging into the online storage . The authorization token corresponds to information for using the online storage within a specific authority range. The scope corresponds to information specifying the scope of use set up by an authorization process.

The account for online storage may be a user ID a user name an address for online storage or any other information that may be used as authentication information for authenticating the user when the user logs into the online storage . The address information corresponds to an email address of the user.

The device ID corresponds to information identifying a device that is used for device authentication. For example a device serial number may be used as the device ID. The service ID and service type of the device information may be identical to the service ID and service type of the tenant information and are registered when a user performs service ID registration with respect to a specific device.

The start date corresponds to information indicating the date on which the service ID registration has been performed. The end date corresponds to information indicating the date on which the validity of the registered service ID is to expire. The device registered with the device information can use the service identified by the registered service ID from the start date of the service ID to the end date of the service ID.

Note that depending on the service type and license type some services may be valid for an unlimited duration have no substantial restrictions on the term of validity for example. Also it is assumed below that a device that does not have its device information registered may still be able to use functions provided by the service providing system except for the services functions that require device authentication before they can be used.

Note that in the present embodiment the terminal is illustrated as an example of a device that does not need to have its device information registered and the image forming apparatus is illustrated as an example of a device that needs to have its device information registered.

Examples of functions that may be used at the terminal apparatus include setting and registration of management data submission of print data and deletion. Examples of functions that may be used at the image forming apparatus include acquisition of print data acquisition and transmission of delivery data.

Note that functions that require device authentication before they can be used and functions that can be used without device authentication may be arbitrarily determined by the service provider providing the functions. That is the service provider may provide services that do not require device authentication.

The external service information includes as data items external service ID service name client ID client secret product name scope authorization destination URL and redirect destination URL for example. The external service ID corresponds to information identifying an external service.

The service name corresponds to the name of an external service. The client ID corresponds to information issued by an external service for identifying the service providing system . The client secret corresponds to secret information for ensuring the authenticity of the client ID that may be handled like a password for example. The product name corresponds to information for identifying the service applications . The scope corresponds to information specifying the scope of use for an external service. The authorization destination URL represents a URL of an authorization system of an external service e.g. URL of an authorization server of the external service . The redirect destination URL represents a URL of the service providing system to which the external service is redirected e.g. URL of a function as an authorization client of the authorization setting process unit .

As can be appreciated from the above the tenant ID is associated with services provided by the service providing system users using the services and devices that use the services. The tenant ID corresponds to information for managing users services and devices within the service providing system . Also the tenant ID corresponds to information for identifying a target target identification information such as a specific service to be used a specific user that is to use the service and a specific device to which the service is to be provided for example.

In the following process operations of the information processing system according to the present embodiment are described.

Exemplary methods of acquiring the tenant ID and registration code include acquiring the information directly from the service provider or accessing a dedicated site operated by the service provider from the terminal apparatus of the user.

In step S the user operates the input device of the terminal apparatus so that the terminal apparatus may access a portal site of the service providing system . Based on the user operation the terminal apparatus accesses the portal service of the service providing system .

Because the terminal apparatus is accessing the portal site the access control apparatus of the service providing system enables access from the terminal apparatus to the portal service application .

The portal service application prompts the display device of the terminal apparatus to display a top screen. The user may operate the input device of the terminal apparatus and select to make a login request or a new tenant registration request. In the following descriptions it is assumed that the new tenant registration request has been selected by the user. Note that if the user is registered in the user information as an administrator or other user of the management information storage unit the user may also select to make a login request by inputting a tenant ID a user ID and a password for example.

When the new tenant registration request is made in step S the portal service application of the service providing system prompts the display device of the terminal apparatus to display an input screen for enabling temporary registration of a tenant ID. The user operates the input device of the terminal apparatus to enter information for the tenant ID temporary registration and issues a temporary registration request. Based on the user operation the terminal apparatus sends the temporary registration request to the portal site of the service providing system .

Note that information that needs to be entered to complete the tenant ID temporary registration may include information on the country region where services are to be used region information and information indicating consent to the terms of service corresponding to the country region where the services are to be used for example. The information to be entered for the tenant ID temporary registration may also include information items such as the tenant ID the registration code an email address and a language for example.

The service providing system stores terms of service information corresponding to the country region where the services may to be used. The portal service application of the service providing system controls the display device of the terminal apparatus to display the terms of service corresponding to the country region entered by the user in connection with the tenant ID temporary registration and prompts the user to select whether the user agrees with the terms of service.

When the temporary registration request is issued from the terminal apparatus of the user the portal service application of the service providing system issues a request to the license authentication unit to perform a confirmation process for confirming the validity of the tenant ID and the registration code included in the information entered in connection with the tenant ID temporary registration. Upon receiving such a request the license authentication unit executes a license authentication process and determines whether the tenant ID and registration code designated in the request for the confirmation process are stored in the license information of stored by the management information storage unit .

If the tenant ID and registration code designated in the request for the confirmation process are stored in the license information the license authentication unit determines whether the registration status associated with the relevant tenant ID and registration code is not registered .

If the registration status is not registered the license authentication unit determines that the tenant ID and registration code designated in the request for the confirmation process are valid information and thereby authenticates the tenant ID license . The license authentication unit notifies the portal service application of the license authentication result.

In the case where the tenant ID and the registration code are valid information the portal service application issues a request to the setting registration unit to register the tenant ID the email address and the region information included in the information entered in connection with the tenant ID temporary registration. In turn the setting registration unit registers the tenant ID the email address and the region information in the tenant information of the management information storage unit according to the request from the portal service application .

Once the above information is registered by the setting registration unit in step S the portal service application generates a registration URL corresponding to an access destination for displaying a screen for proper registration and generates an email indicating the registration URL. The portal service application then issues a request to the mail transmission unit to send the generated email. In turn the mail transmission unit sends the email to the email address included in the information entered in connection with the tenant ID temporary registration.

When the email is sent by the mail transmission unit the portal service application prompts the display device of the terminal apparatus to display a notification screen indicating that the email has been sent. Note that the registration URL may be managed based on its term of validity e.g. one hour from the time it is generated for example. Also for security purposes at least one of the tenant ID and the registration code may be omitted in the email sent from the mail transmission unit .

Next the user operates the input device of the terminal apparatus to access the registration URL indicated in the email received from the mail transmission unit . Based on the user operation the terminal apparatus accesses the registration URL. Note that the terminal apparatus that accesses the registration URL does not necessarily have to be the same terminal apparatus used to request for the temporary registration. The access control unit of the service providing system prompts the terminal apparatus to access the portal service application .

The portal service application verifies whether the access to the registration URL is valid i.e. whether access is made to the generated registration URL and whether access is made within the term of validity . If the access is valid the portal service application prompts the display device of the terminal apparatus to display a registration screen.

The user operates the input device of the terminal apparatus enters information for completing proper tenant ID registration and issues a registration request. Note that the information to be entered in the registration screen may include tenant information such as the tenant ID name and registration code and user information such as a user ID and password for login and address information for example.

Also note that at least one of the tenant ID and registration code already entered by the user during the temporary registration may be pre entered and displayed on the registration screen for example. However as described for security purposes at least one of the tenant ID and the registration code entered by the user are not indicated in the email notifying the registration URL.

When the registration request is issued from the terminal apparatus the portal service application issues a request to the license authentication unit to perform a license validation process registration process based on the tenant ID and the registration code entered in the registration screen.

Upon receiving such a request the license authentication unit executes a license authentication process and determines whether the tenant ID and the registration code entered in the registration screen are stored in the license information managed by the management information storage unit . If the tenant ID and the registration code entered in the registration screen are stored in the license information and the registration status stored in association with the above tenant ID and registration code is not registered the license authentication unit determines that the entered tenant ID and registration code are valid information.

Upon determining the validity of the entered tenant ID and registration code the license authentication unit issues a request to the setting registration unit to change the license information. In turn the setting registration unit changes the value of the registration status associated with the validated tenant ID and registration code in the license information stored by the management information storage unit to registered .

After the license validation process is completed the portal service application issues a request to the setting registration unit to register the tenant information and the user information entered in the registration screen at the terminal apparatus by the user. In turn the setting registration unit registers the tenant name entered as part of the tenant information in the tenant information stored by the management information storage unit . Also the setting registration unit registers information items such as the tenant ID the user ID and password for login and the address information in the user information stored by the management information storage unit .

After setting and registration of various items of information by the setting registration unit are completed the portal service application prompts the display device of the terminal apparatus to display a tenant registration completion screen. Also the portal service application generates an email for notifying the completion of the tenant registration and issues a request to the mail transmission unit to send the generated email. In turn the mail transmission unit sends the email notifying the completion of the tenant registration to the email address entered at the terminal apparatus in connection with the tenant ID temporary registration address information registered in the tenant information .

For example the user may check the tenant registration completion screen displayed by the display device of the terminal apparatus . By completing registration of the tenant ID user ID and password from the next time the user may make a login request from the top screen of the portal site. By logging in from the top screen of the portal site the user may perform registration processes for registering tenant information user information and device information associated with the tenant ID.

In step S the user such an administrator operates the input device of the terminal apparatus to enter the tenant ID user ID and password from the top screen of the portal site and makes a login request.

Upon receiving the login request the portal service application issues a request to the user authentication unit to perform user authentication. The user authentication unit determines whether the combination of the tenant ID user ID and password received from the terminal apparatus is stored in the user information managed by the management information storage unit .

If the combination of the tenant ID user ID and password received from the terminal apparatus is stored in the user information the user authentication unit authenticates the user that has made the login request. Once the user is authenticated by the user authentication unit the portal service application allows the user to login.

The user that has logged into the portal service application is able to register the service ID of a service the user wishes to use. The portal service application prompts the display device of the terminal apparatus to display a service registration screen for enabling the user to register a service ID. The user operates the input device of the terminal apparatus enters a service ID from the service registration screen displayed by the display device of the terminal apparatus and issues a service registration request. Based on the user operation the terminal apparatus issues the service registration request to the portal service application .

When the service registration request is issued from the terminal apparatus the portal service application refers to the license information stored by the management information storage unit and selects an ID matching the service ID entered by the user from the service registration screen. The portal service application acquires the license type service type associated with the selected ID.

Also the portal service application refers to the tenant information stored by the management information storage unit and acquires region information associated with the tenant ID of the logged in user. The portal service application prompts the display device of the terminal apparatus to display the terms of service corresponding to the acquired license type and region information and prompts the user to select whether the user agrees with the terms of service.

Thus the service providing system stores terms of service information corresponding to each service type license type and each country region where the services may be used. In this way the portal service application may control the display of the terms of service according to the region information entered by the user in connection with the tenant ID temporary registration and the service type of the service designated in the service registration request and prompt the user to select whether the user agrees to the relevant terms of service.

The user operates the input device of the terminal apparatus to select to agree to the terms of service. If the user selects to agree to the terms of service the portal service application issues a request to the license authentication unit to perform a service registration process based on the tenant ID of the logged in user and the service ID entered by the logged in user from the service registration screen.

The license authentication unit determines whether the service ID entered from the service registration screen is stored as an ID in the license information managed by the management information storage unit . If the service ID entered from the service registration screen is stored as an ID in the license information the license authentication unit determines that the entered service ID is valid authenticates the service ID .

Upon determining the validity of the service ID the license authentication unit issues a request to the setting registration unit to register the service ID. In turn the setting registration unit registers the service ID and service type in association with the tenant ID of the logged in user in the tenant information managed by the management information storage unit .

In step S the user such as an administrator performs a device registration for a service ID. The user operates the input device of the terminal apparatus to prompt the display device of the terminal apparatus to display a device registration screen. The user operates the input device of the terminal apparatus to enter a service ID and a device ID of the device that may be able to use the service by the service ID and issue a service ID device registration request.

When the service ID device registration request is issued from the terminal apparatus the portal service application issues a request to the license authentication unit to perform a service ID device registration process based on the tenant ID of the logged in user and the service ID and device ID entered from the device registration screen.

The license authentication unit determines whether the combination of the tenant ID of the logged in user and the service ID entered from the service registration screen is stored in the tenant information managed by the management information storage unit .

If the combination of the tenant ID of the logged in user and the service ID entered from the device registration screen is stored in the tenant information the license authentication unit refers to the license information stored by the management information storage unit . The license authentication unit determines whether the registration status associated with the service ID entered from the device registration screen is not registered .

If the registration status is not registered the license authentication unit issues a request to the setting registration unit to perform device registration for the service ID. Note that a service ID with the registration status not registered corresponds to a service ID for which a device registration has not yet been performed. The setting registration unit registers the tenant ID of the logged in user and the service ID and device ID entered from the device registration screen in the device information stored by the management information storage unit . Also the setting registration unit refers to the tenant information stored by the management information storage unit and acquires the service type and valid term associated with the tenant ID and service ID. The setting registration unit registers the service type the start date and the end data in the device information stored by the management information storage unit based on the acquired service type and valid term information.

Note that the execution date of the service ID device registration is stored as the start date. The date of expiry of the service ID calculated based on the valid term e.g. 1 year acquired from the tenant information and the start date is stored as the end date. However in some embodiments the start date may be designated in the service registration request of step S for example. In the case where the start date can be designated the date designated as the start date in the service registration request is stored as the start date of the device information. When the service ID device registration is completed the setting registration unit changes the registration status associated with the service ID for which the device registration was performed to registered in the license information stored by the management information storage unit .

By implementing the process steps from tenant registration to device registration as described above the user such as an administrator may perform tenant registration service ID registration and service ID device registration by accessing the service providing system from the terminal apparatus . Accordingly the user may easily complete necessary procedures for receiving services from a service provider. Also the service providing system may manage information on the services to be provided the users that are to use the services and the devices that are to use the services with respect to each tenant ID that has been subject to a license validation process.

As illustrated in A when performing user authentication from the terminal apparatus the user enters a tenant ID a user ID and a password as login information from a top screen of a portal site for example. In step S the terminal apparatus receives the login information entered by the user.

In step S the terminal apparatus issues a login request to the service providing system using the login information entered by the user. The access control unit of the service providing system issues a request to the user authentication unit to perform user authentication.

In step S the user authentication unit determines whether the login information received from the terminal apparatus is included in the user information stored by the management information storage unit . If the login information received from the terminal apparatus is included in the user information stored by the management information storage unit the user authentication unit determines that the user authentication has been successful. If the login information received from the terminal apparatus is not included in the user information stored by the management information storage unit the user authentication unit determines that the user authentication has been unsuccessful.

In the case where the user authentication has been successful the access control unit allows login from the terminal apparatus to the service providing system login for using a service . In step S the access control unit sends a login response based on the result of the user authentication by the user authentication unit to the terminal apparatus .

Referring to B and C when performing user authentication for logging into the service providing system from the image forming apparatus a user ID and a password for login may be used or a user ID for in house authentication may be used. The image forming apparatus may store settings for using the user ID and password for login and settings for using the user ID for in house authentication. The settings for user authentication may be changed as desired. Also the image forming apparatus has a tenant ID and a device ID stored in its own storage area.

In the case where the user ID and password for login are used the image forming apparatus performs user device authentication as illustrated in B in order to log into the service providing system .

In step S the image forming apparatus displays an input screen for prompting the user to enter a user ID and a password for login. The user enters a user ID and a password for login from the input screen displayed at the image forming apparatus . In turn the image forming apparatus receives the user ID and password for login entered by the user.

In step S the image forming apparatus sends the user ID and password for login entered by the user and the tenant ID and the device ID stored in its own storage area to the service providing system as login information and issues a login request. The access control unit of the service providing system issues a request to the user device authentication unit to perform user device authentication.

In step S the user device authentication unit determines whether the combination of the tenant ID and the device ID included in the login information received from the image forming apparatus is included in the device information stored by the management information storage unit . If the combination of the tenant ID and the device ID included in the login information received from the image forming apparatus is included in the device information stored by the management information storage unit the user device authentication unit determines that the device authentication has been successful. If the combination of the tenant ID and the device ID included in the login information received from the image forming apparatus is not included in the device information stored by the management information storage unit the user device authentication unit determines that the device authentication has been unsuccessful.

Further the user device authentication unit determines whether the combination of the user ID and password for login included in the login information received from the image forming apparatus is included in the user information stored by the management information storage unit . If the combination of the user ID and password for login included in the login information received from the image forming apparatus is included in the user information stored by the management information storage unit the user device authentication unit determines that the user authentication has been successful. If the combination of the user ID and password for login included in the login information received from the image forming apparatus is not included in the user information stored by the management information storage unit the user device authentication unit determines that the user authentication has been unsuccessful.

When the device authentication and the user authentication are successful the access control unit allows login from the image forming apparatus to the service providing system login for using service . In step S the access control unit sends a login response to the image forming apparatus based on the results of the device authentication and the user authentication by the user device authentication unit .

In the case of using the user ID for in house authentication the image forming apparatus performs in house cooperation authentication as illustrated in C in order to log into the service providing system . First the user performs user authentication at the image forming apparatus . The user authentication performed at the image forming apparatus may correspond to user authentication for using the image forming apparatus or user authentication for using a certain function of the image forming apparatus . In the following an exemplary case is described in which the authentication apparatus performs user authentication using a card ID stored in a card such as an IC card carried by the user.

In step S the user prompts a card reader not shown connected to the image forming apparatus to read the card ID and performs user authentication. In step S the image forming apparatus sends the card ID read by the card reader to the authentication apparatus and performs user authentication.

In step S the authentication apparatus performs authentication determination using the card ID received from the image forming apparatus . The authentication apparatus stores in its storage area user authentication information associating a card ID with a corresponding user ID. The authentication apparatus refers to the user authentication information associating a card ID with a user ID to determine whether a user ID associated with the card ID received from the image forming apparatus may be identified.

In the case where a user ID associated with the card ID could be identified the authentication apparatus determines that the user authentication has been successful. In step S the authentication apparatus sends the authentication result successful authentication result together with the identified user ID to the image forming apparatus .

Next the user may make a login request by selecting login to the service providing system from a display screen of the image forming apparatus for example. In step S the user makes a login request to log into the service providing system from the image forming apparatus .

When the login request from the user to the service providing system is made the image forming apparatus sends the identified user ID and the tenant ID and device ID stored in its own storage area as login information to the service providing system and issues a login request. The access control unit of the service providing system issues a request to the in house cooperation authentication unit to perform in house cooperation authentication.

In step S the in house cooperation authentication unit determines whether the combination of the tenant ID and device ID included in the login information received from the image forming apparatus is included in the device information stored by the management information storage unit .

If the combination of the tenant ID and device ID included in the login information received from the image forming apparatus is included in the device information the in house cooperation authentication unit determines that the device authentication has been successful. If the combination of the tenant ID and device ID included in the login information received from the image forming apparatus is not included in the device information the in house cooperation authentication unit determines that the device authentication has been unsuccessful.

Further the in house cooperation authentication unit determines whether the combination of the tenant ID and the user ID for in house authentication included in the login information received from the image forming apparatus is included in the user information stored by the management information storage unit . If the combination of the tenant ID and the user ID for in house authentication included in the login information received from the image forming apparatus is included in the user information stored by the management information storage unit the in house cooperation authentication unit determines that the device authentication has been successful.

If the combination of the tenant ID and the user ID for in house authentication included in the login information received from the image forming apparatus is not included in the user information stored by the management information storage unit the in house cooperation authentication unit determines that the device authentication has been unsuccessful.

When the device authentication and the user authentication are successful the access control unit allows login from the image forming apparatus to the service providing system login for using service . In step S the access control unit sends a login response to the image forming apparatus based on the results of the device authentication and the user authentication by the in house cooperation authentication unit .

Note that in the case where the device authentication by the in house cooperation authentication unit has been successful but the user authentication has been unsuccessful the service providing system may prompt the image forming apparatus to display an input screen for prompting the user to enter a user ID and password for login for example.

In this case the user may enter a user ID and a password for login from the input screen and make a login request once more. The image forming apparatus may send the user ID and password for login entered by the user and the tenant ID and device ID stored in its own storage area as login information to the user device authentication unit of the service providing system and issue login request.

The user device authentication unit determines whether the combination of the tenant ID and the user ID and password for login received from the image forming apparatus are included in the user information stored by the management information storage unit .

If the combination of the tenant ID and the user ID and password for login received from the image forming apparatus are included in the user information the user device authentication unit determines that the user authentication has been successful. In turn the access control unit allows login from the image forming apparatus to the service providing system .

Further the setting registration unit registers the user ID for in house authentication received from the image forming apparatus in association with the tenant ID and the user ID and password for login received from the image forming apparatus in the user information stored by the management information storage unit . By registering the user ID for in house authentication received from the image forming apparatus in association with the tenant ID and the user ID and password for login received from the image forming apparatus as described above from the next time the user may be able to use the user ID for in house authentication to login.

In the service providing system the data process control unit the process queues the data process request units and the data processing units may execute various data processes requested by a process request unit of the service applications in the following manner.

Also the process request unit transmits a data process request referred to as request hereinafter to the data process control unit of the platform . The request to be transmitted includes the specific process process type of the data process and storage destination information e.g. URL for the processing data.

The data process control unit analyzes the request received from the process request unit and registers a message in the process queue message queue according to the specific process of the data process. Note that the process queue is provided for each specific process.

Also the data process control unit registers request information in the data process information storage unit of the management data storage unit . The request information may include information items such as the storage destination of the processing data the specific process of the data process and the status of the request for example.

The status of the request may include statuses such as received executing and completed for example. The status of the request indicates the progress of the data process. The status of the request may be set to received at the time the data process control unit registers the request information.

The data process request units monitors the one or more process queues to which they are assigned. That is the data process request units monitor requests for specific processes of one or more data processes. The data process request units acquire the messages that are registered in the process queues they monitor.

For example in a first data process request unit monitors a first process queue and a second process queue corresponding to specific processes that differ from each other. Also a second data process request unit monitors first through third process queues corresponding to specific processes that differ from one another. illustrates an exemplary case in which the first data process request unit and the second data process request unit both monitor the first process queue and the second process queue .

Note that the assignment of the process queues to be monitored by the data process request units may be arbitrarily set up and changed as desired. For example the assignment of the process queues to be monitored by the data process request units may be set up and changed according to the frequency of the requests for the various specific processes of the data processes and the processing time.

The data process request units acquire request information from the data process information storage unit based on the messages acquired from the process queues they monitor. The data process request units prompt the data processing units to execute the data processes of requests based on the storage destination of the processing data and the specific processes of the data processes included in the acquired request information.

Next the data process request units update the request information based on the execution results of the data processes executed by the data processing units and registers the updated request information in the data process information storage unit . Updating the request information may include deleting the specific processes of the data processes that have been executed based on the requests and changing the status of the requests for example. Also if request information of a data process calls for execution of a next specific process for example the data process request unit registers a message in the process queue according to the specific process of the data process.

Note that when the processing data changes as a result of having the data processing unit execute the data process of a request the data process request unit registers the changed processing data after processing in the data storage unit . Also the data process request unit updates the request information according to information on the storage destination of the changed processing data after processing.

In step S the data process control unit analyzes the request and registers a message in the process queue that corresponds to the specific process of the data process called by the request. Also the data process control unit registers the request information in the data process information storage unit of the management data storage unit .

In step S the data process request units acquire the messages registered in the process queues from the process queues they monitor. In step S the data process request units acquire request information from the data process information storage unit based on the acquired message. Then the data process request units prompts the data processing units to execute the data processes of the requests based on the acquired request information.

In step S the data process request units update the request information based on the execution results of the data processes executed by the data processing units register the updated request information in the data process information storage unit and ends the process of .

Note that if the request information includes a specific process of a next data process to be executed the data process request units registers a message in the process queue according to the specific process of the data process and ends the process of thereafter.

In the following examples of specific processes of data processes are illustrated. However the present invention is not limited to these examples. As a first example the specific process of the data process may be a data format conversion process for converting the data format of processing data.

For example the data format conversion process for converting the data format of processing data may include a data process for converting image data into PDF portable document format data. In the following descriptions the specific process of the data process for converting image data into PDF data may be referred to as image2pdf .

Also the data format conversion process for converting the data format of processing data may include a data process for converting PDF data into PDL page description language data. In the following descriptions the specific process of the data process for converting PDF data into PDL data may be referred to as pdf2pdl .

Further the data format conversion process for converting the data format of processing data may include a data process for converting Microsoft Office registered trademark document data into PDL data. In the following descriptions the specific process of the data process for converting Office document data into PDL data may be referred to as office2pdl .

As a second example a specific process of a data process may include a process of dividing up one specific process of a data process into a plurality of specific processes of data processes and converting a request into a plurality of requests to the data processing units according to the divided specific processes of data processes.

For example a data process for converting image data into PDL data may be divided into a process of converting the image data into PDF data and a process of converting the PDF data into PDL data. In the following descriptions the specific process of the data process for converting image data into PDL data may be referred to as image2pdl .

For example one of the data processing units may perform a data process for dividing a request for the data process image2pdl into the data processes image2pdf and pdf2pdl . That is the data processing units include a data processing unit that performs a data process of dividing a request for one data process into a plurality of requests for data processes.

Accordingly even when the data processing units do not include a data processing unit that is capable of executing the data process image2pdl the desired data process image2pdl may be executed through cooperation of the data processes image2pdf and pdf2pdl .

As illustrated in even in a case where a data processing unit capable of performing the desired data process is unavailable the desired data process image2pdl may be executed through cooperation of the data processes image2pdf and pdf2pdl .

As can be appreciated the service providing system of the present embodiment is capable of executing a data process for dividing up one specific process of a data process into a plurality of specific processes of data processes. In this way the service providing system of the present embodiment may flexibly accommodate an increase in the types of specific processes of data processes.

Also as a third example a specific process of a data process may include a data process for cooperating with an external service. For example the data process for cooperating with an external service may include a data process of issuing a request to the external cooperation authentication unit to log into the online storage using an account and password for online storage of a logged in user.

Other examples of the data process for cooperating with an external service may include a data process of storing data in the logged in online storage a data process of acquiring data from the logged in online storage a data process for cooperating with an external storage.

In step S at the external service registration screen the user selects the online storage external service that the user wishes to use from a list of external services stored in the external service information of the management information storage unit and makes a registration request.

The portal service application that has received the registration request issues a request to the setting registration unit to register the online storage selected by the user. In turn the setting registration unit registers the online storage selected by the user in association with the tenant ID of the logged in user in the tenant information of the management information storage unit .

In step S the user selects from an authorization setting screen of the portal site the user ID of users to be subject to the authorization setting the external service ID or service name of the external service subject to the authorization setting and the scope to be set up for the users and makes an authorization setting registration request. The portal service application receives the authorization setting registration request.

In step S the portal service application that has received the authorization setting registration request issues a request to the authorization setting process unit to set up the authorization setting. In turn the authorization setting process unit acquires parameters necessary for the authorization setting from the external service information of the management information storage unit . Note that the parameters necessary for authorization setting may include the external service ID the scope information items associated with the selected external service ID such as a client ID and a redirect destination URL and an arbitrary session key for maintaining a session for example.

In step S the authorization setting process unit that has acquired the parameters necessary for the authorization setting acquires from the external service information of the management information storage unit the authorization destination URL associated with the selected external service ID. The authorization setting process unit redirects a request including the parameters necessary for the authorization setting request having the parameters necessary for the authorization setting as queries of a GET request to the authorization destination URL from the terminal apparatus .

By redirecting the request from the terminal apparatus to the authorization destination URL authorization may be set up between the terminal apparatus and the online storage . Note that after the authorization is set up the online storage is redirected to the authorization setting process unit and therefore the session at the HTTP level is terminated. Accordingly a session key is used to maintain the same session.

The redirected online storage prompts the display device of the terminal apparatus to display a login screen. The user operates the input device of the terminal apparatus to enter an account and password from the login screen and makes a login request. The online storage receives the login request.

If the login is successful the online storage prompts the display device of the terminal apparatus to display an authorization screen. The user may view the authorization screen and in the case of performing authorization the user may operate the input device of the terminal apparatus to press an authorization button displayed on the authorization screen for example to make an authorization request.

In step S the online storage redirects an authorization code indicating that authorization has been approved and a session key from the terminal apparatus to the redirect destination URL. In step S the authorization setting process unit of the service providing system receives the authorization code. Note that if the user is already logged in upon being redirected to the online storage the display of the login screen may be omitted.

In step S the authorization setting process unit that has received the authorization code acquires parameters necessary for acquiring an authorization token from the service information of the management information storage unit . The parameters necessary for acquiring an authorization token from the service information of the management information storage unit may include the received authorization code as well as the client ID and client secret associated with the external service ID of the online storage corresponding to the sender of the authorization code for example.

In step S the authorization setting process unit transmits the acquired client ID and client secret and the received authorization code to the online storage and makes an authorization token acquisition request. The online storage verifies the received authorization token and transmits the authorization token to the authorization setting process unit of the service providing system .

In step S the authorization setting process unit that has received the authorization token issues a request to the setting registration unit to register the authorization token. The setting registration unit registers the users to be subject to the authorization setting selected from the authorization setting screen the received authorization token and the scope in association with each other the in the user information of the management information storage unit . After the authorization token registration is completed the authorization setting process unit notifies the portal service application of the registration completion. In turn the portal service application prompts the display device of the terminal apparatus to display a screen indicating the setting result of the authorization setting.

Note that upon transmitting the authorization token to the service providing system the online storage may also transmit the term of validity of the authorization token and a refresh token for reissuing the authorization token in the case where the authorization token has expired for example.

When the process request for cooperating with the online storage is issued in step S the external cooperation authentication unit of the service providing system performs a login process to the online storage .

The external cooperation authentication unit receives the login request for logging into the online storage from the data processing unit for example. The external cooperation authentication unit acquires from the user information of the management information storage unit information required for the login process that is associated with the user that has logged into the service providing system and the online storage to which the login process is to be directed. More specifically the external cooperation authentication unit acquires the information required for the login process for logging into the online storage that is associated with the tenant ID and the user ID and password for login of the user that has logged into the service providing system .

For example referring to the user information of when the external cooperation authentication unit receives a login request for logging into online storage A the external cooperation authentication unit acquires the account and password for the online storage A as the information required for the login process for logging into the online storage A .

Further upon receiving the login request for logging into online storage B the external cooperation authentication unit acquires the account and authorization token for the online storage B as the information required for the login process for logging into the online storage B . If the online storage with which cooperation is sought corresponds to an external service that does not have the authorization setting implemented such as the online storage A the external cooperation authentication unit uses an account and a password to make a login request to log into the online storage A . The account and password are examples of authentication information with respect to an external service. The online storage A that receives the login request performs an authentication process on the received account and password. If the authentication is successful the online storage A sends a response indicating login approval to the external cooperation authentication unit . If the authentication is unsuccessful the online storage A sends a response indicating login rejection to the external cooperation authentication unit .

When the external cooperation authentication unit receives from the online storage A the response indicating login approval the service providing system may be able to upload store data to the online storage A or download acquire data from the online storage A for example.

That is by having the external cooperation authentication unit receive from the online storage a response indicating login approval as described above the service providing system may execute a cooperative process with the online storage in step S.

If the online storage with which cooperation is sought corresponds to an external service that has the authorization setting implemented such as the online storage B the external cooperation authentication unit uses an account and an authorization token to make a login request to log into the online storage B . The account and authorization token are examples of authorization information with respect to an external service. The online storage B that receives the login request verifies the validity of the received account and authorization token. If the validity of the account and authorization token is verified the online storage B sends a response indicating login approval to the external cooperation authentication unit . If the account and authorization token cannot be verified the online storage B sends a response indicating login rejection to the external Cooperation authentication unit .

When the external cooperation authentication unit receives from the online storage B the response indicating login approval in step S the service providing system may be able to execute a cooperative process with the online storage within the limit prescribed by the scope of the authorization setting.

In the following an exemplary data output control process that may be implemented in the information processing system according to the present embodiment is described. Note that the following descriptions relate to an exemplary data output control process performed in a case where check print is selected with respect to a print job output request at the image forming apparatus in an office of the information processing system . Note that check print refers to test printing one copy of a plurality of copies in order to check a print result.

The input receiving unit receives various input operations such as a login instruction from the user. The output unit outputs e.g. prints out the received data.

The print service use application includes a login request unit and a service use request unit . The print service use application provides functions for executing a job. The login request unit provides a function for logging into the service providing system from the image forming apparatus . The login request unit receives from the service providing system a job list of a logged in user.

When the service use request unit receives a selection of a desired job to be executed from the job list displayed on an operation panel of the image forming apparatus for example upon receiving a selection of a desired job to run through the input receiving unit the service use request unit requests the service providing system to execute the received job. The setting information storage unit stored various setting information.

When the job determination unit receives a job execution request from the image forming apparatus the job determination unit determines the content of the job. For example when the job determination unit determines that the content of the job corresponds to check print for the data to be output from the image forming apparatus the job determination unit changes the number of copies to be printed designated in the print condition settings to one copy and requests the job output control unit to output the job. The job determination unit may determine whether the job content corresponds to check print based on whether a command indicating check print has been received from the service use request unit of the image forming apparatus for example.

After one copy of the print data has been printed by the job output control unit the job determination unit determines whether a print continue request to continue printing the print data resulting from the check print for example has been received as a job execution request from the image forming apparatus . If the job determination unit determines that a print continue request has been received the job determination unit requests the job output control unit execution request from the image forming apparatus the job content judgment unit changes the number of copies to be printed to a remaining number of copies obtained by subtracting one from the original number of copies set up in the print condition settings by the user and requests the job output control unit to output the job.

Further the job determination unit determines whether it has received as a job execution request from the image forming apparatus a print condition change request e.g. print size enlargement for the print data resulting from the check print for example.

If the job determination unit determines that it has received a print condition change request for the print data the job determination unit requests the print condition change request unit to implement a change on a print condition of the print data. When the job determination unit receives from the print condition change request unit notification that the print condition has been changed the job determination unit changes the number of copies to be printed to the original number of copies set up by the user and requests the job output control unit to output the job.

Further the job determination unit may determine whether a hold print function for retaining not deleting the job acquired from the image forming apparatus even after the print data is printed is implemented. If the hold print function is implemented the job determination unit may request the job output control unit to refrain from deleting the print data after outputting the print data.

Based on the job output request from the job determination unit the job output control unit controls the output of the output data by the image forming apparatus . The job output control unit acquires from the data storage unit of the management data storage unit the print data of the job corresponding to the output request from the job determination unit together with print conditions such as the number of copies and outputs the acquired data to the image forming apparatus .

When the job output control unit receives from the job determination unit a request to refrain from deleting the job together with the job output request the job output control unit controls the image forming apparatus to refrain from deleting the print data and save the print data in the data storage unit .

Upon receiving a print condition change request for the print data from the job determination unit the print condition change request unit acquires the corresponding print data from the data storage unit and changes the print condition for the print data. For example the printing condition change request unit may request the data process control unit to control the data processing unit to generate changed print data according to the change to the print condition.

In the following a data output control process executed by the above functional elements when the check print is selected by the user is described in detail. is a sequence chart illustrating an exemplary print data output control process. In the example of the data output control process is executed by the image forming apparatus and the print service application .

In the example of first the image forming apparatus accesses a portal site of the service providing system through user operations in order to print data uploaded to the service providing system using the print service application of the service providing system .

The access control unit of the service providing system enables the image forming apparatus to access the portal service application . The portal service application may display a login screen on the operation panel of the image forming apparatus for example.

Once the image forming apparatus logs into the portal service application the image forming apparatus accesses the print service application via the print service use application according to operations on the login screen made by the user. The print service application displays a job list screen for the user on the operation panel of the image forming apparatus .

When a job listed in the job list screen is selected by the user the print service application prompts the operation panel of the image forming apparatus to display a print condition setting screen for setting print conditions for printing the selected job. The print condition setting screen may enable selection of print functions such as check print hold print and normal print for example.

In step S when the user selects check print from the print condition setting screen the service use request unit of the image forming apparatus accepts the user selection input and in step S sends a job execution request to the job determination unit of the print service application . In step S the job determination unit determines the content of the job received from the image forming apparatus .

For example if the job determination unit determines that the job content corresponds to check print in step S the job determination unit changes the number of copies to be printed to one copy and requests the job output control unit to output to output the job.

In step S the job output control unit acquires from the data storage unit of the management data storage unit the print data of the job corresponding to the output request from the job determination unit and outputs the acquired print data to the image forming apparatus . In step S the image forming apparatus outputs e.g. prints out one copy of the print data.

In the following a case where the user makes a print continue request to continue printing the print data resulting from the check print and a case where the user makes a print condition change request to change print conditions of the print data resulting from the check print e.g. print size enlargement are separately described.

In step S when the user operates the operation panel to issue a continue print request with respect to the check print job output the service use request unit of the image forming apparatus accepts the continue print request and in step S sends a job execution request to the job determination unit . The service use request unit of the image forming apparatus may display on the operation panel of the image forming apparatus a remaining number of copies obtained by subtracting one from the total number of copies originally designated by the user for example.

In step S when the job determination unit determines that the job content of the job from the image forming apparatus corresponds to print continue to continue printing the print data in step S the job determination unit sends a job output request to the job output control unit . Here the job determination unit may change the number of copies to be printed to a remaining number of copies obtained by subtracting one from the total number of copies originally designated and request the job output control unit to output the job.

In step S the job output control unit outputs to the image forming apparatus the print data of the job in response to the output request of the job content judgment unit . In step S the image forming apparatus and the remaining output number of copies obtained by subtracting a portion of print data.

On the other hand in step S when the service use request unit of the image forming apparatus receives a user operation for changing a print condition of the print data resulting from the check print job output in step S the service use request unit of the image forming apparatus sends a job execution request to the job determination unit . In this case the service use request unit of the image forming apparatus may prompt the operation panel of the image forming apparatus to change the number of copies displayed back to the original number of copies for example.

In step S when the job determination unit determines that the job content of the job from the image forming apparatus corresponds to changing a print condition of the check print job output in step S the job determination unit sends a print condition change request for changing the print condition of the print data to the print condition change request unit .

In step S when the print condition change request unit notifies the job determination unit of the print condition change implemented on the print data in step S the job determination unit sends a job output request to the job output control unit . For example the job determination unit may change the number of copies to be printed to the original number of copies and request the job output control unit to output the job.

In step S the job output control unit outputs to the image forming apparatus the print job data of the job corresponding to the output request from the job determination unit . In step S the image forming apparatus outputs the original number of copies of the print data.

The output control processes described above relate to a case where a print continue request to continue printing the print data and a case where a print condition change request to change the print condition of the print data. In other cases the user may select print cancel after the above step S for example. In this case the image forming apparatus may cancel the print operation for example.

Also if the user selects hold print from the print setting screen in step S for example in step S the service use request unit of the image forming apparatus may output a command indicating hold print to the job determination unit for example.

In this case in step S based on the command the job determination unit may determine that the job content of the job execution request from the image forming apparatus corresponds to hold print and in step S the job determination unit may send a request to the job output control unit to refrain from deleting the job after outputting the job in conjunction with the job output request. Thus in step S after outputting the print data to the image forming apparatus the job output control unit may control the image forming apparatus to refrain from deleting the print data.

In the output control process of the print service application of the service providing system acquires a command from the image forming apparatus indicating a desired print function such as check print and the print service application determines the job content and executes an output control process according to the determined job content. However the present invention is not limited to such an example.

In another exemplary print data output control process the function of the job determination unit of the print service application may be implemented at the image forming apparatus for example. is a sequence chart illustrating another exemplary print data output control process.

In the example of in step S the image forming apparatus accepts information input by the user from a print condition setting screen for example. In step S the image forming apparatus determines the job content based on the information input in step S. At this point the image forming apparatus may determine whether the job content corresponds to check print for example.

In step S upon determining that the job content corresponds to check print the image forming apparatus changes the number of copies to be printed to one copy and requests the job output control unit of the print service application to output the job.

In step S the job output control unit acquires from the data storage unit of the management data storage unit the print data of the job corresponding to the output request from the image forming apparatus and outputs the acquired data to the image forming apparatus . In step S the image forming apparatus outputs e.g. prints out one copy of the print data.

In the following a case where the user issues a print continue request to continue printing the print data resulting from check print and a case where the user issues a print condition change request for changing the print condition of the print data e.g. print size enlargement are separately described.

In step S the image forming apparatus accepts a print continue request to continue printing the print data resulting from the check print as a user operation for example. In step S upon determining that the job content corresponds to print continue in step S the image forming apparatus changes the number of copies to be printed to a remaining number of copies obtained by subtracting one from the original total number of copies and requests the job output control unit to output the job. Here the image forming apparatus may control the operation panel to display the remaining number of copied obtained by subtracting one from the original total number of copies as the number of copies to be printed for example.

In step S the job output control unit outputs to the image forming apparatus the print data of the job corresponding to the output request from the image forming apparatus . In step S the image forming apparatus outputs the remaining number of copies of the print data and in step S the image forming apparatus outputs a job completion notification to the job output control unit .

In some embodiments the image forming apparatus may save a file of the print data of the job acquired from the job output control unit upon executing the check print and when print continue is selected in the manner described above the image forming apparatus may output the saved print data. In this way the output speed may be increased upon outputting the job according to the print continue request for example.

On the other hand in step S the image forming apparatus accepts a print condition change request to change the print condition of the print data as a user operation for example. In step S upon determining that the job content corresponds to changing the print condition of the print data in step S the image forming apparatus requests the print condition change request unit to change the print condition of the print data. Here the image forming apparatus may control the operation panel to display to the original number of copies as the number of copies to be printed for example.

In step S upon acquiring from the print condition change request unit a change notification indicating that the print condition has been changed in step S the image forming apparatus requests the job output control unit to output the job. Here the image forming apparatus may change the number of copies to be printed to the original number of copies and request the job output control unit to output the original number of copies of the print data for example.

In step S upon acquiring from the job output control unit the print data of the job corresponding to the output request in step S the image forming apparatus outputs the original number of copies of the print data. Also in step S the image forming apparatus outputs a job completion notification to the job output control unit .

Note that if the image forming apparatus determines in step S that hold print has been selected by the user for example the image forming apparatus may refrain from sending the job completion notification to the job output control unit in order to prevent the job from being deleted. In another example the image forming apparatus may send a command including a request to refrain from deleting the print job upon sending the job completion notification to the job output control unit . Note however that the present invention is not limited to these examples.

According to an aspect of the present embodiment user convenience may be improved upon outputting data in a system that manages services and service providing destinations.

In the following a process of generating and displaying a preview image of print data in the information processing system according to the present embodiment is described. is a flowchart illustrating an exemplary process of generating a preview image of print data and displaying the generated preview image at the image forming apparatus .

First a user wishing to use a print service provided by the service providing system operates the input device of the terminal apparatus to access a portal site of the service providing system . Based on the user operation the terminal apparatus accesses the portal site of the service providing system .

The access control unit of the service providing system allows access from the terminal device to the portal service application .

The portal service application prompts the display device of the terminal apparatus to display a top screen. The user operates the input device of the terminal apparatus to make a login request from the top screen. The user that has logged into the portal service application may be able to access the print service application . To access the print service application of the service providing system the user operates the input device of the terminal apparatus . Based on the user operation the terminal apparatus accesses the print service application of the service providing system .

In step S the print service application prompts the display device of the terminal apparatus to display an upload screen. By operating the input device of the terminal apparatus the user uploads data to be printed from the upload screen to the print service application of the service providing system . The print service application stores the data uploaded from the terminal apparatus uploaded data in the data storage unit in association with the logged in user.

In step S the print service application generates print data and a preview image of the print data from the uploaded data. Note that the process of step S is described in detail below.

A user wishing to print the uploaded data operates the operation panel of the image forming apparatus to access the service providing system . Based on the user operation the image forming apparatus accesses the service providing system .

The access control unit of the service providing system enables the image forming apparatus to access the portal service application . The portal service application may prompt the operation panel of the image forming apparatus to display a login screen for example.

In step S the user operates the operation panel of the image forming apparatus to make a login request from the login screen. The user that has logged into the portal service application may be able to access to the print service application . To access the print service application of the service providing system the user operates the operation panel of the image forming apparatus . Based on the user operation the image forming apparatus accesses the print service application of the service providing system .

In step S the print service application prompts the operation panel of the image forming apparatus to display an uploaded data list screen for example. Here it is assumed that the uploaded data list screen includes a preview image display button. By pressing the preview image display button of the uploaded data list screen the user may request the image forming apparatus to display a preview image of print data.

When the preview image display button is pressed the image forming apparatus sends a preview image acquisition request to the print service application . In step S the print service application acquires from the storage unit the requested preview image of the preview image acquisition request from the image forming apparatus and downloads the acquired preview image to the image forming apparatus .

In step S the image forming apparatus displays the downloaded preview image on the operation panel. In this way a preview image of print data may be generated at the service providing system and the generated preview image may be downloaded to and displayed at the image forming apparatus .

Note that illustrates an example where a preview image of print data is generated asynchronously after the data is uploaded. However in other examples the process from uploading data to generating a preview image of print data may be executed at the time the preview image display button is pressed by the user.

Also in the example of the preview image is displayed after the preview image display button is pressed by the user. However in other examples a small preview image may be generated in advance and displayed as a thumbnail image in the uploaded data list screen.

Also in generating the print data and the preview image of the print data from the uploaded data in step S the print service application may prompt the data processing unit to execute a data process of generating the preview image of the print data. In this case the data process of generating a preview image of print data may be one of the specific processes of data processes that may be executed by the one or more data processing units .

Further in the case where a small preview image is generated in advance and displayed as a thumbnail image in the uploaded data list screen the print service application may have the data processing unit execute a data process of generating the small preview image of print data. In this case the data process of generating the small preview image of print data may be one of the specific processes of the data processes that may be executed by the one or more data processing units .

Note that in the case of generating a preview image of print data at the time the preview image display button is pressed by the user the preview has to be generated within a short period of time and promptly transmitted to the image forming apparatus . Therefore in the case of generating the preview image at the time the preview image display button is pressed the print service application generates the preview image of print data.

To execute the process of generating the preview image of print data as described above the print service application may have a functional configuration as illustrated in for example. is a block diagram illustrating exemplary functional components of the print service application .

In the print service application includes a data upload receiving unit a print data generation request unit a preview image generation request unit a preview image generation process unit a print data download receiving unit and a preview image download receiving unit .

The data upload receiving unit displays an upload screen on the display device of the terminal apparatus and receives a data upload from the terminal apparatus . The print data generation request unit issues a process request to the data processing control unit to have the data processing unit execute a data process of generating print data. The preview image generation request unit issues a process request to the data process control unit to have the data processing unit execute a data process of generating a preview image of print data.

In a case where a preview image of print data is to be generated at the time the user presses the preview image display button for example the preview image generation process unit may generate the preview image of print data. The print data download receiving unit displays an uploaded data list screen on the operation panel of the image forming apparatus for example and receives a download request for print data from the image forming apparatus . Further the print data download receiving unit downloads the requested print data of the download request to the image forming apparatus .

The preview image download receiving unit receives a preview image acquisition request from the image forming apparatus when the preview image display button of the uploaded data list screen is pressed. Then the preview image download receiving unit downloads the requested preview image of the acquisition request to the image forming apparatus .

In the information processing system according to the present embodiment services to be provided users using the services and devices using the services may be appropriately managed and a preview image of print data may be generated and displayed.

Further the present invention is not limited to the specific embodiments described herein and variations and modifications may be made without departing from the spirit and scope of the present invention.

Note that the terminal apparatus and the image forming apparatus are exemplary embodiments of a service using apparatus of the present invention. The user authentication unit and the user device authentication unit are exemplary embodiments of an authentication unit of the present invention. The portal service application is an exemplary embodiment of a service identification unit of the present invention. The print service application the data process control unit the process queues the data process request units and the data processing units are exemplary embodiments of an execution unit of the present invention.

The present invention can be implemented in any convenient form for example using dedicated hardware or a mixture of dedicated hardware and software. The present invention may be implemented as computer software implemented by one or more networked processing apparatuses. The network can comprise any conventional terrestrial or wireless communications network such as the Internet. The processing apparatuses can comprise any suitably programmed apparatuses such as a general purpose computer personal digital assistant mobile telephone such as a WAP or 3G compliant phone and so on. Since the present invention can be implemented as software each and every aspect of the present invention thus encompasses computer software implementable on a programmable device. The computer software can be provided to the programmable device using any non transitory storage medium for storing processor readable code such as a floppy disk a hard disk a CD ROM a magnetic tape device or a solid state memory device. The non transitory storage medium can comprise any computer readable medium except for a transitory propagating signal.

The hardware platform includes any desired hardware resources including for example a central processing unit CPU a random access memory RAM and a hard disk drive HDD . The CPU may include processors of any desired type and number. The RAM may include any desired volatile or nonvolatile memory. The HDD may include any desired nonvolatile memory capable of recording a large amount of data.

The hardware resources may further include an input device an output device and a network device in accordance with the type of the apparatus. The HDD may be provided external to the apparatus as long as the HDD is accessible from the apparatus. In this case the CPU for example the cache memory of the CPU and the RAM may operate as a physical memory or a primary memory of the apparatus while the HDD may operate as a secondary memory of the apparatus.

The present application is based on and claims the benefit of priority of Japanese Patent Application No. 2013 155172 filed on Jul. 26 2013 and Japanese Patent Application No. 2013 156050 filed on Jul. 26 2013 the entire contents of which are hereby incorporated herein by reference.

