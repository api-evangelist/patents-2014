---

title: Apparatus and method for application computer to process forwarding instructions and session initiation protocol requests
abstract: A method is presented comprising transmitting, from an application computer communicably connected to a call controller which is connected to a data network, packetized messages indicative of telephone calls in progress at an endpoint of the data network, or indicative of such endpoint, and transmitting, from the call controller to the application computer, packetized messages indicative of a variety of information contained in, or relevant to, the telephone calls so as to process such information for a variety of applications. Apparatus to implement the method is also presented.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09473543&OS=09473543&RS=09473543
owner: Intel Corporation
number: 09473543
owner_city: Santa Clara
owner_country: US
publication_date: 20141224
---
The present application is a continuation of U.S. patent application Ser. No. 13 449 609 filed Apr. 18 2012 which is a continuation of U.S. patent application Ser. No. 11 476 425 filed Jun. 27 2006 now U.S. Pat. No. 8 184 557 which is a continuation of U.S. patent application Ser. No. 09 805 501 filed Mar. 13 2001 now U.S. Pat. No. 7 072 308.

U.S. patent application Ser. No. 09 805 501 is a continuation in part of U.S. patent application Ser. No. 08 955 834 filed on Oct. 21 1997 now U.S. Pat. No. 6 201 805. The present application is related by subject matter to U.S. patent application Ser. No. 08 955 834 but the present application does not claim the benefit of priority of U.S. patent application Ser. No. 08 955 834.

This invention relates to computer telephone integration CTI and more specifically to an improved method and apparatus for utilizing CTI techniques to process telephone calls using various applications in a packet switched telephone network.

Telephony over packet networks particularly over wide area networks such as the Internet has received considerable attention in recent months. Specifically scientists have begun exploring the possibility of sending voice and video information streams over packet switched data networks. The transmission of such information streams over packet switched networks can be more cost efficient than traditional telephony which requires a dedicated circuit between the calling and called party.

Computer telephone integration has been widely applied to traditional telephony methods and apparatus but has not as yet been successfully applied to the methods and apparatus used for packet network telephony. This invention specifies novel apparatus and methods supplementary to known packet network telephony apparatus and methods which enable CTI capabilities in such an environment and use them to process telephone calls.

One possible set of methods and apparatus for completing calls over a packet switched network which calls can handle voice and other information streams is defined by ITU recommendation H.323. The H.323 standard is available from the International Telecommunication Union of Geneva Switzerland and is hereby incorporated herein by this reference. The H.323 standard defines various protocols dealing with call control call setup call termination and other similar techniques known to those in the packet network telephony art.

The H.323 standard defines a functional entity called a gatekeeper. The gatekeeper handles network functions such as bandwidth control zone management address translation and admissions control for a designated set of network terminals. While all these functions are further defined in the previously incorporated standard we set forth two examples below.

Bandwidth control provides a protocol by which the gatekeeper allocates a particular amount of network bandwidth to a particular connection. The gatekeeper can be contacted by either the calling or called party in order to change the amount of bandwidth allocated to a particular call.

As another example the gatekeeper performs zone management. This function as further defined in the H.323 standard provides a mechanism for allocating sets of different terminals and other nodes in the network to a particular gateway. The H.323 standard provides a mechanism for dynamically altering the allocation of different network nodes to different gatekeepers.

The gatekeeper function provides services analogous to the call processing function within a private branch exchange PBX in conventional telephony. In traditional telephony CTI features are provided by creating an interface between external application software and the call processing function within the PBX. By contrast in the known packet network telephony art interfaces to the gatekeeper are only defined from other gatekeepers end points and other network entities.

The above and other problems of the prior art are overcome and a technical advance is achieved in accordance with the present invention which relates to a packet network telephony call controller e.g. an H.323 gatekeeper which is arranged to interface with a plurality of external call processing applications programs which may be located on one or more remote computers. In accordance with the teachings of the present invention a call processing application computer is connected to a call controller computer via a data network or otherwise and these two entities exchange messages in the manner specified by the invention. The call controller computer may be located with one of the terminals or may be located on a separate computer.

As well the processing application computer may be located with the call controller computer or remote from it.

The call controller computer and applications computer s communicate with one another in order to perform various call control and other call processing application functions over the data network and to provide call information and control to a user of the applications computer. As packet switched telephone connections are set up between various terminals or other nodes the call controller communicates with one or more application computers in order to provide the call information and call control functions required by the computer telephony applications residing on the application computers. Examples of these functions include establishing and tearing down calls transferring calls call conferencing associating the applications computer with one or more specific end points in the call controller zone for monitoring and control determining the state of calls at a given endpoint determining the length of calls in progress at a given endpoint determining the words exchanged in calls in progress at a given endpoint determining the originating IP address of calls in progress at a given endpoint routing unanswered new calls terminating at a given endpoint to another to another endpoint and various other functions.

For illustrative purposes the invention will be described using systems based upon the H.323 standard as an example. It is understood that the invention is intended to cover any and all other protocols now known or to be known in the art which address packet telephony such as for example ITU H.248 also known as MEGACO Session Initiation Protocol SIP and Media Gateway Control Protocl MGCP . These protocols describe equivalent modules which are responsible for call setup and are thus functionally equivalent within the context of the invention to the gatekeeper of H.323. The names of these modules of course vary with the given protocol. For example in SIP the gatekeeper functionality is accomplished by what is termed a proxy in MEGACO by a Media Gateway Controller and in MGCP by a softswitch. Like the Shakespearean rose a gatekeeper by any other name is just as sweet.

The arrangement of includes several external telephony applications systems typically implemented as software which may be located on applications computer or on separate computers connected via any communications network to applications computer . Typically the applications computer may be collocated with one of the end points described below.

The arrangement of also includes end points which may be personal computers network computer devices NCs or any other node capable of interconnection to the packet network telephony environment.

In operation a command is issued from an applications computer requesting certain telephony services which will be described below. The message requesting such a service is transmitted through path to gatekeeper computer for processing. The message sent to gatekeeper causes gatekeeper to exchange appropriate signaling messages with other packet network telephony environment nodes in a manner as described for example in the incorporated H.323 standard. As a result of this sequence of events the combined system is able to implement the call processing functionality requested by applications computer on behalf of applications .

During operation various call control functions requested by applications computer are performed by the gatekeeper . Additionally by making appropriate requests of gatekeeper applications computer may monitor the outcome of various call control functions and transmit such outcome to any of applications .

In operation the call initially proceeds according to the methods of the packet network telephony environment. A bandwidth request message is sent to gatekeeper and bandwidth is granted by the gatekeeper at message . A call setup request message is issued by the initiating end point and gatekeeper causes call setup request message to be transmitted to receiving end point . A call proceeding message is transmitted by the receiving end point back to gatekeeper and relayed to initiating end point as shown.

At approximately the same time gatekeeper relays the call proceeding indication to the initiating end point using message gatekeeper also transmits to external application a notification that an inbound call is being received by the receiving end point . Gatekeeper sends this message because external application has previously indicated that it requires notification of telephony events occurring at receiving end point .

In order to connect the inbound call receiving end point requires network bandwidth and such bandwidth is requested from and allocated by the gatekeeper using messages and . Next the terminal at monitored end point rings to alert the user to the arriving call and an indication of such ringing is transmitted through messages and to initiating end point through the gatekeeper . When the call is connected at the receiving end point because of user action end point informs gatekeeper via message .

At approximately the same time gatekeeper indicates to the initiating end point that the requested call has been connected via message .

In accordance with the protocol described hereinbefore the detection of the call by an external application is accomplished via a protocol of messages transmitted between the gatekeeper and the end points to be connected as well as between the gatekeeper and the external application thus enabling gatekeeper to inform external application regarding the progress of relevant calls in the packet telephony network.

In gatekeeper also includes the conference control point function as currently known to the packet network telephony art. This function is used by the invention to interconnect two call segments namely the segment between the initiating end point and the conference control point and between the conference control point and the receiving end point . The invention connects the call in two stages in order to overcome certain limitations of the known packet network telephony art. For clarity of description the combined gatekeeper and conference control point apparatus is referred to as a gatekeeper .

The sequence of messages begins with a new message specified by the current invention through which the external application makes a request that the first segment of the call be established from gatekeeper to initiating end point .

Next according to known packet network telephony art messages and are exchanged between gatekeeper and initiating end point in order to set up that first leg of the call.

Next the gatekeeper sends a new message to external application to alert it that the call request has been received and is being processed. Much of the remaining signaling relating to the establishment of that segment of the call between initiating end point and gatekeeper in is substantially similar to that previously described with respect to and thus will not be repeated. Similarly once the first leg of the call has been set up gatekeeper proceeds in similar fashion to set up the second leg of the call from itself to receiving end point .

However during the process depicted in gatekeeper sends new messages to the external application at relevant stages of call processing including 

The processing application computers AC are connected to the gatekeeper computer GK in a variety of ways some of which are shown as examples in . The gatekeeper computer sets up and controls call sessions between the various H.323 or equivalent endpoints .

One or more ACs can be connected to the GK via a LAN a generic data network or via interprocess software communication where both the GK and AC are software modules on the same physical computing device shown via the dotted line box drawn around these components connected via the interprocess software communication .

Alternatively the AC and GK can be themselves connected via the Internet or other computer communications network. Or the GK could write to a file stored and then itself transmitted to an AC via a variety of data transmission channels as described above or as is otherwise known in the art.

The ACs communicating with the GK in an analogous fashion as described above can implement via a variety of applications programs applications and services such as voice recognition of the words exchanged in the call rerouting the call if unanswered after a determined number of rings measurement of the length of the call and storing the word content of calls as determined by the above described voice recognizer and writing such content to a file for analysis by another program to list a few. As described above these applications are usually implemented in software but could be implemented wholly or partially in dedicated hardware as well especially in complex applications requiring a lot of processing.

The method of the invention relates to software functional modules and holds constant no matter what the physical arrangement of those modules might be. For example two modules as described above for example the Application Computer and the Gatekeeper might reside on separate computing systems or may reside on a common system they nonetheless remain separate modules and communicate with each other in a similar fashion. Thus the invention is intended to include any such rearrangement of software modules on a convenient set of computing systems.

The communication methods described above are as well intended to include a wide variety of possible implementations. Thus for example two modules residing in a common computing system will exchange messages but may not do so over a physical data network in the sense of signals travelling over external wires.

There are various methods by which an application running on the application system actually requests the services available over the CSTA like link CSTA being the standard abbreviation for Computer Supported Telecommunication Applications . One common method is to provide a standard software library on the application machine that offers a telephony Application Programming Interface API to the application program. Within the context of the invention this API can be any API that includes call control functions. Two such APIs known to the industry are for example Microsoft s TAPI Telephony API and Sun s JTAPI Java Telephony API . The APIs are used to provide convenient access by the application program to the services delivered by the invention.

There are many possible applications that could make use of the capabilities of the invention. These applications are well known and for the sake of brevity will not be exhaustively described herein. Some of the more likely applications are the following 

Call Routing. When a request to handle an incoming call is presented to the call controller or gatekeeper in H.323 parlance the gatekeeper sends a message to the application requesting routing instructions. The application uses any convenient business logic to decide how the call should be routed and responds to the gatekeeper with appropriate instructions. The gatekeeper then routes the call to a destination based on those instructions.

Several examples of such business logic would include as examples follow me services load balancing skill based routing screen pop universal queueing and unified messaging each of which is summarily described in what follows.

Follow me services. A telephone subscriber leaves forwarding instructions with the application specifying the telephone endpoint or series of endpoints to which calls should be forwarded and optionally some rules that govern that forwarding. For example calls arriving between certain times of day should be forwarded to this number or I am in my car now send all calls to my cell phone or Forward all calls to my voicemail except calls from my boss and my children .

Load balancing. When a call is made to an enterprise and it is determined that any of several individuals offices or work groups could handle such a call for example a call to a customer service number the application can choose which individual work group or office should receive to call based on its assessment of the current workload at each potential destination.

Skill based routing. When a call is made to an enterprise and it is determined that any of several individuals offices or work groups could handle such a call for example a call to a customer service number the application can choose which individual work group or office should receive the call based on its assessment of the capabilities required by the caller for example knowledge of a particular product or account type or ability to speak a certain language .

Screen pop. When a call is directed to a particular endpoint the gatekeeper simultaneously alerts the application so that the application can retrieve business information corresponding to the call for example customer or account information and display it for the user at that endpoint.

Universal Queueing. When an application manages multiple forms of communications for a user for example traditional or packet telephone calls electronic mail messages facsimile documents communication requests from parties viewing web pages text chat sessions by sequencing those communications so that they are served in an equitable and or efficient fashion that application can use the invention to acquire the necessary information about packet telephony calls and to direct the holding and release of such calls as may be required to implement the desired sequencing.

Unified Messaging. When an application manages multiple forms of store and forward communications for a user for example electronic mail messages voice mail messages facsimile documents by storing these communications presenting an inventory of those communications to the user and presenting specific selected messages to the user as directed by that user that application can use the invention to create packet telephony connections between the message repository and the user for the purposes of presenting said inventory to the user allowing the user to give said direction and presenting the selected messages.

The above describes the preferred embodiments of the invention. It will be appreciated however that various other modifications or additions will be apparent to those of ordinary skill in the art.

