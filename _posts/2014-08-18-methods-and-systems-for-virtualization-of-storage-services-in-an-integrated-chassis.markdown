---

title: Methods and systems for virtualization of storage services in an integrated chassis
abstract: In accordance with embodiments of the present disclosure, a system may include a chassis, one or more chassis management controllers housed in the chassis, and a switch management controller. The chassis may be configured to receive a plurality of modular information handling systems. The one or more chassis management controllers may be configured to receive a storage management command, encapsulate the storage management command in a first datagram, and communicate the first datagram to a switch management controller housed in the chassis. The switch management controller may be configured to extract the storage management command from the first datagram, identify a storage controller associated with the storage management command, and communicate an input/output control request to the storage controller based on the storage management command.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09519607&OS=09519607&RS=09519607
owner: Dell Products L.P.
number: 09519607
owner_city: Round Rock
owner_country: US
publication_date: 20140818
---
The present patent application is a continuation of a previously filed patent application U.S. patent application Ser. No. 13 442 727 filed Apr. 9 2012 the entirety of which is hereby incorporated by reference. Pursuant to 37 CFR 1.78 a 3 an application data sheet containing a reference to the previously filed application unless submitted previously is submitted contemporaneously herewith.

The present disclosure relates in general to information handling systems and more particularly to virtualization of storage services in an integrated chassis.

As the value and use of information continues to increase individuals and businesses seek additional ways to process and store information. One option available to users is information handling systems. An information handling system generally processes compiles stores and or communicates information or data for business personal or other purposes thereby allowing users to take advantage of the value of the information. Because technology and information handling needs and requirements vary between different users or applications information handling systems may also vary regarding what information is handled how the information is handled how much information is processed stored or communicated and how quickly and efficiently the information may be processed stored or communicated. The variations in information handling systems allow for information handling systems to be general or configured for a specific user or specific use such as financial transaction processing airline reservations enterprise data storage or global communications. In addition information handling systems may include a variety of hardware and software components that may be configured to process store and communicate information and may include one or more computer systems data storage systems and networking systems.

Existing server architectures either provide a single monolithic server capable of running one operating system and input output I O resources at a time or bulky blade server chassis providing multiple servers and I O control modules in a single chassis. A system chassis with multiple information handling systems with various peripheral and input output capabilities common to the chassis as a whole may provide advantages as it allows a blade server chassis in a small form factor thereby providing a blade server chassis with a size comparable to the size of a monolithic server. Implementation of a system chassis with multiple information handling systems with various peripheral and input output capabilities common to the chassis as a whole presents numerous challenges.

In accordance with the teachings of the present disclosure the disadvantages and problems associated with virtualizing storage services in an integrated chassis have been reduced or eliminated.

In accordance with embodiments of the present disclosure a system may include a chassis one or more chassis management controllers housed in the chassis and a switch management controller. The chassis may be configured to receive a plurality of modular information handling systems. The one or more chassis management controllers may be configured to receive a storage management command encapsulate the storage management command in a first datagram and communicate the first datagram to a switch management controller housed in the chassis. The switch management controller may be configured to extract the storage management command from the first datagram identify a storage controller associated with the storage management command and communicate an input output control request to the storage controller based on the storage management command.

In accordance with these and other embodiments of the present disclosure a method may include receiving a storage management command at a chassis management controller housed in a chassis configured to receive a plurality of modular information handling systems encapsulating the storage management command in a first datagram communicating the first datagram from the chassis management controller to a switch management controller housed in the chassis extracting the storage management command from the first datagram identifying a storage controller associated with the storage management command and communicating an input output control request from the switch management controller to the storage controller based on the storage management command.

Technical advantages of the present disclosure will be apparent to those of ordinary skill in the art in view of the following specification claims and drawings.

Preferred embodiments and their advantages are best understood by reference to wherein like numbers are used to indicate like and corresponding parts.

For the purposes of this disclosure an information handling system may include any instrumentality or aggregate of instrumentalities operable to compute classify process transmit receive retrieve originate switch store display manifest detect record reproduce handle or utilize any form of information intelligence or data for business scientific control entertainment or other purposes. For example an information handling system may be a personal computer a PDA a consumer electronic device a network storage device or any other suitable device and may vary in size shape performance functionality and price. The information handling system may include memory one or more processing resources such as a central processing unit CPU or hardware or software control logic. Additional components or the information handling system may include one or more storage devices one or more communications ports for communicating with external devices as well as various input and output I O devices such as a keyboard a mouse and a video display. The information handling system may also include one or more buses operable to transmit communication between the various hardware components.

For the purposes of this disclosure information handling resources may broadly refer to any component system device or apparatus of an information handling system including without limitation processors busses memories input output devices and or interfaces storage resources network interfaces motherboards electro mechanical devices e.g. fans displays and power supplies.

For the purposes of this disclosure computer readable media may include any instrumentality or aggregation of instrumentalities that may retain data and or instructions for a period of time. Computer readable media may include without limitation storage media such as a direct access storage device e.g. a hard disk drive or floppy disk a sequential access storage device e.g. a tape disk drive compact disk CD ROM DVD random access memory RAM read only memory ROM electrically erasable programmable read only memory EEPROM and or flash memory as well as communications media such wires optical fibers microwaves radio waves and other electromagnetic and or optical carriers and or any combination of the foregoing.

Information handling systems often use an array of physical storage resources e.g. disk drives such as a Redundant Array of Independent Disks RAID for example for storing information. Arrays of physical storage resources typically utilize multiple disks to perform input and output operations and can be structured to provide redundancy which may increase fault tolerance. Other advantages of arrays of physical storage resources may be increased data integrity throughput and or capacity. In operation one or more physical storage resources disposed in an array of physical storage resources may appear to an operating system as a single logical storage unit or logical unit. Implementations of physical storage resource arrays can range from a few physical storage resources disposed in a chassis to hundreds of physical storage resources disposed in one or more separate storage enclosures.

An information handling system may generally be operable to receive data from and or communicate data to one or more disk drives and or other information handling resources of chassis via mid plane . In certain embodiments an information handling system may be a server. In such embodiments an information handling system may comprise a blade server having modular physical design. In these and other embodiments an information handling system may comprise an M class server. As depicted in an information handling system may include a processor and one or more switch interfaces communicatively coupled to the processor .

A processor may include any system device or apparatus configured to interpret and or execute program instructions and or process data and may include without limitation a microprocessor microcontroller digital signal processor DSP application specific integrated circuit ASIC or any other digital or analog circuitry configured to interpret and or execute program instructions and or process data. In some embodiments processor may interpret and or execute program instructions and or process data stored in a memory a hard drive and or another component of system .

A switch interface may comprise any system device or apparatus configured to provide an interface between its associated information handling system and switches . In some embodiments switches may comprise Peripheral Component Interconnect Express PCIe switches in which case a switch interface may comprise a mezzanine card configured to create a PCIe compliant interface between its associated information handling system and switches . In other embodiments a switch interface may comprise an interposer. Use of switch interfaces in information handling systems may allow for minimal changes to be made to traditional servers e.g. M class servers while supporting the overall system architecture disclosed herein. Although depicts an implementation including a single switch interface per information handling system in some embodiments each information handling system may include a plurality of switch interfaces for redundancy high availability and or other reasons.

Mid plane may comprise any system device or apparatus configured to interconnect modular information handling systems with information handling resources of chassis . Accordingly mid plane may include slots and or connectors configured to receive information handling systems switches switch management controller chassis management controllers storage controllers network interface optical media drive KVM interface user interface and or other information handling resources. In one embodiment mid plane may include a single board configured to interconnect modular information handling systems with information handling resources. In another embodiment mid plane may include multiple boards configured to interconnect modular information handling systems with information handling resources. In yet another embodiment mid plane may include cabling configured to interconnect modular information handling systems with information handling resources.

A switch may comprise any system device or apparatus configured to couple information handling systems to storage controllers e.g. via mid plane and slots and perform switching between information handling systems and various information handling resources of system including storage controllers and slots . In certain embodiments a switch may comprise a PCIe switch. In other embodiments a switch may comprise a generalized PC bus switch an Infiniband switch or other suitable switch. As shown in chassis may include a plurality of switches . In such embodiments switches may operate in a redundant mode for shared devices e.g. storage controllers and or devices coupled to slots and in non redundant mode for non shared zoned devices. As used herein shared devices may refer to those which may be visible to more than one information handling system while non shared devices may refer to those which are visible to only a single information handling system .

A chassis management controller may be any system device or apparatus configured to facilitate management and or control of system its information handling systems and or one or more of its component its component information handling resources. A chassis management controller may be configured to issue commands and or other signals to manage and or control information handling system and or information handling resources of system . A chassis management controller may comprise a microprocessor microcontroller digital signal processor DSP application specific integrated circuit ASIC field programmable gate array FPGA erasable programmable read only memory EPROM or any combination thereof. As shown in a chassis management controller may be coupled to mid plane . Also as shown in system may include a plurality of chassis management controllers and in such embodiments chassis management controllers may be configured as redundant. In some embodiments a chassis management controller may provide a user interface and high level controls for management of switches including configuring assignments of individual information handling systems to non shared information handling resources of system . In these and other embodiments a chassis management controller may define configurations of the storage subsystem e.g. storage controllers storage interfaces disk drives etc. of system . For example a chassis management controller may provide physical function configuration and status information that would normally occur at the driver level in traditional server implementations. Examples of physical functions include disk drive discovery and status RAID configuration and logical volume mapping.

In addition or alternatively a chassis management controller may also provide a management console for user administrator access to these functions. For example a chassis management controller may implement Intelligent Platform Management Interface IPMI or another suitable management protocol permitting a user to remotely access a chassis management controller to configure system and its various information handling resources. In such embodiments a chassis management controller may interface with a network interface separate from network interface thus allowing for out of band control of such that communications to and from chassis management controller are communicated via a management channel physically isolated from an in band communication channel with network interface . Thus for example if a failure occurs in system that prevents an administrator from interfacing with system via network interface and or user interface e.g. operating system failure power failure etc. the administrator may still be able to monitor and or manage system e.g. to diagnose problems that may have caused failure via a chassis management controller . In the same or alternative embodiments chassis management controller may allow an administrator to remotely manage one or parameters associated with operation of system and its various information handling resources e.g. power usage processor allocation memory allocation security privileges etc. . Although depicts chassis as having two chassis management controllers chassis may include any suitable number chassis management controllers .

A storage controller may and include any system apparatus or device operable to manage the communication of data between one or more of information handling systems and one or more of disk drives . In certain embodiments a storage controller may provide functionality including without limitation disk aggregation and redundancy e.g. RAID input output I O routing and error detection and recovery. As shown in a storage controller may coupled to a connector on mid plane . Also as shown in system may include a plurality of storage controllers and in such embodiments storage controllers may be configured as redundant. In addition or in the alternative storage controllers may in some embodiments be shared among two or more information handling systems . As also shown in each storage controller may be coupled to one or more storage interfaces via cables . For example in some embodiments each storage controller may be coupled to a single associated storage interface via a cable . In other embodiments each storage controller may be coupled to two or more storage interfaces via a plurality of cables thus permitting redundancy as shown in . Storage controllers may also have features supporting shared storage and high availability. For example in PCIe implementations a unique PCIe identifier may be used to indicate shared storage capability and compatibility in system .

In embodiments in which switches comprise PCIe switches or switches configured in accordance with another communication standard chassis management controllers may not be able to communicate directly with switches . Available chassis management controllers may not be configured in accordance with PCIe or other communication standards available in switches and it may not be desirable to create a proprietary chassis management controller configured in accordance with PCIe or such other communication standards for use in system due to cost concerns. Accordingly challenges may exist in enabling management functionality of storage devices e.g. disk drives via chassis management controllers as direct PCIe communications or communications via another communication protocol may not be available between

Accordingly a switch management controller may be communicatively interfaced between chassis management controllers and switches and configured to virtualize management communications between chassis management controllers and switches related to management of storage components e.g. storage controllers disk drives and or other components of system . Switch management controller may in some embodiments interface with switches via a private network e.g. an Ethernet network internal to chassis . In such embodiments each switch and switch management controller may establish a Transmission Control Protocol Internet Protocol TCP IP socket for communication. In these and other embodiments switch management controller may comprise a power PC management processor or processor similar in structure and or function.

In operation a chassis management controller may receive a storage management command e.g. a storage application programming interface API call from a management console or other interface. Chassis management controller may encapsulate such command in a network datagram e.g. an Ethernet packet frame or other datagram and communicate such datagram via the private network to switch management controller . Switch management controller may receive such datagram and extract the command from the datagram. Based on analysis of the command storage management controller may identify a storage controller associated with the command and execute an input output control request to such storage controller via an appropriate switch . The storage controller may communicate a reply e.g. a return code via an appropriate switch to storage management controller which reply storage management controller may encapsulate into a network datagram e.g. an Ethernet packet frame or other datagram and communicate such datagram via the private network to a chassis management controller . The chassis management controller may extract the reply from the datagram and interpret such reply and or forward the reply to a management console interfaced to the chassis management controller.

As depicted in a switch may have coupled thereto one or more slots . A slot may include any system device or apparatus configured to allow addition of one or more expansion cards to chassis in order to electrically coupled such expansion cards to a switch . Such slots may comprise any suitable combination of full height risers full height slots and low profile slots. A full height riser may include any system device or apparatus configured to allow addition of one or more expansion cards e.g. a full height slot having a physical profile or form factor with dimensions that practically prevent such expansion cards to be coupled in a particular manner e.g. perpendicularly to mid plane and or switch e.g. the proximity of information handling resources in chassis prevents physical placement of an expansion card in such manner . Accordingly a full height riser may itself physically couple with a low profile to mid plane a switch or another components and full height cards may then be coupled to full height slots of full height riser. On the other hand low profile slots may be configured to couple low profile expansion cards to switches without the need for a full height riser.

Slots may also include electrically conductive elements e.g. edge connectors traces etc. allowing for expansion cards inserted into slots to be electrically coupled to switches . In operation switches may manage switching of communications between individual information handling systems and expansion cards coupled to slots . In some embodiments slots may be nonshared e.g. each slot is associated with a single information handling system . In other embodiments one or more of slots may be shared among two or more information handling systems . In these and other embodiments one or more slots may be configured to be compatible with PCIe generalized PC bus switch Infiniband or other suitable communication specification standard or protocol.

Network interface may include any suitable system apparatus or device operable to serve as an interface between chassis and an external network e.g. a local area network or other network . Network interface may enable information handling systems to communicate with the external network using any suitable transmission protocol e.g. TCP IP and or standard e.g. IEEE 802.11 Wi Fi . In certain embodiments network interface may include a network interface card NIC . In the same or alternative embodiments network interface may be configured to communicate via wireless transmissions. In the same or alternative embodiments network interface may provide physical access to a networking medium and or provide a low level addressing system e.g. through the use of Media Access Control addresses . In some embodiments network interface may be implemented as a local area network LAN on motherboard LOM interface.

In some embodiments various components of chassis may be coupled to a planar. For example a planar may interconnect switches chassis management controller storage controllers network interface optical media drive KVM interface user interface and or other modular information handling resources of chassis to mid plane of system . Accordingly such planar may include slots and or connectors configured to interconnect with such information handling resources.

Storage interfaces may include any system device or apparatus configured to facilitate communication between storage controllers and disk drives . For example a storage interface may serve to permit a relatively small number of communication links e.g. two between storage controllers and storage interfaces to communicate with a greater number of disk drives . Thus a storage interface may provide a switching mechanism and or disk drive addressing mechanism that allows an information handling system to communicate with numerous disk drives via a limited number of communication links and or channels. Accordingly a storage interface may operate like an Ethernet hub or network switch that allows multiple systems to be coupled using a single switch port or relatively few switch ports . A storage interface may be implemented as an expander e.g. a Serial Attached SCSI SAS expander an Ethernet switch a FibreChannel switch Internet Small Computer System Interface iSCSI switch or any other suitable switch. In order to support high availability storage system may implement a plurality of redundant storage interfaces as shown in .

Disk drive backplane may comprise any system device or apparatus configured to interconnect modular storage interfaces with modular disk drives . Accordingly disk drive backplane may include slots and or connectors configured to receive storage interfaces and or disk drives . In some embodiments system may include two or more backplanes in order to support differently sized disk drive form factors. To support redundancy and high availability a backplane may be configured to receive a plurality e.g. 2 of storage interfaces which couple two storage controllers to each disk drive .

Each disk drive may include computer readable media e.g. magnetic storage media optical storage media opto magnetic storage media and or other type of rotating storage media flash memory and or other type of solid state storage media and may be generally operable to store data and or programs e.g. one or more operating systems and or one or more application programs . Although disk drives are depicted as being internal to chassis in in some embodiments one or more disk drives may be located external to chassis e.g. in one or more enclosures external to chassis .

Optical media drive may be coupled to mid plane and may include any suitable system apparatus or device configured to read data from and or write data to an optical storage medium e.g. a compact disc CD digital versatile disc DVD blue laser medium and or other optical medium . In certain embodiments optical media drive may use laser light or other electromagnetic energy to read and or write data to an optical storage medium. In some embodiments optical media drive may be nonshared and may be user configurable such that optical media drive is associated with a single information handling system .

KVM interface may be coupled to mid plane and may include any suitable system apparatus or device configured to couple to one or more of a keyboard video display and mouse and act as switch between multiple information handling systems and the keyboard video display and or mouse thus allowing a user to interface with a plurality of information handling systems via a single keyboard video display and or mouse.

User interface may include any system apparatus or device via which a user may interact with system and its various information handling resources by facilitating input from a user allowing the user to manipulate system and output to a user allowing system to indicate effects of the user s manipulation. For example user interface may include a display suitable for creating graphic images and or alphanumeric characters recognizable to a user and may include for example a liquid crystal display LCD cathode ray tube CRT a plasma screen and or a digital light processor DLP projection monitor. In certain embodiments such a display may be an integral part of chassis and receive power from power supplies not explicitly shown of chassis rather than being coupled to chassis via a cable. In some embodiments such display may comprise a touch screen device capable of receiving user input wherein a touch sensor may be mechanically coupled or overlaid upon the display and may comprise any system apparatus or device suitable for detecting the presence and or location of a tactile touch including for example a resistive sensor capacitive sensor surface acoustic wave sensor projected capacitance sensor infrared sensor strain gauge sensor optical imaging sensor dispersive signal technology sensor and or acoustic pulse recognition sensor. In these and other embodiments user interface may include other user interface elements e.g. a keypad buttons and or switches placed in proximity to a display allowing a user to provide input to system . User interface may be coupled to chassis management controllers and or other components of system and thus may allow a user to configure various information handling resources of system e.g. assign individual information handling systems to particular information handling resources .

At step a chassis management controller e.g. a chassis management controller may receive a storage management command e.g. a storage application programming interface API call from a management console or other interface communicatively coupled to the chassis management controller and encapsulate the storage management command in a datagram e.g. an Ethernet packet frame or other datagram .

At step the chassis management controller may communicate the datagram to a switch management controller e.g. switch management controller . Such communication may be made over a private network of a chassis housing both of the chassis management controller and the switch management controller. In some embodiments such communication may be made using TCP IP.

At step the switch management controller may extract e.g. decapsulate the storage management command from the datagram. At step based on analysis of the command the storage management controller may identify a storage controller e.g. a storage controller associated with the command. At step the switch management controller may communicate via an appropriate switch e.g. a switch an input output control request based on the storage management command to the identified storage controller.

At step the switch management controller may receive from the identified storage controller via an appropriate switch a reply to the input output control request. At step the switch management controller may encapsulate the storage management command in a datagram e.g. an Ethernet packet frame or other datagram . At step the switch management controller may communicate the datagram to the chassis management controller. Such communication may be made over a private network of a chassis housing both of the chassis management controller and the switch management controller. In some embodiments such communication may be made using TCP IP.

At step the chassis management controller may extract e.g. decapsulate the reply from the datagram. At step the chassis management controller may communicate the reply to the sender e.g. a management console of the storage management controller. After completion of step method may end.

The storage controller may communicate a reply e.g. a return code to storage management controller which reply storage management controller may encapsulate into a network datagram e.g. an Ethernet packet frame or other datagram and communicate such datagram via the private network to a chassis management controller . The chassis management controller may extract the reply from the datagram and interpret such reply and or forward the reply to a management console interfaced to the chassis management controller.

Although discloses a particular number of steps to be taken with respect to method method may be executed with greater or lesser steps than those depicted in . In addition although discloses a certain order of steps to be taken with respect to method the steps comprising method may be completed in any suitable order.

Method may be implemented using system components thereof or any other system operable to implement method . In certain embodiments method may be implemented partially or fully in software and or firmware embodied in computer readable media.

Although the present disclosure has been described in detail it should be understood that various changes substitutions and alterations can be made hereto without departing from the spirit and the scope of the disclosure as defined by the appended claims.

