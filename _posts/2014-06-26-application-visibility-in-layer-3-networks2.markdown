---

title: Application visibility in layer 3 networks
abstract: A device may receive configuration information for generating an application probe. The application probe may be used to request network information, associated with an application, from network devices. The device may determine, based on the configuration information, traffic parameters associated with the application. The device may determine a requested type of network information to be requested from the network devices. The device may generate the application probe by including, in the application probe, the traffic parameters and information identifying the requested type of network information. The device may transmit the application probe to a network device of the network devices. The device may receive, from the network device and based on transmitting the application probe, a value associated with the requested type of network information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09596164&OS=09596164&RS=09596164
owner: Juniper Networks, Inc.
number: 09596164
owner_city: Sunnyvale
owner_country: US
publication_date: 20140626
---
In computer networks network management refers to the activities methods procedures and tools that pertain to the operation administration maintenance and provisioning of networked systems. Network management may be used to control a manner in which network traffic is processed by network devices included in a network.

According to some possible implementations a device may receive configuration information for generating an application probe. The application probe may be used to request network information associated with an application from network devices. The device may determine based on the configuration information traffic parameters associated with the application. The device may determine a requested type of network information to be requested from the network devices. The device may generate the application probe by including in the application probe the traffic parameters and information identifying the requested type of network information. The device may transmit the application probe to a network device of the network devices. The device may receive from the network device and based on transmitting the application probe a value associated with the requested type of network information.

According to some possible implementations a computer readable medium may store instructions that when executed by a processor cause the processor to receive configuration information for generating an application probe. The application probe may be used to request network information associated with an application from network devices. The instructions may cause the processor to determine based on the configuration information traffic parameters that identify a traffic flow associated with the application. The instructions may cause the processor to determine a type of network information to be requested from the network devices. The type of network information may be associated with processing of the application probe by the network devices. The instructions may cause the processor to generate the application probe. The application probe may include the traffic parameters and information identifying the type of network information. The instructions may cause the processor to transmit the application probe to a network device of the network devices. The instructions may cause the processor to receive from the network device and based on transmitting the application probe a value corresponding to the type of network information. The instructions may cause the processor to store the value corresponding to the type of network information.

According to some possible implementations a method may include receiving by a probing device configuration information for generating application probes. The application probes may be used to request network information associated with an application from network devices. The method may include determining by the probing device and based on the configuration information a traffic parameter associated with the application. The method may include determining by the probing device a network information type to be requested from the network devices. The method may include generating by the probing device the application probes. The application probes may identify the traffic parameter and the network information type. The method may include transmitting by the probing device a first application probe of the application probes to a first network device of the network devices. The method may include transmitting by the probing device a second application probe of the application probes to a second network device of the network devices. The method may include receiving by the probing device and from the first network device a first value associated with the network information type. The method may include receiving by the probing device and from the second network device a second value associated with the network information type. The method may include storing by the probing device the first value and the second value.

The following detailed description of example implementations refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements.

An application provider that provides an application e.g. a software application a web application etc. may want to monitor attributes of network traffic associated with the application as the network traffic is communicated over a network. However when the network traffic is communicated over the network e.g. a layer 3 network information that links the application to the network traffic may be lost. This may make it difficult to link attributes of the network traffic to the application. Implementations described herein assist in monitoring attributes of network traffic associated with an application e.g. so that an application provider may improve performance of the application .

As further shown in the probing device may transmit the application probes via a network and network devices e.g. routers switches gateways etc. included in the network may receive the application probes. An application probe may store information that indicates a lifetime of the application probe and when the lifetime expires a particular network device that detects expiration of the application probe may read the requested network information may determine a value associated with the requested network information e.g. a value of the network information for the particular network device and may provide the value back to the probing device. The probing device may provide values received from multiple network devices to an application device e.g. a web server a user device etc. and the application device may use the values to manage the application. In this way an application provider may receive accurate network information for network traffic associated with an application and may use the network information to modify performance of the application.

Application environment may include an environment associated with an application e.g. a software application a web application etc. . Application environment may include one or more hardware devices e.g. application device that assist in providing and or managing the application. As an example application environment may include a data center a cloud computing environment a server farm a server cluster a private network etc.

Application device may include one or more devices capable of requesting receiving generating storing processing and or providing network information associated with an application. In some implementations application device may include a device associated with providing and or managing an application e.g. and or may be located within application environment . For example application device may include a server device e.g. a web server an orchestration server a management server etc. or a similar type of device. Additionally or alternatively application device may include a device associated with receiving a service provided by an application e.g. and or may not be located within application environment . For example application device may include a desktop computer a laptop computer a mobile phone e.g. a smart phone or the like.

Probing device may include one or more devices capable of generating storing processing and or transmitting application probes and or information associated with application probes. For example probing device may include a server device e.g. a proxy server a monitoring server etc. a router a switch a gateway a hub a bridge a security device e.g. an intrusion detection device a firewall etc. a load balancing device or the like. In some implementations probing device may generate and transmit to network device s application probes for monitoring network traffic associated with an application and may receive values for the requested network information from network device s .

In some implementations probing device may be located internal to application environment . In some implementations probing device may be located external to application environment e.g. within a particular quantity of hops . In some implementations probing device may be located on a border between application environment and an external network e.g. network .

Network device may include one or more devices e.g. one or more traffic transfer devices capable of processing and or transferring traffic between endpoint devices e.g. application device that provides an application and a user device that receives a service provided by the application . For example network device may include a router a gateway a switch a hub a bridge a reverse proxy a firewall a server e.g. a proxy server a security device an intrusion detection device a load balancer or a similar type of device. Network device may receive an application probe from probing device and or via one or more other network devices may determine network information requested via the application probe and may provide the requested network information to probing device .

Network may include one or more wired and or wireless networks. For example network may include a cellular network a public land mobile network PLMN a wireless local area network e.g. a Wi Fi network a local area network LAN a wide area network WAN a metropolitan area network MAN a telephone network e.g. the Public Switched Telephone Network PSTN a private network an ad hoc network an intranet the Internet a fiber optic based network a cloud computing network and or a combination of these or another type of network.

The number and arrangement of devices and networks shown in is provided as an example. In practice there may be additional devices and or networks fewer devices and or networks different devices and or networks or differently arranged devices and or networks than those shown in . Furthermore two or more devices shown in may be implemented within a single device or a single device shown in may be implemented as multiple distributed devices. Additionally or alternatively a set of devices e.g. one or more devices of environment may perform one or more functions described as being performed by another set of devices of environment .

Bus may include a component that permits communication among the components of device . Processor may include a processor e.g. a central processing unit CPU a graphics processing unit GPU an accelerated processing unit APU etc. a microprocessor and or any processing component e.g. a field programmable gate array FPGA an application specific integrated circuit ASIC etc. that interprets and or executes instructions. Memory may include a random access memory RAM a read only memory ROM and or another type of dynamic or static storage device e.g. a flash memory a magnetic memory an optical memory etc. that stores information and or instructions for use by processor .

Storage component may store information and or software related to the operation and use of device . For example storage component may include a hard disk e.g. a magnetic disk an optical disk a magneto optic disk a solid state disk etc. a compact disc CD a digital versatile disc DVD a floppy disk a cartridge a magnetic tape and or another type of computer readable medium along with a corresponding drive.

Input component may include a component that permits device to receive information such as via user input e.g. a touch screen display a keyboard a keypad a mouse a button a switch a microphone etc. . Additionally or alternatively input component may include a sensor for sensing information e.g. a global positioning system GPS component an accelerometer a gyroscope an actuator etc. . Output component may include a component that provides output information from device e.g. a display a speaker one or more light emitting diodes LEDs etc. .

Communication interface may include a transceiver like component e.g. a transceiver a separate receiver and transmitter etc. that enables device to communicate with other devices such as via a wired connection a wireless connection or a combination of wired and wireless connections. Communication interface may permit device to receive information from another device and or provide information to another device. For example communication interface may include an Ethernet interface an optical interface a coaxial interface an infrared interface a radio frequency RF interface a universal serial bus USB interface a Wi Fi interface a cellular network interface or the like.

Device may perform one or more processes described herein. Device may perform these processes in response to processor executing software instructions stored by a computer readable medium such as memory and or storage component . A computer readable medium is defined herein as a non transitory memory device. A memory device includes memory space within a single physical storage device or memory space spread across multiple physical storage devices.

Software instructions may be read into memory and or storage component from another computer readable medium or from another device via communication interface . When executed software instructions stored in memory and or storage component may cause processor to perform one or more processes described herein. Additionally or alternatively hardwired circuitry may be used in place of or in combination with software instructions to perform one or more processes described herein. Thus implementations described herein are not limited to any specific combination of hardware circuitry and software.

The number and arrangement of components shown in is provided as an example. In practice device may include additional components fewer components different components or differently arranged components than those shown in . Additionally or alternatively a set of components e.g. one or more components of device may perform one or more functions described as being performed by another set of components of device .

As shown in process may include receiving configuration information for generating an application probe for requesting network information associated with an application block . For example probing device may receive configuration information e.g. via user input and or input received from another device . As an example a user may interact with an input device e.g. a desktop computer a laptop computer etc. to provide configuration information to probing device . In some implementations probing device may receive the configuration information via an application programming interface API that specifies configuration information and or a format for configuration information to be provided to probing device . Probing device may use the configuration information to generate one or more application probes for requesting network information associated with an application e.g. a software application a web application an application associated with a provided service etc. .

The configuration information may include for example an application identifier that includes one or more traffic parameters for identifying the application as being associated with a packet. For example an application identifier may include a source network address e.g. a media access control MAC address an internet protocol IP address a device identifier etc. associated with the application e.g. a source network address that identifies a device that provides the application such as application device a destination network address associated with the application e.g. that identifies a destination device to receive application information a port identifier associated with the application e.g. a source port identifier a destination port identifier etc. a protocol identifier associated with the application e.g. information that identifies a protocol via which application information is transmitted such as transport control protocol TCP user datagram protocol UDP SIGTRAN protocol a web traffic frame an encrypted web traffic frame etc. or the like. In some implementations the application identifier may include information that identifies a traffic flow via which application packets are carried. Additionally or alternatively the application identifier may include information associated with a tunnel via which application packets are carried e.g. a tunnel identifier tunnel endpoint identifiers a type of tunnel a protocol for the tunnel etc. .

Additionally or alternatively the configuration information may include monitoring information that identifies a manner in which probing device is to monitor network information associated with the application. For example the monitoring information may indicate a start time for monitoring the network information e.g. a start time at which application probes are to be transmitted to network devices an end time for monitoring the network information e.g. an end time at which probing device is to stop transmitting application probes a time period during which probing device is to monitor the network information a quantity of network devices from which to request network information e.g. a quantity of hops to which application probes are to be sent etc.

The configuration information may identify a type of network information to be requested from network devices in some implementations. Network information may include information associated with network traffic being processed by network device . Additionally or alternatively network information may include information associated with processing the application probe e.g. by network device . For example network information may include a measure of bandwidth utilization of network device e.g. an average bandwidth utilization for all network traffic a bandwidth utilization on a particular interface via which the application probe is input and or output etc. a measure of central processing unit CPU utilization of network device a quantity of network traffic being processed by network device a measure of latency associated with network traffic and or an application probe processed by network device e.g. an average latency a maximum latency a minimum latency a switching latency etc. a measure of jitter associated with the network traffic a packet drop rate associated with the network traffic and or the application probe a queue utilization of network device information that identifies a path for the network traffic and or the application probe e.g. a path through one or more network devices such as an equal cost multi path ECMP routing path load balancing information e.g. an ECMP bucket utilization for detecting fair load balancing a click synchronization protocol used by network device e.g. a precision time protocol PTP etc. etc.

In some implementations the configuration information may identify a set e.g. one or more of the above types of network information or other types of network information to be requested from network devices . Additionally or alternatively the user may use a group identifier to select a set of network information types and the group identifier may be provided to probing device . Probing device may use the group identifier to identify the set of network information types to be requested. For example the user may provide an indication to collect information associated with a traffic flow e.g. application centric information information associated with an overlay such as a tunnel e.g. application overlay information etc.

As further shown in process may include generating the application probe based on the configuration information block . For example probing device may generate the application probe using the configuration information. The application probe may include a packet that identifies an application e.g. using an application identifier application parameters etc. as described above and or that identifies network information to be returned by one or more network devices that receive the application probe.

For example probing device may include in a payload of the packet an application probing header that indicates that network information is to be returned by network device and or that identifies a type of network information to be returned. In some implementations probing device may generate the application probe using a protocol specified in the configuration information e.g. a same protocol as application packets . Additionally or alternatively probing device may generate the application probe by encapsulating the payload e.g. using IP encapsulation and or application level encapsulation .

In some implementations probing device may insert expiration information in the application probe. Network device may use the expiration information to determine whether to provide the requested network information. For example if the expiration information indicates that the application probe e.g. a packet expires upon being received by a particular network device then the particular network device may detect this expiration and may provide the requested network information. The expiration information may identify an expiration condition that causes the application probe to expire e.g. a particular amount of time after which the application probe expires a particular quantity of hops after which the application probe expires etc. .

In some implementations the expiration information may include a time to live TTL indicator. The TTL indicator may indicate a time period for application probe expiration and or may indicate a quantity of hops after which the application probe expires. Probing device may generate multiple application probes for a particular application and different application probes may have different TTL indicators. For example probing device may generate a first application probe with a TTL indicator of one indicating that the application probe expires upon reaching a first network device that is one hop away from probing device . Similarly probing device may generate a second application probe with a TTL indicator of two indicating that the application probe expires upon reaching a second network device that is two hops away from probing device . In this way probing device may gather end to end network information from multiple network devices .

As further shown in process may include transmitting the application probe to one or more network devices block . For example probing device may transmit each generated network probe via a network e.g. network . The application probes may be received by network device s which may provide requested network information upon detecting expiration of the application probe as described in more detail elsewhere herein. In some implementations probing device may periodically transmit a set of application probes. Additionally or alternatively probing device may transmit the set of application probes based on configuration information e.g. monitoring information that indicates when to transmit application probes how many application probes to transmit etc. . In some implementations probing device may encrypt the application probes.

In this way probing device may use simulated application packets in the form of application probes to collect network information that indicates a manner in which actual application packets e.g. that carry application information are processed in a network e.g. by network devices . Thus probing device may collect network information relating to an application layer e.g. layer 4 using application probes in a network layer e.g. layer 3 .

Although shows example blocks of process in some implementations process may include additional blocks fewer blocks different blocks or differently arranged blocks than those depicted in . Additionally or alternatively two or more of the blocks of process may be performed in parallel.

As shown in and by reference number assume that a user e.g. an application administrator interacts with an input device e.g. a desktop computer a laptop computer etc. to input configuration information using a probing device API. For example assume that the user inputs traffic parameters for identifying an application to be monitored. As shown assume that the application is identified using a source IP address of 192.26.8.4 a source port of 80 a destination IP address of 172.16.254.1 a destination port of 80 and a protocol of TCP. As further shown assume that network information is to be monitored from 2 hops and that the requested network information is to include application centric information e.g. which may act as a group identifier associated with one or more network information types to be requested from network device . As shown by reference number assume that the input device provides the configuration information to probing device .

As shown in and by reference number assume that probing device generates application probes based on the configuration information. For example assume that probing device generates two application probes shown as Probe and Probe to return network information from each of the 2 hops indicated in the configuration information. Further assume that each application probe includes an application identifier based on the traffic parameters included in the configuration information includes a different TTL indicator based on the number of hops to be monitored and includes an application probing header that identifies requested network information types. In this case assume that application centric information to be requested from network devices includes a measure of latency at each hop e.g. each network device an application flow path at each hop and a measure of bandwidth utilization at each hop.

As shown by reference number assume that probing device transmits the application probes over a network. As shown by reference number since Probe has a TTL indicator of one e.g. will expire at the first hop reached a first network device shown as Network Device may receive Probe and send the requested network information back to probing device as described in more detail elsewhere herein. As shown by reference number since Probe has a TTL indicator of two e.g. will expire at the second hop reached Network Device may transmit Probe to a second network device shown as Network Device . Network device may receive Probe and may send the requested network information back to probing device as described in more detail elsewhere herein.

Since the application probes include an application identifier for the application to be monitored e.g. since an application probe simulates an application packet network devices may process the application probes as if the application probes were actual application packets that carry application information. In this way probing device may gather network information that indicates a manner in which actual application packets are processed in a network e.g. a layer 3 network .

As indicated above are provided merely as an example. Other examples are possible and may differ from what was described with regard to .

As shown in process may include receiving an application probe and detecting probe expiration block . For example network device may receive an application probe e.g. from probing device and or from another network device . Network device may determine whether the application probe has expired. For example network device may read expiration information from the application probe to determine whether the application probe has expired. In some implementations network device may determine whether a TTL indicator indicates application probe expiration. If the TTL indicator indicates application probe expiration then network device may detect the application probe expiration. If the TTL indicator does not indicate application probe expiration then network device may reduce the TTL indicator e.g. by decrementing a TTL counter and may transmit the application probe to a next network device in a routing path.

As further shown in process may include determining network information requested via the application probe block . For example when network device detects application probe expiration then network device may determine network information requested via the application probe. Network device may read the application probe e.g. a payload of the application probe to identify one or more types of network information requested by probing device . Network device may determine values for each type of requested network information and may include the values in a return packet to be provided to probing device . In some implementations network device may retrieve the values e.g. from a data structure stored locally by network device from a data structure stored remotely from network device but accessible by network device etc. .

As further shown in process may include providing the requested network information block . For example network device may insert the requested network information in a return packet and may transmit the return packet to probing device . In some implementations network device may include the requested network information e.g. values for the types of requested network information in a payload of the return packet. Additionally or alternatively network device may encapsulate the payload using an Internet Control Message Protocol ICMP header that includes for example the application identifier e.g. determined by reading the application probe a device identifier for network device e.g. a network address that identifies network device as a source of the requested network information a device identifier for probing device e.g. a network address that identifies probing device as a destination for the requested network information etc. Additionally or alternatively network device may encapsulate the ICMP header using an IP header. Additionally or alternatively network device may include a TTL indicator in the return packet such that the return packet expires when the return packet arrives at probing device .

As further shown in process may include receiving the requested network information block . For example probing device may receive the return packet from network device and may read the requested network information e.g. the value s for the network information type s from the return packet.

As further shown in process may include aggregating network information received in association with multiple application probes block and providing the network information and or the aggregated network information block . For example probing device may provide the received network information e.g. the received values to application device . In some implementations probing device may provide information that identifies an application with which the network information is associated e.g. based on an application identifier included in the return packet and or stored by probing device . In this case application device may process and or aggregate the network information to modify one or more characteristics of the application e.g. to improve application performance . In some implementations application device may request network information from probing device using an API. For example application device may provide an application identifier and probing device may return network information associated with the application identifier.

Additionally or alternatively probing device may aggregate network information associated with multiple application probes and may provide the aggregated network information to application device . For example probing device may aggregate network information associated with a particular application received from multiple network devices . Additionally or alternatively probing device may perform a calculation using network information received from multiple network devices to determine an end to end treatment of application packets. For example probing device may determine an average value e.g. an average latency across multiple network devices an average bandwidth utilization etc. may determine a maximum value e.g. a maximum value of a particular type of network information may determine a minimum value e.g. a minimum value of a particular type of network information or the like.

In this way application device may use the aggregated network information to improve application performance. For example application device may use the network information to execute e.g. launch an application in an intelligent manner may use the network information to improve performance of an application that is already executing etc.

Although shows example blocks of process in some implementations process may include additional blocks fewer blocks different blocks or differently arranged blocks than those depicted in . Additionally or alternatively two or more of the blocks of process may be performed in parallel.

As shown in and by reference number assume that Network Device retrieves e.g. from a data structure the information requested by Probe . For example assume that Network Device determines that the Probe is associated with a latency of 200 milliseconds ms an application flow path that includes Network Device and Network Device and a bandwidth utilization of 60 . As shown by reference number assume that Network Device retrieves the information requested by Probe . For example assume that Network Device determines that the Probe is associated with a latency of 500 ms an application flow path that includes Network Device and Network Device not shown and a bandwidth utilization of 98 . As shown by reference number assume that Network Device and Network Device each encapsulate this requested network information in return packets and provide the returns packet to probing device .

As shown in and by reference number assume that probing device aggregates the received network information. For example probing device may aggregate the network information by storing a relationship between the application identifier and the network information received from each network device e.g. Network Device and Network Device . As another example probing device may aggregate the network information by performing one or more calculations and storing a relationship between the application identifier and a result of the calculation s . For example and as shown assume that probing device determines an average per hop latency e.g. 350 ms an aggregate application flow path e.g. that includes Network Device Network Device and Network Device and an average bandwidth utilization e.g. 79 . Furthermore assume that probing device identifies Network Device as a problematic network device e.g. based on one or more values of requested network information satisfying one or more thresholds .

As shown by reference number assume that probing device provides the network information and or the aggregated network information to application device . As shown by reference number assume that application device modifies delivery of the application based on the received network information. In this way application device may use network information relating to a manner in which application packets are processed by network devices to manage an application.

As indicated above are provided merely as an example. Other examples are possible and may differ from what was described with regard to .

Implementations described herein assist in monitoring attributes of network traffic associated with an application e.g. so that an application provider may improve performance of the application .

The foregoing disclosure provides illustration and description but is not intended to be exhaustive or to limit the implementations to the precise form disclosed. Modifications and variations are possible in light of the above disclosure or may be acquired from practice of the implementations.

As used herein the term component is intended to be broadly construed as hardware firmware and or a combination of hardware and software.

As used herein a packet may refer to a network packet a frame a datagram a segment a fragment of a packet a fragment of a frame a fragment of a datagram a fragment of a segment or any other formatted or unformatted unit of data capable of being transmitted via a network.

Some implementations are described herein in connection with thresholds. As used herein satisfying a threshold may refer to a value being greater than the threshold more than the threshold higher than the threshold greater than or equal to the threshold less than the threshold fewer than the threshold lower than the threshold less than or equal to the threshold equal to the threshold etc.

It will be apparent that systems and or methods described herein may be implemented in different forms of hardware firmware or a combination of hardware and software. The actual specialized control hardware or software code used to implement these systems and or methods is not limiting of the implementations. Thus the operation and behavior of the systems and or methods were described herein without reference to specific software code it being understood that software and hardware can be designed to implement the systems and or methods based on the description herein.

Even though particular combinations of features are recited in the claims and or disclosed in the specification these combinations are not intended to limit the disclosure of possible implementations. In fact many of these features may be combined in ways not specifically recited in the claims and or disclosed in the specification. Although each dependent claim listed below may directly depend on only one claim the disclosure of possible implementations includes each dependent claim in combination with every other claim in the claim set.

No element act or instruction used herein should be construed as critical or essential unless explicitly described as such. Also as used herein the articles a and an are intended to include one or more items and may be used interchangeably with one or more. Furthermore as used herein the term set is intended to include one or more items and may be used interchangeably with one or more. Where only one item is intended the term one or similar language is used. Also as used herein the terms has have having or the like are intended to be open ended terms. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

