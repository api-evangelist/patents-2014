---

title: Systems and methods for allocating bandwidth in switched digital video systems based on interest
abstract: Systems and methods for allocating bandwidth in a switched digital video (SDV) system based on charmed interest. In some embodiments, bandwidth is deallocated from channels and allocated to requested channels having a higher interest. Tiered approaches for allocating bandwidth are disclosed. Embodiments in which QAMs are allocated across services in a multi-service system based on interest are also disclosed. Embodiments for accommodating emergency access system (EAS) functionality in a SDV system are also disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09516367&OS=09516367&RS=09516367
owner: Rovi Guides, Inc.
number: 09516367
owner_city: San Carlos
owner_country: US
publication_date: 20140106
---
This application is a continuation of U.S. patent application Ser. No. 13 207 390 filed Aug. 10 2011 now U.S. Pat. No. 8 627 389 which is a continuation of U.S. patent application Ser. No. 11 880 448 filed Jul. 20 2007 now abandoned each of which is hereby incorporated by reference in its entirety.

This invention relates to video distribution systems and more specifically switched digital video SDV technologies for improving the utilisation of available bandwidth on these distribution systems.

In the current state of the art SDV systems allocate channels to available bandwidth. Switched channels are assisted to available frequencies as they are requested. Today s SDV systems are typically designed with the assumption that the number of channels being requested will net exceed the available bandwidth. Thus bandwidth constraints do not generally result in users being blocked from accessing channels they request. As video distribution systems evolve however the growing number of media sources and end users may render this assumption invalid as the probability that the interest for sources will exceed the amount of available bandwidth will increase.

In accordance with the principles of the present invention systems and methods are provided for considering the interest for channels before allocation so that at any given time the channels with the greatest number of requesters are given preference in being allocated to the available bandwidth. By contemplating interest before allocation only channels that have met a minimum threshold of requester are made available keeping bandwidth available for the most requested channels.

In some embodiments systems and methods are provided for considering the interest of each allocated channel following allocation so that at any time a channel with very few users may be de allocated from the bandwidth to make room for another channel with a relatively larger number of requesters.

A channel interest manager considers the relative priority of a requested channel before allocating it to bandwidth. The channel interest manager operates between the SDV server and an SDV client running on a user s equipment e.g. set top box hereinafter STB . The channel interest manager calculates the priority of a currently unallocated channel and determines whether that channel should be allocated at least in part as a function of the interest for that channel relative to other channels in the system. The channel interest manager may be any combination of hardware and software suitable for this purpose e.g. one or more processors memory storage etc. where the processors are programmed with suitable programming logic to perform the functions of the channel interest manager . As understood to one skilled in the art the channel interest manager may be implemented on a stand alone server co hosted on a server with other applications or integrated as part of another system application e.g. the SDV manager and operate cooperatively or as part of a system or SDV policy manager which considers other characteristics of the system in making dynamic decisions on which channels to allocate.

The channel interest manager allocates the requested channel to available bandwidth if it meets the interest threshold and there is sufficient bandwidth available. If there is insufficient bandwidth the channel interest manager allocates the requested channel after de allocating or bumping another channel if the requested channel meets the interest threshold and has a greater interest relative to other allocated channels. The channel interest manager may determine that interest for a channel exceeds the interest threshold using any suitable approach.

In some embodiments a request for an SDV channel is counted when a requester parks on it by tuning to it in an attempt to watch it and waiting until a channel is switched in. The channel interest manager may decrement a request count when a requester tunes away. The channel interest manager may also tag a requester who tunes away as previously interested so that when the channel is allocated at some future time the previously interested requester may be notified. In other embodiments requests are counted when a requester votes for the channel s allocation in advance of the scheduled time for the programming e.g. such as by scheduling a reminder or a recording for a program . In various embodiments feedback may be provided to the requester as to likelihood of channel allocation. The feedback can be used with an inter active feature to give the requester the option to wait longer for possible allocation or to tell the manager he or she is no longer interested. The allocation can also occur automatically with no interaction with the user.

In some embodiments the channel interest manager is made aware of program boundaries on switched channels. With this information the channel interest manager may determine that voting or parking by users on a channel at a particular timeframe represents interest in the content that is scheduled for that channel at the given timeframe e.g. the start of the program .

Delays may occur in the allocation of the channel as a result of the voting and or parking interest for the channel remaining below the threshold for the allocation of the channel. These delays might normally result in the users missing the beginning of the programming on the channel.

However in some embodiments when the channel interest manager detects that the channel interest for a channel may actually be a channel interest for a program beginning on that channel at a particular time but that the allocation may involve delays beyond that particular timeframe it may buffer the channel for the users.

Such buffering may be accomplished by the channel interest manager routing the channel content to a channel buffering subsystem until such time as the channel becomes available. Upon allocation of the channel users may then be presented with the option s of a joining the program in progress and missing the beginning or b watching the program from the beginning e.g. similar to a start over function . In the latter case if the program is watched in real time it s viewing may run beyond the beginning of the next program scheduled on this or another channel and this may be undesirable to the user. Therefore in some embodiments an option of watching the program in faster than real time is provided or alternatively an option of skipping through some portions of the program may be enabled. This embodiment allows the program to fit into its regularly scheduled timeslot. Audio may be pitch controlled e.g. by means of an audio processing technique such as the complex cepstrum to maintain as close to the original pitch as the real time playback while allowing the audio to be sped up in synchronization with the video.

In some embodiments the SDV client may offer the requestor advertisements while the requester waits for allocation of bandwidth for a channel. In some embodiments a delayed allocation is anticipated a flexible number of advertisements or filler programming is provided e.g. locally stored on a user s hard drive and programs are pre edited so they occupy less than the full time slot to accommodate these additional up front advertisements or filler without loss of meaningful content e.g. the conclusion to a detective program .

When sufficient bandwidth does not exist for a requested channel the channel interest manager may allocate bandwidth for the channel using any suitable approach. In some embodiments a requested switched channel or a previously switched in channel may be degraded to a version that requires less bandwidth e.g. SD rather than HD before allocation is made. In other embodiments requested channels meeting the interest threshold may bump a previously allocated channel with lower relative interest.

In some embodiments the channel interest manager may consider various bump parameters before de allocating a channel. For example the channel interest manager may compare how long an allocated channel has been allocated with a no bump threshold time and decide not to bump a program that might otherwise have been bumped if not for the fact that the program s allocation time exceeded this no bump threshold and its de allocation might be particularly disruptive to a viewer. A no bump threshold might be for example ten minutes or long enough for a watcher to become somewhat involved in the program he she is watching.

In other embodiments the channel interest manager may work with a revenue manager and or a trend manager and the interest may be considered in light of revenue impacts and trends before a channel is de allocated. A revenue manager is software and or hardware e.g. one or more processors memory storage etc. where the processors are programmed with suitable programming logic to perform the functions of the revenue manager that compares the revenue potential e.g. as a result of associated advertisement or pay per view fees of the previously allocated channel to a requested channel before deciding whether or not to de allocate the previously allocated channel. A trend manager is software and or hardware e.g. one or more processors memory storage etc. where the processors are programmed with suitable logic to perform the functions of the trend manager that measures the previously allocated channel s viewer activity over time before de allocation. For example if several users have tuned away from a channel at a given time it could just be because a commercial is present at that time rather than an indication of waning interest. The number of users currently tuned at any given instant might not be an accurate indication of interest in such a scenario and de allocation of the channel would not be desirable or appropriate unless the general trend was moving in the direction of waning viewership over time. As another example consider that a trend manager and a channel interest manager working alone or together may de allocate a first channel relative to another if the viewership of the first channel is below the other channel however when a revenue manager is employed it may bring into consideration the revenue associated with viewership of the first channel as well. So for example if the first channel has advertisement spots that paid the video service provider twice per viewer what the advertisement spots on the other channel paid it may be worth maintaining the allocation of the first channel until viewership of the first channel dropped below half viewership of the other channel. The trend manager would be invoked to insure that the maximized revenue trend is likely to be sustained.

In some embodiments the interest management system may offer a requester or a bumped user one or more options when a channel is not allocated immediately upon request. For example in one embodiment a requester may be provided with the option to watch the unavailable program as a pay per view program. The SDV channel may then temporarily be provided as a VOD stream and the user may be charged. Alternatively or additionally the requester may be provided the option to set up a recording to record the program if it becomes available at a later time on a broadcast channel or via a switched channel at a time e.g. early morning when demand for bandwidth may have decreased. In some embodiments the requester or bumped user may be provided with an option to watch related content. In some embodiments the requester may be provided with an option to watch content that is popular at the moment. This feature may be extended in some embodiments to notify all users when a particular channel is extremely popular at any given time e.g. breaking news .

In some embodiments the channel interest manager detects program overruns or ether last minute scheduling changes associated with programs on non SDV channels e.g. broadcast channels . The channel interest manager may then compare the number of viewers interested in watching these program overruns with the number of viewers interested in watching the regularly scheduled programming for those channels. This statistic may then be sent to the video service provider for consideration before determining which program to allocate to its regularly allocated broadcast bandwidth and which to make optionally available subject to interest and available bandwidth on its switched bandwidth allocation. The program not chosen for the regular broadcast bandwidth may be provided via SDV if the interest threshold is met. Moving a program overrun from a broadcast channel to a switched tier channel gives the video service provider the ability to allow viewers to watch the overrun if there is interest while not disturbing the regularly scheduled programming lineup that had been published for the broadcast channel. For example if on the FOX network a football game is scheduled from 7 9 PM followed by House at 9 PM and it turns out that the game goes into overtime the interest management system in one embodiment may cause a message to be displayed to a user via the on screen display of a video terminal e.g. STB providing the user with the option to continue to watch the currently watched program or watch House. Then depending on interest the user may be switched seamlessly or not to a channel where he can either watch the continuation of the overrun game or the episode of House. In some embodiments an option may also be provided e.g. on a dual tuner STB to record the program that is not watched. In some cases if insufficient interest is logged for watching the end of the overrun program e.g. e.g. the game is between two non local teams of little interest to begin with the overrun may not be made available at all and this fact may be provided to the potential watchers.

In some embodiments channels of the SDV system are assigned to tiers. For example there may be one SDV premium tier and discount tiers 1 2 3 etc. lower tiers may for example be associated with a larger tune delay all the way to not available and a lower probability of being allocated.

The channel interest manager may also allocate bandwidth for a program in a mixed service system as a function of one channel s interest relative to another s and in some embodiments additionally the impact on revenue. For example the channel interest manager may consider the relative priority of VOD and SDV by considering the interest and revenue potential of each. In this way VOD and SDV are competing for the same bandwidth and when no bandwidth is left one channel must be blocked. In this example the channel interest manager allocates the bandwidth to the channel with the higher priority based on interest and revenue potential with the interest registered in advance by any of the mechanisms discussed thus far including trending of advance requests to watch a particular program consideration of trends for related programs or channels consideration of the trend of users who watch a channel through program changes etc.

In another embodiment Emergency Alerts may be provided using a switched channel. This makes a good deal of sense given that Emergency Alerts are few and far between and it is thus wasteful to allocate a full channel to emergency alert when it is rarely watched. However in the prior art emergency alerts are always assumed to be on non switched channels because of their importance and because of the classical way in which emergency alert are handled in video distribution systems such as Cable systems. In the first case there is concern that in a classical SDV system there is some small blocking probability for any switched channel and this blocking probability is independent of the interest for that channel. In some embodiments of the present invention however blocking probability is inversely proportional to the interest for a channel during a given window of time e.g. the interest assessment interval . In classical emergency alert systems when a STB receives an EAS alert it is force tuned to the EAS channel. Under this circumstance in the present invention this would cause a peak in interest for the EAS channel given that all STBs are requesting it concurrently and this high interest for use would logically absent revenue considerations result in the EAS channel being quickly allocated. To avoid flooding the network with requests coincidentally from multiple video terminals in some embodiments of the present invention the EAS switched channel is treated as a special case by a STB wherein requests for it are delayed by a random backoff before being sent to the SDV server.

In some embodiments all force tunes are treated with a random backoff before request in anticipation of these force tunes being sent to multiple terminals concurrently. In some embodiments a flag is sent with a force tune to indicate that it is a broadcast or groupcast force tune and therefore should result in a random backoff before the channel is requested. When the channel interest manager receives numerous requests that exceed the interest threshold the EAS channel is then allocated to bandwidth that is ordinarily free for other channels absent an emergency.

In some embodiments the EAS channel tuning information may be stored in a carousel data feed with a time to live of infinity as a special mechanism only used for EAS so that it persists in the carousel feed as an active channel and does not require a server response of which frequency and program number to use to tune the channel. Thus emergency alert channel tuning can be very fast. In such embodiments though the EAS channel is listed as active in the carousel it may not actually be allocated to the bandwidth until the alert is active. This embodiment involves notification of the server of the alert event in which case the server switches the appropriate EAS program into the carouseled frequency and program number. The purpose of having the channel listed in the carousel is so that the STBs will know where to tune very quickly without having to request the channel from the server. The EAS channel is typically hidden from the user. The frequency and program number that is reserved for EAS may actually be in use for a visible channel. For example in a cable system such as Comcast s cable systems a hidden virtual channel number and a specific frequency and program number may be set aside for EAS. For example frequency program and an infrequently watched channel such as the muppets channel may be allocated to virtual channel frequency program the virtual channel number being visible to the user.

Up to this point we have discussed the operation of the channel interest manager primarily with respect to single tuner STBs. However it is anticipated that the manager will function similarly with respect to multiple tuner STBs and STBs with the ability to handle multiple channels per tuner e.g. multiple IP stream based video audio services or multiple channels within a multiple service transport multiplex .

A multiple tuner STB includes multiple tuners each with at least one associated decoder. Such a STB can tune to more than one channel at a time. A dual tuner STB for example can tune to two frequencies simultaneously. Each tuner can extract a program from the multiplex it finds at its tuned frequency and an associated decoder can be used to decode the program. Thus a dual tuner STB may be able to tune extract decode and display two programs from two channels simultaneously. Note that the frequency and program number tuned by one tuner may be the same or different than the frequency or program number tuned by the other tuner.

In embodiments of the channel interest manager system where multiple tuner STBs are supported the channel interest manager may receive and manage requests and interest on a per tuner basis instead of on a per STB basis. In such embodiments for example with a threshold of two set for a channel a single STB may meet that threshold of two by attempting to tune to the channel with both tuners. Also in such embodiments two STBs each STB tuned with one tuner to channel A for example and each STB tuned with the other tuner to channel B for example may result in an interest of two being logged for each of channels A and B at the channel interest manager. Similar consideration would be given to multiple tuner STBs with greater numbers of tuners per STB e.g. triple and quad tuner STBs or home media managers with multiple tuners . In such embodiments both a tuner identifier and a STB identifier may be sent in the channel request message from the STB to the channel interest manager. In some STBs there are multiple decoders available to each tuner. So for example such a STB with only a single tuner decodes and displays more than one channel at a time.

In embodiments of the channel interest manager system where STBs with multiple decoders per tuner are supported the channel interest manager may receive and manage requests and interest on a per decoder basis instead of on a per STB or per tuner basis. In such embodiments for example with a threshold of two set for a channel it may be possible for a single tuner STB with a concurrent decode capability of two decoders to meet that threshold by attempting to decode the same program from the same frequency using both decoders to the channel with both tuners. In such embodiments a decoder identifier in addition to a STB identifier and perhaps a tuner identifier may be sent in the channel request message from the STB to the channel interest manager. Note that IP video based STBs including those which conform to the DOCSIS standard as well as those that utilize fiber to the curb or fiber to the home technology typically are of the latter type of system which involve having multiple decoders per tuner. In the case of fiber optic supported STBs the tuner may be replaced with the appropriate fiber optic receiver and switching circuitry.

Sources modulate and packetize their services for transmission over network to edge device . Network may be for example a gigabit Ethernet network and sources may provide their services via TCP IP and Ethernet and may include use of MPEG transport protocol. Edge device e.g. a Harmonic NGS9000 edge QAM manufactured by Harmonic Corporation of Sunnyvale Calif. includes a bank of modulators. Each modulator e.g. quadrature amplitude modulators may accept a digital transport stream of roughly 3 Mbps representing a video program multiplex it with other video transport streams create a transport stream multiplex and modulate it onto the cable plant. A 256 QAM modulator for example will accept multiple digital transport streams comprising a multiplex of approximately 45 Mbps and modulate it to fit within an analog bandwidth of 6 MHz on a cable plant. Edge device receives the services from network and under the control of edge resource manager ERM allocates portions of modulators to the services. For example edge device may receive a command from ERM to connect to a 3 Mbps service from network that originated from a broadcast program source feeding SDV block . It may then allocate a program within one of its internal 256 QAM modulators. Edge device may allocate a portion of a given QAM to VOD instead of VRN depending on the instructions from ERM . Or edge device may allocate QAMs or not among different channels of the SDV service . In this regard QAMs may be shared flexibly and dynamically across services or allocated in a fixed manner to specific SDV channels. For example in a given configuration four QAMs of an eight QAM edge device may be allocated to switched channels two to VOD one to cable modem and one to VRN.

Edge device allocates and de allocates QAMs under the control of ERM . ERM may be any suitable combination of hardware and software for performing its features described herein. For example it may include control circuitry having include one or more processors e.g. MIPs and or Motorola 68000 family processors memory e.g. RAM ROM flash memory and hard disks communications circuitry and any other suitable components for providing its features described herein. ERM activates a controllable switch in network not shown between network and edge device to direct what services or portions of services are coupled to the inputs of edge device . ERM instructs edge device to QAM modulate an input signal onto a carrier frequency. ERM may specify a QAM and track what services or channels are modulated on given QAMs e.g. using a lookup table or may simply instruct edge device to allocate a given input and edge device returns the carrier frequency and program number. ERM typically informs switched services session manager session manager of the carrier frequency and program number where the channel can be found. The session manager in turn inserts this information into the active channels list in carousel data feed . Carousel data feed acts as a quick lookup channel map for set top boxes . Carousel may be transmitted in band with or out of band from the other channels and or services on a cable plant.

Edge device modulates services and channels and transmits them to STBs of a plurality of subscribers over for example an analog or digital cable plant or via an analog or digital terrestrial broadcast system. For clarity shows only the embodiment where edge device transmits the channels and or services over a single path . Path may be a standard hybrid fiber coax path full fiber path or satellite or other high speed data path. In some embodiments Internet Protocol IP is used to transmit the channels and or services to STBs .

STBs include switched digital video clients . In some embodiments clients communicate with an interactive media guidance application also implemented on the STBs such as an interactive television program guide via a suitable application programming interface the guide application is not shown to avoid over cluttering the figure . In other embodiments the interactive media guidance application includes switched digital video functionality.

Although in the disclosed embodiment client runs on STB any equipment suitable for accessing SDV may be used. For example a personal computer with a television card and or Open Cable Unidirectional Receiver OCUR PCTV . STB may be any suitable settop such as for example a DCT 2000 2500 5100 6208 or 6412 set top box provided by Motorola Inc.

STB may include any suitable control circuitry display circuitry communications circuitry memory etc. The control circuitry may include one or more tuners e.g. analog or digital tuners encoders and decoders e.g. MPEG encoders and decoders processors e.g. MIPS and or Motorola 68000 family processors memory e.g. ram ROM flash memory and hard disks communications circuitry e.g. cable modem and ATSC 256 QAM receiver circuitry input output circuitry e.g. graphics circuitry and any other suitable components for providing analog or digital television programming in an SDV system.

A display device such as a television and a remote control may be coupled to STB to display various displays and receive user inputs. The operation of control and other circuitry in a STB is well known to those skilled in the art. The control circuitry is adapted to receive user input from input device execute the instructions of client using suitable microprocessors memory etc. execute the instructions of any other interactive applications e.g. an interactive television program guide and direct the display circuitry to generate a display.

Whatever the chosen approach client detects a user channel service change and determines whether the desired channel or service is currently allocated by examining carousel . A user may indicate a desire to change channels by for example tuning using arrow keys on a remote entering a channel number on a remote or using any suitable interactive media guidance function that allows the user to select a program or source a user may indicate a desire to change services by for example linking to a VOD service from a television channel or accessing a service via the interactive media guidance application. In some embodiments carousel is not used or only used under some circumstances. Typically however if a carousel is used client will first check the carousel when it desires to tune to a channel to see if it has already been allocated. If a channel has not already been allocated client issues a request to switched services session manager for the frequency of the QAM and program number within that QAM frequency where the channel or service may be found.

As described in more detail below before allocating a channel session manager determines whether there is sufficient bandwidth and or interest for the requested channel. In response to determining if sufficient interest exists session manager instructs ERM to allocate bandwidth for the channel and if necessary to first de allocate another channel or service to free up the required bandwidth.

A channel interest manager which determines the interest for different channels and services is embedded within switched services session manager . Channel interest manager can work alone or in cooperation with revenue manager which assigns priority based on potential revenue of each channel or service that may be allocated or potential loss associated with each channel that may be deallocated and trend manager which considers viewer trends to determine if viewers are active. Channel interest manager may be any suitable combination of hardware and software for performing its features described herein. For example channel interest manager may Include control circuitry having include one or more processors e.g. MIPs and or Motorola 68000 family processors memory e.g. RAM ROM flash memory and hard disks communications circuitry and any other suitable components for providing its features described herein. Trend manager may be any suitable combination of hardware and software for performing the features described herein. For example trend manager may include control circuitry having include one or more processors e.g. MIPs and or Motorola 68000 family processors memory e.g. RAM ROM flash memory and hard disks communications circuitry and any other suitable components for providing the features described herein.

When a request for a channel is made from a STB the STB s local copy of the data from carousel is first checked to see if that channel has already been allocated bandwidth and whether the allocated frequency and program number is stored in the carouseled channel map. If the channel map does not contain the requested channel client then sends the request to switched services session manager . Session manager communicates with channel interest manager which then performs the algorithms necessary to determine if a channel is to be allocated to bandwidth and if a currently allocated channel may be bumped See . Session manager may also communicate with revenue manager and trend manager in a like manner and or other external information sources that may aid in the decision.

Switched services session manager then tells ERM that an unallocated channel should be allocated to available bandwidth either already available or available after bumping another channel . ERM communicates with edge device to first deallocate any bumped channels or alternatively degrade HD channels to SD or take other measures to free bandwidth including changing the partition of QAMs between service types e.g. VOD and SDV and allocate the new channels to edge device . During the new allocation the new channel is then linked from the network to the newly allocated QAM program number. For example in some embodiments network is a gigabit Ethernet network and edge device is linked to network via a switch. When edge device wants to connect to a service that is carried over IP on the gigabit network it registers a multicast join with the switch. Edge device communicates the frequency for the new channel to ERM which in turn provides this information to session manager which updates the channel map in carousel . Edge device modulates the requested channel on the allocated frequency and program number where it is ultimately received by STB . STB receives the new frequency for the channel by checking the channel map in carousel or via direct response to a channel tune request via session manager and tunes to the frequency program number to watch the program.

In some embodiments the Emergency Alert System EAS channel is provided using SDV. When a STB receives an EAS alert channel interest manager receives numerous requests such that the interest quickly exceeds a interest threshold set for channel allocation. The EAS channel is thus allocated to bandwidth that is ordinarily free for other channels absent an emergency. In some embodiments the EAS channel information may be included in carousel data feed with a time to live of infinity as a special mechanism only used for EAS so that it persists in the carousel feed but on a hidden channel that is not tunable directly by a user. Special provision is made for the EAS channel such that unlike other switched channels in the carousel it is never really allocated to the bandwidth until the interest threshold is met even though it is shown as active in the carousel so that the clients of STBs may quickly determine where to direct the STB s to tune without having to request the channel from the server. In response to the EAS alert ERM directs Edge device to switch in the channel for the EAS not shown to the designated QAM frequency and program number. Clients respond to the alert by examining the carousel and directing STBs to tune to the indicated QAM frequency and program number.

In other embodiments STB requests for EAS channel are preceded with a random backoff and the first STB s request for the EAS channel that gets through the session manager causes ERM to allocate the EAS channel. The session manager in turn updates the channel map in the carousel to reflect the EAS channel as active. Once the frequency and program number assigned to the EAS channel is stored on the carousel as subsequent pending tune requests for the EAS channel will be managed locally by the STB via look up of the frequency and program number for the EAS channel directly from the cached carousel. This results in reduction of upstream traffic that would otherwise result from a large number of STBs concurrently requesting the same channel.

When a user attempts to tune to a channel that is presently unallocated and the user parks i.e. does not tune away from on the channel in anticipation of eventual interest dependent allocation this is classified as a parking request. Such a request may or may not be explicitly understood to the user as parking. For example in some embodiments when a user attempts to tune to a switched channel the user may be presented with a one moment please OMP message while the system determines whether or not to allocate the channel based on interest measured in one case within a specified window of time. If this window of time is small enough e.g. less than six seconds and the decision to allocate the channel is made relatively quickly the OMP will be removed the STB will tune to the newly allocated channel and there may be no explicit indication to the user that any parking and or allocation decision was going on behind the scenes. If however the decision is made to not allocate the channel or if the decision will take longer in some embodiments various degrees of feedback may be provided to the user relating this information to them. This feedback may be in the form of a text message e.g. The requested channel is presently unavailable. or a graphic e.g. a bar graph showing interest relative to threshold or combination of the two. Typically when a user parks on a channel they are executing a persistent request to watch a program which has just substantially started or is in progress. In some embodiments a distinction is provided between requesting a channel and requesting a program on that channel.

Alternatively though similarly a user may choose to vote for a channel or a program on a channel. In voting based requesting a user may vote concurrently for one or more channels or programs he may wish to watch. In some cases parking can be seen as a special case of voting. When voting a user may vote for multiple different channels or programs to be allocated in some situations specifying relative priority. In some embodiments the priority may be considered in the weighting algorithm used to calculate channel interest.

A user may also vote by recording a channel or program on a channel or by setting a reminder for a program on a channel. In some embodiments recording based requests and reminder based requests may be weighted as less than a full request since the requester may ultimately decide not to watch the channel.

Referring to in step session manager receives a request for a presently unallocated channel from a STB. Channel interest manager receives a request from client by any of the methods discussed above parking on a presently unallocated channel in anticipation of it being allocated or voting for a channel .

Once a request is received step session manager communicates with ERM to measure the amount of available bandwidth step and then classifies the bandwidth as open scarce or full step . A classification of open signifies that there is ample space on the bandwidth to allocate a substantial number of new requests scarce signifies that only a limited amount of space remains and full signifies that no space remains. These classifications may be based on any threshold amount of space that the ERM programmer determines appropriate. When the bandwidth is open the requested channel is allocated step . If the bandwidth is scarce or full session manager logs the originator STB of the request tags that requestor as interested step and updates the channel interest for that channel step .

Next channel interest manager compares the interest and the interest threshold step . While the interest remains lower than the threshold channel interest manager calculates the probability of allocation step and then sends that probability to client previously marked interested step . The client then gives the requester options while waiting for allocation step e.g. . Once the interest for an unallocated channel exceeds the interest threshold the channel is allocated subject to whether there is another channel that can be bumped based on low relative channel interest e.g. or whether the channel has lower quality version available e.g. SD version rather than HD version as shown in . These conditions will be discussed in greater detail in .

Another option allows the requester to remain parked on the requested channel step while channel interest manager continuously updates the probability of allocation as the requester waits i.e. parks step . Channel interest manager updates the channel interest as additional requests are made for the same channel and recalculates the likelihood of allocation feedback which is dynamically available to the waiting requester. Alternatively if the requester tunes away channel interest manager decrements the counter those not actively waiting are not included in the channel interest calculation and tags the requester as previously interested step . Once the channel interest exceeds the interest threshold step the previously interested requesters are notified step by session manager sending a message to those STB clients .

In some embodiments the channel interest manager may be aware of program boundaries on switched channels. With this information the channel interest manager may determine that voting or parking by users on a channel at a particular timeframe represents interest in the content that is scheduled for that channel at the given timeframe e.g. the start of the program . Delays may occur in the allocation of the channel as a result of the voting and or parking interest for the channel remaining below the threshold for the allocation of the channel. These delays might normally result in the users missing the beginning of the programming on the channel. However in some embodiments when the channel interest manager detects that the channel interest for a channel may actually be a channel interest for a program beginning on that channel at a particular time but that the allocation may involve delays beyond that particular timeframe it may buffer the channel for the users. Such buffering may be accomplished by the channel interest manager routing the channel content to a channel buffering subsystem until such time as the channel becomes available. Upon allocation of the channel users may then be presented with the options of a joining the program in progress and missing the beginning or b watching the program from the beginning e.g. similar to a start over function . In the latter case if the program is watched in real time it s viewing may run beyond the beginning of the next program scheduled on this or another channel and this may be undesirable to the user. Therefore in some embodiments an option of watching the program in faster than real time is provided or alternatively an option of skipping through some portions of the program may be enabled.

Returning to any delay in the start of the program while waiting for allocation step may be remedied by playing the channel at a faster speed e.g. 1.02 real time playback step . This option may be implemented automatically step or by user interaction step as explained above For example a caching server e.g. a server with suitable tuners decoders and storage to cache unallocated channels may be coupled to the network of . The caching server may detect and cache the unallocated channels. When a previously unallocated channel is switched in edge resource manager may direct edge device to include the stream from the cache server for the channel instead of the stream from the actual source of the video. The fast playback and other crick play functions may be provided by the server or alternatively handled in local cache by the client . As an alternative embodiment of this option not shown in diagram channel interest manager can include the previously interested viewers in its channel interest calculation thus decrementing the count in step would not be necessary.

The requester may also have the option of watching displayed advertisements or other alternative content while waiting for allocation step . The alternative content may be retrieved by client from storage on STB . Alternatively switched services session manager may offer the content directly e.g. from local storage or indirectly by directing edge resource manager to switch in alternative content from a source coupled to network and update the carousel. Switched service session manager will then alert client to the presence of the alternative content. In response to the alert client will check the carousel and based on a flag in the carousel or an indicator from the alert select the alternative content.

Another option allows the requester to watch the most popular channel at that moment in time step . If the requester is interested in this option channel interest manager the channel with the highest interest measured by the counter to client along with its corresponding frequency retrieved from carousel step . Client may search the carousel for the most popular channel and display it for the user e.g. by controlling a tuner in STB .

A final option embodied in gives the requester a choice to pay for an unallocated channel rather than wait for possible allocation step . When this option is selected the channel may be temporarily provided as VOD or as tier 1 SDV and the requester is charged step . For example in some embodiments a certain amount of bandwidth is reserved for premium or pay services that is not available in the general pool of bandwidth available for basic switched services. If a user wishes to pay for access to this reserved bandwidth the service that he parked on or voted for is switched into this reserved bandwidth the user is charged and his settop is provided the information that will allow it to tune to the newly allocated channel. Note that this channel may optionally be encrypted and that typically this channel is not added to the active channel list in the carousel since that would allow other users to access it as well. However in some embodiments which emulate the bar jukebox model where one patron s nickel provides music for the entire place the channel may be paid for by one user and then made available to others users for free or for a reduced rate that may be a function of the number of paying users. In one variant additional paying users may result in discounts to the first paying user. VOD allocation for pay is managed similarly. Though a channel may not be allocated to the general pool of resources for free it may be buffered to a subsystem such as a VOD server. If a user then wishes to pay for the service it may be spooled directly from the VOD server in the manner it is typically done. In such cases the user may or may not be given trick play options on the service.

In some embodiments such bandwidth allocation and reservation for premium services is managed by revenue manager working in conjunction with channel interest manager in switched services session manager of . Revenue manager may be any suitable combination of hardware and software for performing its features described herein. For example revenue manager may include control circuitry having include one or more processors e.g. MIPs and or Motorola 68000 family processors memory e.g. RAM ROM flash memory and hard disks communications circuitry and any other suitable components for providing its features described herein.

In some embodiments channels of the SDV system are assigned to tiers. For example there may be a SDV premium tier and discount tiers 1 2 3 etc. Lower tiers may for example be associated with a larger tune delay all the way to not available and lower probability of being allocated. Channels may be assigned to higher or lower tiers based on observed or predicted interest or the expected take or profitability of the channel. Each tier may have a certain member of reserved QAMs. In this way more popular or higher tier channels have a higher probability of being allocated to the QAM and a lower tuning delay. For example some channels in Tier 1 may have a guaranteed allocation.

For example the session manager does not instruct ERM to de allocate that channel from QAM step if trend manager returns that the inactivity is due to a commercial and not lack of interest. However if trend manager returns that the interest level for the allocated channel has declined sessions manager instructs ERM to de allocate that channel from QAM and to allocate the requested channel in its place step . The bumped user is then given new viewing options including watch as pay per view watch related content watch content of interest wait for re allocation etc. See .

Client may display screen as a requester views grid from which he may select a channel. The interest based SDV channels and interest based services in the guide may be starred or otherwise distinguished as in key to indicate that they are available based on interest and may not be immediately available.

Client may display screen once a requester selects a channel he or she wishes to watch. A requester may indicate a desire to watch a channel by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. Channel interest manager continues to check the availability of the requested channel until it is allocated. As the requestor waits for allocation. One Moment Please overlay may be displayed over menu containing highlighted channel selection .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed allowing a requester to indicate a desire to wait for allocation by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester channel interest manager continues to check the availability of the requested channel. If No is selected client may give the requester other options e.g. .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed allowing a requester to indicate a desire to view the channel once it is allocated by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester channel interest manager continues to check the availability of the requested channel tuning that interested requester to the channel as it is allocated. If No is selected client may give the requester other options e.g. .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed over the currently viewed channel while the name of the requested channel is displayed at the bottom of screen . Channel interest manager continues to check the availability of the requested channel until it is allocated.

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay indicates that the channel is presently unavailable and also provides feedback to the requester of the likelihood of allocation in accordance with step of .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed allowing a requester to indicate a desire to wait for allocation by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester channel interest manager continues to check the availability of the requested channel until time X has passed. If No is selected client may give the requester other options e.g. .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed allowing a requester to indicate a desire to be notified of allocation by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester channel interest manager continues to check the availability of the requested channel notifying that previously interested requester as the channel is allocated. If No is selected client may give the requester other options e.g. . Screen is illustrative of the notification embodiment of the present invention. An interested user may also be notified automatically by channel interest manager tagging the requester as previously interested before he or she tunes away from the requested channel See step .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed allowing a requester to indicate a desire to watch related content by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester the STB tunes to a previously allocated channel with related content. If No is selected client may give the requester other options e.g. .

Client may display screen if the requester selects Yes to watching related content before tuning to the allocated channel with related content. Overlay may be displayed allowing a requester to indicate a desire to be notified of allocation by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. Channel interest manager continues to check the availability of the requested channel notifying that previously interested requester as the channel is allocated. If No is selected client may give the requester other options e.g. .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed allowing a requester to indicate a desire to watch the most popular channel by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester the STB tunes to a previously allocated channel with the highest number of users at that given moment. If No is selected client may give the requester other options e.g. .

Client may display screen if the requester selects Yes to watching the most popular channel before tuning to the allocated channel with the highest number of requests. Overlay may be displayed allowing a requester to indicate a desire to be notified of allocation by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. Channel interest manager continues to check the availability of the requested channel notifying that previously interested requester as the channel is allocated. If No is selected client may give the requester other options e.g. .

Client may display screen as the requester waits for the channel s allocation in accordance with step of . Overlay may be displayed allowing a requester to indicate a desire to pay to watch the requested channel by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester the requested channel may be temporarily stored as VOD or as a tier 1 channel guaranteeing its allocation See step . If No is selected client may give the requester other options e.g. .

Client may display screen if the requester selects Yes to watching the channel as pay per view before charging the requester. Overlay may be displayed allowing a requester to confirm a desire to pay to watch the requested channel by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester the STB tunes to the requested channel in accordance with step of and the requester is charged. If Exit is selected client may give the requester other options e.g. .

Client may display screen as the requester waits for the channel s allocation to bandwidth in accordance with step of . Screen also provides feedback to the requester of likelihood of allocation before the requester commits to paying for the channel. Overlay may be displayed allowing a requester to indicate a desire to pay to watch the requested channel by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester the requested channel may be temporarily stored as VOD or as a tier 1 channel guaranteeing its allocation See step . If No is selected client may give the requester other options e.g. .

Client may display screen if the requester selects Yes to watching the channel as pay per view before charging the requester. Overlay may be displayed allowing a requester to confirm a desire to pay to watch the requested channel by using arrow keys on a remote and pressing enter or using any suitable interactive media guidance function that allows the user to select a response. If Yes is selected by the requester the STB tunes to the requested channel in accordance with step of and the requester is charged. If Exit is selected client may give the requester other options e.g. .

The screens in may also have paid advertisements displayed in the background of the text in accordance with step of .

The above described embodiments of the present invention are presented for purposes of illustration and not of limitation and the present invention is limited only by the claims which follow. Furthermore all of the flow charts and processes described above or illustrative. Steps may be added or removed to any of the flow charts and steps may be performed in a different order.

