---

title: Systems and methods of processing closed captioning for video on demand content
abstract: A method includes receiving closed captioning data at a computing device. The closed captioning data is associated with a video on demand asset and is represented in a first format. The method also includes, during a single video on demand streaming session, converting the closed captioning data from the first format to a platform-independent format and converting the closed captioning data from the platform-independent format to a second format. The method further includes transmitting, during the single video on demand streaming session, the closed captioning data in the second format to a destination device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09124910&OS=09124910&RS=09124910
owner: WOWZA MEDIA SYSTEMS, LLC
number: 09124910
owner_city: Golden
owner_country: US
publication_date: 20140326
---
The present application is a continuation of and claims priority to U.S. patent application Ser. No. 13 889 979 filed May 8 2013 which is a continuation of U.S. patent application Ser. No. 13 652 272 filed Oct. 15 2012 the content of each of which is incorporated by reference herein in its entirety.

The popularity of the Internet coupled with the increasing capabilities of personal mobile electronic devices has provided consumers with the ability to enjoy multimedia content almost anytime and anywhere. For example live e.g. sports events and video on demand VOD content e.g. pre recorded television shows and movies can be streamed via the Internet to personal electronic devices e.g. computers mobile phones and Internet enabled televisions .

Broadcast television channels typically include one or more closed captioning tracks to make programs more accessible to those that are deaf or hard of hearing. Similarly movies on digital video discs DVDs often include subtitle tracks in multiple languages. However Internet accessible content is not typically provided with closed captioning. Moreover the large number of available closed captioning formats makes it difficult to implement closed captioning systems that are compatible with the various electronic devices and platforms available to consumers even though government regulations may mandate closed captioning for Internet accessible content. For example in the United States the Federal Communications Commission FCC has issued a rule entitled Closed Captioning of Internet Protocol Delivered Video Programming Implementation of Twenty First Century Communications and Video Accessibility Act of 2010. Many providers for streaming video may be concerned with only a specific streaming technology application or platform. Thus a single platform closed captioning system offered by such providers in response to government regulations may not support a large number of users that use different closed captioning formats and may not scale as new closed captioning formats become popular.

Systems and methods of processing closed captioning data for video on demand content are disclosed. The disclosed systems and methods may support receiving closed captioning data in a variety of embedded and file based formats and outputting on the fly closed captioning data in accordance with a variety of output protocols for delivery to a variety of devices and mobile device platforms.

For example closed captioning data in one or more languages may be received as a timed text markup language TTML file or as part of a motion picture experts group MPEG 4 part 14 MP4 video stream. The closed captioning data may be converted into a platform independent format e.g. a platform independent timed text representation . The data in the platform independent format may then be converted into a desired output format that is compatible with a streaming protocol to be used to deliver the closed captions and video stream to a destination device. If multiple types of devices request closed captions at the same time multiple closed caption streams may be generated on the fly from the platform independent data. For example platform independent captioning data may be used to generate consumer electronics association CEA 608 captions that are embedded into a hypertext transfer protocol HTTP live streaming HLS stream action message format AMF onTextData events included in a HTTP dynamic streaming HDS stream and or captions included in a smooth streaming manifest. The described systems and methods may advantageously utilize a plug in architecture enabling users to create custom ingesters to convert input captions to the platform independent format and custom converters to generate output captions from data represented in the platform independent format.

The system includes a media server that includes one or more input interfaces one or more output interfaces and one or processors . As used herein the term media server may refer to software application s that perform media serving and processing hardware systems e.g. servers that support or perform media serving or processing or any combination thereof. Thus various operations described with reference to a media server may be implemented using hardware software e.g. instructions executable by the processor s or any combination thereof.

The input interface s may be configured to receive closed captioning data associated with a video on demand VOD asset such as a pre recorded television show movie etc. The incoming closed captioning data may be represented in a first format e.g. a platform specific format . In a particular embodiment the input interface s may be wired and or wireless interfaces that enable the media server to receive data via a network such as the Internet. For example the input interface s may include an Ethernet interface a universal serial bus USB interface a wireless interface compatible with an Institute of Electrical or Electronics Engineers IEEE 802.11 protocol etc. For example the input interface s may include a storage device a file system network attached storage NAS cloud based storage etc. that is accessible to the media server via a wired or wireless connection to a network e.g. the Internet . In some embodiments such input devices may be accessed without a network connection e.g. via a direct load operation a direct electrical link etc. .

The output interface s may be configured to transmit closed captioning data to a destination device e.g. smartphones tablet computers laptop computers set top boxes televisions portable media players game consoles etc. . The outgoing closed captioning data may be represented in a second format e.g. a second platform specific format . In a particular embodiment the output interface s may be wired and or wireless interfaces that enable the media server to transmit data via a network such as the Internet. For example the output interface s may include an Ethernet interface a USB interface a wireless interface compatible with an IEEE 802.11 protocol etc. In some embodiments like the input interface s the output interface s may include a storage device a file system network attached storage NAS cloud based storage etc. that is accessible to the media server via a wired or wireless connection to a network e.g. the Internet . Alternately such output devices may be accessed without a network connection e.g. via a direct store operation a direct electrical link etc. . Thus various types of input interface s and output interface s may be supported by the media server .

The media server may also include various components configured to perform closed caption processing and stream processing functions. For example the media server may include one or more ingesters that are executable by the processor s . Each ingester may be configured to convert closed captioning data that is received via the input interface s to a platform independent format e.g. a generic timed text representation . An illustrative example of a platform independent format for closed captioning data is further described with reference to .

One or more of the ingesters may be configured to process closed captioning data that is included in data file s . For example a TTML ingester may be configured to convert closed captioning data that is included in a TTML file received from a first caption source e.g. the media server itself an external caption server or an external VOD server from a TTML format to the platform independent format. The TTML ingester may read and process the TTML file in chunks or all at once. Additional ingesters may be provided to process embedded e.g. in stream captions. For example an MP4 ingester may be configured to extract closed captioning data that is embedded in an MP4 VOD stream received from a second caption source and to convert the extracted closed captioning data to the platform independent format. The MP4 VOD stream may include audio and video data associated with the VOD asset as well as timed text information associated with closed captioning for the VOD asset. One or more ingesters may also be configured to receive caption data from an external software system e.g. software as a service SaaS .

In a particular embodiment the media server may expose details of the platform independent format so that users may define custom ingesters e.g. an illustrative custom ingester that receives custom format closed captioning data from a third caption source that can convert closed captioning data from other formats to the platform independent format. Various embedded formats and file formats may be supported via built in or custom ingesters. For example the embedded formats may include but are not limited to action message format AMF onTextData events consumer electronics association standards CEA 608 CEA 708 motion pictures expert group MPEG 4 part 17 3rd generation partnership project 3GPP timed text digital video broadcasting DVB subtitling sistema brasileiro de televisao digital SBTVD digital terrestrial multimedia broadcast DTMB and world system teletext WST . The file formats may include but are not limited to scenarist closed captioning SCC timed text markup language TTML distributed format exchange profile DFXP society of motion picture and television engineers SMPTE timed text SMPTE TT web video text tracks WebVTT SubRip SRT synchronized accessible media interchange SAMI European broadcasting union EBU STL and EBU timed text EBU TT .

The media server may include a processing module and one or more storage devices . The processing module may perform various VOD stream processing operations such as video transcoding aspect ratio conversion resolution conversion color space conversion format conversion etc. The processing module may also perform closed caption processing operations on closed captioning data that is received from the ingesters in the platform independent format.

The data storage device s may include volatile memory e.g. random access memory RAM . Alternately or in addition the storage device s may include non volatile memory such as one or more hard disks. In a particular embodiment the processing module may store platform independent closed captioning data and or associated VOD assets in the data storage device s for subsequent retrieval. Alternately or in addition the data storage device s may be used to temporarily cache data during stream processing and closed caption processing. Storage and caching of data may be performed in memory e.g. to RAM and or to hard disk s .

The media server may further include one or more converters that are executable by the processor s . Each converter may be configured to convert closed captioning data that is received from the ingesters the processing module and or the storage device s from the platform independent format to a particular output format. Various output formats may be supported by the media server .

For example a hypertext transfer protocol HTTP live streaming HLS converter may be configured to convert closed captioning data from the platform independent format into CEA 608 format closed captioning that can be embedded in a HLS stream transmitted to a tablet computer . The HLS stream may include all or a portion of a VOD asset associated with the closed captioning. In a particular embodiment the HLS stream may be used to deliver VOD content and associated closed captioning to iOS devices iOS is a registered trademark of Cisco Systems Inc. of San Jose Calif. and is used by Apple Inc. of Cupertino Calif. under license .

As another example a HTTP dynamic streaming HDS converter may convert closed captioning data from the platform independent format into onTextData events that can be embedded in a HDS stream that may be transmitted to a smartphone or other device that is compatible with video for Adobe Flash Adobe and Flash are registered trademarks of Adobe Systems Inc. of San Jose Calif. .

As yet another example the media server may include a smooth streaming converter . Smooth streaming may generally refer to an Internet Information Services IIS extension from Microsoft Corp. of Redmond Wash. that implements adaptive bitrate streaming. The smooth streaming converter may convert closed captioning data from the platform independent format into data that can be embedded in a smooth streaming stream to be provided to a desktop computer or included in a manifest associated with the stream . To illustrate the smooth streaming stream may be provided to devices running Microsoft Silverlight or other smooth streaming clients Microsoft and Silverlight are registered trademarks of Microsoft Corp. of Redmond Wash. .

In a particular embodiment each of the ingesters and the converters may be implemented using software classes. For example each of the ingesters and the converters may be Java classes that are executable by a Java Virtual Machine NM executing on the processor s . In alternate embodiments non Java implementations may be used. The media server may thus provide a plug in architecture to implement closed captioning for VOD assets. Specific ingesters and converters may be loaded dynamically e.g. just in time based on what types of captioning data is being received and what types of captioning data is being transmitted.

In a particular embodiment the media server may expose details of the platform independent format. For example the platform independent format may be made available via application programming interfaces APIs documentation and or publically available class declaration or definition files. Exposing details of the platform independent format may enable users or third party developers to define custom converters that can convert closed captioning data from platform independent formats into other formats. For example a custom converter may generate a stream that is provided to an Internet enabled television . The output formats supported by the media server may include but are not limited to HLS EMS smooth streaming and MPEG dynamic adaptive streaming over HTTP MPEG DASH .

In a particular embodiment custom converters may also be used to perform other output processing functions. For example the custom converter may color all captions associated with dialogue of a first speaker e.g. John blue and all captions associated with dialogue of a second speaker e.g. Susan orange e.g. to enhance caption readability or to make such captions more distinguishable to a viewer that is color blind . Multiple converters may be applied prior to transmitting an output stream to a destination device. Similarly multiple ingesters may be applied when processing an input stream from a VOD or caption source.

During operation one or more of the ingesters may receive closed captioning data associated with a VOD asset where the closed captioning data is represented in a first format. For example the closed captioning data may be in a file that is received by the media server along with the VOD asset. Alternately the VOD asset and or the closed captioning data may previously have been received by the media server and stored in the storage device s . As another example the closed captioning data may be embedded in a stream of the VOD asset that is received by the media server . The ingesters may convert the closed captioning data from the first format into the platform independent format. The processing module may perform stream processing operations on the VOD asset and or may perform closed caption processing operations on the closed captioning data in the platform independent format. One or more of the converters may convert the closed captioning data from the platform independent format into a second format that is compatible with particular destination device s .

The aforementioned operations may be performed on the fly e.g. during a single VOD streaming session in response to a request from a destination device for closed captioning data associated with a stream of a VOD asset. The request may be received during communication of a stream of the VOD asset where the VOD asset is being received from one of the VOD sources or the storage device s transcoded by the processing module and provided to the destination device. For example a user at a destination device may elect to turn on closed captions for a VOD stream that the user is viewing. In a particular embodiment the request may also specify a desired language for the closed captions. In response to the request and without interrupting display of the VOD stream the media server may identify a source of the requested closed captioning data load an ingester that is compatible with the format of the closed captioning data provided by the source process the platform independent closed captioning data provided by the ingester load a converter to convert the processed platform independent closed captioning data into a format that is compatible with the destination device and provide the converted closed captioning data to the destination device. Similarly the media server may switch closed captioning from a first language to a second language without interrupting communication of the VOD stream. Moreover it should be noted that although multiple ingesters and multiple converters are shown in this is for example only. In some embodiments a single ingester or type of ingester and or a single converter or type of converter may be present. For example the media server may include the TTML ingester but no video stream based ingester. As another example the media server may include the MP4 ingester but no file based ingester.

The system of may thus enable dynamic receipt conversion and transmission of closed captioning data for VOD assets. For example a VOD asset provider may provide a TTML file with closed captioning data and rely on the media server to dynamically process the TTML file to provide closed captioning over multiple outbound protocols to multiple types of devices. Unlike single format systems the system of may process data in various input and output formats thereby providing a flexible closed captioning framework that accommodates the disparity in formats provided by VOD sources and formats expected by destination devices. Moreover the provided framework may be extended by users or third parties by creation of custom ingesters and custom converters e.g. as new input and output formats become popular .

In the platform independent closed captioning data includes a first segment of timed text and a second segment of timed text. Each of the segments may include a segment number text a start time an end time and a language identifier . The segments may also include layout information such as a location e.g. coordinates . The segments may further include style information such as a font a font size a style a background color and a foreground color . In selected embodiments one or more of the data items illustrated in may be optional. For example layout information font information style information etc. may be optional. In addition various formats and values shown in e.g. time being represented in H MM SS.sss format location being represented as an pair the font Proportional Sans Serif the color Black the color White the style Italics etc. are for illustration only. Alternate embodiments may use different formats and values e.g. named definitions or enumerated data types .

In a particular embodiment the segments may also include passed through data . The passed through data may represent closed captioning data or parameters that are left unmodified by an ingester e.g. one of the ingesters of when converting closed captioning data from an input format into the platform independent format. The passed through data may thus represent a tunneling mechanism through a media server e.g. the media server of for platform specific captioning data. A converter e.g. one of the converters of may use the passed through data when generating closed captioning data compatible with a specific output format or protocol. Alternately the converter may also leave the passed through data unmodified so that a media player on a destination device receives and can act on the passed through data . In a particular embodiment the converter may ignore tunnel data.

The method includes receiving closed captioning data at a computing device at . The closed captioning data may be associated with a video on demand asset and may be represented in a first format. For example in the media server may receive closed captioning data from one of the caption sources via the input interface s .

The method may also include converting the closed captioning data from the first format to a platform independent format at . For example in one of the ingesters may convert the received closed captioning data to the platform independent format.

The method may further include converting the closed captioning data from the platform independent format to a second format at . For example in one of the converters may convert the closed captioning data from the platform independent format to output data in an output format.

The method may include transmitting the closed captioning data in the second format to a destination device at . For example in the media server may transmit the output data in the output format to one or more of the destination devices via the output interface s .

The method of may thus enable multi format and dynamic receipt conversion transmission of closed captioning for video content e.g. VOD assets .

The method includes receiving from a destination device a request for closed captioning data associated with a stream of a video on demand asset at . The stream may be associated with a particular outbound streaming protocol. The request may indicate that the closed captioning data is to be in a first language e.g. English Spanish French German Italian Chinese Japanese etc. . For example in the media server may receive a request from a destination device via the input interface s .

The method may also include identifying a source of the requested closed captioning data e.g. based on the first language at . For example in the media server may identify one of the sources . The media server may also load an associated ingester e.g. one of the ingesters and an associated converter e.g. one of the converters if not already loaded.

The method may further include receiving the closed captioning data from the identified source in a first format at . For example in the media server may receive closed captioning data in a first format via the input interface s .

The method may include converting the closed captioning data from the first format to a platform independent format and from the platform independent format to a second format that is compatible with the particular outbound streaming protocol at . For example in one of the ingesters and one of the converters may be used.

The method may also include transmitting the closed captioning data in the second format via the stream at . For example in the media server may transmit the closed captioning data in the second format via the output interface s .

The method may further include receiving a request to switch the closed captioning data from the first language to a second language at and transmitting second closed captioning data that is associated with the second language and that is in the second format via the stream without interrupting the stream at . To illustrate if a different source is identified for the closed captioning data in the second language a different ingester may be loaded. Thus in the case of switching languages one or more of the operations described with reference to steps of may be re executed between steps and . The same converter may remain active and may replace the closed captioning data in the first language with the closed captioning data in the second language without interrupting the VOD stream so that a viewer sees a smooth transition from captions in the first language to captions in the second language.

The method of may thus enable multi format and dynamic receipt conversion transmission of closed captioning for video content e.g. VOD assets including language transitions that are transparent and or seamless to an end user.

In accordance with various embodiments of the present disclosure the methods functions and modules described herein may be implemented by software programs executable by a computer system. Further in an exemplary embodiment implementations can include distributed processing component object distributed processing and parallel processing. Alternatively virtual computer system processing can be constructed to implement one or more of the methods or functionality as described herein.

Particular embodiments can be implemented using a computer system executing a set of instructions that cause the computer system to perform any one or more of the methods or computer based functions disclosed herein. A computer system may include a laptop computer a desktop computer a server computer a mobile phone a tablet computer a set top box a media player a game console or any combination thereof. The computer system may be connected e.g. using a network to other computer systems or peripheral devices. For example the computer system or components thereof can include or be included within any one or more of the sources of the media server of or components thereof the destination devices of or any combination thereof. In a networked deployment the computer system may operate in the capacity of a server or as a client user computer in a server client user network environment or as a peer computer system in a peer to peer or distributed network environment. The term system can include any collection of systems or sub systems that individually or jointly execute a set or multiple sets of instructions to perform one or more computer functions.

In a particular embodiment the instructions can be embodied in a non transitory computer readable or processor readable medium or storage device. The terms computer readable medium and processor readable medium include a single medium or multiple media such as a centralized or distributed database and or associated caches and servers that store one or more sets of instructions. The terms computer readable medium and processor readable medium also include any medium that is capable of storing a set of instructions for execution by a processor or that cause a computer system to perform any one or more of the methods or operations disclosed herein. For example a computer readable or processor readable medium or storage device may include random access memory RAM flash memory read only memory ROM programmable read only memory PROM erasable programmable read only memory EPROM electrically erasable programmable read only memory EEPROM registers a hard disk a removable disk a disc based memory e.g. compact disc read only memory CD ROM or any other form of storage medium or device.

In conjunction with the described embodiments a method includes receiving closed captioning data at a computing device. The closed captioning data is associated with a video on demand asset and is represented in a first format. The method also includes during a single VOD streaming session converting the closed captioning data from the first format to a platform independent format and converting the closed captioning data from the platform independent format to a second format. The method further includes during the single VOD streaming session transmitting the closed captioning data in the second format to a destination device.

In another particular embodiment an apparatus includes a processor and an input interface configured to receive closed captioning data associated with a video on demand asset where the closed captioning data is represented in a first format. The apparatus also includes an ingester executable by the processor to during a single VOD streaming session convert the closed captioning data from the first format to a platform independent format. The apparatus further includes a converter executable by the processor to during the single VOD streaming session convert the closed captioning data from the platform independent format to a second format. The apparatus includes an output interface configured to transmit during the single VOD streaming session the closed captioning data in the second format to a destination device.

In another particular embodiment a computer readable storage device includes instructions that when executed by a computer cause the computer to receive from a destination device a request for closed captioning data associated with a stream of a video on demand asset. The stream is associated with a particular outbound streaming protocol. The instructions when executed by the computer also cause the computer to identify a source of the requested closed captioning data and to receive the closed captioning data from the identified source in a first format. The instructions when executed by the computer further cause the computer to convert during a single VOD streaming session the closed captioning data in the first format to a platform independent format and from the platform independent format to a second format that is compatible with the particular outbound streaming protocol. The instructions when executed by the computer cause the computer to transmit during the single VOD streaming session the closed captioning data in the second format via the stream.

The illustrations of the embodiments described herein are intended to provide a general understanding of the structure of the various embodiments. The illustrations are not intended to serve as a complete description of all of the elements and features of apparatus and systems that utilize the structures or methods described herein. Many other embodiments may be apparent to those of skill in the art upon reviewing the disclosure. Other embodiments may be utilized and derived from the disclosure such that structural and logical substitutions and changes may be made without departing from the scope of the disclosure. Accordingly the disclosure and the figures are to be regarded as illustrative rather than restrictive.

Although specific embodiments have been illustrated and described herein it should be appreciated that any subsequent arrangement designed to achieve the same or similar purpose may be substituted for the specific embodiments shown. This disclosure is intended to cover any and all subsequent adaptations or variations of various embodiments. Combinations of the above embodiments and other embodiments not specifically described herein will be apparent to those of skill in the art upon reviewing the description.

The Abstract of the Disclosure is submitted with the understanding that it will not be used to interpret or limit the scope or meaning of the claims. In addition in the foregoing Detailed Description various features may be grouped together or described in a single embodiment for the purpose of streamlining the disclosure. This disclosure is not to be interpreted as reflecting an intention that the claimed embodiments require more features than are expressly recited in each claim. Rather as the following claims reflect inventive subject matter may be directed to less than all of the features of any of the disclosed embodiments.

The above disclosed subject matter is to be considered illustrative and not restrictive and the appended claims are intended to cover all such modifications enhancements and other embodiments which fall within the true scope of the present disclosure. Thus to the maximum extent allowed by law the scope of the present disclosure is to be determined by the broadest permissible interpretation of the following claims and their equivalents and shall not be restricted or limited by the foregoing detailed description.

