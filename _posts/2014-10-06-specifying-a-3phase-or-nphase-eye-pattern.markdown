---

title: Specifying a 3-phase or N-phase eye pattern
abstract: System, methods and apparatus are described that facilitate tests and measurements related to multi-wire, multi-phase communications links. Information is transmitted in N-phase polarity encoded symbols and an eye pattern corresponding to the symbols may be generated such that the symbols are aligned with a trigger for each symbol that corresponds to a clock edge used to sample the symbols. The eye pattern may be used to determine sufficiency of setup times in the communication links and other such characteristics defining a communications channel capabilities.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09215063&OS=09215063&RS=09215063
owner: QUALCOMM Incorporated
number: 09215063
owner_city: San Diego
owner_country: US
publication_date: 20141006
---
This application claims priority to and the benefit of U.S. provisional patent application No. 61 888 611 filed Oct. 9 2013 the entire content of which being incorporated herein by reference.

The present disclosure relates generally to high speed data communications interfaces and more particularly to analysis of signaling in multi wire multi phase data communication links.

Manufacturers of mobile devices such as cellular phones may obtain components of the mobile devices from various sources including different manufacturers. For example an application processor in a cellular phone may be obtained from a first manufacturer while the display for the cellular phone may be obtained from a second manufacturer. The application processor and a display or other device may be interconnected using a standards based or proprietary physical interface. For example a display may provide an interface that conforms to the Display System Interface DSI standard specified by the Mobile Industry Processor Interface Alliance MIPI .

In a multi wire interface the maximum speed of the communication link and the ability of a clock data recovery CDR circuit may be limited by the variability of transition times between symbols carried on the communication link phase shifts between signals received from different wires of the communication link. In a multi wire interface and the like. Transitions on different wires may exhibit different variations of signal transition times. Traditional test and measurement systems may be unable to properly characterize the communications link when multiple transitions observed at the receiver occur at the symbol boundaries and when transition times are variable over short periods of time. For example large transition time differences in multi wire signals may obscure the eye opening in an eye pattern displayed by a high speed digital storage oscilloscope.

Embodiments disclosed herein provide systems methods and apparatus that enable improved testing and measuring of channel characteristics for a multi wire and or multiphase communications link. The communications link may for example be deployed in apparatus such as a mobile terminal that include multiple semiconductor Integrated Circuit IC devices.

In an aspect of the disclosure a data transfer method includes determining a trigger point corresponding to a first transition at a symbol boundary for each of a plurality of symbols received sequentially from the communications link and providing an image that superimposes representations of the plurality of symbols one upon another. The representations may be arranged with respect to one another in the image by temporally aligning triggers determined for the plurality of symbols. Each trigger may be correlated with a sampling clock used to capture data communicated in its corresponding symbol.

In an aspect of the disclosure the symbol boundary at which the trigger is determined occurs at the end of each symbol. In some instances the symbol boundary at which the trigger is determined may occur at the beginning of each symbol. The first transition may include a first zero crossing of a signal output by one of a plurality of differential receivers. The first transition may include a first zero crossing of a signal produced by differential probes. The first transition may include a first zero crossing of a signal calculated from the current or voltage states observed on a plurality of wires of the communications link.

In an aspect of the disclosure the differences in state between two wires in the communications link may be determined. The communications link may include an M wire N phase decoder. In one example a plurality of differential receivers is provided in a 3 wire 3 phase decoder and an output of each differential receiver may identify transitions between three or more voltage states. The communications link may include an N factorial decoder.

In an aspect of the disclosure each trigger is correlated with an edge of the sampling clock that is used to capture information from a delayed version of the symbol. The image may include an eye pattern.

In an aspect of the disclosure an apparatus includes means for determining a trigger corresponding to a first transition at a symbol boundary for each of a plurality of symbols received sequentially from the communications link and means for providing an image that superimposes representations of the plurality of symbols one upon another. The representations may be arranged with respect to one another in the image by temporally aligning triggers determined for the plurality of symbols. Each trigger may be correlated with a sampling clock used to capture data communicated in its corresponding symbol.

In an aspect of the disclosure an apparatus includes a processing circuit configured to determine a trigger corresponding to a first transition at a symbol boundary for each of a plurality of symbols received sequentially from the communications link and provide an image that superimposes representations of the plurality of symbols one upon another The representations may be arranged with respect to one another in the image by temporally aligning triggers determined for the plurality of symbols. Each trigger may be correlated with a sampling clock used to capture data communicated in its corresponding symbol.

In an aspect of the disclosure a processor readable storage medium may have or maintain one or more instructions which when executed by at least one processing circuit cause the at least one processing circuit to determine a trigger corresponding to a first transition at a symbol boundary for each of a plurality of symbols received sequentially from the communications link and provide an image that superimposes representations of the plurality of symbols one upon another. The representations may be arranged with respect to one another in the image by temporally aligning triggers determined for the plurality of symbols. Each trigger may be correlated with a sampling clock used to capture data communicated in its corresponding symbol.

Various aspects are now described with reference to the drawings. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of one or more aspects. It may be evident however that such aspect s may be practiced without these specific details.

As used in this application the terms component module system and the like are intended to include a computer related entity such as but not limited to hardware firmware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a computing device and the computing device can be a component. One or more components can reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers. In addition these components can execute from various computer readable media having various data structures stored thereon. The components may communicate by way of local and or remote processes such as in accordance with a signal having one or more data packets such as data from one component interacting with another component in a local system distributed system and or across a network such as the Internet with other systems by way of the signal.

Moreover the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from the context the phrase X employs A or B is intended to mean any of the natural inclusive permutations. That is the phrase X employs A or B is satisfied by any of the following instances X employs A X employs B or X employs both A and B. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from the context to be directed to a singular form.

Certain aspects of the invention may be applicable to communications links deployed between electronic devices that may include subcomponents of an apparatus such as a telephone a mobile computing device an appliance automobile electronics avionics systems etc. depicts a simplified example of an apparatus that employs a communication link between IC devices. The apparatus may include a communications transceiver operably coupled to a processing circuit . In one example the apparatus may include a wireless communication device that communicates through an RF transceiver with a radio access network RAN a core access network the Internet and or another network. The processing circuit may include an application specific IC ASIC and or one or more other IC devices. The ASIC may include one or more processing devices logic circuits and so on. The processing circuit may include and or be coupled to processor readable storage such as a memory that may maintain instructions that can be executed by a processor of the processing circuit and data that may be manipulated by the processing circuit . Certain functions of the processing circuit may be controlled by one or more of an operating system and an application programming interface API layer that supports and enables execution of software modules residing in storage media such as the memory device . The memory device may include read only memory ROM or random access memory RAM electrically erasable programmable ROM EEPROM flash memory cards or any memory device that can be used in processing systems and computing platforms. The processing circuit may have access to or include a local database that may be configured to maintain operational parameters and other information used to configure and operate the apparatus . The local database may be implemented using one or more of a database module flash memory magnetic media EEPROM optical media tape soft or hard disk or the like. The processing circuit may also be operably coupled to external devices such as an antenna a display operator controls such as a keypad a button rocker or slider switch and or other components.

The communication link may include multiple channels and . One or more channel may be bidirectional and may operate in a half duplex mode and or in a full duplex mode. One or more channels and or may be unidirectional. The communication link may be asymmetrical providing higher bandwidth in one direction. In one example a first communications channel may be referred to as a forward link while a second communications channel may be referred to as a reverse link . The first IC device may be designated as a host system or a transmitter while the second IC device may be designated as a client system or a receiver even if both IC devices and are configured to transmit and receive on the communications link . In one example the forward link may operate at a higher data rate when communicating data from a first IC device to a second IC device while the reverse link may operate at a lower data rate when communicating data from the second IC device to the first IC device .

The IC devices and may each include a processor which may be provided in a processing circuit computing circuit or other circuit. In one example the first IC device may be adapted to perform core functions of the apparatus including maintaining wireless communications through a wireless transceiver and an antenna while the second IC device may be configured to support a user interface that manages or operates a display controller and may control operations of a camera or video input device using a camera controller . Other features supported by one or more of the IC devices and may include a keyboard a voice recognition component global positioning systems biometric recognition systems motion sensors and other input or output devices. The display controller may include circuits and software drivers that support displays such as a liquid crystal display LCD panel touch screen display indicators and so on. The storage media and may include transitory and or non transitory storage devices adapted to maintain instructions and data used by respective processors and and or other components of the IC devices and . Communication between each processor and its corresponding storage media and and other modules and circuits may be facilitated by one or more bus and respectively.

The reverse link may be operated in the same manner as the forward link and the forward link and reverse link may be capable of transmitting at comparable speeds or at different speeds where speed may be expressed as a data rate or data transfer rate and or a transmitter clocking rate. The forward and reverse data rates may be substantially the same or may differ by orders of magnitude depending on the application. In some applications a single bidirectional link may support communications between the first IC device and the second IC device . The forward link and or reverse link may be configurable to operate in a bidirectional mode when for example the forward and reverse links and share the same physical connections and operate in a half duplex manner. In one example the communication link may be operated to communicate data control command and other information between the first IC device and the second IC device in accordance with an industry or other standard.

Industry standards may be application specific. In one example the MIPI standard defines physical layer interfaces including a synchronous interface specification D PHY between an application processor IC device and an IC device that supports the camera or display in a mobile device. The D PHY specification governs the operational characteristics of products that comply with MIPI specifications for mobile devices. A D PHY interface may support data transfers using a flexible low cost high speed serial interface that interconnects between components and within a mobile device. These interfaces may include complimentary metal oxide semiconductor CMOS parallel busses providing relatively low bit rates with slow edges to avoid electromagnetic interference EMI issues.

The communication link of may be implemented as a wired bus that includes a plurality of signal wires denoted as M wires . The M wires may be configured to carry N phase encoded data in a high speed digital interface such as in a display interface. The M wires may facilitate N phase polarity encoding on one or more of the channels and or . The physical layer drivers and may be configured or adapted to generate N phase polarity encoded data symbols for transmission on the communication link and or to decode N phase polarity encoded data symbols received from the communication link . The use of N phase polarity encoding provides high speed data transfer and may consume half or less of the power of other interfaces because for example fewer drivers are active in N phase polarity encoded data links .

N phase polarity encoding devices and or can typically encode multiple bits per transition on the communication link . In one example a combination of 3 phase encoding and polarity encoding may be used to support a wide video graphics array WVGA 80 frames per second LCD driver IC without a frame buffer delivering pixel data at 810 Mbps for display refresh.

Signaling states defined for each of the M wires in an M wire N phase polarity encoding scheme may include an undriven state a positively driven state and a negatively driven state. In the 3 wire 3 phase polarity encoding scheme the positively driven state and the negatively driven state may be obtained by providing a voltage differential between two of the signal wires and or and or by driving a current through two of the signal wires and or connected in series such that the current flows in different directions in the two signal wires and or . In one example the undriven state may be realized by placing an output of a driver of a signal wire or in a high impedance mode. In another example the undriven state may be obtained on a signal wire or by passively or actively causing an undriven signal wire or to assume a voltage level that lies substantially halfway between positive and negative voltage levels provided on driven signal wires and or . Typically no significant current flows through an undriven signal wire or . Signaling states defined for a 3 wire 3 phase polarity encoding scheme may be denoted using the three signaling states 1 0 1 which may represent voltage or current states. In one example the three states 1 0 1 may signify the three voltage levels V 0 V. In another example the three states 1 0 1 may signify the three voltage levels V V 2 0. In another example the three states 1 0 1 may signify currents of I 0 I.

A 3 wire 3 phase polarity encoder may employ a set of drivers to control the signaling state of the connectors wires and . The drivers may be implemented as unit level current mode or voltage mode drivers. Each driver may receive a set of signals or that determines the signaling state of a corresponding connector or . In the example depicted each of the drivers receives a pair of signals or that defines four possible states for the corresponding connector or . In another example each driver may receive a set of three signals defining possible states for the corresponding connector or

For each transmitted symbol interval in an M wire N phase polarity encoding scheme at least one signal wire or is in the undriven state 0 signaling state while the number of positively driven 1 signaling state signal wires or is equal to the number of negatively driven 1 signaling state signal wires or such that the sum of current flowing to the receiver is zero. At each symbol transition between the previously transmitted symbol and a next transmitted symbol the signaling state of at least one signal wire or changes. When the signaling state of at least one signal wire and or changes between each pair of consecutive symbols a receiver can reliably generate a receive clock based on the transitions.

In operation a mapper may receive and map input data to a set of symbols . In the depicted 3 wire 3 phase example the set of symbols includes seven 3 bit symbols and a 16 bit word of the input data may be encoded in each set of symbols. Each bit of a 3 bit symbol defines the state of one of the signal wires and for one symbol interval. The sequence of symbols may be serialized using parallel to serial converters that provide a timed sequence of symbols each symbol defining the signaling state of the 3 wires and . The sequence of symbols is typically timed using a transmission clock to delineate symbol intervals whereby a single symbol is transmitted in each symbol interval. A 3 wire phase encoder receives the sequence of 7 symbols produced by the mapper one symbol at a time and computes the state of each signal wire and for each symbol interval. The 3 wire encoder selects the states of the signal wires and based on the current input symbol and the previous states of signal wires and

The use of M wire N phase encoding permits a number of bits to be encoded in a plurality of symbols. A non integer number of data bits may be encoded in each symbol. In the example of a 3 wire 3 phase system there are 3 available combinations of 2 wires that may be driven simultaneously and 2 possible combinations of polarity on the pair of wires that is driven yielding 6 possible states. The signaling state of the signal wires and changes at each transition between symbols and accordingly 5 of the 6 states are available at every transition. In other words the state of at least one wire changes at each transition to permit a receiver to generate a reliable receive clock and given a current signaling state there are five possible signaling states available at each transition. With 5 states log 5 2.32 bits may be encoded per symbol. Accordingly a mapper may accept a 16 bit word and convert it to 7 symbols because 7 symbols carrying 2.32 bits per symbol can encode 16.24 bits. In other words a combination of seven symbols that encode five states has 5 78 125 permutations. Accordingly the 7 symbols may be used to encode the 2 65 536 permutations of 16 binary bits.

Information may be encoded in the direction of rotation at each phase transition and the 3 phase signal may change direction for each signaling state. Direction of rotation may be determined by considering which wires and or are in the 0 state e.g. the undriven state before and after a phase transition because the undriven wire and or changes at every signaling state in a rotating three phase signal regardless of the direction of rotation.

The encoding scheme may also encode information in the polarity of the two conductors and or that are actively driven. At any time in a 3 wire implementation exactly two of the conductors are driven with currents in opposite directions and or with a voltage differential. In a simple implementation data may be encoded using two bit values where one bit is encoded in the direction of phase transitions and the second bit is encoded in the polarity of the current state.

The timing chart illustrates data encoding using both phase rotation direction and polarity. The curves and relate to signals carried on three wires and respectively for multiple phase states. Initially the phase transitions are in a clockwise direction and the most significant bit is set to binary 1 until the rotation of phase transitions switches at a time to a counterclockwise direction as represented by a binary 0 of the most significant bit. The least significant bit reflects the polarity of the signal in each state.

In some instances the encoding scheme may encode information in changes in the polarity of the two actively driven conductors and or . In one example a bit having a value of 1 may be encoded as a change in polarity between two symbol intervals while a bit having a value of 0 may be encoded as no change in polarity between the two symbol intervals. A decoder may be configured to decode data at the boundaries between symbols by detecting changes in direction of rotation and changes in polarity. If data is encoded in changes in polarity between two symbol intervals in the example of the depicted sequence of encoded values can be replaced by the sequence 11 10 10 11 10 01 01 01 01 01 01 01.

According to certain aspects disclosed herein one bit of data may be encoded in the rotation or phase change in a 3 wire 3 phase encoding system and an additional bit may be encoded in the polarity of the two driven wires or in a change in polarity of the driven wires compared to the polarity used in the previous wire state. Additional information may be encoded in each transition of a 3 wire 3 phase encoding system by allowing transition to any of the possible states from a current state. Given 3 rotational phases and two polarities for each phase 6 states are available in a 3 wire 3 phase encoding system. Accordingly 5 states are available for transition from any current state. Accordingly there may be log 5 2.32 bits encoded per symbol transition which allows the mapper to accept a 16 bit word and encode it in a sequence of 7 symbols.

N Phase data transfer may use more than three wires provided in a communication medium such as a bus. The use of additional signal wires that can be driven simultaneously provides more combinations of states and polarities and allows more bits of data to be encoded at each transition between states. This can significantly improve throughput of the system and reduce the power consumption over approaches that use multiple differential pairs to transmit data bits while providing increased bandwidth.

In one example an encoder may transmit symbols using 6 wires with 2 pairs of wires driven for each state. The 6 wires may be labeled A through F such that in one state wires A and F are driven positive wires B and E negative and C and D are undriven or carry no current . For six wires there may be 

Of the 4 wires driven the possible combinations of two wires driven positive and the other two must be negative . The combinations of polarity may include 

Accordingly the total number of different states may be calculated as 15 6 90. To guarantee a transition between symbols 89 states are available from any current state and the number of bits that may be encoded in each symbol may be calculated as log 89 6.47 bits per symbol. In this example a 32 bit word can be encoded by the mapper into 5 symbols given that 5 6.47 32.35 bits.

The general equation for the number of combinations of wires that can be driven for a bus of any size as a function of the number of wires in the bus and number of wires simultaneously driven 

In operation the wire state decoder may extract a sequence of symbols from signals received on wires and . The symbols are decoded based on signaling states that may be represented as a combination of phase rotation and polarity or changes in polarity of the signals received on wires and as disclosed herein. The wire state decoder may include a CDR which extracts a clock that can be used to reliably capture symbols from the wires and . The CDR may be configured to generate the clock based on the occurrence of a transition on least one of the wires and or at each boundary between consecutive symbol intervals. The CDR may delay an edge of the clock to allow time for all wires and to stabilize and to thereby ensure that the current symbol can be reliably captured for decoding purposes.

The delay used by the CDR may be configured to allow a period of time sufficient to mask the effect of multiple edges at the same symbol boundary where the multiple edges are generated at different times by different ones of the differential receivers . These multiple edges can arise when certain state transitions cause different differential receivers to produce edges that are separated in time with respect to one another. The CDR may include a delay element that delays response to a first occurring edge at a symbol boundary until a time when all possible edges have occurred. The CDR may respond to the first occurring edge at a symbol boundary initiate a delay period at the symbol boundary and ignore any other edges occurring after the symbol boundary until the delay period has elapsed.

Variations in the performance of components of the CDR may be expected to affect the delays between multiple edges. These variations in performance of components in the CDR may be accommodated by configuring a delay for the CDR that accounts for worst case conditions. The variations in performance may be caused by changes in power voltage and temperature PVT conditions for example. The duration of the delay may affect the performance of the communications link and may limit the maximum clock frequency that can be used in the communications link. If the configured delay is too short then multiple clock pulses may be created for a single symbol which may cause loss of synchronization between transmitter and receiver. If the delay is too long symbol times may overlap thereby causing the clock recovery circuit to malfunction or generate a single pulse for two symbol intervals.

Certain signaling state transitions may be detectable by a single differential receiver or while other signaling state transitions may be detected by two or more of the differential receivers and or . In one example the signaling states of two wires may be unchanged after a symbol transition and the output of a corresponding differential receiver or may also be unchanged after the symbol transition. In another example both wires in a pair of wires and or may be in the same first state in a first time interval and both wires may be in a same second state in a second time interval such that the output of a corresponding differential receiver or may be unchanged after the phase transition. Accordingly a clock generation circuit may include signaling state change detect circuits and logic that monitor the outputs of all differential receivers and in order to determine when a signaling state transition has occurred. The clock generation circuit may generate a receive clock based on detected signaling state transitions.

Changes in signaling states on different wires and or may occur or be detected at different times. The timing of detection of the signaling state changes may vary according to the type of signaling state change that has occurred. The result of this variability is illustrated in the simplified timing diagram provided in . Markers and representing the outputs of the signaling state change detection circuit and or differential receivers and are assigned different heights for clarity of illustration only. The relative heights of markers and have no specific relationship to voltage or current levels polarity or weighting values used for clock generation or data decoding. The timing chart illustrates the effect of timing of transitions associated with symbols transmitted on the three wires and . In the timing chart transitions between some symbols may result in variable capture windows and or collectively the symbol capture windows during which symbols may be reliably captured. The number of signaling state changes detected and their relative timing can result in jitter on the clock signal .

Variability in the sizes of the symbol capture windows and associated jitter may be caused in part by the electrical characteristics of the wires and as illustrated in the simple example depicted in . Transition times may be affected by variability in signal rise or fall times and or variability in detection circuits caused by manufacturing process tolerances variations and stability of voltage and current sources and operating temperature. Large variability in transition times may be attributable to the existence of different voltage or current levels in 3 phase signaling. A simplified voltage level example is depicted in which illustrates transition times in a single wire or . A first symbol Sym may be transmitted in a symbol interval that ends at time a second symbol Sym may be transmitted in a symbol interval that ends at time and a third symbol Sym may be transmitted in a symbol interval that ends at time when transmission of a fourth symbol Sym begins. The transition from a state determined by the first symbol to the state corresponding to the second symbol may be detected after a first delay attributable to the time taken for voltage in the wire or to reach a threshold voltage and or . The threshold voltages may be used to determine the state of the wire or . The transition from a state determined by the second symbol to the state for the third symbol may be detected after a second delay attributable to the time taken for voltage in the wire or to reach one of the threshold voltages and or . The transition from a state determined by the third symbol to the state for the fourth symbol may be detected after a third delay attributable to the time taken for voltage in the wire or to reach a threshold voltage and or .

As depicted the third delay may be shorter than the first delay and the second delay may be the longest delay. The second delay may be the longest delay because state 0 is an undriven state and the voltage in the wire or may drift slowly towards the threshold whereas the first delay and the second delay are associated with transitions in which the wire or is actively pulled to the 1 and 1 states respectively.

An eye pattern or eye diagram is a time domain display of a digital data signal where many data interval waveforms are displayed in an overlapped fashion. A trigger serves as the starting point of the displayed signal and the trigger may occur at a fixed repeating time period equal to the frequency associated with one unit interval UI of the data which may correspond to the symbol transmission time. The starting point of each overlapped signal portion that includes one UI is typically controlled by the trigger. The eye pattern provides a useful tool for evaluating the effects of channel noise and inter symbol interference ISI on the baseband signal to be received.

The concept of periodic sampling and display of the signal is useful during design adaptation and configuration of systems which use a clock data recovery circuit that re creates the received data timing signal using frequent transitions appearing in the received data. A communication system based on Serializer Deserializer SERDES technology is an example of a system where an eye pattern can be utilized as a basis for judging the ability to reliably recover data based on the opening of the eye in the eye pattern .

A trigger point for a conventional eye pattern may define the starting time of each waveform that is captured and displayed such that all captured waveforms overlap to display a view that shows the relative time offset of all low to high and high to low transitions with respect to the ideal symbol boundary time. The ideal symbol boundaries may be defined as the crossing of the mid point for a received signal that has zero transmit clock jitter and zero ISI. The ideal symbol boundary points are the endpoints of the 1 UI interval .

An M wire N Phase encoding system such as a 3 wire 3 phase encoder may encode a signal that has at least one transition at every symbol boundary and the receiver may recover a clock using those guaranteed transitions. The receiver may require reliable data immediately prior to the first signal transition at a symbol boundary and must also be able to reliably mask any occurrences of multiple transitions that are correlated to the same symbol boundary. Multiple receiver transitions may occur due to slight differences in rise and fall time between the signals carried on the M wires e.g. a trio of wires and due to slight differences in signal propagation times between the combinations of signal pairs received e.g. A B B C and C A outputs of differential receivers and of .

With regard to the timing charts and illustrate the differences between signal wires and signals A B and C respectively measureable at the differential receivers and before and after the signal transitions shown in the set of charts . In the examples depicted in the 1 state is represented by a voltage level of 0 volts and the 1 state is represented by a positive voltage V such that the zero crossing occurs at V 2 volts. In many instances a set of differential receivers and may be configured to capture transitions by comparing different combinations for two signal wires and . In one example these differential receivers and may be configured to produce outputs by determining the difference e.g. by subtraction of their respective input voltages. A clock may be generated based on zero crossings of the outputs of one or more of the differential receivers and . A zero crossing may occur when a signal transitions through a 0 state represented by the voltage at the mid point in a voltage range between a voltage representing a 1 state and a voltage representing a 1 state. In one example the zero crossing occurs at 0 volts when the 1 state is represented by a negative voltage V and the 1 state is represented by a positive voltage V .

With reference to the timing charts and relate to a transition from symbol x to symbol x see in which signal A transitions from a 1 state to a 1 state signal B transitions from a 1 state to a 1 state and signal C remains at the 0 state. Accordingly the differential receiver may measure a 2 difference before the AB transition and a 2 difference after the AB transition the differential receivers and may each measure a 1 difference before the BC and CA transitions and a 1 difference after the BC and CA transitions . In this example both the BC and CA transitions and have zero crossings. The zero crossings may occur in close temporal proximity because both transitions are towards driven states.

The timing charts and relate to a transition from symbol x to symbol y in which signal A transitions from a 1 state to a 0 state signal B transitions from a 1 state to a 1 state and signal C transitions from a 0 state to a 1 state. Accordingly the differential receiver may measure a 2 difference before the AB transition and a 1 difference after the AB transition the differential receiver may measure a 1 difference before the BC transition and a 2 difference after the BC transition and the differential receiver may remain at a 1 difference through the CA non transition . In this example both the BC and AB transitions and have zero crossings. These zero crossings may be separated by a significant time interval . The difference may occur because the BC transition involves two signals that have a final driven state while the AB transition relates to one signal that has a final undriven state.

The timing charts and relate to a transition from symbol x to symbol z in which signal A transitions from a 1 state to a 1 state signal B transitions from a 1 state to a 0 state and signal C transitions from a 0 state to a 1 state. Accordingly the differential receiver may measure a 2 difference before the AB transition and a 1 difference after the AB transition the differential receiver may measure a 1 difference before and after the BC non transition and the differential receiver may measure a 1 difference before the CA transition and a 2 difference after the CA transition . In this example the CA and AB transitions and have zero crossings. These zero crossings may be separated by a significant period of time where the difference may be attributed to the CA transition involving signals A and C that both have a final driven state while the AB transition involves one signal the B signal that has a final undriven state.

The time intervals and between zero crossings may arise from differences in transition times between different combinations of states. Typically the transition times for transitions to a driven state are shorter than transitions to an undriven state. Other circuit implementations may be employed that produce increased or decreased differences in rise times. For example the relative time relationship of the signals at the inputs of differential receivers and may be affected when the zero state is a driven level rather than an undriven level or where a undriven signal wire is terminated by pull up and or pull down resistors. Thus different timing relationships can be anticipated for signals received at the receiver inputs.

The examples illustrated in describe alignment of transitions for the three state transitions x to x x to y and x to z and as shown in the timing charts and zero crossings occur on at least two of the signal wires and . The conditions that occur in these three state transitions may be present in 18 of the 30 possible state transitions shown in .

The timing charts and of relate to a transition from a first symbol x to a second symbol y in which signal A transitions from a 1 state to the 0 state e.g. to an undriven state signal B is unchanged at the 1 state through the transition and signal C transitions from a 0 state to a 1 state. Accordingly the differential receiver may measure a 2 difference before the AB transition and a 1 difference after the AB transition the differential receiver may measure a 1 difference before the BC transition and a 2 difference after the BC transition and the differential receiver may measure a 1 difference before the CA transition and a 1 difference after the CA transition . In this example only one differential receiver produces an output that has a zero crossing.

The timing charts and relate to a transition from a first symbol x to a second symbol z in which signal A remains at a 1 state signal B transitions from the 1 state to a 0 state and signal C transitions from a 0 state to the 1 state. Accordingly the differential receiver may measure a 2 difference before the AB transition and a 1 difference after the AB transition the differential receiver may measure a 1 difference before the BC transition and a 1 difference after the BC transition and the differential receiver may measure a 1 difference before the CA transition and a 2 difference after the CA transition . In this example only one differential receiver produces an output that has a zero crossing.

The eye pattern may be generated from an overlay of multiple symbol intervals . The eye pattern may be produced using a fixed and or symbol independent trigger . The eye pattern includes an increased number of voltage levels that may be attributed to the multiple voltage levels employed by a typical N phase driver circuit. In the example the eye pattern may represent possible transitions in 3 wire 3 phase encoded signals provided to differential receivers and . The three voltage levels may cause the differential receivers and to generate strong levels and weak levels for both positive and negative polarities. Typically only one wire and is undriven in any symbol and the differential receivers and do not produce a 0 state here 0 Volts output. The voltages associated with strong and weak levels need not be evenly spaced with respect to a 0 Volts level. For example the weak levels represent a comparison of voltages that may include the voltage level reached by an undriven signal wire and . The eye pattern reflects a conventional approach in which it is generally useful to overlap the waveforms produced by the differential receivers and because all three pairs of signals are considered simultaneously when data is captured at the receiving device. The waveforms produced by the differential receivers and are representative of three comparisons of pairs of signals A B B C and C A .

Drivers receivers and other devices used in a 3 Phase decoder may exhibit different switching characteristics that can introduce relative delays between signals received from the three wires. Multiple receiver output transitions may be observed at each UI boundary and or due to slight differences in the rise and fall time between the three signals of the trio of wires and due to slight differences in signal propagation times between the combinations of pairs of received signals . The eye pattern may capture variances in rise and fall times as a relative delay in transitions near each UI boundary and . The variances in rise and fall times may be due to the different characteristics of the 3 Phase drivers. Differences in rise and fall times may also result in an effective shortening or lengthening of the symbol interval time .

A signal transition region represents a time period of uncertainty where variable signal rise times prevent reliable decoding. State information may be reliably determined in an eye opening representing the time period in which the symbol is stable and can be reliably received and decoded. In one example the eye opening may be determined to begin at the end of the signal transition region and end at the termination of the symbol interval . In the example depicted in the eye opening may be determined to begin at the end of the signal transition region and end at a time when the signaling state of the connectors and or the outputs of the three differential receivers and have begun to change to reflect the next symbol.

The maximum speed of a communication link configured for N Phase encoding may be limited by the duration of the signal transition region compared to the received signal eye opening . The minimum period for the symbol interval may be constrained by tightened design margins associated with the CDR circuit in the decoder illustrated in or in the clock generation circuit of for example. Different signaling state transitions may be associated with different variations in signal transition times corresponding to two or more wires and or thereby causing the outputs of the differential receivers and in the receiving device to change at different times and or rates with respect to the symbol boundary where the inputs to the differential receivers and begin to change. A delay element may be provided in the CDR circuit to accommodate possible large variations in received signal transition times at the outputs of two or more of the differential receivers and . The delay element may be provided in one or more of the state change detect circuit and or the clock generation circuit shown in . In one example the delay element may have a minimum delay period that exceeds the transition region time . The maximum delay time provided by this delay element may not extend beyond the closing edge of the eye opening . In some instances the maximum delay time provided by the delay element may not extend beyond the commencement of the next symbol interval at time . At faster data rates the eye opening can become small in comparison to the symbol interval and the effect of symbol transition variability may be determinative of the maximum symbol transmission rate.

The duration of any single transition is unlikely to span the full range of the signal transition region t since it is unlikely that a minimum possible signal transition time and a maximum possible transition time occurs during a single symbol transition. In one example the signal transition region may be bounded by the time of the first zero crossing detected at the output of a differential receiver or and the time of the last zero crossing detected at the output of a differential receiver or for all possible symbol transitions. The transition times observed at the outputs of the differential receiver and may correspond to the times taken for the voltage at the connectors and or wires or to reach a signaling state after a change in one or more inputs of the drivers in a transmitter.

The longest possible transition time may be determined by the characteristics of the signal wire and or connector or and the type of state transition involved. In one example the longest possible transition time may be determined by the rise or fall time of one or more signals. Rise and fall times may be determined by the nature and voltage levels of the original and or the final states. Typically the longest possible transition time corresponds to a transition between an actively driven state and an undriven state.

A high value of tfor the transition region relative to the symbol interval can result in increased design difficulty associated with the CDR circuit or clock generation circuit . For example the clock generation circuit may employ a delay element or timer that is triggered by the first zero crossing of the three differential receiver outputs and . The state of the outputs of all three differential receivers and may not be safely sampled until all of the differential receivers and have reached their final state which may be defined by the end of the transition region. Accordingly the timer may preferably expire shortly after the end of the transition region at which time the clock generation circuit may output a clock edge that is used to sample the outputs of the three differential receivers and

In some devices delay elements in the CDR circuit can be afflicted by variations in manufacturing process circuit supply voltage and die temperature PVT variation and may generate delays that vary significantly. In such systems the nominal operating condition of the CDR circuit is generally set by design to generate a clock edge somewhere in the middle of the eye opening in order to ensure that a clock edge occurs after the end of the transition region and prior to the commencement of the transition region to the next symbol even under worst case PVT effects. Difficulty can arise in designing a CDR circuit that guarantees a clock edge within the eye opening when the transition region is large compared to the eye opening . For example a typical delay element may produce a delay value that changes by a factor of 2 over all PVT conditions and the eye opening must be larger than the transition region in order that a non adjustable delay value can be chosen.

In some instances the duration of the transition region may be calculated based on the maximum timing between a change in input to one or more drivers of a transmitting circuit see and corresponding transitions observed or expected at the outputs of differential receivers in a receiver see . In other instances a modified transition region may be determined at the outputs of the receivers as the maximum difference between the time of a first transition at the output of one of the receivers and the time of the last transition at the output of the other receivers for all symbol transitions.

In the illustrated example the impact of random jitter on the eye pattern derives from a link transmit clock frequency that is modulated at a frequency 1 24 of the UI rate. The maximum difference in the UI may be determined as the amplitude of deviation from the mean A and the number of UIs in a full cycle of the modulation. In one example the maximum deviation may be calculated as peak deviation in one UI sin 2 UI per cycle . In the example shown in the duration of the UI can be graphed as a distance of approximately 8.25 centimeters while the peak deviation in a cycle is graphed at approximately 1.75 centimeters. There are 24 UIs in each cycle of the variance and A 1.75 8.25 0.2121 UI. peak deviation in one UI 0.2121 sin 2 24 0.0549. In the example therefore the peak deviation between symbols is about 5.5 of the UI . The cumulative effect of this change in the phase of the beginning and ending of the UI from cycle to cycle with respect to the ideal trigger point causes the eye opening to close by a significant amount with respect to the available per symbol eye opening . The available per symbol eye opening may be significantly larger for each symbol than the opening presented in a conventional eye pattern due to jitter in the clock signal. Clock edges in an M wire N phase communications link may be generated independently for each symbol and a sample point may be derived from such independently generated clock in a manner that takes advantage of the full per symbol eye opening . In the example data may be sampled at a sample point provided shortly before the occurrence of the first edge detected at the symbol transition and or .

When the concept of multiple receiver transitions near each UI boundary and is combined with phase jitter of the transmitter clock and ISI then the eye opening can appear to be nearly or even completely closed although in operation the 3 Phase receiver may have more than sufficient timing margin in the per symbol eye opening to reliably capture the signal. The actual timing margin is not typically based on a trigger that is unrelated to the symbol but may be based on the 3 Phase recovered clock that is derived from the signal transitions at every symbol boundary and such that only the cycle to cycle effects on the per symbol eye opening are significant.

The UI is bounded at the beginning and end by one or more differential signal transitions that pass through the differential zero signal level zero crossing . In a 3 Phase system these differential waveforms A B B C and C A are all considered together. Time window W defines the region in which the signal differences have a zero crossing i.e. cross the mid point at the beginning of the UI and time window W is the region where the signal differences have a zero crossing at the end of the UI . The first signal difference of the group A B B C and C A that has a zero crossing in time window W defines the trigger point . The eye pattern is produced by overlapping the time domain waveforms of multiple UI periods where the trigger points of all waveforms are aligned at the same point in time in the displayed eye pattern. The trigger point may be set as the data sampling point the first detected transition and or the first zero crossing of an output of the differential receivers and

Typically an N Phase clock recovery and data sampling circuit is sensitive only to cycle to cycle events and it is possible for a conventional eye pattern display to provide misleading information. For example the eye may appear to be completely closed even when each individual cycle or UI of the data signal has a large amount of timing margin to sample the data just prior to the first transition of the data signal that marks the UI boundary and or . The 3 Phase clock recovery circuit and data capture circuit is mostly unaffected by this eye closure because the clock recovery circuit may generate a sample clock that results in a capture point just prior to the first transition near a UI boundary and or . A conventional data capture circuit for a SERDES based system may use a PLL to recover the clock and generally requires that capture occurs in the middle of the eye opening. However a 3 Phase data capture circuit and data sampling circuit can adjust the sampling point at every UI boundary and in order to sample the received data at the ideal moment which results in a large or optimized data setup time for the data capture circuit. The recovery circuit need only detect the first edge at a UI boundary and or and trigger a delay circuit to mask any subsequent receiver transitions near the same UI boundary and or .

An N Phase eye pattern disclosed herein may be used for the observation of the data sampling and clock recovery margin of N Phase signals. The disclosed N Phase eye pattern mimics the behavior of the clock recovery and data capture circuit in order to observe the timing margin available for the data sampling circuit and the amount of delay required for the timing mask in the clock recovery circuit. This disclosed N Phase eye pattern definition can be used by N Phase test equipment to display a new type of eye pattern which the equipment user may view and interpret. For the purposes of this disclosure certain aspects of the disclosed N Phase eye pattern are described with respect to a 3 Phase encoded communications link. An N Phase eye pattern for corresponding to a communications link that uses more than 3 wires may have more than 4 levels in the eye pattern. However certain principles and aspects described herein including those principles and aspects related to the timing and capture of the first zero crossing transition at the UI boundary and the use of the first zero crossing transition as a trigger are equally applicable in the communications link that uses more than 3 wires.

While the examples presented in this disclosure relate primarily to 3 Wire 3 Phase communications links the techniques algorithms circuits and methods described are applicable to other encoding schemes and eye patterns may be generated for M Wire N Phase and N Factorial N for example. In some instances algorithms may be extended and or adapted to match the clock generation and data sampling circuits used for these different encoding schemes. For example algorithms and circuits according to certain aspects of this disclosure may be adapted to identify the first signal zero crossing that defines the trigger point in the presence of greater numbers of level strengths in the waveform. In one example the algorithms and circuits may be adapted to accommodate multiple version of strong 1 states multiple version of weak 1 states as well as weak 0 states and strong 0 states in an N Phase waveform.

In the illustrated example the processing circuit may be implemented with a bus architecture represented generally by the bus . The bus may include any number of interconnecting buses and bridges depending on the specific application of the processing circuit and the overall design constraints. The bus links together various circuits including the one or more processors and storage . Storage may include memory devices and mass storage devices and may be referred to herein as computer readable media and or processor readable media. The bus may also link various other circuits such as timing sources timers peripherals voltage regulators and power management circuits. A bus interface may provide an interface between the bus and one or more transceivers . A transceiver may be provided for each networking technology supported by the processing circuit. In some instances multiple networking technologies may share some or all of the circuitry or processing modules found in a transceiver . Each transceiver provides a means for communicating with various other apparatus over a transmission medium. Depending upon the nature of the apparatus a user interface e.g. keypad display speaker microphone joystick may also be provided and may be communicatively coupled to the bus directly or through the bus interface .

A processor may be responsible for managing the bus and for general processing that may include the execution of software stored in a computer readable medium that may include the storage . In this respect the processing circuit including the processor may be used to implement any of the methods functions and techniques disclosed herein. The storage may be used for storing data that is manipulated by the processor when executing software and the software may be configured to implement any one of the methods disclosed herein.

One or more processors in the processing circuit may execute software. Software shall be construed broadly to mean instructions instruction sets code code segments program code programs subprograms software modules applications software applications software packages routines subroutines objects executables threads of execution procedures functions algorithms etc. whether referred to as software firmware middleware microcode hardware description language or otherwise. The software may reside in computer readable form in the storage or in an external computer readable medium. The external computer readable medium and or storage may include a non transitory computer readable medium. A non transitory computer readable medium includes by way of example a magnetic storage device e.g. hard disk floppy disk magnetic strip an optical disk e.g. a compact disc CD or a digital versatile disc DVD a smart card a flash memory device e.g. a flash drive a card a stick or a key drive a random access memory RAM a read only memory ROM a programmable ROM PROM an erasable PROM EPROM an electrically erasable PROM EEPROM a register a removable disk and any other suitable medium for storing software and or instructions that may be accessed and read by a computer. The computer readable medium and or storage may also include by way of example a carrier wave a transmission line and any other suitable medium for transmitting software and or instructions that may be accessed and read by a computer. Computer readable medium and or the storage may reside in the processing circuit in the processor external to the processing circuit or be distributed across multiple entities including the processing circuit . The computer readable medium and or storage may be embodied in a computer program product. By way of example a computer program product may include a computer readable medium in packaging materials. Those skilled in the art will recognize how best to implement the described functionality presented throughout this disclosure depending on the particular application and the overall design constraints imposed on the overall system.

The storage may maintain software maintained and or organized in loadable code segments modules applications programs etc. which may be referred to herein as software modules . Each of the software modules may include instructions and data that when installed or loaded on the processing circuit and executed by the one or more processors contribute to a run time image that controls the operation of the one or more processors . When executed certain instructions may cause the processing circuit to perform functions in accordance with certain methods algorithms and processes described herein.

Some of the software modules may be loaded during initialization of the processing circuit and these software modules may configure the processing circuit to enable performance of the various functions disclosed herein. For example some software modules may configure internal devices and or logic circuits of the processor and may manage access to external devices such as the transceiver the bus interface the user interface timers mathematical coprocessors and so on. The software modules may include a control program and or an operating system that interacts with interrupt handlers and device drivers and that controls access to various resources provided by the processing circuit . The resources may include memory processing time access to the transceiver the user interface and so on.

One or more processors of the processing circuit may be multifunctional whereby some of the software modules are loaded and configured to perform different functions or different instances of the same function. The one or more processors may additionally be adapted to manage background tasks initiated in response to inputs from the user interface the transceiver and device drivers for example. To support the performance of multiple functions the one or more processors may be configured to provide a multitasking environment whereby each of a plurality of functions is implemented as a set of tasks serviced by the one or more processors as needed or desired. In one example the multitasking environment may be implemented using a timesharing program that passes control of a processor between different tasks whereby each task returns control of the one or more processors to the timesharing program upon completion of any outstanding operations and or in response to an input such as an interrupt. When a task has control of the one or more processors the processing circuit is effectively specialized for the purposes addressed by the function associated with the controlling task. The timesharing program may include an operating system a main loop that transfers control on a round robin basis a function that allocates control of the one or more processors in accordance with a prioritization of the functions and or an interrupt driven main loop that responds to external events by providing control of the one or more processors to a handling function.

At step the device may provide an image that superimposes representations of the plurality of symbols one upon another. The representations may be arranged with respect to one another in the image by temporally aligning triggers determined for the plurality of symbols. Each trigger may be correlated with a sampling clock used to capture data communicated in a corresponding symbol.

In an aspect of the disclosure the symbol boundary occurs at the end of the each symbol. The symbol boundary may alternatively occur at the beginning of the each symbol. The first transition may include a first zero crossing of a signal corresponding to or calculated to be output by one of a plurality of differential receivers in a receiver. The first zero crossing of the signal may be estimated calculated or generated by circuits or differential probes. The signals may transition between three or more voltage states. A difference in state between two wires in the communications link may be determined. The communications link may include an M wire N phase decoder such as a 3 wire 3 phase decoder or an N factorial decoder.

In an aspect of the disclosure each trigger may be correlated with an edge of the sampling clock that is used to capture information from a delayed version of the symbol. The image may include an eye pattern.

The processor is responsible for managing the bus and general processing including the execution of software stored on the processor readable storage medium . The software when executed by the processor causes the processing circuit to perform the various functions described supra for any particular apparatus. The processor readable storage medium may be used for storing data that is manipulated by the processor when executing software.

In one configuration the processing circuit may include modules and or circuits for determining a trigger corresponding to a first transition at a symbol boundary for each of a plurality of symbols received sequentially from the communications link modules and or circuits for generating and providing an image that superimposes representations of the plurality of symbols one upon another in an eye pattern and presentation modules and or circuits for displaying the image. The apparatus may additionally be provisioned with modules and or circuits that are configured or adapted to receive monitor and or processing signals received from a set of connectors or wires . In one example the modules and or circuits for receiving monitoring and or processing signals may be include comparison circuits configured to determine differences between combinations of signals received from the set of connectors or wires as illustrated for example in the clock generation circuit illustrated in .

In one example the aforementioned processing circuit may be provided in a high speed digital storage oscilloscope which may include further software modules that are may be executed by one or more processors of the processing circuit . When executed by the one or more processors the software modules may cause the processing circuit to generate one or more eye patterns . For example in order to produce one eye pattern the high speed digital storage oscilloscope may capture and store many samples of voltages A B and C measured on wires in high speed waveform storage. The high speed digital storage oscilloscope may be configured to compute A B B C and C A values and to find the first zero crossing at each UI boundary. The eye pattern and or may be produced by displaying each segment of the A B B C and C A waveforms as an overlap with trigger points aligned in time.

The test and or measurement apparatus may include a processing circuit . The processing circuit may be implemented with a bus architecture represented generally by the bus . The bus may include any number of interconnecting buses and bridges depending on the specific application of the processing circuit and the overall design constraints. The bus links together various circuits including one or more processors and or hardware modules represented by the processor high speed sample memory one or more modules or circuits line input circuits and the computer readable storage medium . The bus may also link various other circuits such as timing sources peripherals voltage regulators and power management circuits which are well known in the art and therefore will not be described any further.

The processor may include a microprocessor a controller a digital signal processor a sequencer a state machine etc. The processor is responsible for general processing including the execution of software stored on the computer readable storage medium . The software when executed by the processor causes the processing circuit to perform the various functions described supra for any particular apparatus. The computer readable storage medium may also be used for storing data that is manipulated by the processor when executing software. The processing circuit further includes at least one of the modules and . The one or more modules may be software modules running in the processor resident stored in the computer readable storage medium one or more hardware modules coupled to the processor or some combination thereof.

In one configuration the line input circuits may receive and process signals from the communications link . The inputs may be received using differential probes that generate difference signals for two or more wires. The line input circuits may digitize and or measure voltages or currents of the wires of the communications link . The processing circuit may be configured to calculate various properties of the wires including difference voltages between pairs of the wires. A trigger corresponding to a first transition at a symbol boundary may be determined for each of a plurality of symbols received sequentially from the communications link. The processing circuit may include means for generating and providing an image that superimposes representations of the plurality of symbols one upon another in an eye pattern. The display and or print management module or circuits may selectively generate the image on a sample point or first transition preceding or terminating the current symbol. The display and or print management module or circuits may selectively generate a sunglasses image as illustrated in for example.

In one example a high speed digital storage oscilloscope may include a combination of hardware and software modules configured to generate one or more eye patterns . For example in order to produce one eye pattern the high speed digital storage oscilloscope may capture and store many samples of voltages A B and C measured on wires see in high speed waveform storage. The high speed digital storage oscilloscope may be configured to compute A B B C and C A values and to find the first zero crossing at each UI boundary. The eye pattern and or may be produced by displaying each segment of the A B B C and C A waveforms as an overlap with trigger points aligned in time.

It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplary approaches. Based upon design preferences it is understood that the specific order or hierarchy of steps in the processes may be rearranged. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but is to be accorded the full scope consistent with the language claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed as a means plus function unless the element is expressly recited using the phrase means for. 

