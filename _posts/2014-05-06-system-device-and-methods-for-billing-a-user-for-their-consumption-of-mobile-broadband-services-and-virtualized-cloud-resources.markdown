---

title: System, device and methods for billing a user for their consumption of mobile broadband services and virtualized cloud resources
abstract: A system, a device, and various methods are described herein for billing a user for their consumption of mobile broadband services which are monitored by a mobile broadband charging system and for their consumption of virtualized cloud resources which are monitored by a cloud operating system. In one example, the system comprises a commercially available mobile broadband charging system and a commercially available cloud operating system and then incorporates the device to combine the commercially available mobile broadband charging system and the commercially available cloud operating system in order to bill the user for their consumption of mobile broadband services and virtualized cloud resources.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09473921&OS=09473921&RS=09473921
owner: Telefonaktiebolaget LM Ericsson (publ)
number: 09473921
owner_city: Stockholm
owner_country: SE
publication_date: 20140506
---
The present invention relates to a system a device and various methods for billing a user for their consumption of mobile broadband services which are monitored by a mobile broadband charging system and for their consumption of virtualized cloud resources which are monitored by a cloud operating system.

The following abbreviations are herewith defined at least some of which are referred to within the following description of the prior art and the present invention.

A mobile operator typically runs a mobile broadband charging system that allows them to bill a user for their consumption of different kinds of mobile broadband services in various ways. For example a mobile operator can offer zero rating where all the charges for a particular user go onto the bill of an enterprise account. Plus a mobile operator can provide special offers where a user for example receives a special offer for a certain number of megabytes of data free after which they must pay. However if the mobile operator wanted to bill a user for their consumption of both mobile broadband services and virtualized cloud resources computing storage network as well as application usage then the mobile operator would have to custom build a cloud operating system and connect their custom built cloud operating system to their mobile broadband charging system. Although this particular process to bill the user would work it is still desirable to improve how a mobile operator can bill the user for their consumption of mobile broadband services and virtualized cloud resources.

A system a device and various methods which improve how a mobile operator can bill a user for their consumption of mobile broadband services and virtualized cloud resources are described in the independent claims of the present application. Advantageous embodiments of the system the device and the various method have been described in the dependent claims of the present application.

In one aspect the present invention comprises a system configured for billing a user for their consumption of mobile broadband services and virtualized cloud resources. In one embodiment the system comprises a graphical user interface a mobile broadband charging system a cloud operating system and a device. The mobile broadband charging system is configured to 1 monitor mobile broadband usage of the user 2 rate the monitored mobile broadband usage of the user and 3 store charges of the rated mobile broadband usage of the user. The cloud operating system is configured to 1 monitor virtual resource usage of the user 2 meter data associated with the monitored virtual resource usage of the user and 3 store the metered data associated with the monitored virtual resource usage of the user. The device comprises a processor and a memory that stores processor executable instructions where the processor interfaces with the memory and executes the processor executable instructions to enable a usage reporting interface a data center charging adaptation module and a query interface. The data center charging adaptation module is enabled to 1 periodically query the cloud operating system for the stored metered data associated with the monitored virtual resource usage of the user 2 receive the metered data 3 convert the metered data into a format supported by the mobile broadband charging system and 4 call the usage reporting interface to forward the converted metered data to the mobile broadband charging system wherein the mobile broadband charging system rates the converted metered data and stores charges of the rated converted metered data of the monitored virtual resource usage of the user. The query interface is enabled to 1 receive a billing request associated with the user 2 obtain billing information associated with the stored charges of the rated mobile broadband usage of the user and the stored charges associated with the rated converted data of the virtual resource usage of the user from the mobile broadband charging system and 3 output the obtained billing information associated with the user. The system has an advantage in that it allows a mobile operator to do consolidated charging of mobile wireless service and cloud virtualized resource usage.

In another aspect the present invention comprises a method in a system for billing a user for their consumption of mobile broadband services and virtualized cloud resources wherein the system comprises a graphical user interface a mobile broadband charging system a cloud operating system and a device. In one embodiment the method comprises operating the mobile broadband charging system to 1 monitor mobile broadband usage of the user 2 rate the monitored mobile broadband usage of the user and 3 store charges of the rated mobile broadband usage of the user. Further the method comprises operating the cloud operating system to 1 monitor virtual resource usage of the user 2 meter data associated with the monitored virtual resource usage of the user and 3 store the metered data associated with the monitored virtual resource usage of the user. In addition the method comprises operating the device which comprises a usage reporting interface a data center charging adaptation module and a query interface. In particular the data center charging adaptation module is operated to 1 periodically query the cloud operating system for the stored metered data associated with the monitored virtual resource usage of the user 2 receive the metered data 3 convert the metered data into a format supported by the mobile broadband charging system and 4 call the usage reporting interface to forward the converted metered data to the mobile broadband charging system wherein the mobile broadband charging system further operates to rate the converted metered data and store charges of the rated converted metered data of the monitored virtual resource usage of the user. The query interface is operated to 1 receive a billing request associated with the user 2 obtain billing information associated with the stored charges of the rated mobile broadband usage of the user and the stored charges associated with the rated converted data of the virtual resource usage of the user from the mobile broadband charging system and 3 output the obtained billing information associated with the user. The method has an advantage in that it allows a mobile operator to do consolidated charging of mobile wireless service and cloud virtualized resource usage.

In still another aspect the present invention comprises a device configured for billing a user for their consumption of mobile broadband services which are monitored by a mobile broadband charging system and for their consumption of virtualized cloud resources which are monitored by a cloud operating system. In one embodiment the device comprises a processor and a memory that stores processor executable instructions where the processor interfaces with the memory and executes the processor executable instructions to enable a usage reporting interface a data center charging adaptation module and a query interface. The data center charging adaptation module is enabled to 1 periodically query the cloud operating system for stored metering data associated with a monitored virtual resource usage of the user 2 receive the metering data 3 convert the metering data into a format supported by the mobile broadband charging system and 4 call the usage reporting interface to forward the converted metering data to the mobile broadband charging system. The query interface is enabled to 1 receive a billing request associated with the user 2 obtain billing information associated with stored charges of a mobile broadband usage of the user and stored charges of the virtual resource usage of the user from the mobile broadband charging system and 3 output the obtained billing information associated with the user. The device has an advantage in that it allows a mobile operator to do consolidated charging of mobile wireless service and cloud virtualized resource usage.

In yet another aspect the present invention comprises a method in a device for billing a user for their consumption of mobile broadband services which are monitored by a mobile broadband charging system and for their consumption of virtualized cloud resources which are monitored by a cloud operating system and wherein the device comprises a usage reporting interface a data center charging adaptation module and a query interface. In one embodiment the method comprises operating the data center charging adaptation module to I periodically query the cloud operating system for stored metering data associated with a monitored virtual resource usage of the user 2 receive the metering data 3 convert the metering data into a format supported by the mobile broadband charging system and 4 call the usage reporting interface to forward the converted metering data to the mobile broadband charging system. Further the method comprises operating the query interface to 1 receive a billing request associated with the user 2 obtain billing information associated with stored charges of a mobile broadband usage of the user and stored charges of the virtual resource usage of the user from the mobile broadband charging system and 3 output the obtained billing information associated with the user. The method has an advantage in that it allows a mobile operator to do consolidated charging of mobile wireless service and cloud virtualized resource usage.

Additional aspects of the invention will be set forth in part in the detailed description figures and any claims which follow and in part will be derived from the detailed description or can be learned by practice of the invention. It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory only and are not restrictive of the invention as disclosed.

Referring to there is shown a diagram of a system configured for billing a user for their consumption of mobile broadband services and virtualized cloud resources in accordance with an embodiment of the present invention. As shown the system comprises a graphical user interface GUI a mobile broadband charging system a cloud operating system and a specially configured device . The specially configured device effectively connects the mobile broadband charging system and the cloud operating system to enable the billing of the user for their consumption of mobile broadband services and virtualized cloud resources . It should be appreciated that the description provided herein about the GUI the mobile broadband charging system the cloud operating system and the specially configured device describes only the operations steps performed by those components which are needed to explain and enable the present invention. It should also be appreciated that the GUI the mobile broadband charging system the cloud operating system and the specially configured device could also perform many other operations steps but for clarity those other operations steps have not been described herein.

The mobile broadband charging system is configured to perform at least the following operations 1 monitor the mobile broadband usage of the user step 1a note the mobile broadband services themselves are provided by the mobile operator 2 rate the monitored mobile broadband usage of the user step 1b note the monitored mobile broadband usage of the user can be rated in various ways such as zero rating or applying special offers and 3 store charges of the rated mobile broadband usage of the user in a charging database step 1c . The mobile broadband charging system can be a commercially available system or a new system which is configured to be an integral part of the system . In any case the mobile broadband charging system could have a processor and a memory that stores processor executable instructions where the processor interfaces with the memory and executes the processor executable instructions to enable at least steps 1a 1b and 1c. Further the mobile broadband charging system can be configured to use the diameter protocol during the implementation of steps 1a 1b and 1c. The diameter protocol is described in RFC 3588 Diameter Base Protocol September 2003 where the contents of this document are hereby incorporated by reference herein.

The cloud operating system is configured to perform at least the following operations 1 monitor the virtual resource usage of the user step 2a note the virtual resources themselves are part of the cloud operating system 2 meter data associated with the monitored virtual resource usage of the user step 2b and 3 store the metered data associated with the monitored virtual resource usage of the user in one or more storage device s step 2c . The cloud operating system can be a commercially available system or a new system which is configured to be an integral part of the system . In any case the cloud operating system could have a processor and a memory that stores processor executable instructions where the processor interfaces with the memory and executes the processor executable instructions to enable at least steps 2a 2b and 2c. Further the cloud operating system could be configured to use HTTP REST APIs in the implementation of steps 2a 2b and 2c.

The specially configured device comprises at least a usage reporting interface e.g. usage reporting interface REST API a data center charging adaptation module and a query interface e.g. query interface REST API . The data center charging adaptation module is configured to perform at least the following operations 1 periodically query the cloud operating system for the stored metered data associated with the monitored virtual resource usage of the user step 3a 2 receive the metered data step 3b 3 convert the metered data into a format supported by the mobile broadband charging system step 3c and 4 call the usage reporting interface to forward the converted metered data to the mobile broadband charging system step 3d note the mobile broadband charging system is further configured to rate in various ways the converted metered data and store charges of the rated converted metered data in the charging database see step 1d and 5 monitor an account of the user disable access by the user to the virtualized cloud resources and passivize any active virtual resource instance if the account is out of funds and then re enable access by the user to the virtualized cloud resources and reactive any passivised virtual resource instances if the account is replenished with funds step 3e optional . The mobile broadband charging system can have a similar account and functionality where the user has access to mobile broadband resources only when the account is funded. Alternatively the mobile broadband charging system and the cloud operating system can have one single account for the user which is utilized for both the mobile broadband services and the virtual resources .

Further the query interface is configured to perform at least the following operations 1 receive a billing request associated with the user from the GUI step 4a 2 obtain billing information associated with the stored charges of the rated mobile broadband usage of the user and the stored charges associated with the rated converted metered data of the virtual resource usage of the user from the mobile broadband charging system step 4b and 3 output the obtained billing information associated with the user to the GUI step c . The specially configured device could have a processor and a memory that stores processor executable instructions where the processor interfaces with the memory and executes the processor executable instructions to enable at least steps 3a 3b 3c 3d 3e optional 4a 4b and 4c.

As discussed above the system may comprise a commercially available mobile broadband charging system and a commercially available cloud operating system and then incorporate the specially configured device to combine the commercially available mobile broadband charging system and the commercially available cloud operating system in order to bill the user only one shown for their consumption of mobile broadband services and virtualized cloud resources e.g. see . Alternatively the system may comprise a commercially available mobile charging system which has been reprogrammed to implement both the cloud operating system or at least the metering portion thereof and the specially configured device in order to bill the user for their consumption of mobile broadband services and virtualized cloud resources . In yet another alternative the system may comprise a commercially available cloud operating system or at least the metering portion thereof which has been reprogrammed to implement both the mobile charging system and the specially configured device in order to bill the user for their consumption of mobile broadband services and virtualized cloud resources . In any of these cases the system may have just one processor for example and one memory for example to enable steps 1a 1b 1c 1d 2a 2b 3a 3b 3c 3d 3e optional 4a 4b and 4c.

Referring to there is shown a flow diagram that illustrates the main operations of the system in accordance with the present invention. As shown the user interacts with their device e.g. mobile phone smart phone personal digital assistant tablet laptop computer to consume virtual resources box and mobile broadband resources box . Typically the user would be able to consume the virtual resources and mobile broadband resources only if their account s was properly funded. The cloud operating system would monitor and meter the virtual resource usage of the user box and store this data in the virtual resource storage device s box . The mobile charging system would monitor the mobile broadband resource usage of the user box and then rate and record the monitored mobile broadband usage charges for the user in the charging database boxes and . The specially configured device would periodically query the virtual resource storage device s . or some other cloud metering component s associated with the virtual resource storage device s to obtain the consumed metered virtual resources data for the user box . The specially configured device would provide the obtained data to the mobile charging system which then rates the data and records the virtual resources charges of the user in the charging database boxes and . Then the user shown or the mobile operator see s GUI could send a billing request which is received by the specially configured device box . The specially configured device then queries the charging database and sends billing information associated with retrieved charges and back to the user shown or the mobile operator see s GUI box . In one example the user could request that the specially configured device provide them real time billing information for their consumption of virtual resources and mobile broadband resources . Or the mobile operator use the specifically configured device to prepare a monthly bill for example to send to the user for their consumption of virtual resources and mobile broadband resources .

Referring to there is shown a flow chart of a method implemented in the system for billing the user for their consumption of mobile broadband services and virtualized cloud resources in accordance with an embodiment of the present invention. At step the mobile broadband charging system is operated to 1 monitor the mobile broadband usage of the user step 1a 2 rate the monitored mobile broadband usage of the user step 1b and 3 store charges of the rated mobile broadband usage of the user in the charging database step 1c . At step the cloud operating system is operated to 1 monitor virtual resource usage of the user step 2a 2 meter data associated with the monitored virtual resource usage of the user step 2b and 3 store the metered data associated with the monitored virtual resource usage of the user in the storage device s e.g. metering devices step 2c . At step the specially configured device is operated to bill the user for their consumption of mobile broadband services and virtualized cloud resources . To accomplish step the specially configured device s data center charging adaptation module is operated to 1 periodically query the cloud operating system for the stored metered data associated with the monitored virtual resource usage of the user step 3a 2 receive the metered data step 3b 3 convert the metered data into a format supported by the mobile broadband charging system step 3c 4 call the usage reporting interface to forward the converted metered data to the mobile broadband charging system step 3d note the mobile broadband charging system is configured to rate in various ways the converted metered data and store charges of the rated converted metered data in the charging database and 5 monitor the account of the user disable access by the user to the virtualized cloud resources and passivize any active virtual resource instance if the account is out of funds and then re enable access by the user to the virtualized cloud resources and reactive any passivised virtual resource instances if the account is replenished with funds this monitor operation is optional step 3e . Further the specially configured device s query interface is operated to I receive the billing request associated with the user from the GUI or the user directly step 4a 2 obtain billing information associated with the stored charges of the rated mobile broadband usage of the user and the stored charges associated with the rated converted metered data of the virtual resource usage of the user from the mobile broadband charging system step 4b and 3 output the obtained billing information associated with the user to the GUI or the user step 4c .

Referring to there is shown a flow chart of a method implemented in the specially configured device for billing the user for their consumption of mobile broadband services and virtualized cloud resources in accordance with an embodiment of the present invention. At step the specially configured device s data center charging adaptation module is operated to 1 periodically query the cloud operating system for the stored metered data associated with the monitored virtual resource usage of the user step 3a 2 receive the metered data step 3b 3 convert the metered data into a format supported by the mobile broadband charging system step 3c 4 call the usage reporting interface to forward the converted metered data to the mobile broadband charging system step 3d note the mobile broadband charging system is configured to rate in various ways the converted metered data and store charges of the rated converted metered data in the charging database and 5 monitor the account of the user disable access by the user to the virtualized cloud resources and passivize any active virtual resource instance if the account is out of funds and then re enable access by the user to the virtualized cloud resources and reactive any passivised virtual resource instances if the account is replenished with funds this monitor operation is optional step 3e . At step the specially configured device s query interface is operated to 1 receive the billing request associated with the user from the GUI or the user directly step 4a 2 obtain billing information associated with the stored charges of the rated mobile broadband usage of the user and the stored charges associated with the rated converted metered data of the virtual resource usage of the user from the mobile broadband charging system step 4b and 3 output the obtained billing information associated with the user to the GUI operated by the mobile operator or the user step 4c .

Referring to there is a block diagram of an exemplary system which has a commercially available OpenStack cloud operating system where it s virtual resource metering system and are connected to a commercially available mobile charging system by the aforementioned specially configured device in order to bill the user for their consumption of mobile broadband services and virtualized cloud resources in accordance with an embodiment of the present invention. The OpenStack cloud operating system see https www.openstack.org manages a large collection of servers and and storage devices and disk clusters and flash storage devices . The servers and and storage devices and are connected together by a network . In addition the OpenStack cloud operating system has a data center identity management module configured to handle the authentication and authorization of the user a data center virtualized compute module configured to manage virtualized computer resources an object storage module configured to manage virtualized storage resources W and a data center network virtualization module configured to manage virtualized network resources . The data center identity management module OpenStack s Keystone is coupled to the data center virtualized compute module OpenStack s Nova the object storage module OpenStack s Swift and the data center network virtualization module OpenStack s Neutron . The data center virtualized compute module the object storage module and the data center network virtualization module are all coupled to the networked servers and and storage devices and virtualized resources and . Further the OpenStack cloud operating system has a data center management GUI commonly called a dashboard in OpenStack this is Horizon that is used to query the specially configured device to obtain real time billing information for the user .

The OpenStack cloud operating system also has a cloud resources metering system known as Ceilometer which comprises a first virtualized resource usage metering module a second virtualized resource usage metering module and a third virtualized resource usage metering module . The first virtualized resource usage metering module is configured to interact with the networked servers and and storage devices and and collect the virtual resource usage data comprising virtualized Infrastructure as a Service IaaS resources which are consumed by the user steps 2a 2b and 2c . Some exemplary IaaS resources e.g. virtual CPU that can be provided and monitored are illustrated in column 5 of TABLE 1 which is as follows 

The second virtualized resource usage metering module is configured to interact with the networked servers and and storage devices and and collect virtual resource usage data comprising virtualized Platform as a Service PaaS resources consumed by the user steps 2a 2b and 2c . Some exemplary PaaS resources are as follows 1 database storage and access 2 hadoop big data analysis 3 service catalog listing and 4 service health monitoring.

The third virtualized resource usage metering module is configured to interact with the networked servers and and storage devices and and collect virtual resource usage data comprising virtualized Software as a Service SaaS resources consumed by the user steps 2a 2b and 2c . Some exemplary SaaS resources are as follows 1 unified communication enterprise VOIP and other communication applications like virtual Enhanced Packet Core mobile core for LTE 2 TV over the Internet e.g. Netflix and 3 products such as salesforce.com like B2B marketing automation HR management and business data analysis. The virtualized resource usage metering modules can also function as the aforementioned storage device s . It should be appreciated that the OpenStack cloud operating system which performs the aforementioned steps 2a 2b and 2c has other components and functionalities but for clarity those other components and functionalities have not been described herein.

The virtualized resource usage metering modules are shown connected to the mobile broadband charging system via the specially configured device s data center charging adaptation module and the usage reporting interface e.g. usage reporting REST API . In operation the data center charging adaptation module periodically queries step 3a the virtualized resource usage metering modules for virtual resource usage metering data of the user receives the metered data step 3b and converts the received metered data into format that can be handled by the mobile broadband charging system step 3c . The data center charging adaptation module calls the usage reporting REST API to forward the converted metered data to the mobile broadband charging system step 3d note the data center charging adaptation module can also perform the aforementioned step 3e . The mobile broadband charging system rates the received metered data and records the charges in the charging database for later billing step 1d . In addition the mobile broadband charging system would perform the aforementioned steps 1a 1b and 1c. The user or mobile operator can obtain real time charging information through the GUI . In operation the GUI sends the billing request to the query REST API to obtain billing information for the user indicating the mobile broadband service charges and or the virtual resource charges see aforementioned steps 4a 4b and 4c .

The following is a detailed discussion about an exemplary usage reporting REST API an exemplary query REST API an exemplary billing request and an exemplary billing information .

The mobile broadband charging system would typically use the Diameter protocol see RFC 3588 for registering charges and querying for real time reporting on charges incurred by the user . The cloud operating system would typically operate on HTTP REST APIs and not protocol interfaces such as Diameter. For this reason the specifically configured device could utilize a REST API to provide an interface between the mobile broadband charging system and the cloud operating system . In the discussion provided herein the REST API comprises two components namely the usage reporting REST API and the query REST API .

The following is an example of the usage reporting REST API the billing request which is formatted as a URL and the replied billing information which is either an HTML page a JSON object or text.

The billing request can be in the form of an event request such as SCAPv2 in which case the billing request can have request parameters as shown in TABLE 2 while the returned billing information can have response parameters as shown in TABLE 3.

In this example it should be noted that one type of rated units must be selected and sent since it is not supported to rate more than one type of unit in the same message.

An exemplary billing request for rating a SMS is as follows REST CALL http 192.168.56.3 trafficsim diameterd.php trafficcase CIPIP REQUEST EVENT ret format json A Number 46733495040 B Number 46733495041 Requested Action 0 CC Service Specific Units 1 Service Identifier 4

An exemplary replied billing information is as follows JSON Return Session Id diameterd 1389706917 446049 5 CC Service Specific Units 1 Cost 1 Result Code 2001

The following is a discussion about the parameters in the exemplary billing request and the exemplary replied billing information 

This parameter contains the subscriber identity of the subscriber user related to the operation. The A Number should generally be presented in the international format starting with a country code.

This parameter contains the ID of the service that will be rated. The same service must also be configured in the mobile broadband charging system .

The Diameter Result Code that indicates if the operation was successful. Below is a list of some common result codes but it should be appreciated that Diameter supports many more result codes see RFC 3588 .

The Query REST API allows the GUI to display a real time view of the changes. Here is another example query URL and return JSON 

http 10.126.71.201 csadmin request handler.php request UsageCounters 2FGetThresholdsAndCounters subscriberNumber 105000 associatedPartyID 1 action Send returnFormat json

JSON Return VM UPTIME 50 DISK READ 42 DISK WRITE 105 DISK STORAGE 5280 NETWORK RECEIVED 960 NETWORK TRANSMITTED 1024

In view of the foregoing one will readily appreciate that the system the device and the various methods and which have been described herein enable an operator to bill the user for their consumption of mobile broadband resources and virtualized cloud resources . Further one will readily appreciate that the system the device and the various methods and have many advantages some of which are as follows 

1. The device can effectively interface a commercially available mobile broadband charging system and a commercially available cloud operating system in order to bill the user for their consumption of mobile broadband resources and virtualized cloud resources .

2. The system the device and the various methods and have an advantage in that they allow a mobile operator to do consolidated charging of mobile wireless service and cloud virtualized resource usage.

3. The system the device and the various methods and could also allow the mobile operator to host enterprise mobile applications in their data centers and thereby simplify charging fir the enterprise.

4. The system the device and the various methods and also allows the mobile operator to set up different kinds of charging plans tier different services. For instance if a service such as a streaming media service is offered by a third party and hosted by the operator then the operator can charge the third party service provider for virtual infrastructure usage and the third party service provider can do their own billing to charge the user for the streaming media service. Alternatively the operator can also charge the user for the streaming media service and then present the third party service provider a bill for the difference between the service charge and the virtualized resource charge.

Although multiple embodiments of the present invention have been illustrated in the accompanying Drawings and described in the foregoing Detailed Description it should be understood that the invention is not limited to the disclosed embodiments but instead is also capable of numerous rearrangements modifications and substitutions without departing from the present invention that as has been set forth and defined within the following claims.

