---

title: Communication system, communication device, and non-transitory computer-readable storage medium storing instructions for information processing device
abstract: A communication system may comprise an information processing device and a communication device. Communication between the communication device and the information processing device using the first wireless communication scheme may be performed. The communication device may send the connectable network identification information to the information processing device. Communication between the information processing device and the communication device using the second wireless communication scheme and using the second network may be executed, in case that the first network belongs is not included in one or more networks identified by the connectable network identification information. Communication between the information processing device and the communication device using the second wireless communication scheme and using the first network may be executed, in case that the first network is included in the one or more networks identified by the one or more connectable network identification information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09350813&OS=09350813&RS=09350813
owner: Brother Kogyo Kabushiki Kaisha
number: 09350813
owner_city: Nagoya, Aichi
owner_country: JP
publication_date: 20141223
---
This application claims priority to Japanese Patent Application No. 2013 271752 filed on Dec. 27 2013 the contents of which are hereby incorporated by reference into the present application.

The technique disclosed in the present specification relates to a communication system a communication device and an information processing program for performing a communication with a communication device.

A system is disclosed which includes a gate installed in a museum or the like a mobile communication terminal an access point and a content server. The gate includes a reader writer and performs a communication with a contactless IC chip of the mobile communication terminal to send an SSID of the access point and a URL of the content server to the mobile communication terminal. The mobile communication terminal establishes a communication with the access point and accesses the URL of the content server. Thereby the mobile communication terminal can acquire content data from the content server via the access point.

The present specification discloses a technique enabling an information processing device and a communication device to appropriately perform a wireless communication of target data.

One technique disclosed in the present application is a communication system comprising an information processing device and a communication device. The communication device may comprise a first interface configured to perform communication with the information processing device using a first wireless communication scheme. The first interface may be configured to function as an Integrated Circuit tag. The communication device may comprise a second interface configured to perform communication with the information processing device using a second wireless communication scheme. The communication device may comprise a first control device coupled to the first interface and the second interface. The information processing device may comprise a third interface configured to perform communication with the communication device by using the first wireless communication scheme. The information processing device may comprise a fourth interface configured to perform communication with the communication device by using the second wireless communication scheme. The information processing device may comprise a second control device coupled to the third interface and the fourth interface. The first control device may be configured to perform storing in the first interface one or more connectable network identification information from among a plurality of network identification information. The plurality of network identification information may indicate various types of networks. Each connectable network identification information may indicate a network to which the communication device is set to be connectable. The plurality of network identification information may include first network identification information for identifying a first network formed by a relay device. The plurality of network identification information may include second network identification information for identifying a second network for directly performing communication between the information processing device and the communication device. The first and second control device may be configured to perform executing communication between the first interface of the communication device and the third interface of the information processing device using the first wireless communication scheme. The first control device may be configured to perform sending the one or more connectable network identification information as stored in the first interface to the information processing device. The first and second control device may be further configured to perform executing communication between the fourth interface of the information processing device and the second interface of the communication device using the second wireless communication scheme and using the second network identified by the second network identification information that was included in the connectable network identification information that was sent to the information processing device in case that the first network to which the information processing device belongs is not included in one or more networks identified by the one or more connectable network identification information sent to the information processing device. The first and second control device may be configured to perform executing communication between the fourth interface of the information processing device and the second interface of the communication device using the second wireless communication scheme and using the first network to which the information processing device belongs in case that the first network to which the information processing device belongs is included in the one or more networks identified by the one or more connectable network identification information sent to the information processing device.

An NFC communication I F of the information processing device can perform a communication with an NFC communication I F of the MFP via an NFC abbreviation of Near Field Communication scheme wireless communication . In the present embodiment wireless communication is performed according to the NFC scheme based on International Standard ISO IEC 21481 or 18092.

A wireless LAN I F of the information processing device can communicate with a wireless LAN I F of the MFP via infrastructure mode wireless communications and . Further the wireless LAN I F can communicate with the MFP via an infrastructure mode wireless communication . Further the wireless LAN I F can directly perform a communication with the wireless LAN I F of the MFP via a WiFi Direct referred to as WFD below scheme wireless communication . That is the information processing device can construct a WFD network by establishing a connection with the MFP in accordance with the WFD scheme. In WFD wireless communication is performed based on the standard of 802.11 of IEEE abbreviation of The Institute of Electrical and Electronics Engineers Inc. and a standard e.g. 802.11a 11b 11g or 11n equivalent to this standard. Further a bluetooth registered trademark of Bluetooth SOT Inc. Same below. communication I F of the information processing device can perform a communication with a bluetooth communication I F of the MFP via a bluetooth scheme wireless communication .

Each of the first access point and the second access point has an SSID abbreviation of Service Set Identifier . The SSID is a name for identifying each of the first access point and the second access point . By executing a print application the information processing device can send a print request or scan request to the MFPs and by a communication using the wireless LAN I F or a communication using the bluetooth communication I F .

The information processing device is a portable device such as a mobile phone or a portable terminal device. The information processing device comprises a display means a touch panel an input I F the wireless LAN I F the NFC communication I F the bluetooth communication I F a CPU abbreviation of Central Processing Unit a ROM abbreviation of Read Only Memory a RAM abbreviation of Random Access Memory a storage unit etc. which are connected with one another via an input output port .

The display means receives an image signal output from the CPU and displays an image based on the received image signal. An LCD an organic EL panel etc. may be used as the display means . The touch panel is formed of a transparent member and is disposed so as to cover a surface of the display means . The touch panel detects a position touched by the finger or the like of the user and outputs detected position information to the CPU . The input I F is e.g. an operation button.

The NFC communication I F is an interface for performing the NFC scheme wireless communication . Various information for communication settings e.g. IP address SSID etc. are not required in order to establish the NFC scheme wireless communication . The wireless LAN I F is an interface for performing wireless LAN scheme wireless communications . A communicable distance of the wireless LAN scheme wireless communications is greater than a communicable distance of the NFC scheme wireless communication . Further a communication speed of the wireless LAN scheme wireless communications is faster than a communication speed of the NFC scheme wireless communication . The bluetooth communication I F is an interface for performing the bluetooth scheme wireless communication .

The CPU executes programs stored in the storage unit . The RAM temporarily stores information needed for the processes of the CPU . The storage unit is configured such that a flash memory HDD abbreviation of Hard Disk Drive and a buffer or the like provided in the CPU are combined. Image data document data etc. can be stored in the storage unit . Further the storage unit is capable of storing access point connection history information. The access point connection history information is information e.g. an SSID for identifying an access point with which the information processing device has connected in the past.

Further the storage unit stores a program . The program includes the print application a connection module and an operating system referred to as OS below . The CPU executes processes in accordance with the program . Hereafter the CPU executing a program such as the print application the connection module the OS etc. may be described simply by the program name. For example the description the print application may mean the CPU that executes the print application .

The print application is an application for causing the CPU to perform a process of sending a print request or scan request from the information processing device to the MFP the MFP or the like. The print request is information for causing the MFP the MFP or the like to perform a print process. The scan request is information for causing the MFP the MFP or the like to perform a scan process.

The connection module is a program that executes a process to connect the information processing device with various networks via a wireless communication. The connection module may be a program that is called and executed in various applications such as the print application . That is the connection module may function as a lower level application that provides a communication function to a higher level application e.g. the print application that provides a function close to the user.

The OS is a program that provides a basic function of which use is shared by the print application etc. The OS includes a program for causing the wireless LAN I F the NFC communication I F and the bluetooth communication I F to perform a wireless communication. Further the OS is also a program that provides an API abbreviation of Application Programming Interface for each program to acquire information acquired by hardware or for each program to instruct various hardware.

The structure of the MFP will be described. The MFP mainly comprises a CPU a storage unit the wireless LAN I F the NFC communication I F the bluetooth communication I F a button input unit a panel a printer and a scanner . These structural elements are capable of communicating with one another via an input output port .

The CPU executes a program stored in the storage unit . The storage unit is configured such that a RAM ROM flash memory HDD abbreviation of Hard Disk Drive and a buffer or the like provided in a CPU are combined. The storage unit stores the program . The program includes an OS etc.

The wireless LAN I F is an interface for performing infrastructure mode wireless communications and and the WFD scheme wireless communication . The bluetooth communication I F is an interface for performing the bluetooth scheme wireless communication .

The NFC communication I F is an interface for performing a wireless communication in accordance with the NFC abbreviation of Near Field Communication scheme for so called short distance wireless communication. The NFC scheme for example is a wireless communication scheme based on International Standard ISO IEC 21481 or 18092. An I F called an NFC forum device and an I F called an NFC forum tag are known as types of I F for performing an NFC communication. The NFC communication I F is an NFC forum tag and functions as an IC abbreviation of Integrated Circuit tag of the NFC standard i.e. ISO IEC 21481 or 18092 .

The NFC communication I F comprises a storage unit . The storage unit is a memory for storing sending information supplied from the CPU for a long period in order to send this sending information to an external device e.g. the information processing device . The storage unit may be a non volatile memory. The NFC communication I F can use an RF communication mode and a serial communication mode. In the RF communication mode the sending information can be sent to an external device. In the serial communication mode the sending information can be sent from the CPU to the storage unit .

An example of the contents of the sending information stored in the storage unit will be shown. The sending information includes sending information identification information communication execution information device type identification information device status information connectable network identification information etc. The sending information identification information is information indicating that the sending information is information used in the print application . The sending information identification information may be a predetermined character string. The communication execution information is information indicating that the sending information is information for performing the setting of the wireless communication. The communication execution information may be a predetermined character string. The device type identification information is information for identifying the device type of the MFP . The device type identification information may be a model name of the MFP . The device status information is information indicating device status of the MFP . Examples of the information included in the device status information are the contents of an error that occurred in the MFP remaining amount of ink in the printer etc.

The connectable network identification information is information indicating whether there is a network configured to be connectable with the MFP . Further in case there is a network that is configured to be connectable with the MFP the connectable network identification information functions as information for identifying the network that is configured to be connectable. The network that is configured to be connectable with the MFP is e.g. a network for which a connection setting of the MFP is set to connectable . The connection setting may be stored in the storage unit . The connection setting may be set to each of the infrastructure mode WFD scheme or the bluetooth scheme. The connection setting may be performed by the user or may be performed automatically by the CPU . For example in case the only network that is connectable with the MFP is a network formed by a wireless communication with the infrastructure mode the infrastructure mode connection setting may be set to connectable and the WFD scheme and bluetooth scheme connection settings may be set to not connectable . The state of the connection setting being set to connectable may be a state where a wireless communication function in the infrastructure mode using the wireless LAN I F has been enabled a state where a wireless communication function in the WFD scheme using the wireless LAN I F has been enabled or a state where a wireless communication function using the bluetooth communication I F has been enabled.

The connectable network identification information may include at least any one of first to fifth network identification information shown below. Further communication destination identification information needed to perform communication with the MFP may be included in each of the first to fourth network identification information.

The first network identification information is information identifying a network formed by the infrastructure mode wireless communication . Communication destination identification information e.g. the SSID of the first access point for connecting with the MFP using the infrastructure mode wireless communication is included in the first network identification information. Further communication destination identification information for identifying the MFP e.g. node name of the MFP is included in the first network identification information.

The second network identification information is information identifying a network formed by the WFD scheme wireless communication . Communication destination identification information for connecting with the MFP by the WFD scheme wireless communication is included in the second network identification information. Examples of this type of communication destination identification information are an SSID of the WFD network encryption method password etc. The encryption method and password is information for performing device authentication data encryption etc. in the WFD network.

The third network identification information is information identifying a network formed by the bluetooth scheme wireless communication . Communication destination identification information for connecting with the MFP by the bluetooth scheme wireless communication is included in the third network identification information. An example of this type of communication destination identification information is a MAC address.

The fourth network identification information is information identifying a network formed by the wireless LAN scheme wireless communication . Communication destination identification information for connecting with the second access point e.g. the SSID of the second access point and communication destination identification information for accessing the MFP e.g. the node name of the MFP are included in the fourth network identification information.

The fifth network identification information is information indicating that a network set so as to be connectable with the MFP does not exist. The fifth network identification information may be a predetermined character string.

The button input unit is a key to perform the functions of the MFP . The button input unit may be configured integrally with the panel as a touch panel. The panel displays various function information of the MFP . The printer is a member that executes a print process using image data stored in the storage unit . The scanner is a member that executes a scan process of reading a document to generate scan data. Moreover the MFP also has a structure similar to the MFP . However in order to simplify the figures the MFP is omitted in .

Next processes performed by the MFP of the present embodiment will be described with reference to to . In the description of the present embodiment a case is described in which from among the infrastructure mode wireless communications and a setting to use the infrastructure mode wireless communication is performed on the MFP .

In S the CPU executes an initialization process of the MFP . In the initialization process for example a wireless communication may be established in accordance with the connection setting stored in the storage unit . In S the CPU executes a rewriting process of the sending information stored in the storage unit in the NFC communication I F .

The contents of the rewriting process of the sending information will be described using . In S the CPU makes an inquiry about state to the wireless LAN I F and the bluetooth communication I F . In S the CPU determines whether response information has been received from the wireless LAN I F and the bluetooth communication I F . If a negative determination is made S NO the process returns to S and if a positive determination is made S YES the process proceeds to S.

In S the CPU determines whether the MFP is set so as to enable the wireless LAN I F . For example in case response information indicating an enabled state is received from the wireless LAN I F and the connection setting of a network formed by at least one of the wireless communication or is set to connectable it may be determined that a setting to enable the wireless LAN I F is being performed. If a positive determination is made S YES the process proceeds to S.

In S the CPU determines the type of wireless communication for which the enabling settings are being performed. Specifically the CPU determines whether settings enabling both the WFD scheme wireless communication and the infrastructure mode wireless communication are being performed or whether a setting enabling only the infrastructure mode wireless communication is being performed. If settings enabling wireless communication of both schemes are being performed S WFD and infrastructure the process proceeds to S.

In S the CPU newly generates sending information. Specifically the CPU includes the first network identification information i.e. information identifying the infrastructure mode wireless communication and the second network identification information i.e. information identifying the WFD scheme wireless communication in the connectable network identification information. The connectable network identification information is information included in the sending information that is generated. Since the contents of the first and the second network identification information have already been described a description thereof is omitted here. Then the CPU overwrites the generated sending information in the storage unit using the serial communication mode. Then the rewriting process of the sending information is ended.

On the other hand if settings enabling only the infrastructure mode wireless communication are being performed S infrastructure the process proceeds to S. In S the CPU newly generates sending information. Specifically the CPU includes the first network identification information i.e. the information for identifying the infrastructure mode wireless communication in the connectable network identification information. The connectable network identification information is information included in the sending information that is generated. Then the CPU overwrites the generated sending information in the storage unit using the serial communication mode. Then the rewriting process of the sending information is ended.

On the other hand if a negative determination is made in S S NO the process proceeds to S. In S the CPU determines whether a setting enabling the bluetooth communication I F is being performed. For example if response information indicating the enabled state is received from the bluetooth communication l F and the connection setting of the wireless communication has been set to connectable it may be determined that a setting enabling the bluetooth communication I F is being performed. If a positive determination is made S YES the process proceeds to S. In S the CPU newly generates sending information. Specifically the CPU includes the third network identification information i.e. information identifying the bluetooth scheme wireless communication in the connectable network identification information. The connectable network identification information is information included in the sending information that is generated. Then the CPU overwrites the generated sending information in the storage unit using the serial communication mode. Then the rewriting process of the sending information is ended.

On the other hand if a negative determination is made in S S NO the process proceeds to S. In S the CPU newly generates sending information. Specifically the CPU includes the fifth network identification information i.e. information identifying that a network configured to be connectable with the MFP does not exist in the connectable network identification information. The connectable network identification information is information included in the sending information that is generated. Then the CPU overwrites the generated sending information in the storage unit using the serial communication mode. Then the rewriting process of the sending information is ended.

In S of the NFC communication I F determines whether an RF communication mode command has been received. The RF communication mode command is information for instructing the start of the NFC scheme wireless communication . Reception of the RF communication mode command is initiated by an NFC communication I F provided in a device that is the communication destination approaching a predetermined distance around the NFC communication I F provided in the MFP . The predetermined distance may be for example approximately 10 cm. If a negative determination is made S NO the process proceeds to S.

In S the CPU determines whether the error of the MFP detected in S or S to be described has been resolved. If the error has been resolved S YES the CPU executes a rewriting process S to rewrite into new sending information the sending information that included the device status information including the error contents and that stored in the storage unit in the NFC communication I F . Since the contents of the rewriting process have already been described using a description thereof is omitted here. Upon ending the process of S the CPU moves to the process of S. Further if it is determined in S that the error has not been resolved S NO the CPU moves to the process of S.

On the other hand if a positive determination is made in S S YES the process proceeds to S. In S the NFC communication I F sends the sending information stored in the storage unit to the communication destination device via the NFC scheme wireless communication using the RF communication mode.

In S the CPU determines whether the input of an instruction to turn off the power supply has been received. The input of this instruction may be received by pressing a power supply button not shown provided on the button input unit . If a positive determination is made S YES the process proceeds to S. In S the CPU newly generates sending information. Specifically the CPU includes the fifth network identification information i.e. information identifying that a network set to be connectable with the MFP does not exist in the connectable network identification information. The connectable network identification information is information included in the sending information that is generated. Then the CPU overwrites the generated sending information in the storage unit using the serial communication mode. In S the CPU executes a process to turn off the power supply of the MFP . Then the flow is ended.

On the other hand if a negative determination is made in S S NO the process proceeds to S. In S the CPU determines whether the error state detected in S or S to be described is continuing. If a positive determination is made S YES the process returns to S and if a negative determination is made S NO the process moves to S. Thereby the state of the sending information including the error information being stored in the storage unit can be maintained while the error state of the MFP is continuing.

In S the CPU determines whether the network that is configured to be connectable with the MFP has been changed. The determination may be performed by e.g. monitoring whether the contents of the connection setting stored in the storage unit have been changed. If a negative determination is made S NO the process proceeds to S and if a positive determination is made S YES the process proceeds to S.

In S the CPU executes a rewriting process to rewrite the old sending information stored in the storage unit of the NFC communication UF to new sending information corresponding to the changed connection setting. Since the contents of the rewriting process have already been described using a description thereof is omitted here.

A case will be described as a specific operation example in which a change is made in S from a first connection setting which is connectable with the infrastructure mode and WFD scheme wireless communications to a second connection setting which is connectable with only the infrastructure mode wireless communication. In the first connection setting the connection settings of infrastructure mode WFD scheme and bluetooth scheme are connectable connectable and not connectable respectively. Consequently the first and the second network identification information are included in the connectable network identification information in the sending information before rewriting in S. On the other hand in the second connection setting the connection settings of infrastructure mode WFD scheme and bluetooth scheme are connectable not connectable and not connectable respectively. Consequently only the first network identification information is included in the connectable network identification information in the sending information after rewriting in S.

In S the CPU determines whether to execute the sending process for sending the rewritten sending information to the communication destination device. For example if the rewriting of the sending information has been performed within a predetermined time from the sending information being most recently sent to the communication destination device S it may be determined that the connection setting has been changed in response to a verification by the user of the contents of the sent sending information and the sending process may be executed. If a negative determination is made S NO the process proceeds to S and if a positive determination is made S YES the process proceeds to S.

In S the CPU executes the sending process to send the sending information stored in the storage unit to the communication destination device via the NFC scheme wireless communication using the RF communication mode. The sending process may be executed without receiving the RF communication mode command described above. That is the sending process may be executed without performing the operation of bringing the communication destination device close to the NFC communication I F . The sending process may be executed by e.g. restarting the NFC communication I F .

In S the CPU determines whether processing instruction information has been received from the information processing device . The processing instruction information is information for instructing the MFP to execute a process using any one type of function among the various functions such as print process scan process etc. If the contents of the processing instruction information are contents to cause the MFP to execute a process using the print function print data may be included in the processing instruction information. If a negative determination is made S NO the process returns to S and if a positive determination is made S YES the process proceeds to S.

In S the CPU determines whether an error has occurred in the function of which processing was instructed in the processing instruction information. For example if the contents of the processing instruction information are contents to cause the MFP to execute a process using the print function the CPU determines whether an error has occurred in the printer .

If a negative determination is made in S S NO the process proceeds to S. In S the CPU starts executing the various processes based on the received processing instruction information. For example if the processing instruction information instructs the print process the CPU causes the printer to execute a print process using the print data. Further e.g. if the processing instruction information instructs the scan process the CPU causes the scanner to execute a scan process. In S the CPU determines whether an error has occurred in the process that is being executed. If a negative determination is made in S S NO the CPU determines in S whether that process has been completed. If a negative determination is made in S S NO the process returns to S and if a positive determination is made in S S YES the process returns to S.

On the other hand if a positive determination is made in S S YES or if a positive determination is made in S S YES the process proceeds to S. In S the CPU sends error notification information indicating that an error has occurred to the information processing device . The error notification information may be sent to the information processing device using the wireless communication path that received the processing instruction information in S. In response to receiving the error notification information the information processing device may cause the display means to display a character string indicating the error contents that occurred.

In S the CPU determines whether to overwrite the sending information including the error information in the storage unit . Specifically if an error has occurred in all the functions of which processing can be caused by the print application e.g. print function and scan function the CPU determines to overwrite the sending information including the error information. An example of a case of such an error occurring is failure or the like of the power supply or drive circuit of the MFP . Further if an error has occurred in only a part of the functions of which processing can be caused by the print application e.g. either one of the print function or scan function the CPU determines not to overwrite the sending information including the error information. Moreover this case can also be said to be a case of a type of error occurring where the fact of being unable to execute the function cannot be transmitted to the information processing device until wanting to execute a print function using the printer or wanting to execute a scan function using the scanner is confirmed to the MFP by the information processing device .

The determination in S may be executed in response to the severity of the error. For example it may be determined to overwrite the sending information including the error information in the storage unit in case of a serious error and it may be determined to not overwrite the sending information including the error information in case of a minor error. A serious error is an error causing a state such that a process cannot physically be executed. Examples of a serious error are failure of a print head configuring the printer failure of a document sheet transport unit configuring the scanner etc. Examples of a minor error are recording paper out ink out etc. Determination of the severity of the error may be made based on error classification information stored in the storage unit . The error classification information may e.g. be information in which each type of error that can occur in the MFP is classified into serious error or minor error.

If a negative determination is made in S S NO the process returns to S and if a positive determination is made S YES the process proceeds to S. In S the CPU newly generates sending information. Specifically the CPU includes in the device status information the contents of the error occurring in the MFP . The device status information is information included in the sending information that is generated. Then the CPU overwrites the generated sending information in the storage unit using the serial communication mode and the process returns to S.

Processes performed by the CPU of the information processing device of the present embodiment will be described with reference to to . As an example operation will be described in the case where the information processing device is brought close to the MFP . In S the CPU determines whether sending information has been received from the MFP via the NFC scheme wireless communication . If a negative determination is made S NO the process returns to S and if a positive determination is made S YES the process proceeds to S.

In S the CPU determines whether the MFP is in the error state. The determination may be performed according to whether the error contents occurring in the MFP are included in the device status information included in the received sending information. If a positive determination is made S YES the process proceeds to S. In S the print application causes the display means to display an error image. Then the process returns to S. An example of an error image of such a case is the character string An error has occurred in the MFP. Please touch information processing device again to MFP after MFP error has been resolved. If an error is occurring in all the functions of the MFP of which processing can be caused by the print application e.g. print function and scan function or if a serious error is occurring in the MFP the information processing device cannot use the functions of the MFP even when having communicated with the MFP . In this case the process to switch wireless communication to communicate with the MFP is useless. Therefore in the present embodiment switching of the wireless communication is not performed when the MFP is in a serious error state such as being unable to execute a function.

If a negative determination is made in S S NO the process proceeds to S. In S the CPU starts the print application . The starting of the print application may be performed by the OS . The starting of the print application may be performed by the OS based on the sending information identification information included in the received sending information. As described above the sending information identification information is information indicating that the sending information is information used in the print application . Further in case there is a plurality of applications being the start target the display means may be caused to display images representing each of the plurality of applications and selection of any one application may be received.

In S the print application determines whether the connection of wireless communication was instructed by the sending information received in S. The determination may be performed according to whether the communication execution information is included in the received sending information. If a negative determination is made S NO the process proceeds to S. In S the print application determines whether the sending information received in S is information indicating that a network configured to be connectable with the MFP exists. If the fifth network identification information is not included in the sending information it is determined that the sending information is information indicating that a network configured to be connectable with the MFP exists S YES . Therefore the print application is ended. On the other hand if the fifth network identification information is included in the sending information it is determined that the sending information is information indicating that a network configured to be connectable with the MFP does not exist S NO . Therefore the process proceeds to S.

In S the print application causes the display means to display an error image. An example of the error image is the character string Please turn on power supply of MFP or turn on wireless setting while touching information processing device to MFP . Then the process returns to S.

On the other hand if a positive determination is made in S S YES the process proceeds to S. In S the print application starts the connection module . The operation contents of the connection module will be described later. In S the print application notifies the connection module of compatible model information and compatible wireless communication information of the print application . The compatible model information is information indicating the type of device that can be controlled by the print application . The compatible wireless communication information is information indicating the type of wireless communication that can be used by the print application e.g. wireless communication of the WFD scheme wireless communication of the bluetooth scheme etc. . If the OS is an Android registered trademark of Google Inc. OS communication between the print application and the connection module may be executed using an intent.

In S the print application determines whether reply information has been received from the connection module . If a negative determination is made S NO the process returns to S and if a positive determination is made S YES the process proceeds to S.

In S the print application determines whether communication with the MFP is possible using any wireless communication scheme. The determination may be performed based on the contents of the reply information received from the connection module . For example if the communication execution information S has been received as the reply information it may be determined that infrastructure mode wireless communication is enabled. Further e.g. if communication destination identification information relating to WFD scheme wireless communication S has been received as the reply information it may be determined that WFD scheme wireless communication is enabled. Further e.g. if bluetooth setting information S has been received as the reply information it may be determined that bluetooth scheme wireless communication is enabled. Further e.g. if communication unavailable information S has been received as the reply information it may be determined that wireless communication of any scheme is not enabled. If a negative determination is made S NO the process proceeds to S and if a positive determination is made S YES the process proceeds to S.

In S the print application creates the processing instruction information. Since the contents of the processing instruction information have already been described in S a description thereof is omitted here.

In S the print application sends the processing instruction information to the MFP via a wireless communication formed by the connection module . Then the print application ends.

The operation of the connection module started in S will be described using and . In S the connection module determines whether the compatible model information and the compatible wireless communication information have been received from the print application . If a negative determination is made S NO the process returns to S and if a positive determination is made S YES the process proceeds to S.

In S the connection module determines whether the MFP is a device that can be controlled by the print application . The determination may be performed according to whether the device type of the MFP indicated by the device type identification information included in the sending information received in S is included in the type of devices that can be controlled by the print application indicated by the compatible model information. If a negative determination is made S NO the process proceeds to S. In S the connection module sends the communication unavailable information indicating that no wireless communication is enabled to the print application . Then the connection module ends.

On the other hand if a positive determination is made in S S YES the process proceeds to S. In S the connection module determines whether the MFP is in a state allowing wireless communication to be performed. The determination may be performed according to whether the fifth network identification information i.e. information indicating that a network configured to be connectable with the MFP does not exist is included in the sending information received in S. If a positive determination is made S YES the process proceeds to S and if a negative determination is made S NO the process proceeds to S.

In S the connection module determines whether the MFP is set so as enable the infrastructure mode wireless communication . The determination may be performed according to whether the first network identification information i.e. information identifying the infrastructure mode wireless communication is included in the sending information received in S. If a positive determination is made S YES the process proceeds to S.

In S the connection module acquires from the OS the SSID of the access point with which the information processing device is currently connected. In S the connection module determines whether the access point with which the MFP is currently connected and the access point with which the information processing device is currently connected are the same. The determination may be performed according to whether the SSID of the access point set as the connection destination of the MFP and the SSID of the network with which the information processing device is currently connected are the same. The SSID of the access point set as the connection destination of the MFP may be acquired from the communication destination identification information included in the first network identification information in the sending information received in S. If a positive determination is made S YES the process proceeds to S and if a negative determination is made S NO the process proceeds to S.

In S the connection module determines whether an access point for switching that can perform connection switching exists. For example the presence of an access point for switching this being an access point registered in the access point connection history information stored in the storage unit may be determined by searching for an access point present in the communication range of the wireless LAN I F . If a plurality of access points is detected the access point with which a connection was most recently made may be selected as the access point for switching. If a negative determination is made S NO the process proceeds to S and if a positive determination is made S YES the process proceeds to S. Moreover the access point corresponding to the SSID represented by the communication destination identification information included in the connectable network identification information included in the sending information received in S may be found from the access point connection history information as the access point for switching.

In S the connection module switches the connection destination of the wireless LAN I F to the access point for switching.

In S the connection module acquires the IP address of the MFP . For example the node name of the MFP included in the first network identification information may be broadcast and the IP address of the MFP may be received.

In S the connection module establishes the infrastructure mode wireless communications and with the MFP . In S the connection module sends the communication execution information to the print application . The communication execution information is information used for executing the infrastructure mode wireless communications and with the MFP . The communication execution information may include e.g. the SSID of the first access point the model name of the MFP the IP address of the MFP etc. Then the connection module ends.

On the other hand if a negative determination is made in S or S S NO or S NO the process proceeds to S. In S the connection module determines whether the MFP is set so as to enable the WFD scheme wireless communication . The determination may be performed according to whether the second network identification information i.e. information identifying the WFD scheme wireless communication is included in the sending information received in S. If a positive determination is made S YES the process proceeds to S.

In S the connection module switches the communication scheme to be used to the WFD scheme wireless communication . In S the connection module reads the communication destination identification information for using the WFD scheme wireless communication from the second network identification information included in the sending information received in S.

In S the connection module establishes the WFD scheme wireless communication with the MFP . In S the connection module sends communication destination identification information relating to the WFD scheme wireless communication to the print application . Then the connection module ends.

On the other hand if a negative determination is made in S S NO the process proceeds to S. In S the connection module determines whether the MFP is set so as to enable the bluetooth scheme wireless communication . The determination may be performed according to whether the third network identification information i.e. information identifying the bluetooth scheme wireless communication is included in the sending information received in S. If a negative determination is made S NO the process proceeds to S and if a positive determination is made S YES the process proceeds to S.

In S the connection module switches the communication scheme to be used to the bluetooth scheme wireless communication . In S the connection module establishes the bluetooth scheme wireless communication with the MFP . In S the connection module sends bluetooth setting information to the print application . The MAC address is included in the bluetooth setting information. Then the connection module ends.

If the access point to which the information processing device is currently connected and the access point to which the MFP is currently connected are the same S YES infrastructure mode wireless communication can be performed via that same access point S . Thereby since the network switching process e.g. S S does not occur the time required for communication can be shortened. Further if the access point to which the information processing device is currently connected and the access point to which the MFP is currently connected are not the same S NO it is possible to switch to another communication scheme set so as to be connectable with the MFP S S and execute a communication. Thereby communication between the information processing device and the MFP can be performed appropriately.

In response to the setting contents defining the network that is connectable with the MFP being changed S YES the contents of the connectable network identification information included in the sending information stored in the storage unit of the NFC communication I F can be rewritten to the changed setting contents S . That is the setting contents defining the network that is connectable with the MFP which are stored in the storage unit can be updated in real time. Thereby even if the setting defining the network that is connectable with the MFP changes communication between the information processing device and the MFP can be performed appropriately.

In response to the change of the contents of the connectable network identification information included in the sending information stored in the storage unit of the NFC communication I F S YES the sending information including the changed connectable network identification information can be sent to the information processing device from the MFP S . Thereby since the most recent connectable network identification information can always be maintained in the information processing device communication between the information processing device and the MFP can be performed appropriately.

The sending information including the communication destination identification information needed to perform communication with the MFP can be sent to the information processing device from the MFP S S . Thereby it is possible to appropriately cause the information processing device to execute a process for starting to perform a communication with the MFP by using the communication destination identification information S S S . Specifically it is possible to cause the information processing device to establish the infrastructure mode wireless communications and with the MFP S by using the SSID of the first access point and the IP address of the MFP . Further it is possible to cause the information processing device to establish the WFD scheme wireless communication with the MFP S by using the SSID encryption method password etc. of the WFD network.

The information processing device comprises the NFC communication I F and the MFP comprises the NFC communication I F . Thereby it is possible to cause the information processing device to acquire the sending information including the connectable network identification information by an intuitive and simple operation such as bringing the information processing device close to the MFP S S .

If a network that is configured to be connectable with the MFP does not exist the fifth network identification information indicating that a network configured to be connectable with the MFP does not exist can be overwritten in the storage unit S or S . Thereby the fact that it is not possible to connect with the MFP via a wireless communication can be notified to the information processing device S and be displayed on the display means of the information processing device S . Therefore convenience to the user can be increased. Examples of a network that is configured to be connectable with the MFP not existing are the case where none of the wireless communications of the MFP is enabled S NO or the case where the power supply of the MFP is off S YES . Further since the NFC communication I F functions as an IC tag the sending information can be sent to the information processing device in response to the information processing device coming close even after the power supply of the MFP has been turned off. Consequently when the power supply of the MFP is off S YES it is possible to notify the information processing device that it is not possible to connect with the MFP via a wireless communication due to the power supply of the MFP being in an off state by overwriting the sending information including the fifth network identification information in the storage unit S even after the power supply of the MFP has been turned off.

If an error has occurred in all the functions which the print application can be made to process S YES processing for the information processing device to start a communication with the MFP becomes unnecessary because the MFP cannot be made to execute a process using any function. Therefore in this case sending information that includes the contents of the error occurring in the MFP can be overwritten in the storage unit S . Thereby since it is possible to recognize that the MFP is in the error state S YES the information processing device can prevent the execution of the unnecessary process of starting a communication with the MFP .

If an error has occurred in only a part of the functions of which processing can be caused by the print application S NO the processing instruction information is received from the information processing device S YES and it is necessary to confirm whether an error is occurring in the function of which process execution was instructed by the processing instruction information. Therefore in this case sending information that includes the contents of the error occurring in the MFP need not be overwritten in the storage unit S NO . Thereby since the communication with the MFP can be started S NO the information processing device can send the processing instruction information to the MFP . Then if it is determined that an error is occurring in the function of which process execution was instructed by the processing instruction information S YES the error notification information can be sent to the information processing device S . Thereby it is possible to notify the user that due to an error the function of which process execution was instructed by the user cannot be used.

The connection module can be started by being called by the print application which is a higher level application S . Then the connection module can execute a wireless communication connection process S to S and return information identifying the connection result to the print application S S S S . Thereby since the connection module can be shared by a plurality of higher level applications the functions of the higher level applications can be simplified.

If the type of the MFP is a type not compatible with the print application S NO it is possible to cause the display means of the information processing device to display an image indicating that a wireless connection cannot be made with the MFP S NO S . Thereby convenience to the user can be increased.

When the access point to which the MFP is currently connected and the access point to which the information processing device is currently connected are not the same S NO the connection module can switch to the access point for switching allowing wireless communication to be performed S . For example if the MFP is currently connected to the second access point and the information processing device is currently connected to the first access point the connection module can switch the connection destination of the wireless LAN I F to the second access point S . Thereby the information processing device and the MFP can communicate via wireless communications and . Therefore redundancy can be supplied to the network .

While specific embodiments of the present invention have been described in detail above such description is for illustrative purposes only and is not intended to limit the scope and claims of the invention. Techniques described in the claims of the invention include various modifications and changes made to the specific examples illustrated above. Modifications will be described below.

In the present embodiment a case was described in which the WFD scheme wireless communication was used in preference to the bluetooth scheme wireless communication but the case is not limited to this configuration. The bluetooth scheme wireless communication may be used in preference to the WFD scheme wireless communication. In this case if a negative determination is made in S or S S NO or S NO the process may proceed to S. Then if a negative determination is made in S S NO the process may proceed to S.

In the present embodiment the description was given using the MFP as an example of the communication device that communicates with the information processing device . However the case is not limited to this configuration. The communication device may be a label printer scanner copier portable terminal PC server etc.

The timing at which the connection module acquires from the OS the SSID of the network with which the information processing device is currently connected is not limited to the timing of S. For example the SSID of the network may be acquired at the timing when the connection module is started.

In S the information included in the connectable network identification information is not limited to the fifth network identification information. Information indicating that the power supply of the MFP is off may be included.

The determination process executed in S is not limited to being executed by the print application but may be executed by the connection module . In this case in S the connection module may additionally execute the determination process executed in S.

In S it may be determined whether only a setting enabling the WFD scheme wireless communication is being performed. Then if only a setting enabling the WFD scheme wireless communication is being performed sending information including the second network identification information may be overwritten in the storage unit .

The setting for using the infrastructure mode wireless communication may be performed by the MFP . In this case in S and S the fourth network identification information i.e. information identifying the infrastructure mode wireless communication may be included instead of the first network identification information in the connectable network identification information.

Communication between the first access point and the MFP and communication between the second access point and the MFP may be performed either wirelessly or wired.

The information processing device may have a configuration connectable with an external memory such as a memory card. Then the configuration may be such that various data is stored in the external memory instead of the storage unit .

In the embodiment described above the CPU of the information processing device realizes the processes of to by executing the program i.e. software within the storage unit . Instead at least one of the processes of to may be realized by hardware such as a logic circuit.

Furthermore it is to be understood that the technical elements described in the present specification and the drawings exhibit technical usefulness solely or in various combinations thereof and shall not be limited to the combinations described in the claims at the time of filing. The techniques illustrated in the present specification and the drawings are to achieve a plurality of objectives at the same time and technical usefulness is exhibited by attaining any one of such objectives.

