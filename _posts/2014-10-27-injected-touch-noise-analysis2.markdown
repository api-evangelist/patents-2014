---

title: Injected touch noise analysis
abstract: A processing device configured to induce, during a listening scan of a sense array, an injected touch to produce similar data as would be present during a touch scan of the sense array with a conductive object at a known location on the sense array. The processing device is further configured to compute, using the data, an estimate of a noise metric based on the injected touch.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09547399&OS=09547399&RS=09547399
owner: PARADE TECHNOLOGIES, LTD.
number: 09547399
owner_city: Santa Clara
owner_country: US
publication_date: 20141027
---
This application is a continuation of U.S. patent application Ser. No. 14 134 406 filed Dec. 19 2013 which claims the benefit of U.S. Provisional Application No. 61 840 655 filed Jun. 28 2013 and U.S. Provisional Application No. 61 861 192 filed Aug. 1 2013 all of which are incorporated by reference herein in their entirety.

The present disclosure relates generally to sensing systems and more particularly to capacitance sensing systems configurable to determine touch locations of touches on the capacitance sensing systems.

Capacitance sensing systems can sense electrical signals generated on electrodes that reflect changes in capacitance. Such changes in capacitance can indicate a touch event i.e. the proximity of an object to particular electrodes . Capacitive sense elements may be used to replace mechanical buttons knobs and other similar mechanical user interface controls. The use of a capacitive sense element allows for the elimination of complicated mechanical switches and buttons providing reliable operation under harsh conditions. In addition capacitive sense elements are widely used in modern customer applications providing user interface options in existing products. Capacitive sense elements can range from a single button to a large number arranged in the form of a capacitive sense array for a touch sensing surface.

Transparent touch screens that utilize capacitive sense arrays are ubiquitous in today s industrial and consumer markets. They can be found on cellular phones GPS devices set top boxes cameras computer screens MP3 players digital tablets and the like. The capacitive sense arrays work by measuring the capacitance of a capacitive sense element and looking for a delta in capacitance indicating a touch or presence of a conductive object. When a conductive object e.g. a finger hand or other object comes into contact or close proximity with a capacitive sense element the capacitance changes and the conductive object is detected. The capacitance changes of the capacitive touch sense elements can be measured by an electrical circuit. The electrical circuit converts the measured capacitances of the capacitive sense elements into digital values.

There are two typical types of capacitance 1 mutual capacitance where the capacitance sensing circuit has access to both electrodes of the capacitor 2 self capacitance where the capacitance sensing circuit has only access to one electrode of the capacitor where the second electrode is tied to a DC voltage level or is parasitically coupled to Earth Ground. A touch panel has a distributed load of capacitance of both types 1 and 2 and some touch solutions sense both capacitances either uniquely or in hybrid form with its various sense modes.

In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the present invention. It will be evident however to one skilled in the art that the present invention may be practiced without these specific details. In other instances well known circuits structures and techniques are not shown in detail but rather in a block diagram in order to avoid unnecessarily obscuring an understanding of this description.

Reference in the description to one embodiment or an embodiment means that a particular feature structure or characteristic described in connection with the embodiment is included in at least one embodiment of the invention. The phrase in one embodiment located in various places in this description does not necessarily refer to the same embodiment.

In electronic receivers such as in a touch sensor system noise may be coupled into the receiving system resulting in corrupt measurements. In a touch sensor system noise may be coupled from a conductive object such as a finger to the touch system sensor resulting in large errors in computed finger positions. The embodiments described herein are directed at inducing an injected touch to produce similar data as would be present during a touch scan of a sense array with a conductive object such as finger being disposed on the sense array and computing a noise metric based on the injected touch. By computing a noise metric based on an injected touch a touch sensor system may be tuned to operate at frequencies that reject the noise. By inducing an injected touch the embodiments described herein can provide an improved system that may accurately measure noise and effectively reject the noise. The embodiments described herein may provide an improved system that reduces the deleterious effects of noise on measurement in a transmit and receive system. Alternatively other advantages may be achieved.

In one embodiment listening scan tool may induce during a listening scan i.e. metric scans of a sense array an injected touch to produce similar data as would be present during a touch scan of the sense array. Listening scan tool may compute using the data an estimate of a noise metric based on the injected touch the noise metric indicative of noise characteristics of noise on the sense array. In one embodiment listening scan tool performs a listening scan while the transmission signal is turned off. When the transmission signal is turned off listening scan tool may be able to better detect environmental noise. In another embodiment listening scan tool performs a listening scan for a plurality of frequencies and generates noise metrics for each frequency. Listening scan tool may select a stimulus signal TX signal from a plurality of stimulus signals for a touch scan based on the different noise metrics. In one embodiment listening scan tool selects a transmission frequency for which a noise metric indicates a minimum noise response. Additional details of listening scan tool are described in more detail with respect to .

In one embodiment the sense array includes electrodes N where N is a positive integer that are disposed as a two dimensional matrix also referred to as an XY matrix . The sense array is coupled to pins N of the processing device via one or more analog buses transporting multiple signals. In sense array the first three electrodes i.e. electrodes are connected to capacitance sensing circuit and to ground illustrating a self capacitance configuration. The last electrode i.e. N has both terminals connected to capacitance sensing circuit illustrating a mutual capacitance configuration. In an alternative embodiment without an analog bus each pin may instead be connected either to a circuit that generates a transmit TX signal or to an individual receive RX sensor circuit. The sense array may include a multi dimension capacitive sense array. The multi dimension sense array includes multiple sense elements organized as rows and columns. In another embodiment the sense array operates as an all points addressable APA mutual capacitive sense array. The sense array may be disposed to have a flat surface profile. Alternatively the sense array may have non flat surface profiles. Alternatively other configurations of capacitive sense arrays may be used. For example instead of vertical columns and horizontal rows the sense array may have a hexagon arrangement or the like. In one embodiment the sense array may be included in an indium tin oxide ITO panel or a touch screen panel. In one embodiment sense array is a capacitive sense array. In another embodiment the sense array is non transparent capacitive sense array e.g. PC touchpad .

In one embodiment the capacitance sensing circuit may include a relaxation oscillator or other means to convert a capacitance into a measured value. The capacitance sensing circuit may also include a counter or timer to measure the oscillator output. The processing device may further include software components to convert the count value e.g. capacitance value into a touch detection decision also referred to as switch detection decision or relative magnitude. It should be noted that there are various known methods for measuring capacitance such as current versus voltage phase shift measurement resistor capacitor charge timing capacitive bridge divider charge transfer successive approximation sigma delta modulators charge accumulation circuits field effect mutual capacitance frequency shift or other capacitance measurement algorithms. It should be noted however instead of evaluating the raw counts relative to a threshold the capacitance sensing circuit may be evaluating other measurements to determine the user interaction. For example in the capacitance sensing circuit having a sigma delta modulator the capacitance sensing circuit is evaluating the ratio of pulse widths of the output i.e. density domain instead of the raw counts being over or under a certain threshold.

In another embodiment the capacitance sensing circuit includes a TX signal generator to generate a TX signal e.g. stimulus signal to be applied to the TX electrode and a receiver also referred to as a sensing channel such as an integrator coupled to measure an RX signal on the RX electrode. In a further embodiment the capacitance sensing circuit includes an analog to digital converter ADC coupled to an output of the receiver to convert the measured RX signal to a digital value. The digital value can be further processed by the processing device the host or both.

The processing device is configured to detect one or more touches on a touch sensing device such as the sense array . The processing device can detect conductive objects such as touch objects fingers or passive styluses an active stylus or any combination thereof . The capacitance sensing circuit can measure a touch data on the sense array . The touch data may be represented as multiple cells each cell representing an intersection of sense elements e.g. electrodes of the sense array . The capacitive sense elements are electrodes of conductive material such as copper silver indium tin oxide ITO metal mesh carbon nanotubes or the like. The sense elements may also be part of an ITO panel. The capacitive sense elements can be used to allow the capacitance sensing circuit to measure self capacitance mutual capacitance or any combination thereof. In another embodiment the touch data measured by the capacitance sensing circuit can be processed by the processing device to generate a 2D capacitive image of the capacitive sense array . In one embodiment when the capacitance sensing circuit measures mutual capacitance of the touch sensing device e.g. capacitive sense array the capacitance sensing circuit determines a 2D capacitive image of the touch sensing object on the touch surface and processes the data for peaks and positional information. In another embodiment the processing device is a microcontroller that obtains a capacitance touch signal data set such as from a sense array and finger detection firmware executing on the microcontroller identifies data set areas that indicate touches detects and processes peaks calculates the coordinates or any combination therefore. The firmware can calculate a precise coordinate for the resulting peaks. In one embodiment the firmware can calculate the precise coordinates for the resulting peaks using a centroid algorithm which calculates a centroid of the touch the centroid being a center of mass of the touch. The centroid may be an X Y coordinate of the touch. Alternatively other coordinate interpolation algorithms may be used to determine the coordinates of the resulting peaks. The microcontroller can report the precise coordinates to a host processor as well as other information.

In one embodiment the processing device further includes processing logic . Some or all of the operations of the processing logic may be implemented in firmware hardware or software or some combination thereof. The processing logic may receive signals from the capacitance sensing circuit and determine the state of the sense array such as whether an object e.g. a finger is detected on or in proximity to the sense array e.g. determining the presence of the object resolve where the object is on the sense array e.g. determining the location of the object tracking the motion of the object or other information related to an object detected at the touch sensor. In another embodiment processing logic may include capacitance sensing circuit .

In another embodiment instead of performing the operations of the processing logic in the processing device the processing device may send the raw data or partially processed data to the host . The host as illustrated in may include decision logic that performs some or all of the operations of the processing logic . Operations of the decision logic may be implemented in firmware hardware software or a combination thereof. The host may include a high level Application Programming Interface API in applications that perform routines on the received data such as compensating for sensitivity differences other compensation algorithms baseline update routines start up and or initialization routines interpolation operations or scaling operations. The operations described with respect to the processing logic may be implemented in the decision logic the applications or in other hardware software and or firmware external to the processing device . In some other embodiments the processing device is the host .

In another embodiment the processing device may also include a non sensing actions block . This block may be used to process and or receive transmit data to and from the host . For example additional components may be implemented to operate with the processing device along with the sense array e.g. keyboard keypad mouse trackball LEDs displays or other peripheral devices .

As illustrated capacitance sensing circuit may be integrated into processing device . Capacitance sensing circuit may include an analog I O for coupling to an external component such as touch sensor pad not shown sense array touch sensor slider not shown touch sensor buttons not shown and or other devices. The capacitance sensing circuit may be configurable to measure capacitance using mutual capacitance sensing techniques self capacitance sensing technique charge coupling techniques combinations thereof or the like. In one embodiment capacitance sensing circuit operates using a charge accumulation circuit a capacitance modulation circuit or other capacitance sensing methods known by those skilled in the art. In an embodiment the capacitance sensing circuit is of the Cypress TMA 3xx TMA 4xx or TMA xx families of touch screen controllers. Alternatively other capacitance sensing circuits may be used. The mutual capacitive sense arrays or touch screens as described herein may include a transparent conductive sense array disposed on in or under either a visual display itself e.g. LCD monitor or a transparent substrate in front of the display. In an embodiment the TX and RX electrodes are configured in rows and columns respectively. It should be noted that the rows and columns of electrodes can be configured as TX or RX electrodes by the capacitance sensing circuit in any chosen combination. In one embodiment the TX and RX electrodes of the sense array are configurable to operate as TX and RX electrodes of a mutual capacitive sense array in a first mode to detect touch objects and to operate as electrodes of a coupled charge receiver in a second mode to detect a stylus on the same electrodes of the sense array. The stylus which generates a stylus TX signal when activated is used to couple charge to the capacitive sense array instead of measuring a mutual capacitance at an intersection of an RX electrode and a TX electrode including one or more sense element as done during mutual capacitance sensing. An intersection between two sense elements may be understood as a location at which one sense electrode crosses over or overlaps another while maintaining galvanic isolation from each other. The capacitance associated with the intersection between a TX electrode and an RX electrode can be sensed by selecting every available combination of TX electrode and RX electrode. When a touch object i.e. conductive object such as a finger or stylus approaches the sense array the touch object causes a decrease in mutual capacitance between some of the TX RX electrodes. In another embodiment the presence of a finger increases the coupling capacitance of the electrodes. Thus the location of the finger on the sense array can be determined by identifying the RX electrode having a decreased coupling capacitance between the RX electrode and the TX electrode to which the TX signal was applied at the time the decreased capacitance was measured on the RX electrode. Therefore by sequentially determining the capacitances associated with the intersection of electrodes the locations of one or more inputs can be determined. It should be noted that the process can calibrate the sense elements intersections of RX and TX electrodes by determining baselines for the sense elements. It should also be noted that interpolation may be used to detect finger position at better resolutions than the row column pitch as would be appreciated by one of ordinary skill in the art. In addition various types of coordinate interpolation algorithms may be used to detect the center of the touch as would be appreciated by one of ordinary skill in the art.

It should also be noted that the embodiments described herein are not limited to having a configuration of a processing device coupled to a host but may include a system that measures the capacitance on the sensing device and sends the raw data to a host computer where it is analyzed by an application. In effect the processing that is done by processing device may also be done in the host.

The processing device may reside on a common carrier substrate such as for example an integrated circuit IC die substrate or a multi chip module substrate. Alternatively the components of the processing device may be one or more separate integrated circuits and or discrete components. In one embodiment the processing device may be the Programmable System on a Chip PSoC processing device developed by Cypress Semiconductor Corporation San Jose Calif. Alternatively the processing device may be one or more other processing devices known by those of ordinary skill in the art such as a microprocessor or central processing unit a controller special purpose processor digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable device. In an alternative embodiment for example the processing device may be a network processor having multiple processors including a core unit and multiple micro engines. Additionally the processing device may include any combination of general purpose processing device s and special purpose processing device s .

Capacitance sensing circuit may be integrated into the IC of the processing device or alternatively in a separate IC. Alternatively descriptions of capacitance sensing circuit may be generated and compiled for incorporation into other integrated circuits. For example behavioral level code describing the capacitance sensing circuit or portions thereof may be generated using a hardware descriptive language such as VHDL or Verilog and stored to a machine accessible medium e.g. CD ROM hard disk floppy disk etc. . Furthermore the behavioral level code can be compiled into register transfer level RTL code a netlist or even a circuit layout and stored to a machine accessible medium. The behavioral level code the RTL code the netlist and the circuit layout may represent various levels of abstraction to describe capacitance sensing circuit .

It should be noted that the components of electronic system may include all the components described above. Alternatively electronic system may include some of the components described above.

In one embodiment the electronic system is used in a tablet computer. Alternatively the electronic device may be used in other applications such as a notebook computer a mobile handset a personal data assistant PDA a keyboard a television a remote control a monitor a handheld multi media device a handheld media audio and or video player a handheld gaming device a signature input device for point of sale transactions an eBook reader global position system GPS or a control panel among others. The embodiments described herein are not limited to touch screens or touch sensor pads for notebook implementations but can be used in other capacitive sensing implementations for example the sensing device may be a touch sensor slider not shown or touch sensor buttons e.g. capacitance sensing buttons . In one embodiment these sensing devices include one or more capacitive sensors or other types of capacitance sensing circuitry. The operations described herein are not limited to notebook pointer operations but can include other operations such as lighting control dimmer volume control graphic equalizer control speed control or other control operations requiring gradual or discrete adjustments. It should also be noted that these embodiments of capacitive sensing implementations may be used in conjunction with non capacitive sensing elements including but not limited to pick buttons sliders ex. display brightness and contrast scroll wheels multi media control ex. volume track advance etc. handwriting recognition and numeric keypad operation.

Capacitance sensing circuit includes multiplexer control demultiplexer multiplexer clock generator signal generator demodulation circuit and analog to digital converter ADC . ADC is further coupled with touch coordinate converter . Touch coordinate converter may be implemented in the processing logic .

Transmit and receive electrodes in the electrode matrix may be arranged so that each of the transmit electrodes overlap and cross each of the receive electrodes to form an array of intersections while maintaining galvanic isolation from each other. Thus each transmit electrode may be capacitively coupled with each of the receive electrodes. For example transmit electrode is capacitively coupled with receive electrode at the point where transmit electrode and receive electrode overlap.

Clock generator supplies a clock signal to signal generator which produces a TX signal to be supplied to the transmit electrodes of sense array . In one embodiment the signal generator includes a set of switches that operate according to the clock signal from clock generator . The switches may generate a TX signal by periodically connecting the output of signal generator to a first voltage and then to a second voltage wherein the first and second voltages are different.

The output of signal generator is connected with demultiplexer which allows the TX signal to be applied to any of the M transmit electrodes of sense array . In one embodiment multiplexer control controls demultiplexer so that the TX signal is applied to each transmit electrode in a controlled sequence. Demultiplexer may also be used to ground float or connect an alternate signal to the other transmit electrodes to which the TX signal is not currently being applied. In an alternate embodiment the TX signal may be presented in a true form to a subset of the transmit electrodes and in complement form to a second subset of the transmit electrodes wherein there is no overlap in members of the first and second subset of transmit electrodes .

Because of the capacitive coupling between transmit and receive electrodes the TX signal applied to each transmit electrode induces a current within each of the receive electrodes. For instance when the TX signal is applied to transmit electrode through demultiplexer the TX signal induces an RX signal on the receive electrodes in matrix . The RX signal on each of the receive electrodes can then be measured in sequence by using multiplexer to connect each of the N receive electrodes to demodulation circuit in sequence.

The mutual capacitance associated with the intersections of all TX electrodes and RX electrodes can be measured by selecting every available combination of TX electrode and RX electrode using demultiplexer and multiplexer . To improve performance multiplexer may also be segmented to allow more than one of the receive electrodes in matrix to be routed to additional demodulation circuits such as demodulation circuit . In an optimized configuration where there is a 1 to 1 correspondence of instances of demodulation circuit with receive electrodes multiplexer may not be present in the system.

When a conductive object such as a finger approaches the electrode matrix the conductive object causes a decrease in the measured mutual capacitance between only some of the electrodes. For example if a finger is placed near the intersection of transmit electrode and receive electrode the presence of the finger will decrease the charge coupled between electrodes and . Thus the location of the finger on the touchpad can be determined by identifying the one or more receive electrodes having a decrease in measured mutual capacitance in addition to identifying the transmit electrode to which the TX signal was applied at the time the decrease in capacitance was measured on the one or more receive electrodes.

By determining changes in the mutual capacitances associated with each intersection of electrodes in the matrix the presence and locations of one or more conductive objects may be determined. The determination may be sequential in parallel or may occur more frequently at commonly used electrodes.

In alternative embodiments other methods for detecting the presence of a finger or other conductive object may be used where the finger or conductive object causes an increase in measured capacitance at one or more electrodes which may be arranged in a grid or other pattern. For example a finger placed near an electrode of a capacitive sensor may introduce an additional capacitance to ground that increases the total capacitance between the electrode and ground. The location of the finger can be determined based on the locations of one or more electrodes at which a change in measured capacitance is detected and the associated magnitude of capacitance change at each respective electrode.

The induced current signal is integrated by demodulation circuit . The rectified current output by demodulation circuit can then be filtered and converted to a digital code by ADC .

A series of such digital codes measured from adjacent sensor intersections when compared to or offset by the associated codes of these same sensors in an un touched state may be converted to touch coordinates indicating a position of a touch on sense array by touch coordinate converter . The touch coordinates may then be used to detect gestures or perform other functions by the processing logic .

In one embodiment the processing device is connected to a host which may receive the measured capacitances or calculated centroid locations from the processing device .

The sense array illustrated in includes electrodes arranged to create a pattern of interconnected diamond shapes. Specifically the electrodes of sense array form a single solid diamond SSD pattern. In one embodiment each intersection between a row electrode and a column electrode defines a unit cell. Each point within the unit cell is closer to the associated intersection than to any other intersection. For example unit cell contains the points that are closest to the intersection between row electrode and column electrode .

In one embodiment capacitive touch sensing system may collect data from the entire touch sensing surface of sense array by performing a scan to measure capacitances of the unit cells that comprise the touch sensing surface then process the touch data serially or in parallel with a subsequent scan. For example one system that processes touch data serially may collect raw capacitance data from each unit cell of the entire touch sensing surface and filter the raw data. Based on the filtered raw data the system may determine local maxima corresponding to local maximum changes in capacitance to calculate positions of fingers or other conductive objects then perform post processing of the resolved positions to report locations of the conductive objects or to perform other functions such as motion tracking or gesture recognition.

In one embodiment capacitive touch sensing system may be configured to perform one or both of self capacitance sensing and mutual capacitance sensing. In one embodiment capacitive touch sensing system is configured to perform self capacitance sensing in sequence or in parallel to measure the self capacitance of each row and column electrode of the touch sensing surface e.g. sense array such that the total number of sense operations is N M for a capacitive sense array having N rows and M columns. In one embodiment capacitive touch sensing system may be capable of connecting individual electrodes together to be sensed in parallel with a single operation. For example multiple row e.g. electrodes and or column electrodes e.g. electrodes may be coupled together and sensed in a single operation to determine whether a conductive object is touching or near the touch sensing surface. In an alternate embodiment the capacitive touch sensing system may be capable of connecting each row electrode to it is own sensing circuit such that all row electrodes may be sensed in parallel with a single operation. The capacitive touch sensing system may also be capable of connecting each column electrode to its own sensing circuit such that all column electrodes may be sensed in parallel with a single operation. The capacitive touch sensing system may also be capable of connecting all row and column electrodes to their own sensing circuits such that all row and column electrodes may be sensed in parallel with a single operation.

In one embodiment the capacitive touch sensing system may perform mutual capacitance sensing of the touch sensing surface e.g. sense array by individually sensing each intersection between a row electrode and a column electrode. Thus a total number of sense operations for a capacitive sense array e.g. sense array having X rows and Y columns is X Y. In one embodiment performing a mutual capacitance measurement of a unit cell formed at the intersection of a row electrode and a column electrode includes applying a signal TX to one electrode and measuring characteristics of the signal on another electrode resulting from the capacitive coupling between the electrodes.

In one embodiment multiple capacitance sensing circuits may be used in parallel to measure a signal coupled to multiple column electrodes simultaneously from a signal applied to one or more row electrodes. In one embodiment for a capacitive sense array e.g. sense array having X rows Y columns and N columns that can be sensed simultaneously the number of mutual capacitance sensing operations is the smallest whole number greater than or equal to X Y N.

In one embodiment each update of the touch locations may include a sensing portion and a non sensing portion. The sensing portion may include measurement of capacitance associated with intersections between electrodes while the non sensing portion may include calculation of touch locations based on the capacitance measurements and reporting of the calculated touch locations to a host device.

In one embodiment the charging device may be used to power the capacitive sensing system and or to charge a battery or other power source coupled to the capacitive sensing system . Charging device may generate common mode voltage noise. When the touch object comes into contact with capacitive sensing system the touch object may complete a circuit connection between the charging device and the capacitive sensing system . By completing the circuit connection noise generated by charging device is introduced into the capacitive sensing system . The noise caused by the contact between the touch object and the capacitive sensing system may include direct coupled noise.

In one embodiment in a touch sensor system e.g. electronic system in electronic system in and capacitive sensing system external sources of noise often produced by low quality battery chargers cause noise currents to be coupled from a user s finger to the touch system sensor. The noise current corrupts measurements made by the system and can result in large errors in the computed finger positions false touches and suppression of the signal produced by real touches such that they are not reported.

Injected touch may produce similar data as would be present during a touch scan of the sense array with a conductive object at a known location on the sense array e.g. sense array . For example metric testing is typically performed using a metal finger e.g. conductive object to conduct noise onto the panel e.g. sense array at a known position. The metal finger may also be present absent a noise signal creating what can be called a gold standard of touch data for the physical position of a touch. Both the metric test and the gold standard may be performed to determine the presence of a touch and the X Y coordinate position of the touch. The sensing system e.g. electronic system and electronic system may then compare the gold standard with the metric testing data to determine error in the sensing system due to noise. If a test metal finger were on the panel at all times the magnitude of error in the sensing system when determining presence and position would provide a perfect noise metric. However it is not practical to continually position a physical test finger on the touch screen e.g. sense array during normal user operation. It is possible to electrically emulate the effect of a test finger in the sensing system e.g. electronic system and electronic system for example with injected touch .

In a capacitive sensing system e.g. electronic system and noise is typically measured using separate metric scans a.k.a. listening scan when the TX signal is disabled. Metric scans may be performed sequentially. In one embodiment the separate metric scans such as wide band noise peak noise frequency and injected touch may be performed in any order. In another embodiment the separate metric scans may be performed simultaneously. In another embodiment any of the separate metric scans may or may not be performed and additional separate metric scans may or may not be included in metric scans . In another embodiment the injected touch may be run multiple times prior to or after touch scan . The separate metric scans of metric scans may be performed so that touch data from an actual touch is not confused with noise. In one embodiment metric scans are performed independent of a transmitted stimulus signal e.g. TX signal . Said differently during the metric scans the transmit signal is turned off so that no touch signal is present from a touch object. In another embodiment injected touch in particular is performed independent of a transmitted stimulus signal e.g. TX signal .

In one embodiment injected touch induces a surrogate touch current in hardware e.g. capacitance sensing circuit to produce the same measured values during the injected touch scan as would be present during a touch scan with a conductive object disposed at a known location e.g. the metal test finger described above on the sense array e.g. sense array . The sensing system e.g. electronic system and electronic system may then use the data collected from the metric scans generally and the injected touch in particular to compute an estimate of a noise metric. In one embodiment a noise metric may be an estimate of error e.g. position error and or jitter that will be present in a touch measurement due to noise in the sensing system. In another embodiment a noise metric may be directly related to customer observable performance measures such as false touches dropped touches and X Y coordinate finger position jitter.

In one embodiment injected touch is performed on a known location on a sense array e.g. sense array . In order to determine the known location processing logic e.g. processing logic may determine the presence or location of a touch object. For example processing logic may detect a touch object on a particular row or column of sense array . In another embodiment processing logic may determine that a touch is present on a particular cell or number of cells on sense array . After determining the known location injected touch may be performed at a precise location on sense array while a conductive object is conducting noise on to the sense array .

In another embodiment injected touch may simulate a touch on any size matrix of cells. For example in injected touch may simulate a touch on a 2 2 sized matrix e.g. S S S S . As a result of injected touch the cells S S S S may receive touch data indicative of a touch. For example cells S S S and S may have counts of 23 29 30 34 respectively while the remaining cells may have counts of approximately zero. Performing an injected touch such as injected touch will be discussed in the .

In one embodiment during touch scan the TX sensor elements e.g. TX element are driven so that a charge is received in each RX channel e.g. RX element may be the input to the RX channel . During touch scan a baseline charge is removed using a current output digital to analog converter IDAC not shown leaving only charge variation due to the finger touch modulation of the TX signal e.g. TX L on the integration capacitors of integration circuit .

In one embodiment during injected touch a transmitted stimulus signal e.g. TX signal such as TX L is not present thus the IDAC is not used. During injected touch there is no baseline current for the IDAC to remove. Therefore the IDAC is available to emulate a surrogate touch by adding an amount of charge that would have been produced by a metal test finger as described in . The IDAC charge may be set uniquely for each RX channel and each injected touch scan. Additionally an injected touch may be injected anywhere on sense array as described in . Since the injected touch is produced by adding charge to the integration capacitors of integration circuit the effect of noise saturating the RX channel is included in the measurement of injected touch . Thus large noise signals saturating integration circuit during injected touch scan will destroy the surrogate touch signal while dropped touches will be manifested exactly as they would be for a physical touch on the sense array .

It should be noted that an injected touch need not be generated by an IDAC or current source sink. Injected touch may be generated digitally for example by adding a fixed touch difference count value in firmware. In another embodiment an injected touch may be generated by connecting a capacitive test structure not shown via a multiplexor e.g. multiplexor to the receiving circuit. In another embodiment an injected touch may be generated by adding a fixed constant to the listening data. In this case the IDAC and TX signal are turned off. The listening scan will consist of only noise. The fixed constant value which may emulate a real touch is added to the listening data. In another embodiment and injected touch may be generated by initializing a voltage representative of a touch value on an integration circuit such as integration circuit . In another embodiment the TX signal is routed through a mock circuit element connected in parallel to the Rx input.

The following methods method and may be performed by processing logic e.g. processing logic that may include hardware circuitry dedicated logic etc. software such as is run on a general purpose computing system or a dedicated machine firmware embedded software or any combination thereof. In one embodiment the processing device performs some or all of each method disclosed above. In another embodiment listening scan tool performs some or all of each method. In another embodiment the host performs some or all of the operations each method. Alternatively other components of the electronic system or electronic system perform some or all of the operations of each method.

In one embodiment the listening scan e.g. metric scans is performed independent of a transmitted stimulus signal. For example in the transmission signal i.e. TX L may be turned off when performing a listening scan. Additionally the absence of a transmission signal removes a touch object s e.g. finger influence from the results of the listening scan e.g. listening data .

In block of method processing logic e.g. processing logic computes using the data from the injected touch an estimate of a noise metric based on the touch. In one embodiment a noise metric describes characteristics of detected noise. For example a noise metric may describe the external noise amplitude. In another embodiment the noise metric may describe the frequency at which the noise exists. In another embodiment the noise metric may describe the frequency and amplitude of the noise. In another embodiment the noise metric may describe the location of a touch object on the sense array.

In another embodiment the listening scan e.g. metric scans is performed for a plurality of frequencies. For example multiple listen scans may be performed sequentially at different listen frequencies. A single channel e.g. RX element may be used to scan multiple frequencies sequentially. In one embodiment processing logic generates a noise metric for each of the plurality of frequencies. If the noise metric for a particular frequency is high it means that noise exists at that particular listen frequency. Conversely if the noise metric for a particular frequency is low it means that low noise or no noise exists at that particular listen frequency. A separate noise metric may be computed for each different listen frequency. In one embodiment the noise metric with minimum noise out of the multiple noise metrics for each different listen frequency is said to have a minimum noise response. In another embodiment the noise metric indicating the minimum detected noise is the minimum noise metric which may be frequency based magnitude based or other alternative.

In another embodiment the listen scan e.g. metric scans is performed for a plurality of frequencies in parallel. An electronic system e.g. electronic system and electronic system may include multiple channels e.g. see with multiple RX channels and multiple TX channels . The multiple channels e.g. RX channels may be configured to perform a listen scan on multiple frequencies in parallel and simultaneously. Processing logic e.g. processing logic may compute a noise metric for each frequency of the listen frequency.

In block of method processing logic e.g. processing logic receives the injected touch at an internal portion of the receiving circuit. As described in a metric test may be performed using a metal test finger to conduct noise onto sense array . Placing a metal test finger on sense array during customer use is impractical. Therefore in one embodiment injected touch is performed at an internal portion of the receiving circuit such as capacitance sensing circuit . In one embodiment the injected touch may be performed by an IDAC located in processing device . The IDAC may deliver current to the integrating capacitors of integration circuit to simulate a surrogate touch. In another embodiment an injected touch may be introduced by adding a fixed touch difference count in firmware.

In block of method processing logic process e.g. processing logic the data of the injected touch in an equivalent signal path to touch data from a touch proximate the sense array e.g. sense array present during the touch scan of the sense array. Processing data from injected touch in an equivalent signal path to touch data from a touch allows for a more precise estimate of noise in part because the data from injected touch will be conditioned by the same circuitry as would an actual touch. Thus the data from injected touch will be affected in a similar manner as data from an actual touch. For example data from an injected touch that is processed in an equivalent signal path to touch data from a touch may be processed by downstream filters and incorporate the signal conditioning caused by the downstream filters. In one embodiment the equivalent signal path is the same or similar signal path in which data of an actual touch is processed. In another embodiment the equivalent signal path may be the same signal path for both data of injected touch and an actual touch except that the starting point is different. For example in injected touch may begin in integration circuit while touch data may begin at or received by the receiving circuit at attenuator circuit . However both the data of the injected touch and the actual touch are processed in an equivalent signal path starting from integration circuit .

In block of method processing logic e.g. processing logic selects a stimulus signal e.g. selected stimulus signal from a plurality of stimulus signals e.g. TX signal such as TX L for the touch scan e.g. touch scan where the touch scan measures the touch proximate the sense array e.g. sense array according to one embodiment. The selection of the stimulus signal may be based on the noise metric where the noise metric is indicative of noise characteristics of noise on the sense array e.g. sense array . For example as described in block of method a noise metric may be computed for different frequencies of noise. Processing logic may determine from multiple metric scans e.g. metric scans which frequency has a minimum noise response based on the computed noise metrics. Processing logic may select the frequency that has minimum noise response and choose that frequency to transmit a stimulus signal for a touch scan e.g. touch scan . Additional embodiments describing the selection of a stimulus signal based on the noise metric will be discussed below.

In one embodiment the listening scan e.g. metric scans is performed with multiple frequencies in parallel instead of sequentially. Performing multiple listening scans in parallel for different frequencies reduces the window of time between the listen scan on each frequency and the touch scan e.g. touch scan . Performing a listening scan for multiple frequencies in parallel reduces the probability that the frequency of noise changes during the scanning sequence e.g. scanning sequence . Typically the listening scan e.g. metric scans and touch scan e.g. touch scan execute very fast and the external noise sources and the associated noise characteristics remain relatively constant. For example if the external noise frequency changes slowly the optimal transmission frequency for a touch scan is selected based on current and previously measured data. But if external noise changes nearly instantaneously after the listen scan but before the touch scan processing logic e.g. processing logic may select an incorrect transmission frequency e.g. TX L because the noise metrics are outdated. In other words if external noise frequency changes just before the touch scan the listening scan will not detect the correct noise characteristics. As a result undetected noise may potentially cause touch jitter or false touch. Scanning multiple frequencies simultaneously during the listening scan reduces the window of time between the listen scan on each frequency and the touch scan which reduces the probability of measurement error for a touch in an environment where the noise frequencies change quickly.

Method begins at block where processing logic detects noise. In one embodiment processing logic detects charger noise. In another embodiment processing logic detects noise from another source such as LCD noise. In block of method processing logic provides the variable FreqInd with a value of zero and variable Noise with a value e.g. Noise 0 that corresponds to FreqInd 0. FreqInd refers to a frequency index. FreqInd may be a pointer to an array of operational frequencies. For example there may be 4 operational frequencies 100 kHz 150 kHz 250 kHz and 350 kHz. Corresponding to the 4 operational frequencies FreqInd may have a value of 0 to 3. FreqInd 0 may refer to 100 kHz and FreqInd 3 may refer to 350 kHz. Noise may refer to an array that stores listening scan data corresponding to each of the operational frequencies of FreqInd. In one embodiment Noise may refer to a Noise array that stores noise metrics corresponding to each of the frequencies of FreqInd.

Method continues to block where processing logic initializes the Noise array. In one embodiment to initialize the Noise array processing logic stores noise metrics or noise data in Noise array that correspond to operational frequencies of the frequency index i.e. FreqInd . In another embodiment processing logic performs listening scans on all the operational frequencies and stores the results in Noise array. Method continues to block where processing logic sets the listening frequency to FreqInd. In one embodiment the listening frequency is 0 as set in block . The listening frequency is the frequency at which that the listening scan e.g. metric scans is performed.

Method continues to block where processing logic performs a listening scan e.g. metric scans . The listening scan may be conducted at the frequency indicated by the frequency index e.g. FreqInd . In another embodiment the listening scan may be conducted for one or more frequencies sequentially or in parallel. Method continues to block where processing logic saves the listening data from the listening scan to Noise array. In one embodiment one or more noise metrics are stored in Noise array corresponding to the frequency or frequencies of the listening scan. Method continues to block where processing logic sets OpFreq to Min Noise . OpFreq is the operational frequency e.g. TX frequency at which a touch scan may be conducted. Min Noise may be the noise metric that indicates the operational frequency with the minimum noise characteristics. In block processing logic sets the operational frequency to the frequency corresponding to the minimum noise data in the Noise array. Method continues to block where processing logic sets the TX frequency to OpFreq as defined by block . In block of method processing logic conducts a touch scan e.g. touch scan to detect the position of a touch proximate the sense array e.g. sense array . The touch scan may be conducted at the TX frequency as set at block and may be the frequency at which the least noise is detected.

Method continues to block where processing logic compares the current number in the frequency index i.e. FreqInd to the maximum number of available operational frequencies i.e. FREQNUM . If FreqInd is not less than FREQNUM method moves to block where processing logic sets FreqInd to zero. If FreqInd is less than FREQNUM method moves to block where processing logic adds one to FreqInd. Method then returns to block . By looping through method method cycles through the operational frequencies and continuously updates noise metric data.

In one embodiment in method processing logic conducts a listening scan before and after a touch scan e.g. touch scan in order to detect any changes in the noise signal. Method begins at block where processing logic detects noise. In one embodiment processing logic detects charger noise. In another embodiment processing logic detects noise from another source such as LCD noise. In block of method processing logic provides the variable FreqInd with a value of zero and the variable Noise with a value e.g. Noise 0 that corresponds to FreqInd 0. FreqInd refers to a frequency index. FreqInd is a pointer to an array of operational frequencies. For example there may be 4 operational frequencies 100 kHz 150 kHz 250 kHz and 350 kHz. Corresponding to the 4 operational frequencies FreqInd may have a value of 0 to 3. FreqInd 0 may refer to 100 kHz and FreqInd 3 may refer to 350 kHz. Noise refers to Noise array that stores listening scan data corresponding to each of the operational frequencies of FreqInd. In one embodiment Noise may store noise metrics corresponding to each of the frequencies of FreqInd.

Method continues to block where processing logic initializes the Noise array. In one embodiment to initialize the Noise array processing logic stores noise metrics or noise data in Noise array that correspond to operational frequencies of the frequency index i.e. FreqInd . Method continues to block where processing logic sets the listening frequency to FreqInd. In one embodiment the listening frequency is 0 as initialized in block . The listening frequency is the frequency at which that the listening scan e.g. metric scans is performed.

Method continues to block where processing logic performs a listening scan e.g. metric scans . The listening scan may be conducted at the frequency indicated by the frequency index. In another embodiment the listening scan may be conducted for one or more frequencies sequentially or in parallel Method continues to block where processing logic saves the listening data from the listening scan to Noise array. In one embodiment one or more noise metrics are stored in Noise array corresponding to the frequency or frequencies of the listening scan. Method continues to block where processing logic sets OpFreq to Min Noise . OpFreq is the operational frequency e.g. TX frequency at which a touch scan may be conducted. In block processing logic sets the operational frequency to frequency corresponding to the minimum noise data in the Noise array. Method continues to block where processing logic sets the TX frequency to OpFreq as defined by block . In block of method processing logic conducts a touch position scan e.g. touch scan to detect the position of a touch proximate the sense array e.g. sense array . The touch scan may be conducted at the TX frequency as set at block and may be the frequency at which the least noise is detected.

Method continues to block where processing logic conducts another listening scan. In one embodiment conducting a second listening scan ensures that the noise frequency has not changed during the touch scan. In block processing logic saves the listening data from the listening scan of block in the Noise array.

In block of method processing logic sets OpFreq equal to Min Noise . OpFreq is another variable for operational frequency. In block processing logic compares OpFreq to OpFreq. The two variables OpFreq and OpFreq may be compared to identify if the minimum noise frequency changed during the touch scan. If the minimum noise frequency changed during the touch scan the touch data may be corrupt. If OpFreq and OpFreq are not equivalent value method proceeds to block and sets the TX frequency to a new value OpFreq. Then method proceeds to block where processing logic conducts a new touch scan e.g. touch scan .

Method continues to block where processing logic compares the current number in the frequency index i.e. FreqInd to the maximum number of available operational frequencies i.e. FREQNUM . If FreqInd is not less than FREQNUM method moves to block where processing logic sets FreqInd to zero. If FreqInd is less than FREQNUM method moves to block where processing logic adds one to FreqInd. Method then returns to block .

In one embodiment processing logic e.g. processing logic adds a derivative to the noise metric in order to make the noise metric more reliable. A noise metric such as noise metric may be more than a single number that represents noise. A noise metric e.g. noise metric may show noise characteristics over time. Consequently the noise metric will show the changes of the noise characteristics over time. For example noise metric rises and falls in value over time. Further the noise metric demonstrates beatings e.g. beating . That is noise metric is lower at certain instances in time. For example in characteristics of noise are reflected by the noise metric value . For a majority of time e.g. time noise metric value is roughly 104. However for brief instances noise metric value drops to values of approximately 20. These drops in noise metric value may be called beatings e.g. beating . In another embodiment any deviation from a consistent noise metric value may be a beating. For example spikes in a noise metric value may be a beating. In order to create a more stable noise metric for example a noise metric with few to no beatings a derivative of the noise metric may be used.

In method if the listening data is not continuously high then listening data is filtered by a Low Pass Filter LPF and assigned a noise metric. The LPF listening data includes the average of the current and previous listening scans. Method continues by comparing listening data. If the listening data decreases the absolute value of the derivative of the listening data is added to the noise metric further described in . The sum of the listening data and the absolute value of the derivative of the listening data may be higher than MAXVALUE. Consequently the noise metric is checked against MAXVALUE to determine if the noise metric has exceeded MAXVALUE.

Method continues where processing logic updates the listening data value. Method then continues where processing logic chooses the minimum of all available noise metrics for all frequencies. The chosen frequency is assigned to the OpFreq variable which represent the optimum operation frequency.

In another embodiment method may apply some hysteresis to noise metrics. Often switching over two noise metrics that are close to each other or react on small differences between them may bring little benefit. If the difference between two noise metrics OpFreq and OpFreq is smaller than a THRESHHOLD SFS continues working with the previous frequency OpFreq.

In an alternative embodiment frequencies of external noise may be measured directly. Noise data from the direct measurements may be used for Window Hann and median filter switching. For example an external noise frequency applied to a sensing system e.g. electronic system may be measured directly. All RX electrodes e.g. receive electrode may be connected together at an input of a transimpedance amplifier TIA not shown . External noise may create current pulses on the RX lines that transform to voltage on the TIA output. A comparator CMP not shown may be part of the listening scan hardware. The comparator output may be read by firmware. The firmware counts the number of pulses during a time interval defined by a firmware gate not shown For example for a gate time of 3 mS the frequency counter resolution is 166 Hz when the firmware counts both edges of a clock pulse.

In an alternative embodiment counting may occur between pulses. Such an implementation may improve frequency counter resolution for small frequencies. For low frequencies such as below 10 kHz it may be beneficial to count time between pulses instead of the number of pulses. Additionally a switching algorithm with hysteresis may be implemented in firmware in order to decrease the measurement time at low frequencies while keeping the same resolution.

In another embodiment a frequency counter uses two comparators. Each comparator may have its own reference voltage. The second comparator with a high reference voltage can be used to measure only high amplitude signals. Such an implementation may make the output of the frequency counter more clear with certain types of noise such as LCD noise and charger noise with complicated noise characteristics.

In one embodiment a frequency counter may be used as a noise metric in AFH. If the frequency of external noise has a narrow bandwidth the frequency counter data may be used as a noise metric. In one implementation a noise frequency to TX period look up table with pre calculated optimal operation frequencies for all possible external noise frequencies is created. As a result touch scans may be performed at a minimum noise frequency to provide to provide an optimum performance.

Method may be executed when noise is detected such as charger noise. Processing logic may use a listening scan to measure the frequency of the external noise. The frequency counter may return a frequency number based on the measured frequency. The frequency number may be converted to a TX period e.g. the TX period may be a range of TX frequencies by using a look up table i.e. table . For each noise frequency the operational frequency i.e. OpFreq for a touch scan may be chosen from the table. The table may be built only once. For example the table may be built during development. Each look up table element points to the optimal operation TX period for each frequency counter value.

In one embodiment method includes a jitter filter to remove the frequency counter output toggling between plus 1 and minus 1 and to remove unnecessary frequency hops. The external noise frequency may change during a touch scan. A change in external noise frequency during a scan may cause the sensing system e.g. electronic system to operate at a less than optimal operational frequency and result in additional touch position jitter. As a result a special check may be performed by the frequency jitter filter to detect jitter. In one embodiment processing logic checks to see if the current measured frequency is equal to the previously measured frequency. If the two frequencies are equal then the touch position e.g. X and Y coordinates may be assigned to the variables XProved and YProved. If the two frequencies are not equal then the previous touch data may be reported.

In one embodiment three steps may be performed during AFH component development to generate the noise frequency to TX Period look up table. First the frequency range e.g. TX period and the number of frequencies to hop may be selected. Second the frequency counter data and the raw noise data may be collected. Third the frequency counter data and the raw noise data may be analyzed to generate the noise frequency to TX Period look up table.

In one embodiment in order to select the frequency range and the number of frequencies to hop the external noise frequency range may be defined. For example a test frequency range may be defined for frequencies between 1 kHz and 500 kHz. The range of frequencies may be wider or narrower. The number of hop frequencies may be any number. For example two three four or more frequencies may be used.

In one embodiment the frequency counter data and the jitter data is collected. For example the external noise frequency the frequency counter output and the raw jitter data corresponding to operational frequencies e.g. TX periods may be collected at the same time. In method processing logic measures the external noise frequency. Method continues where processing logic performs one hundred touch scans e.g. touch scan . In another embodiment the number of touch scans may be more or less than one hundred scans. Based on the touch data collected from the touch scans processing logic calculates the raw noise data. These steps may be repeated for all hop frequencies e.g. operational frequencies . The external noise frequency data and the raw noise data may be sent to a host or external computer on which method may be performed.

In one embodiment method sets the generator frequency to STARTFREQUENCY. Three full data packets may be skipped to exclude false readings. The fourth data packet may be saved to a storage location. If the current generator frequency F does not equal the STOPFREQUENCY F is increased and the loop repeats. The FREQUENCYSTEP value may be at least two times smaller than the expected width between the table entries. For example FREQUENCYSTEP maybe set to 100 Hz and the look up table may be generated with 1 kHz steps. The STARTFREQUENCY may be 500 Hz and the STOPFREQUENCY 500 kHz.

In one embodiment the measured data is analyzed to generate a noise frequency to TX Period look up table. Look up table generation may be frequency independent. The look up table may not depend on internal main oscillator frequency and may be used to determine the optimal operation frequency for all frequency counter values.

The processing logic e.g. processing logic can be implemented in a capacitive touch screen controller. In one embodiment the capacitive touch screen controller is the TrueTouch capacitive touchscreen controllers such as the CY8CTMA3xx family of TrueTouch Multi Touch All Points touchscreen controllers developed by Cypress Semiconductor Corporation of San Jose Calif. The TrueTouch capacitive touchscreen controllers sensing technology to resolve touch locations of multiple fingers and a stylus on the touch screens supports operating systems and is optimized for low power multi touch gesture and all point touchscreen functionality. Alternatively the touch position calculation features may be implemented in other touchscreen controllers or other touch controllers of touch sensing devices. In one embodiment the touch position calculation features may be implemented with other touch filtering algorithms as would be appreciated by one of ordinary skill in the art having the benefit of this disclosure.

The embodiments described herein may be used in various designs of mutual capacitance sensing systems in self capacitance sensing systems or combinations of both. In one embodiment the capacitance sensing system detects multiple sense elements that are activated in the array and can analyze a signal pattern on the neighboring sense elements to separate noise from actual signal. The embodiments described herein are not tied to a particular capacitive sensing solution and can be used as well with other sensing solutions including optical sensing solutions as would be appreciated by one of ordinary skill in the art having the benefit of this disclosure.

In the above description numerous details are set forth. It will be apparent however to one of ordinary skill in the art having the benefit of this disclosure that embodiments of the present invention may be practiced without these specific details. In some instances well known structures and devices are shown in block diagram form rather than in detail in order to avoid obscuring the description.

Some portions of the detailed description are presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated. It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the above discussion it is appreciated that throughout the description discussions utilizing terms such as inducing computing receiving processing selecting or the like refer to the actions and processes of a computing system or similar electronic computing device that manipulates and transforms data represented as physical e.g. electronic quantities within the computing system s registers and memories into other data similarly represented as physical quantities within the computing system memories or registers or other such information storage transmission or display devices.

The words example or exemplary are used herein to mean serving as an example instance or illustration. Any aspect or design described herein as example or exemplary is not necessarily to be construed as preferred or advantageous over other aspects or designs. Rather use of the words example or exemplary is intended to present concepts in a concrete fashion. As used in this application the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from context X includes A or B is intended to mean any of the natural inclusive permutations. That is if X includes A X includes B or X includes both A and B then X includes A or B is satisfied under any of the foregoing instances. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from context to be directed to a singular form. Moreover use of the term an embodiment or one embodiment or an implementation or one implementation throughout is not intended to mean the same embodiment or implementation unless described as such.

Embodiments descried herein may also relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes or it may comprise a general purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a non transitory computer readable storage medium such as but not limited to any type of disk including floppy disks optical disks CD ROMs and magnetic optical disks read only memories ROMs random access memories RAMs EPROMs EEPROMs magnetic or optical cards flash memory or any type of media suitable for storing electronic instructions. The term computer readable storage medium should be taken to include a single medium or multiple media e.g. a centralized or distributed database and or associated caches and servers that store one or more sets of instructions. The term computer readable medium shall also be taken to include any medium that is capable of storing encoding or carrying a set of instructions for execution by the machine and that causes the machine to perform any one or more of the methodologies of the present embodiments. The term computer readable storage medium shall accordingly be taken to include but not be limited to solid state memories optical media magnetic media any medium that is capable of storing a set of instructions for execution by the machine and that causes the machine to perform any one or more of the methodologies of the present embodiments.

The algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general purpose systems may be used with programs in accordance with the teachings herein or it may prove convenient to construct a more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition the present embodiments are not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the embodiments as described herein.

The above description sets forth numerous specific details such as examples of specific systems components methods and so forth in order to provide a good understanding of several embodiments of the present invention. It will be apparent to one skilled in the art however that at least some embodiments of the present invention may be practiced without these specific details. In other instances well known components or methods are not described in detail or are presented in simple block diagram format in order to avoid unnecessarily obscuring the present invention. Thus the specific details set forth above are merely exemplary. Particular implementations may vary from these exemplary details and still be contemplated to be within the scope of the present invention.

It is to be understood that the above description is intended to be illustrative and not restrictive. Many other embodiments will be apparent to those of skill in the art upon reading and understanding the above description. The scope of the invention should therefore be determined with reference to the appended claims along with the full scope of equivalents to which such claims are entitled.

