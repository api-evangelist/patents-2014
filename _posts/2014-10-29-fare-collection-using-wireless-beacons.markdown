---

title: Fare collection using wireless beacons
abstract: Systems and techniques are presented for processing a user through a paid entry gate using a mobile device. The mobile device receives a beacon packet from a first wireless beacon and wakes up an application. The application wakes up by transitioning to an active or background execution state. The application transmits validation data to a computer server system and the computer server system validates an account of the user. The mobile device receives a beacon packet including a gate identifier that is a unique identification of the paid entry gate from a second wireless beacon and transmits the gate identifier to the computer server system. The computer server system receives the gate identifier, debits the account of the user, and transmits a signal to a gate entry device associated with the gate identifier to grant the user passage through the paid entry gate.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09317976&OS=09317976&RS=09317976
owner: Cubic Corporation
number: 09317976
owner_city: San Diego
owner_country: US
publication_date: 20141029
---
This application claims the benefit of U.S. Provisional Patent Application No. 61 897 002 filed Oct. 29 2013 entitled TRANSIT FARE PAYMENT USING A MOBILE INSTRUMENT BLUETOOTH ENABLED APPLICATION the entire disclosure of which is hereby incorporated by reference for all purposes.

The present invention generally relates to paid entry gates. More specifically the present invention relates to paid entry gates that use wireless beacons for payment collection.

Turnstiles are typically used at entry gates of restricted areas to process users through the gates. The turnstile ensures that users can only pass through the gate in one direction and only one user can pass through at a time. A payment device can be used in conjunction with a turnstile to automate the fee collection and access granting processes. For example a payment device that accepts coins tokens tickets or cards can be placed next to the turnstile and can operate the turnstile to grant passage only if a valid payment has been received.

Turnstiles with payment devices can be used in a wide variety of settings to restrict access to paying customers. While turnstiles are most commonly found in mass transit systems they can also be utilized at stadiums and sporting events amusement parks and attractions or any other setting where payment is collected in exchange for access to a restricted area.

In one embodiment a system for processing a user through a paid entry gate using a mobile device is presented. The system includes a first wireless beacon a second wireless beacon an application executed by the mobile device and a computer server system. The first wireless beacon is configured to wirelessly transmit a first beacon packet in a first area. The second wireless beacon is configured to wirelessly transmit a second beacon packet in a second area that is closer to the paid entry gate than the first area. The second beacon packet includes a gate identifier that is a unique identification of the paid entry gate.

The application executed by the mobile device is configured to wake up in response to the mobile device receiving the first beacon packet from the first wireless beacon. The application wakes up by transitioning to an active or background execution state. The application transmits validation data to a computer server system after waking up. The application receives the second beacon packet including the gate identifier from the second wireless beacon and transmits the gate identifier to the computer server system. The computer server system is configured to receive the validation data validate an account of the user receive the gate identifier and debit the account of the user. The computer server system is further configured to transmit a signal to a gate entry device associated with the gate identifier to grant the user passage through the paid entry gate.

In another embodiment a method for processing a user through a paid entry gate using a mobile device is presented. The method includes transmitting a first beacon packet from a first wireless beacon to the mobile device in a first area. An account of the user is validated after transmitting the first beacon packet. A second beacon packet is transmitted from a second wireless beacon to the mobile device in a second area that is closer to the paid entry gate than the first area. A transaction is conducted after transmitting the second beacon packet. The transaction includes debiting the account of the user and granting passage through the paid entry gate.

In a further embodiment a non transitory computer readable medium is presented. The non transitory computer readable medium has instructions stored therein which when executed cause a computer to perform a set of operations including receiving a first beacon packet from a first wireless beacon and validating an account of a user in response to receiving the first beacon packet. Further operations include receiving a second beacon packet from a second wireless beacon debiting the account of the user in response to receiving the second beacon packet and transmitting a signal wirelessly to a gate entry device that causes the gate entry device to grant passage through a paid entry gate.

The ensuing description provides preferred exemplary embodiment s only and is not intended to limit the scope applicability or configuration of the disclosure. Rather the ensuing description of the preferred exemplary embodiment s will provide those skilled in the art with an enabling description for implementing a preferred exemplary embodiment. It is understood that various changes may be made in the function and arrangement of elements without departing from the spirit and scope as set forth in the appended claims. Further when a particular feature structure or characteristic is described in connection with an embodiment it is submitted that it is within the knowledge of one skilled in the art to effect such feature structure or characteristic in connection with other embodiments whether or not explicitly described.

Gate entry devices such as turnstiles can be placed at entry gates for controlling access to restricted areas. A payment device such as a coin collector or card reader can be used in conjunction with a gate entry device to effectively consolidate the fee collection and access granting processes to a single location. This can save time for users that are seeking access to the restricted area by eliminating the need to go to a separate location such as a ticket office to make payment. However the single point of transaction can also create a bottleneck in the processing of users through the gate. For example a user that does not have payment ready at the gate can hold up all of the users following behind. Furthermore some forms of payment such as credit cards can take a relatively long time to validate and process.

Embodiments of the present invention use wireless beacons for payment collection to increase the processing rate of users going through a paid entry gate. A long range wireless beacon transmits a beacon packet in an area that is relatively distant from the entry gate and a short range wireless beacon transmits a beacon packet in an area that is relatively close to the entry gate. A mobile device receives the beacon packet from the long range wireless beacon and begins the validation process for an account that is used for payment. When the beacon packet from the short range wireless beacon is received the account is debited and passage is granted through the paid entry gate.

In this embodiment the system includes two long range wireless beacons placed in an area that users would go through to reach the entry gate. Long range wireless beacons are equipped with omnidirectional antennas and the wireless signals from beacons cover a relatively large area. While only two long range wireless beacons are depicted in for the sake of clarity the system can include any number of long range wireless beacons .

The system also includes eight short range wireless beacons placed at the entry gate although only two of the eight beacons are labeled in for the sake of clarity. In this embodiment radio frequency RF blocking shielding plates are placed behind short range wireless beacons so that the wireless signals generated by beacons have limited directions of dispersion. In other embodiments short range wireless beacons can be equipped with directional antennas that disperse wireless signals in a narrow beam or dipole antennas that disperse wireless signals in a figure eight pattern.

In this embodiment the wireless signals from long range wireless beacons cover a greater area than short range wireless beacons . However this is not necessary in other embodiments. Rather the terms long range and short range refers to the relative distance from the entry gate that the signals from beacons and can reach. Thus long range wireless beacons transmit beacon packets to an area that is relatively distant from the entry gate and short range wireless beacons transmit beacon packets to an area that is relatively close to the entry gate. Beacons and can be Bluetooth low energy BLE beacons or use other wireless communication technologies such as Wi Fi. In one embodiment beacons and are BLE beacons that transmit beacon packets in advertising mode and use a traditional non advertising mode Bluetooth connection for other types of data exchange such as time synchronization. To save in equipment costs long range wireless beacons can transmit at a higher power level than short range wireless beacons so that the beacon packets can be received at farther distances from the beacons .

Mobile device can receive the beacon packets that are transmitted by beacons and . Each beacon packet can include some form of an identifier that uniquely identifies the transmitting beacon so that the beacon packets transmitted by long range wireless beacons can be distinguished from the beacon packets transmitted by short range wireless beacons . Additionally to prevent pranksters and hackers from sabotaging the system the beacon packets can be encrypted by a message authentication code MAC and each beacon packet can include the MAC. The encryption can be a public key encryption so that everyone can verify the authenticity of the beacon packets but only the beacons can generate the encrypted beacon packets. To prevent re play attacks the beacon packets can further include time and date stamps so that captured messages are not valid if retransmitted at a later time.

Mobile device also communicates with computer server system . In this embodiment communications are established via cell tower and internet using wireless telecommunications protocols such as 3G or 4G. In other embodiments mobile device can communicate with computer server system via a router and a private network using protocols such as Wi Fi.

Computer server system further communicates with gate entry device which can be a turnstile or some other form of access control device. In this embodiment gate entry device is an optical turnstile that uses optical sensors such as infrared sensors to detect users passing through the gate. When valid payment is received gate entry device can grant a user passage through the entry gate by generating some form of sensory notification such as a visual notification in the form of a green colored light or an audible notification in the form of speech or sound. On the other hand if the sensors detect that a person has gone through the entry gate and payment has not been received a red colored light or an alarm can be generated to notify the user or nearby authorities.

To collect payment mobile device can start validating an account when a beacon packet from a long range wireless beacon is received. Validating the account can include transmitting an authorization request to a payment processor for credit card or debit card accounts or checking the balance of the account. Mobile device can perform the validation itself or transmit validation data to computer server system that causes computer server system to perform the validation. By starting the validation process before the user reaches the gate there is less delay at the gate and the user can be quickly processed through the gate. When the user reaches the gate and a beacon packet from short range wireless beacon is received the account can be debited and a signal can be transmitted to gate entry device to grant passage to the user. Additional details for collecting payment are described herein below with reference to .

At block the mobile device receives a long range beacon packet from a long range wireless beacon. In response to receiving the long range beacon packet an application is woken up at block . In one embodiment the application registers the identifier of the long range wireless beacons with the operating system of the mobile device and the operating system wakes up the application when the long range beacon packet is received. The operating system can wake up the application by launching the application into a background execution state if the application is not running or suspended when the long range beacon packet is received. The application can then generate a notification to the user while executing in the background by for example vibrating the mobile device generating a sound activating a light source or displaying a message and the user can launch the application s user interface after receiving the notification. In another embodiment the application is executing in the background and listening for the long range beacon packet. The application wakes up after receiving the long range beacon packet by launching the user interface.

In one embodiment after the application is woken the user interface can display a dialogue box or message that queries the user to authorize the transaction. The user can authorize the transaction by selecting a button entering a password or using biometric information such as a fingerprint if the mobile device is equipped with biometric sensors. If the user authorizes the transaction validation data is transmitted to the computer server system at block . The validation data can include account information such as the account number expiration date and billing address. The validation data can also include transaction information such as the transaction amount and the location venue or station that the mobile device is located at. The mobile device can determine this information from data that is contained in the beacon packet or through other sources such as a global positioning system or the internet.

In other embodiments the application can transmit the validation data without querying the user. For example if the application is running in the background or launched into the background when the long range beacon packet is received the application can transmit validation data for a default payment account that was preselected by the user to the computer server system without displaying the user interface. The user interface can allow the user to select the default payment account from several accounts stored on the mobile device or enter the account information for the default payment account which can be for example a credit card bank account or transit account.

The default payment account information can also be stored at the computer server system. In one embodiment the default account information is stored in a database at the computer server system and the database is indexed by a unique identification of the user or the mobile device. The mobile device can transmit this unique identification as the validation data to the computer server system and the computer sever system can retrieve the default account information for validation by querying the database using the unique identification.

At block the mobile device receives a short range beacon packet from a short range wireless beacon. In this embodiment the short range beacon packet includes a gate identifier that indicates an entry gate that the short range wireless beacon is located at. After receiving the short range beacon packet including the gate identifier the mobile device transmits the gate identifier to the computer server system at block .

Referring now to the computer server system at block the validation data is received from the mobile device. In response to receiving the validation data the computer server system validates the account that will be used for payment at block . If the account is a credit card or debit card account validating the account can include transmitting an authorization request for the account to a payment processor. If the account is maintained by the computer server system or the computer server system has direct access to the account validating the account can include checking the balance of the account to ensure there are sufficient funds for payment. If the authorization request is denied or if the account does not have sufficient funds for payment the computer server system can transmit a notification to the mobile device and the mobile device can notify the user by for example vibrating generating a sound activating a light source or displaying a message.

At block the computer server system receives the gate identifier from the mobile device. In response to receiving the gate identifier the computer server system debits the account at block . If the account is a credit card or debit card account the transaction for debiting the account can be stored by the computer server system until the end of day or some other time when all stored transactions are transmitted to the payment processor in a batch. In other embodiments the account can be debited after validating the account at block and before the gate identifier is received at block . At block the user is granted passage through the entry gate by transmitting a signal to the entry gate device that is associated with the gate identifier. After processing the user through the entry gate the application executed on the mobile device can collect commercial coupons of interest to the device owner using longer range Bluetooth communications and knowledge of the users history including purchase history and prior coupon use history.

In other embodiments variations can be made to process while still achieving the same advantages. For example instead of receiving the short range beacon packet at block the mobile device can transmit a beacon packet e.g. BLE packet transmitted in advertising mode or some other wireless signal e.g. traditional Bluetooth packet or BLE packet transmitted in non advertising mode that includes the unique identifier of the user or the mobile device. The unique identifier is also transmitted to the computer server system and after the computer server system validates the account or debits the account the computer server system can transmit the unique identifier to the gate entry device. The gate entry device also includes a wireless receiver. When the beacon packet or wireless signal transmitted by the mobile device is received by the gate entry device passage can be granted based on a match between the identifier received from the mobile device and the identifier received from the computer server system.

In a further embodiment the process for collecting payment can be performed without the computer server system. For example the mobile device can perform the validation of the account by transmitting the authorization request to the payment processor or checking the account balance if the account is directly accessible e.g. the account is maintained on the computer server system and the application executed on the mobile device can access the account through an application programming interface or maintained on the mobile device. After validating the account the mobile device can transmit a beacon packet or wireless signal that includes a special code or some other data that causes the gate entry device to grant passage when received. For example the beacon packet or wireless signal can include a unique identification of the gate that the user is entering to ensure only that gate grants entry.

Computer processor utilizes wireless transceiver to communicate by transmitting and receiving data packets with other wireless transceiver devices. It will be understood that the wireless transceiver device can include additional components not shown in the figure. For example wireless transceiver device can include additional wireless transceivers that utilize different technologies for wireless communication or the different technologies can be combined into a single wireless transceiver. Different wireless communication technologies include Bluetooth BLE Wi Fi near field communication NFC and 3G 4G mobile communication. Additionally or alternatively different embodiments may combine separate omit and or rearrange the components shown in .

Although embodiments provided herein describe the use of Bluetooth and in particular BLE embodiments are not so limited. Concepts provided herein may be extended to other wireless technologies. Furthermore embodiments herein can be implemented in a wide range of wireless devices and or work with a wide range of software applications and or operating systems.

Also it is noted that the embodiments may be described as a process which is depicted as a flowchart a flow diagram a swim diagram a data flow diagram a structure diagram or a block diagram. Although a depiction may describe the operations as a sequential process many of the operations can be performed in parallel or concurrently. In addition the order of the operations may be re arranged. A process is terminated when its operations are completed but could have additional steps not included in the figure. A process may correspond to a method a function a procedure a subroutine a subprogram etc. When a process corresponds to a function its termination corresponds to a return of the function to the calling function or the main function.

Furthermore embodiments may be implemented by hardware software scripting languages firmware middleware microcode hardware description languages and or any combination thereof. For a hardware implementation the processing units may be implemented within one or more application specific integrated circuits ASICs digital signal processors DSPs digital signal processing devices DSPDs programmable logic devices PLDs field programmable gate arrays FPGAs processors controllers micro controllers microprocessors other electronic units designed to perform the functions described above and or a combination thereof.

For a firmware and or software implementation the methodologies may be implemented with modules e.g. procedures functions and so on that perform the functions described herein. Any machine readable medium tangibly embodying instructions may be used in implementing the methodologies described herein. For example software codes may be stored in a memory. Memory may be implemented within the processor or external to the processor. As used herein the term memory refers to any type of long term short term volatile nonvolatile or other storage medium and is not to be limited to any particular type of memory or number of memories or type of media upon which memory is stored.

Moreover as disclosed herein the term storage medium may represent one or more memories for storing data including read only memory ROM random access memory RAM magnetic RAM core memory magnetic disk storage mediums optical storage mediums flash memory devices and or other machine readable mediums for storing information. The term machine readable medium includes but is not limited to portable or fixed storage devices optical storage devices wireless channels and or various other storage mediums capable of storing that contain or carry instruction s and or data.

While the principles of the disclosure have been described above in connection with specific apparatuses and methods it is to be clearly understood that this description is made only by way of example and not as limitation on the scope of the disclosure.

