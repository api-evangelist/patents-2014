---

title: Systems and methods for providing power savings and interference mitigation on physical transmission media
abstract: Systems and methods for providing power savings and interference mitigation on physical transmission media are disclosed. Exemplary aspects include the ability to change physical layer (PHY) configurations based on operating conditions. By changing the PHY configuration, power consumption and electromagnetic interference (EMI) may be reduced. Still other operating conditions may be used to initiate switching between different PHYs. In another exemplary aspect, parameters of the PHY, such as slew rate, may be modified based on operating conditions to save power and/or reduce interference.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09652020&OS=09652020&RS=09652020
owner: QUALCOMM Incorporated
number: 09652020
owner_city: San Diego
owner_country: US
publication_date: 20140618
---
The technology of the disclosure relates generally to physical transmission media and particularly to a physical layer PHY within a protocol stack.

Computing devices are prevalent in contemporary society. Such computing devices benefit from an increasing array of functionality being made available by virtue of increasingly complex integrated circuits. Such integrated circuits may be positioned on a printed circuit board and interconnected through non transitory conductive elements for example physical traces. Signals are routed onto these physical traces according to variations of the Open System Interconnection OSI model. The OSI model defines various abstraction layers which encapsulate a digital payload. The lowest level of the model is the physical layer or PHY which is responsible for converting the digital bit stream into an analog or pseudo analog signal capable of being transmitted on the physical trace. While such communication may take place between integrated circuits on the printed circuit board smaller scale physical traces may exist within the integrated circuit and may also have OSI stacks with their own PHY associated with signals routed across these interior traces.

Different PHY may have different rules associated therewith. For example one PHY may have predefined voltage levels larger or smaller than a second PHY. Circuit designers may choose a particular PHY based on assumptions about how the circuit will operate within a computing device. For example if a relatively short distance is traversed by a physical trace a lower power PHY may be selected as compared to situations in which a longer trace must be traversed.

However it is not uncommon for a single integrated circuit to be used in multiple different environments. For example such an integrated circuit may be used in a smart phone as well as a tablet. While the integrated circuit may use a PHY optimized for one environment based on the assumptions of the designer the PHY may not be optimized for the second environment. Likewise even within a single environment there may be environmental or operational circumstances which change the operating conditions of the traces and make a particular PHY more or less attractive. For example if a transceiver with a high speed frequency synthesizer is selectively activated and put to sleep the frequency synthesizer may create electromagnetic interference EMI in the environment of the traces via conductive or radiated means but only when the frequency synthesizer is active. Likewise the signals on the traces may act as EMI aggressors for other elements within the computing device. Accordingly there is a need to be able to improve the flexibility of the PHY after installation within a computing device.

Aspects disclosed in the detailed description include systems and methods for providing power savings and interference mitigation on physical transmission media. Exemplary non limiting aspects include the ability to change physical layer PHY configurations based on operating conditions. By changing the PHY configuration power consumption and electromagnetic interference EMI may be reduced. For example if there is no EMI risk a PHY with a lower voltage swing signal may be sent across a physical conductor. Conversely if there is substantial EMI risk a PHY with high voltage swing signals may be used. However even though a higher voltage signal PHY may be used there may be a net power savings because signals may avoid being resent according to error correction protocols. Still other operating conditions may be used to initiate switching between different PHYs. For example the PHY may be changed so that the physical conductor does not function as an EMI aggressor within the computing device. In another exemplary aspect parameters of the PHY such as slew rate may be modified based on operating conditions to save power and or reduce interference. It should be appreciated as used herein changing a PHY configuration includes changing between different PHY as well as changing a parameter of the PHY.

In this regard in one aspect a computing device is disclosed. The computing device comprises a system on a chip SOC . The SOC comprises an interface comprising one or more pins coupled to a physical conductor. The SOC also comprises a configuration controller associated with the interface. The computing device also comprises a coexistence manager communicatively coupled to the configuration controller. The coexistence manager detects operating conditions on the physical conductor and instructs the configuration controller to change PHY configurations for the interface based on changes in the operating conditions.

In another aspect a SOC is disclosed. The SOC comprises an interface comprising one or more pins coupled to a physical conductor. The SOC also comprises a configuration controller associated with the interface configured to change PHY configurations for the interface based on changes in operating conditions.

In another aspect a method of controlling data transmission in a computing device is disclosed. The method comprises detecting initial operating conditions within a computing device with a coexistence manager. The method also comprises instructing a configuration controller in a SOC to operate according to a first PHY configuration. The method also comprises detecting subsequent operating conditions within the computing device. The method also comprises instructing the configuration controller to change the first PHY configuration to a second PHY configuration based on the subsequent operating conditions.

In another aspect a method of controlling data transmission in a computing device is disclosed. The method comprises receiving at a configuration controller within a SOC an instruction to operate according to a PHY configuration. The method also comprises receiving at the configuration controller a subsequent instruction to change the PHY configuration based on subsequent operating conditions.

With reference now to the drawing figures several exemplary aspects of the present disclosure are described. The word exemplary is used herein to mean serving as an example instance or illustration. Any aspect described herein as exemplary is not necessarily to be construed as preferred or advantageous over other aspects.

Aspects disclosed in the detailed description include systems and methods for providing power savings and interference mitigation on physical transmission media. Exemplary non limiting aspects include the ability to change physical layer PHY configurations based on operating conditions. By changing the PHY configuration power consumption and electromagnetic interference EMI may be reduced. For example if there is no EMI risk a PHY with a lower voltage swing signal may be sent across a physical conductor. Conversely if there is substantial EMI risk a PHY with high voltage swing signals may be used. However even though a higher voltage signal PHY may be used there may be a net power savings because signals may avoid being resent according to error correction protocols. Still other operating conditions may be used to initiate switching between different PHYs. For example the PHY may be changed so that the physical conductor does not function as an EMI aggressor within the computing device. In another exemplary aspect parameters of the PHY such as slew rate may be modified based on operating conditions to save power and or reduce interference. It should be appreciated as used herein changing a PHY configuration includes changing between different PHY as well as changing a parameter of the PHY.

Exemplary aspects of the present disclosure are well suited for application with chip to chip i.e. interchip communication over a physical conductor that may be positioned on a printed circuit board. This exemplary aspect is discussed below with reference to . However the present disclosure is not so limited and exemplary aspects are also applicable to intrachip communication e.g. internal data buses within an integrated circuit sometimes referred to as a chip herein or package containing integrated circuits. This exemplary aspect is discussed below with reference to . In particular aspects of the present disclosure evaluate operating conditions associated with physical conductors that convey signals between a transmitter and receiver whether it be interchip or intrachip and provide instructions to change PHY configuration so as to compensate for operating conditions. In a first aspect changing the configuration comprises changing PHYs and in a second aspect changing the configuration comprises changing a parameter associated with a PHY. Evaluation of the operating conditions may include evaluation of static conditions such as the type of computing device into which the transmitter has been positioned and the length of the physical conductor over which signals must be transmitted as well as dynamic conditions such as whether there are EMI concerns whether power can be conserved or the like. Various ones of these processes are discussed with reference to .

A further note about nomenclature is appropriate. While a PHY may have a protocol such as 8b10b or other encoding exemplary aspects of the present disclosure are PHY protocol agnostic and the term protocol may be understood as being used for an application protocol such as for the peripheral component interconnect PCI express PCIe protocol or universal serial bus USB protocol which relates to applications and their management in the context of an operating system application programming interfaces software driver and the like. Therefore the present disclosure distinguishes between a PHY protocol and application protocol by referring to the first as PHY and the second as protocol.

In this regard is a simplified block diagram of a computing device with a first system on a chip SOC and a second SOC each of which is coupled to transmission media . The transmission media are a plurality of physical conductors such as traces on a printed circuit board copper line or the like. While not illustrated specifically each SOC is an integrated circuit that may be soldered to a printed circuit board or inserted into a socket on the printed circuit board. Inputs and outputs of such integrated circuits are provided through pins or balls as is well understood. The pins or balls are electrically or capacitively coupled to channels or lanes within the transmission media as is well understood. Each physical trace within the transmission media may be electrically coupled to a different pin or ball on the integrated circuit of the SOC . The SOC has an interface with a transmitter TX and a receiver RX associated therewith. The transmitter is electrically coupled to and drives pins coupled to conductors within a transmission path the receiver is electrically coupled to and receives signals from pins coupled to conductors within a receiving path . It should be appreciated that the transmission path may include a data channel a clock a power line a ground sideband signals and other data channels as is well understood. Similarly the receiving path may contain similar channels. In an exemplary aspect transmission and reception may be combined onto a single set of conductors such as through a time division multiplexing TDM or half duplex arrangement where transmission direction may be reversed. Likewise it should be appreciated that data channels may be differential data conductors or single ended data conductors or even multi wire conductors such as three phase transmission as is well understood.

With continued reference to the interface is coupled to a multimode PHY module that includes a plurality of PHY drivers only two shown and . It should be appreciated that as used herein the term driver is meant to include their reciprocating receivers given that an interface may consist generally of bidirectional communication. While only two PHY drivers are shown the present disclosure is not so limited and is scalable to any number of PHY drivers . In an exemplary aspect a multiplexer MUX not shown controls which PHY driver is actively driving the interface . The multimode PHY module may further include an optional PHY configuration and control module labeled PHY config control in . The PHY configuration and control module may be used to control the MUX if present as well as to modify various operational parameters of a given PHY driver as will be explained in greater detail below.

With continued reference to the multimode PHY module is coupled to a multimode controller module . The multimode controller module may include a plurality of protocol link controllers one for each of the respective PHY drivers . Thus as illustrated the multimode controller module includes link controllers and . The multimode controller module may further include an optional multimode configuration and control module sometimes referred to herein as a configuration controller . The multimode configuration and control module may indicate which link controller is active or may otherwise control the link controllers .

With continued reference to the SOC may also include a master configuration and control processor sometimes referred to herein as a configuration controller . The master configuration and control processor may perform the functions of the PHY configuration and control module and or the multimode configuration and control module if either is not present. Alternatively the master configuration and control processor may instruct the PHY configuration and control module and or the multimode configuration and control module to control respective elements as further explained in greater detail below. The master configuration and control processor is communicatively coupled to a coexistence manager CxM . An exemplary function of the CxM is to optimize the performance and other aspects of wired and wireless transmissions within the device in a harmonious fashion to enable maximum coexistence of entity operations as further explained in greater detail below. The CxM may have a memory element associated therewith that has a database DB stored therein.

With continued reference to the CxM receives information about the operating conditions of the computing device and or particular information about the transmission media and compares this information to information within the DB . Based on whether the operating conditions match or exceed predefined thresholds or criteria the CxM instructs the master configuration and control processor to switch between PHY drivers to change the PHY configuration or modify operation of a particular PHY driver to change the PHY configuration as explained in greater detail below.

With continued reference to the receiver receives signals and processes them according to the active PHY before passing them to the corresponding link controller for use within the SOC . It should be appreciated that the SOC may be substantially similar to the SOC and can send and receive signals across the transmission media according to exemplary aspects of the present disclosure.

In an exemplary aspect the CxM may determine that one PHY is better suited for current operating conditions and instruct the master configuration and control processor to use the indicated PHY by operation of the appropriate PHY driver . The operating conditions may be static conditions such as an installation factor. For example regarding the installation factor certain PHY may be appropriate for use in tablet devices and a different PHY may be appropriate for use in a smaller device such as a smart phone.

In an exemplary aspect such changes may be between different related PHY for a given protocol. Thus in an exemplary aspect a first PHY might be the PHY for the PCIe protocol referred to as the PCIe PHY and a second PHY might be the PHY for the mobile PCIe M PCIe protocol i.e. PCIe PHY and M PCIe PHY represent different related PHY for the PCIe protocol i.e. that are capable of transporting the PCIe protocol . The higher voltage swings of the PCIe PHY may be appropriate for use with the longer transmission media within a tablet and the lower voltage swings of the M PCIe PHY may be appropriate for use with the shorter transmission media of a smart phone.

In another exemplary aspect such changes in the PHY configuration may be changing between different unrelated PHY. For example a first PHY might be a PCIe PHY and a second PHY might be a USB PHY. Again particular attributes of the PHY may make one PHY better suited for use with longer transmission media within a tablet or shorter transmission media for a smart phone.

While static conditions such as an installation factor may be evaluated during manufacture or at startup of the computing device other operating conditions may be dynamic and may thus be evaluated dynamically. For example activation of a proximate USB data transmission may generate substantial electromagnetic interference EMI from the transmission media as an aggressor and a more robust PHY in a neighboring transmission media may be selected to compensate for the aggressor. In another exemplary aspect activation of a wireless transmitter e.g. a cellular modem within the computing device may as an aggressor generate substantial EMI on the transmission media and a more robust PHY may be selected to compensate for the aggressor. In another exemplary aspect external aggressors such as a nearby cable with a television signal thereon a printer printing or such a device may create EMI on the transmission media and a more robust PHY may be selected to compensate for the aggressors. Accordingly such dynamic conditions such as an EMI value of any aggressor which may be represented by an increase in noise characteristics of the receiver PHY may be evaluated and an appropriate PHY configuration selected where the PHY configuration is in this case switching between different PHY e.g. PCIe to USB . Note that the aggressors are not mutually exclusive and multiple aggressors may combine such that a different PHY is required based on a composite EMI value. In still another exemplary aspect a high voltage PHY may create electromagnetic compatibility EMC issues for other elements within the computing device . Some values from such EMC issues may be evaluated and an appropriate PHY selected. For example operation on a high voltage PCIe PHY may create an impact in the wireless transmitter of the cellular modem that can be eliminated by using the lower voltage swing of the M PCIe PHY.

As alluded to above the DB stores various threshold and predefined criteria which when met cause the CxM to instruct the master configuration and control processor to change PHY configurations. While completely changing PHY is one solution the present disclosure is not so limited. In exemplary aspects parameters within the PHY may be adjusted to compensate for operating conditions. For example a voltage amplitude also known as the launch amplitude a transmission voltage slew rate or simply slew rate and or data encoding such as 8b10b encoding may be varied within a PHY to optimize operation of the transmissions on the transmission media . Optimization may be completed to minimize one or more of power consumption error rates of transmission EMI EMC impacts or other criterion as needed or desired.

With continued reference to it should be appreciated that not only does the adaptation layer pass adapted signals to the protocol link controller but also the protocol link controller may pass signals to the adaptation layer where aspects of the second PHY are added to encapsulate the PCIe protocol within the stack within the PHY of the second PHY. This two way communication is denoted generally by arrow . Regardless of whether the signal came from the adaptation layer or the first PHY driver the protocol link controller may pass the signals to the rest of the SoC as generally indicated by arrow .

Similar to the computing device of the computing device with SoC of controls the PHY configuration on the internal bus but may further include an adaptation layer that operates to remove aspects of a PHY to reveal an underlying protocol. In this regard the adaptation layer is similar to the adaptation layer but works for the internal bus instead of or in addition to the transmission media .

In short aspects of the present disclosure allow the CxM to evaluate operating conditions either static or dynamic during manufacturing installation at start up or during normal operations of the computing devices or and ascertain if a change in the PHY configuration is appropriate by comparing the operating conditions to data stored in the DB in the memory element . By providing the SOCs of with multiple PHY the SOCs may be used in both smart phones and tablets i.e. different system configurations and pick an appropriate PHY based on the device into which the SOCs are placed. Likewise the CxM may compensate for EMI EMC issues. Allowing such flexibility allows pins on the SOC the opportunity to be shared reused which results in cost savings savings in silicon area savings in board area and general cost savings as the SOC does not require two separate interfaces with their dedicated PHY for essentially the same interface function. Even when the pins are not reused the EMI EMC benefits of being able to change PHY configurations have value. Still further the selection of the PHY may be done to select the lowest power interface that still meets other design criteria e.g. bit error rate below a predefined threshold . Still further it should be appreciated that these changes may be done on a per lane basis within the transmission media . For example PCIe has multiple data lanes defined in its standard. Different data lanes may use different PHY according to the operational needs of the computing devices .

The DB may be updated or patched to reflect software and operating changes within the computing devices . For example while the computing device is in a debug mode one set of threshold criteria may be used and then replaced with more lenient or more stringent criteria and thresholds for normal operation. Note that regardless of when the change in PHY configuration occurs there may be a signaling protocol that alerts the receiving second SOC of that the PHY is about to change. This change signal may be a proprietary signal or standardized as needed or desired.

The generic process for the present disclosure is provided with reference to followed by specific examples in . In this regard illustrates a process that begins with the installation of a SOC with multiple PHY block . The multiple PHY may be interchip PHY or intrachip PHY or both . The process continues with the CxM detecting the operating conditions block . The operating conditions may include system configuration be a function of time be a function of application detection of possible or probable EMI EMC or the like. The CxM compares the detected operating conditions to the predefined data stored in the DB block . The CxM may then select an appropriate PHY based on the comparison block . The CxM may then instruct the master configuration and control processor to use the selected PHY block . This instruction may mean that the PHY changes or may mean that an initially selected PHY is used. Once a PHY is selected the operating conditions may be evaluated again and aspects or parameters of the PHY may be controlled with appropriate instruction from the CxM to the master configuration and control processor block . Control of aspects or parameters of the PHY may include voltage levels a transmission slew rate encoding or other attribute of the PHY. Note that block may be combined with block if appropriate and may or may not involve an additional detection of the operating conditions.

While describes the generic process describe specific situations to assist the reader in understanding nuances associated with exemplary aspects of the present disclosure. In particular illustrates a process . The process begins with the original equipment manufacturer OEM setting the policy in the DB for PHY to indicate connectorized PCIe block . This setting indicates that if the interface is set to PCI and a cable or connector is detected then PCIe PHY should be used.

With continued reference to the process continues with the interface being connected to a debug connector and cable used to connect to a remote receiver block . The CxM detects the presence of the cable and compares this operating condition to the DB block . Based on the OEM setting in the DB i.e. the presence of the cable the CxM selects PCIe PHY block .

With continued reference to the debugging is finished and the cable is then removed block . The SOC is then coupled to the SOC through relatively short transmission media block . The OEM may further program the DB to indicate chip to chip PCI uses M PCIe PHY block . The CxM detects the new operating condition of the cable removal and configures the PHY to use M PCIe PHY block .

The systems and methods for providing power savings or interference mitigation on physical transmission media according to aspects disclosed herein may be provided in or integrated into any processor based device. Examples without limitation include a set top box an entertainment unit a navigation device a communications device a fixed location data unit a mobile location data unit a mobile phone a cellular phone a computer a portable computer a desktop computer a personal digital assistant PDA a monitor a computer monitor a television a tuner a radio a satellite radio a music player a digital music player a portable music player a digital video player a video player a digital video disc DVD player and a portable digital video player.

In this regard illustrates an example of a processor based system that can employ the SOCs or that have multiple PHY capabilities illustrated in . In this example the processor based system includes one or more CPUs each including one or more processors . The CPU s may have cache memory coupled to the processor s for rapid access to temporarily stored data. The CPU s is coupled to a system bus and can intercouple devices included in the processor based system . The system bus may be the transmission media illustrated in . As is well known the CPU s communicates with these other devices by exchanging address control and data information over the system bus . For example the CPU s can communicate bus transaction requests to a memory system .

Other devices e.g. the SOC of can be connected to the system bus not shown in . As illustrated in these devices can include the memory system one or more input devices one or more output devices one or more network interface devices and one or more display controllers as examples. The input device s can include any type of input device including but not limited to input keys switches voice processors etc. The output device s can include any type of output device including but not limited to audio video other visual indicators etc. The network interface device s can be any devices configured to allow exchange of data to and from a network . The network can be any type of network including but not limited to a wired or wireless network a private or public network a local area network LAN a wide local area network WLAN and the Internet. The network interface device s can be configured to support any type of communication protocol desired.

The CPU s may also be configured to access the display controller s over the system bus to control information sent to one or more displays . The display controller s sends information to the display s to be displayed via one or more video processors which process the information to be displayed into a format suitable for the display s . The display s can include any type of display including but not limited to a cathode ray tube CRT a liquid crystal display LCD a plasma display etc.

Those of skill in the art will further appreciate that the various illustrative logical blocks modules circuits and algorithms described in connection with the aspects disclosed herein may be implemented as electronic hardware instructions stored in memory or in another computer readable medium and executed by a processor or other processing device or combinations of both. The devices described herein may be employed in any circuit hardware component integrated circuit IC or IC chip as examples. Memory disclosed herein may be any type and size of memory and may be configured to store any type of information desired. To clearly illustrate this interchangeability various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. How such functionality is implemented depends upon the particular application design choices and or design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present disclosure.

The various illustrative logical blocks modules and circuits described in connection with the aspects disclosed herein may be implemented or performed with a processor a Digital Signal Processor DSP an Application Specific Integrated Circuit ASIC a Field Programmable Gate Array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The aspects disclosed herein may be embodied in hardware and in instructions that are stored in hardware and may reside for example in Random Access Memory RAM flash memory Read Only Memory ROM Electrically Programmable ROM EPROM Electrically Erasable Programmable ROM EEPROM registers a hard disk a removable disk a CD ROM or any other form of computer readable medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a remote station. In the alternative the processor and the storage medium may reside as discrete components in a remote station base station or server.

It is also noted that the operational steps described in any of the exemplary aspects herein are described to provide examples and discussion. The operations described may be performed in numerous different sequences other than the illustrated sequences. Furthermore operations described in a single operational step may actually be performed in a number of different steps. Additionally one or more operational steps discussed in the exemplary aspects may be combined. It is to be understood that the operational steps illustrated in the flow chart diagrams may be subject to numerous different modifications as will be readily apparent to one of skill in the art. Those of skill in the art will also understand that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

The previous description of the disclosure is provided to enable any person skilled in the art to make or use the disclosure. Various modifications to the disclosure will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other variations without departing from the spirit or scope of the disclosure. Thus the disclosure is not intended to be limited to the examples and designs described herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

