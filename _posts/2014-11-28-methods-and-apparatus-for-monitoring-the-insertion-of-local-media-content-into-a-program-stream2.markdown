---

title: Methods and apparatus for monitoring the insertion of local media content into a program stream
abstract: Methods and apparatus for monitoring locally inserted media content are disclosed. A disclosed method includes obtaining identification data and inserting the identification data in the media content after the media content has been received at a media consumption location. Another disclosed method includes receiving media content before the media content is output by a consumer receiving device and monitoring the received media content. Monitoring the received media content may include extracting signatures from the received media content and transmitting the extracted signatures to another location.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09544622&OS=09544622&RS=09544622
owner: The Nielsen Company (US), LLC
number: 09544622
owner_city: New York
owner_country: US
publication_date: 20141128
---
This patent is a continuation of U.S. patent application Ser. No. 11 618 245 filed Dec. 29 2006 which is a continuation of PCT Patent Application Serial No. PCT US2005 026426 filed on Jul. 25 2005 which claims the benefit of U.S. provisional application Ser. No. 60 590 626 filed Jul. 23 2004. U.S. patent application Ser. No. 11 618 245 PCT Patent Application Serial No. PCT US2005 026426 and U.S. provisional application Ser. No. 60 590 626 are hereby incorporated by reference herein in their entirety.

The present disclosure pertains to audience measurement and more particularly to methods and apparatus for monitoring broadcast content including locally inserted media content.

The Society of Cable and Telecommunications Engineers SCTE is creating standards to define a method for seamlessly splicing different segments of digital content into a stream of digital data such as a broadcast program stream e.g. a Digital Program Insertion standard DPI . These standards may enable a media provider e.g. a television radio or Internet provider to personalize and or customize programming according to a consumer s tastes and preferences based on demographic data and the consumer s choices. For example a digital bit stream containing television data may be received at a set top box STB or other receiving device at an end user s location and may contain digital indicators and or cues to indicate a splicing point e.g. a point in the program where digital content may be spliced . The STB may analyze the viewer s interests and or demographic data and splice into the digital bit stream an appropriate advertisement and or some other programming e.g. special interest shows and or informative messages previously stored in the STB or received by the STB via a second digital bit stream. In other examples the locally inserted content is not tied to the preferences of a particular end user but is instead inserted for universal broadcast for broadcast in a limited geographical area etc.

This potential splicing activity presents a special challenge to audience measurement. As used herein audience measurement includes audience size and or demographic measurement content verification commercial verification program lineup verification and content tracking for any type of media e.g. television digital analog cable VOD and or satellite radio Internet etc. . Traditional content identification methods may not be sufficient to monitor such splicing activities. For example a traditional method for television audience measurement monitors a television tuning status for channel identification and uses verified as run logs e.g. lists of television programs correlated with the television channels on which the television programs were broadcast and the times at which the television programs were broadcast from networks and or other programming sources to determine the identity of the television programming viewed. This method assumes that the viewed media content has not been altered either before or during distribution because if such alterations were to occur the program logs may no longer accurately reflect the actual content that was received displayed and viewed at a home.

More specifically the use of splicing as defined in standards such as the DPI standard may allow television programming to be customized at a cable head end at the end user s location or elsewhere in the distribution chain. As a result of such customization the as run logs may become inaccurate. Specifically because the as run logs are not designed to reflect the customization provided by local program insertion the as run logs may not accurately correlate program data and or channel time cross references and thus the as run logs cannot be relied upon to accurately identify the media content consumed at an end user s location.

In the following content that originates at the very start of the media distribution system will be referred to as primary content. Media added i.e. inserted appended etc. to primary content anywhere along the media distribution chain will be referred to as locally inserted content. 

In general the disclosed audience measurement system of is adapted to monitor locally inserted media content presented on an information presenting device and to monitor primary content in which local media content may be inserted. In other words the disclosed methods and systems identify content e.g. a television program a radio program etc. presented by a monitored information presenting device e.g. a television a radio a stereo a computer etc. whether the content is locally inserted anywhere along the media distribution chain or originated at the head end of the media distribution chain. In addition to collecting data reflecting the identity of the content primary and or locally inserted presented by an information presenting device the disclosed methods and systems may also gather audience identification data to enable the creation of ratings information.

Before describing modifications employed to enable monitoring and identification of locally inserted content the following describes a known media content distribution system which may be monitored by a conventional audience measurement system .

The post production site is a system configured to edit and transmit primary content . The post production site includes an editing station to edit primary content one or more local content insertion module s to insert local media content into the primary content and a post production transmitter .

The primary content may be any form of media content such as recorded programs intended to be broadcast by for example a cable satellite and or terrestrial television network a VOD system and or a radio station. The primary content may be for example a television situational comedy a news show a television drama a cartoon a web page an advertisement a commercial an audio program interactive content a movie etc. The primary content may also be referred to as traditional content or original content. 

The editing station may be any apparatus to edit and or compile the primary content . The editing station may be used to perform any of a number of editing functions such as for example adjusting sound levels in the primary content adjusting video quality and or other characteristics in the primary content removing or modifying segments of the primary content etc. The editing station may also be configured to compile segments of the primary content e.g. joining multiple segments of primary content and or to associate a first segment of primary content with a different segment of primary content e.g. associating a soundtrack with a video segment .

In the illustrated example the post production transmitter receives the primary content from the editing station and transmits the primary content and any inserted local content to one or more major media distribution point s . The post production transmitter is configured to transmit the output of the editing station possibly after adding local media content via local content insertion module s using any known transmission technique. For example the data may be transmitted via a satellite connection a wired connection e.g. a network a dedicated connection the Public Switched Telephone Network PSTN the Internet etc. and or a wireless connection. A person of ordinary skill in the art will readily appreciate that the post production transmitter may be implemented using any known apparatus and methods and thus is not described in further detail herein.

In the illustrated example the local content insertion module s are configured to insert append or otherwise attach local media content into the primary content received by the editing station and or the post production transmitter . In other words the local content insertion module s may be associated with either or both of the editing station and the post production transmitter . The local content insertion module s may operate in accordance with a standard such as the DPI standard to splice and or multiplex the local media content into the received primary content . The local media content may be stored in the local content insertion module s or in another device coupled to the local content insertion module s . Methods to splice and or multiplex local media content into the received primary content are well known to persons of ordinary skill in the art and are not further described herein. The local content insertion module s may be structured to insert specific segments or programs e.g. local media content into the received primary content at specific locations or non specified locations based on user instructions or based on predetermined values e.g. rules driven by received demographic information etc. The local media content may be updated periodically by software manually by a user and or downloaded.

In the illustrated example the major media distribution point s e.g. a cable head end and or a television network or local affiliate are configured to receive media content signals e.g. the primary content possibly containing local media content added at the post production site from the post production site and or other sources of media content and to distribute the media content signal to one or more viewer s home s . The major media distribution point of the illustrated example includes a major distribution point receiver one or more local content insertion module s and a major distribution point transmitter .

The major distribution point receiver is configured to receive the output of the post production site . To this end the major distribution point receiver is configured to receive signals transmitted in the format employed by the post production transmitter .

In the illustrated example the local content insertion module s are configured to insert local media content into the media content stream signal received by the major distribution point receiver and or into the signal received by the major distribution point transmitter . In other words the local content insertion module s may be associated with either or both of the major distribution point receiver and the major distribution point transmitter . The local content insertion module s are similar to the local content insertion module s in the post production site .

In the illustrated example the major distribution point transmitter is configured to distribute the received media content stream possibly including additional inserted local content to a plurality of end users. The major distribution point transmitter is configured to transmit the media content stream signal using any known broadcast technique such as a digital and or analog radio or television broadcast whether it be a terrestrial broadcast a satellite broadcast a cable transmission an Internet broadcast a VOD system etc. The major distribution point transmitter may also be configured to convert the format of the received media content stream before the media content stream is transmitted. For example the received media content stream may be in an analog format but may be converted to a compressed digital format such as MPEG before being transmitted. A person of ordinary skill in the art will readily appreciate that the major distribution point transmitter may be implemented using apparatus and methods that are well known in the art and thus are not described in further detail herein.

The end user media distribution system of the illustrated example is configured to receive the media content stream from the major media distribution point and to transmit the received media content stream to one or more locations within a viewer s home e.g. one or more rooms information presenting devices televisions computers and or radios . The end user media distribution system of the illustrated example includes an end user entry point one or more local content insertion module s and an end user distribution network .

The end user entry point of the illustrated example is configured to receive the media content stream possibly containing content that was locally inserted at the post production site and or at the major media distribution point from the major media distribution point . Thus the end user entry point may be configured to receive a digital and or analog signal broadcast by a cable transmission system a satellite broadcast system a terrestrial broadcast system the Internet etc. The end user entry point may be implemented using a terrestrial antenna a satellite receiver dish an analog and or digital cable television input a modem etc.

The local content insertion module s of the illustrated example are configured to splice insert append and or multiplex local media content into the media content stream received by the end user entry point and or into the media content signal received by the end user distribution network . In other words a local content insertion module s may be associated with either or both of the end user entry point and the end user distribution network . The local content insertion module s are similar to the local content insertion module s .

As mentioned above the media content stream received at the end user media distribution system is distributed to various locations in the consumer s household e.g. to various information presenting devices within the home via the end user distribution network . The end user distribution network of the illustrated example may be implemented using wiring or wireless systems within the household to connect set top boxes STBs radios low noise block downconverters LNBs data networks computers televisions and or other information presenting devices to the end user entry point and or may be implemented using a local area network LAN and or another computer network which may be a wired and or a wireless network . In addition the end user distribution network may also include devices such as repeaters to amplify the media content signal if needed.

The STB of the illustrated example receives the media content signal from the end user distribution network and may be configured to process the media content stream so that it is presentable on the information presenting device . The illustrated STB receives an STB input signal and includes a demodulator a conditional access unit e.g. a Point of Deployment POD module a demultiplexer one or more local content insertion module s a storage device and a decoder .

The demodulator of the illustrated example is configured to receive the STB input signal from the end user media distribution network and to extract a viewer selected program from the STB input signal . The STB input signal may be a digital bit stream or data stream containing media content in a compressed digital format. For example in a digital cable television or satellite television system the demodulator is configured to extract a program stream associated with a viewer selected program from the STB input signal . A person of ordinary skill in the art will readily appreciate that methods to extract a program stream from an STB input signal are well known. The extracted program stream s may contain a video stream an audio stream and or a data stream. The video and or audio stream may not be viewable and or audible without first processing the extracted stream s .

The demultiplexer of the illustrated example is configured to separate the audio video and data of the program stream tuned by the demodulator . The local content insertion module s of the illustrated example are configured to splice insert append and or multiplex local media content into the media content stream received by the demultiplexer into the media content stream received by the conditional access unit and or into the media content stream received by the decoder . In other words the local content insertion module s may be associated with any or all of the demultiplexer the conditional access unit and the decoder . The local content insertion module s are similar to the local content insertion module s .

The conditional access unit of the illustrated example is configured to receive and if needed decrypt the audio video and data streams extracted by the demultiplexer . The conditional access unit of the illustrated example extracts keys from within the data stream and uses the keys and other locally stored data to decrypt the audio and or video stream s . A person of ordinary skill in the art will readily appreciate that processes for extraction of keys from the data stream and decryption of the audio and or video stream s are well known to those of ordinary skill in the art. The decrypted audio and or video stream s may not be in a format that is accessible by an information presenting device and may still be in a digital compressed format such as MPEG. Streams in the compressed format will be decoded by decoder . The audio and or video data streams are output from the conditional access unit to the storage device and or to the decoder .

The storage device of the illustrated example may be any device used to store digital and or analog data. For example the storage device may be implemented by one or more hard drives one or more compact disk CD drives one or more digital versatile disk DVD drives a random access memory RAM device a non volatile memory device e.g. flash memory and or any other storage device. The storage device may be configured to store the received media content stream and or may be used to store local media content that may be used by the local content insertion module s . The storage device can be broadband enabled and can receive local content through the Internet. For example the storage device may contain local content such as commercials tutorial videos special interest media content etc. that may be inserted into the received media content stream by the local content insertion module s . As with the other local media insertion modules of the local content may be randomly selected or may be selected based on a predetermined criterion e.g. based on the consumer s demographics interests previous selections choices etc. 

In the illustrated example the decoder receives the data audio and or video streams from the demultiplexer and or the storage device . The illustrated decoder is configured to decode and or decompress the data audio and or video streams so that the audio and or video content can be presented for consumption on the information presenting device and or on one or more other devices. The decoder may decode and or decompress the audio video and data streams so that the media content stream is in a usable format such as the National Television Systems Committee NTSC television signal format the phase alternating line PAL television signal format the Advanced Television Systems Committee ATSC format Moving Picture Experts Group MPEG format Digital Video Broadcasting DVB format the Digital Visual Interface DVI format the High Definition Multimedia Interface HDMI format etc. The decoded media content stream is output to the metering device and or to the information presenting device and or other display device s .

As mentioned above consumption of media distributed by the media content distribution system is monitored by the audience measurement system . The audience measurement system includes one or more metering device s . The illustrated metering device is configured to receive the decoded media content stream output by the STB to monitor the media content stream received by a monitored information presenting device e.g. a television a radio etc. . The metering device may monitor various features and or record various audience measurement data such as the tuning status of the information presenting device e.g. on off status channel tuned etc. program identification codes in one or more of the audio video and or data streams signatures i.e. data which is characteristic of the tuned signal or its content of one or more audio video and or data streams the identities or demographics of the audience members etc. The exact logical or electrical location of the communications path from the metering device to the information presenting device will vary depending on the implementation.

The metering device may be configured to generate audience measurement data using any known method s of monitoring a media content stream such as collecting watermark data obtaining signature representation s of the received signal or content and or extracting ancillary codes embedded in the media content stream. Metering devices such as the metering device are well known to those of ordinary skill in the art and will not be further described here.

The data collected by the metering device is transmitted to a data collection server via a network . The network may be any type of communications network such as the Internet a telephone network a cable network and or a wireless network.

In the following modifications to the known media distribution system and to the known audience measurement system of to enable metering of locally inserted content are described. In particular tag encoder s are added to the distribution system as shown in the examples of and a media monitoring device is added to the audience measurement system which is hereby referred to as the audience measurement system when the media monitoring device is included as shown in to detect and store identifying tags that have been embedded in the media data streams to identify locally inserted and or primary content. An example media monitoring device will be described in detail below.

The remote communications source and the local communications source are configured to gather data to be associated with the media content stream. The data provided by the remote and or local communications sources and might include an identifier for the media source i.e. physical location media production time date media topic etc. an identifier for the media broadcast method i.e. cable signal satellite signal terrestrial signal etc. and or an identifier for the media broadcast channel i.e. broadcast station call letters . The data received by the remote and or local communications sources and may additionally include log files local content description identification when and where local content has been inserted generated by the local content insertion modules and . The log files may contain details regarding which sections of the primary content have been replaced with local content and or the reasoning as to why the content was replaced. This data can be used to indicate that local content has been inserted and where that content was inserted. Data received from the remote communications source and or the local communications source is provided to the control system for processing. The local communications source may be any source of data associated with the media content such as for example a local computer storing identification data a person entering identification data or any other source of identification data. The remote communications source may be any type of data source that is not located at the same location as the example tag encoder . For example the remote communications source may any of the data sources example provided for the local communications source provided that data sources are located at a remote location such as a data collection center.

The control system is configured to process data received from the remote communications source and or the local communications source . The remote and or local communication sources and may transmit data that is related to media not currently being processed i.e. media that will be broadcast in the future and or to media that is currently being processed. In order to eliminate extraneous data the control system determines whether the data received is relevant to the current media content stream. If the data is determined not to be relevant it is ignored and or stored for future use. If the data is determined to be relevant the data is communicated to the SID module .

The SID module of the illustrated example is configured to provide the tag injector with a SID to be associated with a media content stream. As used herein a SID is a unique source identifier that may include one or more of several predetermined identifiers which uniquely identify media content e.g. a predetermined serial number an International Standard Audiovisual Number ISAN an ISAN combined with a version identifier known as Versioned ISAN V ISAN a Moving Picture Experts Group MPEG Packet Identifier PID Industry Standard Coding Identification ISCI Advertising Digital Identification Ad ID house number etc and or the source providing the media content. The SIDs may be pre arranged with media content providers such that specific SIDs are associated with specific programs and or commercials and or with specific content providers. The SIDs stored in the SID module may be updated and or modified by software e.g. by an automated download operation and or by a user update i.e. manually .

The time stamper of the illustrated example is configured to provide the tag injector with current date and time information. The time stamper may provide to the tag injector the date and or time a media content stream is received at the example tag encoder the date and or time that local content is injected into the media stream and or a time in creative such as for example the time since the start of a given segment of content. A segment could be a commercial program chapter program segment or other desired section of content. The time in creative may be associated with the time the media content stream is broadcast e.g. aired the time the media content signal is created and or any other time of interest. The time stamper may be queried by the tag injector for the time and or date information. The time stamper may be similar to a real time clock device and or may be configured to store the date and or time information as a number of seconds elapsed since a predetermined date. For example the time stamper may count the number of seconds elapsed since 12 00 AM Jan. 1 2000. Time stamper s are well known to those of ordinary skill in the art and will not be further described herein.

The tag injector of the illustrated example receives a media content stream and associates one or more identifying tags with the media content stream the media content stream and or a program contained in the media content stream. The tag injector is configured to receive data via the control system from the remote and or local communications sources and e.g. log files generated by the local content insertion modules and indicating local content description identification when and where local content has been inserted the SIDs and or other identifying data from the SID module and or date and or time information from the time stamper to create the identifying tags. Thus as used herein an identifying tag comprises a SID that may be combined with a time and or date stamp. The identifying tags may be encrypted using any known encryption algorithm or may be un encrypted. The tag injector may also be configured to update an internal log with any content identification tag s that are injected into the content signal so that the meaning of each identifying tag is recorded.

Regardless of the data i.e. time date stamp SID etc used in creating the identifying tag the tag injector of the illustrated example associates the identifying tag with the media content stream by embedding the identifying tag within the media content stream. The tag injector may use any known method of embedding information within the media content. For example the tag injector may insert the identifying tag using techniques similar to techniques used to insert ancillary codes into media content stream see U.S. Pat. No. 5 629 739 which is hereby incorporated by reference for an example code insertion system and or techniques used to insert watermark data see U.S. Pat. No. 6 061 793 which is hereby incorporated by reference for an example watermarking system .

The internal log is configured to store identifying tags created by the tag injector . The internal log may also store data that may be extracted from the media content stream such as metadata. The internal log may encrypt the identifying tag s compress the identifying tag s and or sort the identifying tag s before and or after inserting the identifying tag s into the internal log . The internal log may continuously periodically and or aperiodically be transmitted to a data collection server such as the data collection server of using any known communication protocol such as Internet Protocol or Xmodem.

The tag encoders and are used to associate one or more identifying tags with the primary content and or with any locally inserted content. In the illustrated example the tag encoder is configured to receive the primary content from the editing station and to attach identifying tags to the primary content and or to any local content inserted by the local content insertion module s . The tag encoder is configured to associate one or more identifying tags with the primary content and or with any local content inserted for example by the editing station or the post production transmitter immediately before or as the media signal is transmitted by the post production transmitter . The identifying tags inserted by the tag encoder may be significantly similar to the identifying tags used by the tag encoder . The post production site may employ one or both of the tag encoders and . The tag encoders and may use a SID associated with the post production site a SID associated with the primary content a SID associated with inserted local media content and or any other SID as described above.

The tag encoders and are configured to associate one or more identifying tags with the media content received by the major distribution point receiver the media content output by the major distribution point transmitter and or any local media content that may be inserted by the local content insertion module s . The tag encoders and may use a SID associated with the major media distribution point a SID associated with the media content received by the tag encoders and a SID associated with the local media content inserted by the insertion module s or any other SID as described above. For example the tag encoders and may use a SID associated with a television network a local affiliate of the television network and or a cable television provider. The major media distribution point does not need to use both of the tag encoders but may instead employ only one of the two tag encoders and .

The tag encoders and are configured to associate one or more identifying tags with the media content received at the end user media distribution system and or with local media content inserted by the local content insertion module s . The tag encoder is configured to receive the media content stream which may include local media content that has been inserted into the media content stream by any of the local content insertion module s from the end user entry point and to associate one or more identifying tags with the media content. The tag encoder is configured to receive the media content stream which may include local media content that has been inserted into the media stream by any of the local content insertion modules from the end user distribution network and to associate one or more identifying tags with the media content. Although the example end user media distribution system of illustrates a system with two tag encoders and an example end user media distribution system may be implemented using only one tag encoder e.g. either the tag encoder or the tag encoder .

The tag encoder is configured to receive decrypted audio video and or data streams from the conditional access unit and or from the storage device and to associate one or more identifying tags with the audio video and or data streams. The tag encoder is configured to receive the decoded and or decompressed audio and video content from the decoder and to attach identifying tags to the audio and or video content. It is common but not required to decompress and or decrypt content prior to applying or extracting tags. The audio video and or data streams may include local content that is inserted into the data streams by the local content insertion module s . Thus the tags inserted by the tag encoder s and may alternatively or additionally be associated with that locally inserted content. The example STB does not need to include both of the tag encoder s and and may instead include only one of the tag encoder s or .

The tag detector of the illustrated example is configured to receive media content tuned by a monitored information presenting device and to detect identifying tags embedded in or otherwise associated with the media content by a tag injector such as for example the tag injector . The identifying tags are preferably the identifying tags used by the tag encoders of . A person of ordinary skill in the art will readily appreciate that any method to detect identifying tags may be used and that the employed method s will depend on the type of tags employed and or the method of attaching or embedding the tags into the content stream. As an example if the tags are comprised of a serial number in an encrypted format the tag detector may monitor the content stream for such data. When data encrypted in the predetermined format is discovered the data is decrypted using an appropriate decryption algorithm and the serial number is extracted.

The tag detector may be configured to store the identifying tags in the tag database . The contents of the tag database are periodically or aperiodically transmitted to a data collection server such as the data collection server of for processing. The contents of the tag database may be transmitted to the analyzer a metering device see a data collection server see and or other local equipment when a sufficient number of identifying tags have been collected at predetermined times continuously or at any other suitable time. Any communication protocol may be used to transmit the contents of the tag database to the data collection server such as for example Internet Protocol or Xmodem.

The inherent data detector of the illustrated example is configured to receive media content and to extract content identification data which is inherent in the media content stream other than the inserted tag data and signature data. The content identification data extracted by the inherent data detector includes codes and or data that may be inserted into the media content stream by the media content creators and may be intended to be used for purposes such as asset management. In other words said content identification data is not originally intended for audience measurement purposes. Examples of such content identification data include ISAN V ISAN a network house number transport stream identifiers etc.

The inherent data detector is configured to store the extracted content identification data in the inherent data database . The contents of the inherent data database may be transmitted to the analyzer a metering device see to a data collection server see and or to other local equipment for processing when a sufficient amount of content identification data has been collected at predetermined times continuously or at any other desired time interval. Any communication protocol may be used to transmit the contents of the inherent data database to the data collection server such as Internet Protocol or Xmodem.

The signature module is configured to receive the media content stream and to generate signature information based on the audio content the video content and or the transport stream of the media content. Signature information may be useful for example if no identification tags are found in the content stream. Time stamp information may also be associated with the signature. A person of ordinary skill in the art will readily appreciate that there are several known methods to generate or collect signatures and any of these methods may be used by the signature module see U.S. Pat. No. 5 612 729 which is hereby incorporated by reference for an example of generating a signature from the media content stream . The signature module may also be configured to capture segments of raw media content e.g. raw audio content raw video content and or raw digital data . The signature module may store the segments of the raw media content and the generated signatures along with e.g. in association with time stamp information.

The signature module is configured to transmit the extracted or collected signatures and or the captured segments of raw media content to the analyzer a metering device see to a data collection server see and or to other local equipment.

The data processing server is configured to receive the generated signatures and the captured media content and to attempt to determine the identity of the media content received by the signature module . The data processing server has access to a database e.g. a signature database of known signatures and the associated program information e.g. title owner etc. . The generated signatures are compared to the database of known signatures to determine the identity of the media content received by the signature module . The data processing server may also be configured to compare the captured segments of raw media content to a database containing known segments of raw media content and associated program information or metadata e.g. a raw media content database .

The signature database and the raw media content database may be updated using methods known to those of ordinary skill in the art. In addition the signature database and the raw media content database may be updated to include entries for local content that may be inserted at a post production site a major media distribution point an end user media distribution system and or an STB . For example a media monitoring device may be located near a point where local media content is inserted into a media content stream. The media monitoring device may recognize or identify the local media content that has been inserted into the media content stream by analyzing metadata associated with the inserted local media content. When inserted local media content has been detected the media monitoring device may extract signatures using a signature module e.g. the signature module . The extracted signatures and associated metadata identifying the media content represented by the signatures may then be transmitted to a data collection facility for addition to a signature database. The signature database may be compared with signatures extracted by another media monitoring device to identify media content received at the other media monitoring device. The locations of media monitoring devices will be described in further detail in conjunction with .

The transition detector of the illustrated example is configured to receive media content and to detect transitions between segments in the media content stream. The transition detector may be configured to monitor the received media content stream and to detect packet identifiers PIDs associated with data streams in the media content. The transition detector may also monitor a repetition rate and or frequency associated with the PIDs. If the repetition rate changes the transition detector may indicate a change of programming has occurred and store information describing the change e.g. the PID the time etc. . In addition the absence of a PID and subsequent reappearance of a PID may also indicate a change of programming has occurred e.g. insertion of a commercial . The transition detection uses several methods for detection such as changes in identifying tags changes in content identification changes in PIDs etc. The transitions are useful in identifying the media content an audience is consuming.

The transition detector may be configured to detect changes in the identifying tags and or in the content identification data e.g. content signatures and inherent identifying data and to store the old and new values of the identifying tags and or the old and new value of the content identification data. The time associated with the change of identifying tags and or the change of the content identification data may also be recorded. A transition time e.g. the time between receiving the old identifying tag value and receiving the new identifying tag value is also stored and analyzed. The transition time is compared to a predetermined threshold to determine if a program transition occurred.

The transition detector is also configured to detect changes in metadata that may be associated with the media content. For example the transition detector may analyze the metadata to determine changes in the metadata content e.g. conditional access information captioning data parental guidance data source data etc. . Changes in the metadata content may indicate a program change. When a change is indicated by the change in the metadata the date and or time and change in metadata content is recorded.

The transition detector may also be configured to detect transitions in programs by monitoring a program map and or a program association table associated with the received media content. The program map and or the program association table are data tables that define the structure of the media content. Media content characteristics such as sound picture and other metadata are included in the program map and or the program association table. The transition detector may determine when the media content characteristics in the program map and or the program association table change and to determine from these changes that a program change has occurred. The transition detector can also detect typical indications of media content splicing such as blank frames and or quiet sections in the audio.

The transition detector may also be configured to monitor software instructions used to control splicing and or multiplexing of media content stream by local content insertion module s such as the local content insertion module s of . The transition detector may alternatively or additionally detect data generated from software instructions used by the local content insertion module s to splice and or multiplex media content. The transition detector may also be configured to detect changes within local content insertion module s such as memory usage CPU usage input output usage and accesses to memory devices within the local content insertion module s . The transition detector is configured to transmit the generated media content transition data to the analyzer .

The analyzer is capable of receiving data from the inherent data database the tag database the signature module and the transition detector . The analyzer is further capable of analyzing the received data to identify locally inserted media content using data from one or more of the inherent data detector the tag database the signature module and the transition detector . For example the analyzer may recognize a transition between programs using data from the transition detector and may identify the program transitioned to using data from the tag database . The analyzer may transmit the results of the analysis to the metering device see to a data collection server see and or to other local equipment. Alternatively the analyzer may transmit the results of the inherent data database the tag database the signature module and the transition detector to the metering device see to the data collection server see and or to other local equipment. In an alternative implementation the analyzer may not be used and the components of the media monitoring device may transmit data directly to the metering device see to the data collection server see and or to other local equipment.

The media monitoring devices and are configured to detect identifying tags present in the content stream. In addition the media monitoring devices and are configured to generate signatures and to detect program transitions and or changes as described above in conjunction with . The media monitoring devices and are configured to transmit the detected identifying tags generated signatures and or detected program transition information to a metering device to data collection server or to other local equipment. Similar to the tag encoders and of it is not necessary for the post production site to include both media monitoring devices and . Instead the post production site may include either the media monitoring device or the media monitoring device .

The media monitoring devices and are configured to monitor identifying tags and or content identification data associated with media content received by the major distribution point receiver and transmitted by the major distribution point transmitter respectively. The media monitoring devices and are also configured to generate signatures and to detect program transitions in the media content stream. The media monitoring devices and are configured to transmit detected identifying data the content identification data the generated signatures and or the program transition information to a metering device to a data collection server or to other local equipment. Similar to the tag encoders and of the example major media distribution point may not include both media monitoring devices and as shown in . Instead the major media distribution point may include only one of the media monitoring devices and .

The media monitoring devices and are configured to monitor identifying tags associated with media content received by the end user entry point . In addition the media monitoring devices and are configured to generate signatures and to detect program transitions in the media content stream. The media monitoring devices and are configured to transmit detected identifying tags generated signatures and or program transition information to metering device to a data collection server or to other local equipment. Similar to the tag encoders and of the end user media distribution system may not include both of the media monitoring devices and as shown in . Instead the media distribution system may include only one of the media monitoring devices and .

The media monitoring devices and are configured to monitor the media content stream received from the demultiplexer the storage device and or the decoder for identifying data and or content identification data. In addition the media monitoring devices and are configured to generate signatures based on the received media content and to detect program transitions and or changes in the media content stream. The media monitoring devices and are configured to transmit collected identifying tags generated signatures and or program transition information to a metering device to a data collection server or to other local equipment. The example STB may be implemented using either the media monitoring device or the media monitoring device or both.

The tag injector receives a SID from the SID module that is to be associated with the media content block . The SID may be a random number a predetermined number a number associated with received local content ISAN information V ISAN information an MPEG PID any combination of the forgoing etc. The tag injector also receives time and date information from the time stamper block . The time and date information may correspond for example to the time the media content stream is received.

The tag injector uses the SID and the time and date information received in blocks and to form an identifying tag to be associated with the media content block . The identifying tag is associated with the media content by for example inserting the identifying tag into the media content using techniques similar to techniques used to insert watermark data and or to insert ancillary codes into a media content stream. Identifying tags may be associated with the media content so that for example each segment second and or frame of content of the media content stream is tagged and thus identified. Of course less comprehensive tagging may be appropriate for some content.

After the identifying tag has been created and injected into the media content block the tag injector updates the internal log block . The tag injector stores the identifying tag e.g. the SID and or the date and time information used to create the identifying tag in the internal log . The tag injector may also store data extracted from the media content such as metadata information.

The signature module also receives the media content stream and generates signatures based on the audio content video content and or transport streams block . In the example of the signature module also captures segments of raw data from the audio content the video content and or the transport streams block . The generated signatures and or segments of raw data are stored in the inherent data database and transmitted at a later time as described below.

Persons of ordinary skill in the art will readily appreciate that the position of blocks and may be reversed in such that signature data is only collected if a tag is not detected.

The inherent data detector then analyzes the media content stream and extracts any inherent identification data e.g. data embedded in the signal that is not originally intended for audience measurement purposes that may be embedded in the media content stream block . The extracted identification data is then stored in the inherent data database . After the inherent data detector extracts the content identification data and stores the data in the inherent data database the transition detector analyzes the media content stream to identify a program transition and or change block .

An example process to detect transitions is illustrated in . The example process begins when the transition detector determines if there is a change in the values of the identification tags the content identification data API behavior and or metadata associated with the received media content stream block . The transition detector may analyze the most recently captured identification tags inherent data and or metadata and compare the values to values previously captured to determine if a change has occurred. If the transition detector determines a change occurred block the transition detector stores the previous values the most recently captured values and the time associated with the change block .

The transition detector then extracts PIDs from the media content stream and analyzes the PIDs to determine if a change in PID values has occurred block . If a change in PIDs is detected block the previous PID the current PID and the time associated with the change is stored block . The transition detector also detects the repetition rate of the PIDs and determines if the repetition rate and or frequency of the PIDs changed block . The transition detector may detect changes in the repetition rate by comparing a time difference between two PIDs and determining if the time difference is different than a predetermined threshold e.g. a time difference . If the transition detector determines a change in the repetition rate and or frequency of the PIDs occurred block the transition detector stores the time associated with the change and the change in repetition rate block .

The transition detector then analyzes the program map and or the program association table and or other logical structures associated with the media content stream to determine if a change occurred in the program map and or the program association table block . The transition detector may analyze the media content characteristics contained in the program map and or the program association table and or other logical structures to determine if any of the audio and or video content has changed. If a change in the program map and or the program association table is detected block the transition detector stores the time associated with the change and the program map and or program identification tables block .

The transition detector then performs integrity checks on the data e.g. CRC Checksum etc. to determine if errors are present block . The detector also looks for a change in the level of errors present e.g. a jump in the number of errors from 0 to 20 . If a change in the presence of errors occurs block the transition detector records the information and time associated with the errors block . Control then returns to block of .

In addition to determining if a program change and or transition has occurred block the transition detector monitors software instructions that may be used by local content insertion module s and to splice and or multiplex local media content into the received media content stream block . The transition detector may monitor the software instructions using available application programming interfaces APIs and analyze data that may be produced from the software instructions e.g. return values from a software function . The transition detector may use a secondary API to monitor the splicing multiplexing API for behavior changes that may indicate that a program transition has occurred. In addition the transition detector may also monitor the local content insertion module s CPU usage accesses to a memory device input output usage etc.

After the transition detector monitors the local content insertion module s software instructions block the tag detector determines whether it is time to export the collected data block . If not control returns to block . If so the data collected by the tag detector the inherent data detector the signature module and the transition detector is transmitted to a data collection server block . The collected data may be transmitted using any communication protocol such as Internet Protocol or Xmodem. After or while the collected data is exported control returns to block to continue the monitoring process.

The processor may be any type of well known processor such as a processor from the Intel Pentium family of microprocessors the Intel Itanium family of microprocessors the Intel Centrino family of microprocessors and or the Intel XScale family of microprocessors.

The interface circuit s may be implemented using any type of well known interface standard such as an Ethernet interface and or a Universal Serial Bus USB interface. One or more input devices may be connected to the interface circuit s for entering data and commands into the main processing unit . For example an input device may be a keyboard mouse touch screen track pad track ball isopoint a VTR deck a digital media server and or a voice recognition system.

One or more displays printers speakers and or other output devices may also be connected to the main processing unit via one or more of the interface circuit s . The display may be a cathode ray tube CRT a liquid crystal displays LCD or any other type of display. The display may generate visual indications of data generated during operation of the main processing unit . The visual indications may include prompts for human operator input calculated values detected data etc.

The computer system may also include one or more storage devices . For example the computer system may include one or more compact disk drives CD digital versatile disk drives DVD and or other computer media input output I O devices.

The computer system may also exchange data with other devices via a connection to a network . The network connection may be any type of network connection such as an Ethernet connection digital subscriber line DSL telephone line coaxial cable etc. The network may be any type of network such as the Internet a telephone network a cable network and or a wireless network. The network devices may be any type of network devices . For example the network device may be a client a server a hard drive etc.

Although the above discloses example systems including software or firmware executed on hardware it is understood that such systems are merely illustrative and are not to be considered as limiting. For example it is contemplated that any or all of these hardware and software components could be embodied exclusively in hardware exclusively in software exclusively in firmware or in some combination of hardware firmware and or software. In other words although certain methods apparatus and articles of manufacture have been described herein the scope of coverage of this patent is not limited thereto. On the contrary this patent covers all apparatus methods and articles of manufacture fairly falling within the scope of the appended claims either literally or under the doctrine of equivalents.

