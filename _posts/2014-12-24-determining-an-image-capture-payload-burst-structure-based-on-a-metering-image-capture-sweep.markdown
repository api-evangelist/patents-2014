---

title: Determining an image capture payload burst structure based on a metering image capture sweep
abstract: A first plurality of images of a scene may be captured. Each image of the first plurality of images may be captured with a different total exposure time (TET). Based at least on the first plurality of images, a TET sequence may be determined for capturing images of the scene. A second plurality of images of the scene may be captured. Images in the second plurality of images may be captured using the TET sequence. Based at least on the second plurality of images, an output image of the scene may be constructed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09118841&OS=09118841&RS=09118841
owner: Google Inc.
number: 09118841
owner_city: Mountain View
owner_country: US
publication_date: 20141224
---
This application is a continuation of and claims priority to U.S. patent application Ser. No. 14 455 444 filed Aug. 8 2014. U.S. patent application Ser. No. 14 455 444 is a continuation of and claims priority to U.S. patent application Ser. No. 13 713 720 issued as U.S. Pat. No. 8 866 927 filed Dec. 13 2012. Both U.S. patent application Ser. No. 14 455 444 and U.S. Pat. No. 8 866 927 are hereby incorporated by reference in their entirety.

Generally imaging may refer to representing the color and brightness characteristics of digital images. Low dynamic range LDR imaging may represent digital images e.g. photographs and motion video with 8 or fewer bits for each color channel of a pixel. As a result up to 256 levels of brightness may be supported. Currently a wide range of video output devices e.g. computer monitors tablet and smartphone screens televisions etc. support displaying LDR images.

However real world scenes often exhibit a wider range of brightness than can be represented by LDR imaging. As an example scene with a wide brightness range consider an individual standing in a dark room in front of a window. This scene may include both extremely bright regions e.g. sunlit features outside the window and extremely dark regions e.g. the features in the room . Ideally a photograph of this scene would include both the details in the bright regions and the details in the dark regions.

In a first example embodiment a first plurality of images of a scene may be captured. Each image of the first plurality of images may be captured with a different total exposure time TET . Based at least on the first plurality of images a TET sequence may be determined for capturing further images of the scene. A second plurality of images of the scene may be captured. Images in the second plurality of images may be captured using the TET sequence. Based at least on the second plurality of images an output image of the scene may be constructed.

In a second example embodiment a first plurality of images of a scene may be captured. Each image of the first plurality of images may be captured using a different TET. Based at least on the first plurality of images a long TET a short TET and a TET sequence that includes the long TET and the short TET may be determined. A second plurality of images of the scene may be captured. The images in the second plurality of images may be captured sequentially in an image sequence using a sequence of TETs corresponding to the TET sequence. Based on one or more images in the image sequence an output image may be constructed.

A third example embodiment may include a non transitory computer readable storage medium having stored thereon program instructions that upon execution by a computing device cause the computing device and or its peripherals to perform operations in accordance with the first and or second example embodiments.

A fourth example embodiment may include a computing device comprising at least a processor an image sensor and data storage. The data storage may contain program instructions that upon execution by the processor cause the computing device operate in accordance with the first and or second example embodiments.

These as well as other aspects advantages and alternatives will become apparent to those of ordinary skill in the art by reading the following detailed description with reference where appropriate to the accompanying drawings. Further it should be understood that the description provided in this summary section and elsewhere in this document is intended to illustrate the claimed subject matter by way of example and not by way of limitation.

As image capture devices such as cameras become more popular they may be employed as standalone hardware devices or integrated into various other types of devices. For instance still and video cameras are now regularly included in wireless communication devices e.g. mobile phones tablet computers laptop computers video game interfaces home automation devices and even automobiles and other types of vehicles.

The physical components of a camera may include an aperture through which light enters a recording surface for capturing the image represented by the light and a lens positioned in front of the aperture to focus at least part of the image on the recording surface. The aperture may be fixed size or adjustable. In an analog camera the recording surface may be photographic film. In a digital camera the recording surface may include an electronic image sensor e.g. a charge coupled device CCD or a complementary metal oxide semiconductor CMOS sensor to transfer and or store captured images in a data storage unit e.g. memory .

A shutter may be coupled to or nearby the lens or the recording surface. The shutter may either be in a closed position in which it blocks light from reaching the recording surface or an open position in which light is allowed to reach to recording surface. The position of the shutter may be controlled by a shutter button. For instance the shutter may be in the closed position by default. When the shutter button is triggered e.g. pressed the shutter may change from the closed position to the open position for a period of time known as the shutter cycle. During the shutter cycle an image may be captured on the recording surface. At the end of the shutter cycle the shutter may change back to the closed position.

Alternatively the shuttering process may be electronic. For example before an electronic shutter of a CCD image sensor is opened the sensor may be reset to remove any residual signal in its photodiodes. While the electronic shutter remains open the photodiodes may accumulate charge. When or after the shutter closes these charges may be transferred to longer term data storage. Combinations of mechanical and electronic shuttering may also be possible.

Regardless of type a shutter may be activated and or controlled by something other than a shutter button. For instance the shutter may be activated by a softkey a timer or some other trigger. Herein the term image capture may refer to any mechanical and or electronic shuttering process that results in one or more photographs being recorded regardless of how the shuttering process is triggered or controlled.

The exposure of a captured image may be determined by a combination of the size of the aperture the brightness of the light entering the aperture and the length of the shutter cycle also referred to as the shutter length or the exposure length . Additionally a digital or analog gain may be applied to the image thereby influencing the exposure. In some embodiments the term total exposure length or total exposure time may refer to the shutter length multiplied by the gain for a particular aperture size. Herein the term total exposure time or TET should be interpreted as possibly being a shutter length an exposure time or any other metric that controls the amount of signal response that results from light reaching the recording surface.

A still camera may capture one or more images each time image capture is triggered. A video camera may continuously capture images at a particular rate e.g. 24 images or frames per second as long as image capture remains triggered e.g. while the shutter button is held down . Some digital still cameras may open the shutter when the camera device or application is activated and the shutter may remain in this position until the camera device or application is deactivated. While the shutter is open the camera device or application may capture and display a representation of a scene on a viewfinder. When image capture is triggered one or more distinct digital images of the current scene may be captured.

Cameras even analog cameras may include software to control one or more camera functions and or settings such as aperture size TET gain and so on. Additionally some cameras may include software that digitally processes images during or after these images are captured. While it should be understood that the description above refers to cameras in general it may be particularly relevant to digital cameras.

As noted previously digital cameras may be standalone devices or integrated with other devices. As an example illustrates the form factor of a digital camera device . Digital camera device may be for example a mobile phone a tablet computer or a wearable computing device. However other embodiments are possible. Digital camera device may include various elements such as a body a front facing camera a multi element display a shutter button and other buttons . Digital camera device could further include a rear facing camera . Front facing camera may be positioned on a side of body typically facing a user while in operation or on the same side as multi element display . Rear facing camera may be positioned on a side of body opposite front facing camera . Referring to the cameras as front and rear facing is arbitrary and digital camera device may include multiple cameras positioned on various sides of body .

Multi element display could represent a cathode ray tube CRT display a light emitting diode LED display a liquid crystal LCD display a plasma display or any other type of display known in the art. In some embodiments multi element display may display a digital representation of the current image being captured by front facing camera and or rear facing camera or an image that could be captured or was recently captured by either or both of these cameras. Thus multi element display may serve as a viewfinder for either camera. Multi element display may also support touchscreen and or presence sensitive functions that may be able to adjust the settings and or configuration of any aspect of digital camera device .

Front facing camera may include an image sensor and associated optical elements such as lenses. Front facing camera may offer zoom capabilities or could have a fixed focal length. In other embodiments interchangeable lenses could be used with front facing camera . Front facing camera may have a variable mechanical aperture and a mechanical and or electronic shutter. Front facing camera also could be configured to capture still images video images or both. Further front facing camera could represent a monoscopic stereoscopic or multiscopic camera. Rear facing camera may be similarly or differently arranged. Additionally front facing camera rear facing camera or both may be an array of one or more cameras.

Either or both of front facing camera and rear facing camera may include or be associated with an illumination component that provides a light field to illuminate a target object. For instance an illumination component could provide flash or constant illumination of the target object. An illumination component could also be configured to provide a light field that includes one or more of structured light polarized light and light with specific spectral content. Other types of light fields known and used to recover three dimensional 3D models from an object are possible within the context of the embodiments herein.

Either or both of front facing camera and rear facing camera may include or be associated with an ambient light sensor that may continuously or from time to time determine the ambient brightness of a scene that the camera can capture. In some devices the ambient light sensor can be used to adjust the display brightness of a screen associated with the camera e.g. a viewfinder . When the determined ambient brightness is high the brightness level of the screen may be increased to make the screen easier to view. When the determined ambient brightness is low the brightness level of the screen may be decreased also to make the screen easier to view as well as to potentially save power. Additionally the ambient light sensor s input may be used to determine a TET of an associated camera or to help in this determination.

Digital camera device could be configured to use multi element display and either front facing camera or rear facing camera to capture images of a target object. The captured images could be a plurality of still images or a video stream. The image capture could be triggered by activating shutter button pressing a softkey on multi element display or by some other mechanism. Depending upon the implementation the images could be captured automatically at a specific time interval for example upon pressing shutter button upon appropriate lighting conditions of the target object upon moving digital camera device a predetermined distance or according to a predetermined capture schedule.

As noted above the functions of digital camera device or another type of digital camera may be integrated into a computing device such as a wireless communication device tablet computer laptop computer and so on. For purposes of example is a simplified block diagram showing some of the components of an example computing device that may include camera components .

By way of example and without limitation computing device may be a cellular mobile telephone e.g. a smartphone a still camera a video camera a fax machine a computer such as a desktop notebook tablet or handheld computer a personal digital assistant PDA a home automation component a digital video recorder DVR a digital television a remote control a wearable computing device or some other type of device equipped with at least some image capture and or image processing capabilities. It should be understood that computing device may represent a physical camera device such as a digital camera a particular physical hardware platform on which a camera application operates in software or other combinations of hardware and software that are configured to carry out camera functions.

As shown in computing device may include a communication interface a user interface a processor data storage and camera components all of which may be communicatively linked together by a system bus network or other connection mechanism .

Communication interface may function to allow computing device to communicate using analog or digital modulation with other devices access networks and or transport networks. Thus communication interface may facilitate circuit switched and or packet switched communication such as plain old telephone service POTS communication and or Internet protocol IP or other packetized communication. For instance communication interface may include a chipset and antenna arranged for wireless communication with a radio access network or an access point. Also communication interface may take the form of or include a wireline interface such as an Ethernet Universal Serial Bus USB or High Definition Multimedia Interface HDMI port. Communication interface may also take the form of or include a wireless interface such as a Wifi BLUETOOTH global positioning system GPS or wide area wireless interface e.g. WiMAX or 3GPP Long Term Evolution LTE . However other forms of physical layer interfaces and other types of standard or proprietary communication protocols may be used over communication interface . Furthermore communication interface may comprise multiple physical communication interfaces e.g. a Wifi interface a BLUETOOTH interface and a wide area wireless interface .

User interface may function to allow computing device to interact with a human or non human user such as to receive input from a user and to provide output to the user. Thus user interface may include input components such as a keypad keyboard touch sensitive or presence sensitive panel computer mouse trackball joystick microphone and so on. User interface may also include one or more output components such as a display screen which for example may be combined with a presence sensitive panel. The display screen may be based on CRT LCD and or LED technologies or other technologies now known or later developed. User interface may also be configured to generate audible output s via a speaker speaker jack audio output port audio output device earphones and or other similar devices.

In some embodiments user interface may include a display that serves as a viewfinder for still camera and or video camera functions supported by computing device . Additionally user interface may include one or more buttons switches knobs and or dials that facilitate the configuration and focusing of a camera function and the capturing of images e.g. capturing a picture . It may be possible that some or all of these buttons switches knobs and or dials are implemented as functions on a presence sensitive panel.

Processor may comprise one or more general purpose processors e.g. microprocessors and or one or more special purpose processors e.g. digital signal processors DSPs graphics processing units GPUs floating point units FPUs network processors or application specific integrated circuits ASICs . In some instances special purpose processors may be capable of image processing image alignment and merging images among other possibilities. Data storage may include one or more volatile and or non volatile storage components such as magnetic optical flash or organic storage and may be integrated in whole or in part with processor . Data storage may include removable and or non removable components.

Processor may be capable of executing program instructions e.g. compiled or non compiled program logic and or machine code stored in data storage to carry out the various functions described herein. Therefore data storage may include a non transitory computer readable medium having stored thereon program instructions that upon execution by computing device cause computing device to carry out any of the methods processes or functions disclosed in this specification and or the accompanying drawings. The execution of program instructions by processor may result in processor using data .

By way of example program instructions may include an operating system e.g. an operating system kernel device driver s and or other modules and one or more application programs e.g. camera functions address book email web browsing social networking and or gaming applications installed on computing device . Similarly data may include operating system data and application data . Operating system data may be accessible primarily to operating system and application data may be accessible primarily to one or more of application programs . Application data may be arranged in a file system that is visible to or hidden from a user of computing device .

Application programs may communicate with operating system through one or more application programming interfaces APIs . These APIs may facilitate for instance application programs reading and or writing application data transmitting or receiving information via communication interface receiving and or displaying information on user interface and so on.

In some vernaculars application programs may be referred to as apps for short. Additionally application programs may be downloadable to computing device through one or more online application stores or application markets. However application programs can also be installed on computing device in other ways such as via a web browser or through a physical interface e.g. a USB port on computing device .

Camera components may include but are not limited to an aperture shutter recording surface e.g. photographic film and or an image sensor lens and or shutter button. Camera components may be controlled at least in part by software executed by processor .

Captured digital images may be represented as a one dimensional two dimensional or multi dimensional array of pixels. Each pixel may be represented by one or more values that may encode the respective pixel s color and or brightness. For example one possible encoding uses the YCbCr color model. In this color model the Y channel may represent the brightness of a pixel and the Cb and Cr channels may represent the blue chrominance and red chrominance respectively of the pixel. For instance each of these channels may take values from 0 to 255 i.e. the tonal range that a single 8 bit byte can offer . Thus the brightness of a pixel may be represented by a 0 or a value near zero if the pixel is black or close to black and by a 255 or a value near 255 if the pixel is white or close to white. However the value of 255 is a non limiting reference point and some implementations may use different maximum values e.g. 1023 4095 etc. .

Nonetheless the YCbCr color model is just one possible color model and other color models such as a red green blue RGB color model or a cyan magenta yellow key CMYK may be employed with the embodiments herein. Further the pixels in an image may be represented in various file formats including raw uncompressed formats or compressed formats such as Joint Photographic Experts Group JPEG Portable Network Graphics PNG Graphics Interchange Format GIF and so on.

Some pixel encodings including the YCbCr color model use 8 bits to represent the brightness of each pixel. Doing so is referred to as LDR imaging. As a result only 256 levels of brightness may be supported. However real world scenes often exhibit a wider dynamic range of brightness than can be reasonably represented by LDR imaging. For example a scene of an individual standing in a dark room in front of a window may include both extremely bright regions and extremely dark regions. However use of LDR imaging to capture an image of such a scene may result in loss of detail in the bright region and or the dark region based on the TET with which the image was captured.

A short TET may result in a reasonably accurate representation of the bright regions of a scene but underexposure of the dark regions. Conversely a long TET may result in a reasonably accurate representation of the dark regions but may overexpose the bright regions. In the example scene introduced above if the TET is too long the features in the room may appear properly exposed but the features outside the window may appear whitewashed. But if the TET is too short the features outside the window may appear normal but the features in the room may appear darkened. Either of these outcomes is undesirable. For some scenes there may not be a single TET that results in a captured image representing the details in both bright regions and dark regions with acceptable detail.

Camera devices may support an auto exposure AE mode in which prior to output image capture the camera determines the TET based on the brightness of the scene. For example the user may observe the scene in the camera s viewfinder before triggering image capture. During this period the camera may make an initial estimate of the proper TET capture a preview image with that TET and then evaluate the pixels in the captured image. Then as one possible implementation if a majority or some other sufficient fraction of the pixels in the preview image are over exposed the camera may decrease the TET and capture another preview image. If a majority or some other sufficient fraction of the pixels in this preview image are under exposed the camera may increase the TET and capture yet another preview image.

For instance if the majority of the pixels in the captured image exhibit a brightness value above a high threshold level e.g. 240 the camera may decrease the TET. On the other hand if a majority of the pixels exhibit a brightness level below a low threshold level e.g. 96 the camera may increase the TET.

Alternatively or additionally a target average pixel value for some or all of the scene s pixels may be determined. If the actual average pixel value is above the target average pixel value the TET may be decreased and if the actual average pixel value is below the target average pixel value the TET may be increased. The target average pixel value can also be tuned differently depending on how much contrast there is in the scene. For example in a low contrast scene the target average pixel value may be bright e.g. 200 . But in a high contrast scene the target average pixel value may be lower e.g. 128 .

This process may continue until the camera determines that an image should be captured and stored e.g. the user activates the shutter button . During this process if the characteristics of the scene are relatively unchanging the camera usually converges on an estimated best TET based on the brightness of the scene. In some embodiments the image displayed on the camera s viewfinder may omit information from one or more of the captured preview images or combine information from two or more of the captured preview images.

In some cases the camera might not treat all pixels equally when determining an average brightness of the scene. Using a technique described as center weighted averaging pixels near the middle of the scene may be considered to be more important. Thus these pixels may be weighted more than pixels illustrating other areas of the scene. Alternatively pixels in other locations of an image may be given more weight. For instance if the camera detects a human face or some other object of interest in a particular location other than the center of the image the camera may give a higher weight to the associated pixels.

In this way AE algorithms may seek to determine a TET that produces a large number e.g. the largest number of properly exposed pixels. However given the range limitations of LDR imaging even images captured in AE mode may contain portions that are whitewashed or darkened. Thus as noted above some scenes there may be no single best TET.

AE algorithms may differ from the description above. For instance some may be more complex treating different colors differently considering the spatial and or structural components of a scene and or measuring contrast between regions. The embodiments herein however may operate with any AE algorithm now known or developed in the future.

High dynamic range HDR imaging has been proposed as a way of compensating for the deficiencies of LDR imaging. In a possible implementation HDR imaging may involve a camera capturing multiple images of a scene at various TETs and then digitally processing these captured images to make a single image that contains a reasonable representation of the details in most or all regions of the scene including those that are very bright and very dark. However determining TETs for capturing images can be problematic. In particular difficulty in adjusting TETs for a particular scene has created limitations in HDR imaging. The methods and implementations described herein may provide computational efficiency robustness to artifacts and or enhanced image quality.

In the following the term LDR image may refer to an image captured using LDR imaging and the term LDR scene may refer to a scene that has been determined to be reasonably represented using LDR imaging. Similarly the term HDR image may refer to an image captured using HDR imaging and the term HDR scene may refer to a scene that has been determined to be reasonably represented using HDR imaging. Furthermore the term LDR imaging may be used interchangeably with the term LDR image acquisition and the term HDR imaging may be used interchangeably with the term HDR image acquisition. 

Flow chart may represent a series of steps performed by digital camera device when a shutter button is triggered. Alternatively or additionally flow chart may represent steps that are continuously performed when a viewfinder of digital camera device is displaying a representation of a scene. Thus in some embodiments the features of flow chart may be performed in a way that is not apparent to the user. For instance the user may trigger the shutter once with the intention of capturing a single image. However digital camera device may capture multiple images in each of first image capture and second image capture and provide an output image that is a combination of one or more images captured during second image capture .

It should be noted that not all steps depicted in need be performed by digital camera device . Some steps such as image processing and combining images for example could be performed by a different device. For instance representations of one or more images captured during first image captures and second image capture could be transmitted from a capturing device to a remote computing device. The remote computing device could them perform image processing and combining images possibly transmitting some or all of the results thereof to the capturing device.

Additionally training image database may be included in digital camera device or alternatively training image database may be part of a separate device or system that may be accessed by digital camera device . In some embodiments training image database may include representations of training images that can be used to help determine the structure of a payload burst used in second image capture .

In first image capture a first group of images of a scene may be captured using a metering burst sweep. In a metering burst sweep each image in the group may be captured with a different TET. In some instances the metering burst sweep may capture consecutive images across a range of TETs e.g. 1 300 milliseconds 0.1 500 milliseconds or some other range . Using such ranges of TETs the metering burst sweep may capture a series of images with TETs designed to cover this range according to a linear logarithmic and or exponential distribution of TETs among other possibilities.

As an example depicts first image capture including three digital images of a scene each captured with a different TET. The three images exhibit diverse levels of brightness due to the different TETs used to capture the images. In other examples more or fewer images may be captured during first image capture . These captured images may provide parameters for digital camera device to use when capturing subsequent images of the scene.

The metering burst sweep can be used to determine the characteristics of the scene so that a subsequent payload burst structure for second image capture can be selected. Therefore in step the images captured at step may be processed. Particularly step may include merging one or more of the images captured at step in a combined image . Step may also include forming a histogram from the merged images and then using the histogram and possibly some or all of the information in training image data to classify the scene e.g. as an LDR scene or an HDR scene determine the structure of the payload burst based on the classification of the scene and determine the TETs to use when capturing images according to the payload burst. In some embodiments the captured images shown as a result of first image capture may be downsampled prior to merging. Further the histogram may be an LDR histogram HDR histogram a log HDR histogram or some other form of histogram.

An example of this process is illustrated in . For sake of simplicity assume that the metering burst sweep consist of two images image and image . In practice anywhere from one to eight or more images may be captured in the metering burst sweep. Image was captured with a TET of 10 milliseconds while image was captured with a TET of 20 milliseconds. Thus the pixels of image might be expected to be about twice as bright as those of image . In some cases the pixels in each of images and may be tonemapped. Therefore the tonemapping process may be reverse for these images. After the tonemapping process is reversed the pixels of image may be about twice as bright as those of image . Tonemapping and reverse tonemapping are discussed in more detail below.

Images and may be downsampled to form images and respectively. Downsampling can be implemented by for example dividing a given image into i j pixel blocks i and j may take on the same value or different values and replacing each of these blocks by a single pixel. The value of this replacement pixel can be based on the values of the pixels in the respective i j pixel block. For instance the value of the replacement pixel may be determined by taking an average of the values of the pixels in the block resulting in a fuzzier lower resolution and smaller downsampled image. Thus as one possible example if a 1600 1200 pixel image is divided into 2 2 pixel blocks and downsampled one level the result is an 800 600 pixel image. If the 1600 1200 pixel image is downsampled two levels or if the 800 600 pixel image is downsampled one more level the result is a 400 300 pixel image and so on. Nonetheless a tile can be downsampled in other ways. For example a 4 4 an 8 8 pixel block or a 16 16 pixel block can be replaced by a single pixel and more than just one or two levels of downsampling can be performed.

In some embodiments multiple levels of downsampling may be performed for each image thus creating a pyramid of downsampled images. By using images with multiple levels of downsampling information regarding both the distribution of light levels in the image and the spatial structure of these light levels may be preserved.

Thus for instance depicts image having pixel block A in its top left corner and pixel block B in its top right corner. Additionally image has pixel block A in its top left corner and pixel block B in its top right corner. Each pixel block in each image is downsampled to an individual respective pixel in images and pixel A represents a downsampling of pixel block A pixel B represents a downsampling of pixel block B pixel A represents a downsampling of pixel block A and pixel B represents a downsampling of pixel block B.

In some cases an i j pixel block and its associated downsampled pixel may both be referred to as a paxel. Thus pixel block A and pixel A may both be referred to as a paxel.

For each location in the downsampled images e.g. pixels A and A would be considered to be in the same location the pixel with the highest value less than 255 may be selected. In some embodiments the pixel value of each color channel in the pixel may be compared to 255. If all of these pixel values are below 255 then the pixel is a candidate for selection. Out of all of the candidate pixels the one with the highest pixel value may be selected. In other embodiments a threshold different from 255 e.g. 250 245 or a value higher than 255 may be used instead.

Each selected pixel may be placed in its respective location in combined image . Thus for instance pixel A may be placed as pixel A and pixel B may be placed as pixel B in combined image . Additionally the pixels selected for combined image may be reverse tonemapped.

Tonemapping is a set of procedures that include mapping the pixel values according to a pre determined function. Thus for instance some camera devices map pixel values from a linear space wherein an increase or decrease of k units in pixel value represents a proportional increase or decrease in brightness to a non linear space. Tonemapping may be automatically performed for artistic purposes such as brightening mid range pixel values. Regardless in order to reverse tonemap the selected pixels back to linear space the inverse of the tonemapping function may be applied to the respective pixel values.

Additionally the pixel values may be divided by the respective TET with which the pixels were captured. Doing so may normalize the pixel values that were captured using the various TETs to a particular range. Thus for pixel A the R G B values may be 25 10 15 while for pixel B the R G B values may be 10 5 5. On the other hand for TETs under 1 millisecond e.g. TETs of 0.25 milliseconds 0.5 milliseconds and so on dividing by the TET may increase the pixel values in combined image . In some cases this may result in these pixel values being greater than 255 and therefore combined image may be an HDR representation of the scene.

Further a histogram may be created from combined image . While there are many ways in which the histogram can be formed some embodiments may include evaluating a function of the color channels of each pixel. This function may be a maximum or some other function for instance.

Moreover the logarithm of this function s output may also be taken and the resulting value plotted on histogram . The distribution of light levels in the real world is logarithmic. Thus by using a log scale there is a roughly uniform coverage of that range. For histograms based on linear light levels more histogram bins might be used. Further in some embodiments a weight may be applied to the logarithm of the function s output before placing this output in histogram . For instance a center weighted average technique may be used to apply a higher weight for pixels that are closer to the center of the captured image and a lower weight might for pixels that are further from the center of the image.

Regardless histogram may represent the distribution of pixel values in combined image . The vertical axis of the histogram may indicate the number of pixels of each pixel value and the horizontal axis may represent the range of pixel values. The pixel values may be within the range 0 255 or some other range may be used. For instance an HDR histogram may include pixel values above 255. In some embodiments an HDR histogram may represent 15 bit pixel values i.e. from 0 to 32 767. Thus the log values appearing in the HDR histogram may be in the range of 0 to log 32 767 4.52.

As an example histogram plots most of the pixels on the extreme ends of its horizontal axis. This indicated that most of histogram plots image is a shade of black or white. However since histogram also plots data points in the middle of the horizontal axis combined image may contain pixels with mid range brightness as well.

Still as part of image processing histogram may be compared to one or more histograms of images in training image database . As depicted in training image database may contain a set of histograms of reference scenes and or associated parameters. The histograms of the reference scenes may be HDR histograms as described above.

In some embodiments the percentage of pixels clipped e.g. pixels having a pixel value of 255 or higher in the downsampled combined single image may be stored in target percentage of clipped pixels . Clipping may occur when the TET used to capture the image was either too high or too low and some very dark or very bright details of the scene were lost in the image capture process. In some cases only pixels clipped at one end of the range may be included in the percentage of pixels clipped. For instance the percentage of pixels clipped may include only pixels with a pixel value of 255 or higher and the average pixel value of unclipped pixels may be calculated over all other pixels e.g. all pixels with a pixel value of 0 254 .

Further an indication of whether the scene was LDR or HDR may be stored in scene type . In some implementations scene type may take on a value of zero when the scene type is LDR and a value of one when the scene type is HDR. Alternatively scene type may be within a range e.g. from 0 to 1. In this case a value less than a threshold e.g. 0.5 might indicate an LDR scene type and any number greater than or equal to the threshold value might indicate an HDR scene type.

Target pixel value s may be one or more pixel values that have been determined to be desirable for the associated scene. If the scene is LDR target pixel value s may include a single pixel value or a range of pixel value s . This single pixel value or range may have been selected so that images of the scene with an average pixel value matching the target pixel value would be reasonably well exposed. Thus the target pixel value s may be a target average pixel value. Additionally the target pixel value s may be LDR values e.g. from 0 to 255 .

If the scene is HDR target pixel value s may include a short exposure target pixel value or range a long exposure target pixel value or range and possibly a fallback exposure target pixel value or range . These pixel values or ranges may have been selected so that HDR images with the short exposure target pixel value for the short exposures and long exposure target pixel value for the long exposures may be reasonable well exposed. The fallback target pixel value may be used if HDR imaging fails e.g. as discussed below and a single TET is used to capture the HDR scene.

In some cases target pixel value s target percentage of clipped pixels and scene type may be determined manually by examining several synthetic exposures of the captured images and selecting the pixel value s and or range s that appear most pleasing to the eye. Alternatively target pixel value s target percentage of clipped pixels and scene type may be determined algorithmically or automatically.

Training image database may also contain similar entries for histogram target pixel value s target percentage of clipped pixels and scene type as well as histogram target pixel value s target percentage of clipped pixels and scene type . In some embodiments one or more parameters such as the target percentage of clipped pixels may be omitted from training image database . Additionally other parameters may be included in training image database . Training image database may store as few as one or several tens hundreds or thousands of such entries each entry possibly relating to a different scene.

As discussed above in the context of an image captured during first image capture multiple levels of downsampling may be performed for each image in training image database thus creating a pyramid of downsampled versions of each image. By using images with multiple levels of downsampling information regarding both the distribution of light levels in the image and the spatial structure of these light levels may be preserved. Histograms for each of these downsampled images may be included in training image data .

The information in training image database may be stored therein during calibration testing and or other pre shipment evaluations before commercial operation among other possibilities. Alternatively the information may also be stored on various other devices and systems capable of managing training image database . Regardless the information may be substantially static in nature though the information may be modified through firmware and or software updates or other installations.

By comparing histogram and or a similarly derived histograms based on downsampled versions of images and with the histograms in training image data the dynamic range of the scene represented in images and may be estimated. This estimated dynamic range may be used to determine obtain or otherwise select a payload burst structure for second image capture .

For example each histogram may be compared to each histogram stored in training image data . A pair of histograms can be compared in various ways any of which may be used. In some embodiments the earth mover s distance EMD between the pair of histograms may be calculated. The EMD is 0 when the histograms are identical and increases with the differences between the histograms. Thus a lower EMD indicates a good match between the two histograms and a higher EMD indicates a poor match between the two histograms.

A weight may be derived from the EMD for a particular pair of histograms. For example the weight may be inversely proportional to its associated EMD value. In some situations the weight w may be derived as 

For each pair of histograms where a first histogram is histogram and a second histogram is from an entry in training image database the weight w may be applied to the respective scene type associated with the second histogram s entry in training image database . The result may be averaged over the pairs of histograms to determine an HDR ness of the scene. For instance if the resulting HDR ness is at or above 0.5 on a scale of 0 to 1 then the scene may be designated for HDR processing but if the resulting HDR ness is below 0.5 on the same scale then the scene may be designated for LDR processing.

It should be understood that the embodiment described above is just one possible way of determining the brightness and HDR ness of a scene. Other techniques could be used instead and some of these other techniques may be based on comparing the parameters e.g. percentage of clipped pixels and average value of unclipped pixels of the images captured during first image capture with the same or similar parameters of the images represented in training image database . Further techniques may include comparing the respective downsampled image pyramids of the first and second histograms.

In order to determine the TETs for the payload burst the following example procedure may be used. However other procedures may be used instead.

For each pair of histograms again where the first histogram is histogram and a second histogram is from an entry in training image database the weight w may be applied to the respective target pixel value associated with the second histogram s entry in training image database . The result may be averaged to determine a target average pixel value for the scene represented by histogram . If the scene type is HDR two or more target average pixel values may be determined.

For each target average pixel value interval halving may be used to search for a particular TET value such that if the scene were to be captured with the particular TET value the resulting image would have the target average pixel value or about the target average pixel value. One possible method for determining a particular TET value based on a target average pixel value is shown in the pseudocode below.

At lines 1 and 2 of Table 1 initial low and high TET values lo tet and hi tet respectively are defined. These values may be chosen at or near the extreme ends of the range in which the ultimate TET value mid tet is expected to fall. In some embodiments a broader range or a narrower range may be used.

Lines 3 11 depict a loop that may be iterated t times. The value of t may be selected so that mid tet converges after t iterations of the loop. In some embodiments t may be as low as 2 or 3 but in other embodiments t may be 5 10 20 50 100 or some other value. Nonetheless at line 4 mid tet is set to be the average midpoint of lo tet and hi tet.

At line 5 the pixel value of the image at mid tet is determined. One possible way of making this determination is to synthetically expose the HDR image as if the image were captured using a TET of mid tet. The resulting image which may be an HDR image may be tonemapped and the average pixel value of the tonemapped image pixel value at mid tet which may be an LDR value may be determined.

Synthetic exposure is one way of obtaining an LDR image from an HDR image. Suppose that an HDR image was captured using a TET of T. This HDR image can be synthetically exposed to a TET of p times T by multiplying the pixel values of each pixel in the HDR image by p p may be greater than or less than one . In the resulting image all pixel values above 255 are clipped to 255. This process simulates the appearance of the scene as if it were captured using a TET of p times T with LDR imaging. Alternatively a non log HDR histogram of an HDR image with or without center weighted averaging applied may be used. After this step whatever processing would normally be applied to the linear image such as tonemapping may be emulated in order to produce a synthetic LDR image. The average value in that image applying center weighted averaging if desired may be taken and compared to the target pixel value.

At lines 6 11 if this resulting average pixel value is greater than the target average pixel value then mid tet is too high and hi tet is set to be mid tet in order to reduce mid tet in the next iteration. On the other hand if the resulting average pixel value is less than or equal to the target average pixel value then the mid tet is too low and lo tet is set to be mid tet in order to increase mid tet in the next iteration.

The process illustrated by Table 1 may be repeated for each TET value that may be used in the payload burst structure. Thus if the scene is determined to be an LDR scene the process of Table 1 may be carried out for one TET. However if the scene is determined to be an HDR scene the process of Table 1 may be carried out for two or more TETs e.g. the short TET the long TET and or the fallback TET all three of which may have different target average LDR pixel values.

In step the second group of images may be captured. The number of images captured and the arrangement of TETs used to capture these images may be referred to as a payload burst. For example in second image capture includes three images of a scene each captured with a TET identified in step . It should be understood that the TETs identified in step may be the same or different than the TETs used to capture images in step . Additionally it is possible that all three images in second image capture are captured with the same or similar TETs.

In step images from the second group of images may be combined. Combining images may include aligning two or more of the images. In some instances images may be aligned globally i.e. aligning whole images as opposed to portions of images locally i.e. aligning portions of images or possibly both globally and locally. Further combining two or more images may also include merging them to form an output image . This merging may be carried out in accordance with any image fusion technique now known or developed in the future.

Merging the images in the second group of images may result in output image being sharper and or better exposed than any of the individual images in the second group. For instance if some of the images in second image capture are captured with the same or similar TETs these images may be merged to reduce noise in one or more sections of the images. Alternatively or additionally if the images in second image capture are captured with two or more different TETs at least some images with different exposure times may be merged according to HDR procedures. Regardless the output image may be stored on a computer readable medium and or displayed on an output medium such as the multi element display of .

In some embodiments the arrangements of various possible payload burst structures may be determined based on the TETs determined in step as well as an understanding of combining images step . While numerous arrangements of payload burst structures may be possible three examples are described herein.

Table 2 illustrates these examples. In the first example the scene type is LDR. In this example the payload burst structure includes four images captured sequentially and may be referred to as an LDR burst structure. Each T in the Payload Burst Structure column of Table 2 may represent a captured image. Each of these images may be captured using the same or a similar TET that was determined in step . In some embodiments fewer or more images may be captured in an LDR payload burst. For example as few as one or as many as ten or more images may be included.

Regardless of the number of images captured some of these images may be aligned and combined in step . For instance if m images are captured in the payload burst the sharpest one of these images may be selected as a primary image and the remaining m 1 images may be considered secondary images. In some implementations the sharpness of an image may be measured by the image s resolution and or boundaries between zones of different tones and or colors in the image. Alternatively or additionally other sharpness measurements may be used.

Further zero or more of the m 1 secondary images may then be aligned and merged with the sharpest image. For instance alignment may be attempted between each of the secondary images and the sharpest image respectively. If the alignment fails for parts of a respective secondary image those parts may be discarded and not combined with the primary image. In this way the sharpest image may be denoised with information from some or all of the secondary images.

In the second example the scene type is HDR. In this example the payload burst structure includes ten images captured according to a pattern of long and short TETs and may be referred to as an HDR burst structure. In the Payload Burst Structure column of Table 2 each L may represent an image captured with the long TET each S may represent an image captured with the short TET. Thus the pattern of L S L L S L L S L L may indicate that the first image of the payload burst is captured using the long TET the second image is captured using the short TET the third and fourth images are captured using the long TET the fifth image is captured using the short TET the sixth and seventh images are captured using the long TET the eighth image is captured using the short TET the ninth image is captured using the long TET and the tenth image is captured using the long TET.

The long and short TETs may be determined based on the results of image processing . Thus the long and short TETs may be selected so that the resulting images captured with these TETs can be combined using HDR procedures. The long TET may be used to capture the details in dark sections of the scene while the short TET may be used to capture the details in bright sections of the scene.

Examples of short TET values may include TETs of 1 millisecond 2 milliseconds and or 8 milliseconds while examples of long TET values may include TETs of 20 milliseconds 40 milliseconds and or 80 milliseconds. However short and long TETs may take on different values.

Despite the payload burst in the second example having a particular structure in Table 1 other structures may be used. For example payload burst structures of L S L S L S L S L S or L L S L L S L L S L could potentially provide suitable patterns of long and short TETs. Further some payload burst structures may include medium TETs denoted by an M . Thus additional example payload bursts may include S M L L L S M L L L or S M L SML SML L structures.

In some embodiments a payload burst structure may include more or fewer than ten images. Generally speaking the determining the length of the payload burst structure involves a tradeoff. On one hand a long payload burst i.e. a payload burst with a large number of image captures is desirable because the likelihood of one or more of the captured image being well exposed and sharp is increased. On the other hand if the payload burst is too long the likelihood of ghosting due to movement in the scene is also increased. Additionally darker scenes may benefit from images captured using a longer TET so that more light can reach the recording surface. Therefore the payload burst structure may be based possibly in part on these considerations.

In the third example the scene type is also HDR. However in this example the associated payload burst structure which also may be referred to as an HDR burst structure includes seven images captured according to a pattern of long and short TETs followed by three fallback TETs. Each F may represent an image captured with the fallback TET and the fallback TET may take on a value different from both the long and short TETs.

Regardless of the type of payload burst structure the images of an HDR scene may be aligned and combined. Images captured using the short TET may be referred to as short images for convenience and images captured with the long TET may be referred to as long images for convenience.

In some embodiments the sharpest short image may be selected from the short images as the primary short image. Zero or more of the remaining secondary short images may then be aligned and merged with the primary short image. For instance alignment may be attempted between each of the secondary short images and the primary short image respectively. If the alignment fails for parts of the respective secondary short image those parts may be discarded and not combined with the primary short image. In this way the sharpest short image may be denoised with information from some of the secondary short images.

The same or a similar process may be undertaken for the long images. For example the sharpest long image may be selected from the long images as the primary long image. Zero or more of the remaining secondary long images may then be aligned and merged with the primary long image. Alignment may be attempted between each of the secondary long images and the primary long image respectively. If the alignment fails for parts of the respective secondary long image those parts may be discarded and not combined with the primary long image.

The resulting combined short image e.g. the sharpest short image possibly denoised by information from zero or more secondary short images and the resulting combined long image e.g. the sharpest long image possibly denoised by information from zero or more secondary long images may then be aligned. If the alignment succeeds these two images e.g. both LDR images may be combined according to HDR procedures. For instance they may be combined into an HDR image and the HDR image may then be tonemapped so that its brightness falls within a range commensurate with the display abilities of convention video output devices e.g. pixel values between 0 and 255 inclusive . The resulting tonemapped HDR image may be designated as output image . In some embodiments if the signal to noise ratio of part or all of output image is still lower than a threshold value a de noising procedure may be applied to further reduce noise. Additionally output image may also be sharpened possibly after applying the de noising procedure. In general various types of HDR fusion algorithms such as Exposure Fusion or Local Laplacian Filters may be used to merge short and long images. If medium TETs are used in the payload burst structure these HDR fusion algorithms may be applied to one or more medium images as well.

If the alignment fails between the combined short image and the combined long image then the HDR processing fails. However if fallback images were captured one or more of the fallback images may be used to form output image . For instance the sharpest fallback image may be selected. Zero or more of the remaining secondary fallback images may be aligned and combined with the sharpest fallback image carried out in a similar fashion as the processes described above for the short and long images. For payload burst structures without fallback images in which alignment fails the combined long or short image may be used to form output image .

Example payload burst structures are further illustrated in . Payload burst structure may represent a payload burst for an LDR scene payload burst structure may represent a payload burst for an HDR scene and payload burst structure may represent a payload burst for an HDR scene with fallback. Each burst structure shows the approximate duration of the TET for each image capture. For example for burst structures and short TETs are of a lesser duration than long TETs and the duration of fallback TETs are between that of short and long TETs.

In the vertical dotted lines depict epochs in time at which an image capture can begin. Some electronic image sensors operate at a particular frequency such as 30 hertz. A sensor operating at this frequency can capture images per second or approximately one image every 33.33 milliseconds. Thus the duration between the epochs in may be 33.33 milliseconds. Nonetheless for low light scenes the exposure time may be longer than 33.33 milliseconds and the operating frequency of the image sensor may be adjusted downward accordingly. In this example a TET longer than 30 milliseconds can be achieved by increasing the gain component of the TET.

For some sensors image capture may be activated only at the end of such an epoch. Thus as shown in each image capture ends at the edge of a respective epoch. However due to their varying TETs some image captures may begin at different times. Alternatively for some image sensors image capture may be activated only at the beginning of an epoch.

It should be understood that various other techniques procedures and or algorithms may be used determine a payload burst structure. Thus the discussion above accompanying Table 2 and above merely provides some possible payload burst structures. Other techniques may be used without departing from the scope of the embodiments herein.

For example in some embodiments the average pixel value of the tonemapped image e.g. step 5 in Table 1 may be calculated using either an RMS or SMR method based on the length of the TET. The RMS average of n values may be calculated as 

For shorter TETs e.g. the short TETs and or fallback TETs of an HDR payload burst or possibly the TETs of an LDR burst it may be desirable to attempt to increase or maximize the brightness of the pixels without clipping them. Thus taking the RMS average of the pixel values puts more weight on the brighter pixels. For longer TETs e.g. the long TETs of an HDR payload burst it may be desirable to emphasize the darker parts of the scene. Thus taking the SMR average of the pixel values puts more weight on the darker pixels.

Another variation is illustrated in the context of burst structure of . This variation involves selecting the sharpest short image. For sake of argument assume that the sharpest long image is long image . Then instead of selecting the sharpest short image as the primary short image the short image that was captured closest in time to the sharpest long image may be selected as the primary short image. This could be for instance short image which immediately precedes long image . Then the remaining secondary short images may be aligned with and or combined into as the alignments permit the primary short image. Alternatively if the image sensor captures images at the beginning of the epoch a short image following perhaps immediately following the sharpest long image may be selected as the primary short image. As an alternative a temporally adjacent short image long image pair may be selected so that together these images maximize a combined sharpness metric.

In some embodiments the payload burst structure may be based on whether the image sensor captures images with an exposure time of less than the readout time of the images sensor s pixels referred to herein as sub readout exposure times at the beginning or end of an image capture epoch. If the image sensor captures sub readout exposure times at the end of the image capture epoch the payload burst structure may include one or more two TET subsequences of a short TET immediately followed by a long TET. If the image sensor captures sub readout exposure times at the beginning of the image capture epoch the payload burst structure may include one or more two TET subsequences of a long TET immediately followed by a short TET.

One possible advantage of selecting the primary long image in this fashion is to reduce motion blur or ghosting effects. For example if a scene contains motion merging multiple images captured from the scene may result in the motion appearing in the merged image as a blur. In general the greater the difference in time between when the images are captured the greater this blurring. By selecting primary long and short images that are close to one another in time the ghosting may be reduced

It should be noted that the steps illustrated by flow chart may be carried out by various types of cameras and or computing devices such as those exemplified by digital camera device and or computing device . Further it may be possible to distribute aspects of some individual steps between multiple cameras and or computing devices. For example first image capture and second image capture may occur on digital camera device . Further image processing and combining images may occur on a different computing device. Other combinations of distributing individual steps may also exist.

At step based at least on the first plurality of images a TET sequence for capturing images of the scene may be determined. Determining the TET sequence may involve determining a scene histogram based on at least one of the images in the first plurality of images of the scene. The scene histogram may be based on downsampling and combining the images in the first plurality of images of the scene.

In some embodiments additional histograms may be stored in a training image database. These histograms may be based on at least two images captured of respective scenes. The histograms may be associated with respective dynamic range parameters where the respective dynamic range parameters indicate whether the respective scenes are LDR or HDR. Determining the TET sequence may further involve comparing the scene histogram to at least one histogram in the training image database and based on an outcome of the comparison determining a dynamic range parameter for the scene from the respective dynamic range parameters where the TET sequence is further based on the dynamic range parameter for the scene.

If the dynamic range parameter for the scene indicates that the scene is LDR then determining the TET sequence may involve selecting a single TET value to use in the TET sequence. If the dynamic range parameter for the scene indicates that the scene is HDR then determining the TET sequence may involve selecting a short TET value and a long TET value to use in the TET sequence. If the scene is HDR determining the TET sequence may also involve selecting a fallback TET value to use in the TET sequence.

In some embodiments the histograms in the training database may also be associated with respective target pixel values. In these embodiments determining the TET sequence may further involve determining one or more target pixel values for the scene based on the respective target pixel values in the training database selecting one or more TET values to use in the TET sequence based on the one or more determined target pixel values.

At step a second plurality of images of the scene may be captured by the image sensor. The images in the second plurality of images may be captured using the TET sequence. At step based at least on the second plurality of images an output image of the scene may be constructed.

Determining the TET sequence may involve determining that the scene is an LDR scene and defining a common value for TETs in the TET sequence. Constructing the output image of the scene may involve aligning and combining one or more of the images in the second plurality of images captured using the common value.

Alternatively or additionally determining the TET sequence may involve determining that the scene is an HDR scene and defining a short TET value and a long TET value. Constructing the output image of the scene may involve aligning and combining i one or more of the images in the second plurality of images captured with the short TET value and ii one or more of the images in the second plurality of images captured with the long TET value.

Alternatively or additionally determining the TET sequence may involve determining that the scene is an HDR scene and defining a short TET value a long TET value and a fallback TET value. Constructing the output image of the scene may involve attempting to align i one or more of the images in the second plurality of images captured with the short TET value with ii one or more of the images in the second plurality of images captured with the long TET value. Constructing the output image of the scene may further involve determining that alignment of i the one or more of the images in the second plurality of images captured with the short TET value and ii the one or more of the images in the second plurality of images captured with the long TET value has failed. Constructing the output image of the scene may also involve in response to determining that the alignment has failed aligning and combining one or more of the images in the second plurality of images captured with the fallback TET value to form the output image.

At step a second plurality of images of the scene may be captured by the image sensor wherein the images in the second plurality of images are captured sequentially in an image sequence using a sequence of TETs corresponding to the TET sequence. The image sequence may include a three image sub sequence of a first long TET image captured using the long TET followed by a short TET image captured using the short TET followed by a second long TET image captured using the long TET. Alternatively the image sequence may include a three image sub sequence of a first long TET image captured using the long TET followed by a second long TET image captured using the long TET followed by a short TET image captured using the short TET. The pattern in the subsequence may be chosen based on characteristics of the camera device e.g. whether a rolling shutter is used and or other image sensor characteristics and or characteristics of the scene e.g. average pixel value or some other metric . Regardless the sub sequence may repeat one or more times through the payload burst structure.

At step based on one or more images in the image sequence an output image may be constructed. In some embodiments the image sequence may include a two image sub sequence of a primary short TET image followed by a primary long TET image. The image sequence may also include one or more secondary short TET images and one or more secondary long TET images. The primary short TET image and the secondary short TET images may be captured using the short TET and the primary long TET image and the secondary long TET images may be captured using the long TET. Constructing the output image may involve forming a combined short TET image where the combined short TET image includes the primary short TET image and at least part of the one or more secondary short TET images forming a combined long TET image where the combined long TET image includes the primary long TET image and at least part of the one or more secondary long TET images and forming the output image where the output image includes at least part of the combined short TET image and at least part of the combined long TET image.

Alternatively or additionally the image sequence may include a long TET image captured using the long TET. Constructing the output image may involve determining that the long TET image is a sharpest image of all images in the image sequence captured using the long TET. Based on the long TET image being the sharpest image of all images in the image sequence captured using the long TET selecting the long TET image as a primary long TET image and selecting as a primary short TET image an image captured using the short TET that is adjacent to the primary long TET image in the image sequence. Constructing the output image may further involve forming a combined short TET image where the combined short TET image includes the primary short TET image and at least part of one or more images from the image sequence that were captured using the short TET forming a combined long TET image where the combined long TET image includes the primary long TET image and at least part of one or more images from the image sequence that were captured using the long TET and forming the output image where the output image includes at least part of the combined short TET image and at least part of the combined long TET image.

In some examples the primary short TET image may immediately precede the primary long TET image in the image sequence. The short TET image that immediately precedes the primary long TET image in the image sequence may be selected as the primary short TET image based on image capture ending at the edge of respective image capture epochs.

In other examples the primary short TET image may immediately follow the primary long TET image in the image sequence. The short TET image that immediately follows the primary long TET image in the image sequence may be selected as the primary short TET image based on image capture beginning at the edge of respective image capture epochs.

The steps depicted in may be carried out by a camera device such as digital camera device a computing device such as computing device and or by two or more distinct devices. For instance in some embodiments the image capture steps may be performed by an image sensor and the remaining steps may be performed by a separate computing device. Other arrangements are possible. Further the flow charts depicted in and or may be modified according to the variations disclosed in this specification and or the accompanying drawings.

The above detailed description describes various features and functions of the disclosed systems devices and methods with reference to the accompanying figures. In the figures similar symbols typically identify similar components unless context indicates otherwise. The illustrative embodiments described in the detailed description figures and claims are not meant to be limiting. Other embodiments can be utilized and other changes can be made without departing from the spirit or scope of the subject matter presented herein. It will be readily understood that the aspects of the present disclosure as generally described herein and illustrated in the figures can be arranged substituted combined separated and designed in a wide variety of different configurations all of which are explicitly contemplated herein.

With respect to any or all of the message flow diagrams scenarios and flow charts in the figures and as discussed herein each step block and or communication may represent a processing of information and or a transmission of information in accordance with example embodiments. Alternative embodiments are included within the scope of these example embodiments. In these alternative embodiments for example functions described as steps blocks transmissions communications requests responses and or messages may be executed out of order from that shown or discussed including in substantially concurrent or in reverse order depending on the functionality involved. Further more or fewer steps blocks and or functions may be used with any of the message flow diagrams scenarios and flow charts discussed herein and these message flow diagrams scenarios and flow charts may be combined with one another in part or in whole.

A step or block that represents a processing of information may correspond to circuitry that can be configured to perform the specific logical functions of a herein described method or technique. Alternatively or additionally a step or block that represents a processing of information may correspond to a module a segment or a portion of program code including related data . The program code may include one or more instructions executable by a processor for implementing specific logical functions or actions in the method or technique. The program code and or related data may be stored on any type of computer readable medium such as a storage device including a disk drive a hard drive or other storage media.

The computer readable medium may also include non transitory computer readable media such as computer readable media that stores data for short periods of time like register memory processor cache and or random access memory RAM . The computer readable media may also include non transitory computer readable media that stores program code and or data for longer periods of time such as secondary or persistent long term storage like read only memory ROM optical or magnetic disks and or compact disc read only memory CD ROM for example. The computer readable media may also be any other volatile or non volatile storage systems. A computer readable medium may be considered a computer readable storage medium for example or a tangible storage device.

Moreover a step or block that represents one or more information transmissions may correspond to information transmissions between software and or hardware modules in the same physical device. However other information transmissions may be between software modules and or hardware modules in different physical devices.

While various aspects and embodiments have been disclosed herein other aspects and embodiments will be apparent to those skilled in the art. The various aspects and embodiments disclosed herein are for purposes of illustration and are not intended to be limiting with the true scope and spirit being indicated by the following claims.

