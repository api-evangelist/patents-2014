---

title: Role based access control for connected consumer devices
abstract: A processing device authenticates a computing device of a user to a user account. The processing device determines a role associated with the user account, and additionally determines access permissions to one or more resources based on the role. The processing device then grants to the computing device access to the one or more resources to be protected in an internet of things (IoT) solution.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09473504&OS=09473504&RS=09473504
owner: Ayla Networks, Inc.
number: 09473504
owner_city: Sunnyvale
owner_country: US
publication_date: 20141015
---
Many modern appliances consumer devices and other devices include embedded systems that are configured to perform one or more dedicated functions. However most embedded systems of such devices do not include networking capabilities role based access control capabilities remote interface capabilities remote control capabilities or related capabilities. Designing such functionality into an embedded system designing application programming interfaces APIs for accessing such functionality designing web services capable of communicating with and controlling the embedded system via this added functionality and designing applications for taking advantage of this functionality can consume considerable resources of the device manufacturer.

Moreover access control for most devices that include embedded systems is hard coded into the embedded system and is inflexible. At design time a manufacturer typically sets up a single access policy for an embedded system and that single access policy persists for the life of the device for all users regardless of who they are.

The Internet of Things IoT evolution has enabled consumers and original equipment manufacturers OEMs to interact with their connected devices in unprecedented ways. Consumers who buy connected devices expect to be able to control their devices in a secure manner. They should also be able to share their devices with their friends and family while still maintaining control over how and when their devices are accessed. For OEMs building connected devices obtaining data from their devices offers a wealth of information. Typical use cases include analytics auditing and troubleshooting. Due to the large number of different entities who may request access to network connected devices and their varying needs it is beneficial to provide different levels of access based on an entity s role e.g. within a company in a residence etc. . Additionally for legal privacy and safety reasons it is important for access control policies to be enforced while users interact with their devices.

Embodiments are directed to a network connected device platform also referred to as an internet of things IoT cloud platform or simply an IoT platform that provides flexible control of access to network connected devices and other resources. The IoT platform generates roles and assigns the roles to user accounts. Each role grants a user account access to a set of resources. Examples of roles include an end user or consumer role an original equipment manufacturer OEM administrator role an OEM account manager role a dealer role a technician role and so forth. An OEM administrator role may have access to all OEM user profiles of an organization and end user profiles of those who are consumers of the OEMs products. A dealer role may have access to a consumers profile and other information if the consumer grants the dealer access. Resources may be network connected devices attributes or parameters of network connected devices other users and so on. The IoT platform may at any time generate new roles with a unique set of permissions to resources and apply the new roles to an existing set of resources that are in the field e.g. that have already been sold to consumers . Accordingly embodiments provide a flexible framework for managing access to resources and in particular to network connected devices such as embedded systems.

In one embodiment a processing device authenticates a computing device of a user to a user account. The processing device determines a role associated with the user account wherein the role controls access permissions to one or more resources the one or more resources comprising one or more network connected devices. The processing device provides a token to the computing device the token usable to determine the role associated with the user account. The processing device or another processing device system or service then grants to the computing device access to the one or more resources based on the token.

Referring now to the figures is a block diagram depicting an example network architecture including remotely accessible embedded systems and computing devices that interact with the embedded systems. The network architecture includes multiple devices A C and a computing device connected to a local area network LAN A. The network architecture further includes devices D E connected to another LAN . The devices A E are devices with embedded systems A E and may include for example electrical appliances such as refrigerators ovens washers driers dishwashers thermostats alarms air conditioners televisions radios receivers amplifiers and so forth. The devices A E may also include consumer devices such as digital watches music players game consoles digital cameras printers and so forth. Other examples of devices A E include stationary devices such as HVAC systems traffic lights factory controllers signs electronic billboards sprinkler systems and irrigation control systems as well as medical devices. Devices A E may also be any other type of device that includes an embedded system.

An embedded system A E is a class of computing device that is embedded into another device as one component of the device. The device A E typically also includes other hardware electrical and or mechanical components that may interface with the embedded system A E. Embedded systems A E are typically configured to handle a particular task or set of tasks for which the embedded systems A E may be optimized. Accordingly the embedded systems A E may have a minimal cost and size as compared to general computing devices.

The embedded systems A E may each include a communication module not shown that enables the embedded system A E and thus the device A E to connect to a LAN A B or to a wireless carrier network e.g. that is implemented using various data processing equipment communication towers etc. . The communication module may be configured to manage security manage sessions manage access control manage communications with external devices and so forth. In one embodiment the communication module is configured to communicate using Wi Fi . Alternatively the communication module may be configured to communicate using Bluetooth Zigbee Internet Protocol version 6 over Low power Wireless Area Networks 6LowPAN power line communication PLC Ethernet e.g. 10 Megabyte Mb 100 Mb and or 1 Gigabyte Gb Ethernet or other communication protocols. If the communication module is configured to communicate with a wireless carrier network then the communication module may communicate using Global Systems for Mobile Communications GSM Code Division Multiple Access CDMA Universal Mobile Telecommunications Systems UMTS 3GPP Long Term Evaluation LTE Worldwide Interoperability for Microwave Access WiMAX or any other second generation wireless telephone technology 2G third generation wireless telephone technology 3G fourth generation wireless telephone technology 4G or other wireless telephone technology. One example of an embedded system is described in greater detail below with reference to .

Referring back to the LANs A B may each include a router switch bridge or other network device not shown that enables communication between multiple devices connected to the LAN A B. The network device may provide wired connections to the LAN using for example Ethernet ports universal serial bus USB ports and or Firewire ports. The network device may additionally provide wireless connections to the LAN using for example a Wi Fi transceiver.

Some embedded systems A E may not support any of the communication types supported by the network device. For example device A may support Zigbee and device B may support Bluetooth. To enable such devices to connect to the LAN A the LAN A may include a gateway device connected to the network device via one of the connection types supported by the network device e.g. via Ethernet or Wi Fi . The gateway device may additionally support other communication protocols such as Zigbee PLC and or Bluetooth and may translate between supported communication protocols. Accordingly some devices may connect to the LAN A through the gateway device .

The LANs A B or wireless carrier are connected to a wide area network WAN . The WAN may be a private WAN e.g. an intranet or a public WAN such as the Internet or may include a combination of a private and public network. The LANs A B may include a router and or modem e.g. a cable modem a direct serial link DSL modem a Worldwide Interoperability for Microwave Access WiMAX modem an long term evolution LTE modem etc. that provides a connection to the WAN .

The WAN may include or connect to a server computing device . The server computing device may include a physical machine and or a virtual machine hosted by a physical machine. The physical machine may be a rackmount server a desktop computer or other computing device. In one embodiment the server computing device includes a virtual machine managed and provided by a cloud provider system. Each virtual machine offered by a cloud service provider may be hosted on a physical machine configured as part of a cloud. Such physical machines are often located in a data center. The cloud provider system and cloud may be provided as an infrastructure as a service IaaS layer. One example of such a cloud is Amazon s Elastic Compute Cloud EC2 .

The server computing device hosts one or more WAN accessible services which may be a web based service and or a cloud service e.g. a web based service hosted in a cloud computing platform . A WAN accessible service may maintain a session e.g. via a continuous or intermittent connection with one or more of the embedded systems A E. Alternatively the WAN accessible service may periodically establish sessions with the embedded systems A E. Via a session with an embedded system A E WAN accessible service may issue commands to the embedded system and or receive status updates from the embedded system. The commands may be commands to change a state of one or more parameters of a device controllable by the embedded system. For example if the embedded system is embedded in a heater or thermostat then the commands may include commands to increase or decrease a temperature. In another example if the embedded system is embedded in a home automation system then the commands may include commands to turn on or off lights.

Status updates received from the embedded systems A E may identify values or states of some or all detectable parameters of devices A E that the embedded systems are included in. Status updates may also include fault information statistical device usage information trace data and or other information. Such values states and or other information may change based on direct user interaction with the devices. Such values states and or other information may also change responsive to commands sent to the embedded systems A E by the WAN accessible service and or by computing devices A B. By maintaining or periodically establishing sessions with the embedded systems A E the WAN accessible services may maintain up to date information on the states of the devices A E.

Computing devices A B may include portable devices such as electronic book readers portable digital assistants mobile phones laptop computers portable media players tablet computers cameras video cameras netbooks notebooks and the like. Computing devices A B may also include traditionally stationary devices such as desktop computers gaming consoles digital video disc DVD players media centers and the like. Computing devices A B may connect to the WAN and or to the LANs A B.

Computing devices A C may include a remote control application or multiple remote control applications A B that can receive information for devices A E and control the devices A E. The remote control application A B is configured to interface with and or control one or more of the devices A E via the devices embedded systems A E. The remote control application A E may be programmed to run on various operating systems such as Windows operating systems Unix operating systems iOS operating systems Android operating systems and Java operating systems to name a few. The remote control application A B may also be configured as firmware or as hardware or as some combination of software firmware and or hardware. The remote control application A B may include a graphical user interface GUI that enables users to interact with and control devices A E in an intuitive and user friendly manner. A user may interact with the GUI to cause the remote control application to generate notifications commands property updates and other messages for the devices represented in the GUI.

In one embodiment the computing devices A B include separate remote control applications for each of the embedded systems A E. Alternatively the computing devices A B may include a single remote control application that is capable of communicating with and controlling embedded systems A E for multiple different devices A E.

While computing devices A B are connected to WAN or directly to a LAN A B a remote control application A B may establish a session with the WAN accessible service . The WAN accessible service may provide an interface for indirectly controlling and monitoring one or more of the devices A E.

Server computing device includes an access control manager that performs authorization and authentication of remote control applications A B. Access control manager additionally manages roles and assigns roles to user accounts. Each role provides a set of permissions or privileges with regards to one or more resources e.g. to one or more devices A E one or more user resources etc. . Once a remote control application A B successfully completes authentication e.g. by providing proper credentials to the access control manager the access control manager generates a token and provides the token to the remote control application A B. The remote control application A B may then provide the token to one or more WAN accessible services to gain access to resources such as devices A E.

Responsive to receiving a token from a remote control application A B the WAN accessible service determines a role or roles of a user account associated with the remote control application based on the token. This indicates to the WAN accessible service what resources the remote control application A B should have access to. WAN accessible service may then provide information and controls for one or more devices A E and or access to one or more user resources in accordance with the determined role or roles.

For example a role associated with a user account may include permissions to control a state of device A. If a user desires to change a state of device A the user may issue a command via the remote control application A and that command may be sent to the WAN accessible service . The WAN accessible service may then forward the command on to the appropriate embedded system for execution.

The role associated with the user account may additionally include permissions to view state information of the device A. Accordingly when the WAN accessible service receives updated state information for device A from embedded system A the WAN accessible service may forward the state information on to the remote control application A. Thus based on his assigned role a user may be able to connect to view status information for and control the devices A E from anywhere he has access to the Internet. The role of the user account may additionally include permissions to access user resources e.g. information about particular users or a particular class of users .

In an example remote control application A may be associated with a first user account having a first role and remote control application B may be associated with a second user account also having the first role. Additionally computing device C may connect to WAN accessible services using a browser application such as Chrome Internet Explorer Safari and so on. Alternatively computing device C may connect to the WAN accessible services via an agent not shown that is configured to interface with the WAN accessible services . The browser application or agent may be associated with a third user account having a second role.

Continuing the example the first user account associated with remote control application A may be associated with an end user or owner role and may have access to current status information and control of devices D E all of which may be owned by a user of computing device A. However the user may not own devices A C and so the role may not have access to view or control these devices. The second user account associated with remote control application may be associated with the owner role and thus have access to view devices A C that are owned by the second user.

The third user account associated with computing device C may be associated with an OEM role of a manufacturer of some or all of the devices A E. In this example assume that devices A D and E were all manufactured by the OEM associated with the OEM role. Thus the third user account may have access to analytical information debug information fault information statistics etc. on devices A D and E. This information may be anonymized to ensure privacy of the device owners. Such data may or may not be available to the end users who own these devices e.g. to the first role . However the OEM role may not have access to control the devices. Accordingly the permissions of each of the roles may be slightly to drastically different providing different levels of permissions and to different sets of devices.

The WAN accessible services and access control manager may be components of an IoT platform that OEMs can leverage to quickly and easily create new network connected device products. The IoT platform will handle authorization and authentication network connection information gathering and analytics device management role based access control and more. The access control manager of the IoT platform provides a framework for setting up and managing roles user accounts and resources to enable flexibility in managing devices and access to device information.

Access control manager maintains a roles data structure a user accounts data structure and a resources data structure . Each of the data structures may be a separate table spreadsheet database or other data structure. Alternatively the data structures may be combined into a single data structure.

Resources data structure includes entries for every resource. Examples of resources include devices users firmware images device templates and so forth. Device resources may include particular devices and or components attributes settings parameters data etc. of particular devices. User resources may include user account information user demographic information user behaviors user purchase history user historical data and so forth. Additionally user resources may be grouped based on OEM based on divisions within an OEM based on dealer or in other ways. Some access control privileges may be to specific groups of user resources e.g. to all user resources associated with an OEM . A device template is a model of a device that captures the physical and behavioral attributes of the device. Some resources may have sub resources which may be hierarchically arranged. For example device resources may have sub resources for settings parameters OEM data e.g. including analytical trace statistical and other data that might not be provided to end users user data and so on. User resources may have sub resources for different types of user data such as user address user phone number user owned devices etc.

The device resource may be associated with one or more tags. Each tag may represent one or more attributes that are used to determine which roles have access to the device resource and or sub resources as well as the level of access e.g. read or write access . The tags may have fixed values or may have dynamic values that vary based on conditions.

In an example the device may include an environment tag which may be changed based on whether the device is at a manufacturer has been shipped to a dealer or distributor or has been purchased by an end user. The environment tag may have a residential environment value when the device is registered by an end user an enterprise environment value before the device is shipped to a retailer or dealer and a commercial environment value after the device has been shipped to a dealer or retailer for example.

In another example the device may have a location tag that may change based on a location of the device . For example a value of the location tag may automatically update based on an internet protocol IP address of the device. The device may also include a model tag e.g. HVAC watch etc. which may be fixed. The device may also include a proximity tag that may indicate a proximity of a remote control application or other device to enable access. For example a proximity tag may indicate that a mobile device with a remote control application is on a same LAN as the device or that the mobile device is paired with the device via Bluetooth. Any of these or other tags may be used to determine privileges to access resources.

Multiple different tags may be associated with the device . Additionally one or more of the sub resources may also be associated with tags. These tags may be used to determine which roles have access to specific sub resources.

Referring back to the roles data structure contains an entry for each role. Each role may have a unique set of privileges for accessing resources. In one embodiment each role includes one or more tags each of which may be associated with one or more resources. The tags may have fixed or variable values. In one embodiment in order for a role to have a privilege to access a resource a value of a tag associated with that role should be equal to a value of a similar tag associated with the resource. For example if a tag associated with a role is location North America then that role has a privilege to access resources that are located in North America. Tags may similarly be used to restrict access to resources by remote control applications running on mobile devices that are on a same LAN as a device for example.

Each OEM may have its own subset of roles associated with that OEM. Each OEM will have an OEM administrator role that may have all privileges associated with devices manufactured by that OEM including privileges to create new roles. In one embodiment the OEM administrator role does not have privileges to view user data for or control network connected devices of end users.

The access control manager may manage roles resources and user accounts for multiple different OEMs dealers suppliers customers and so on. Each OEM may have a different organizational structure and or sales channels and may set up a different role hierarchy that may be specific to that OEM and apply to the resources associated with that OEM e.g. to devices manufactured by that OEM and customers of that OEM . Access control manager managers roles resources and user accounts in a flexible manner that can be adapted to any use case addressing both enterprise and consumer concerns.

Access control manager provides granular and flexible controls over which users can have access to what resources as well as the level of access at any desired level of granularity. Each of the roles may have very granular access to one or more resources based on a rule or set of rules set up by an administrator. For example within a device there may be several options such as viewing data changing settings programming the device and so on. A customer role might have privileges to change the settings e.g. change a temperature of a thermostat but not have access to program the device. A dealer role might have privileges to program the device but not to change settings of the device.

The user accounts data structure includes an entry for each user account. User accounts may include information such as user preferences settings user information user authorization and authentication data e.g. name and password biometric data etc. devices owned by users and roles associated with the users.

Role creator creates new roles. A user account with role creation privileges may create a new role. For example an OEM administrator role has role creation privileges. A device owner role customer role may also have role creation privileges e.g. to create roles for children in the owner s household . A user account with an OEM administrator role may generate any number of roles that will provide any level of privileges with regards to devices manufactured by that OEM. The OEM administrator or other role creator may define which resources and sub resources e.g. attributes and properties of a resource can be accessed and whether they can be accessed for read or write actions. For example an OEM administrator may generate one or more end user also referred to as customer or owner roles OEM case manager roles technician roles dealer roles and so forth. Different OEMs will likely have different sets of roles which may have different permissions.

When a new role is to be created the creator of the new role can give to the new role any privileges that the creator has. For example an OEM administrator can grant any privileges for devices manufactured by the OEM and for any customers of the OEM. However an OEM administrator would be unable to grant permissions to devices of another OEM when the OEM administrator generates a new role.

In a company organizations may be structured using various criteria such as product responsibility location and so on. Access control manager enables roles to be created based on an organizational structure of a company that enable employees to be granted privileges based on the organization they belong to. For example a company may have a heating ventilation and air conditioning HVAC division and a safety division. An employee of the company may be given access to oversee all connected thermostats but not other wirelessly enabled products such as smoke and CO detectors belonging to the safety division. Using the access control manager an OEM administrator can create a Thermostat Administrator role to grant thermostat administrators super user like access to all the thermostat models that the company has in the field. The OEM administrator can also create a Thermostat Technician role with privileges to only view part of the data that a thermostat administrator can view. This flexibility allows for policies to be defined that follow a company s organizational structure.

Roles may also be created based on sales channels or distribution channels of an OEM. Many products sold through commercial channels are distributed through dealers. Examples are installations in commercial buildings hospitals or residences. The dealer typically performs the installation and has a maintenance contract with the customer. With this distribution model there are many considerations. In some instances the dealer should have enough access to a unit after installation that would allow for the dealer to monitor the installed systems e.g. for maintenance troubleshooting technical assistance etc. . In other instances the dealer may lose all access to a device after the device is installed in a customer s home and programmed. For example the customer may want to limit how much of the data the dealer can access due to privacy or other considerations. Thus the customer may control whether and how much access the dealer continues to have to the device after installation. Access control manager may set up roles that satisfy these competing criteria. Thus different sets of roles may be created and used for different distribution channels.

Roles may also be created based on retail distribution of devices manufactured by an OEM. In this model products are purchased by customers directly from retailers. The customer may own a mix of devices from the same OEM some purchased through a dealer and some from a retailer. In this case the customer may want to access all owned devices from a single application regardless of manufacturer. Access control manager supports a hierarchical model where the customer can access all owned devices regardless of manufacturer where a dealer can only access allowed information on serviced devices and where the OEM can access all devices manufactured by that OEM but not by other manufacturers .

In the example role hierarchy OEM administrator may have super user privileges to all resources associated with an OEM. Alternatively some privileges may be automatically revoked from the OEM administrator upon transfer of ownership of a device to a customer .

First account manager role may have super user privileges with regards to a particular product group of the OEM and second account manager may have super user privileges with regards to a different product group. Thus first account manager may have access to all devices customers device templates images etc. of those devices that fall into the first product group but may have no privileges with respect to devices customers device templates images etc. of those devices that fall into the second product group. Similarly second account manager may have access to all devices customers device templates images etc. of those devices that fall into the second product group but may have no privileges with respect to devices customers device templates images etc. of those devices that fall into the first product group. The account managers may be able to view all devices in the field help troubleshoot devices review statistics on devices and so on that relate to their product group.

The role hierarchy may further include multiple staff roles . The staff roles may be defined separately within each product group or a single staff role may be applied generically across departments. Additionally multiple different types of staff roles may be created within a particular product group. The staff roles may have specific privileges with regards to a subset of devices in a product group for example.

The role hierarchy may additionally include a first dealer role and a second dealer role . The separate dealer roles may have privileges to access different subsets of devices from both the first product group and the second product group that have been installed by the dealers. Dealers may have privileges that enable them to install set up and program devices for consumers for example. Dealers may also retain privileges after device installation to enable them to troubleshoot and maintain installed devices.

The role hierarchy further includes a customer role . The customer role is associated with an ultimate end user that purchases a device from the OEM. The customer may be associated with an installed device or other resource in a few different ways. If a customer purchased the device from a store or had it installed by a dealer the consumer may go through a registration method that may generate a new user account for the consumer and or bind the device to the user account by setting the user account as the owner of the device. Once this happens depending on the device itself the customer will gain access to a subset of resources associated with that device. Alternatively the dealer may designate a user account as an owner of a device as part of the installation process. Thus the user may not need to take any actions to bind himself to the device.

A device may be associated with a dealer in a few ways as well. An owner of a device can designate a dealer for that user s device. This can enable the dealer to service the device. Alternatively the dealer may be bound to the device before installation if for example the dealer performed the installation.

Referring back to authentication manager manages user accounts. Each user account may include one or owned devices and or devices being shared with the user account one or more registered computing devices allowed to communicate with the devices and one or more roles associated with the user account.

A user may attempt to log in to a user account by providing credentials e.g. user name and password to access control manager from a computing device. Authentication module verifies that the provided credentials match stored credentials for the user account. If the provided credentials match stored credentials for the user account authentication module invokes token generator .

Token generator generates a token for the user and sends the token to the computing device of the user. The token may then be presented to any WAN accessible service of the IoT platform to gain access to resources. Responsive to the computing device presenting the token to a WAN accessible service the WAN accessible service may use the token to check which role or roles are associated with the user account and thus determine which resources the user account has access to as well as the type and level of access.

There are use cases that warrant sharing of a device among many users. An example is any device in a home being used by multiple family members. In this situation a primary owner of the device shares it with the other family members or with a guest. In a more commercial setting a hotel could have connected locks installed with access granted to hotel guests for a period of time. A receptionist may be able to for example activate access to a particular room of the hotel by temporarily assigning a role or tag to a user account of a guest for a given amount of time. Similarly a home owner may grant temporary access to a guest to control a thermostat lights locks etc. by granting a new role or tag to a user account of the guest.

Accordingly users may wish to share access to their devices with friends family guests clients etc. Sharing module enables such sharing. When a user wishes to share access to one or more resources that user invokes sharing module and identifies the resources to be shared and the user or user account with which the resources will be shared. The user may also specify the permissions to be granted whether the sharing will be for a limited time period and or other conditions to place on the sharing. Sharing module then updates the user account that will be receiving the sharing by adding the granted privileges to that user account. If sharing is to be for a limited time period then the user may specify a time at which the sharing will begin and or a time at which the sharing will terminate. Thus temporary or permanent privileges can be granted and shared using the access control manager and can be revoked at any time by the owner.

In some instances a user may wish to share resources e.g. access to a device to an individual who does not have a user account. In such an instance sharing module may generate a temporary account and associate the privileges with the temporary account. The user may provide an email address phone number or other contact information of the individual with whom the resources will be shared. Sharing module may send a message to that individual using the provided contact information. The sent message may include a link or other information that the individual may use to activate and use the temporary account.

At block processing logic determines resources available to the requestor. At block processing logic determines a subset of these resources that will be accessible to the new role. The requestor may grant any of the privileges that the requestor has to the new role up to and including role creation privileges. The requestor may also set up one or more criteria that must be satisfied before a role will gain access to a resource. These criteria may be implemented by assigning tags to the new role and potentially assigning corresponding or related tags to resources. In such an instance a new role may gain access to a resource when a tag of the role matches an associated tag of the resource.

At block the new role is created and added to a roles data structure. The role may be added to a role hierarchy under the creator. The creator may determine where in the role hierarchy the new role should be placed. Alternatively the new role may be automatically arranged in the hierarchy with relation to other roles based on the privileges of the new role and privileges of the other roles.

At block the new role may be assigned to one or more user accounts. These user accounts would then have all of the privileges associated with the new role.

At block processing logic determines one or more roles associated with the user account and or with the current login session. At block processing logic determines access privileges of the user account based on the roles. Each role may specify one or a set of privileges. Privileges may include access privileges to individual device resources or groups of device resources as well as access privileges to individual user resources or groups of user resources. In one embodiment in which a user account is associated with multiple roles processing logic may prompt a user to select one of the multiple roles for a current login session. Processing logic may then receive a selection of a particular role.

At block processing logic generates a token for the computing device. At block processing logic associates the token with the role or roles associated with the login session. Processing logic may also provide the token to the computing device. In one embodiment the token includes identifiers of the roles associated with the user account. Alternatively the token may indicate actual access privileges of the user account. Alternatively the token may include a unique identifier that is associated with the computing device and the user account during a session. Any system that is provided the token may perform a query to determine the roles and or access privileges of the user account.

At block processing logic grants to the computing device and thus to the user of the computing device access to the determined resources associated with the determined roles. The method then ends.

At block processing logic determines a first role associated with the first user account using the provided token. At block processing logic verifies the first user account has permission to share access to the privilege based on the first role. At block if sharing of the resource is allowed the method continues to block . If at block sharing of the resource is not allowed the method ends.

At block processing logic determines access permissions that are to be shared. In one embodiment processing logic provides a drop down menu or other graphical representation of all the sub resources e.g. settings parameters views etc. of the resource that may be shared. A user may select the entire resource to share or may select individual sub resources to be shared. For each sub resource that is to be shared the user may select the type of access that is to be shared e.g. view access control access etc. and or place conditions on the sharing. These conditions may be enforced by adding tags to a role of the user account with which privileges are being shared and or by adding tags to the resources.

At block processing logic determines a second role associated with the determined access permissions. If there is an existing role that includes these privileges then this role may be used. If there is not an existing role that includes the particular combination of privileges that have been selected then a new role may be generated.

At block processing logic determines whether the second user has a user account. If so the method proceeds to block . If the second user does not have a user account the method continues to block and processing logic generates a second user account for the second user. The generated account may be a temporary account. At block processing logic sends an invitation to the second user to activate the second user account.

At block processing logic determines whether the second user accepts the sharing request. In one embodiment the second role does not become active or become associated with the user account of the second user until the second user has explicitly accepted to receive the share. The receiver in this case has the authority to accept or reject a share that has been granted to him. If the share is accepted the method continues to block . If the share is declined the method ends.

At block processing logic assigns the second role to the second user account. At block processing logic determines whether the sharing is to be temporary. If the sharing is to be temporary then at block processing logic eventually revokes the second role from the second user account after a time period elapses. If the sharing is not temporary the method ends.

At any time the first user may actively revoke the second role from the second user account. The user may navigate to a sharing window of a WAN accessible service. The sharing window may show all of the user accounts with which access to one or more resources has been shared. The first user may select any of these other user accounts and request that sharing be terminated. Responsive to such a command processing logic may update the other user accounts by terminating the privileges that had been shared.

At block processing logic sends confirmation requests to the first user account and or to the second user account. At lock processing logic determines whether confirmations have been received. If all confirmation requests were responded to with a confirmation the method continues to block and ownership of the device is transferred between the user accounts. This involves revoking access to the network connected device from the first user account and adding access to the network connected device to the second user account. In one embodiment an owner role for the device is added to the second user account and revoked from the first user account. If at block one or more confirmations have not been received the method ends without transferring ownership of the network connected device.

At block processing logic temporarily converts the role of the user account to a lower level role that has fewer privileges. In one embodiment the user account has the lower level role for the duration of a session. To revert back to the original role a user may terminate a session and then log back in to establish a new session. Alternatively a time limit may be associated with the disguise. In such an embodiment the role of the user account may revert back to the original role after the time limit elapses.

By disguising a role as a lower level role a user may test scenarios from the lower level role. Thus disguising a role as a lower level role may be useful for bug checking error checking trouble shooting and providing technical assistance to customers. Alternatively a user may have multiple different roles associated with the same resource or set of resources. The user may switch between these roles based on a level of access that the user needs at a given time.

The embedded system may include a host processing device a host memory and or a communication module coupled to the host processing device . The embedded system may also include numerous other components that are not shown herein. Examples of such additional components may include light emitting diodes LEDs a power supply regulator fuses ports a user interface digital to analog D A converters analog to digital A D converters field programmable gate arrays FPGAs application specific integrated circuits ASICs and so on.

Host processing device may be a microcontroller or a digital signal processor DSP in one embodiment. Host processing device may alternatively or additionally include a programmable logic controller PLC a field programmable gate array FPGA or a complex programmable logic device CPLD . The host processing device may be configured to perform specific functions related to the operation and control of the device .

Host memory may include random access memory RAM read only memory ROM one time programmable OTP ROM Flash e.g. NOR Flash or other types of memory. Host memory may store an application programming interface API for the communication module . The API may enable the host processing device to send commands and or data to and receive commands and or data from communication module . Host memory may also include firmware for the host processing device that configures the host processing device to perform one or more operations that are specific to device .

In some embodiments the host memory may be integrated into the host processing device . For example microcontrollers typically include a processor core memory and programmable input output peripherals. Accordingly if the host processing device is a microcontroller then host memory may be a memory of host processing device .

Communication module may be an integrated circuit IC that is configured to be coupled to host processing device of embedded system . Communication module may be provided by a third party to a manufacturer of the device along with the API and may enable network capability and remote control capability to be easily added to the device . The communication module may include its own processing device a memory and or a network adapter . The processing device may be a microcontroller a DSP a PLC a microprocessor or programmable logic device such as an FPGA or a CPLD. The memory may include a non volatile memory e.g. RAM and or a volatile memory e.g. ROM Flash etc. . In one embodiment memory is integrated into processing device .

Memory may store data identifying one or more resources e.g. parameters attributes and data of the device that may be accessible to various roles. Memory may also store firmware for the processing device such as firmware that includes instructions for a remote interface .

Network adapter may be a wired network adapter e.g. an Ethernet adapter or a wireless network adapter e.g. a Wi Fi adapter or other wireless local area network WLAN adapter . Network adapter may also be configured to provide connection to a network or other devices using Zigbee PLC Bluetooth 6LowPAN or other communication protocols. Network adapter may receive notifications and other messages from a WAN accessible service and or remote control applications. Network adapter may additional send outgoing messages to the WAN accessible service and or to remote control applications.

For session establishment remote interface may generate session keys for a new session with the remote control interface. In one embodiment remote interface may receive a token from a remote control application. Remote interface may determine which of the resources the remote control application has privileges for based on the token. In one embodiment the token includes identification of one or more roles and or resource permissions. Alternatively remote interface may query a WAN accessible service to determine what privileges are available to the remote control application. Remote interface may send the token to the WAN accessible service and receive back an indication of the resource permissions. Once remote interface has determined the resource access privileges of the remote control application remote interface may provide information to the remote control application and or receive an execute commands from the remote control application in accordance with the access privileges.

The example computing device includes a processing device a main memory e.g. read only memory ROM flash memory dynamic random access memory DRAM such as synchronous DRAM SDRAM or Rambus DRAM RDRAM etc. a static memory e.g. flash memory static random access memory SRAM etc. and a secondary memory e.g. a data storage device which communicate with each other via a bus .

Processing device represents one or more general purpose processors such as a microprocessor central processing unit or the like. More particularly the processing device may be a complex instruction set computing CISC microprocessor reduced instruction set computing RISC microprocessor very long instruction word VLIW microprocessor processor implementing other instruction sets or processors implementing a combination of instruction sets. Processing device may also be one or more special purpose processing devices such as an application specific integrated circuit ASIC a field programmable gate array FPGA a digital signal processor DSP network processor or the like. Processing device is configured to execute the processing logic instructions for performing the operations and steps discussed herein.

The computing device may further include a network interface device . The computing device also may include a video display unit e.g. a liquid crystal display LCD or a cathode ray tube CRT an alphanumeric input device e.g. a keyboard a cursor control device e.g. a mouse and a signal generation device e.g. a speaker .

The data storage device may include a machine readable storage medium or more specifically a computer readable storage medium on which is stored one or more sets of instructions embodying any one or more of the methodologies or functions described herein. The instructions may also reside completely or at least partially within the main memory and or within the processing device during execution thereof by the computer system the main memory and the processing device also constituting computer readable storage media.

The computer readable storage medium may also be used to store an access control manager as described with reference to and or a software library containing methods that call an access control manager . While the computer readable storage medium is shown in an example embodiment to be a single medium the term computer readable storage medium should be taken to include a single medium or multiple media e.g. a centralized or distributed database and or associated caches and servers that store the one or more sets of instructions. The term computer readable storage medium shall also be taken to include any medium that is capable of storing or encoding a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies described herein. The term computer readable storage medium shall accordingly be taken to include but not be limited to solid state memories and optical and magnetic media.

The modules components and other features described herein for example in relation to can be implemented as discrete hardware components or integrated in the functionality of hardware components such as ASICS FPGAs DSPs or similar devices. In addition the modules can be implemented as firmware or functional circuitry within hardware devices. Further the modules can be implemented in any combination of hardware devices and software components or only in software.

Some portions of the detailed description have been presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated. It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion it is appreciated that throughout the description discussions utilizing terms such as receiving authenticating determining providing granting or the like refer to the actions and processes of a computer system or similar electronic computing device that manipulates and transforms data represented as physical electronic quantities within the computer system s registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage transmission or display devices.

Embodiments of the present invention also relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the discussed purposes or it may comprise a general purpose computer system selectively programmed by a computer program stored in the computer system. Such a computer program may be stored in a computer readable storage medium such as but not limited to any type of disk including floppy disks optical disks CD ROMs and magnetic optical disks read only memories ROMs random access memories RAMs EPROMs EEPROMs magnetic disk storage media optical storage media flash memory devices other type of machine accessible storage media or any type of media suitable for storing electronic instructions each coupled to a computer system bus.

It is to be understood that the above description is intended to be illustrative and not restrictive. Many other embodiments will be apparent to those of skill in the art upon reading and understanding the above description. Although the present invention has been described with reference to specific example embodiments it will be recognized that the invention is not limited to the embodiments described but can be practiced with modification and alteration within the spirit and scope of the appended claims. Accordingly the specification and drawings are to be regarded in an illustrative sense rather than a restrictive sense. The scope of the invention should therefore be determined with reference to the appended claims along with the full scope of equivalents to which such claims are entitled.

