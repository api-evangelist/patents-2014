---

title: Installation of a software agent via an existing template agent
abstract: A system for adapting virtual computing resource (e.g., virtual machine) templates for use with new software platforms without modifying, or otherwise requiring recertification of, the template itself is disclosed. The system enables the installation of a software agent to be bootstrapped to the installation and execution of an agent already included in a template. Installation of the bootstrapped software agent may be performed automatically during initial provisioning of a virtual machine with little or no additional effort required from an administrator. Accordingly, embodiments of the disclosure enable preexisting templates to repurposed for use with new and/or more advanced cloud management platforms.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09146721&OS=09146721&RS=09146721
owner: VMware, Inc.
number: 09146721
owner_city: Palo Alto
owner_country: US
publication_date: 20140530
---
 Infrastructure as a Service also commonly referred to as IaaS generally describes a suite of technologies provided by a service provider as an integrated solution to allow for elastic creation of a fully virtualized network and pooled computing platform sometimes referred to as cloud computing platform . Enterprises may use IaaS as a business internal organizational cloud computing platform sometimes referred to as a private cloud that gives an application developer access to infrastructure resources such as virtualized servers storage and networking resources. By providing ready access to the hardware resources required to run an application the cloud computing platform enables developers to build deploy and manage the lifecycle of a web application or any other type of networked application at a greater scale and at a faster pace than ever before.

A cloud computing platform may include one or more virtual machines that are instantiated and provisioned based on the contents of a virtual machine template e.g. cloud template created by a developer or provided by a cloud provider. For example cloud templates may include metadata that describes the configuration of a virtual machine including CPU memory network storage guest operating system and other supporting libraries preinstalled and used to repeatedly create a VM having the specified settings. Additionally an administrator may specify a logical template that may be mapped to a particular cloud template. As with cloud templates a logical template may specify virtual computing resources for a virtual machine such as CPU memory networking storage guest operating system preinstalled runtime environments e.g. Java Runtime Environment and application services and commands e.g. ssh wget . As part of the logical template definition an administrator may further specify one or more software services that are preinstalled on the logical template. For example in some cases a performance monitoring agent or virus scanner is preinstalled on a logical template.

After a template has been created the template may be subjected to rigorous testing as part of a certification process before the template can be utilized by an enterprise. For example before use in a production environment a template may be tested to ensure compatibility with different software and hardware platforms reliability in various environments and use cases e.g. under heavy user traffic and or compliance with certain security and regulatory standards. Further if a certified template is modified the modified template cannot be used in an enterprise until the modified template has been recertified. Consequently once a template has been created and certified an administrator is typically reluctant to make changes to the template.

However in many cases the structure size and or business needs of an enterprise may change necessitating additional and or different components to be included in a particular template. Consequently when a new software service must be added to a certified template an administrator typically must painstakingly update each template used by an enterprise. Moreover the updated templates must then be submitted for recertification. As such there are challenges faced by system administrators and other users when attempting to update a template to add or remove software services.

Embodiments of the disclosure provide a system for adapting virtual computing resource e.g. virtual machine templates for use with new software platforms without modifying or otherwise requiring recertification of the template itself. The system enables the installation of a software agent to be bootstrapped to the installation and execution of an agent already included in a template. Installation of the bootstrapped software agent may be performed automatically during initial provisioning of a virtual machine with little or no additional effort required from an administrator. Accordingly embodiments of the disclosure enable preexisting templates to be repurposed for use with new and or more advanced cloud management platforms.

A method includes in an embodiment responsive to a request to deploy a multi tier application on a plurality of virtual machines VMs provisioning a VM based on a template wherein the template comprises a template agent. The method further includes executing the template agent to receive a script from a first server and executing the script to install a software agent on the provisioned VM. The software agent is configured to facilitate deployment of at least a portion of the multi tier application onto the provisioned VM.

A non transitory computer readable storage medium including instructions that when executed in a computing device perform the steps of in an embodiment responsive to a request to deploy a multi tier application on a plurality of virtual machines VMs provisioning a VM based on a template wherein the template comprises a template agent. The non transitory computer readable storage medium further includes instructions for executing the template agent to receive a script from a first server and executing the script to install a software agent on the provisioned VM. The software agent is configured to facilitate deployment of at least a portion of the multi tier application onto the provisioned VM.

A computer system including a system memory and a processor programmed to carry out the steps of in an embodiment responsive to a request to deploy a multi tier application on a plurality of virtual machines VMs provisioning a VM based on a template wherein the template comprises a template agent. The system memory and processor are further programmed to carry out the steps of executing the template agent to receive a script from a first server and executing the script to install a software agent on the provisioned VM. The software agent is configured to facilitate deployment of at least a portion of the multi tier application onto the provisioned VM.

As shown in an administrator of enterprise may interact with an infrastructure as a service IaaS manager and an application director each of which may be running in one or more VMs to manage a multi tiered application deployed on cloud computing platform provider . In some embodiments IaaS manager includes a platform that supports the creation and deployment of VMs in cloud computing environments. Administrator may interact with IaaS manager to define and deploy VMs for use in cloud based applications. For example if administrator wishes to define a cloud based data storage application IaaS manager may be used to deploy one or more VMs to run an application component that is responsible for data storage an application component that is responsible for providing data security and an application component for providing a web based application interface. IaaS manager may then perform simple configuration tasks on the one or more VMs to be provisioned in conjunction with the deployment of the application.

To streamline the process of configuring and provisioning VMs and other types of virtual resources IaaS manager may generate and store various templates that define configuration parameters to be used to instantiate virtual resources in a cloud. Each template may include a copy of a VM that has for example certain processor capabilities memory and storage sizes network resources and the like. Templates may further include preinstalled application components that are executed once a VM has been provisioned. For example a template may include or reference an IaaS agent that is to be installed and executed to communicate with IaaS manager once a VM has been instantiated and provisioned enabling the IaaS agent to receive instructions a hostname binaries etc. from IaaS manager . For example once a VM has been instantiated and IaaS agent has been installed IaaS agent may communicate with IaaS manager in order to receive a series of tasks specific to the receiving VM . The tasks may include scripts that are executed by VMs to install configure and or start one or more application components. For example a task may be a script that when executed by a VM causes VM to retrieve and install certain software packages from a central package repository .

Although IaaS manager enables a user to perform basic configuration and provisioning operations to deploy a simple cloud application when more advanced management operations and or more complex topologies are to be implemented the user may instead wish to utilize the additional functionality of application director . Application director enables a user to orchestrate deployment of a multi tier application onto multiple deployment environments provided by one or more cloud computing platform providers using software modules including for example a topology generator a deployment plan generator and a deployment director. The topology generator may be configured to generate an application blueprint that specifies a logical topology of an application to be deployed. For example a blueprint generated by application director for an online store application may specify a web application e.g. in the form of a Java web application archive or WAR file comprising dynamic web pages static web pages Java servlets Java classes and other property configuration and resources files that make up a Java web application executing on an application server e.g. Apache Tomcat application server and that uses as a database e.g. MongoDB as a data store. A blueprint may be assembled out of items from a catalog which is a listing of available virtual computing resources e.g. VMs networking storage that may be provisioned from cloud computing platform provider and available application components e.g. software services scripts code components application specific packages that may be installed on the provisioned virtual computing resources. The deployment plan generator of application director may be configured to generate a deployment plan based on a blueprint that includes deployment settings e.g. processor capabilities memory and storage sizes network resources etc. and an execution plan of tasks having a specified order in which virtual computing resources are provisioned and application components are installed configured and started. The deployment director of application director may be configured to execute a deployment plan by communicating with one or more cloud computing platform providers to provision and configure VMs in a deployment environment .

As described above both IaaS manager and application director enable administrator to instantiate and provision VMs using virtual machine templates e.g. cloud templates provided by a cloud provider and or generated by administrator . In general a template generated for use with IaaS manager includes a preinstalled agent referred to herein as an IaaS agent that is configured to communicate with IaaS manager in order to receive custom properties for customizing a provisioned VM . Similarly a template generated for use with application director includes an agent referred to herein as an application director agent that is configured to communicate with application director in order to receive a list of tasks to be performed by a receiving VM . After a template has been created the template is subjected to rigorous testing as part of a certification process before the template can be utilized by enterprise . Further if a certified template is modified by administrator the modified template cannot be used in enterprise until the modified template has been recertified.

Although IaaS agent may be capable of communicating with IaaS manager and optionally application director to perform basic tasks such as receiving and executing scripts IaaS agent cannot be used to implement many of the advanced functions offered by application director . For example IaaS agent is unable to receive and execute deployment plans generated by application director which may provide a step oriented view of an application topology defined in an application blueprint specify time dependencies between deployment tasks and provide settings such as cloud templates networks and application component properties to be used in specific deployment environments . Consequently if the structure size and or business needs of enterprise change administrator may wish to implement various functions provided by application director and the application director agent. Previously in order to implement the advanced functionality and topologies offered by application director a template that includes only IaaS agent intended for use with IaaS manager must be modified to have the application director agent installed. However in embodiments of the disclosure various techniques may be implemented to install and execute the application director agent using an agent e.g. IaaS agent that is already included in a certified template as described below in further detail. Thus administrator is able to use existing templates designed for use with one software package e.g. IaaS manager with a newly implemented software package e.g. application director without modifying or recertifying the existing templates.

Cloud provider utilizes an infrastructure platform upon which a cloud computing environment may be executed. In the particular embodiment of infrastructure platform comprises hardware resources such as servers to and one or more storage array networks SAN such as SAN which are configured in a manner to provide a virtualization environment that supports the execution of a plurality of virtual machines across servers to . As further detailed below these virtual machines provide the virtual computing resources e.g. compute networking and storage resources that make up cloud computing environment .

Infrastructure resources included in virtualization environment of may be provided to cloud computing environment in response to provisioning requests received from IaaS manager . For example IaaS manager may request a specified number of virtual machines to deploy a web application or to modify e.g. scale a currently running web application. Responsive to this request virtualization environment instantiates virtual machines for example according to a cloud template that defines a virtual machine having specified virtual computing resources e.g. compute networking storage resources . In one example virtualization environment may be implemented by running VMware ESX based hypervisor technologies provided by VMware Inc. of Palo Alto Calif. on servers to although it should be recognized that any other virtualization technologies including Xen and Microsoft Hyper V virtualization technologies may be utilized consistent with the teachings herein .

As shown in VM has been instantiated using a certified template designed for use with IaaS manager . As such VM includes IaaS agent which after instantiation of VM communicates with IaaS manager to enable administrator to receive custom properties to customize VM such as by modifying the hostname and virtual computing resources e.g. memory size allocated to VM . However because VM does not yet include a full featured agent that is capable of performing advanced operations such as the complex application deployment tasks described above under the direction of application director administrator is able to perform only basic customizations of VM .

In various embodiments of the disclosure as shown in after instantiation of VM installation of an application director agent may be bootstrapped to the installation and execution of IaaS agent such as by passing a script to IaaS agent that instructs IaaS agent to download install and execute application director agent . Accordingly VM instantiated and provisioned using a template designed for use with IaaS manager is able to communicate with application director without modification to the template itself. Thus templates designed for use with IaaS manager may be repurposed for example when enterprise migrates to the more advanced functionality and topologies provided by application director without requiring each template to be recertified. Further installation of application director agent may be automated such that templates can be used to provision VMs capable of communicating with application director with little or no additional effort from administrator .

Once application director agent is installed application director agent may then communicate directly with application director . For example upon execution of application director agent application director agent may receive and implement various application deployment instructions to deploy and manage a multi tiered application such as the multi tiered applications described above in conjunction with .

In step cloud computing platform provider instantiates a VM e.g. via a module included in virtualization environment based on a template provided to the cloud computing platform provider . In some embodiments VM is instantiated when a multi tiered application is deployed by application director and or IaaS manager based on a template that is designed for use with IaaS manager . Once instantiated VM includes one or more agents such as IaaS agent that are included in the template.

At step VM executes IaaS agent to customize VM . IaaS agent may be executed upon boot up of the instantiated VM . Upon execution IaaS agent uses one or more scripts and configuration files specified by IaaS manager to customize VM . In some embodiments IaaS agent may receive a plurality of custom properties from IaaS manager that IaaS agent uses to customize the VM. For example IaaS agent may receive a custom property e.g. VirtualMachine.DiskN.Size 16 that defines a size e.g. in GB to give a particular disk N of the VM.

At step IaaS agent receives and executes a script that causes IaaS agent to download and install application director agent . A variety of techniques may be used to install application director agent via IaaS agent . For example application director agent may be installed while IaaS agent is automatically performing a series of actions associated with a ticket during initial provisioning of VM . In some embodiments after instantiation of VM IaaS agent may communicate with IaaS manager to receive a script e.g. a bootstrap script that provides IaaS agent with a location from which application director agent may be downloaded. IaaS agent then downloads one or more application files e.g. binaries from this location to install and execute application director agent . In some embodiments the script includes a batch file having a series of commands e.g. wget apt get to be executed by IaaS agent . Alternatively application director may communicate with IaaS manager and transmit application files associated with application director agent to IaaS agent via IaaS manager . IaaS agent may then use these application files to install application director agent . In other embodiments IaaS agent may receive a script or application files such as the script and application files described above from IaaS manager or from another management application that facilitates instantiation and or provisioning of VM .

According to one or more embodiments at step IaaS agent may receive a custom property e.g. ApplicationDirector.BootStrapScript.contents containing the boot strap script contents and execute the contents of the bootstrap script to install application director agent . In alternative embodiments IaaS agent may receive one or more custom properties e.g. ApplicationDirector.BootStrapScript.url ApplicationDirector.BootStrapScript.path etc. that specify a remote or local location at which the bootstrap script is located. The bootstrap script may then be downloaded and executed to install application director agent . As described in conjunction with a script and or application files associated with application director agent may be received by IaaS agent from application director from a repository etc. In other embodiments the script and or application files may be received from IaaS manager or another management application that is in communication with IaaS agent .

Once application director agent has been installed at step application director agent is executed by VM to communicate with application director such as by authenticating itself with application director to establish a secure method of communication. Application director agent then broadcasts its availability for use in deploying an application in conjunction with application director .

The various embodiments described herein may employ various computer implemented operations involving data stored in computer systems. For example these operations may require physical manipulation of physical quantities usually though not necessarily these quantities may take the form of electrical or magnetic signals where they or representations of them are capable of being stored transferred combined compared or otherwise manipulated. Further such manipulations are often referred to in terms such as producing identifying determining or comparing. Any operations described herein that form part of one or more embodiments of the invention may be useful machine operations. In addition one or more embodiments of the invention also relate to a device or an apparatus for performing these operations. The apparatus may be specially constructed for specific required purposes or it may be a general purpose computer selectively activated or configured by a computer program stored in the computer. In particular various general purpose machines may be used with computer programs written in accordance with the teachings herein or it may be more convenient to construct a more specialized apparatus to perform the required operations.

The various embodiments described herein may be practiced with other computer system configurations including hand held devices microprocessor systems microprocessor based or programmable consumer electronics minicomputers mainframe computers and the like.

One or more embodiments of the present invention may be implemented as one or more computer programs or as one or more computer program modules embodied in one or more computer readable media. The term computer readable medium refers to any data storage device that can store data which can thereafter be input to a computer system computer readable media may be based on any existing or subsequently developed technology for embodying computer programs in a manner that enables them to be read by a computer. Examples of a computer readable medium include a hard drive network attached storage NAS read only memory random access memory e.g. a flash memory device a CD Compact Discs CD ROM a CD R or a CD RW a DVD Digital Versatile Disc a magnetic tape and other optical and non optical data storage devices. The computer readable medium can also be distributed over a network coupled computer system so that the computer readable code is stored and executed in a distributed fashion.

Although one or more embodiments of the present invention have been described in some detail for clarity of understanding it will be apparent that certain changes and modifications may be made within the scope of the claims. For example while embodiments herein have referred to certain methods for bootstrapping the installation of application director agent using IaaS agent it should be recognized that other types of agents running on VM may be utilized to install application director agent and or other types of software modules in alternative embodiments. Accordingly the described embodiments are to be considered as illustrative and not restrictive and the scope of the claims is not to be limited to details given herein but may be modified within the scope and equivalents of the claims. In the claims elements and or steps do not imply any particular order of operation unless explicitly stated in the claims.

Plural instances may be provided for components operations or structures described herein as a single instance. Finally boundaries between various components operations and data stores are somewhat arbitrary and particular operations are illustrated in the context of specific illustrative configurations. Other allocations of functionality are envisioned and may fall within the scope of the invention s . In general structures and functionality presented as separate components in exemplary configurations may be implemented as a combined structure or component. Similarly structures and functionality presented as a single component may be implemented as separate components. These and other variations modifications additions and improvements may fall within the scope of the appended claims s .

