---

title: Method and system for port performance ranking in multi-protocol switch
abstract: A system and method for port performance ranking in a multi-protocol switch includes monitoring one or more first parameters, the one or more first parameters associated with operating condition of one or more ports of the multi-protocol switch. Each of the one or more first parameters is compared with an associated predefined criterion to determine deviation from the associated predefined criterion. One or more eligible ports is determined from the one or more ports based on non-deviation of each of the one or more first parameters from the associated predefined criterion. For each of the one or more eligible ports, each of one or more second parameters is compared with an associated predefined threshold, the one or more second parameters associated with port traffic statistics. The one or more eligible ports are ranked based on the comparison between each of the second parameters and the associated predefined threshold.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09654423&OS=09654423&RS=09654423
owner: Wipro Limited
number: 09654423
owner_city: Bangalore
owner_country: IN
publication_date: 20140305
---
This application claims the benefit of Indian Patent Application Filing No. 212 CHE 2014 filed Jan. 17 2014 which is hereby incorporated by reference in its entirety.

The present disclosure relates generally to multi protocol switching and more particularly to a method and a system for port performance ranking in a multi protocol switching device.

With increasing needs for storage of data storage area networks SANs have become a widely accepted solution for storing huge amount of data associated with a network of host devices. In a SAN a multi protocol switch connects host devices such as data servers to storage databases in a storage area network. In a multi protocol SAN scenario the data servers access different storage databases using the multi protocol switch for frame retransmission and I O operations. When multiple applications associated with the data servers try to access a single port associated with a storage database the port may experience performance degradation due to heavy traffic. The performance degradation is due to the frame drop loss or frame transmission delay due to heavy traffic on the port of the multi protocol switch. This becomes serious when critical application is operational and trying to perform the I O operation on the port.

Additionally in the multi protocol switch there is difference in protocol frame speed bit error rate frame flow order frame conversion time that influences the performance of the port.

Further port load condition state of infrastructure different protocols support connection interfaces through which the databases SAN devices are connected to the multi protocol switch further aggravates port performance of the multi protocol switch.

In view of the above it would be desirable to have the multi protocol switch that ranks ports based on performance of those ports and notifies when the performance of the port changes.

Disclosed herein is a port performance ranking method performed in a multi protocol switch the port performance ranking method includes monitoring one or more first parameters the one or more first parameters associated with operating condition of one or more ports of the multi protocol switch comparing each of the one or more first parameters with an associated predefined criterion to determine deviation from the predefined criterion determining one or more eligible ports from the one or more ports based on non deviation of each of the one or more first parameters from the associated predefined criterion comparing for each of the one or more eligible ports each of one or more second parameters with an associated predefined threshold the one or more second parameters associated with port traffic statistics and ranking the one or more eligible ports based on the comparison between each of the one or more second parameters and the associated predefined threshold.

In an aspect of the invention the system for performing port ranking in a multi protocol switching device includes at least one processor at least one memory coupled to the at least one processor the at least one memory storing processor executable instructions which when executed by the at least one processor causes the at least one processor to monitor one or more first parameters the one or more first parameters associated with operating condition of one or more ports of the multi protocol switch compare each of the one or more first parameters with an associated predefined criterion to determine deviation from the predefined criterion determine one or more eligible ports from the one or more ports based on non deviation of each of the one or more first parameters from the associated predefined criterion compare for each of the one or more eligible ports each of one or more second parameters with an associated predefined threshold the one or more second parameters associated with port traffic statistics and rank the one or more eligible ports based on the comparison between each of the one or more second parameters and the associated predefined threshold.

It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory only and are not restrictive of the invention as claimed.

Exemplary embodiments are described with reference to the accompanying drawings. Wherever convenient the same reference numbers are used throughout the drawings to refer to the same or like parts. While examples and features of disclosed principles are described herein modifications adaptations and other implementations are possible without departing from the spirit and scope of the disclosed embodiments. It is intended that the following detailed description be considered as exemplary only with the true scope and spirit being indicated by the following claims.

Further one or more of the host devices shown in may interact with one or more of the database the database the database and the database via a multi protocol switching device . In some embodiments a host device may include without limitation a data server that includes processing and storage capabilities. Such a host device may include without limitation a desktop computer a laptop a tablet a mobile device and a personal digital assistant. Further a database may include one or more storage devices such as but not limited to disk arrays Redundant Array of Independent Disks RAID systems Just a Bunch Of Disks JBOD s optical storage devices and tape devices.

In some embodiments host bus adaptors HBAs e.g. may be used to connect host devices and databases to the multi protocol switching device . The host devices of may interact with the databases of to store data associated with the host devices in the databases. A host device host device host device etc may provide data to the multi protocol switching device in the form of frames that are formatted according to a protocol associated with the host device. The multi protocol switching device may further provide data to the database database database etc. in the form of frames that are formatted according to a protocol associated with the database. A host device associated with one protocol may interact with a database associated with the same or a different protocol as the host device via the multi protocol switching device . Examples of such protocols associated with the host device and or database include without limitation Ethernet InfiniBand Serial Attached Small Computer System Interface Internet Small Computer System Interface and Fibre Channel protocols.

In an exemplary scenario the host device and the host device may be associated with a fibre channel FC protocol. Similarly the host device may be associated with InfiniBand IB protocol the host device may be associated with Internet Small Computer System Interface iSCSI protocol. Further the database and the database may be associated with an the Ethernet protocol the database may be associated with the iSCSI protocol and the database may be associated with IB protocol.

In keeping with this example each of the host devices may interact with one or more of the databases as illustrated in . The host device may interact with the database the host device may interact with the database and the database the host device may interact with database and the host device may interact with the database the database and the database .

It should be apparent to a person skilled in the art however that the protocols associated with the host devices or databases are not limited to the protocols discussed in this example and other protocols such as e.g. Serial Attached Small Computer System Interface SCSI protocol and Serial Attached SCSI SAS protocol may also be associated with the host devices.

The hardware event log may comprise information of buffer utilization i.e. information of memory buffer utilization against the hardware event log the I O transaction log and the monitoring log . The hardware event log may poll health status of the internal component of the multi protocol switch at definite time interval for example the online offline status of the ports. Further the host devices may be connected to the ports via connection interface. Different protocol may support connection interface through which the host devices are connected to the multi protocol switch . These connection interfaces may be prone to error disconnection poor quality connection erroneous connection etc. . These connection interfaces may be monitored by the processor and data related to the connection interfaces may be maintained in the hardware event log .

I O Transaction Log IOTL may maintain the I O frame tag id assigned by the processor . The response acknowledgement status from destination devices may use same outgoing and incoming frame tag id assigned by the processor to its respective incoming frame outgoing frame. The I O transaction log may maintain port traffic statistics in form of frame transactions against each frame tag id mentioned below 

As noted above the collection of logs regarding the operating condition of the ports and the port traffic statistics in the hardware event log the I O transaction log and the monitoring log may be effected by the processor . For the collection of logs regarding the port traffic statistics tagging of the frame is an important step. The processor may receive incoming frames at incoming ports from source devices host devices . On receiving the incoming frames the processor may assign a frame tag id which is a unique identification number of that incoming frame to each of the incoming frames received from the host devices. The frame tag id may not be visible to external host devices connected to ports and may be used specifically by the processor for internal frame identification purpose. The processor then processes the frame and performs frame translation. The processor may push translated frames outgoing frames to outgoing ports. Each of the outgoing frames may be assigned an identifier before reaching the destination devices databases . The explanation of the incoming frame and the outgoing frame in the multi protocol switch device connected to source devices host devices and the destination devices databases is explained through the block diagram.

As shown in the when a frame is triggered from a source device host devices connected to multi protocol supporting switch I O port i.e. IOFP it may be referred as incoming frame . From IOFP the frame may be passed to the processor . After internal frame processing the processor may pass the frame to multi protocol supporting switch I O port i.e. IOFP then it may be referred as Outgoing frame . The frame may be delivered to destination device from IOFP and may be termed as Outgoing frame . The identical process happens when response may be generated by destination device databases . When a frame may be triggered from destination device connected to multi protocol supporting switch I O port i.e. IOFP it may be referred as Outgoing frame . From IOFP the frame may be passed to the processor the frame may be termed as Outgoing frame . After frame translation the processor may pass the frame to I O port i.e. IOFP then it may be referred as Incoming frame . The frame may be delivered to source device via IOFP and may be termed as Incoming frame .

At step S the hardware event log may be again analyzed to retrieve the data related to availability of the ports.

The availability of the ports may pertain to online offline status of the ports. In this case the predefined criterion may be the online status of the ports. At step S the availability of the ports may be compared against a predefined criterion to determine deviation. Deviation from the predefined criterion may include offline status of ports. If there is deviation of the availability of a subset of the one or more ports from the predefined criterion i.e. the subset of the one or more are offline port performance ranking for the subset of the one or more ports may stop S . On the other hand if there is no deviation of the availability of subset of the one or more ports from the predefined criterion the port performance ranking of the ports may continue S . The ports for which there is no deviation from the predefined criteria for both the parameters may be referred to as eligible ports i.e. the ports for which port performance ranking may be performed. It should be apparent to a person skilled in the art that the determination of eligible ports is not only based on the above two parameters but it may also be based on the other parameters also. Further there are no weightage scores assigned against the port connection interface and the port status online offline . These parameters are used only to determine the eligibility of the ports for port ranking.

At step S the monitoring log is analyzed by the processor to calculate total frame drop lost across eligible ports. Further at step S the total frame drop lost for each of the eligible ports is compared against a predefined threshold and it is determined whether the total frame drop lost for each of the eligible ports is within the predefined threshold or above the predefined threshold. The eligible ports for which the total frame drop lost is within the predefined threshold may be given a first weightage score step S . The eligible ports for which the total frame drop lost is above the predefined threshold may be given a second weightage score step S . The first weightage score may be higher than the second weightage score.

At step S the monitoring log is analyzed by the processor to calculate total frame retransmission count for each of the eligible ports. Further at step S the total frame retransmission count for each of the eligible ports is compared against a predefined threshold and it is determined whether the total frame retransmission count for each of the eligible ports is within the predefined threshold or above the predefined threshold. The eligible ports for which the total frame retransmission count is within the predefined threshold may be given a first weightage score S . The eligible ports for which the total frame retransmission count is above the predefined threshold may be given a second weightage score S . The first weightage score may be more than the second weightage score.

At step S the monitoring log is further analyzed by the processor to calculate total frame transaction for each of the eligible ports. Further at step S the total frame transaction for each of the eligible ports is compared against a predefined threshold and it is determined whether the total frame transaction for each of the eligible ports is within the predefined threshold or above the predefined threshold. The eligible ports for which the total frame transaction is within the predefined threshold may be given a first weightage score S . The eligible ports for which the total frame transaction is above the predefined threshold may be given a second weightage score S . The first weightage score may be more than the second weightage score.

At step S the monitoring log is further analyzed by the processor to calculate buffer utilization associated with eligible ports. Further at step S the buffer utilization for each of the eligible ports is compared against a predefined threshold and it is determined whether the total buffer utilization for each of the eligible ports is within the predefined threshold or above the predefined threshold. The eligible ports for which the total buffer utilization is within the predefined threshold may be given a first weightage score S . The eligible ports for which the total buffer utilization is above the predefined threshold may be given a second weightage score S . The first weightage score may be more than the second weightage score.

At step S the monitoring log is further analyzed by the processor to calculate operating bandwidth utilization for each of the eligible ports. Further at step S the buffer utilization for each of the eligible ports is compared against a predefined threshold and it is determined whether the operating bandwidth utilization for each of the eligible ports is within the predefined threshold or above the predefined threshold. The eligible ports for which the operating bandwidth utilization is within the predefined threshold may be given a first weightage score S . The ports for which the operating bandwidth utilization is above the predefined threshold may be given a second weightage score S . The first weightage score may be more than the second weightage score.

After completing the above mentioned steps the processor may calculate a final ranking score for each of the eligible ports and rank the eligible ports based on the weightage scores given to the parameters like total frame drop lost count total frame retransmission count total frame transaction buffer utilization and operating bandwidth utilization S . It should be apparent to a person skilled in the art that the parameters are not only limited to the above mentioned parameters and it may include other parameters associated with port traffic statistics.

In an exemplary embodiment the final ranking score for each of the eligible ports is calculated by summing up the weightage scores given to the parameters. In an event of two or more eligible ports having same final ranking score the two or more eligible ports may be assigned priority based on the total frame drop count total frame retransmission count total frame transaction count total buffer utilization and total operating bandwidth utilization in decreasing order. It should be apparent to a person skilled in the art that the order of the above parameters may change. Further the total frame drop count total frame retransmission count total frame transaction count total buffer utilization and total operating bandwidth utilization may be within the predefined thresholds. Based on the final ranking score for each of the eligible ports a database is updated with best performing port. This process of determination of the final ranking score for each of the eligible ports is performed iteratively and if there is a change in the best performing port the database is updated in response to the change.

In an exemplary embodiment the method of determination of the eligibility of the ports and ranking of the ports is explained with the help of table.

In the table ranking of the ports on basis of the performance of the ports is being determined. The performance of the ports is based on various parameters like port connection interface port status online offline total frame loss total frame retransmission count total frame transaction count total buffer utilization operating bandwidth utilization. On the basis of the table following observation may be made.

This disclosure provides a number of advantages including without limitation methods non transitory computer readable media apparatuses and systems that enable ranking of ports on the basis of port performance. The port performance is manifested in the form of a final ranking score for each of the ports. The final ranking score is calculated on the basis of the weightage scores given to various parameters. Based on the final ranking score best performing port is determined. Next best performing port is determined. Consequently ranking of the ports on the basis of the performance is performed. This has the advantage of easing the congestion on other ports of the multi protocol switching device and smooth carrying out of I O operations through the high performing ports.

Processor may be disposed in communication with one or more input output I O devices via I O interface . The I O interface may employ communication protocols methods such as without limitation audio analog digital monoaural RCA stereo IEEE 1394 serial bus universal serial bus USB infrared PS 2 BNC coaxial component composite digital visual interface DVI high definition multimedia interface HDMI RF antennas S Video VGA IEEE 802.n b g n x Bluetooth cellular e.g. code division multiple access CDMA high speed packet access HSPA global system for mobile communications GSM long term evolution LTE WiMax or the like etc.

Using the I O interface the computer system may communicate with one or more I O devices. For example the input device may be an antenna keyboard mouse joystick infrared remote control camera card reader fax machine dongle biometric reader microphone touch screen touchpad trackball sensor e.g. accelerometer light sensor GPS gyroscope proximity sensor or the like stylus scanner storage device transceiver video device source visors etc. Output device may be a printer fax machine video display e.g. cathode ray tube CRT liquid crystal display LCD light emitting diode LED plasma or the like audio speaker etc. In some embodiments a transceiver may be disposed in connection with the processor . The transceiver may facilitate various types of wireless transmission or reception. For example the transceiver may include an antenna operatively connected to a transceiver chip e.g. Texas Instruments WiLink WL1283 Broadcom BCM4750IUB8 Infineon Technologies X Gold 618 PMB9800 or the like providing IEEE 802.11a b g n Bluetooth FM global positioning system GPS 2G 3G HSDPA HSUPA communications etc.

In some embodiments the processor may be disposed in communication with a communication network via a network interface . The network interface may communicate with the communication network . The network interface may employ connection protocols including without limitation direct connect Ethernet e.g. twisted pair 10 100 1000 Base T transmission control protocol internet protocol TCP IP token ring IEEE 802.11a b g n x etc. The communication network may include without limitation a direct interconnection local area network LAN wide area network WAN wireless network e.g. using Wireless Application Protocol the Internet etc. Using the network interface and the communication network the computer system may communicate with devices and . These devices may include without limitation personal computer s server s fax machines printers scanners various mobile devices such as cellular telephones smartphones e.g. Apple iPhone Blackberry Android based phones etc. tablet computers eBook readers Amazon Kindle Nook etc. laptop computers notebooks gaming consoles Microsoft Xbox Nintendo DS Sony PlayStation etc. or the like. In some embodiments the computer system may itself embody one or more of these devices.

In some embodiments the processor may be disposed in communication with one or more memory devices e.g. RAM ROM etc. via a storage interface . The storage interface may connect to memory devices including without limitation memory drives removable disc drives etc. employing connection protocols such as serial advanced technology attachment SATA integrated drive electronics IDE IEEE 1394 universal serial bus USB fiber channel small computer systems interface SCSI etc. The memory drives may further include a drum magnetic disc drive magneto optical drive optical drive redundant array of independent discs RAID solid state memory devices solid state drives etc.

The memory devices may store a collection of program or database components including without limitation an operating system user interface application web browser mail server mail client user application data e.g. any data variables or data records discussed in this disclosure etc. The operating system may facilitate resource management and operation of the computer system . Examples of operating systems include without limitation Apple Macintosh OS X Unix Unix like system distributions e.g. Berkeley Software Distribution BSD FreeBSD NetBSD OpenBSD etc. Linux distributions e.g. Red Hat Ubuntu Kubuntu etc. IBM OS 2 Microsoft Windows XP Vista 7 8 etc. Apple iOS Google Android Blackberry OS or the like. User interface may facilitate display execution interaction manipulation or operation of program components through textual or graphical facilities. For example user interfaces may provide computer interaction interface elements on a display system operatively connected to the computer system such as cursors icons check boxes menus scrollers windows widgets etc. Graphical user interfaces GUIs may be employed including without limitation Apple Macintosh operating systems Aqua IBM OS 2 Microsoft Windows e.g. Aero Metro etc. Unix X Windows web interface libraries e.g. ActiveX Java Javascript AJAX HTML Adobe Flash etc. or the like.

In some embodiments the computer system may implement a web browser stored program component. The web browser may be a hypertext viewing application such as Microsoft Internet Explorer Google Chrome Mozilla Firefox Apple Safari etc. Secure web browsing may be provided using HTTPS secure hypertext transport protocol secure sockets layer SSL Transport Layer Security TLS etc. Web browsers may utilize facilities such as AJAX DHTML Adobe Flash JavaScript Java application programming interfaces APIs etc. In some embodiments the computer system may implement a mail server stored program component. The mail server may be an Internet mail server such as Microsoft Exchange or the like. The mail server may utilize facilities such as ASP ActiveX ANSI C C Microsoft .NET CGI scripts Java JavaScript PERL PHP Python WebObjects etc. The mail server may utilize communication protocols such as internet message access protocol IMAP messaging application programming interface MAPI Microsoft Exchange post office protocol POP simple mail transfer protocol SMTP or the like. In some embodiments the computer system may implement a mail client stored program component. The mail client may be a mail viewing application such as Apple Mail Microsoft Entourage Microsoft Outlook Mozilla Thunderbird etc.

In some embodiments computer system may store user application data such as the data variables records etc. as described in this disclosure. Such databases may be implemented as fault tolerant relational scalable secure databases such as Oracle or Sybase. Alternatively such databases may be implemented using standardized data structures such as an array hash linked list struct structured text file e.g. XML table or as object oriented databases e.g. using ObjectStore Poet Zope etc. . Such databases may be consolidated or distributed sometimes among the various computer systems discussed above in this disclosure. It is to be understood that the structure and operation of the any computer or database component may be combined consolidated or distributed in any working combination.

The specification has described a method and a system for determining port performance ranking in the multi protocol switch. The illustrated steps are set out to explain the exemplary embodiments shown and it should be anticipated that ongoing technological development will change the manner in which particular functions are performed. These examples are presented herein for purposes of illustration and not limitation. Further the boundaries of the functional building blocks have been arbitrarily defined herein for the convenience of the description. Alternative boundaries can be defined so long as the specified functions and relationships thereof are appropriately performed. Alternatives including equivalents extensions variations deviations etc. of those described herein will be apparent to persons skilled in the relevant art s based on the teachings contained herein. Such alternatives fall within the scope and spirit of the disclosed embodiments. Also the words comprising having containing and including and other similar forms are intended to be equivalent in meaning and be open ended in that an item or items following any one of these words is not meant to be an exhaustive listing of such item or items or meant to be limited to only the listed item or items. It must also be noted that as used herein and in the appended claims the singular forms a an and the include plural references unless the context clearly dictates otherwise.

Furthermore one or more computer readable storage media may be utilized in implementing embodiments consistent with the present disclosure. A computer readable storage medium refers to any type of physical memory on which information or data readable by a processor may be stored. Thus a computer readable storage medium may store instructions for execution by one or more processors including instructions for causing the processor s to perform steps or stages consistent with the embodiments described herein. The term computer readable medium should be understood to include tangible items and exclude carrier waves and transient signals i.e. be non transitory. Examples include random access memory RAM read only memory ROM volatile memory nonvolatile memory hard drives CD ROMs DVDs flash drives disks and any other known physical storage media.

It is intended that the disclosure and examples be considered as exemplary only with a true scope and spirit of disclosed embodiments being indicated by the following claims.

