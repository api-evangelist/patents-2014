---

title: Selectively exchanging data between P2P-capable client devices via a server
abstract: In an embodiment, a first client device establishes a P2P connection with a second client device. While the P2P connection is still established, the first client device receives a request to send data to the second client device via the P2P connection, and then sends the data to a server along with an indication of a temporary identifier of the second client device without notifying an operator of the first client device that the data is being sent to the server. In another embodiment, the server receives the data, maps the temporary identifier to a unique network address of the second client device and generates a record of the data transmission between the respective client devices. In another embodiment, the server maintains an association for the temporary identifier after the first and second client devices are disconnected from their P2P connection to permit supplemental communication.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09392057&OS=09392057&RS=09392057
owner: QUALCOMM Incorporated
number: 09392057
owner_city: San Diego
owner_country: US
publication_date: 20140411
---
Embodiments of the invention relate to selectively exchanging data between peer to peer P2P capable client devices via a server.

Wireless communication systems have developed through various generations including a first generation analog wireless phone service 1G a second generation 2G digital wireless phone service including interim 2.5G and 2.75G networks a third generation 3G high speed data Internet capable wireless service and a fourth generation 4G service e.g. Long Term Evolution LTE or WiMax . There are presently many different types of wireless communication systems in use including Cellular and Personal Communications Service PCS systems. Examples of known cellular systems include the cellular Analog Advanced Mobile Phone System AMPS and digital cellular systems based on Code Division Multiple Access CDMA Frequency Division Multiple Access FDMA Time Division Multiple Access TDMA the Global System for Mobile access GSM variation of TDMA etc.

Often there is a business need for one client device to quickly exchange data e.g. media information or files etc. with other client device s in a formal way e.g. as opposed to an informal peer to peer P2P exchange . However such exchanges typically require the client device to acquire personal contact information e.g. a unique user address at which a user can be contacted such as an email address phone number Skype Username Facebook ID LinkedIn ID or a unique network address at which an associated UE can be contacted via a network such as a MAC ID phone number etc. . For example assume that at a business luncheon attended by a small group of people a luncheon participant takes a group photo and wants to share the group photo with each other attendee of the group luncheon. In this case it is probably not practical for the luncheon participant to obtain the personal contact information of each other attendee. In another example assume that a marketing person wants to hand out a digital information brochure to conference attendees. In this case recipients of the digital information brochure may not want to browse the digital information brochure without divulging any personal contact information to the marketing person. Also certain transactions can occur via P2P protocols specifically to avoid a formal record by their respective operators. For example criminals may wish to exchange data files via P2P without form records of the data transfer being recorded.

In an embodiment a first client device establishes a P2P connection with a second client device. While the P2P connection is still established the first client device receives a request to send data to the second client device via the P2P connection and then sends the data to a server along with an indication of a temporary identifier of the second client device without notifying an operator of the first client device that the data is being sent to the server. In another embodiment the server receives the data maps the temporary identifier to a unique network address of the second client device and generates a record of the data transmission between the respective client devices. In another embodiment the server maintains an association for the temporary identifier after the first and second client devices are disconnected from their P2P connection to permit supplemental communication.

Aspects of the invention are disclosed in the following description and related drawings directed to specific embodiments of the invention. Alternate embodiments may be devised without departing from the scope of the invention. Additionally well known elements of the invention will not be described in detail or will be omitted so as not to obscure the relevant details of the invention.

The words exemplary and or example are used herein to mean serving as an example instance or illustration. Any embodiment described herein as exemplary and or example is not necessarily to be construed as preferred or advantageous over other embodiments. Likewise the term embodiments of the invention does not require that all embodiments of the invention include the discussed feature advantage or mode of operation.

Further many embodiments are described in terms of sequences of actions to be performed by for example elements of a computing device. It will be recognized that various actions described herein can be performed by specific circuits e.g. application specific integrated circuits ASICs by program instructions being executed by one or more processors or by a combination of both. Additionally these sequence of actions described herein can be considered to be embodied entirely within any form of computer readable storage medium having stored therein a corresponding set of computer instructions that upon execution would cause an associated processor to perform the functionality described herein. Thus the various aspects of the invention may be embodied in a number of different forms all of which have been contemplated to be within the scope of the claimed subject matter. In addition for each of the embodiments described herein the corresponding form of any such embodiments may be described herein as for example logic configured to perform the described action.

A client device referred to herein as a user equipment UE may be mobile or stationary and may communicate with a radio access network RAN . As used herein the term UE may be referred to interchangeably as an access terminal or AT a wireless device a subscriber device a subscriber terminal a subscriber station a user terminal or UT a mobile terminal a mobile station and variations thereof. Generally UEs can communicate with a core network via the RAN and through the core network the UEs can be connected with external networks such as the Internet. Of course other mechanisms of connecting to the core network and or the Internet are also possible for the UEs such as over wired access networks WiFi networks e.g. based on IEEE 802.11 etc. and so on. UEs can be embodied by any of a number of types of devices including but not limited to PC cards compact flash devices external or internal modems wireless or wireline phones and so on. A communication link through which UEs can send signals to the RAN is called an uplink channel e.g. a reverse traffic channel a reverse control channel an access channel etc. . A communication link through which the RAN can send signals to UEs is called a downlink or forward link channel e.g. a paging channel a control channel a broadcast channel a forward traffic channel etc. . As used herein the term traffic channel TCH can refer to either an uplink reverse or downlink forward traffic channel.

Referring to UEs . . . N are configured to communicate with an access network e.g. the RAN an access point etc. over a physical communications interface or layer shown in as air interfaces and or a direct wired connection. The air interfaces and can comply with a given cellular communications protocol e.g. CDMA EVDO eHRPD GSM EDGE W CDMA LTE etc. while the air interface can comply with a wireless IP protocol e.g. IEEE 802.11 . The RAN includes a plurality of access points that serve UEs over air interfaces such as the air interfaces and . The access points in the RAN can be referred to as access nodes or ANs access points or APs base stations or BSs Node Bs eNode Bs and so on. These access points can be terrestrial access points or ground stations or satellite access points. The RAN is configured to connect to a core network that can perform a variety of functions including bridging circuit switched CS calls between UEs served by the RAN and other UEs served by the RAN or a different RAN altogether and can also mediate an exchange of packet switched PS data with external networks such as Internet . The Internet includes a number of routing agents and processing agents not shown in for the sake of convenience . In UE N is shown as connecting to the Internet directly i.e. separate from the core network such as over an Ethernet connection of WiFi or 802.11 based network . The Internet can thereby function to bridge packet switched data communications between UE N and UEs . . . N via the core network . Also shown in is the access point that is separate from the RAN . The access point may be connected to the Internet independent of the core network e.g. via an optical communication system such as FiOS a cable modem etc. . The air interface may serve UE or UE over a local wireless connection such as IEEE 802.11 in an example. UE N is shown as a desktop computer with a wired connection to the Internet such as a direct connection to a modem or router which can correspond to the access point itself in an example e.g. for a WiFi router with both wired and wireless connectivity .

Referring to a server is shown as connected to the Internet the core network or both. The server can be implemented as a plurality of structurally separate servers or alternately may correspond to a single server. As will be described below in more detail the server is configured to support one or more communication services e.g. Voice over Internet Protocol VoIP sessions Push to Talk PTT sessions group communication sessions social networking services etc. for UEs that can connect to the server via the core network and or the Internet and or to provide content e.g. web page downloads to the UEs.

While internal components of UEs such as the UEs A and B can be embodied with different hardware configurations a basic high level UE configuration for internal hardware components is shown as platform in . The platform can receive and execute software applications data and or commands transmitted from the RAN that may ultimately come from the core network the Internet and or other remote servers and networks e.g. application server web URLs etc. . The platform can also independently execute locally stored applications without RAN interaction. The platform can include a transceiver operably coupled to an application specific integrated circuit ASIC or other processor microprocessor logic circuit or other data processing device. The ASIC or other processor executes the application programming interface API layer that interfaces with any resident programs in the memory of the wireless device. The memory can be comprised of read only or random access memory RAM and ROM EEPROM flash cards or any memory common to computer platforms. The platform also can include a local database that can store applications not actively used in memory as well as other data. The local database is typically a flash memory cell but can be any secondary storage device as known in the art such as magnetic media EEPROM optical media tape soft or hard disk or the like.

Accordingly an embodiment of the invention can include a UE e.g. UE A B etc. including the ability to perform the functions described herein. As will be appreciated by those skilled in the art the various logic elements can be embodied in discrete elements software modules executed on a processor or any combination of software and hardware to achieve the functionality disclosed herein. For example ASIC memory API and local database may all be used cooperatively to load store and execute the various functions disclosed herein and thus the logic to perform these functions may be distributed over various elements. Alternatively the functionality could be incorporated into one discrete component. Therefore the features of the UEs A and B in are to be considered merely illustrative and the invention is not limited to the illustrated features or arrangement.

The wireless communication between the UEs A and or B and the RAN can be based on different technologies such as CDMA W CDMA time division multiple access TDMA frequency division multiple access FDMA Orthogonal Frequency Division Multiplexing OFDM GSM or other protocols that may be used in a wireless communications network or a data communications network. As discussed in the foregoing and known in the art voice transmission and or data can be transmitted to the UEs from the RAN using a variety of networks and configurations. Accordingly the illustrations provided herein are not intended to limit the embodiments of the invention and are merely to aid in the description of aspects of embodiments of the invention.

Referring to the communication device includes logic configured to receive and or transmit information . In an example if the communication device corresponds to a wireless communications device e.g. UE A or B AP a BS Node B or eNodeB in the RAN etc. the logic configured to receive and or transmit information can include a wireless communications interface e.g. Bluetooth WiFi 2G CDMA W CDMA 3G 4G LTE etc. such as a wireless transceiver and associated hardware e.g. an RF antenna a MODEM a modulator and or demodulator etc. . In another example the logic configured to receive and or transmit information can correspond to a wired communications interface e.g. a serial connection a USB or Firewire connection an Ethernet connection through which the Internet can be accessed etc. . Thus if the communication device corresponds to some type of network based server e.g. server etc. the logic configured to receive and or transmit information can correspond to an Ethernet card in an example that connects the network based server to other communication entities via an Ethernet protocol. In a further example the logic configured to receive and or transmit information can include sensory or measurement hardware by which the communication device can monitor its local environment e.g. an accelerometer a temperature sensor a light sensor an antenna for monitoring local RF signals etc. . The logic configured to receive and or transmit information can also include software that when executed permits the associated hardware of the logic configured to receive and or transmit information to perform its reception and or transmission function s . However the logic configured to receive and or transmit information does not correspond to software alone and the logic configured to receive and or transmit information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further includes logic configured to process information . In an example the logic configured to process information can include at least a processor. Example implementations of the type of processing that can be performed by the logic configured to process information includes but is not limited to performing determinations establishing connections making selections between different information options performing evaluations related to data interacting with sensors coupled to the communication device to perform measurement operations converting information from one format to another e.g. between different protocols such as .wmv to .avi etc. and so on. For example the processor included in the logic configured to process information can correspond to a general purpose processor a digital signal processor DSP an ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration. The logic configured to process information can also include software that when executed permits the associated hardware of the logic configured to process information to perform its processing function s . However the logic configured to process information does not correspond to software alone and the logic configured to process information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further includes logic configured to store information . In an example the logic configured to store information can include at least a non transitory memory and associated hardware e.g. a memory controller etc. . For example the non transitory memory included in the logic configured to store information can correspond to RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. The logic configured to store information can also include software that when executed permits the associated hardware of the logic configured to store information to perform its storage function s . However the logic configured to store information does not correspond to software alone and the logic configured to store information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further optionally includes logic configured to present information . In an example the logic configured to present information can include at least an output device and associated hardware. For example the output device can include a video output device e.g. a display screen a port that can carry video information such as USB HDMI etc. an audio output device e.g. speakers a port that can carry audio information such as a microphone jack USB HDMI etc. a vibration device and or any other device by which information can be formatted for output or actually outputted by a user or operator of the communication device . For example if the communication device corresponds to UE A or UE B as shown in the logic configured to present information can include the display A of UE A or the touchscreen display B of UE B. In a further example the logic configured to present information can be omitted for certain communication devices such as network communication devices that do not have a local user e.g. network switches or routers remote servers such as the server etc. . The logic configured to present information can also include software that when executed permits the associated hardware of the logic configured to present information to perform its presentation function s . However the logic configured to present information does not correspond to software alone and the logic configured to present information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further optionally includes logic configured to receive local user input . In an example the logic configured to receive local user input can include at least a user input device and associated hardware. For example the user input device can include buttons a touchscreen display a keyboard a camera an audio input device e.g. a microphone or a port that can carry audio information such as a microphone jack etc. and or any other device by which information can be received from a user or operator of the communication device . For example if the communication device corresponds to UE A or UE B as shown in the logic configured to receive local user input can include the keypad A any of the buttons A or B through B the touchscreen display B etc. In a further example the logic configured to receive local user input can be omitted for certain communication devices such as network communication devices that do not have a local user e.g. network switches or routers remote servers such as the server etc. . The logic configured to receive local user input can also include software that when executed permits the associated hardware of the logic configured to receive local user input to perform its input reception function s . However the logic configured to receive local user input does not correspond to software alone and the logic configured to receive local user input relies at least in part upon hardware to achieve its functionality.

Referring to while the configured logics of through are shown as separate or distinct blocks in it will be appreciated that the hardware and or software by which the respective configured logic performs its functionality can overlap in part. For example any software used to facilitate the functionality of the configured logics of through can be stored in the non transitory memory associated with the logic configured to store information such that the configured logics of through each performs their functionality i.e. in this case software execution based in part upon the operation of software stored by the logic configured to store information . Likewise hardware that is directly associated with one of the configured logics can be borrowed or used by other configured logics from time to time. For example the processor of the logic configured to process information can format data into an appropriate format before being transmitted by the logic configured to receive and or transmit information such that the logic configured to receive and or transmit information performs its functionality i.e. in this case transmission of data based in part upon the operation of hardware i.e. the processor associated with the logic configured to process information .

Generally unless stated otherwise explicitly the phrase logic configured to as used throughout this disclosure is intended to invoke an embodiment that is at least partially implemented with hardware and is not intended to map to software only implementations that are independent of hardware. Also it will be appreciated that the configured logic or logic configured to in the various blocks are not limited to specific logic gates or elements but generally refer to the ability to perform the functionality described herein either via hardware or a combination of hardware and software . Thus the configured logics or logic configured to as illustrated in the various blocks are not necessarily implemented as logic gates or logic elements despite sharing the word logic. Other interactions or cooperation between the logic in the various blocks will become clear to one of ordinary skill in the art from a review of the embodiments described below in more detail.

The various embodiments may be implemented on any of a variety of commercially available server devices such as server illustrated in . In an example the server may correspond to one example configuration of the application server described above. In the server includes a processor coupled to volatile memory and a large capacity nonvolatile memory such as a disk drive . The server may also include a floppy disc drive compact disc CD or DVD disc drive coupled to the processor . The server may also include network access ports coupled to the processor for establishing data connections with a network such as a local area network coupled to other broadcast system computers and servers or to the Internet. In context with it will be appreciated that the server of illustrates one example implementation of the communication device whereby the logic configured to transmit and or receive information corresponds to the network access ports used by the server to communicate with the network the logic configured to process information corresponds to the processor and the logic configuration to store information corresponds to any combination of the volatile memory the disk drive and or the disc drive . The optional logic configured to present information and the optional logic configured to receive local user input are not shown explicitly in and may or may not be included therein. Thus helps to demonstrate that the communication device may be implemented as a server in addition to a UE implementation as in A or B as in .

Often there is a business need for one client device to quickly exchange data e.g. media information or files etc. with other client device s in a formal way e.g. as opposed to an informal peer to peer P2P exchange . However such exchanges typically require the client device to acquire personal contact information e.g. a unique user address at which a user can be contacted such as an email address phone number Skype Username Facebook ID LinkedIn ID or a unique network address at which an associated UE can be contacted via a network such as a MAC ID phone number etc. . For example assume that at a business luncheon attended by a small group of people a luncheon participant takes a group photo and wants to share the group photo with each other attendee of the group luncheon. In this case it is probably not practical for the luncheon participant to obtain the personal contact information of each other attendee. In another example assume that a marketing person wants to hand out a digital information brochure to conference attendees. In this case recipients of the digital information brochure may not want to browse the digital information brochure without divulging any personal contact information to the marketing person. Also certain transactions can occur via P2P protocols specifically to avoid a formal record by their respective operators. For example criminals may wish to exchange data files via P2P without form records of the data transfer being recorded.

While UEs and remain connected via the local P2P connection assume that an operator operator of UE determines to send a file and or to stream media to UE and or an operator operator of UE . For example operator may desire to stream media to UE or operator may want to send a file to operator e.g. via email etc. without caring whether UE itself actually receives the file e.g. operator may simply want the file accessible to operator in a manner that is not device specific etc. . At operator selects either a network connection e.g. the first network communication interface or the second network communication interface etc. or the local P2P interface as an interface on which to deliver the file and or media stream.

Referring to if operator selects the network interface UE requests a unique user address of operator and or a unique network address of UE after which UE prompts operator to determine whether operator is willing to grant the request. If operator is determined to deny the request at UE does not obtain the requested address . At this point UE can either attempt to deliver the file and or media stream via the local P2P interface or else can simply give up and stop attempting to deliver the file and or media stream. Otherwise if operator is determined to grant the request at UE sends the requested address to UE and UE delivers the file and or media stream to UE and or operator via the network interface based on the requested address . Turning back to if operator selects the local P2P interface instead of the network interface UE delivers the file and or media stream to UE via the local P2P connection established at and .

As will be discussed in more detail below with respect to one or more embodiments of the invention are directed to implementing a server mediated data transfer when a P2P mediated data transfer is requested and when ostensibly from the user or operator perspective the data transfer occurs via P2P. In other words a P2P mediated data transfer is redirected to a server and delivered via the server without notifying the respective operators of the sender or the target s with respect to the server redirect aspect. In at least one embodiment the server redirect function can be implemented in order to implement a monitoring e.g. wiretapping function to permit law enforcement to track data transfers that would otherwise be conducted anonymously via P2P or based on other criteria that function to override an operator s P2P specific data transfer request for delivery via the server.

At some later point in time assume that UEs . . . N each enter the given P2P communication range shown in . While UEs . . . N are within the given P2P communication range UEs . . . N each execute a local P2P discovery procedure and e.g. similar to through of respectively . Based on the local P2P discovery procedures of and UEs . . . N detect each other and form one or more local P2P connections through which P2P communication can be mediated and . For example the local P2P discovery procedures of and can include UE broadcasting an identifier e.g. an SSID an assigned temporary ID etc. via the local P2P communication interface to announce UE with UE detecting UE s broadcasted SSID by monitoring the local P2P communication interface or vice versa after which UEs and set up the local P2P connection. This process can then repeat for any additional P2P capable UEs in the given P2P communication range . At this point while UEs . . . N have established the local P2P connection s it is possible that UEs . . . N determine that one or more other UEs are not trusted contacts and . If UEs . . . N do not recognize one or more other UEs as trusted contacts any exchange of certain private information e.g. an operator s unique user address or the associated UE s unique network address information generally needs to be manually approved by a respective operator of a respective UE i.e. whichever UE s are untrusting prior to execution.

While UEs . . . N remain connected via the local P2P connection s assume that an operator operator of UE determines to send a file and or to stream media to UEs . . . N and or to respective operators operators . . . N of UEs . . . N . For example operator may desire to stream media to UEs . . . N. Unlike of assume at that operator of UE indicates that he she wishes to implement the transfer of the file and or media stream via the local P2P connection s e.g. by selecting P2P as the target interface similar to etc. .

In response to the detection of the operator requested P2P transfer at UE determines whether to intercept the P2P transfer and to redirect the file and or media stream to the server . The determination of can be performed in a variety of different ways. For example UE may be provisioned with server redirect instructions e.g. downloaded in conjunction with the temporary ID at or via some separate provisioning procedure that instruct UE to intercept i all P2P transmissions initiated by UE e.g. a law enforcement agency has a warrant for a wiretap for UE and or operator ii P2P transmissions from UE directed to designated target UEs e.g. a law enforcement agency has a warrant for a wiretap for the designated target UEs and or their associated operators iii P2P transmissions including a particular media type e.g. audio video encrypted data files copyrighted materials etc. iv P2P transmissions that occur at a particular time of day and or at a particular location e.g. inside of a house for which a law enforcement agency has a wiretap warrant v P2P transmissions that satisfy P2P override rules that can be specified by an operator e.g. an operator may want any songs to be transferred via the server to maintain a record even if the operator later forgets about this rule and asks for the songs to be P2P transferred or some other entity e.g. an IT administrator can establish the P2P override rules as part of enterprise policies to be applied to devices operated by one or more enterprise users or vi any combination thereof.

If UE determines not to redirect the file and or media stream to the server at the process advances to of and the P2P transfer is allowed to proceed without the server redirect. Otherwise if UE determines to redirect the file and or media stream to the server at UE obtains temporary ID s for UEs . . . N at . At UE may also optionally send its own temporary ID to any of UEs . . . N. Also the temporary ID exchange shown at can alternatively be implemented at an earlier point in time such as when the local P2P connections are established at and and or during the local P2P discovery procedure at and e.g. by setting the temporary ID equal to a broadcasted SSID identifying a respective UE etc. .

Referring to after obtaining the temporary ID s of UEs . . . N UE transmits the file and or media stream to the server along with the temporary ID s of UEs . . . N without notifying operator of the server redirect . In other words operator requested a P2P mediated data transfer but unbeknownst to operator the data transfer is redirected to the server as a server mediated data transfer. As will be appreciated this deception may involve user interface UI alternations e.g. a 4G or 3G indicator on UE may be blocked and a P2P identifier may be shown instead making it appear to operator as if the data transfer is actually occurring via P2P when this is in fact not true . The server looks up the unique network address and or unique user address based on the temporary ID s received from UE and then delivers the file and or media stream to UEs . . . N . Optionally if the server mediated data transfer is a group communication i.e. N is greater than 2 such that the file and or media stream is sent to multiple target UEs the server may assign a temporary group ID to UEs . . . N so that any subsequent data transfer received at the server containing the temporary group ID will be mapped to UEs . . . N as a communication group e.g. so that a data transfer from UE attaching the temporary group ID is delivered to each other UE from UEs . . . N and so on without the need to separately list the individual temporary ID of each target UE. So the server itself can map the temporary group ID to the individual temporary IDs which are in turn mapped to the unique user addresses and or unique network addresses of the various UEs and or operators.

At UEs . . . N receive the file and or media stream from the server without notifying their respective operators of the server redirect. For example similar to the operator deception noted above UI alternations may be leveraged to facilitate the P2P deception at UEs . . . N as well e.g. a 4G or 3G indicator on UEs . . . N may be blocked and a P2P identifier may be shown instead making it appear to operators . . . N as if the data transfer is actually occurring via P2P when this is in fact not true .

At the server generates a record of the server mediated transfer of the file and or media stream. While not shown explicitly in records generated at may be archived or stored in a database maintained by the server and the server or an administrator of the server may later receive data requests for one or more of the records. For example a law enforcement agency with an appropriate warrant may request all video streams originated by UE or all text messages received but UE in a particular date range or all emails sent to a particular email address from any of UEs . . . N and so on. In a further example the record generated at can be forwarded to a separate monitoring server in addition to or in place of the record being locally stored at the server. The decision of the server to forward certain records to the separate monitoring server can be based on one or more record forwarding policies executed by the server. For example if the FBI has a wiretapping warrant related to a particular user s communications any records associated with the particular user e.g. files and or media streams sent to from the particular user can be forwarded to a monitoring server operated by the FBI in real time where the forwarded records are available for inspection by the FBI.

While illustrates an example implementation whereby the server redirect occurs in place of the requested P2P mediated data transfer is directed to an alternative implementation whereby the server redirect occurs in addition to the P2P mediated data transfer.

Referring to after obtaining the temporary ID s of UEs . . . N at UE transmits the file and or media stream to the server along with the temporary ID s of UEs . . . N without notifying operator of the server redirect e.g. similar to of the server looks up the unique network address and or unique user address based on the temporary ID s received from UE e.g. similar to of and the server optionally assigns the temporary group ID to UEs . . . N if the server mediated data transfer is a group communication e.g. similar to of . In instead of having the server deliver the file and or media stream to UEs . . . N as in UE sends the file and or media stream to UEs . . . N via the local P2P connection s from and . In this case UE merely needs to hide the fact that the file and or media stream is also being sent to the server instead of bypassing the P2P data transfer itself and UEs . . . N merely know that the file and or media stream has occurred via P2P without knowing about the server redirect that occurred at . In this case the server generates a record of the server mediated transfer of the file and or media stream based on the temporary ID lookup operation from e.g. similar to of . As noted above with respect to in a further example the record generated at can be forwarded to a separate monitoring server in addition to or in place of the record being locally stored at the server. The decision of the server to forward certain records to the separate monitoring server can be based on one or more record forwarding policies executed by the server. For example if the FBI has a wiretapping warrant related to a particular user s communications any records associated with the particular user e.g. files and or media streams sent to from the particular user can be forwarded to a monitoring server operated by the FBI in real time where the forwarded records are available for inspection by the FBI.

While relate to embodiments whereby a server redirect that occurs in a manner that is transparent to operators of sending and or receiving devices for a data transfer other embodiments of the invention relate to server mediated data transfers that are not necessarily deceptive in terms of the server redirect. In particular are directed to defining a P2P connected communication state for two or more UEs to implement non P2P communication between the respective UEs even when the UEs are no longer P2P connected.

With reference to assume that have already been executed after which UEs . . . N remain connected via the local P2P connection s established at and . Next assume that an operator operator of UE determines to send a file and or to stream media to UEs . . . N and or to respective operators operators . . . N of UEs . . . N . For example operator may desire to stream media to UEs . . . N. Unlike of assume at that operator of UE indicates that he she wishes to implement the transfer of the file and or media stream via the server e.g. by selecting the network interface as the target interface similar to etc. .

In response to the detection of the operator requested server mediated data transfer at UE obtains temporary ID s for UEs . . . N at e.g. similar to of . Similar to of at UE may also optionally send its own temporary ID to any of UEs . . . N. Also the temporary ID exchange shown at can alternatively be implemented at an earlier point in time such as when the local P2P connections are established at and and or during the local P2P discovery procedure at and e.g. by setting the temporary ID equal to a broadcasted SSID identifying a respective UE etc. .

Referring to after obtaining the temporary ID s of UEs . . . N UE transmits the file and or media stream to the server along with the temporary ID s of UEs . . . N . of is similar to of except that the transmission of does not necessarily need to occur without notifying operator of the server mediated implementation of the data transfer. The server looks up the unique network address and or unique user address based on the temporary ID s received from UE e.g. similar to of and then delivers the file and or media stream to UEs . . . N e.g. similar to of . Optionally if the server mediated data transfer is a group communication i.e. N is greater than 2 such that the file and or media stream is sent to multiple target UEs the server may assign a temporary group ID to UEs . . . N so that any subsequent data transfer received at the server containing the temporary group ID will be mapped to UEs . . . N as a communication group without the need to separately list the individual temporary ID of each target UE e.g. similar to of . So the server itself can map the temporary group ID to the individual temporary IDs which are in turn mapped to the unique user addresses and or unique network addresses of the various UEs and or operators.

At the server generates a record of the server mediated transfer of the file and or media stream e.g. similar to of . While not shown explicitly in records generated at may be archived in a local or remote database and the server or an administrator of the server may later receive data requests for one or more of the records. For example in a non wiretapping scenario one or more of UEs . . . N may request a copy of one or more archived records.

At some later point in time assume that UE is no longer within the given P2P communication range such that the local P2P connection s established at are terminated e.g. although if N is greater than 2 separate local P2P connections established at could be maintained such as between UEs and etc. . Assume that the server maintains the association between the temporary ID s and UEs . . . N and or the temporary group ID and UEs . . . N from even after the P2P disconnection. Next operator of UE determines to send an additional file and or to stream additional media to UEs . . . N and or to respective operators operators . . . N of UEs . . . N . At this point a P2P transfer of the additional file and or media stream from UE to UEs . . . N is not possible. Thereby instead of attempting a P2P transfer UE transmits the additional file and or media stream to the server along with either i the temporary ID s of UEs . . . N obtained at or ii the temporary group ID optionally obtained at . In a further example the determination of can occur when either operator is controlling UE as illustrated in or alternatively while operator is controlling some other UE in an example. For example UE may correspond to a tablet PC operated by operator during a meeting with operators of UEs . . . N between . Later operator is operating a different UE e.g. a cell phone and wants to send the data determined at . In this case may be performed via the cell phone instead of the tablet PC so the UE performing different parts of the above noted processes need not stay the same throughout the respective processes in at least one embodiment.

The server looks up the unique network address and or unique user address based on the temporary ID s or temporary group ID received from UE and then delivers the additional file and or media stream to UEs . . . N and or their respective operators . In other words the delivery of does not actually need to be directly delivered to UEs . . . N although this is certainly possible. For example if operator has a unique user address e.g. email address or Skype Username maintained by the server in association with its temporary ID the server can forward the additional file and or media stream to the email address or Skype Username and if operator is operating a different UE e.g. UE X then operator may actually receive the additional file and or media stream on UE X instead of UE . At the server generates a record of the server mediated transfer of the additional file and or media stream e.g. similar to . As noted above with respect to of of in a further example the record generated at and or can be forwarded to a separate monitoring server in addition to or in place of the record being locally stored at the server. The decision of the server to forward certain records to the separate monitoring server can be based on one or more record forwarding policies executed by the server. For example if the FBI has a wiretapping warrant related to a particular user s communications any records associated with the particular user e.g. files and or media streams sent to from the particular user can be forwarded to a monitoring server operated by the FBI in real time where the forwarded records are available for inspection by the FBI. The server mediated data transfer that occurs between and in is based on a stored mapping between the temporary ID s of UEs . . . N or the temporary group ID and the respective unique user addresses of operators . . . N and or network addresses of UEs . . . N after UE is out of P2P range with UEs . . . N. However server mediated data transfers can also be directed back to UE as shown in .

Referring to assume that N is greater than 2 such that UEs . . . N includes at least UE . After of while UE is no longer within the given P2P communication range such that the local P2P connection s established at are terminated assume that operator determines to send a file and or to stream additional media to UEs and . . . N and or to respective operators operators and . . . N of UEs . . . N . At this point a P2P transfer of the additional file and or media stream from UE to UE is not possible although in theory UE could retain local P2P connections with UEs . . . N depending on the circumstances . Thereby instead of attempting a P2P transfer UE transmits the file and or media stream to the server along with either i the temporary ID s of UEs and . . . N obtained at or ii the temporary group ID optionally obtained at . In a further example the transmission of can occur when operator is controlling UE as illustrated in or some alternatively while operator is controlling some other UE in an example. For example UE may correspond to a tablet PC operated by operator during a meeting with operators of UEs and . . . N between . Later operator is operating a different UE e.g. a cell phone and wants to send the data determined at . In this case may be performed via the cell phone instead of the tablet PC so the UE performing different parts of the above noted processes need not stay the same throughout the respective processes in at least one embodiment.

The server looks up the unique network addresses and or unique user addresses based on the temporary ID s or temporary group ID received from UE and then delivers the additional file and or media stream to UEs and . . . N and or their respective operators . In other words the delivery of does not actually need to be directly delivered to UEs and . . . N although this is certainly possible. For example if operator has a unique user address e.g. email address or Skype Username maintained by the server in association with its temporary ID the server can forward the additional file and or media stream to the email address or Skype Username and if operator is operating a different UE e.g. UE X then operator may actually receive the additional file and or media stream on UE X instead of UE . At the server stores a record of the server mediated transfer of the additional file and or media stream e.g. similar to . As noted above with respect to of of of of in a further example the record generated at can be forwarded to a separate monitoring server in addition to or in place of the record being locally stored at the server. The decision of the server to forward certain records to the separate monitoring server can be based on one or more record forwarding policies executed by the server. For example if the FBI has a wiretapping warrant related to a particular user s communications any records associated with the particular user e.g. files and or media streams sent to from the particular user can be forwarded to a monitoring server operated by the FBI in real time where the forwarded records are available for inspection by the FBI.

Those of skill in the art will appreciate that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Further those of skill in the art will appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present invention.

The various illustrative logical blocks modules and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The methods sequences and or algorithms described in connection with the embodiments disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal e.g. UE . In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more exemplary embodiments the functions described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored on or transmitted over as one or more instructions or code on a computer readable medium. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. Also any connection is properly termed a computer readable medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and blu ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

While the foregoing disclosure shows illustrative embodiments of the invention it should be noted that various changes and modifications could be made herein without departing from the scope of the invention as defined by the appended claims. The functions steps and or actions of the method claims in accordance with the embodiments of the invention described herein need not be performed in any particular order. Furthermore although elements of the invention may be described or claimed in the singular the plural is contemplated unless limitation to the singular is explicitly stated.

