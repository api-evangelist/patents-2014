---

title: Item-level information collection for interactive payment experience
abstract: Disclosed is a technology for collecting item-level transaction information for interactive payment experience. According to one embodiment, a merchant server can maintain a database including the information of financial accounts having a particular classification. The classification indicates that these financial accounts are associated with a payment service system. When the merchant server determines a requested financial transaction involves a financial account classified in the database, the merchant server transmits the item-level transaction information to the payment service system. The payment service system receives the item-level transaction information in real-time or near real-time and generates an interactive digital transaction receipt for a consumer.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09652751&OS=09652751&RS=09652751
owner: SQUARE, INC.
number: 09652751
owner_city: San Francisco
owner_country: US
publication_date: 20140711
---
This application claims the benefit of U.S. Provisional Patent Application No. 62 000 251 entitled TRANSACTION INFORMATION COLLECTION FOR MOBILE PAYMENT EXPERIENCE which was filed on May 19 2014 which is incorporated by reference herein in its entirety.

The traditional manner of providing receipts for payment transactions using financial accounts e.g. credit cards and debit cards is to print the payment amount and the purchased goods or services on a paper receipt. For instance when a consumer wishes to pay for an item at a merchant s place of business by using a credit card the consumer typically runs the credit card through a card reader at the merchant s point of sale POS terminal. The merchant s POS terminal submits a transaction request to an acquirer. The merchant typically stores all of the day s authorized transactions in a batch and sends the batch to the acquirer at the end of the day to receive payment. The acquirer sends the batch to a card network e.g. VISA or MasterCard which distributes the transactions to credit card issuers. The credit card issuers authorize the transactions and then transfer the transaction amounts to one or more financial accounts of the merchant.

After a transaction has been authorized the credit card issuer sends a confirmation to the POS terminal along a path opposite to that described above. The POS terminal prints out a paper receipt listing the purchases made the method of payment and the prices including tax discounts and other price adjustments. The paper receipt serves as a proof of the purchase for the consumer.

References in this description to an embodiment one embodiment or the like mean that the particular feature function structure or characteristic being described is included in at least one embodiment of the present invention. Occurrences of such phrases in this specification do not necessarily all refer to the same embodiment. On the other hand the embodiments referred to also are not necessarily mutually exclusive.

Introduced here is technology that enables consumers to interact with digital transaction receipts also referred to as interactive digital receipts received by their mobile devices. According to one embodiment a payment service system receives transaction information from a card payment network. Using the received transaction information the payment service system generates a digital transaction receipt that is designed to interact with the consumer. A mobile device of the consumer receives the digital transaction receipt via a wireless network and displays it to the consumer. The consumer can interact with the digital transaction receipt in any of various ways such as specifying tip amount entering feedback confirming the transaction etc.

In some embodiments the payment service system can receive transaction information from different entities involved in processing the payment transaction. For example the payment service system may receive transaction information from the merchant the acquirer or the issuer. In order to identify the financial accounts that require transaction information collection the entity supplying the transaction information e.g. a card payment network can maintain a database including information of financial accounts having a particular classification e.g. accounts that are known to be associated with the payment service system . When the entity determines that a requested financial transaction relates to a financial account so classified in the database the entity transmits the transaction information to the payment service system in real time or near real time so that the payment service system can generate an interactive digital transaction receipt for the consumer.

The payment service system can receive messages indicative that a consumer chooses to enroll his or her financial accounts for the interactive payment service. Accordingly the payment service system can send instructions to an entity supplying transaction information e.g. the card payment network to adjust the database which identifies financial accounts.

In some embodiments a merchant server can maintain a database including the information of financial accounts having a particular classification. The classification indicates that these financial accounts are associated with the payment service system. When the merchant server determines a requested financial transaction involves a financial account classified in the database the merchant server transmits the item level transaction information to the payment service system. The payment service system receives the item level transaction information in real time or near real time and generates an interactive digital transaction receipt for the consumer.

Each of the aforementioned computer systems can include one or more distinct physical computers and or other processing devices which in the case of multiple devices can be connected to each other through one or more wired and or wireless networks. All of the aforementioned devices are coupled to each other through an internetwork which can be or include the Internet and one or more wireless networks e.g. a WiFi network and or a cellular telecommunications network .

The environment illustrated in can accommodate both traditional payment card transactions i.e. those involving reading of physical card of the customer at the merchant s location as well as card not present CNP transactions i.e. those where the card is not physically presented at the time that the payment is effected . In a traditional credit card transaction for example the merchant swipes the user s credit card through a card reader at the POS system . The term swipe here refers to any manner of triggering a card reader to read data from a card such as by passing a card into or through a magnetic stripe card reader optical scanner smartcard card with an embedded IC chip reader e.g. an EMV compliant card reader radio frequency identification RFID reader or the like. The POS system sends data read from the card e.g. the cardholders name credit card number expiration date and card verification value CVV to the computer system of the merchant s acquirer hereinafter acquirer . The acquirer sends this data to the computer system of the card payment network e.g. Visa or MasterCard hereinafter card payment network which forwards the data to the computer system of the issuing bank hereinafter issuer . If the transaction is approved by the issuer a payment authorization message is sent from the issuer to the merchant POS system via a path opposite of that described above.

In a card not present transaction for example the consumer places an online order by transmitting the data of a credit card from the mobile device to the POS system . The POS system can include e.g. a web server for receiving the online order information. Then the POS system sends the data of the card to the acquirer . The acquirer the issuer and the card payment network complete the transaction in a way similar to the traditional credit card transaction.

The payment service system includes one or more server computers programmed to collect transaction information and to provide interactive user interface based on the collected information. The payment service system can collect the transaction information from various parties such as the POS system the acquirer the issuer and the card payment network .

The mobile device in turn notifies the payment service system about the enrollment. The enrollment message authorizes the payment service system to collect transaction information regarding the payment transactions that relate to the enrolled financial accounts.

The payment service system can include a database for storing the information of the signed up financial accounts including e.g. data identifying the signed up financial accounts owners of the accounts etc. The payment service system sends an instruction to the card payment network to cause the card payment network to include the information of the signed up financial account in a whitelist database. The card payment network or another entity involved in processing of payment transactions subsequently uses the whitelist database during processing of a particular payment transaction to determine whether to send transaction information of the particular payment transaction to the payment service system .

The user initiates a payment transaction process by swiping a payment card through a card reader of the POS system as a traditional payment card transaction or sending data of a financial account to the POS system as a card not present transaction . For example the user can use the mobile device to place an online order by instructing the mobile device to send the data of the financial account to the POS system . The POS system receives the order and determines various information such as the total amount and stock availability. Then the POS system generates a request for a payment transaction and sends the request and data of the financial account to the acquirer . The data of the financial account can include e.g. cardholder s name card number expiration date and card verification value CVV .

The acquirer send the payment authorization request and data of the financial account to the card payment network . Based on the received data of the financial account the card payment network determines the financial institution issuer that issued the financial account and distributes the payment authorization request and data of the financial account to the issuer . Once the issuer approves the payment transaction on behalf of the user the issuer sends a payment authorization message to the POS system via a path opposite of that described above.

When the card payment network receives the request for the payment transaction the card payment network immediately determines whether the corresponding financial account is identified in the whitelist database that the card payment network maintains or to which the payment network has access . If the whitelist database includes that financial account the card payment network then immediately sends the transaction information to the payment service system . Hence the card payment network makes this determination and if appropriate sends this information to the payment service system during the transaction authorization process.

The payment service system can communicate with the card payment network through e.g. a predetermined application programming interface API . Through the API the payment service system receives the transaction information that relates to financial accounts that have been enrolled for the interactive payment service. The transaction information of a transaction can include e.g. an amount of the payment transaction an identification of the associated financial account an identity of the merchant and item level information. The item level information relates to the goods or services involved in the payment transaction. The item level information can include names identification numbers prices or descriptions of the goods or services. For example item level information of a purchase in a coffeehouse can include information such as iced coffee and apple pie i.e. names SKU102 and SKU 231 i.e. stock keeping unit numbers 2.99 and 3.49 i.e. prices .

The payment service system may receive transaction information from systems other than the card payment network . For example the acquirer or the issuer can also maintain a whitelist database for financial accounts that have been enrolled for the interactive payment service. Similar to the card payment network as illustrated in the acquirer or the issuer can update the whitelist database when the payment service system sends an instruction to add a new financial account into the database. When the acquirer or the issuer receives a request for processing a payment transaction that relates to a financial account identified by the whitelist database the acquirer or the issuer sends the transaction information to the payment service system .

In some alternative embodiments instead of maintaining a whitelist database for identifying financial accounts for the purpose of transaction information collection the payment card used by the user can include additional data for transaction information collection purpose. Once the payment card swipes through a card reader of the POS system the POS system sends the additional data along with the data of the payment card to the acquirer . The acquirer the card payment network or the issuer can follow the instruction included in the additional data to send the transaction information relating to the payment card to the payment service system .

Instead of receiving transaction information from the acquirer card payment network and the issuer the payment service system can receive transaction information from the POS system . illustrates an environment in which a payment service system collects transaction information from a point of sale POS system. The POS system maintains a whitelist database for financial accounts that have been enrolled for the interactive payment service.

The POS system can add to or drop from the whitelist database any financial account based on the instructions received from the payment service system . A user can use the mobile device to send messages to the payment service system indicating that the user wants to enroll a financial account for the interactive payment service or disassociate the financial account with the interactive payment service .

Once the user swipes a payment card through a card reader of the POS system or sends data of a financial account to the POS system e.g. via the mobile device the POS system determines the total amount and generates a request for processing the payment transaction. The POS system sends the request to the acquirer . The acquirer further sends the request to the card payment network which identifies the issuer based on the data of the financial account. Once the issuer approves the payment transaction the issuer sends a payment authorization message to the POS system via a path opposite of that described above.

The POS system scans the whitelist database to determine whether the financial account is identified by the whitelist database. If the financial account is identified by the whitelist database the POS system sends the transaction information to the payment service system . The transaction information includes item level information describing or identifying the goods or services involved in the payment transaction. As an incentive for the POS system of the merchant to supply the transaction information the merchant may receive a fee discount for processing the payment transaction. In some embodiments the payment service system can directly confirm the receipt of the transaction information with the card payment network so that the merchant will receive the processing fee discount. Alternatively the payment service system can send a proof of receiving the transaction information such as a confirmation code. The POS system forwards the confirmation code to the card payment network to receive the processing fee discount.

The payment service system can establish a communication channel with the POS system through an application programming interview API . Using the communication channel the payment service system can further monitor the status of the selected payment transaction in real time. The POS system can grant the payment service system access to any payment transaction relating to financial accounts identified by the whitelist database. Thus the payment service system not only can receive the transaction information but also can monitor the status of the payment transaction including being notified of the payment completion in real time.

Using the received transaction information the payment service system can provide the interactive payment service to the user in various ways. For example the payment service system can generate an interactive digital receipt based on the transaction information and send the interactive digital receipt to the mobile device of the user . The mobile device can present the interactive digital receipt in different forms such as a cell phone message an email a webpage a push notification or a user interface within the mobile payment application . The user can interact with the interactive digital receipt for performing various tasks such as confirming the total amount adjusting tip amount entering feedback applying promotional discount etc.

The connections between the systems and or devices in can be either direct or indirect. For example the connection between the payment service system and the mobile device can be an indirect connection through the internetwork as illustrated in .

Mobile device A can implement an application such as an interactive receipt mobile application for use by a mobile user where the interactive receipt mobile application includes one or more customer interface components of interactive digital receipt . The interactive receipt mobile application can be either the same application as mobile payment application or an application separate from the mobile payment application . As used herein the term customer interactive component refers to a component of a user interface intended for a customer to view and interact e.g. submit inputs with various features offered via interactive digital receipt . Interactive digital receipt includes information indicative of the payment transaction such as transaction information e.g. payment amount and item description and various features that allow the customer to perform action associated with the transaction subsequent to delivery of the receipt to the customer. While interactive digital receipt is embodied in a mobile application according to the embodiment of other embodiments of the receipt are possible in light of the disclosure herein. In some embodiments interactive digital receipt is embodied in a text message that can be received at a computing device e.g. devices A B . In some embodiment interactive digital receipt is embodied in an email message that can be received at the computing device.

In some embodiments payment service system generates interactive digital receipt for a customer after completion of a payment transaction between the customer and a merchant e.g. payment authorization and approval that occurs at the completion of a service and or tendering of goods . Payment service system then delivers receipt to the customer at the customer s mobile device A. In some embodiments the payment service system includes a digital receipt system that carries out the functionalities associated with implementing receipt .

The mobile device A receives and displays the interactive digital receipt on display screen . Interactive digital receipt may take up an entirety or any portion of display screen . Interactive digital receipt can include various contents offered to the customer. In the embodiment of interactive digital receipt includes a transaction component and one or more interactive components . The transaction component displays details associated with a particular transaction between the customer and the merchant where the transaction details are displayed in real time in response to an occurrence of the particular transaction e.g. payment transaction at the completion of a service . The interactive components display one or more features for the customer to interact or perform an action associated with the transaction. In some embodiments the features are generated so as to be available via the interactive digital receipt only within a predefined time period. The predefined time period is configurable by the merchant and allows the merchant to provide time based incentives to engage the customer.

The interactive components and general look and feel of interactive digital receipt can be configured according to a particular merchant s needs. For example a merchant in the business of selling household supplies can configure the interactive digital receipt to generate a feedback component without generating a tipping component. In another example a merchant in the business of operating a restaurant can choose to have both the tipping and the feedback components be generated in the interactive digital receipt . One of ordinary skill in the art will appreciate that other configurations and components are possible.

Transaction components A B provide transaction information associated with the transaction. Transaction component A includes an overview of the transaction completed between the customer and the merchant such as the total amount of the transaction the payment card used for the transaction e.g. payment card name or last four digits of a payment card associated with the payment card and the date among others. Transaction component B includes details of the transaction such as the name of the items purchased the quantity and the price among others. For example the transaction component B includes item level information such as turkey sandwich and iced team i.e. item names 8.70 and 2.75 item prices .

Interactive tipping component or tipping component allows the customer to submit a gratuity tip amount at a later time i.e. subsequent to completion of a payment transaction. An example transaction for example is payment for a meal where the customer can leave a tip after she has left the restaurant using interactive digital receipt on her mobile device B which has been delivered to device B automatically after completion of payment. In some embodiments payment service system receives the customer s tip submission via interactive receipt and communicates the amount to the card payment network . The card payment network adds the tip amount to the already authorized payment amount and sends the updated authorization to POS system of the merchant without requiring any additional payment approval from the customer. The merchant does not have to physically enter and request for an additional authorization for the tip amount from the card payment network .

In some embodiment tipping component includes automatically generated tip amounts based on a payment amount associated with the transaction e.g. 10 15 or 20 . In some embodiments tipping component includes a text box that allows the customer to enter a number. In some embodiments where interactive digital receipt is in the form of a text message tipping component is embodied in a text message prompting the customer to reply with an amount e.g. Tip by reply with dollar amount . In some embodiments tipping component is a Uniform Resource Locator URL link which takes the user to a web page to allow adding of the tip amount. The link can be a part of a text message a part of the text box within a mobile app or an email.

In some embodiments tipping component is configured to be available for an unlimited time period. In some embodiments tipping component is configured to be available for a predefined time period or timeframe starting after a time instance when payment has been authorized and approved. The time period may be for example an hour a day a week or any other desired time period e.g. unlimited . In some embodiments the time period is configured by the merchant. The time period is initialized or started at a time instance at which the transaction between the customer and merchant has completed and decreases incrementally from this time instance at a rate that corresponds to an ordinary passage of time. At the expiration of the time period i.e. the countdown reaches 0 the tipping feature becomes unavailable. In a real world setting such time limitation helps the merchant manage its payment transactions more efficiently. For example a merchant often processes its payment transactions in batches and would not want to keep any particular transaction open indefinitely.

In some embodiments the time period of the tipping component is configured to incorporate a user defined default tip amount. A customer defines a nominal tip to be automatically submitted if no tip is submitted at the time period expiration. For example customer defines the default tip to be 10 for her favorite restaurant to make sure that merchant always gets a tip. In such example the 10 tip is automatically authorized for any transaction with that restaurant whenever no tip amount is added at the expiration. In some embodiments the default tip amount may be defined by the merchant. For example a restaurant merchant may want to configure a default nominal amount for restaurant services to groups of six parties or more. In such example when no tip is added to the payment amount at the end of a time period e.g. 2 hours an automatic 20 tip is added to the customer s payment card authorization.

Interactive feedback component or feedback component allows the customer to submit feedback after the completion of a particular transaction with a merchant. The feedback may include submitting for example a rating e.g. stars a review a suggestion or the like on various aspects of the transaction e.g. store cleanliness service products overall visit satisfaction etc. . In some embodiments the feedback is submitted directly to the merchant. In some embodiments a digital receipt system coupled to transaction computer system coordinates communicates and links with third party services associated with the merchant in implementing the feedback feature. In such embodiments the digital receipt system transmits the feedback submitted by the customer via receipt to the third party services. The third party services aggregate the feedback in association with other feedback provided by the merchant. Such third party services may include for example Yelp.com Urban Spoon YP.com and the like.

In some embodiments feedback component is configured to be available only for a predefined time period or timeframe. In some embodiments the time period associated with the feedback component feedback time period is configured to be the same as the time period associated with tipping component tipping time period . For example the time periods for both may be set at one hour and at the expiration of the hour both the tipping and the feedback features become unavailable. In some embodiments the feedback time period is configured to be different from the tipping time period. For example the feedback time period may be set at one week while the tipping time period may be set at one hour.

In some embodiments the feedback time period is configured differently depending on a particular merchant. For example merchant A configures the feedback time period to be one day while merchant B configures the time period to be one week. In such example feedback component becomes unavailable to the customer only on the receipt generated for merchant A and the feedback component on the receipt generated for merchant B remains active until the end of the week. In some embodiments a merchant can configure the feedback time period to be tied to an incentive i.e. feedback reward to encourage feedback. For example the customer is rewarded a 20 Off Coupon incentive or feedback reward if a written review is submitted before expiration of the feedback time period. In another example if the feedback is submitted within 10 minutes after the completion of the payment transaction the reward is a 20 Off coupon on the other hand if the feedback is submitted within 12 hours but not exceeding the transaction time period allowed for the feedback e.g. 24 hours the reward is a 5 coupon.

Interactive promotion component or promotion component allows a particular merchant to engage and incentivize a customer to interact with the merchant. In some embodiments promotion component generates one or more promotional rewards or promotion associated with the completed transaction. For example merchant A provides a coupon that can be redeemed at merchant B an affiliated business with merchant A. In some embodiments the promotion is time based where the customer must redeem the reward within a predefined period or timeframe. In such embodiments the promotion is configured to reduce or decrease in value corresponding to a decrease in the passage of time associated with the time period. The time period associated with the promotion component promotion time period may be configured to be the same as or different from the feedback time period and or the tipping time period.

In one example a 10 off coupon is generated via the interactive digital receipt for the customer to redeem at a next meal with the merchant. Such 10 coupon is set to decrease in value i.e. until 0 from the moment the coupon is generated subsequent to the transaction at the merchant s store. As such the sooner the customer redeems the time based coupon the higher the value she receives. In some embodiments the merchant configures the rate of reduction. In one example the restaurant sets the 10 coupon to expire after a week with no reduction in value as long as the coupon is redeemed. In another example the restaurant sets the 10 coupon to expire after 3 days where the value reduces each day until the value reaches 0 at the end of the third day.

In some embodiments the customer redeems the promotion by completing various redemption or promotional activities. Details of the activities may be displayed in the promotion component . Some redemption activities include simply revisiting the merchant to make another purchase for goods and or services as discussed in the example above. Other redemption activities include participating in a game via the mobile device B. Some redemption activities include participating in activities with other affiliated merchants. The redemption activity and the decreasing rate of the time based reward may be configured by the merchant offering the reward. Such configurations are beneficial as they allow the merchant to customize the promotions according to the merchant s business such as tailoring to an advertising campaign or a targeted customer demographic.

In some embodiments promotion component operates as an advertisement component to promote products and or services. Such advertisement includes for example a promotional reward to entice the user to click on or select a particular offering being displayed. In another example the advertisement includes a plain display with no interaction required from the customer where the interaction comes from the advertisement content changing to attract the customer s attention. The advertisement content can change based on the completed transaction for which the receipt has been generated. For example for a coffee purchase transaction the advertisement includes information about a sustainable coffee alliance organization. The advertisement can also include information about nearby merchants associated with the venue where the completed transaction has taken place. In some embodiments the interactive advertisement component is coupled to the interactive transaction record where advertisement content is changed based on details extracted from the interactive transaction record.

Interactive loyalty rewards component or loyalty record component allows the customer to maintain and manage loyalty points associated with a particular merchant. Some merchants for example choose to reward loyal customers with reward points for their purchases and or services transacted with the merchant. Loyalty record component tracks those purchases and or services over time stores and updates reward points associated with the purchases and or services and maintains a membership status of the customer in relation to a particular merchant. In some embodiments the loyalty record component is configured to be time based where the component tracks and maintains the loyalty status and or rewards based on a predefined time period. For example the loyalty record component upgrades the loyalty status of the consumer every month where it calculates the transactions completed by the consumer within the month. The time period associated with the loyalty record component loyalty time period may be configured to be the same as or different from time periods associated with other interactive components of the interactive receipt.

In an illustrative example the rewards record tracks the number of baked goods bought from merchant A s bakery and updates the customer to an elite status in relation to that bakery when the customer has bought items within 5 days. The elite status is displayed in the loyalty record component . The customer can redeem for a reward at the bakery with the loyalty record. In some embodiments the merchant s POS system can communicate with the loyalty record component without need for the customer to physically show the loyalty record at time of redemption.

Interactive transaction records component transaction records component . Transaction records component includes one or more interactive digital receipts that has resulted from one or more payment transactions carried out by the customer with one or more merchants. In some embodiments transaction records component is configured to include only interactive digital receipts associated with a particular merchant. In some embodiments transaction records component is configured to include all interactive digital receipts associated with the customer including receipts associated with different merchants with whom the customer has transacted. The interactive transaction record allows the customer to organize her interactive digital receipts to maintain a comprehensive view of all payment transactions and to perform one or more actions associated with those transactions via respective interactive components of the receipts. Other interactive components not discussed above but consistent with the techniques discussed throughout may also be envisioned by one of ordinary skill in the art based on the disclosed technology.

Interactive financial accounts component or financial accounts component allows the customer to maintain and change financial accounts or financial accounts associated with a particular payment transaction in which a payment object e.g. payment card is utilized. The financial accounts component allows a customer to review details about the transaction including the financial accounts that are associated with the consumer s payment object and the particular financial account selected for payment in a particular transaction. In some embodiments the financial accounts component allows the consumer to change the selected financial account to another financial account associated with the payment object. For example the consumer after leaving the merchant s place of business remembers she has unused credits in a gift card and accesses the financial accounts component to select the gift card instead of a VISA credit card to pay for the transaction. In some embodiments the financial accounts component is configured to be time based where the component enables the consumer to change financial accounts within a predefined time period. For example the consumer is able to change the selected financial accounts only within one hour after the transaction has been completed e.g. after authorization and approval . In another example the consumer is able to change the selected financial accounts within 24 hours after the transaction.

Upon receiving the message step the payment service system sends to a card payment network system a classification instruction step . Upon receiving the classification instruction step the card payment network system applies a predetermined classification to the financial account of the consumer step i.e. a classification indicative that the account is associated with the payment service system . The classification may but does not necessarily indicate to the card payment network system that the financial account has been enrolled for the interactive payment service. The classification allows the card payment network system to identify the financial accounts associated with the payment service system so that the card payment network system sends transaction information relating to these financial accounts to the payment service system . The card payment network system can e.g. maintain a database storing information identifying the financial accounts associated with the payment service system .

The merchant server sends to the card payment network system a payment authorization request for the payment transaction step . Upon receiving the payment authorization request step the card payment network system determines whether the financial account associated with the payment transaction has been applied with the predetermined classification step . The card payment network system can maintain a database including information of financial accounts that have been applied with the predetermined classification and use the database to determine whether a particular financial account is classified or not.

If that financial account is classified the card payment network system sends transaction information of the payment transaction to the payment service system through an application programming interface API step . If that financial account is not classified the card payment network system does not send the transaction information to the payment service system step .

The payment service system has access to information of the financial account and information to enable the payment service system to communicate with mobile device . The payment service system receives the transaction information from the card payment network system step . Based on the transaction information the payment service system generates a digital transaction receipt indicative of the payment transaction step . The payment service system then transmits to the mobile device of the consumer an instruction for a mobile application in the mobile device to display or output in any other manner the digital transaction receipt to the consumer step . The payment service system is not a participant in processing the payment transaction and is not in a payment transaction message flow between the merchant s POS system and a card issuer or card payment network system involved in the transaction.

The mobile device displays or otherwise outputs the digital transaction receipt that lists item level information relating to goods or services involved in the payment transaction and includes an interface element to enable the consumer to specify a gratuity amount of the payment transaction step . Next the mobile device inputs the gratuity amount specified by the consumer through the interface element step . The mobile device sends a message indicative of the gratuity amount to the payment service system step .

Upon receiving the message indicative of the gratuity amount step the payment service system sends to the card payment network system a request to adjust the total payment amount of the payment transaction based on the gratuity amount that has been specified by the consumer step . Accordingly the card payment network system adjusts the total amount of the payment transaction based on the gratuity amount step . In some alternative embodiments a consumer or a merchant can specify a gratuity amount using the POS system . Likewise the POS system can present a digital receipt and a user interface for specifying the gratuity amount. Upon receiving the specified gratuity amount the POS system sends the amount to the payment server system to adjust the total payment transaction amount.

In some embodiments the digital transaction receipt presented by the mobile device includes a user interface element to enable the consumer to specify a promotional code. The payment service system sends a request to the card payment network to confirm the validity of the promotional code and to adjust the amount of the payment transaction based on a promotion associated with the promotional code if the promotional code is valid.

In some other embodiments the digital transaction receipt presented by the mobile device includes an interface element to enable the consumer to specify a comment that relates to a purchase or a merchant associated with the payment transaction. The digital transaction receipt can further include a link to a website or a mobile application for managing the financial account.

The mobile device can further send the payment service system the location information regarding the geographical location of the mobile device when the mobile device communicates with the POS system and initiates the payment transaction. The payment service system can then forward the location information to the card payment network system . Both the payment service system and the card payment network system can utilize the location information to analyze the behavior pattern of the consumer.

In some alternative embodiments the payment service system receives the transaction information from another payment processing entity involved in the transaction e.g. an issuer an acquirer or a merchant server instead of the card payment network system . For example the acquirer or the issuer can also maintain a whitelist database for financial accounts that have been applied with a predetermined classification. When the acquirer or the issuer determines that a financial account associated a received payment authorization request has been applied with the predetermined classification the acquirer or the issuer sends the transaction information to the payment service system . The payment processing entity may provide a processing fee discount as an incentive for the merchant server to supply the transaction information.

The merchant server receives from a payment service system an instruction to add a new financial account step . Accordingly the merchant server adds information of the new financial account to the database step .

The payment processing entity processes the payment transaction according to the request step . Then the merchant server receives a confirmation of completing the payment transaction in response to the payment authorization request step .

The merchant server determines whether the financial account involved in the payment transaction is classified as indicated by the data in the database step . If the financial account is classified according to the database the merchant server sends to the payment service system item level information about goods or services involved in the payment transaction step . The payment service system has access to information of the financial account and information to enable the payment service system to communicate with mobile device . If the financial account is not classified according to the database the merchant server does not send transaction information to the payment service system step .

Upon receiving the item level transaction information step the payment service system generates a digital transaction receipt listing the goods or services involved in the payment transaction based on the item level information step . A mobile device of the consumer receives and represents the digital transaction receipt step . The digital transaction receipt as illustrated in enables the consumer to interact with the receipt in various ways such as specifying tip amount entering feedback confirming the transaction etc. The payment service system is not a participant in processing the payment transaction and is not in a payment transaction message flow between the merchant s POS system and a card issuer or card payment network system involved in the transaction.

In the illustrated embodiment the processing system includes one or more processors memory a communication device and one or more input output I O devices all coupled to each other through an interconnect . The interconnect may be or include one or more conductive traces buses point to point connections controllers adapters and or other conventional connection devices. The processor s may be or include for example one or more general purpose programmable microprocessors microcontrollers application specific integrated circuits ASICs programmable gate arrays or the like or a combination of such devices. The processor s control the overall operation of the processing device . Memory may be or include one or more physical storage devices which may be in the form of random access memory RAM read only memory ROM which may be erasable and programmable flash memory miniature hard disk drive or other suitable type of storage device or a combination of such devices. Memory may store data and instructions that configure the processor s to execute operations in accordance with the techniques described above. The communication device may be or include for example an Ethernet adapter cable modem Wi Fi adapter cellular transceiver Bluetooth transceiver or the like or a combination thereof. Depending on the specific nature and purpose of the processing device the I O devices can include devices such as a display which may be a touch screen display audio speaker keyboard mouse or other pointing device microphone camera etc.

Unless contrary to physical possibility it is envisioned that i the methods steps described above may be performed in any sequence and or in any combination and that ii the components of respective embodiments may be combined in any manner.

The techniques introduced above can be implemented by programmable circuitry programmed configured by software and or firmware or entirely by special purpose circuitry or by a combination of such forms. Such special purpose circuitry if any can be in the form of for example one or more application specific integrated circuits ASICs programmable logic devices PLDs field programmable gate arrays FPGAs etc.

Software or firmware to implement the techniques introduced here may be stored on a machine readable storage medium and may be executed by one or more general purpose or special purpose programmable microprocessors. A machine readable medium as the term is used herein includes any mechanism that can store information in a form accessible by a machine a machine may be for example a computer network device cellular phone personal digital assistant PDA manufacturing tool any device with one or more processors etc. . For example a machine accessible medium includes recordable non recordable media e.g. read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices etc. etc.

Note that any and all of the embodiments described above can be combined with each other except to the extent that it may be stated otherwise above or to the extent that any such embodiments might be mutually exclusive in function and or structure.

Although the present invention has been described with reference to specific exemplary embodiments it will be recognized that the invention is not limited to the embodiments described but can be practiced with modification and alteration within the spirit and scope of the appended claims. Accordingly the specification and drawings are to be regarded in an illustrative sense rather than a restrictive sense.

