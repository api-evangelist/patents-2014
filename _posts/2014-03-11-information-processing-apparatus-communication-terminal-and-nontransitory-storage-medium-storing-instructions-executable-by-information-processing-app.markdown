---

title: Information processing apparatus, communication terminal, and non-transitory storage medium storing instructions executable by information processing apparatus
abstract: An information processing apparatus and a communication terminal can carry out first wireless communication and second wireless communication. The first wireless communication is established when a distance between the information processing apparatus and the communication terminal is equal to or less than a first distance. The information processing apparatus determines whether data communication is to be carried out over the first wireless communication or the second wireless communication. When the data communication is to be carried out over the first wireless communication, the information processing apparatus carries out the data communication over the first wireless communication. When the data communication is to be carried out over the second wireless communication, the information processing apparatus carries out data communication of first setting information with the communication terminal over the first wireless communication to establish the second wireless communication and carries out data communication over the second wireless communication.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09086830&OS=09086830&RS=09086830
owner: BROTHER KOGYO KABUSHIKI KAISHA
number: 09086830
owner_city: Nagoya-Shi, Aichi-Ken
owner_country: JP
publication_date: 20140311
---
The present application claims priority from Japanese Patent Application No. 2013 066239 which was filed on Mar. 27 2013 the disclosure of which is herein incorporated by reference in its entirety.

The present invention relates to an information processing apparatus communicable with a communication terminal the communication terminal and a non transitory storage medium storing a plurality of instructions executable by a processor of the information processing apparatus.

There is known a technique for carrying out wireless communication between two communication devices. For example the two communication devices use short distance wireless communication i.e. wireless communication according to NFC Near Field Communication standard to carry out communication for wireless settings. These wireless settings are used for carrying out wireless communication according to a communication standard e.g. IEEE 802.11a 802.11b that differs from the NFC standard. Accordingly the two communication devices can carry out wireless communication according to the wireless settings.

To switch a communication path from the short distance wireless communication to the wireless communication according to the wireless settings there is a need to execute various kinds of processings. Also the switch of the communication path may cause a switching time in which no communication can be carried out. Considering a load of processing and a time required for communication there are two cases in which data should be transferred over the short distance wireless communication without any switch of the communication path and in which data should be transferred over the wireless communication after the switch of the communication path.

The present invention provides an information processing apparatus including a first communication interface configured to carry out first wireless communication with a communication terminal according to a first communication standard a second communication interface configured to carry out second wireless communication with the communication terminal according to a second communication standard a processor and a memory configured to store a plurality of instructions. The plurality of instructions when executed by the processor cause the information processing apparatus to execute a first communication processing in which the first communication interface establishes the first wireless communication when a distance between the communication terminal and the first communication interface is equal to or less than a first distance a first information obtaining processing in which the information processing apparatus obtains first information a determination processing in which the information processing apparatus determines based on the first information obtained in the first information obtaining processing whether data communication is to be carried out with the communication terminal over one of the first wireless communication and the second wireless communication a second communication processing in which when the information processing apparatus determines in the determination processing that the data communication is to be carried out with the communication terminal over the first wireless communication the information processing apparatus carries out the data communication with the communication terminal over the first wireless communication established in the first communication processing and a third communication processing in which when the information processing apparatus determines in the determination processing that the data communication is to be carried out with the communication terminal over the second wireless communication the information processing apparatus carries out data communication of first setting information with the communication terminal over the first wireless communication established in the first communication processing to establish the second wireless communication with the communication terminal and carries out data communication with the communication terminal over the second wireless communication.

The present invention also provides a communication terminal including a first communication interface configured to carry out first wireless communication with an information processing apparatus according to a first communication standard a second communication interface configured to carry out second wireless communication with the information processing apparatus according to a second communication standard a processor and a memory configured to store a plurality of instructions. The plurality of instructions when executed by the processor cause the communication terminal to execute a first communication processing in which the first communication interface establishes the first wireless communication when a distance between the communication terminal and the first communication interface is equal to or less than a first distance a first command information obtaining processing in which the communication terminal uses the first communication interface to obtain from the information processing apparatus first command information for commanding data communication with the information processing apparatus over the first wireless communication a second communication processing in which when the first command information is obtained in the first command information obtaining processing the communication terminal carries out the data communication with the information processing apparatus over the first wireless communication established in the first communication processing a second command information obtaining processing in which the communication terminal uses the first communication interface to obtain from the information processing apparatus second command information for commanding data communication with the information processing apparatus over the second wireless communication and a third communication processing in which when the second command information is obtained in the second command information obtaining processing the communication terminal establishes the second wireless communication with the communication terminal by using first setting information transferred with the information processing apparatus over the first wireless communication and carries out the data communication with the information processing apparatus over the second wireless communication.

The present invention also provides a non transitory storage medium storing a plurality of instructions executable by a processor of an information processing apparatus. The information processing apparatus includes a first communication interface configured to carry out first wireless communication with a communication terminal according to a first communication standard a second communication interface configured to carry out second wireless communication with the communication terminal according to a second communication standard and the processor. The plurality of instructions when executed by the processor cause the information processing apparatus to execute a first communication processing in which the first communication interface establishes the first wireless communication when a distance between the communication terminal and the first communication interface is equal to or less than a first distance a first information obtaining processing in which the information processing apparatus obtains first information a determination processing in which the information processing apparatus determines based on the first information obtained in the first information obtaining processing whether data communication is to be carried out with the communication terminal over one of the first wireless communication and the second wireless communication a second communication processing in which when the information processing apparatus determines in the determination processing that the data communication is to be carried out with the communication terminal over the first wireless communication the information processing apparatus carries out the data communication with the communication terminal over the first wireless communication established in the first communication processing and a third communication processing in which when the information processing apparatus determines in the determination processing that the data communication is to be carried out with the communication terminal over the second wireless communication the information processing apparatus carries out data communication of first setting information with the communication terminal over the first wireless communication established in the first communication processing to establish the second wireless communication with the communication terminal and carries out data communication with the communication terminal over the second wireless communication.

The communication terminal includes an NFC communication interface which can communicate with an NFC communication interface of the MFP over wireless communication according to the NFC Near Field Communication standard hereinafter may be referred to as NFC wireless communication or NFC communication . In the present embodiment the NFC wireless communication is carried out according to ISO IEC 21481 or 18092.

The communication terminal includes a wireless LAN interface which can communicate with a wireless LAN interface of the MFP in an infrastructure mode over wireless communication according to the wireless LAN standard hereinafter may be referred to as wireless LAN communication . The wireless LAN interface can also communicate directly with the wireless LAN interface of the MFP over wireless communication according to the WiFi Direct WFD standard hereinafter may be referred to as WFD wireless communication or WFD communication . The communication terminal can establish a connection with the MFP according to the WFD standard to establish a WFD network. The WFD wireless communication is carried out according to IEEE the Institute of Electrical and Electronics Engineers 802.11 and standards equivalent to it e.g. 802.11a 11b 11g and 11n . That is the communication terminal can transmit a print request and a scan request to the MFP over the NFC wireless communication or the WFD wireless communication by executing a print and scan application .

The communication terminal is a mobile device such as a mobile phone and a mobile terminal device. The communication terminal includes a display device a touch panel an input interface the wireless LAN interface the NFC communication interface a central processing unit CPU a read only memory ROM a random access memory RAM and a storage device . These devices are connected to each other via an input output port .

The display device receives an image signal from the CPU and displays an image based on the received image signal. Examples of the display device include a liquid crystal display LCD and an organic electroluminescent panel. The touch panel is formed of a transparent material and superposed on an upper surface of the display device . When touched with an input object such as a finger of a user or a stylus the touch panel detects a position of the touch and transmits information about the detected position to the CPU . The input interface is constituted by operation buttons for example.

The NFC communication interface is an interface for carrying out the NFC wireless communication . Various kinds of information about communication settings such as an IP address and an SSID Service Set Identifier is unnecessary for establishing the NFC wireless communication . The wireless LAN interface is an interface for carrying out the wireless LAN communication . A communicable distance or range within which the wireless LAN communication can be carried out is greater than a communicable distance or range within which the NFC wireless communication can be carried out. Also a communication speed or rate in the wireless LAN communication is faster than that in the NFC wireless communication .

The CPU executes programs stored in the storage device . The RAM temporarily stores information required for processings to be executed by the CPU . The storage device is constituted by a flash memory a hard disc HDD a buffer in the CPU and other similar devices in combination. The storage device can store image data and document data for example. The storage device stores a program . The program includes the application and an operating system OS . The CPU executes processings according to the program . In the following explanation the CPU which executes a program such as the application and the OS may be described simply by the name of program. For example wordings the application executes may mean wordings the CPU executing the application executes .

The application causes the CPU to execute e.g. a processing for transmitting a print command from the communication terminal to the MFP for example. The OS is a program which provides basic functions and common services for the application and other programs and devices. The OS includes a program for causing the wireless LAN interface and the NFC communication interface to carry out wireless communication. The OS also provides an application programming interface API for causing each program to obtain information obtained by hardware or for causing each program to output a command to hardware.

While the communication terminal is similar in construction to the communication terminal most components of the communication terminal are not illustrated in for simplicity. The communication terminal can carry out WFD wireless communication with the MFP .

There will be next explained a structure of the MFP . The MFP mainly includes a CPU a storage device the wireless LAN interface the NFC communication interface a button input device a panel a printer and a scanner . These devices are communicable with each other via an input output port .

The CPU executes a program stored in the storage device . The storage device is constituted by a RAM a ROM a flash memory a hard disc HDD a buffer in a CPU and other similar devices in combination. The storage device stores the program . The program includes an OS .

The NFC communication interface is an interface for carrying out the NFC wireless communication . The wireless LAN interface is an interface for carrying out the wireless LAN communication . The button input device includes keys for various functions of the MFP . The button input device may be formed integrally with the panel as a touch panel. The panel displays various kinds of information about the functions of the MFP . The printer prints an image based on image data stored in the storage device . The scanner reads an image on a document.

There will be next explained operations of the MFP with reference to . A flow illustrated in begins when the MFP is turned on.

This flow begins with S at which the CPU displays a waiting screen on the panel . The CPU at S determines whether the communication terminal has touched the MFP or not. Specifically the CPU determines whether the NFC communication interface of the communication terminal has been brought into close proximity to the NFC communication interface of the MFP or not in other words the CPU determines whether the NFC communication interface of the communication terminal has been placed within a predetermined distance or range around the NFC communication interface or not. One example of the predetermined distance is about 10 cm. When a negative decision is made at S S NO the CPU repeats the processing at S. When a positive decision is made at S S YES this flow goes to S.

The CPU at S controls the NFC communication interface to establish the NFC wireless communication . The CPU at S transmits WFD connection setting information to the communication terminal over the NFC wireless communication . The WFD connection setting information is used for establishing the WFD wireless communication . One example of information contained in the WFD connection setting information is a designated SSID. The designated SSID is an SSID which is designated by the MFP and whose character string changes upon each issue. A one time SSID may be used alternatively.

The CPU at S determines whether the MFP has received a data communication request from the communication terminal over the NFC wireless communication or not. The data communication request is information for requesting communication of data e.g. image data between the communication terminal and the MFP . The data communication request may be transmitted from the communication terminal to the MFP when a data transmission command is transmitted in response to a user s input and received by the communication terminal in a state in which a program used for the data communication e.g. the application is running on the communication terminal . Also in the case where data is transmitted from the communication terminal to the MFP the data communication request may contain information about an amount of data to be transmitted such as the number of bytes and the number of pages. When a positive decision is made at S S YES this flow goes to S.

The CPU at S determines whether an amount of data to be transferred is smaller than a predetermined amount or not. This determination may be made by comparing the information about the amount of data transmitted which is contained in the data communication request with the predetermined amount. The predetermined amount may be determined in advance by the user for example. Also the predetermined amount needs to be determined such that a length of time of communication from the start to the end of the data communication is not longer in a case where the data communication is carried out over the WFD wireless communication after the communication method or communication path is switched from the NFC wireless communication to the WFD wireless communication than in a case where the data communication is carried out over the NFC wireless communication without a switch from the NFC wireless communication to the WFD wireless communication . That is when the CPU executes processings at S S for switching the communication method from the NFC wireless communication to the WFD wireless communication a switching time in which communication cannot be carried out is generated and the predetermined amount needs to be the minimum amount of data in which effects on the switching time cannot be ignored. The predetermined amount may be determined as an amount of data to be transferred and may be 100 KB for example. Also in a case where data to be transferred is image data corresponding to a plurality of pages the predetermined amount may be determined as the number of pages and may be a value of equal to or less than two pages for example.

When a positive decision is made at S S YES the amount of data to be transferred is small and accordingly the CPU determines that the data communication can be carried out using the current NFC wireless communication . In this case this flow goes to S. Processings at S and subsequent steps will be described later. When a negative decision is made at S S NO the amount of data to be transferred is large and accordingly the CPU determines that the communication path used for the data communication should be switched to the WFD wireless communication . Thus this flow goes to S.

The CPU at S displays a WFD connection check screen on the panel . The WFD connection check screen is a screen on which the user inputs a command about whether the communication path for data communication is to be switched to the WFD wireless communication or not. For example the WFD connection check screen may contain a character string Do you want to switch from NFC to WFD and button images such as a YES image and a NO image. The CPU at S determines whether an execution command for carrying out the WFD wireless communication has been input or not. This determination may be made for example by determining whether the user has touched the YES image or the NO image displayed on the WFD connection check screen. When a positive decision is made at S S YES this flow goes to S. When a negative decision is made at S S NO this flow goes to S.

The CPU at S transmits an NFC communication starting command to the communication terminal over the NFC wireless communication . The NFC communication starting command is information for commanding the communication terminal to transfer data over the NFC wireless communication .

The CPU at S uses the NFC wireless communication to carry out data communication with the communication terminal . Data to be transferred is divided into a plurality of pieces of communication unit data. The data communication is carried out for each of the pieces of communication unit data. The pieces of communication unit data may be defined by various kinds of units. For example in a case where the data to be transferred is image data representative of a plurality of pages the pieces of communication unit data respectively represent the pages of the image data. Also each of the pieces of communication unit data may be packet data for example.

The CPU at S determines whether the NFC wireless communication has been disconnected during the data communication or not. The NFC wireless communication is disconnected when the communication terminal is moved away from the MFP to a position which is distant from the MFP by equal to or greater than the predetermined distance for example. When a positive decision is made at S S YES the CPU determines that the communication path needs to be switched to the WFD wireless communication and this flow goes to S. When a negative decision is made at S S NO this flow goes to S.

The CPU at S determines whether the data communication with the communication terminal is finished or not. When a negative decision is made at S S NO this flow returns to S. When a positive decision is made at S S YES this flow goes to S. The CPU at S executes various data processings. For example when the data communication is a receipt of print data from the communication terminal the CPU at S executes a print processing based on print data. Upon completion of the processing at S this flow returns to S.

When the CPU at S determines that the data communication request has not been received S NO the CPU determines that the program used for the data communication e.g. the application is not running on the communication terminal and this flow goes to S. The CPU at S uses the NFC wireless communication to send the communication terminal an application activation command which is information for commanding the communication terminal to run the program used for the data communication. The CPU at S displays the WFD connection check screen on the panel . The WFD connection check screen is explained at S above and an explanation of which is dispensed with. The CPU at S determines whether the execution command for carrying out the WFD wireless communication has been input or not. When a negative decision is made at S S NO this flow returns to S. When a positive decision is made at S S YES this flow goes to S.

The CPU at S determines whether the WFD wireless communication can be established at this time with the communication terminal or not. For example when the wireless LAN interface can establish only one WFD wireless communication and when the WFD wireless communication is being established with the communication terminal the CPU determines that the WFD wireless communication cannot be established at this time with the communication terminal . When a positive decision is made at S S YES this flow goes to S.

The CPU at S transmits a WFD communication starting command to the communication terminal over the NFC wireless communication . The WFD communication starting command is information for commanding the communication terminal to execute data communication over the WFD wireless communication .

The CPU at S determines whether WFD connection start information has been received from the communication terminal over the NFC wireless communication or not. The WFD connection start information is information for notifying the MFP that a processing for establishing the WFD wireless communication has been started on the communication terminal . When a negative decision is made at S S NO the CPU repeats the processing at S. When a positive decision is made at S S YES this flow goes to S at which the CPU transmits a connection start response to the communication terminal over the NFC wireless communication . The connection start response is information for notifying the communication terminal that the MFP has started the processing for establishing the WFD wireless communication . The CPU at S establishes the WFD wireless communication .

The CPU at S carries out data communication with the communication terminal over the WFD wireless communication . The CPU at S determines whether the data communication with the communication terminal is finished or not. When a negative decision is made at S S NO this flow returns to S. When a positive decision is made at S S YES this flow goes to S. The CPU at S executes the data processing. The details of the data processing are explained at S above and an explanation of which is dispensed with. Upon completion of the processing at S this flow returns to S.

When the CPU at S determines that the WFD wireless communication cannot be established at this time S NO this flow goes to S. The CPU at S determines whether the NFC wireless communication can be carried out at this time or not. Specifically the CPU determines whether the NFC communication interface of the communication terminal is present within the predetermined distance from the NFC communication interface of the MFP or not. When a negative decision is made at S S NO the CPU determines that there is no communication path through which the NFC wireless communication can be carried out with the communication terminal this flow goes to S. The CPU at S notifies the user about an error of the transmission. For example the CPU may control the panel to display a character string Transmission has failed . Upon completion of the processing at S this flow returns to S.

When a positive decision is made at S S YES this flow goes to S. The CPU at S transmits the NFC communication starting command to the communication terminal over the NFC wireless communication . The details of the NFC communication starting command are explained at S above and an explanation of which is dispensed with. The CPU at S uses the NFC wireless communication to carry out data communication with the communication terminal . The details of the data communication are explained at S above and an explanation of which is dispensed with.

The CPU at S determines whether or not the state between the MFP and the communication terminal has been returned to the state in which the WFD wireless communication can be established with the communication terminal . For example when the WFD wireless communication having been established with the communication terminal is disconnected the CPU determines that the state between the MFP and the communication terminal has been returned to the state in which the WFD wireless communication can be established with the communication terminal . When a negative decision is made at S S NO this flow returns to S. When a positive decision is made at S S YES this flow goes to S.

The CPU at S determines whether communication of a certain piece of communication unit data which is being transferred in the data communication over the NFC wireless communication is completed or not. For example the CPU may determine whether or not communication of the certain piece of communication unit data is completed which is most recently transferred in the data communication over the NFC wireless communication . Specifically the CPU may determine whether or not communication of a certain piece of communication unit data is completed which is being transferred at the time when the state in which the WFD wireless communication can be established is established at S. The certain piece of communication unit data is one of a plurality of pieces of communication unit data. When a negative decision is made at S S NO the CPU repeats the processing at S.

When a positive decision is made at S S YES the CPU determines that the communication path should be switched to the WFD wireless communication at this timing and this flow goes to S. The MFP at S transmits the WFD communication starting command at S transmits the connection start response and at S establishes the WFD wireless communication . The CPU at S uses the WFD wireless communication to transmit the next piece of communication unit data after the piece of communication unit data whose transfer is determined to be completed at S.

There will be next explained operations of the communication terminal with reference to . A flow illustrated in begins when the communication terminal is turned on.

This flow begins with S at which the CPU determines whether the communication terminal has touched the MFP or not. Specifically the CPU determines whether the NFC communication interface of the MFP is located within a predetermined distance or range around the NFC communication interface of the communication terminal or not. When a negative decision is made at S S NO the CPU repeats the processing at S. When a positive decision is made at S S YES this flow goes to S. The CPU at S controls the NFC communication interface to establish the NFC wireless communication .

The CPU at S determines whether the WFD connection setting information has been received from the MFP over the NFC wireless communication or not. When a negative decision is made at S S NO the CPU repeats the processing at S. When a positive decision is made at S S YES this flow goes to S. The CPU at S stores the received WFD connection setting information into the storage device .

The CPU at S determines whether an operation for selecting data to be transferred has been accepted or not. For example in a case where print data is to be transmitted to the MFP the CPU determines whether or not an operation for selecting data to be printed has been accepted by the touch panel in the state in which the application is running. When a negative decision is made at S S NO this flow goes to S. When a positive decision is made at S S YES this flow goes to S. The CPU at S transmits the data communication request to the MFP over the NFC wireless communication and this flow goes to S.

The CPU at S determines whether the application activation command has been received from the MFP over the NFC wireless communication or not. When a negative decision is made at S S NO this flow goes to S. When a positive decision is made at S S YES this flow goes to S. The CPU at S activates the application and this flow goes to S.

The CPU at S determines whether the NFC communication starting command has been received from the MFP over the NFC wireless communication or not. When a positive decision is made at S S YES this flow goes to S. The CPU at S uses the NFC wireless communication to carry out data communication with the MFP .

The CPU at S determines whether the NFC wireless communication has been disconnected during the data communication or not. When a positive decision is made at S S YES the CPU determines that the communication path needs to be switched to the WFD wireless communication and this flow goes to S. When a negative decision is made at S S NO this flow goes to S. The CPU at S determines whether the WFD communication starting command has been received from the MFP over the NFC wireless communication or not. When a positive decision is made at S S YES this flow goes to S. When a negative decision is made at S S NO this flow goes to S.

The CPU at S determines whether the data communication with the MFP is finished or not. When a negative decision is made at S S NO this flow returns to S. When a positive decision is made at S S YES this flow returns to S.

When the CPU at S determines that the NFC communication starting command has not received S NO this flow goes to S. The CPU at S determines whether the WFD communication starting command has been received from the MFP over the NFC wireless communication or not. When a negative decision is made at S S NO this flow returns to S. When a positive decision is made at S S YES this flow goes to S.

The CPU at S transmits the WFD connection start information to the MFP over the NFC wireless communication . The CPU at S determines whether the connection start response has been received from the MFP over the NFC wireless communication or not. When a negative decision is made at S S NO the CPU repeats the processing at S. When a positive decision is made at S S YES this flow goes to S.

The CPU at S establishes the WFD wireless communication . The WFD wireless communication is established based on the WFD connection setting information stored at S.

The CPU at S uses the WFD wireless communication to carry out data communication with the MFP . The CPU at S determines whether the data communication with the MFP is finished or not. When a negative decision is made at S S NO this flow returns to S. When a positive decision is made at S S YES this flow returns to S.

There will be next explained as a first specific example operations in a case where the WFD wireless communication is established in a period in which the NFC wireless communication is carried out because the WFD wireless communication cannot be established. There will be explained by way of example a case where print data is transmitted from the communication terminal to the MFP . In this example the print data is data corresponding to three pages and a data amount of the print data is greater than a predetermined amount.

When the user has brought the communication terminal into contact with the MFP after selecting print data to be transmitted by operating the communication terminal the contact or touch is detected S YES S YES . As a result the NFC wireless communication is started S S and the WFD connection setting information is transmitted from the MFP to the communication terminal S S YES . Since the communication terminal has already accepted the selection of the print data to be transmitted S YES the data communication request is transmitted from the communication terminal to the MFP S S YES .

Since the data amount of the print data is larger than the predetermined amount S NO the MFP displays the WFD connection check screen on the panel S . Here it is assumed that the user inputs the execution command for carrying out the WFD wireless communication S YES that the MFP cannot establish the WFD wireless communication with the communication terminal because the MFP is carrying out the WFD wireless communication with the communication terminal and that the NFC wireless communication can be carried out at this time S YES .

A piece of the print data representative of the first page is transmitted from the communication terminal to the MFP over the NFC wireless communication S S . Here it is assumed that the state between the MFP and the communication terminal has been changed during the transmission of the piece of the print data representative of the first page to the state in which the WFD wireless communication can be established with the communication terminal S YES . When having received the piece of the print data representative of the first page over the NFC wireless communication S YES the MFP transmits the WFD communication starting command to the communication terminal S . When having received the WFD communication starting command S YES the communication terminal establishes the WFD wireless communication S S . A piece of the print data representative of the second page starts to be transmitted from the communication terminal to the MFP over the WFD wireless communication S S .

Upon completion of the transmission of the print data S YES S YES the MFP executes the print processing to control the printer to perform printing based on the received print data S .

There will be next explained as a second specific example operations in a case where the NFC wireless communication is disconnected in a period in which data communication carried out over the NFC wireless communication . There will be explained by way of example a case where print data is transmitted from the communication terminal to the MFP . In this example a data amount of the print data is less than the predetermined amount.

The processings S S in this example are similar to those in the first specific example and an explanation thereof is dispensed with. Since the data amount of the print data is smaller than the predetermined amount S YES the MFP transmits the NFC communication starting command S . When having received the NFC communication starting command S YES the communication terminal uses the NFC wireless communication to transmit the print data to the MFP S S .

Here there will be explained a case where the NFC wireless communication is disconnected during a transfer of the print data S YES S YES . In this case the WFD wireless communication is established S S and the transfer of the print data is started again over the WFD wireless communication S S . Operations after this operation are similar to those in the first specific example and an explanation thereof is omitted.

The communication speed in the WFD wireless communication is faster than that in the NFC wireless communication. This causes a case where data communication is executed after the communication method is switched from the NFC communication to the WFD communication. When the CPU executes the processings S S for switching the communication method however the switching time in which data communication cannot be carried out is generated. The switching time may cause a situation in which a length of time from the start to the end of data communication is longer in a case where data communication is carried out over the WFD wireless communication with a switch of the communication method than in a case where the data communication is carried out over the NFC wireless communication without any switch of the communication method. When starting data communication with the communication terminal the MFP described above can select appropriate communication between data communication using the NFC wireless communication without any switch and data communication using the WFD wireless communication with a switch making it possible to prevent a long communication time.

In the MFP described above when the NFC wireless communication is disconnected in a period in which data communication is carried out with the communication terminal over the NFC wireless communication S YES the communication path is automatically switched to the WFD wireless communication allowing the data communication to be continued S S . As a result the communication path can be made redundant making it possible to prevent an occurrence of a situation in which the data communication cannot be carried out.

When the WFD wireless communication cannot be carried out S NO the MFP described above can wait for reestablishment of the WFD wireless communication while carrying out the NFC wireless communication S . When the WFD wireless communication can be established S YES the communication path can be switched to the WFD wireless communication . As a result a period for waiting for the establishment of the WFD wireless communication can be used for a period of communication using the NFC wireless communication thereby shortening the communication time. When the communication path is switched to the WFD wireless communication in the period in which the data communication is being carried out over the NFC wireless communication a switch of the communication can be carried out at a boundary between a piece of communication unit data being transferred and the next piece of communication unit data S YES S . This processing can prevent a transmission error in the piece of communication unit data which is being transmitted at the time of the switch of the communication path.

In the MFP described above the user can bring the communication terminal on which the application is not running into contact with the MFP to activate the application on the communication terminal S S . That is the intuitive operation allows the user to activate the application required for controlling the MFP . This improves usability for the user.

While the embodiment of the present invention has been described above it is to be understood that the invention is not limited to the details of the illustrated embodiment but may be embodied with various changes and modifications which may occur to those skilled in the art without departing from the spirit and scope of the invention.

When the NFC wireless communication is established S the CPU may control the panel to display a communication path selection accepting screen on which the user selects a communication path to be used for data communication with the communication terminal between the NFC wireless communication and the WFD wireless communication . Examples of images displayed on the communication path selection accepting screen include a character string Select communication path and button images such as an NFC communication image and a WFD communication image. The MFP may be configured such that when the NFC wireless communication is selected the flow goes to S and when the WFD wireless communication is selected the flow goes to S. Thus the communication path to be used for the data communication can be determined by operation of the user. The communication path selection accepting screen is one example of an accepting screen. A processing for displaying the communication path selection accepting screen on the panel is one example of an accepting processing.

The CPU may omit the processing at S such that the flow goes from S to S. This modification can omit the processing for causing the communication terminal to activate the application . The CPU may omit the processings at S S and when a negative decision is made at S S NO the flow may go to S. In this modification when the CPU determines that the communication path is preferably switched to the WFD wireless communication the CPU can start the processing for switching the communication path to the WFD wireless communication without a need of operation of the user. The CPU may omit the processings at S S and the flow may go from S to S. This modification can shorten a length of time extending from the transmission of the WFD communication starting command to the establishment of the WFD wireless communication . In view of the above the CPU of the MFP only needs to execute at least a first communication processing a first information obtaining processing a second communication processing and a third communication processing. For example the CPU only needs to at least execute at least the processing at S one of S and S S and S.

The data communication is not limited to the transmission of the print data from the communication terminal to the MFP and includes various kinds of data communication. For example the data communication includes a transmission of scan data from the MFP to the communication terminal . In this case the MFP may at S receive a data communication request for requesting a transmission of scan data to the communication terminal . The MFP may control the scanner to scan a document to create scan data. The CPU may at S determine whether data amount of the created scan data is less than the predetermined amount or not.

Communication standards other than the NFC may be used for communication started when the communication terminal is brought into contact with the MFP . For example standards such as TransferJet may be used. The communication path after the switch is not limited to the WFD wireless communication and may be a communication path in the infrastructure mode via the wireless LAN communication .

The communication terminal may be configured such that an external memory such as a memory card can be connected to the communication terminal and various kinds of data may be stored in the external memory instead of the storage device .

The NFC standard is one example of a first communication standard. The NFC wireless communication is one example of first wireless communication. Each of the NFC communication interfaces is one example of a first communication interface. The WFD standard is one example of a second communication standard. The WFD wireless communication is one example of second wireless communication. Each of the wireless LAN interfaces is one example of a second communication interface. Each of the CPUs is one example of a processor. The MFP is one example of an information processing apparatus. The processing at S is one example of the first communication processing. The data communication request or the execution command for carrying out the WFD wireless communication is one example of first information. The processing at S or S is one example of the first information obtaining processing. The processing at S or S is one example of a determination processing. The processing at S is one example of the second communication processing. The WFD connection setting information is one example of first setting information. The processing at S is one example of the third communication processing. The processing at S is one example of a fourth communication processing. The processing at S is one example of a fifth communication processing. The application is one example of a communication program. The processing at S is one example of a second information obtaining processing. The processing at S is one example of an output processing. The NFC communication starting command is one example of first command information. The processing at S is one example of a first command information obtaining processing. The processing at S is one example of a second communication processing. The WFD communication starting command is one example of second command information. The processing at S is one example of a second command information obtaining processing. The processing at S is one example of a third communication processing. The processing at S is one example of a fourth communication processing.

