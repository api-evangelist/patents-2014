---

title: Methods and apparatuses for adapting application uplink rate to wireless communications network
abstract: Various apparatuses and methods for transmitting uplink data of an application at a user equipment are provided. In one aspect of the disclosure, uplink data of an application at a user equipment (UE) is transmitted to a network. A first amount of the uplink data expected to be buffered at a radio link control (RLC) layer is determined based on a latency of the application. A second amount of the uplink data available for transmission at the RLC layer is determined based on information provided by a modem of the UE. A data rate of the application is dynamically adjusted based on a difference between the first amount and second amount of the uplink data. In another aspect of the disclosure, an amount of the application data buffered at the RLC layer is maintained to be greater than a predetermined threshold that sets a Happy bit at an unhappy setting. The unhappy setting is communicated to the network, a data rate of the application is increased in response to an increased grant from the network due to the unhappy setting. In another aspect of the disclosure, a maximum modem supported data rate at which the user equipment (UE) transmits uplink data of an application is determined based on an uplink channel capacity estimate, a modem queue length estimate, a codec rate change frequency of the application, and a delay threshold of the modem queue.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09407563&OS=09407563&RS=09407563
owner: QUALCOMM Incorporated
number: 09407563
owner_city: San Diego
owner_country: US
publication_date: 20140211
---
This application claims priority to and the benefit of provisional patent application No. 61 864 975 filed in the United States Patent Office on 12 Aug. 2013 the entire content of which is incorporated herein by reference.

Aspects of the present disclosure relate generally to wireless communication systems and more particularly to methods and apparatuses for adapting application uplink rate to the condition of a wireless communication network.

Wireless communication networks are widely deployed to provide various communication services such as telephony video data messaging broadcasts and so on. Such networks which are usually multiple access networks support communications for multiple users by sharing the available network resources. One example of such a network is the UMTS Terrestrial Radio Access Network UTRAN . The UTRAN is the radio access network RAN defined as a part of the Universal Mobile Telecommunications System UMTS a third generation 3G mobile phone technology supported by the 3rd Generation Partnership Project 3GPP . UMTS which is the successor to Global System for Mobile Communications GSM technologies currently supports various air interface standards such as Wideband Code Division Multiple Access W CDMA Time Division Code Division Multiple Access TD CDMA and Time Division Synchronous Code Division Multiple Access TD SCDMA . UMTS also supports enhanced 3G data communications protocols such as High Speed Packet Access HSPA which provides higher data transfer speeds and capacity to associated UMTS networks.

In a UMTS network radio resources are allocated to a given user equipment UE based on UE characteristics as well as the network resource management that is based on the current radio environment. Some examples of the UE characteristics include UE category supported functionalities current radio conditions as indicated by the channel quality indicator CQI power control bits etc. Network resource management is based on the radio environment congestion power control and the quality of service QOS of the application user privileges etc.

As the modem characteristics and radio resource management algorithm are typically not known from the application user s perspective an application might experience frequent stalls and loss of data during a particular session. Even when QOS is negotiated for the application with the variations in the actual bandwidth data might still get stalled at the radio link control RLC level. As most applications available for a UE are written based on the LAN based underlying infrastructure resource management variations in the wireless environment can have foreseeable impact on the user experience such as smoothness of media data delivery.

As the demand for mobile broadband access continues to increase research and development continue to advance the UMTS technologies not only to meet the growing demand for mobile broadband access but to advance and enhance the user experience with mobile communications.

The following presents a simplified summary of one or more aspects of the present disclosure in order to provide a basic understanding of such aspects. This summary is not an extensive overview of all contemplated features of the disclosure and is intended neither to identify key or critical elements of all aspects of the disclosure nor to delineate the scope of any or all aspects of the disclosure. Its sole purpose is to present some concepts of one or more aspects of the disclosure in a simplified form as a prelude to the more detailed description that is presented later.

Aspects of the present disclosure provide a method of wireless communication operable at a user equipment UE . The UE transmits uplink data of an application operating at the UE to a network. The UE determines a first amount of the uplink data expected to be buffered at a radio link control RLC layer based on a latency of the application and determines a second amount of the uplink data available for transmission at the RLC layer based on information provided by a modem of the UE. The UE dynamically adjusts a data rate of the application based on a difference between the first amount of the uplink data and the second amount of the uplink data.

Another aspect of the disclosure provides a method of wireless communication operable at a user equipment UE . The UE transmits application data of the UE to a network. The UE maintains an amount of the application data buffered at a radio link control RLC layer to be greater than a predetermined threshold that sets a Happy bit at an unhappy setting and communicates the unhappy setting to the network. The UE increases a data rate of the application in response to an increased grant from the network due to the unhappy setting.

Another aspect of the disclosure provides a method of determining a data rate of an application at a user equipment UE . The UE determines an uplink channel capacity estimate of an uplink channel and determines a modem queue length estimate of a modem queue. The UE determines a maximum modem supported data rate at which the UE transmits uplink data of an application based on the uplink channel capacity estimate the modem queue length estimate a codec rate change frequency of the application and a delay threshold of the modem queue.

Another aspect of the disclosure provides an apparatus for wireless communication. The apparatus includes at least one processor a communication interface coupled to the at least one processor and a memory coupled to the at least one processor. The at least one processor includes a number of circuitries including first through fourth circuitries. The first circuitry is configured to transmit uplink data of an application operating at the apparatus to a network. The second circuitry is configured to determine a first amount of the uplink data expected to be buffered at a radio link control RLC layer based on a latency of the application. The third circuitry is configured to determine a second amount of the uplink data available for transmission at the RLC layer based on information provided by a modem of the apparatus. The fourth circuitry is configured to dynamically adjust a data rate of the application based on a difference between the first amount of the uplink data and the second amount of the uplink data.

Another aspect of the disclosure provides an apparatus for wireless communication. The apparatus includes at least one processor a communication interface coupled to the at least one processor and a memory coupled to the at least one processor. The at least one processor includes a number of circuitries including first through fourth circuitries. The first circuitry is configured to transmit application data of the apparatus to a network. The second circuitry is configured to maintain an amount of the application data buffered at a radio link control RLC layer to be greater than a predetermined threshold that sets a Happy bit at an unhappy setting. The third circuitry is configured to communicate the unhappy setting to the network. The fourth circuitry is configured to increase a data rate of the application in response to an increased grant from the network due to the unhappy setting.

Another aspect of the disclosure provides an apparatus for wireless communication. The apparatus includes at least one processor a communication interface coupled to the at least one processor and a memory coupled to the at least one processor. The at least one processor includes a number of circuitries including first through third circuitries. The first circuitry is configured to determine an uplink channel capacity estimate of an uplink channel. The second circuitry is configured to determine a modem queue length estimate of a modem queue. The third circuitry is configured to determine a maximum modem supported data rate at which the apparatus transmits uplink data of an application based on the uplink channel capacity estimate the modem queue length estimate a codec rate change frequency of the application and a delay threshold of the modem queue.

These and other aspects of the invention will become more fully understood upon a review of the detailed description which follows. Other aspects features and embodiments of the present invention will become apparent to those of ordinary skill in the art upon reviewing the following description of specific exemplary embodiments of the present invention in conjunction with the accompanying figures. While features of the present invention may be discussed relative to certain embodiments and figures below all embodiments of the present invention can include one or more of the advantageous features discussed herein. In other words while one or more embodiments may be discussed as having certain advantageous features one or more of such features may also be used in accordance with the various embodiments of the invention discussed herein. In similar fashion while exemplary embodiments may be discussed below as device system or method embodiments it should be understood that such exemplary embodiments can be implemented in various devices systems and methods.

The detailed description set forth below in connection with the appended drawings is intended as a description of various configurations and is not intended to represent the only configurations in which the concepts described herein may be practiced. The detailed description includes specific details for the purpose of providing a thorough understanding of various concepts. However it will be apparent to those skilled in the art that these concepts may be practiced without these specific details. In some instances well known structures and components are shown in block diagram form in order to avoid obscuring such concepts.

Aspects of the present disclosure are directed to improving the smoothness of application data transmissions between a user equipment UE and a network UE by utilizing a number of modem characteristics and radio resource management algorithms. Accordingly the application data rate may be dynamically adjusted to prevent or reduce the occurrence of undesirable conditions such as application data stalling and underutilization of available uplink bandwidth.

In this example the processing system may be implemented with a bus architecture represented generally by the bus . The bus may include any number of interconnecting buses and bridges depending on the specific application of the processing system and the overall design constraints. The bus links together various circuits including one or more processors represented generally by the processor a memory and computer readable media represented generally by the computer readable medium . The bus may also link various other circuits such as timing sources peripherals voltage regulators and power management circuits which are well known in the art and therefore will not be described any further. A bus interface provides an interface between the bus and a transceiver . The transceiver provides a means for communicating with various other apparatus over a transmission medium. In an aspect of the disclosure the transceiver may include a modem. In another aspect of the disclosure the processing system may include a modem not shown . Depending upon the nature of the apparatus a user interface e.g. keypad display speaker microphone joystick may also be provided.

The processor is responsible for managing the bus and general processing including the execution of software stored on the computer readable medium . The software when executed by the processor causes the processing system to perform the various functions described infra for any particular apparatus. The computer readable medium may also be used for storing data that is manipulated by the processor when executing software.

One or more processors in the processing system may execute software. Software shall be construed broadly to mean instructions instruction sets code code segments program code programs subprograms software modules applications software applications software packages routines subroutines objects executables threads of execution procedures functions etc. whether referred to as software firmware middleware microcode hardware description language or otherwise. The software may reside on a computer readable medium . The computer readable medium may be a non transitory computer readable medium. A non transitory computer readable medium includes by way of example a magnetic storage device e.g. hard disk floppy disk magnetic strip an optical disk e.g. a compact disc CD or a digital versatile disc DVD a smart card a flash memory device e.g. a card a stick or a key drive a random access memory RAM a read only memory ROM a programmable ROM PROM an erasable PROM EPROM an electrically erasable PROM EEPROM a register a removable disk and any other suitable medium for storing software and or instructions that may be accessed and read by a computer. The computer readable medium may reside in the processing system external to the processing system or distributed across multiple entities including the processing system . The computer readable medium may be embodied in a computer program product. By way of example a computer program product may include a computer readable medium in packaging materials. Those skilled in the art will recognize how best to implement the described functionality presented throughout this disclosure depending on the particular application and the overall design constraints imposed on the overall system.

The various concepts presented throughout this disclosure may be implemented across a broad variety of telecommunication systems network architectures and communication standards. Referring now to as an illustrative example without limitation various aspects of the present disclosure are illustrated with reference to a Universal Mobile Telecommunications System UMTS system . A UMTS network includes three interacting domains a core network a radio access network RAN e.g. the UMTS Terrestrial Radio Access Network UTRAN and a user equipment UE . Among several options available for a UTRAN in this example the illustrated UTRAN may employ a W CDMA air interface for enabling various wireless services including telephony video data messaging broadcasts and or other services. The UTRAN may include a plurality of Radio Network Subsystems RNSs such as an RNS each controlled by a respective Radio Network Controller RNC such as an RNC . Here the UTRAN may include any number of RNCs and RNSs in addition to the illustrated RNCs and RNSs . The RNC is an apparatus responsible for among other things assigning reconfiguring and releasing radio resources within the RNS . The RNC may be interconnected to other RNCs not shown in the UTRAN through various types of interfaces such as a direct physical connection a virtual network or the like using any suitable transport network.

The geographic region covered by the RNS may be divided into a number of cells with a radio transceiver apparatus serving each cell. A radio transceiver apparatus is commonly referred to as a Node B in UMTS applications but may also be referred to by those skilled in the art as a base station BS a base transceiver station BTS a radio base station a radio transceiver a transceiver function a basic service set BSS an extended service set ESS an access point AP or some other suitable terminology. For clarity three Node Bs are shown in each RNS however the RNSs may include any number of wireless Node Bs. The Node Bs provide wireless access points to a core network for any number of mobile apparatuses. Examples of a mobile apparatus include a cellular phone a smart phone a session initiation protocol SIP phone a laptop a notebook a netbook a smartbook a personal digital assistant PDA a satellite radio a global positioning system GPS device a multimedia device a video device a digital audio player e.g. MP3 player a camera a game console or any other similar functioning device. The mobile apparatus is commonly referred to as user equipment UE in UMTS applications but may also be referred to by those skilled in the art as a mobile station MS a subscriber station a mobile unit a subscriber unit a wireless unit a remote unit a mobile device a wireless device a wireless communications device a remote device a mobile subscriber station an access terminal AT a mobile terminal a wireless terminal a remote terminal a handset a terminal a user agent a mobile client a client or some other suitable terminology. In a UMTS system the UE may further include a universal subscriber identity module USIM which contains a user s subscription information to a network. For illustrative purposes one UE is shown in communication with a number of the Node Bs . The downlink DL also called the forward link refers to the communication link from a Node B to a UE and the uplink UL also called the reverse link refers to the communication link from a UE to a Node B .

The core network can interface with one or more access networks such as the UTRAN . As shown the core network is a UMTS core network. However as those skilled in the art will recognize the various concepts presented throughout this disclosure may be implemented in a RAN or other suitable access network to provide UEs with access to types of core networks other than UMTS networks.

The illustrated UMTS core network includes a circuit switched CS domain and a packet switched PS domain. Some of the circuit switched elements are a Mobile services Switching Centre MSC a Visitor Location Register VLR and a Gateway MSC GMSC . Packet switched elements include a Serving GPRS Support Node SGSN and a Gateway GPRS Support Node GGSN . Some network elements like EIR HLR VLR and AuC may be shared by both of the circuit switched and packet switched domains.

In the illustrated example the core network supports circuit switched services with a MSC and a GMSC . In some applications the GMSC may be referred to as a media gateway MGW . One or more RNCs such as the RNC may be connected to the MSC . The MSC is an apparatus that controls call setup call routing and UE mobility functions. The MSC also includes a visitor location register VLR that contains subscriber related information for the duration that a UE is in the coverage area of the MSC . The GMSC provides a gateway through the MSC for the UE to access a circuit switched network . The GMSC includes a home location register HLR containing subscriber data such as the data reflecting the details of the services to which a particular user has subscribed. The HLR is also associated with an authentication center AuC that contains subscriber specific authentication data. When a call is received for a particular UE the GMSC queries the HLR to determine the UE s location and forwards the call to the particular MSC serving that location.

The illustrated core network also supports packet switched data services with a serving GPRS support node SGSN and a gateway GPRS support node GGSN . General Packet Radio Service GPRS is designed to provide packet data services at speeds higher than those available with standard circuit switched data services. The GGSN provides a connection for the UTRAN to a packet based network . The packet based network may be the Internet a private data network or some other suitable packet based network. The primary function of the GGSN is to provide the UEs with packet based network connectivity. Data packets may be transferred between the GGSN and the UEs through the SGSN which performs primarily the same functions in the packet based domain as the MSC performs in the circuit switched domain. The packet switched data services may support various applications e.g. video telephony running at the UE in data communication with other entities in the Internet for example.

The UTRAN is one example of a RAN that may be utilized in accordance with the present disclosure. Referring to by way of example and without limitation a simplified schematic illustration of a RAN in a UTRAN architecture is illustrated. The system includes multiple cellular regions cells including cells and each of which may include one or more sectors. Cells may be defined geographically e.g. by coverage area and or may be defined in accordance with a frequency scrambling code etc. That is the illustrated geographically defined cells and may each be further divided into a plurality of cells e.g. by utilizing different scrambling codes. For example cell may utilize a first scrambling code and cell while in the same geographic region and served by the same Node B may be distinguished by utilizing a second scrambling code.

In a cell that is divided into sectors the multiple sectors within a cell can be formed by groups of antennas with each antenna responsible for communication with UEs in a portion of the cell. For example in cell antenna groups and may each correspond to a different sector. In cell antenna groups and may each correspond to a different sector. In cell antenna groups and may each correspond to a different sector.

The cells and may include several UEs that may be in communication with one or more sectors of each cell or . For example UEs and may be in communication with Node B UEs and may be in communication with Node B and UEs and may be in communication with Node B . Here each Node B and may be configured to provide an access point to a core network see for all the UEs and in the respective cells and .

During a call or data communication with a source cell or at any other time the UE may monitor various parameters of the source cell as well as various parameters of neighboring cells. Further depending on the quality of these parameters the UE may maintain communication with one or more of the neighboring cells. During this time the UE may maintain an Active Set that is a list of cells to which the UE is simultaneously connected i.e. the UTRAN cells that are currently assigning a downlink dedicated physical channel DPCH or fractional downlink dedicated physical channel F DPCH to the UE may constitute the Active Set .

The UTRAN air interface may be a spread spectrum Direct Sequence Code Division Multiple Access DS CDMA system such as one utilizing the W CDMA standards. The spread spectrum DS CDMA spreads user data through multiplication by a sequence of pseudorandom bits called chips. The W CDMA air interface for the UTRAN is based on such DS CDMA technology and additionally calls for a frequency division duplexing FDD . FDD uses a different carrier frequency for the uplink UL and downlink DL between a Node B and a UE . Another air interface for UMTS that utilizes DS CDMA and uses time division duplexing TDD is the TD SCDMA air interface. Those skilled in the art will recognize that although various examples described herein may refer to a W CDMA air interface the underlying principles are equally applicable to a TD SCDMA air interface or any other suitable air interface.

A high speed packet access HSPA air interface includes a series of enhancements to the 3G W CDMA air interface between the UE and the UTRAN facilitating greater throughput and reduced latency for users. Among other modifications over prior standards HSPA utilizes hybrid automatic repeat request HARQ shared channel transmission and adaptive modulation and coding. The standards that define HSPA include HSDPA high speed downlink packet access and HSUPA high speed uplink packet access also referred to as enhanced uplink or EUL .

In a wireless telecommunication system the communication protocol architecture may take on various forms depending on the particular application. For example in a 3GPP UMTS system the signaling protocol stack is divided into a Non Access Stratum NAS and an Access Stratum AS . The NAS provides the upper layers for signaling between the UE and the core network referring to and may include circuit switched and packet switched protocols. The AS provides the lower layers for signaling between the UTRAN and the UE and may include a user plane and a control plane. Here the user plane or data plane carries user traffic while the control plane carries control information i.e. signaling .

Turning to the AS is shown with three layers Layer 1 Layer 2 and Layer 3. Layer 1 is the lowest layer and implements various physical layer signal processing functions. Layer 1 will be referred to herein as the physical layer . The data link layer called Layer 2 is above the physical layer and is responsible for the link between the UE and Node B over the physical layer .

At Layer 3 the RRC layer handles the control plane signaling between the UE and the Node B . The RRC layer includes a number of functional entities for routing higher layer messages e.g. application data handling broadcasting and paging functions establishing and configuring radio bearers etc.

In the illustrated air interface the L2 layer is split into sublayers. In the control plane the L2 layer includes two sublayers a medium access control MAC sublayer and a radio link control RLC sublayer . In the user plane the L2 layer additionally includes a packet data convergence protocol PDCP sublayer . Although not shown the UE may have several upper layers above the L2 layer including a network layer e.g. IP layer that is terminated at a PDN gateway on the network side and an application layer that is terminated at the other end of the connection e.g. far end UE server video telephony server etc. .

The PDCP sublayer provides multiplexing between different radio bearers and logical channels. The PDCP sublayer also provides header compression for upper layer data packets to reduce radio transmission overhead security by ciphering the data packets and handover support for UEs between Node Bs.

The RLC sublayer generally supports an acknowledged mode AM where an acknowledgment and retransmission process may be used for error correction an unacknowledged mode UM and a transparent mode for data transfers and provides segmentation and reassembly of upper layer data packets and reordering of data packets to compensate for out of order reception due to a hybrid automatic repeat request HARQ at the MAC layer. In the acknowledged mode RLC peer entities such as an RNC and a UE may exchange various RLC protocol data units PDUs including RLC Data PDUs RLC Status PDUs and RLC Reset PDUs among others. In the present disclosure the term packet may refer to any RLC PDU exchanged between RLC peer entities. The MAC sublayer provides multiplexing between logical and transport channels. The MAC sublayer is also responsible for allocating the various radio resources e.g. resource blocks in one cell among the UEs. The MAC sublayer is also responsible for HARQ operations.

Aspects of the disclosure will be described below with the above described UMTS system as an example in which the application is adapted to the radio resource management needs or variations in a wireless communications network such that the smoothness of the application data flow over the wireless interface may be improved. Some aspects of the disclosure provide techniques that can invoke the smooth or gradual variation in the application management based on the radio resource management of the wireless network.

In a W CDMA system radio resource management RRM algorithms are responsible for efficient utilization of the air interface resources. Functions of the RRM include for example assuring Quality of Service QoS maintaining the planned coverage area and offering high capacity connections. The RRM algorithms can be divided into handover control power control admission control load control and packet scheduling functionalities. The RRM algorithms can be based on the amount of hardware e.g. UEs operating in the network and or on the interference levels in the air interface.

In W CDMA the access stratum has complete knowledge about the current radio conditions and the available bandwidth for a given UE . HSUPA operates on a request grant principle where the UEs request permission to send data and a packet scheduler decides when and how many UEs will be allowed to do so. A request for transmission contains data about the state of the transmission buffer and the queue at the UE and its available power margin. In HSUPA logic the Node B controls the grant given per UE up to a granularity of one transmit time interval TTI e.g. 10 ms or 2 ms TTI .

When the UEs and are in data communication application to application data may be transferred between the UEs via their respective modems and over a wireless network e.g. RAN . Furthermore the application receives modem information from the modem such that the application can determine expected and actual amount of uplink application data queued in a queue or buffer of the modem . Similarly the application may receive modem information from its modem . The expected amount of uplink data buffered at the queue should be no greater than the latency of the application.

In an aspect of the disclosure the modem information may be utilized by the UE to determine a network metric that may include uplink available bandwidth downlink available bandwidth packet loss uplink queue length and or other useful channel information. In an aspect of the disclosure the UE may transmit application to application data by a wireless uplink channel to the UE via other network entities such as but not limited to one or more base stations or Node Bs e.g. Node B and one or more RNCs e.g. RNC .

In addition the UE may determine a second amount of the uplink data available for transmission at the RLC layer based on the modem information provided by the modem of the UE block . For example the uplink data may be buffered at the queue of the modem. Furthermore the UE dynamically adjusts a data rate of the application based on a difference between the first amount of the uplink data and the second amount of the uplink data. By adjusting the data dynamically the UE may improve the smoothness e.g. avoid stalling freezing etc. of the application data flow. The method will be described in more detail below.

At the UE the MAC layer EUL logic knows the serving network grant at every TTI level. That is the MAC layer knows when data can be sent in the uplink UL direction per TTI. Therefore the MAC layer can calculate an average grant based UL data rate UL Grant average amount of uplink data rate based on the instantaneous uplink data rate over the same period T of time block . However the UE may transmit uplink data at a rate lower that the average grant based UL data rate UL Grant due to other factors such as transmitter headroom limitations and or radio environment etc.

For a certain UL Grant the number X of TTI frames worth of data present in the RLC layer UL queue available for transmission may be determined by the Equation 1 below block . The calculated X TTI frames of data may be the second amount of uplink data in block .

Referring to if it is determined that X is greater than Y the method continues to block otherwise if it is determined that X is less than Y the method continues to block . In block if X is greater than Y the application can decrease slow down its data rate because the data queued in the RLC UL queue is greater than the expected amount of buffered uplink data. In block if X is less than Y the application can increase its data rate because the data queued in the RLC UL queue is less than the expected amount of buffered uplink data. If X is equal to Y the application may keep the data rate unchanged.

In accordance with the method illustrated in the application layer data rate at the UE can be dynamically adjusted based on a difference between the amount data present in the RLC UL queue and the expected amount of buffered data based on the latency requirement of the application layer. In an aspect of the disclosure the application data rate may be adjusted according to the Equation 2 below. New Application UL Rate Current UL Rate Equation 2 

In the function fn Z Z indicates the excessive data present in the RLC UL buffer or queue. For example the excessive data may be determined as X Y frames of data where X and Y may be determined in accordance with the methods shown in . The excessive data will change due to variations in the network grant with respect to the application layer data rate or due to difference in the grant with respect to application layer data rate. The function fn z may be any suitable functions that can smoothly or gradually adjust the UL application data rate to a desired value. In an aspect of the present disclosure the fn Z may be an exponential function conceptually illustrated in the graph of . The x axis horizontal of the graph indicates the outstanding number of TTI frames worth of data e.g. excessive data X Y and the y axis vertical represents the value of the function fn Z . The function fn Z has a value of 1 for a Z value of 0 e.g. X Y 0 which indicates the grant based UL data rate is substantially or exactly matching the uplink traffic of the application. In this case the new application data rate remains the same as the current UL data rate in accordance with Equation 2 .

When the value of Z increases in the positive direction the value of the function fn Z gradually decreases and is less than 1. As a result the new application data rate is reduced in accordance with Equation 2 . On the contrary when the value of Z becomes increasingly negative the value of the function fn Z gradually increases. As such the new application data rate is increased in accordance with Equation 2 . It should be appreciated that the function shown in is just one exemplary function that may be used in this disclosure. In other aspects of the disclosure the function fn Z may be any suitable functions that can smoothly or gradually adjust the application data rate in accordance with Equation 2 .

With the above described technique illustrated with the UE can dynamically adjust the application data rate smoothly or gradually as a result of changing UL grant or other network conditions based on the information provided by the UE modem. Therefore the application will be able to proactively adjust for example the needed coding rate like encoding or flow control techniques without abrupt stalling and the user experience may be improved.

With EUL the uplink transmission power is allocated in accordance with the resource allocation requests from the UE as well as the uplink radio condition measured at the base station. Referring to upon the start of EUL communication a UE transmits a resource allocation request signal called scheduling information to a network . The UE may be the UE . When the network base station or Node B receives the request signal it notifies the UE the absolute grant network grant specifying the maximum transmission power the UE is permitted to use for transmitting UL data.

With the scheduling information the UE can indicate its outstanding buffer occupancy status highest priority logical channel and whether or not the UE is happy via the Happy bit with the serving grant etc. to the network . In UMTS the Happy bit is transmitted on the E DCH. The UE can use the Happy bit to indicate whether or not the UE can use a higher uplink data rate. If the UE cannot use a higher uplink data rate e.g. headroom limited the Happy bit is set to the happy position and thus there is no need for the scheduler to increase the uplink data rate or grant. However without the unhappy indication from the UE even if the UE has a sufficiently large buffer occupancy the network will not increase the grant to the UE because the radio resources appear to be optimally managed from the network s perspective. While the above described UL grant based logic in can ensure that the application data rate is dynamically adjusted to match the UL grant from the network it can be further improved to request additional grant from the network such that the application data rate can be further increased to give the best possible data rate to the end user.

In response to the unhappy setting the network may increase or maximize the resource management to keep the UE happy for example by increasing the UE s serving grant. In response to the increased grant the application layer may be requested to increase its data rate block . Accordingly the application data rate may be adjusted to a higher data rate e.g. a peak data rate as early as possible with the network resource management control at the radio level. When the UE is getting into the happy mode due to the increased grant the value of fn Z will fall below zero according to the function see because the UE can transmit data at the higher data rate.

In an aspect of the disclosure the application may be a video telephony VT application. The VT application operates under tight delay latency constraints due to its interactive nature. In order to maintain a desirably low delay or latency the VT application needs to be aware of the maximum rate at which it may transmit data through the modem without incurring significant queuing delay. For example if there is no queue build up at the modem the VT application may transmit at the estimated uplink channel capacity without incurring queuing delay at the modem. On the other hand if there is already queue built up at the modem the VT application may transmit at a lower rate in order to allow the queue to drain. Therefore it is desirable to consider both the estimated uplink channel capacity and the estimate of the queue length at the modem so as to arrive at a maximum rate that the modem can support without significant queue delay build up.

In an aspect of the disclosure an algorithm for estimating the capacity of an uplink channel e.g. E DCH is described below. The data capacities of a number of individual TTIs can be summed over a period of time T that corresponds to a transmit window length. An uplink channel capacity estimate is computed at a given time t by applying the algorithm over the time period T immediately preceding t. In an example T is equal to the length of a predetermined window length parameter L which may correspond to a transmission window length for the UE. In other words in an aspect of the disclosure T t L t . Therefore the uplink channel capacity estimate at time t may be determined by the Equation 3 below over a time period T 

Therefore as represented by the above equation 3 an uplink channel capacity estimate at time t can be determined by summing the TTI data capacities at all relevant TTIs over T and dividing that sum by the total amount of time occupied by the relevant TTIs. In an aspect of the disclosure a TTI is considered relevant where there exists data awaiting transmission during the TTI or data is transmitted or retransmitted during the TTI.

In an aspect of the disclosure the maximum modem supported rate for handling the VT data can be determined in accordance with Equation 4 .

The parameter Modem queue length may be the estimated modem queue length in block . The parameters Q offset and Q drain duration can vary dynamically. In one aspect of the disclosure the value of Q drain duration may be set to depend on the frequency with which the video codec is able to change its rate setting. For example the value of Q drain duration may be set to 1 video codec rate change freq. Here video codec rate change freq is the frequency at which the video codec can change its rate.

In an aspect of the disclosure the minimum and maximum values for Q drain duration may be set to Q drain duration min and Q drain duration max respectively and the value of Q drain duration may be determined by Equation 5 .

Here Q drain duration min and Q drain duration max are constants that determine the smallest and largest allowed setting for the vale of Q drain duration. The value of Q offset may be set to a suitable value such that it reflects the amount of delay or latency in the modem queue that the VT application may tolerate. In an aspect of the disclosure the Q offset can be set as follows  offset Modem uplink channel capacity delay threshold where delay threshold is the amount of delay or latency that is tolerated in the modem queue. This parameter delay threshold may be dynamically varied. In some aspects of the disclosure the delay threshold and the application latency may be the same.

In one aspect of the disclosure the processor may execute an application data rate adjustment routine to configure the various circuitries of the processor to perform the functions and processes illustrated in . For example a first circuitry may be configured to determine a first amount of uplink data expected to be buffered at an RLC layer of the UE based on an application latency of an application. The application may be the application . A second circuitry may be configured to determine a second amount of uplink data available for transmission at the RLC layer based on information provided by a modem of the UE. A third circuitry may be configured to dynamically adjust a data rate of the application based on a difference between the first amount of the uplink data and the second amount of the uplink data. A fourth circuitry may be configured to request increased network grant from a network by performing the methods and processes illustrated in . For example the fourth circuitry may maintain an amount of the uplink data buffered at the RLC layer to be greater than a predetermined threshold that sets a Happy bit at an unhappy setting and communicate the unhappy setting to the network.

In one aspect of the disclosure the processing system may be configured to determine a maximum modem supported data rate at the UE as illustrated in . A fifth circuitry may be configured to determine an uplink channel capacity estimate of an uplink channel. A sixth circuitry may be configured to determine a modem queue length estimate of a modem queue . A seventh circuitry may be configured to determine a maximum modem supported data rate at which the UE transmits data of an application based on the uplink channel capacity estimate the modem queue length estimate a codec rate change frequency of the application and a delay threshold of the modem queue.

Several aspects of a telecommunications system have been presented with reference to a W CDMA system. As those skilled in the art will readily appreciate various aspects described throughout this disclosure may be extended to other telecommunication systems network architectures and communication standards.

By way of example various aspects may be extended to other UMTS systems such as TD SCDMA and TD CDMA. Various aspects may also be extended to systems employing Long Term Evolution LTE in FDD TDD or both modes LTE Advanced LTE A in FDD TDD or both modes CDMA2000 Evolution Data Optimized EV DO Ultra Mobile Broadband UMB IEEE 802.11 Wi Fi IEEE 802.16 WiMAX IEEE 802.20 Ultra Wideband UWB Bluetooth and or other suitable systems. The actual telecommunication standard network architecture and or communication standard employed will depend on the specific application and the overall design constraints imposed on the system.

It is to be understood that the specific order or hierarchy of steps in the methods disclosed is an illustration of exemplary processes. Based upon design preferences it is understood that the specific order or hierarchy of steps in the methods may be rearranged. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented unless specifically recited therein.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but are to be accorded the full scope consistent with the language of the claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. A phrase referring to at least one of a list of items refers to any combination of those items including single members. As an example at least one of a b or c is intended to cover a b c a and b a and c b and c and a b and c. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed under the provisions of 35 U.S.C. 112 sixth paragraph unless the element is expressly recited using the phrase means for or in the case of a method claim the element is recited using the phrase step for. 

