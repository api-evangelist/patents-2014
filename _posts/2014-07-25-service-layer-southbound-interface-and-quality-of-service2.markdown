---

title: Service layer southbound interface and quality of service
abstract: Existing resource reservation techniques are inefficient for M2M communications. In an example embodiment described herein, a system comprises a service layer server that resides on a service layer and a control plane node that resides on an access network, wherein the service layer server communicates with the control plane node via a control plane interface. The control plane interface can be used to configure quality of service (QoS) policies (rules) that are based on an object that is being addressed. In this context, for example, an object may be a memory location or value. For example, the service layer may configure one or more QoS rules for the access network based on the object by sending a QoS provisioning message that includes one or more parameters to the control plane node. The control plane node may determine the object that is identified in the one or more QoS rules, and the QoS rules may be distributed to one or more routers that may be used to access the object. The access network may apply the one or more QoS rules in accordance with the parameters.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09621470&OS=09621470&RS=09621470
owner: Convida Wireless, LLC
number: 09621470
owner_city: Wilmington
owner_country: US
publication_date: 20140725
---
This application claims the benefit of U.S. Provisional Patent Application Ser. No. 61 858 386 filed Jul. 25 2013 the disclosure of which is hereby incorporated by reference as if set forth in its entirety herein.

Quality of service QoS generally refers to a data pipe such as a general packet radio service GPRS tunnel protocol GTP tunnel for example between two end points that provides a specific level quality of service. The level or quality of service may be defined by parameters such as for example maximum bit rate delay packet loss or the like. Existing approaches to providing QoS include resource reservation and packet marking without resource reservation. Resource reservation in networks is traditionally used for internet protocol IP flows that are associated with streaming media such as video and audio for example. In an example communications network such as an machine to machine M2M network or system the number of M2M devices connected to the network may be several orders of magnitude greater than what is connected to typical broadband and mobile networks. The existing resource reservation techniques are inefficient for various communication networks such as M2M systems for example.

Systems methods and apparatus embodiments are described herein for configuring quality of service QoS rules by a service layer. Existing resource reservation techniques are inefficient for M2M communications. In an example embodiment described herein a system comprises a service layer server that resides on a service layer and a control plane node that resides on an access network wherein the service layer server communicates with the control plane node via a control plane interface. The control plane interface can be used to configure quality of service QoS policies rules that are based on an object that is being addressed. In this context for example an object may be a memory location internet address resource name or value. For example the service layer may configure one or more QoS rules for the access network based on the object by sending a QoS provisioning message that includes one or more parameters to the control plane node. The control plane node may determine the object that is identified in the one or more QoS rules and the QoS rules may be distributed to one or more routers that may be used to access the object. The access network may apply the one or more QoS rules in accordance with the parameters.

In an example embodiment an system comprising a service layer server that resides within a service layer and a control plane node that resides within an access network. The service layer server provisions a quality of service QoS rule via the control plane interface. The QoS rule is associated with an object such that the QoS rule is applied when the object is identified. The object can be at least one of an internet protocol IP address port number or resource name. The QoS rule may indicate various parameters. For example the QoS associated with the object may indicate a route that a message associated with the object should be directed through the access network. In one embodiment the service layer server is a services capability server and the control plane node is a policy and charging rules function PCRF . Further the QoS rule may be provisioned directly from the services capability server to the PCRF over a diameter based Rx interface. Alternatively the QoS rule may be provisioned indirectly from the services capability server to the PCRF via a machine type communications inter working function.

In another example embodiment a router in an access network may receive a message indicative of an object. The router may perform a deep packet inspection on the message. The router may identify the object indicated by the message during the deep packet inspection and in response to identifying the object a quality of service QoS rule may be applied to the message. The object may indicate a destination of the message. The destination may an internet protocol IP address a port number or a resource name. For example the router may determine that the access network is in a congestion condition and based on the congestion condition the router may reject the message for a backoff time indicated in the QoS rule. By way of another example the router may route the message through a preferred route of the access network wherein the preferred route is indicated by the QoS rule.

The ensuing detailed description is provided to illustrate exemplary embodiments and is not intended to limit the scope applicability or configuration of the invention. Various changes may be made in the function and arrangement of elements and steps without departing from the spirit and scope of the invention.

Referring to an example M2M system includes a plurality of devices such as a plurality of machine to machine M2M devices for example and a service layer that can communicate with the M2M devices via an access network . As used herein an M2M device may refer to any device that communicates in a network such as gateway devices or terminal endpoint devices for example. Though the illustrated system includes the M2M devices it will be understood that other devices may communicate within the system as desired. The M2M devices can include M2M end point devices routers or the like. As one example one or more of the M2M devices may have the hardware architecture illustrated in described more fully below or a variation thereof or one or more the M2M devices may have the architecture of the computing system illustrated in also described more fully below . The service layer may include a service capability server SCS an M2M server a one M2M server or the like. Thus the system which can include the access network can provide connectivity between the service layer which may include an M2M server or an SCS and one or more M2M devices . The service layer may further provide services for and thus communicate with one or more applications such as network applications . In accordance with the illustrated embodiment the access network includes one or more data plane nodes that may route data traffic between the devices and the service layer . The data plane nodes that are closer in proximity to the devices as compared to the service layer may be referred to as south edge nodes which can include one or more south edge routers for example. The data plane nodes that are closer in proximity to the service layer as compared to the devices may be referred to as north edge nodes which can include one or more north edge routers for example. Thus the data plane nodes can include south edge routers and north edge routers . As one example the routers and may have the configuration illustrated in described more fully below or a variation thereof. In an example embodiment the system provides the service layer with a control plane interface that can be used by the service layer to provide the access network with quality of service QoS information as further described below.

Still referring to in accordance with the illustrated embodiment the service layer has the control plane interface with the access network . The control plane interface can be used to configure quality of service QoS policies such as QoS rules for example that are based on an object that is being addressed. In this context for example an object may be a memory location a value an internet address or a resource name. The access network may include one or more control plane nodes that may distribute the QoS rule s to select ones of the data plane nodes . The one or more control plane nodes may also be referred to generally as the network control plane and the one or more data plane nodes may also be referred to generally as the data plane . In accordance with an example embodiment the control plane nodes distribute an example QoS rule to only the data plane nodes that may be used to access an object that is identified in the QoS rule. In some cases as described further below one or more of the data plane routers and may perform deep packet inspection DPI to recognize whether an object that was identified in a rule is being accessed. In an example embodiment when one of the data plane routers and detects that a rule needs to be applied a message is sent to the other data plane routers and in the network to reserve resources for the traffic flow. As used herein traffic flow is used interchangeably with other terms such as data flow internet protocol flow flow or the like. Generally a packet is characterized into a particular flow by its destination for instance an IP address or port number for example. QoS rules may be applied to particular messages that are associated with a particular object. Alternatively or additionally QoS rules may be applied to entire traffic flows that include multiple messages that are associated with the object. For example when an example flow ends expires or is modified the data plane routers and may send notifications to each other to adjust the amount of resources that are reserved for the flow e.g. see .

Still referring generally to in accordance with another embodiment the service layer sends a Group QoS Provisioning message to the access network control plane CP node . The control plane node may distribute one or more QoS rules to the data plane nodes that may be used to access an object that is identified in the QoS rule. One or more of the data plane routers and may use deep packet inspection to determine that an object identified in a rule is being accessed. In some cases the CP Node checks whether the QoS rule or policy that is required by one of the devices can be supported. By way of an example scenario when determining how much for instance an amount of resources should be reserved for a data flow the control plane node may consider whether the device is part of a group. For example the control plane node may determine data plane bearers that are not required by one of the devices that is part of the group and thus do not contribute to the aggregate bandwidth that is provided by the network because the group has already reserved the maximum amount of allowed resources. Thus in accordance with the example scenario above a new group member may cause resources to be shared differently instead of causing an allotted amount of the resources to be increased. In some cases one of the data plane routers and detects that a rule needs to be applied a message may be sent to the other data plane routers and in the network to reserve resources for a particular data flow. For example when the data flow ends expires or is modified the data plane routers and may send notifications to each other to adjust the amount of resources that are reserved for the particular flow e.g. see .

As used herein unless otherwise specified the term object and derivations thereof of such as the term object identity ID for example refers to an addressable resource container value memory location or the like. For example an object can be hosted in a device e.g. user equipment UE ZigBee sensor or the like or in an M2M server e.g. application server AS services capability server SCS or the like .

It will be understood that the system depicted in may map to the 3GPP evolved packet core EPC such that embodiments described herein can be implemented in accordance with 3GPP EPC. For example the reference point of may map to the Rx reference point in 3GPP EPC. The south edge routers may be implemented in nodes such as an eNodeB a serving gateway S GW and an evolved packet data gateway ePDG . The north edge routers may be implemented in nodes such as a packet data network PDN gateway P GW and a traffic detection function TDF . The control plane nodes may include various nodes such as for example a policy and charging rules function PCRF TDF machine type communications MTC inter working function MTC IWF policy and charging enforcement function PCEF mobile management entity MME eNodeB S GW and P GW. It will be understood that some of the above nodes may implement the data plane nodes and the control plane nodes .

Table 1 below shows a comparison of example QoS approaches depicted in . The example advantages and disadvantage columns in Table 1 refer to advantages and disadvantages of one example implementation of the respective QoS approaches.

The Internet Engineering Task Force IETF has defined two approaches to providing QoS in IP networks Integrated Services IntServ and Differentiated Services DiffServ . Integrated Services IntServ follows at least a portion of the example resource reservation approach described above in that the end hosts signal their strict QoS needs to the network and reserve resources. DiffServ implements packet marking without resource reservation in that network elements are set up to service multiple classes of traffic with varying and coarse QoS requirements based on packet marking.

In the 3GPP EPC IMS QoS is defined by various parameters such as for example Priority e.g. 1 9 Delay Budget e.g. 100 ms 300 ms Packet Loss Rate e.g. 10 2 to 10 6 Guaranteed Bit Rate GBR or non GBR and Required Bit Rate if GBR . The 3GPP EPC IMS follows the signaled QoS model where one or both of the flow endpoints can request data plane resources from the network. 3GPP provides the receive Rx reference point to Application Functions such as an Services Capability Server SCS or an IP multimedia subsystem IMS call session control function CSCF to provision QoS rules on a per flow basis. A flow is generally described in terms of the end point s transport addresses. 3GPP allows UEs to make control plane requests such as Resource Bearer Activation and Resource Bearer Modification for data plane resources.

In release 10 3GPP added the ability to configure UEs as low priority . During times of congestion session management and mobility management requests from low priority user equipments UEs can be rejected by the core network. The rejection message may include a back off time. The rejection can also be based on the access point name APN that is associated with the session management SM or mobility management MM request. Further in release 10 3GPP introduced extended access baring EAB . In EAB the network can broadcast a message that bars certain groups of UEs from originating signaling.

The low priority and EAB features are not traditional QoS mechanisms but may be considered QoS mechanisms in accordance with the descriptions of various embodiments described herein. For example such features may be referred to as QoS mechanisms in that they give a lower priority to traffic that originates from a certain UE or a certain group of UEs.

In an example embodiment an M2M architecture such as the M2M system for example provides various QoS mechanisms. Various embodiments described herein refer to the system for convenience. It will be appreciated that the example system is simplified to facilitate description of the disclosed subject matter and is not intended to limit the scope of this disclosure. Other devices systems and configurations may be used to implement the embodiments disclosed herein in addition to or instead of a system such as the system and all such embodiments are contemplated as within the scope of the present disclosure. Referring to the M2M system includes the service layer that may include at least one M2M server that has a business relationship with an operator of the access network which can be referred to as the access network operator. The business relationship may mean that the owner of the M2M server has an agreement with the access network operator that allows the M2M server to interface to communicate with the access network . For example the access network may allow the M2M server to sends policies to a PCRF that is within the access network . The at least one M2M server may include a southbound interface that can be used for resource reservation. In some cases it may be assumed that the network applications have no business relationship with the access network operator. As used herein the aforementioned southbound interface may refer to a logical interface or reference point such as within an M2M server application server service layer service capability server application function or the like for example that can exchange information with nodes within the access network which can be referred to collectively as access network nodes. Such access network nodes may include presented by way of example and without limitation a PCRF MTC IWF or the like.

In some example cases the network applications do not have a business relationship with each other and the network applications communicate with the M2M devices via one or more M2M servers that reside within the service layer . Thus the network applications may rely on at least one M2M server to communicate with the M2M devices . Still referring to the above example because the network applications do not have a business relationship with each other their actions might not be coordinated with each other but the network applications may be connecting to and communicating with the same ones of the M2M devices .

Table 2 depicts relationships between the various entities depicted in that are assumed in accordance with a one embodiment.

As described above resource reservation may be used for IP flows that are associated with streaming media such as for example video audio or the like. In an example M2M system such as the M2M system for example the number of M2M devices that are connected to the network may be several orders of magnitude greater than what is connected to broadband and mobile networks. The IP flows that exist between the M2M devices and an M2M Server may be numerous. Thus in accordance with various example embodiments described herein the IP flows that exist between M2M devices and M2M servers are characterized differently than IP flows that are associated with traditional streaming media applications.

It is recognized herein that existing resource reservation techniques are inefficient for M2M communications. For example existing techniques do not account for the fact that some M2M flows can be delayed for relatively long periods of time without impacting the user experience. By way of further example it is often inefficient to characterize individual data flows that travel to and from M2M devices. Rather it can be more efficient to characterize some data flows as a group as described further below in accordance with various embodiments described herein. It is further recognized herein that existing resource reservation techniques might not allow resources to be reserved and shared between IP flows that belong to entities that have no relationship with each other. Such entities may be referred to as unrelated entities. For example unrelated entities might not be able to coordinate their traffic with each other as QoS is often used by streaming media applications that cannot be delayed until a later time. In an example embodiment the service layer coordinates groups activities of the network applications that have no relationship with each other.

By way of further example it is recognized herein that existing QoS mechanisms often do not allow applications or services to efficiently reserve network resources for infrequent transmissions that need to be sent with short delay. For example existing resource reservation techniques such as those provided by 3GPP allow applications or services to configure how much delay a flow can incur. This approach requires that the QoS requirements be set up and reserved before the flow starts. In an example implementation of existing 3GPP resource reservation a user may initially experience a large delay before a voice call starts. Thus the 3GPP resource reservation approach may not be suitable for various scenarios such as for example a scenario in which a sensor is required to immediately send a shutdown command to a transformer that is deployed on a power line.

With continuing reference to the illustrated call flow demonstrates an example of how QoS can be configured by the service layer based on object names and how the access network can apply the QoS policies. In accordance with the illustrated embodiment at the service layer sends a QoS configuration message to one of the access network control plane nodes for instance a CP node . The message may include various parameters such as those parameters identified in Table 3 below for example. Thus the QoS configuration message may include at least one new QoS rule. It will be understood that the QoS configuration message can include other parameters as desired.

Still referring to in accordance with the illustrated embodiment at the CP Node may send an acknowledgement of the new QoS rule to the service layer and in particular to an SCS. If the request failed for QoS configuration fails the message that is sent at may indicate a cause of the failure. At in accordance with the illustrated embodiment the CP Node passes the QoS rule to ones of the data plane routers and that may be used to access the Object that is identified in the QoS rule e.g. shown in Table 3 . For example the message at may be sent to at least one for example all of the routers and in the access network . By way of further example the message that includes the at least one QoS rule may be sent to a subset of the routers by the CP node and then disseminated to the other routers by the north edge routers . Based on the QoS rule the CP node may determine the route that the flow should take through the network . In an example the CP Node configures the other control plane nodes and the data plane nodes to apply a specific label packet marking to at least some for instance all packets that are associated with a particular object. In some cases after the packets are marked deep packet inspection DPI may not need to be performed on the marked packets. The marking label may indicate how the packet should be handled processed .

Still referring to in accordance with the illustrated embodiment at one or more routers for instance the north edge routers router may send an acknowledgement to the node that sent the rule. At some time after the acknowledgements are sent at least one of the north edge routers may use deep packet inspection to recognize that the Object that was identified in the rule e.g. Table 3 is being accessed. Step is illustrated as bidirectional to show that this initial access may be initiated by the device or the service layer . While the illustrated embodiment shows the north edge router performing DPI it will be understood that the DPI may be performed by at least one of the south edge routers or any other data plane router that was configured with the QoS rule. By way of example the QoS rule may dictate that the flow goes through a different route through the network . By way of further example the QoS rule may indicate that the flow should go through a particular north edge router for instance a north edge router that can route data with a lower latency as compared to the other routers in the network. Thus for example the particular north edge router may inform the other routers where to direct traffic. The flow route which may also be referred to as the hops may be included in and thus may be part of the QoS rule.

At one of the north edge routers may recognize that downlink resources will need to be reserved for the data flow. The north edge router may send a message to the other data plane routers for instance the south edge routers in the network to reserve resources for the flow. Step is illustrated as bidirectional to show that the north edge router may request resources from the south edge routers and the south edge routers may acknowledge the request by sending an acknowledgement message to the north edge router . Thus in accordance with the illustrated embodiment the north edge router informs the other routers in the network of the QoS rule. Alternatively the CP Node may inform nodes for instance the routers and of the QoS rule. If resource reservation identified in the QoS rule fails the north edge router may inform the CP node of the failure and the CP node may inform the service layer and in particular the SCS of the failure. At the data flow between the device and the SCS continues in accordance with the one or more configured QoS rules. One or more for instance all of the data plane routers and may continue to perform DPI on the flow to apply the QoS rules and to determine how long the QoS rules should be applied. Step is illustrated as bidirectional to show that the flow is bidirectional. At when the flow ends expires or is modified for example the service layer and in particular the SCS and the CP node may send notifications to each other to adjust the amount of resources that are reserved for the flow. At when the flow ends expires or is modified for example the data plane routers and may send notifications to each other to adjust the amount of resources that are reserved for the flow. Step is illustrated as bidirectional to show that in accordance with an example the north edge router may send a message to the south edge routers to request that the south edge routers release the network resources and the south edge routers may send an acknowledgement message to the north edge router to acknowledges the request. Similarly at when the flow ends expires or is modified for example the north edge data plane routers and the CP node may send notifications to each other to adjust the amount of resources that are reserved for the flow. Alternatively or additionally at the messages at may be initiated by a congestion situation in the network. For example congestion may cause the network to decrease the amount of resources that are reserved for the flow. By way of example a flow may be modified when a different object is accessed.

It is understood that the entities performing the steps illustrated in are logical entities that may be implemented in the form of software e.g. computer executable instructions stored in a memory of and executing on a processor of a device server or computer system such as those illustrated in . That is the methods illustrated in may implemented in the form of software e.g. computer executable instructions stored in a memory of a computing device such as the device or computer system illustrated in which computer executable instructions when executed by a process of the computing device perform the steps illustrated in . In particular for example the control plane node in the access network may comprise a processor and a memory the memory containing computer executable instructions that when executed by the processor cause the processor to perform operations comprising receiving a quality of service QoS rule associated with an object such that the QoS rule is applied when the object is identified. Based on the QoS rule the control plane node may determine a route that a message associated with the object should take through the access network . Further the control plane node may direct other control plane nodes to mark packets associated with the object with a label wherein the label is indicative of the determined route. In one embodiment based on the QoS rule the control plane node provisions at least one of the routers in the access network with the QoS rule such that the at least one router applies the QoS rule when the object is identified. In another embodiment the control plane node based on the QoS rule provisioning all routers and in the access network with the QoS rule such that all of the routers and in the access network apply the QoS rule when the object is identified. The object may be at least one of an internet protocol IP address port number resource name or memory location.

By way of further example at least one node that resides within the service layer such as a service layer server for example may comprise a processor and a memory the memory containing computer executable instructions that when executed by the processor cause the processor to perform operations comprising at provisioning a quality of service QoS rule via the control plane interface the QoS rule associated with an object such that the QoS rule is applied when the object is identified. As described above the QoS rule associated with the object may indicate a route that a message associated with the object should be directed through the access network . Alternatively or additionally the QoS rule may indicate a maximum aggregate bit rate associated with a group of devices that communicate with the services capability server via the access network . In one embodiment as further described below the service layer server is a services capability server SCS and the control plane node is a policy and charging rules function PCRF . In such an embodiment the QoS rule may be provisioned directly from the services capability server to the PCRF over a diameter based Rx interface. Alternatively in the aforementioned embodiment the QoS rule may be provisioned indirectly from the services capability server to the PCRF via a machine type communications inter working function MTC IWF .

Thus referring to at the routers and such as one of the routers for example may comprise a processor and a memory the memory containing computer executable instructions that when executed by the processor cause the processor to perform operations comprising receiving a message indicative of an object. The operations may further comprising performing a deep packet inspection on the message and identifying the object indicated by the message during the deep packet inspection. In response to identifying the object the router may apply a quality of service QoS rule to the message. As described above the object may indicate a destination of the message. The destination may be at least one of an internet protocol IP address port number resource name or memory location. Applying the QoS rule may include in accordance with an example determining that the access network is in a congestion condition and based on the congestion condition rejecting the message for a backoff time indicated in the QoS rule see e.g. Table 3 . In some cases the router may apply the QoS rule and route the message through a preferred route of the access network wherein the preferred route is indicated by the QoS rule see e.g. Table 3 . As described with reference to and the router may receive the QoS rule from a service layer server that resides in the service layer via the control plane node of the access network . The router may send the QoS rule to other routers within the access network .

Still referring generally to in accordance with the illustrated embodiment one or more QoS rules are provisioned in the access network for future use. A QoS rule may be applied when the access network detects some event such as access of a particular object for example that causes the rule to be enacted. The QoS rules may be pre provisioned and applied throughout the access network when the flow is detected. Thus in some cases the example embodiment may provide a benefit in that neither the devices nor the service layer are required to configure a particular flow before it starts.

During periods of congestion the access network can use the delay tolerance parameters to determine which flows need to be terminated reduced delayed or disallowed. For example when congestion is first detected resources that are reserved for flows with a high delay tolerance can be reduced completely terminated delayed or told to back off. For example the back off time may be based on the flow s delay tolerance.

In an example embodiment when QoS rules are applied to a flow details of the QoS rules may be captured in charging records that are associated with a flow. For example if a flow is assigned a delay value or flagged as acceptable to reject during congestion then this information may be captured in the associated charging data records CDRs . By way of a further example if a customer elects to flag a flow as one that is rejected during congestion then the customer may be charged less than what the customer would be charged for a higher priority flow.

Referring to the TDF may be an entity that performs DPI and detects that a QoS rule should be applied. When the TDF detects that a QoS rule should be applied for example a message may be sent to the P GW that will cause it to activate or modify a bearer so that the proper QoS can be provided.

Information about the flow may also be disseminated to the P GW S GW and MME so that for example these nodes can use the flow information to make decisions about what flows should be subject to back off control during times of congestion. Various Nodes such as the S GW MME eNodeB and P GW for example may be used to detect congestion situations in the network and then cause the amount of resources that are dedicated to delay tolerable flows to be reduced.

In an example embodiment the TDF may provide the P GW with a list of service data flows SDFs that may be reduced. For example the P GW may use the Bearer Modification Procedure with Bearer QoS Update referenced below to reduce the amount of resources that are reserved for the bearers that carry the selected flows. Alternatively the P GW may use the PDN GW Initiated Bearer Deactivation procedure referenced below to deactivate the bearers that are reserved for the bearers that carry the selected flows. When the bearer is deactivated or modified the UE may be provided with a back off time that it must observe before attempting to modify or activate a bearer. The Bearer Modification Procedure with Bearer QoS Update and PDN GW Initiated Bearer Deactivation procedures are further described in 3GPP TS 23.401 General Packet Radio Service GPRS enhancements for Evolved Universal Terrestrial Radio Access Network E UTRAN access which is incorporated by reference as if set forth in its entirety herein.

In another example embodiment QoS rules may be provisioned in the UDR by the SCS. The PCRF may retrieve the rules from the UDR. In yet another example embodiment the interface may be routed through the MTC IWF and to the PCRF via the Tsp and T6b interfaces. Thus QoS rules may be provisioned indirectly from the services capability server to the PCRF via a machine type communications MTC inter working function IWF . Alternatively in accordance with another embodiment the interface may be routed through the MTC IWF via the Tsp interface.

The example QoS parameters that are listed in Table 3 and Table 4 and traditional QoS parameters such as for example bit rate bit error rate and the like combine to result in a large number of potential QoS configurations. Thus in an example embodiment network operators may choose to limit the number of parameter combinations that can be selected. Table 4 illustrates one example of how an access network operator may choose to limit the number of possible QoS configurations. It will be understood that QoS configurations can be unlimited or alternatively combined as desired.

In accordance with an example embodiment service layer deployments may connect with devices over multiple access networks. For example some devices may be able to switch their service layer connection between access networks or simultaneously connect to the service layer via more than one access network. In an example embodiment the service layer is able to command a device to use a particular access network or dictate to the device how its traffic should be partitioned between the access networks. In another example embodiment the service layer is able to inform the access network of what policies a device should follow when selecting an access network. For example the access network may then pass the policies to the device via various protocols e.g. ANSDF .

It will be understood that an SCS may be in control of numerous devices and may know that the aggregate bit rate or QoS needs of a particular group of devices may not exceed a certain threshold. For example suppose an SCS has control of a group of 100 devices. The SCS may know that each individual device will not require more than 1 Mbps of uplink or downlink bandwidth at a given time but that the maximum aggregate bit rate across all devices in the group will not exceed 20 Mbps. If the SCS provides the access network with the aggregate bit rate of group then the access network may be able to more efficiently manage its resources. For example rather than reserving 100 Mbps of bandwidth it may reserve 20 Mbps of bandwidth and virtually reserve 1 Mbps of bandwidth for each of the 100 devices in the group. By way of further example for purposes of illustration suppose a scenario in which 99 members of the group are connected each member is given a virtual guarantee of 1 Mbps and 100 of the access network s data plane bandwidth has been allocated. If the 100th member of the group requests a QoS guarantee of 1 Mbps the access network will know to grant the request because aggregate bandwidth demands on the access network are not going to increase. The above scenarios are presented for purpose of illustration and not limitation.

In accordance with another example embodiment the call flow depicted in can be used to make group QoS reservations as described below. Referring to at the service layer and in particular a SCS of the service layer may send a Group QoS Provisioning message to the CP node . The message may include the parameters that are illustrated in Table 3 and the message may further include the message contents that are shown in Table 5 below.

At in accordance with the group provisioning example the CP Node acknowledges the new QoS rule s . At the CP node may pass send the QoS rule to the north edge routers that may be used to access the Object that is identified in the QoS rule e.g. Table 5 . This message may be sent to one or more for instance all of the routers and in the access network . For example this message may be sent to a subset of the routers by the CP node and then disseminated to the other routers by the north edge routers . At each router may send an acknowledgement to the node that sent the rule. At as described above the north edge router may perform deep packet inspection to recognize that the Object that was identified in the rule e.g. Table 3 is being accessed. The CP Node checks determines whether the GBR that is required by the device can be supported. In making this determination the CP Node may take into account that device is part of a group and thus that the data plane bearers that are required by the device may not contribute to the aggregate bandwidth that will need to be provided by the network . Alternatively a control plane request from the SCS may initiate the request for data plane bearers to the device . While the illustrated embodiment shown in shows the North Edge router performing DPI it will be understood that this can alternatively be performed by a South Edge router or any other data plane router that was configured with the QoS rule. At in accordance with the illustrated example the North Edge router recognizes that downlink resources will need to be reserved for the data flow. A message is sent to the other data plane routers in the network to reserve resources for the flow. At the data flow between the device and the service layer and in particular the SCS within the service layer continues. At least one for instance all of the data plane routers and may continue to perform DPI on the flow to apply the QoS rules and to determine how long the QoS rules should be applied. At when the flow ends expires or is modified for example the data plane routers and may send notifications to each other to adjust the amount of resources that are reserved for the flow. Alternatively or additionally steps may be initiated in response to a congestion situation in the network . For example congestion may cause the network to decrease the amount of resources that are reserved for the flow.

It will be understood that the actors that perform the call flow of can be mapped to the 3GPP EPC as described above. For example at shows the data plane router using DPI to detect that a flow has started. In an example 3GPP EPC network the TDF may be the node that performs this DPI step. Alternatively the data plane resources may be explicitly requested by a UE in a Data Bearer Modification message.

As shown in the M2M IoT WoT communication system includes a communication network . The communication network may be a fixed network e.g. Ethernet Fiber ISDN PLC or the like or a wireless network e.g. WLAN cellular or the like or a network of heterogeneous networks. For example the communication network may comprise multiple access networks for instance the access network that provide content such as voice data video messaging broadcast or the like to multiple users. For example the communication network may employ one or more channel access methods such as code division multiple access CDMA time division multiple access TDMA frequency division multiple access FDMA orthogonal FDMA OFDMA single carrier FDMA SC FDMA and the like. Further the communication network may comprise other networks such as a core network the Internet a sensor network an industrial control network a personal area network a fused personal network a satellite network a home network or an enterprise network for example.

As shown in the M2M IoT WoT communication system may include the Infrastructure Domain and the Field Domain. The Infrastructure Domain refers to the network side of the end to end M2M deployment and the Field Domain refers to the area networks usually behind an M2M gateway. The Field Domain includes M2M gateways and terminal devices . It will be appreciated that any number of M2M gateway devices and M2M terminal devices may be included in the M2M IoT WoT communication system as desired. The gateway devices or the terminal devices may be configured as the devices in a system that performs QoS provisioning in accordance with the embodiments described above. Each of the M2M gateway devices and M2M terminal devices are configured to transmit and receive signals via the communication network or direct radio link. The M2M gateway device allows wireless M2M devices e.g. cellular and non cellular as well as fixed network M2M devices e.g. PLC to communicate either through operator networks such as the communication network or direct radio link. For example the M2M devices may collect data and send the data via the communication network or direct radio link to an M2M application or M2M devices . The M2M devices may also receive data from the M2M application or an M2M device . Further data and signals may be sent to and received from the M2M application via an M2M service layer as described below. M2M devices and gateways may communicate via various networks including cellular WLAN WPAN e.g. Zigbee 6LoWPAN Bluetooth direct radio link and wireline for example. The terminal devices and the gateway devices may communicate via various networks to exchange QoS rules as described above.

Referring also to the illustrated M2M service layer in the field domain provides services for the M2M application M2M gateway devices M2M terminal devices and the communication network . It will be understood that the M2M service platform may communicate with any number of M2M applications M2M gateway devices M2M terminal devices and communication networks as desired. The M2M service layer may be implemented by one or more servers computers or the like. The M2M service layer provides service capabilities that apply to the M2M terminal devices the M2M gateway devices and the M2M applications . The functions of the M2M service layer may be implemented in a variety of ways for example as a web server in the cellular core network in the cloud etc. For example the QoS provisioning described above may be implemented on various servers within the M2M service layer .

Similar to the illustrated M2M service layer an M2M service layer resides in the infrastructure domain. The M2M service layer provides services for an M2M application and an underlying communication network in the infrastructure domain. The M2M service layer also provides services for the M2M gateway devices and M2M terminal devices in the field domain. It will be understood that the M2M service layer may communicate with any number of M2M applications M2M gateway devices and M2M terminal devices. The M2M service layer may interact with a service layer by a different service provider. The M2M service layer may be implemented by one or more servers computers virtual machines e.g. cloud compute storage farms etc. or the like.

Referring still to the M2M service layers and can provide a core set of service delivery capabilities that diverse applications and verticals can leverage. These service capabilities enable M2M applications and to interact with devices and perform functions such as data collection data analysis device management security billing service device discovery etc. Essentially these service capabilities can free the applications of the burden of implementing these functionalities thus simplifying application development and reducing cost and time to market. The service layers and also may enable M2M applications and to communicate through various networks and in connection with the services that the service layers and provide.

As used herein a service layer may refer to a software middleware layer that supports value added service capabilities through a set of Application Programming Interfaces APIs and underlying networking interfaces. Both ETSI M2M and one M2M use a service layer that may implement the MAC PHY layer functions described herein. ETSI M2M s service layer is referred to as the Service Capability Layer SCL . Embodiments described herein may be implemented as part of the SCL wherein the messages may be based on various protocols such as for example MQTT or AMQP. The SCL may be implemented within an M2M device where it is referred to as a device SCL DSCL a gateway where it is referred to as a gateway SCL GSCL and or a network node where it is referred to as a network SCL NSCL . The one M2M service layer supports a set of Common Service Functions CSFs e.g. service capabilities . An instantiation of a set of one or more particular types of CSFs is referred to as a Common Services Entity CSE which can be hosted on different types of network nodes e.g. infrastructure node middle node application specific node . Further provisioning and applying QoS rules as described herein can be implemented as part of an M2M network that uses a Service Oriented Architecture SOA and or a resource oriented architecture ROA to access. Further the context managers of the present application can implemented as part of an M2M network that uses a Service Oriented Architecture SOA and or a resource oriented architecture ROA to access services such as the context manager of the present application.

The M2M applications and may include applications in various industries such as without limitation transportation health and wellness connected home energy management asset tracking and security and surveillance. As mentioned above the M2M service layer running across the devices gateways and other servers of the system supports functions such as for example data collection device management security billing location tracking geofencing device service discovery and legacy systems integration and provides these functions as services to the M2M applications and .

The processor may be a general purpose processor a special purpose processor a conventional processor a digital signal processor DSP a plurality of microprocessors one or more microprocessors in association with a DSP core a controller a microcontroller Application Specific Integrated Circuits ASICs Field Programmable Gate Array FPGAs circuits any other type of integrated circuit IC a state machine and the like. The processor may perform signal coding data processing power control input output processing and or any other functionality that enables the M2M device to operate in a wireless environment. The processor may be coupled to the transceiver which may be coupled to the transmit receive element . While depicts the processor and the transceiver as separate components it will be appreciated that the processor and the transceiver may be integrated together in an electronic package or chip. The processor may perform application layer programs e.g. browsers and or radio access layer RAN programs and or communications. The processor may perform security operations such as authentication security key agreement and or cryptographic operations such as at the access layer and or application layer for example.

The transmit receive element may be configured to transmit signals to or receive signals from an M2M service platform . For example in an embodiment the transmit receive element may be an antenna configured to transmit and or receive RF signals. The transmit receive element may support various networks and air interfaces such as WLAN WPAN cellular and the like. In an embodiment the transmit receive element may be an emitter detector configured to transmit and or receive IR UV or visible light signals for example. In yet another embodiment the transmit receive element may be configured to transmit and receive both RF and light signals. It will be appreciated that the transmit receive element may be configured to transmit and or receive any combination of wireless or wired signals.

In addition although the transmit receive element is depicted in as a single element the M2M device may include any number of transmit receive elements . More specifically the M2M device may employ MIMO technology. Thus in an embodiment the M2M device may include two or more transmit receive elements e.g. multiple antennas for transmitting and receiving wireless signals.

The transceiver may be configured to modulate the signals that are to be transmitted by the transmit receive element and to demodulate the signals that are received by the transmit receive element . As noted above the M2M device may have multi mode capabilities. Thus the transceiver may include multiple transceivers for enabling the M2M device to communicate via multiple RATs such as UTRA and IEEE 802.11 for example.

The processor may access information from and store data in any type of suitable memory such as the non removable memory and or the removable memory . For example the processor may store and access context information as described above from the non removable memory and or the removable memory to determine whether there is context information that satisfies a context information request. The non removable memory may include random access memory RAM read only memory ROM a hard disk or any other type of memory storage device. The removable memory may include a subscriber identity module SIM card a memory stick a secure digital SD memory card and the like. In other embodiments the processor may access information from and store data in memory that is not physically located on the M2M device such as on a server or a home computer.

The processor may receive power from the power source and may be configured to distribute and or control the power to the other components in the M2M device . The power source may be any suitable device for powering the M2M device . For example the power source may include one or more dry cell batteries e.g. nickel cadmium NiCd nickel zinc NiZn nickel metal hydride NiMH lithium ion Li ion etc. solar cells fuel cells and the like.

The processor may also be coupled to the GPS chipset which is configured to provide location information e.g. longitude and latitude regarding the current location of the M2M device . It will be appreciated that the M2M device may acquire location information by way of any suitable location determination method while remaining consistent with an embodiment.

The processor may further be coupled to other peripherals which may include one or more software and or hardware modules that provide additional features functionality and or wired or wireless connectivity. For example the peripherals may include an accelerometer an e compass a satellite transceiver a sensor a digital camera for photographs or video a universal serial bus USB port a vibration device a television transceiver a hands free headset a Bluetooth module a frequency modulated FM radio unit a digital music player a media player a video game player module an Internet browser and the like.

In operation CPU fetches decodes and executes instructions and transfers information to and from other resources via the computer s main data transfer path system bus . Such a system bus connects the components in computing system and defines the medium for data exchange. System bus typically includes data lines for sending data address lines for sending addresses and control lines for sending interrupts and for operating the system bus. An example of such a system bus is the PCI Peripheral Component Interconnect bus.

Memory devices coupled to system bus include random access memory RAM and read only memory ROM . Such memories include circuitry that allows information to be stored and retrieved. ROMs generally contain stored data that cannot easily be modified. Data stored in RAM can be read or changed by CPU or other hardware devices. Access to RAM and or ROM may be controlled by memory controller . Memory controller may provide an address translation function that translates virtual addresses into physical addresses as instructions are executed. Memory controller may also provide a memory protection function that isolates processes within the system and isolates system processes from user processes. Thus a program running in a first mode can access only memory mapped by its own process virtual address space it cannot access memory within another process s virtual address space unless memory sharing between the processes has been set up.

In addition computing system may contain peripherals controller responsible for communicating instructions from CPU to peripherals such as printer keyboard mouse and disk drive .

Display which is controlled by display controller is used to display visual output generated by computing system . Such visual output may include text graphics animated graphics and video. Display may be implemented with a CRT based video display an LCD based flat panel display gas plasma based flat panel display or a touch panel. Display controller includes electronic components required to generate a video signal that is sent to display .

Further computing system may contain network adaptor that may be used to connect computing system to an external communications network such as network of .

It is understood that any or all of the systems methods and processes described herein may be embodied in the form of computer executable instructions i.e. program code stored on a computer readable storage medium which when executed by a machine such as a computer server peer M2M terminal device M2M gateway device or the like perform and or effectuate the systems methods and processes described herein. Specifically any of the steps operations or functions described above may be implemented in the form of such computer executable instructions. Computer readable storage media include both volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information but such computer readable storage media do not includes signals. Computer readable storage media include but are not limited to RAM ROM EEPROM flash memory or other memory technology CDROM digital versatile disks DVD or other optical disk storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other physical medium which can be used to store the desired information and which can be accessed by a computer.

In describing preferred embodiments of the subject matter of the present disclosure as illustrated in the figures specific terminology is employed for the sake of clarity. The claimed subject matter however is not intended to be limited to the specific terminology so selected and it is to be understood that each specific element includes all technical equivalents that operate in a similar manner to accomplish a similar purpose.

This written description uses examples to disclose the invention including the best mode and also to enable any person skilled in the art to practice the invention including making and using any devices or systems and performing any incorporated methods. The patentable scope of the invention is defined by the claims and may include other examples that occur to those skilled in the art. Such other examples are intended to be within the scope of the claims if they have structural elements that do not differ from the literal language of the claims or if they include equivalent structural elements with insubstantial differences from the literal languages of the claims. This written description uses examples to disclose the invention including the best mode and also to enable any person skilled in the art to practice the invention including making and using any devices or systems and performing any incorporated methods. The patentable scope of the invention is defined by the claims and may include other examples that occur to those skilled in the art. Such other examples are intended to be within the scope of the claims if they have structural elements that do not differ from the literal language of the claims or if they include equivalent structural elements with insubstantial differences from the literal languages of the claims.

