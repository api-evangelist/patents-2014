---

title: Voice font speaker and prosody interpolation
abstract: Multi-voice font interpolation is provided. A multi-voice font interpolation engine allows the production of computer generated speech with a wide variety of speaker characteristics and/or prosody by interpolating speaker characteristics and prosody from existing fonts. Using prediction models from multiple voice fonts, the multi-voice font interpolation engine predicts values for the parameters that influence speaker characteristics and/or prosody for the phoneme sequence obtained from the text to spoken. For each parameter, additional parameter values are generated by a weighted interpolation from the predicted values. Modifying an existing voice font with the interpolated parameters changes the style and/or emotion of the speech while retaining the base sound qualities of the original voice. The multi-voice font interpolation engine allows the speaker characteristics and/or prosody to be transplanted from one voice font to another or entirely new speaker characteristics and/or prosody to be generated for an existing voice font.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09472182&OS=09472182&RS=09472182
owner: Microsoft Technology Licensing, LLC
number: 09472182
owner_city: Redmond
owner_country: US
publication_date: 20140226
---
Conventional text to speech TTS techniques use a single voice font. This voice font is trained with a recording corpus obtained from one voice talent. The resulting voice font strongly corresponds to the prosody and characteristics used by the voice talent when recording the corpus. Accordingly when being recorded the voice talent must use the same style and emotion that is desired in the TTS voice.

As the use of TTS becomes more prevalent the flexibility of the TTS voice becomes increasingly important in various application scenarios. For example an interactive application utilizing TTS to communicate with the user should provide the user with the ability to select from multiple voice personalities that are able to express rich emotion types and speaking styles. As TTS applications become more conversational and personal the ability of the TTS application to adapt the speech style and or the emotion of the speech of a single voice to match the conversational content is also desirable.

To get recordings covering a variety of emotions and styles for even a single voice is costly. Obtaining the desirable variety of recordings for multiple voices is not only costly but impracticable. Attempts to transplant an emotion or speaking style from one recording voice font to other voice fonts using conventional voice adaptation techniques have resulted in poor quality voice fonts that fail to convey the desired emotion and or style and has highlighted the close relationship between the original recording and the emotion and or style used by the voice talent. It is with respect to these and other considerations that the present invention has been made. Although relatively specific problems have been discussed it should be understood that the embodiments disclosed herein should not be limited to solving the specific problems identified in the background.

This summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description section. This summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

Embodiments of a multi voice font interpolation engine include a text parser one or more characteristic predictors one or more characteristic interpolators and a normalizer. The multi voice font interpolation engine loads or otherwise receives multiple voice fonts from the voice font repository into memory. A text parser parses the text to be spoken into a phoneme sequence that when combined with a voice font produces computer generated speech with the sound style and emotion specified by the voice font and provides other information useful for predicting natural acoustic features. The characteristic predictors for natural acoustic features such as a duration predictor a V UV predictor a fundamental frequency f0 predictor and a spectrum predictor use the corresponding parameter prediction models to predict the characteristic values for each of the source voice fonts. The characteristic interpolators such as a duration interpolator a V UV interpolator a fundamental frequency f0 interpolator and a spectrum interpolator employ different weight sets for interpolating characteristics of the multi voice font from the selected characteristics of each source voice font.

The interpolation method performed by the multi voice font interpolation engine predicts characteristic values for components of the input text e.g. each phoneme or frame in the phoneme sequence using the characteristic prediction model supplied by each source voice font. Next a relative weighting factor for one or more characteristics are assigned to each the source voice fonts contributing to the multi voice font. In various embodiments the sum of each set of weighting factors is set to one. The multi voice font interpolation engine interpolates the final duration of each input text component by summing the weighted predicted characteristic values from the source voice fonts and normalizes the interpolated f0 values for the phoneme sequence. The interpolated duration values the interpolated spectral trajectory values the interpolated V UV decisions and the normalized interpolated F0 values may be used in a speech synthesis operation that generates a signal usable by an audio output transducer to produce speech using the resulting multi voice font having the selected speaker and or prosody characteristics and or saved as a multi voice font for later use.

Various embodiments are described more fully below with reference to the accompanying drawings which form a part hereof and which show specific exemplary embodiments. However embodiments may be implemented in many different forms and should not be construed as limited to the embodiments set forth herein rather these embodiments are provided so that this disclosure will be thorough and complete and will fully convey the scope of the embodiments to those skilled in the art. Embodiments may be practiced as methods systems or devices. Accordingly embodiments may take the form of a hardware implementation an entirely software implementation or an implementation combining software and hardware aspects. The following detailed description is therefore not to be taken in a limiting sense.

Embodiments of a multi voice font interpolation engine are described herein and illustrated in the accompanying figures. The multi voice font interpolation engine allows the production of computer generated speech with a wide variety of speaker characteristics and or prosody by interpolating speaker characteristics and prosody from existing fonts. Using the prediction models from multiple voice fonts the multi voice font interpolation engine predicts values for the parameters that influence speaker characteristics and or prosody for the phoneme sequence obtained from the text to spoken. For each parameter additional parameter values are generated by a weighted interpolation from the predicted values. Modifying an existing voice font with the interpolated parameters changes the style and or emotion of the speech while retaining the base sound qualities of the original voice. The multi voice font interpolation engine allows the speaker characteristics and or prosody to be transplanted from one voice font to another or entirely new speaker characteristics and or prosody to be generated for an existing voice font.

A voice font storage holds a number of existing voice fonts . The voice font storage may be local storage e.g. a hard drive or other secondary storage on the client device or remote storage e.g. a storage device accessible over a network . The existing voice fonts are often but are not limited to original voice fonts trained from a recording corpus collected from a voice talent. Each existing voice font has a number of associated parameters that define the sound style and emotion of the voice used to render the computer generated speech. Generally a voice font includes prediction models for the duration fundamental frequency f0 the spectral envelope and the voiced unvoiced V UV decision. Duration contributes mostly to the rhythm of the voice. The f0 contour contributes to the tone of the voice. The spectral envelope the f0 range and the voiced unvoiced decision are more relevant to the speaker characteristics and prosody. In other words the spectral envelope the f0 range and the voiced unvoiced parameter primarily control the style and emotion of the speech produced using the voice font. The existing voice fonts represent diverse emotions and speaking styles.

The multi voice font interpolation engine includes a text parser a duration interpolator an f0 interpolator a normalizer a V UV decision interpolator and a spectrum interpolator . The multi voice font interpolation engine loads or otherwise receives multiple voice fonts from the voice font repository into memory. The text parser parses the input text to be spoken into a phoneme sequence that when combined with a voice font produces computer generated speech with the sound style and emotion specified by the voice font. In various embodiments the text parser performs additional functions such as but not limited to identifying parts of speech phase segmentation and semantic components in the input text. The additional information provided by the text parser is useful for predicting natural acoustic features such as but not limited to duration V UV f0 and spectrum characteristics.

The duration interpolator the V UV interpolator the f0 interpolator and the spectrum interpolator use the corresponding parameter prediction models to predict the values for each of the loaded voice fonts. The multi voice font interpolation engine employs different weight sets for interpolating the four characteristics. In various embodiments three weight sets are used. The first weight set is associated with duration i.e. the duration weights . The second weight set is associated with f0 i.e. the f0 weights . Each weight set includes a weighting factor for each of the voice fonts used by the multi voice font interpolation engine. The third weight set is associated with the spectrum i.e. the spectrum weights and also the V UV decision because the V UV decision is closely tied i.e. directly proportional to the spectral trajectory and independently varying the values tends to significantly reduce voice quality. For each increment of the input text the interpolated value is the sum of the products of the predicted values and the associated weighting factor for the voice font and summed to produce an interpolated parameter value. Adjusting the weight given to each voice font influencing the interpolated values alters the speaker characteristics and or prosody of the computer generated speech.

The normalizer normalizes the interpolated f0 values using interpolated upper and lower limits for the f0 range of the predicted f0 values and the interpolated f0 values. In the illustrated embodiment the multi voice font interpolation engine includes a voice encoder i.e. vocoder that renders the input text as speech using the interpolated values. In various embodiments the computer generated speech is played through the audio output transducer i.e. speaker of the client device.

Together the voice fonts and the weight sets that produce the computer generated speech having the interpolated speaker characteristics and or prosody defines a multi voice font. Generally source voice fonts most closely resembling the desired speaker characteristic and or prosody are selected and the weights are tuned to approach the desired voice. In various embodiments the multi voice font interpolation engine saves the multi voice font as a configuration file specifying the source voice fonts and the associated weighting factors in the three weight sets. In some embodiments the configuration file may be part of a wrapper that includes the source voice fonts. In other embodiments the source voice fonts are stored separately and loaded from references in the configuration file.

A voice font characteristic prediction operation predicts characteristic values for components i.e. linguistic units of the input text e.g. each phoneme or frame in the phoneme sequence using the characteristic prediction model supplied by each source voice font. In various embodiments the voice font characteristic prediction operation includes a duration prediction operation a V UV decision prediction operation an f0 prediction operation and a spectrum prediction operation . The duration prediction operation predicts the duration value for each phoneme in the phoneme sequence using the duration prediction model supplied by each source voice font. The V UV decision prediction operation predicts the V UV probability for each phoneme in the phoneme sequence using the V UV decision prediction model supplied by each source voice font. It is not necessary to make the actual V UV decision for the phonemes using each source voice font as the final V UV decision will be made from the interpolated V UV probability value for the phoneme. The f0 prediction operation predicts the f0 value for each frame using the f0 prediction model supplied by each source voice font. Each frame represents a fixed length of time. The spectrum prediction operation predicts the spectral trajectory value for each frame using the spectrum prediction model supplied by each source voice font. In the illustrated embodiment some of the prediction operations are shown as occurring in parallel branches because the spectral trajectory prediction is not dependent on the V UV decision or f0 predictions.

A characteristic weight setting operation assigns a relative weighting factor for one or more characteristics to each of the source voice fonts contributing to the multi voice font. In various embodiments the characteristic weight setting operation includes a duration weight setting operation an f0 weight setting operation and a spectrum weight setting operation . The duration weight setting operation assigns a relative duration weighting factor wto each the source voice fonts contributing to the multi voice font. The f0 weight setting operation assigns the f0 weighting factor wto each the source voice fonts contributing to the multi voice font. The spectrum weight setting operation assigns the relative spectrum weighting factor wto each the source voice fonts contributing to the multi voice font. In various embodiments the sum of each set of weighting factors is set to one as mathematically expressed in the following equations 

The duration weighting factors wand the f0 weighting factors wprimarily control the prosody of the multi voice font while the spectrum weighting factors wto primarily control the speaker characteristics. The duration f0 and spectrum weighting factors may be independently controlled to achieve the desired style and or emotion effect in the multi voice font.

A characteristic interpolation operation interpolates the final duration of each input text component by summing the weighted predicted characteristic values from the source voice fonts. In various embodiments the characteristic interpolation operation includes a duration interpolation operation a spectral trajectory interpolation operation a V UV decision interpolation operation and an f0 interpolation operation

The duration interpolation operation interpolates the final duration of each phoneme by summing the weighted predicted duration values from the source voice fonts. In other words duration interpolation operation sums the product of the duration values predicted by each source voice font duration prediction model and the duration weighting factor assigned to the source voice font for each phoneme. Mathematically the interpolated duration of the i th phoneme from the input text is expressed as 

The spectral trajectory interpolation operation interpolates the final spectral trajectory of each frame of the phoneme sequence. In various embodiments the spectral trajectory for each source voice font is predicted using the associated prediction models and then interpolated using the spectrum weighting factors. In other words the spectral trajectory interpolation operation sums the product of the spectral trajectory values predicted by each source voice font spectral trajectory prediction model and the spectrum weighting factor assigned to the source voice font. Mathematically the interpolated spectral trajectory of f th frame from the input text is expressed as 

The V UV decision interpolation operation interpolates whether each phoneme is voiced or unvoiced by comparing the combined weighted predicted V UV probability values from the source voice fonts to a threshold. In other words the V UV decision interpolation operation sums the product of the V UV probability values predicted by each source voice font V UV decision prediction model and the spectrum weighting factor assigned to the source voice font for each phoneme and compares the sum to a reference value e.g. a threshold . If the sum is greater than or equal to the threshold the phoneme is voiced in the multi voice font. Otherwise the phoneme is unvoiced in the multi voice font. Although described as a threshold alternate logic for making the V UV decision may be used without departing from the scope and spirit of the invention. For example the reference value may be treated as a ceiling with sums less than the ceiling indicating that the phoneme is voiced in the multi voice font. Mathematically the V UV decision of i th phoneme from the input text is expressed as 

The f0 interpolation operation interpolates the final f0 value for each frame of the phoneme sequence by summing the weighted predicted f0 values from the source voice fonts. In other words the f0 interpolation operation sums the product of the f0 values predicted by each source voice font f0 prediction model and the f0 weighting factor assigned to the source voice font. Mathematically the interpolated f0 of f th frame is expressed as 

An f0 normalization operation normalizes the interpolated f0 values for the phoneme sequence. In order to normalize the interpolated f0 values the upper and lower limits of the target f0 range and the interpolated f0 range are interpolated using weighted estimates of upper and lower limits for the f0 range for each source voice font. In various embodiments the f0 normalization operation includes an f0 range limit estimation operation that estimates the upper and lower limits of the target f0 range based on the values of the predicted f0 ranges. For example the estimated upper and lower limits of the final f0 range may be calculated as the average upper and lower limits of the f0 ranges predicted for each of the source voice fonts.

A target f0 limit interpolation operation interpolates the upper and lower limits of the target f0 range using the spectrum weight. An interpolated f0 limit interpolation operation interpolates the upper and lower limits of the interpolated f0 range are interpolated using the f0 weight. The upper limit f0and the lower limit f0of the target f0 range and the upper limit f0and the lower limit f0of the interpolated f0 range are mathematically expressed as 

The interpolated duration values the interpolated spectral trajectory values the interpolated V UV decisions and the normalized interpolated F0 values are used in a speech synthesis operation that generates a signal usable by an audio output transducer to produce speech using the resulting multi voice font having the selected speaker and or prosody characteristics. A multi voice font storage operation saves the resulting multi voice font for reuse.

One or more source voice font weight selection controls e.g. sliders allow the relative weights assigned to various characteristics e.g. duration spectrum or f0 weights of each source voice font to be adjusted for use as described in the interpolation method . The various characteristics may be independently adjusted by accessing the corresponding characteristic selection control e.g. tabs . One or more multi voice font property controls e.g. sliders allow the overall properties e.g. volume speech rate pitch level or pitch range to be adjusted.

Rendering font selection controls e.g. buttons allows the selection of the voice font used to render the input text as computer generated speech. Playback controls e.g. play pause and stop buttons allow the input text to be rendered as computer generated speech using any of the source voice fonts or the interpolated multi voice font. The rendered speech may be played via the audio output transducer i.e. speaker of the client device.

A font save control e.g. button allows the multi voice font to be saved for reuse. A speech save control e.g. button allows the computer generated speech rendered using the multi voice font to be saved as an audio file.

The subject matter of this application may be practiced in a variety of embodiments as systems devices and other articles of manufacture or as methods. Embodiments may be implemented as hardware software computer readable media or a combination thereof. The embodiments and functionalities described herein may operate via a multitude of computing systems including without limitation desktop computer systems wired and wireless computing systems mobile computing systems e.g. mobile telephones netbooks tablet or slate type computers notebook computers and laptop computers hand held devices multiprocessor systems microprocessor based or programmable consumer electronics minicomputers and mainframe computers.

User interfaces and information of various types may be displayed via on board computing device displays or via remote display units associated with one or more computing devices. For example user interfaces and information of various types may be displayed and interacted with on a wall surface onto which user interfaces and information of various types are projected. Interaction with the multitude of computing systems with which embodiments of the invention may be practiced include keystroke entry touch screen entry voice or other audio entry gesture entry where an associated computing device is equipped with detection e.g. camera functionality for capturing and interpreting user gestures for controlling the functionality of the computing device and the like.

As stated above a number of program modules and data files may be stored in the system memory . While executing on the processing unit the software applications may perform processes including but not limited to one or more of the stages of the interpolation method . Other program modules that may be used in accordance with embodiments of the present invention may include electronic mail and contacts applications word processing applications spreadsheet applications database applications slide presentation applications drawing applications etc.

Furthermore embodiments of the invention may be practiced in an electrical circuit comprising discrete electronic elements packaged or integrated electronic chips containing logic gates a circuit utilizing a microprocessor or on a single chip containing electronic elements or microprocessors. For example embodiments of the invention may be practiced via a system on a chip SOC where each or many of the illustrated components may be integrated onto a single integrated circuit. Such an SOC device may include one or more processing units graphics units communications units system virtualization units and various application functionality all of which are integrated or burned onto the chip substrate as a single integrated circuit. When operating via an SOC the functionality described herein with respect to the software applications may be operated via application specific logic integrated with other components of the computing device on the single integrated circuit chip . Embodiments of the invention may also be practiced using other technologies capable of performing logical operations such as for example AND OR and NOT including but not limited to mechanical optical fluidic and quantum technologies. In addition embodiments of the invention may be practiced within a general purpose computer or in any other circuits or systems.

The computing device may also have one or more input device s such as a keyboard a mouse a pen a sound input device a touch input device etc. The output device s such as a display speakers a printer etc. may also be included. The aforementioned devices are examples and others may be used. The computing device may include one or more communication connections allowing communications with other computing devices . Examples of suitable communication connections include but are not limited to RF transmitter receiver and or transceiver circuitry universal serial bus USB parallel and or serial ports.

The term computer readable media as used herein may include computer storage media. Computer storage media may include volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures or program modules. The system memory the removable storage device and the non removable storage device are all examples of computer storage media i.e. memory storage . Computer storage media may include random access memory RAM read only memory ROM electrically erasable read only memory EEPROM flash memory or other memory technology compact disc read only memory CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other article of manufacture which can be used to store information and which can be accessed by the computing device . Any such computer storage media may be part of the computing device .

One or more application programs may be loaded into the memory and run on or in association with the operating system . Examples of the application programs include phone dialer programs e mail programs personal information management PIM programs word processing programs spreadsheet programs Internet browser programs messaging programs and so forth. The system also includes a non volatile storage area within the memory . The non volatile storage area may be used to store persistent information that should not be lost if the system is powered down. The application programs may use and store information in the non volatile storage area such as e mail or other messages used by an e mail application and the like. A synchronization application not shown also resides on the system and is programmed to interact with a corresponding synchronization application resident on a host computer to keep the information stored in the non volatile storage area synchronized with corresponding information stored at the host computer. As should be appreciated other applications may be loaded into the memory and run on the mobile computing device including software applications described herein.

The system has a power supply which may be implemented as one or more batteries. The power supply might further include an external power source such as an AC adapter or a powered docking cradle that supplements or recharges the batteries.

The system may also include a radio that performs the function of transmitting and receiving radio frequency communications. The radio facilitates wireless connectivity between the system and the outside world via a communications carrier or service provider. Transmissions to and from the radio are conducted under control of the operating system . In other words communications received by the radio may be disseminated to the application programs via the operating system and vice versa.

The visual indicator may be used to provide visual notifications and or an audio interface may be used for producing audible notifications via the audio transducer . In the illustrated embodiment the visual indicator is a light emitting diode LED and the audio transducer is a speaker. These devices may be directly coupled to the power supply so that when activated they remain on for a duration dictated by the notification mechanism even though the processor and other components might shut down for conserving battery power. The LED may be programmed to remain on indefinitely until the user takes action to indicate the powered on status of the device. The audio interface is used to provide audible signals to and receive audible signals from the user. For example in addition to being coupled to the audio transducer the audio interface may also be coupled to a microphone to receive audible input such as to facilitate a telephone conversation. In accordance with embodiments of the present invention the microphone may also serve as an audio sensor to facilitate control of notifications as will be described below. The system may further include a video interface that enables an operation of an on board camera to record still images video streams and the like.

A mobile computing device implementing the system may have additional features or functionality. For example the mobile computing device may also include additional data storage devices removable and or non removable such as magnetic disks optical disks or tape. Such additional storage is illustrated by the non volatile storage area .

Data information generated or captured by the mobile computing device and stored via the system may be stored locally on the mobile computing device as described above or the data may be stored on any number of storage media that may be accessed by the device via the radio or via a wired connection between the mobile computing device and a separate computing device associated with the mobile computing device for example a server computer in a distributed computing network such as the Internet. As should be appreciated such data information may be accessed via the mobile computing device via the radio or via a distributed computing network. Similarly such data information may be readily transferred between computing devices for storage and use according to well known data information transfer and storage means including electronic mail and collaborative data information sharing systems.

The description and illustration of one or more embodiments provided in this application are intended to provide a complete thorough and complete disclosure the full scope of the subject matter to those skilled in the art and not intended to limit or restrict the scope of the invention as claimed in any way. The embodiments examples and details provided in this application are considered sufficient to convey possession and enable those skilled in the art to practice the best mode of claimed invention. Descriptions of structures resources operations and acts considered well known to those skilled in the art may be brief or omitted to avoid obscuring lesser known or unique aspects of the subject matter of this application. The claimed invention should not be construed as being limited to any embodiment example or detail provided in this application unless expressly stated herein. Regardless of whether shown or described collectively or separately the various features both structural and methodological are intended to be selectively included or omitted to produce an embodiment with a particular set of features. Further any or all of the functions and acts shown or described may be performed in any order or concurrently. Having been provided with the description and illustration of the present application one skilled in the art may envision variations modifications and alternate embodiments falling within the spirit of the broader aspects of the general inventive concept embodied in this application that do not depart from the broader scope of the claimed invention.

